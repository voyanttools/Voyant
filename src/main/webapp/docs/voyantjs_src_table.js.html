

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: voyantjs/src/table.js | Voyant Tools Help</title>

    <link rel="shortcut icon" type="image/ico" href="favicon.ico">
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: 150px; height: 150px">
        
            <a href="index.html">
                <img src="imgs/info/about/icon.png" width="100%" height="100%">
            </a>
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Voyant Tools Help</a></h1>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
        <ol class="lnb-tab">
            <li id="examples-tab">
                <a href="#"><h4>Voyant</h4></a>
            </li>            <li id="api-tab">
                <a href="#"><h4>Spyral</h4></a>
            </li>
        </ol>
    
    <div class="lnb-examples hidden"><h3>Voyant</h3><ul><li><a href="tutorial-guides.html">Guides</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="guides_sub"><ul class="inner"><li><a href="tutorial-start.html">Getting Started</a></li><li><a href="tutorial-corpuscreator.html">Creating a Corpus</a></li><li><a href="tutorial-modifyingcorpus.html">Modifying a Corpus</a></li><li><a href="tutorial-embedding.html">Embedding Voyant</a></li><li><a href="tutorial-skins.html">Skins</a></li><li><a href="tutorial-languages.html">Languages</a></li><li><a href="tutorial-stopwords.html">Stopwords</a></li><li><a href="tutorial-search.html">Search</a></li><li><a href="tutorial-categories.html">Categories</a></li><li><a href="tutorial-palette.html">Palette</a></li><li><a href="tutorial-grids.html">Grids</a></li><li><a href="tutorial-new.html">What's New</a></li><li><a href="tutorial-tutorial.html">Tutorial/Workshop</a></li></ul></div></li><li><a href="tutorial-info.html">Information</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="info_sub"><ul class="inner"><li><a href="tutorial-about.html">About</a></li><li><a href="tutorial-notebook.html">About Spyral</a></li><li><a href="tutorial-gallery.html">Gallery</a></li><li><a href="tutorial-mirrors.html">Mirrors</a></li><li><a href="tutorial-local.html">Running Voyant Locally</a></li></ul></div></li><li><a href="tutorial-tools_.html">Tools</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="tools_sub"><ul class="inner"><li><a href="tutorial-bubblelines.html">Bubblelines</a></li><li><a href="tutorial-bubbles.html">Bubbles</a></li><li><a href="tutorial-catalogue.html">Catalogue</a></li><li><a href="tutorial-cirrus.html">Cirrus</a></li><li><a href="tutorial-corpuscollocates.html">Corpus Collocates</a></li><li><a href="tutorial-collocatesgraph.html">Collocates Graph</a></li><li><a href="tutorial-contexts.html">Contexts</a></li><li><a href="tutorial-corpusterms.html">Corpus Terms</a></li><li><a href="tutorial-correlations.html">Correlations</a></li><li><a href="tutorial-documents.html">Documents</a></li><li><a href="tutorial-documentterms.html">Document Terms</a></li><li><a href="tutorial-dreamscape.html">Dreamscape</a></li><li><a href="tutorial-knots.html">Knots</a></li><li><a href="tutorial-mandala.html">Mandala</a></li><li><a href="tutorial-microsearch.html">MicroSearch</a></li><li><a href="tutorial-phrases.html">Phrases</a></li><li><a href="tutorial-reader.html">Reader</a></li><li><a href="tutorial-rezoviz.html">RezoViz</a></li><li><a href="tutorial-scatterplot.html">ScatterPlot</a></li><li><a href="tutorial-streamgraph.html">StreamGraph</a></li><li><a href="tutorial-summary.html">Summary</a></li><li><a href="tutorial-termsberry.html">TermsBerry</a></li><li><a href="tutorial-termsradio.html">TermsRadio</a></li><li><a href="tutorial-textualarc.html">TextualArc</a></li><li><a href="tutorial-topics.html">Topics</a></li><li><a href="tutorial-trends.html">Trends</a></li><li><a href="tutorial-veliza.html">Veliza</a></li><li><a href="tutorial-wordtree.html">WordTree</a></li><li><a href="tutorial-via.html">Via</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Namespaces</h3><ul><li><a href="Spyral.html">Spyral</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Spyral_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Spyral.Categories.html">Categories</a></li><li><a href="Spyral.Chart.html">Chart</a></li><li><a href="Spyral.Corpus.html">Corpus</a></li><li><a href="Spyral.Load.html">Load</a></li><li><a href="Spyral.Metadata.html">Metadata</a></li><li><a href="Spyral.Notebook.html">Notebook</a></li><li><a href="Spyral.Table.html">Table</a></li><li><a href="Spyral.Util.html">Util</a></li></ul></div></li><li><a href="Tools.html">Tools</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.Bubblelines.html">Bubblelines</a></li><li><a href="Tools.Bubbles.html">Bubbles</a></li><li><a href="Tools.Cirrus.html">Cirrus</a></li><li><a href="Tools.CollocatesGraph.html">CollocatesGraph</a></li><li><a href="Tools.Contexts.html">Contexts</a></li><li><a href="Tools.CorpusCollocates.html">CorpusCollocates</a></li><li><a href="Tools.CorpusTerms.html">CorpusTerms</a></li><li><a href="Tools.Correlations.html">Correlations</a></li><li><a href="Tools.CustomSet.html">CustomSet</a></li><li><a href="Tools.DocumentTerms.html">DocumentTerms</a></li><li><a href="Tools.Documents.html">Documents</a></li><li><a href="Tools.Embedder.html">Embedder</a></li><li><a href="Tools.Knots.html">Knots</a></li><li><a href="Tools.Mandala.html">Mandala</a></li><li><a href="Tools.MicroSearch.html">MicroSearch</a></li><li><a href="Tools.Panel.html">Panel</a></li><li><a href="Tools.Phrases.html">Phrases</a></li><li><a href="Tools.Reader.html">Reader</a></li><li><a href="Tools.RezoViz.html">RezoViz</a></li><li><a href="Tools.ScatterPlot.html">ScatterPlot</a></li><li><a href="Tools.StreamGraph.html">StreamGraph</a></li><li><a href="Tools.Summary.html">Summary</a></li><li><a href="Tools.TermsBerry.html">TermsBerry</a></li><li><a href="Tools.TermsRadio.html">TermsRadio</a></li><li><a href="Tools.TextualArc.html">TextualArc</a></li><li><a href="Tools.Topics.html">Topics</a></li><li><a href="Tools.Trends.html">Trends</a></li><li><a href="Tools.WordTree.html">WordTree</a></li></ul></div></li><li><a href="window.html">window</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="window_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="window.html#.createTable">createTable</a></li><li><a href="window.html#.loadCorpus">loadCorpus</a></li><li><a href="window.html#.show">show</a></li><li><a href="window.html#.showError">showError</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="NetworkGraph.html">NetworkGraph</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="NetworkGraph_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="NetworkGraph.html#~Config">Config</a></li></ul></div></li><li><a href="Spyral.Categories.html">Spyral.Categories</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Spyral.Categories_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Spyral.Categories.html#addCategory">addCategory</a></li><li><a href="Spyral.Categories.html#addFeature">addFeature</a></li><li><a href="Spyral.Categories.html#addTerm">addTerm</a></li><li><a href="Spyral.Categories.html#addTerms">addTerms</a></li><li><a href="Spyral.Categories.html#getCategories">getCategories</a></li><li><a href="Spyral.Categories.html#getCategoriesForTerm">getCategoriesForTerm</a></li><li><a href="Spyral.Categories.html#getCategoryExportData">getCategoryExportData</a></li><li><a href="Spyral.Categories.html#getCategoryFeature">getCategoryFeature</a></li><li><a href="Spyral.Categories.html#getCategoryForTerm">getCategoryForTerm</a></li><li><a href="Spyral.Categories.html#getCategoryNames">getCategoryNames</a></li><li><a href="Spyral.Categories.html#getCategoryRanking">getCategoryRanking</a></li><li><a href="Spyral.Categories.html#getCategoryTerms">getCategoryTerms</a></li><li><a href="Spyral.Categories.html#getFeatureForTerm">getFeatureForTerm</a></li><li><a href="Spyral.Categories.html#getFeatures">getFeatures</a></li><li><a href="Spyral.Categories.html#load">load</a></li><li><a href="Spyral.Categories.html#removeCategory">removeCategory</a></li><li><a href="Spyral.Categories.html#removeFeature">removeFeature</a></li><li><a href="Spyral.Categories.html#removeTerm">removeTerm</a></li><li><a href="Spyral.Categories.html#removeTerms">removeTerms</a></li><li><a href="Spyral.Categories.html#renameCategory">renameCategory</a></li><li><a href="Spyral.Categories.html#save">save</a></li><li><a href="Spyral.Categories.html#setCategoryFeature">setCategoryFeature</a></li><li><a href="Spyral.Categories.html#setCategoryRanking">setCategoryRanking</a></li><li><a href="Spyral.Categories.html#.load">load</a></li></ul></div></li><li><a href="Spyral.Chart.html">Spyral.Chart</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Spyral.Chart_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Spyral.Chart.html#arcdiagram">arcdiagram</a></li><li><a href="Spyral.Chart.html#bar">bar</a></li><li><a href="Spyral.Chart.html#column">column</a></li><li><a href="Spyral.Chart.html#create">create</a></li><li><a href="Spyral.Chart.html#dependencywheel">dependencywheel</a></li><li><a href="Spyral.Chart.html#dumbbell">dumbbell</a></li><li><a href="Spyral.Chart.html#heatmap">heatmap</a></li><li><a href="Spyral.Chart.html#histogram">histogram</a></li><li><a href="Spyral.Chart.html#item">item</a></li><li><a href="Spyral.Chart.html#line">line</a></li><li><a href="Spyral.Chart.html#map">map</a></li><li><a href="Spyral.Chart.html#networkgraph">networkgraph</a></li><li><a href="Spyral.Chart.html#pie">pie</a></li><li><a href="Spyral.Chart.html#polar">polar</a></li><li><a href="Spyral.Chart.html#sankey">sankey</a></li><li><a href="Spyral.Chart.html#scatter">scatter</a></li><li><a href="Spyral.Chart.html#streamgraph">streamgraph</a></li><li><a href="Spyral.Chart.html#sunburst">sunburst</a></li><li><a href="Spyral.Chart.html#treegraph">treegraph</a></li><li><a href="Spyral.Chart.html#treemap">treemap</a></li><li><a href="Spyral.Chart.html#.arcdiagram">arcdiagram</a></li><li><a href="Spyral.Chart.html#.bar">bar</a></li><li><a href="Spyral.Chart.html#.column">column</a></li><li><a href="Spyral.Chart.html#.create">create</a></li><li><a href="Spyral.Chart.html#.dependencywheel">dependencywheel</a></li><li><a href="Spyral.Chart.html#.dumbbell">dumbbell</a></li><li><a href="Spyral.Chart.html#.heatmap">heatmap</a></li><li><a href="Spyral.Chart.html#.histogram">histogram</a></li><li><a href="Spyral.Chart.html#.item">item</a></li><li><a href="Spyral.Chart.html#.line">line</a></li><li><a href="Spyral.Chart.html#.map">map</a></li><li><a href="Spyral.Chart.html#.networkgraph">networkgraph</a></li><li><a href="Spyral.Chart.html#.pie">pie</a></li><li><a href="Spyral.Chart.html#.polar">polar</a></li><li><a href="Spyral.Chart.html#.sankey">sankey</a></li><li><a href="Spyral.Chart.html#.scatter">scatter</a></li><li><a href="Spyral.Chart.html#.setSeriesData">setSeriesData</a></li><li><a href="Spyral.Chart.html#.streamgraph">streamgraph</a></li><li><a href="Spyral.Chart.html#.sunburst">sunburst</a></li><li><a href="Spyral.Chart.html#.treegraph">treegraph</a></li><li><a href="Spyral.Chart.html#.treemap">treemap</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="Spyral.Chart.html#~HighchartsConfig">HighchartsConfig</a></li><li><a href="Spyral.Chart.html#~HighchartsSeriesConfig">HighchartsSeriesConfig</a></li></ul></div></li><li><a href="Spyral.Corpus.html">Spyral.Corpus</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Spyral.Corpus_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Spyral.Corpus.html#analysis">analysis</a></li><li><a href="Spyral.Corpus.html#collocates">collocates</a></li><li><a href="Spyral.Corpus.html#contexts">contexts</a></li><li><a href="Spyral.Corpus.html#correlations">correlations</a></li><li><a href="Spyral.Corpus.html#documents">documents</a></li><li><a href="Spyral.Corpus.html#entities">entities</a></li><li><a href="Spyral.Corpus.html#filterByCategory">filterByCategory</a></li><li><a href="Spyral.Corpus.html#id">id</a></li><li><a href="Spyral.Corpus.html#lemmas">lemmas</a></li><li><a href="Spyral.Corpus.html#metadata">metadata</a></li><li><a href="Spyral.Corpus.html#phrases">phrases</a></li><li><a href="Spyral.Corpus.html#summary">summary</a></li><li><a href="Spyral.Corpus.html#terms">terms</a></li><li><a href="Spyral.Corpus.html#text">text</a></li><li><a href="Spyral.Corpus.html#texts">texts</a></li><li><a href="Spyral.Corpus.html#titles">titles</a></li><li><a href="Spyral.Corpus.html#toString">toString</a></li><li><a href="Spyral.Corpus.html#tokens">tokens</a></li><li><a href="Spyral.Corpus.html#tool">tool</a></li><li><a href="Spyral.Corpus.html#topics">topics</a></li><li><a href="Spyral.Corpus.html#words">words</a></li><li><a href="Spyral.Corpus.html#.load">load</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="Spyral.Corpus.html#~CorpusConfig">CorpusConfig</a></li></ul></div></li><li><a href="Spyral.Load.html">Spyral.Load</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Spyral.Load_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Spyral.Load.html#.html">html</a></li><li><a href="Spyral.Load.html#.json">json</a></li><li><a href="Spyral.Load.html#.load">load</a></li><li><a href="Spyral.Load.html#.setBaseUrl">setBaseUrl</a></li><li><a href="Spyral.Load.html#.text">text</a></li><li><a href="Spyral.Load.html#.trombone">trombone</a></li><li><a href="Spyral.Load.html#.xml">xml</a></li></ul></div></li><li><a href="Spyral.Metadata.html">Spyral.Metadata</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Spyral.Metadata_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Spyral.Metadata.html#clone">clone</a></li><li><a href="Spyral.Metadata.html#getHeaders">getHeaders</a></li><li><a href="Spyral.Metadata.html#set">set</a></li><li><a href="Spyral.Metadata.html#setDateNow">setDateNow</a></li><li><a href="Spyral.Metadata.html#shortDate">shortDate</a></li></ul></div></li><li><a href="Spyral.Notebook.html">Spyral.Notebook</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Spyral.Notebook_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Spyral.Notebook.html#.getPromise">getPromise</a></li><li><a href="Spyral.Notebook.html#.getTarget">getTarget</a></li><li><a href="Spyral.Notebook.html#.import">import</a></li><li><a href="Spyral.Notebook.html#.show">show</a></li></ul></div></li><li><a href="Spyral.Table.html">Spyral.Table</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Spyral.Table_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Spyral.Table.html#addColumn">addColumn</a></li><li><a href="Spyral.Table.html#addRow">addRow</a></li><li><a href="Spyral.Table.html#addRows">addRows</a></li><li><a href="Spyral.Table.html#cell">cell</a></li><li><a href="Spyral.Table.html#chart">chart</a></li><li><a href="Spyral.Table.html#column">column</a></li><li><a href="Spyral.Table.html#columnCounts">columnCounts</a></li><li><a href="Spyral.Table.html#columnMax">columnMax</a></li><li><a href="Spyral.Table.html#columnMean">columnMean</a></li><li><a href="Spyral.Table.html#columnMin">columnMin</a></li><li><a href="Spyral.Table.html#columnRollingMean">columnRollingMean</a></li><li><a href="Spyral.Table.html#columnSort">columnSort</a></li><li><a href="Spyral.Table.html#columnStandardDeviation">columnStandardDeviation</a></li><li><a href="Spyral.Table.html#columnSum">columnSum</a></li><li><a href="Spyral.Table.html#columnVariance">columnVariance</a></li><li><a href="Spyral.Table.html#columnZScores">columnZScores</a></li><li><a href="Spyral.Table.html#columns">columns</a></li><li><a href="Spyral.Table.html#forEach">forEach</a></li><li><a href="Spyral.Table.html#getColumnIndex">getColumnIndex</a></li><li><a href="Spyral.Table.html#getRowIndex">getRowIndex</a></li><li><a href="Spyral.Table.html#hasColumn">hasColumn</a></li><li><a href="Spyral.Table.html#header">header</a></li><li><a href="Spyral.Table.html#headers">headers</a></li><li><a href="Spyral.Table.html#html">html</a></li><li><a href="Spyral.Table.html#row">row</a></li><li><a href="Spyral.Table.html#rowCounts">rowCounts</a></li><li><a href="Spyral.Table.html#rowMax">rowMax</a></li><li><a href="Spyral.Table.html#rowMean">rowMean</a></li><li><a href="Spyral.Table.html#rowMin">rowMin</a></li><li><a href="Spyral.Table.html#rowRollingMean">rowRollingMean</a></li><li><a href="Spyral.Table.html#rowSort">rowSort</a></li><li><a href="Spyral.Table.html#rowStandardDeviation">rowStandardDeviation</a></li><li><a href="Spyral.Table.html#rowSum">rowSum</a></li><li><a href="Spyral.Table.html#rowVariance">rowVariance</a></li><li><a href="Spyral.Table.html#rowZScores">rowZScores</a></li><li><a href="Spyral.Table.html#rows">rows</a></li><li><a href="Spyral.Table.html#setCell">setCell</a></li><li><a href="Spyral.Table.html#setColumn">setColumn</a></li><li><a href="Spyral.Table.html#setHeaders">setHeaders</a></li><li><a href="Spyral.Table.html#setRow">setRow</a></li><li><a href="Spyral.Table.html#toArray">toArray</a></li><li><a href="Spyral.Table.html#toCsv">toCsv</a></li><li><a href="Spyral.Table.html#toDataTable">toDataTable</a></li><li><a href="Spyral.Table.html#toHtml">toHtml</a></li><li><a href="Spyral.Table.html#toString">toString</a></li><li><a href="Spyral.Table.html#toTsv">toTsv</a></li><li><a href="Spyral.Table.html#updateCell">updateCell</a></li><li><a href="Spyral.Table.html#.cmp">cmp</a></li><li><a href="Spyral.Table.html#.counts">counts</a></li><li><a href="Spyral.Table.html#.create">create</a></li><li><a href="Spyral.Table.html#.fetch">fetch</a></li><li><a href="Spyral.Table.html#.mean">mean</a></li><li><a href="Spyral.Table.html#.rollingMean">rollingMean</a></li><li><a href="Spyral.Table.html#.standardDeviation">standardDeviation</a></li><li><a href="Spyral.Table.html#.sum">sum</a></li><li><a href="Spyral.Table.html#.variance">variance</a></li><li><a href="Spyral.Table.html#.zScores">zScores</a></li><li><a href="Spyral.Table.html#.zip">zip</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="Spyral.Table.html#~TableConfig">TableConfig</a></li></ul></div></li><li><a href="Spyral.Util.html">Spyral.Util</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Spyral.Util_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Spyral.Util.Storage.html">Storage</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Spyral.Util.html#.blobToDataUrl">blobToDataUrl</a></li><li><a href="Spyral.Util.html#.blobToString">blobToString</a></li><li><a href="Spyral.Util.html#.dataUrlToBlob">dataUrlToBlob</a></li><li><a href="Spyral.Util.html#.getFileExtensionFromMimeType">getFileExtensionFromMimeType</a></li><li><a href="Spyral.Util.html#.getVoyantDocumentFormatFromFileExtension">getVoyantDocumentFormatFromFileExtension</a></li><li><a href="Spyral.Util.html#.id">id</a></li><li><a href="Spyral.Util.html#.isArray">isArray</a></li><li><a href="Spyral.Util.html#.isBlob">isBlob</a></li><li><a href="Spyral.Util.html#.isBoolean">isBoolean</a></li><li><a href="Spyral.Util.html#.isFunction">isFunction</a></li><li><a href="Spyral.Util.html#.isNode">isNode</a></li><li><a href="Spyral.Util.html#.isNull">isNull</a></li><li><a href="Spyral.Util.html#.isNumber">isNumber</a></li><li><a href="Spyral.Util.html#.isObject">isObject</a></li><li><a href="Spyral.Util.html#.isPromise">isPromise</a></li><li><a href="Spyral.Util.html#.isString">isString</a></li><li><a href="Spyral.Util.html#.isUndefined">isUndefined</a></li><li><a href="Spyral.Util.html#.loadScript">loadScript</a></li><li><a href="Spyral.Util.html#.more">more</a></li><li><a href="Spyral.Util.html#.show">show</a></li><li><a href="Spyral.Util.html#.showError">showError</a></li><li><a href="Spyral.Util.html#.toString">toString</a></li><li><a href="Spyral.Util.html#.transformXml">transformXml</a></li></ul></div></li><li><a href="Spyral.Util.Storage.html">Spyral.Util.Storage</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Spyral.Util.Storage_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Spyral.Util.Storage.html#.getStoredResource">getStoredResource</a></li><li><a href="Spyral.Util.Storage.html#.getTromboneUrl">getTromboneUrl</a></li><li><a href="Spyral.Util.Storage.html#.storeResource">storeResource</a></li></ul></div></li><li><a href="Tools.Bubblelines.html">Tools.Bubblelines</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.Bubblelines_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.Bubblelines.html#bins">bins</a></li><li><a href="Tools.Bubblelines.html#docId">docId</a></li><li><a href="Tools.Bubblelines.html#docIndex">docIndex</a></li><li><a href="Tools.Bubblelines.html#maxDocs">maxDocs</a></li><li><a href="Tools.Bubblelines.html#query">query</a></li><li><a href="Tools.Bubblelines.html#stopList">stopList</a></li></ul></div></li><li><a href="Tools.Bubbles.html">Tools.Bubbles</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.Bubbles_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.Bubbles.html#audio">audio</a></li><li><a href="Tools.Bubbles.html#docIndex">docIndex</a></li><li><a href="Tools.Bubbles.html#limit">limit</a></li><li><a href="Tools.Bubbles.html#speed">speed</a></li><li><a href="Tools.Bubbles.html#stopList">stopList</a></li></ul></div></li><li><a href="Tools.Cirrus.html">Tools.Cirrus</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.Cirrus_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.Cirrus.html#categories">categories</a></li><li><a href="Tools.Cirrus.html#docId">docId</a></li><li><a href="Tools.Cirrus.html#docIndex">docIndex</a></li><li><a href="Tools.Cirrus.html#fontFamily">fontFamily</a></li><li><a href="Tools.Cirrus.html#inlineData">inlineData</a></li><li><a href="Tools.Cirrus.html#limit">limit</a></li><li><a href="Tools.Cirrus.html#stopList">stopList</a></li><li><a href="Tools.Cirrus.html#visible">visible</a></li><li><a href="Tools.Cirrus.html#whiteList">whiteList</a></li></ul></div></li><li><a href="Tools.CollocatesGraph.html">Tools.CollocatesGraph</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.CollocatesGraph_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.CollocatesGraph.html#centralize">centralize</a></li><li><a href="Tools.CollocatesGraph.html#context">context</a></li><li><a href="Tools.CollocatesGraph.html#limit">limit</a></li><li><a href="Tools.CollocatesGraph.html#query">query</a></li><li><a href="Tools.CollocatesGraph.html#stopList">stopList</a></li></ul></div></li><li><a href="Tools.Contexts.html">Tools.Contexts</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.Contexts_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.Contexts.html#columns">columns</a></li><li><a href="Tools.Contexts.html#context">context</a></li><li><a href="Tools.Contexts.html#dir">dir</a></li><li><a href="Tools.Contexts.html#docId">docId</a></li><li><a href="Tools.Contexts.html#docId">docId</a></li><li><a href="Tools.Contexts.html#docIndex">docIndex</a></li><li><a href="Tools.Contexts.html#expand">expand</a></li><li><a href="Tools.Contexts.html#query">query</a></li><li><a href="Tools.Contexts.html#sort">sort</a></li><li><a href="Tools.Contexts.html#stopList">stopList</a></li><li><a href="Tools.Contexts.html#termColors">termColors</a></li></ul></div></li><li><a href="Tools.CorpusCollocates.html">Tools.CorpusCollocates</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.CorpusCollocates_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.CorpusCollocates.html#columns">columns</a></li><li><a href="Tools.CorpusCollocates.html#context">context</a></li><li><a href="Tools.CorpusCollocates.html#dir">dir</a></li><li><a href="Tools.CorpusCollocates.html#docId">docId</a></li><li><a href="Tools.CorpusCollocates.html#docIndex">docIndex</a></li><li><a href="Tools.CorpusCollocates.html#query">query</a></li><li><a href="Tools.CorpusCollocates.html#sort">sort</a></li><li><a href="Tools.CorpusCollocates.html#stopList">stopList</a></li><li><a href="Tools.CorpusCollocates.html#termColors">termColors</a></li></ul></div></li><li><a href="Tools.CorpusTerms.html">Tools.CorpusTerms</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.CorpusTerms_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.CorpusTerms.html#columns">columns</a></li><li><a href="Tools.CorpusTerms.html#comparisonCorpus">comparisonCorpus</a></li><li><a href="Tools.CorpusTerms.html#dir">dir</a></li><li><a href="Tools.CorpusTerms.html#maxBins">maxBins</a></li><li><a href="Tools.CorpusTerms.html#query">query</a></li><li><a href="Tools.CorpusTerms.html#sort">sort</a></li><li><a href="Tools.CorpusTerms.html#stopList">stopList</a></li><li><a href="Tools.CorpusTerms.html#termColors">termColors</a></li></ul></div></li><li><a href="Tools.Correlations.html">Tools.Correlations</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.Correlations_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.Correlations.html#columns">columns</a></li><li><a href="Tools.Correlations.html#dir">dir</a></li><li><a href="Tools.Correlations.html#docId">docId</a></li><li><a href="Tools.Correlations.html#docIndex">docIndex</a></li><li><a href="Tools.Correlations.html#minInDocumentsCountRatio">minInDocumentsCountRatio</a></li><li><a href="Tools.Correlations.html#query">query</a></li><li><a href="Tools.Correlations.html#sort">sort</a></li><li><a href="Tools.Correlations.html#stopList">stopList</a></li><li><a href="Tools.Correlations.html#termColors">termColors</a></li><li><a href="Tools.Correlations.html#withDistributions">withDistributions</a></li></ul></div></li><li><a href="Tools.CustomSet.html">Tools.CustomSet</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.CustomSet_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.CustomSet.html#layout">layout</a></li><li><a href="Tools.CustomSet.html#tableLayout">tableLayout</a></li></ul></div></li><li><a href="Tools.DocumentTerms.html">Tools.DocumentTerms</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.DocumentTerms_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.DocumentTerms.html#bins">bins</a></li><li><a href="Tools.DocumentTerms.html#columns">columns</a></li><li><a href="Tools.DocumentTerms.html#dir">dir</a></li><li><a href="Tools.DocumentTerms.html#docId">docId</a></li><li><a href="Tools.DocumentTerms.html#docIndex">docIndex</a></li><li><a href="Tools.DocumentTerms.html#query">query</a></li><li><a href="Tools.DocumentTerms.html#sort">sort</a></li><li><a href="Tools.DocumentTerms.html#stopList">stopList</a></li><li><a href="Tools.DocumentTerms.html#termColors">termColors</a></li></ul></div></li><li><a href="Tools.Documents.html">Tools.Documents</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.Documents_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.Documents.html#columns">columns</a></li><li><a href="Tools.Documents.html#dir">dir</a></li><li><a href="Tools.Documents.html#docId">docId</a></li><li><a href="Tools.Documents.html#docIndex">docIndex</a></li><li><a href="Tools.Documents.html#query">query</a></li><li><a href="Tools.Documents.html#sort">sort</a></li></ul></div></li><li><a href="Tools.Embedder.html">Tools.Embedder</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.Embedder_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.Embedder.html#url">url</a></li></ul></div></li><li><a href="Tools.Knots.html">Tools.Knots</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.Knots_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.Knots.html#audio">audio</a></li><li><a href="Tools.Knots.html#docId">docId</a></li><li><a href="Tools.Knots.html#query">query</a></li><li><a href="Tools.Knots.html#stopList">stopList</a></li></ul></div></li><li><a href="Tools.Mandala.html">Tools.Mandala</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.Mandala_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.Mandala.html#labels">labels</a></li><li><a href="Tools.Mandala.html#query">query</a></li><li><a href="Tools.Mandala.html#stopList">stopList</a></li></ul></div></li><li><a href="Tools.MicroSearch.html">Tools.MicroSearch</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.MicroSearch_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.MicroSearch.html#query">query</a></li><li><a href="Tools.MicroSearch.html#stopList">stopList</a></li></ul></div></li><li><a href="Tools.Panel.html">Tools.Panel</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.Panel_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.Panel.html#corpus">corpus</a></li><li><a href="Tools.Panel.html#input">input</a></li><li><a href="Tools.Panel.html#inputFormat">inputFormat</a></li><li><a href="Tools.Panel.html#subtitle">subtitle</a></li></ul></div></li><li><a href="Tools.Phrases.html">Tools.Phrases</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.Phrases_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.Phrases.html#columns">columns</a></li><li><a href="Tools.Phrases.html#dir">dir</a></li><li><a href="Tools.Phrases.html#docId">docId</a></li><li><a href="Tools.Phrases.html#docIndex">docIndex</a></li><li><a href="Tools.Phrases.html#maxLength">maxLength</a></li><li><a href="Tools.Phrases.html#minLength">minLength</a></li><li><a href="Tools.Phrases.html#overlapFilter">overlapFilter</a></li><li><a href="Tools.Phrases.html#query">query</a></li><li><a href="Tools.Phrases.html#sort">sort</a></li><li><a href="Tools.Phrases.html#stopList">stopList</a></li></ul></div></li><li><a href="Tools.Reader.html">Tools.Reader</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.Reader_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.Reader.html#limit">limit</a></li><li><a href="Tools.Reader.html#query">query</a></li><li><a href="Tools.Reader.html#skipToDocId">skipToDocId</a></li><li><a href="Tools.Reader.html#start">start</a></li></ul></div></li><li><a href="Tools.RezoViz.html">Tools.RezoViz</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.RezoViz_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.RezoViz.html#docId">docId</a></li><li><a href="Tools.RezoViz.html#limit">limit</a></li><li><a href="Tools.RezoViz.html#minEdgeCount">minEdgeCount</a></li><li><a href="Tools.RezoViz.html#nerService">nerService</a></li><li><a href="Tools.RezoViz.html#query">query</a></li><li><a href="Tools.RezoViz.html#stopList">stopList</a></li><li><a href="Tools.RezoViz.html#type">type</a></li></ul></div></li><li><a href="Tools.ScatterPlot.html">Tools.ScatterPlot</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.ScatterPlot_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.ScatterPlot.html#analysis">analysis</a></li><li><a href="Tools.ScatterPlot.html#bins">bins</a></li><li><a href="Tools.ScatterPlot.html#clusters">clusters</a></li><li><a href="Tools.ScatterPlot.html#comparisonType">comparisonType</a></li><li><a href="Tools.ScatterPlot.html#dimensions">dimensions</a></li><li><a href="Tools.ScatterPlot.html#docId">docId</a></li><li><a href="Tools.ScatterPlot.html#iterations">iterations</a></li><li><a href="Tools.ScatterPlot.html#label">label</a></li><li><a href="Tools.ScatterPlot.html#limit">limit</a></li><li><a href="Tools.ScatterPlot.html#perplexity">perplexity</a></li><li><a href="Tools.ScatterPlot.html#query">query</a></li><li><a href="Tools.ScatterPlot.html#stopList">stopList</a></li><li><a href="Tools.ScatterPlot.html#storeJson">storeJson</a></li><li><a href="Tools.ScatterPlot.html#target">target</a></li><li><a href="Tools.ScatterPlot.html#term">term</a></li><li><a href="Tools.ScatterPlot.html#whiteList">whiteList</a></li></ul></div></li><li><a href="Tools.StreamGraph.html">Tools.StreamGraph</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.StreamGraph_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.StreamGraph.html#bins">bins</a></li><li><a href="Tools.StreamGraph.html#docId">docId</a></li><li><a href="Tools.StreamGraph.html#docIndex">docIndex</a></li><li><a href="Tools.StreamGraph.html#limit">limit</a></li><li><a href="Tools.StreamGraph.html#query">query</a></li><li><a href="Tools.StreamGraph.html#stopList">stopList</a></li><li><a href="Tools.StreamGraph.html#withDistributions">withDistributions</a></li></ul></div></li><li><a href="Tools.Summary.html">Tools.Summary</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.Summary_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.Summary.html#limit">limit</a></li><li><a href="Tools.Summary.html#numberOfDocumentsForDistinctiveWords">numberOfDocumentsForDistinctiveWords</a></li><li><a href="Tools.Summary.html#start">start</a></li><li><a href="Tools.Summary.html#stopList">stopList</a></li></ul></div></li><li><a href="Tools.TermsBerry.html">Tools.TermsBerry</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.TermsBerry_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.TermsBerry.html#categories">categories</a></li><li><a href="Tools.TermsBerry.html#context">context</a></li><li><a href="Tools.TermsBerry.html#docId">docId</a></li><li><a href="Tools.TermsBerry.html#docIndex">docIndex</a></li><li><a href="Tools.TermsBerry.html#numInitialTerms">numInitialTerms</a></li><li><a href="Tools.TermsBerry.html#query">query</a></li><li><a href="Tools.TermsBerry.html#stopList">stopList</a></li></ul></div></li><li><a href="Tools.TermsRadio.html">Tools.TermsRadio</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.TermsRadio_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.TermsRadio.html#bins">bins</a></li><li><a href="Tools.TermsRadio.html#limit">limit</a></li><li><a href="Tools.TermsRadio.html#query">query</a></li><li><a href="Tools.TermsRadio.html#slider">slider</a></li><li><a href="Tools.TermsRadio.html#speed">speed</a></li><li><a href="Tools.TermsRadio.html#stopList">stopList</a></li><li><a href="Tools.TermsRadio.html#visibleBins">visibleBins</a></li><li><a href="Tools.TermsRadio.html#yAxisScale">yAxisScale</a></li></ul></div></li><li><a href="Tools.TextualArc.html">Tools.TextualArc</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.TextualArc_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.TextualArc.html#docIndex">docIndex</a></li><li><a href="Tools.TextualArc.html#minRawFreq">minRawFreq</a></li><li><a href="Tools.TextualArc.html#speed">speed</a></li><li><a href="Tools.TextualArc.html#stopList">stopList</a></li></ul></div></li><li><a href="Tools.Topics.html">Tools.Topics</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.Topics_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.Topics.html#iterations">iterations</a></li><li><a href="Tools.Topics.html#perDocLimit">perDocLimit</a></li><li><a href="Tools.Topics.html#seed">seed</a></li><li><a href="Tools.Topics.html#stopList">stopList</a></li><li><a href="Tools.Topics.html#termsPerTopic">termsPerTopic</a></li><li><a href="Tools.Topics.html#topics">topics</a></li></ul></div></li><li><a href="Tools.Trends.html">Tools.Trends</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.Trends_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.Trends.html#bins">bins</a></li><li><a href="Tools.Trends.html#chartType">chartType</a></li><li><a href="Tools.Trends.html#docId">docId</a></li><li><a href="Tools.Trends.html#docIndex">docIndex</a></li><li><a href="Tools.Trends.html#labels">labels</a></li><li><a href="Tools.Trends.html#limit">limit</a></li><li><a href="Tools.Trends.html#mode">mode</a></li><li><a href="Tools.Trends.html#query">query</a></li><li><a href="Tools.Trends.html#stopList">stopList</a></li><li><a href="Tools.Trends.html#withDistributions">withDistributions</a></li></ul></div></li><li><a href="Tools.WordTree.html">Tools.WordTree</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools.WordTree_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.WordTree.html#context">context</a></li><li><a href="Tools.WordTree.html#docId">docId</a></li><li><a href="Tools.WordTree.html#docIndex">docIndex</a></li><li><a href="Tools.WordTree.html#limit">limit</a></li><li><a href="Tools.WordTree.html#query">query</a></li><li><a href="Tools.WordTree.html#stopList">stopList</a></li></ul></div></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* eslint-disable linebreak-style */
/* global Spyral, DataTable */

import Chart from './chart.js';

import Util from './util.js';

/**
 * The Spyral.Table class in Spyral provides convenience functions for working with tabular
 * data.
 * 
 * There are several ways of initializing a Table, here are some of them:
 * 
 * Provide an array of data with 3 rows:
 * 
 *  	let table = createTable([1,2,3]);
 *
 *
 * Provide a nested array of data with multiple rows:
 * 
 *		let table = createTable([[1,2],[3,4]]);
 * 
 * Same nested array, but with a second argument specifying headers
 * 
 *		let table = createTable([[1,2],[3,4]], {headers: ["one","two"]});
 * 
 * Create table with comma-separated values:
 * 
 *  	let table = createTable("one,two\\n1,2\\n3,4");
 * 
 * Create table with tab-separated values
 * 
 *		let table = createTable("one\\ttwo\\n1\\t2\\n3\\t4");
 * 
 * Create table with array of objects
 * 
 *  	let table = createTable([{one:1,two:2},{one:3,two:4}]);
 * 
 * It's also possible simple to create a sorted frequency table from an array of values:
 * 
 *		let table = createTable(["one","two","one"], {count: "vertical", headers: ["Term","Count"]})
 * 
 * Working with a Corpus is easy. For instance, we can create a table from the top terms:
 * 
 *		loadCorpus("austen").terms({limit:500, stopList: 'auto'}).then(terms => {
 *			return createTable(terms);
 *		})
 * 
 * Similarly, we could create a frequency table from the first 1,000 words of the corpus:
 * 
 *		loadCorpus("austen").words({limit:1000, docIndex: 0, stopList: 'auto'}).then(words => {
 *			return createTable(words, {count: "vertical"});
 *		});
 *
 * Some of the configuration options are as follows:
 * 
 * * **format**: especially for forcing csv or tsv when the data is a string
 * * **hasHeaders**: determines if data has a header row (usually determined automatically)
 * * **headers**: a Array of Strings that serve as headers for the table
 * * **count**: forces Spyral to create a sorted frequency table from an Array of data, this can be set to "vertical" if the counts are shown vertically or set to true if the counts are shown horizontally
 * 
 * Tables are convenient in Spyral because you can simply show them to preview a version in HTML.
 * 
 * @memberof Spyral
 * @class
 */
class Table {
	/**
	 * The Table config object
	 * @typedef {Object} Spyral.Table~TableConfig
	 * @property {string} format The format of the provided data, either "tsv" or "csv"
	 * @property {(Object|Array)} headers The table headers
	 * @property {boolean} hasHeaders True if the headers are the first item in the data
	 * @property {string} count Specify "vertical" or "horizontal" to create a table of unique item counts in the provided data
	 */


	/**
	 * Create a new Table
	 * @constructor
	 * @param {(Object|Array|String|Number)} data An array of data or a string with CSV or TSV.
	 * @param {Spyral.Table~TableConfig} config an Object for configuring the table initialization
	 * @returns {Spyral.Table}
	 */
	constructor(data, config, ...other) {
		this._rows = [];
		this._headers = {};
		this._rowKeyColumnIndex = 0; // the key, i.e. id

		if (Util.isPromise(data)) {
			throw new Error('Data cannot be a Promise');
		}
		
		// we have a configuration object followed by values: create({headers: []}, 1,2,3) …
		if (data &amp;&amp; typeof data === 'object' &amp;&amp; (typeof config === 'string' || typeof config === 'number' || Array.isArray(config))) {
			data.rows = [config].concat(other).filter(v => v!==undefined);
			config = undefined;
		}
		
		// we have a simple variable set of arguments: create(1,2,3) …
		if (arguments.length>0 &amp;&amp; Array.from(arguments).every(a => a!==undefined &amp;&amp; !Array.isArray(a) &amp;&amp; typeof a !== 'object')) {
			data = [data,config].concat(other).filter(v => v!==undefined);
			config = undefined;
		}
		
		// could be CSV or TSV
		if (Array.isArray(data) &amp;&amp; data.length===1 &amp;&amp; typeof data[0] === 'string'  &amp;&amp; (data[0].indexOf(',')>-1 || data[0].indexOf('\t')>-1)) {
			data = data[0];
		}

		// first check if we have a string that might be delimited data
		if (data &amp;&amp; (typeof data === 'string' || typeof data ==='number')) {
			if (typeof data === 'number') {data = String(data);} // convert to string for split
			let rows = [];
			let format = config &amp;&amp; 'format' in config ? config.format : undefined;
			data.split(/(\r\n|[\n\v\f\r\x85\u2028\u2029])+/g).forEach((line,i) => {
				if (line.trim().length>0) {
					let values;
					if ((format &amp;&amp; format==='tsv') || line.indexOf('\t')>-1) {
						values = line.split(/\t/);
					} else if ((format &amp;&amp; format==='csv') || line.indexOf(',')>-1) {
						values = parseCsvLine(line);
					} else {
						values = [line];
					}
				
					// if we can't find any config information for headers then we try to guess
					// if the first line doesn't have any numbers - this heuristic may be questionable
					if (i===0 &amp;&amp; values.every(v => isNaN(v)) &amp;&amp; 
						((typeof config !== 'object') || (typeof config === 'object' &amp;&amp; !('hasHeaders' in config) &amp;&amp; !('headers' in config)))) {
						this.setHeaders(values);
					} else {
						rows.push(values.map(v => isNaN(v) ? v : Number(v)));
					}
				}
			});
			data = rows;
		}
		
		if (data &amp;&amp; Array.isArray(data)) {
			if (config) {
				if (Array.isArray(config)) {
					this.setHeaders(config);
				} else if (typeof config === 'object') {
					if ('headers' in config) {
						this.setHeaders(config.headers);
					} else if ('hasHeaders' in config &amp;&amp; config.hasHeaders) {
						this.setHeaders(data.shift());
					}
				}
			}
			if (config &amp;&amp; 'count' in config &amp;&amp; config.count) {
				let freqs = Table.counts(data);
				if (config.count==='vertical') {
					for (let item in freqs) {
						this.addRow(item, freqs[item]);
					}
					this.rowSort((a,b) => Table.cmp(b[1],a[1]));
				} else {
					this._headers = []; // reset and use the terms as headers
					this.addRow(freqs);
					this.columnSort((a,b) => Table.cmp(this.cell(0,b),this.cell(0,a)));
				}
			} else {
				this.addRows(data);
			}
		} else if (data &amp;&amp; typeof data === 'object') {
			if ('headers' in data &amp;&amp; Array.isArray(data.headers)) {
				this.setHeaders(data.headers);
			} else if ('hasHeaders' in data &amp;&amp; 'rows' in data) {
				this.setHeaders(data.rows.shift());
			}
			if ('rows' in data &amp;&amp; Array.isArray(data.rows)) {
				this.addRows(data.rows);
			}
			if ('rowKeyColumn' in data) {
				if (typeof data.rowKeyColumn === 'number') {
					if (data.rowKeyColumn &lt; this.columns()) {
						this._rowKeyColumnIndex = data.rowKeyColumn;
					} else {
						throw new Error('The rowKeyColumn value is higher than the number headers designated: '+data.rowKeyColum);
					}
				} else if (typeof data.rowKeyColumn === 'string') {
					if (data.rowKeyColumn in this._headers) {
						this._rowKeyColumnIndex = this._headers[data.rowKeyColumn];
					} else {
						throw new Error('Unable to find column designated by rowKeyColumn: '+data.rowKeyColumn);
					}
				}
			}
		}
	}
	
	/**
	 * Set the headers for the Table
	 * @param {(Object|Array)} data
	 * @returns {Spyral.Table}
	 */
	setHeaders(data) {
		if (data &amp;&amp; Array.isArray(data)) {
			data.forEach(h => this.addColumn(h), this);
		} else if (typeof data === 'object') {
			if (this.columns()===0 || Object.keys(data).length===this.columns()) {
				this._headers = data;
			} else {
				throw new Error('The number of columns don\'t match: ');
			}
		} else {
			throw new Error('Unrecognized argument for headers, it should be an array or an object.'+data);
		}
		return this;
	}
	
	/**
	 * Add rows to the Table
	 * @param {Array} data
	 * @returns {Spyral.Table}
	 */
	addRows(data) {
		data.forEach(row => this.addRow(row), this);
		return this;
	}
	
	/**
	 * Add a row to the Table
	 * @param {(Array|Object)} data
	 * @returns {Spyral.Table}
	 */
	addRow(data, ...other) {
		
		// we have multiple arguments, so call again as an array
		if (other.length>0) {
			return this.addRow([data].concat(other));
		}

		this.setRow(this.rows(), data, true);
		return this;
	}
	
	/**
	 * Set a row
	 * @param {(number|string)} ind The row index
	 * @param {(Object|Array)} data
	 * @param {boolean} create
	 * @returns {Spyral.Table}
	 */
	setRow(ind, data, create) {

		let rowIndex = this.getRowIndex(ind, create);
		if (rowIndex>=this.rows() &amp;&amp; !create) {
			throw new Error('Attempt to set row values for a row that does note exist: '+ind+'. Maybe use addRow() instead?');
		}
		
		// we have a simple array, so we'll just push to the rows
		if (data &amp;&amp; Array.isArray(data)) {
			if (data.length>this.columns()) {
				if (create) {
					for (let i = this.columns(); i&lt;data.length; i++) {
						this.addColumn();
					}
				} else {
					throw new Error('The row that you\'ve created contains more columns than the current table. Maybe use addColunm() first?');
				}
			}
			data.forEach((d,i) => this.setCell(rowIndex, i, d), this);
		}
		
		// we have an object so we'll use the headers
		else if (typeof data === 'object') {
			for (let column in data) {
				if (!this.hasColumn(column)) {
					// TODO filter out columns that don't match a header?
				}
				this.setCell(rowIndex, column, data[column]);
			}
		}
		
		else if (this.columns()&lt;2 &amp;&amp; create) { // hopefully some scalar value
			if (this.columns()===0) {
				this.addColumn(); // create first column if it doesn't exist
			}
			this.setCell(rowIndex,0,data);
		} else {
			throw new Error('setRow() expects an array or an object, maybe setCell()?');
		}
		
		return this;

	}
	
	/**
	 * Set a column
	 * @param {(number|string)} ind The column index
	 * @param {(Object|Array)} data
	 * @param {boolean} create
	 * @returns {Spyral.Table}
	 */
	setColumn(ind, data, create) {

		let columnIndex = this.getColumnIndex(ind, create);
		if (columnIndex>=this.columns() &amp;&amp; !create) {
			throw new Error('Attempt to set column values for a column that does note exist: '+ind+'. Maybe use addColumn() instead?');
		}
		
		// we have a simple array, so we'll just push to the rows
		if (data &amp;&amp; Array.isArray(data)) {
			data.forEach((d,i) => this.setCell(i, columnIndex, d, create), this);
		}
		
		// we have an object so we'll use the headers
		else if (typeof data === 'object') {
			for (let row in data) {
				this.setCell(row, columnIndex, data[row], create);
			}
		}
		
		// hope we have a scalar value to assign to the first row
		else {
			this.setCell(0,columnIndex,data, create);
		}
		
		return this;
	}

	/**
	 * Add to or set a cell value
	 * @param {(number|string)} row The row index
	 * @param {(number|string)} column The column index
	 * @param {number} value The value to set/add
	 * @param {boolean} overwrite True to set, false to add to current value
	 */
	updateCell(row, column, value, overwrite) {
		let rowIndex = this.getRowIndex(row, true);
		let columnIndex = this.getColumnIndex(column, true);
		let val = this.cell(rowIndex, columnIndex);
		this._rows[rowIndex][columnIndex] = val &amp;&amp; !overwrite ? val+value : value;
		return this;
	}
	
	/**
	 * Get the value of a cell
	 * @param {(number|string)} rowInd The row index
	 * @param {(number|string)} colInd The column index
	 * @returns {number}
	 */
	cell(rowInd, colInd) {
		return this._rows[this.getRowIndex(rowInd)][this.getColumnIndex(colInd)];
	}

	/**
	 * Set the value of a cell
	 * @param {(number|string)} row The row index
	 * @param {(number|string)} column The column index
	 * @param {number} value The value to set
	 * @returns {Spyral.Table}
	 */
	setCell(row, column, value) {
		this.updateCell(row,column,value,true);
		return this;
	}
	
	/**
	 * Get (and create) the row index
	 * @param {(number|string)} ind The index
	 * @param {boolean} create
	 * @returns {number}
	 */
	getRowIndex(ind, create) {
		if (typeof ind === 'number') {
			if (ind &lt; this._rows.length) {
				return ind;
			} else if (create) {
				this._rows[ind] = Array(this.columns());
				return ind;
			}
			throw new Error('The requested row does not exist: '+ind);
		} else if (typeof ind === 'string') {
			let row = this._rows.findIndex(r => r[this._rowKeyColumnIndex] === ind, this);
			if (row>-1) {return row;}
			else if (create) {
				let arr = Array(this.columns());
				arr[this._rowKeyColumnIndex] = ind;
				this.addRow(arr);
				return this.rows();
			}
			else {
				throw new Error('Unable to find the row named '+ind);
			}
		}
		throw new Error('Please provide a valid row (number or named row)');
	}
	
	/**
	 * Get (and create) the column index
	 * @param {(number|string)} ind The index
	 * @param {boolean} create
	 * @returns {number}
	 */
	getColumnIndex(ind, create) {
		if (typeof ind === 'number') {
			if (ind &lt; this.columns()) {
				return ind;
			} else if (create) {
				this.addColumn(ind);
				return ind;
			}
			throw new Error('The requested column does not exist: '+ind);
		} else if (typeof ind === 'string') {
			if (ind in this._headers) {
				return this._headers[ind];
			} else if (create) {
				this.addColumn({header: ind});
				return this._headers[ind];
			}
			throw new Error('Unable to find column named '+ind);
		}
		throw new Error('Please provide a valid column (number or named column)');
	}
	
	/**
	 * Add a column (at the specified index)
	 * @param {(Object|String)} config
	 * @param {(number|string)} ind
	 * @returns {Spyral.Table}
	 */
	addColumn(config, ind) {
		// determine col
		let col = this.columns(); // default
		if (config &amp;&amp; typeof config === 'string') {col=config;}
		else if (config &amp;&amp; (typeof config === 'object') &amp;&amp; ('header' in config)) {col = config.header;}
		else if (ind!==undefined) {col=ind;}

		// check if it exists
		if (col in this._headers) {
			throw new Error('This column exists already: '+config.header);
		}
		
		// add column
		let colIndex = this.columns();
		this._headers[col] = colIndex;
		
		// determine data
		let data = [];
		if (config &amp;&amp; typeof config === 'object' &amp;&amp; 'rows' in config) {data=config.rows;}
		else if (Array.isArray(config)) {data = config;}
		
		// make sure we have enough rows for the new data
		let columns = this.columns();
		while (this._rows.length&lt;data.length) {
			this._rows[this._rows.length] = new Array(columns);
		}
		
		this._rows.forEach((r,i) => r[colIndex] = data[i]);
		return this;
	}
	
	/**
	 * This function returns different values depending on the arguments provided.
	 * When there are no arguments, it returns the number of rows in this table.
	 * When the first argument is the boolean value `true` all rows are returned.
	 * When the first argument is a an array then the rows corresponding to the row
	 * indices or names are returned. When all arguments except are numbers or strings
	 * then each of those is returned.
	 * @param {(Boolean|Array|Number|String)} [inds]
	 * @param {(Object|Number|String)} [config]
	 * @returns {(Number|Array)}
	 */
	rows(inds, config, ...other) {
	
		// return length
		if (inds===undefined) {
			return this._rows.length;
		}
		
		let rows = [];
		let asObj = (config &amp;&amp; typeof config === 'object' &amp;&amp; config.asObj) ||
			(other.length>0 &amp;&amp; typeof other[other.length-1] === 'object' &amp;&amp; other[other.length-1].asObj);
		
		// return all
		if (typeof inds === 'boolean' &amp;&amp; inds) {
			rows = this._rows.map((r,i) => this.row(i, asObj));
		}
		
		// return specified rows
		else if (Array.isArray(inds)) {
			rows = inds.map(ind => this.row(ind));
		}
		
		// return specified rows as varargs
		else if (typeof inds === 'number' || typeof inds === 'string') {
			[inds, config, ...other].every(i => {
				if (typeof i === 'number' || typeof i === 'string') {
					rows.push(this.row(i, asObj));
					return true;
				} else {
					return false;
				}
			});
			if (other.length>0) { // when config is in last position
				if (typeof other[other.length-1] === 'object') {
					config = other[other.length-1];
				}
			}
		}
		
		// zip if requested
		if (config &amp;&amp; typeof config === 'object' &amp;&amp; 'zip' in config &amp;&amp; config.zip) {
			if (rows.length&lt;2) {throw new Error('Only one row available, can\'t zip');}
			return Table.zip(rows);
		}
		else {
			return rows;
		}
	}
	
	/**
	 * Get the specified row
	 * @param {(number|string)} ind
	 * @param {boolean} [asObj]
	 * @returns {(Object|Number|String)}
	 */
	row(ind, asObj) {
		let row = this._rows[this.getRowIndex(ind)];
		if (asObj) {
			let obj = {};
			for (let key in this._headers) {
				obj[key] = row[this._headers[key]];
			}
			return obj;
		} else {
			return row;
		}
	}
	
	/**
	 * This function returns different values depending on the arguments provided.
	 * When there are no arguments, it returns the number of columns in this table.
	 * When the first argument is the boolean value `true` all columns are returned.
	 * When the first argument is a number a slice of the columns is returned and if
	 * the second argument is a number it is treated as the length of the slice to
	 * return (note that it isn't the `end` index like with Array.slice()).
	 * @param {(Boolean|Array|Number|String)} [inds]
	 * @param {(Object|Number|String)} [config]
	 * @returns {(Number|Array)}
	 */
	columns(inds, config, ...other) {
	
		// return length
		if (inds===undefined) {
			return Object.keys(this._headers).length;
		}
		
		let columns = [];
		let asObj = (config &amp;&amp; typeof config === 'object' &amp;&amp; config.asObj) ||
			(other.length>0 &amp;&amp; typeof other[other.length-1] === 'object' &amp;&amp; other[other.length-1].asObj);
		
		// return all columns
		if (typeof inds === 'boolean' &amp;&amp; inds) {
			for (let i=0, len=this.columns(); i&lt;len; i++) {
				columns.push(this.column(i, asObj));
			}
		}
		
		// return specified columns
		else if (Array.isArray(inds)) {
			inds.forEach(i => columns.push(this.column(i, asObj)), this);
		}
		
		else if (typeof inds === 'number' || typeof inds === 'string') {
			[inds, config, ...other].every(i => {
				if (typeof i === 'number' || typeof i === 'string') {
					columns.push(this.column(i, asObj));
					return true;
				} else {
					return false;
				}
			});
			if (other.length>0) { // when config is in last position
				if (typeof other[other.length-1] === 'object') {
					config = other[other.length-1];
				}
			}
		}
		
		if (config &amp;&amp; typeof config === 'object' &amp;&amp; 'zip' in config &amp;&amp; config.zip) {
			if (columns.length&lt;2) {throw new Error('Only one column available, can\'t zip');}
			return Table.zip(columns);
		}
		else {
			return columns;
		}
	}
	
	/**
	 * Get the specified column
	 * @param {(number|string)} ind
	 * @param {boolean} [asObj]
	 * @returns {(Object|Number|String)}
	 */
	column(ind, asObj) {
		let column = this.getColumnIndex(ind);
		let data = this._rows.forEach(r => r[column]); // TODO
		if (asObj) {
			let obj = {};
			this._rows.forEach(r => {
				obj[r[this._rowKeyColumnIndex]] = r[column];
			});
			return obj;
		} else {
			return this._rows.map(r => r[column]);
		}
	}
	
	/**
	 * Get the specified header
	 * @param {(number|string)} ind
	 * @returns {(number|string)}
	 */
	header(ind) {
		let keys = Object.keys(this._headers);
		let i = this.getColumnIndex(ind);
		return keys[keys.findIndex(k => i===this._headers[k])];
	}
	
	/**
	 * This function returns different values depending on the arguments provided.
	 * When there are no arguments, it returns the number of headers in this table.
	 * When the first argument is the boolean value `true` all headers are returned.
	 * When the first argument is a number a slice of the headers is returned.
	 * When the first argument is an array the slices specified in the array are returned.
	 * @param {(Boolean|Array|Number|String)} inds
	 * @returns {(Number|Array)}
	 */
	headers(inds, ...other) {
		
		// return length
		if (inds===undefined) {
			return Object.keys(this._headers).length;
		}

		// let headers = [];
		
		// return all
		if (typeof inds === 'boolean' &amp;&amp; inds) {
			inds = Array(Object.keys(this._headers).length).fill().map((_,i) => i);
		}
		
		// return specified rows
		if (Array.isArray(inds)) {
			return inds.map(i => this.header(i));
		}
		
		// return specified rows as varargs
		else if (typeof inds === 'number' || typeof inds === 'string') {
			return [inds, ...other].map(i => this.header(i));
		}
	}

	/**
	 * Does the specified column exist
	 * @param {(number|string)} ind
	 * @returns {(number|string)}
	 */
	hasColumn(ind) {
		return ind in this._headers;
	}
	
	/**
	 * Runs the specified function on each row.
	 * The function is passed the row and the row index.
	 * @param {Function} fn
	 */
	forEach(fn) {
		this._rows.forEach((r,i) => fn(r,i));
	}
	
	/**
	 * Get the minimum value in the specified row
	 * @param {(number|string)} ind
	 * @returns {number}
	 */
	rowMin(ind) {
		return Math.min.apply(null, this.row(ind));
	}
	
	/**
	 * Get the maximum value in the specified row
	 * @param {(number|string)} ind
	 * @returns {number}
	 */
	rowMax(ind) {
		return Math.max.apply(null, this.row(ind));
	}
	
	/**
	 * Get the minimum value in the specified column
	 * @param {(number|string)} ind
	 * @returns {number}
	 */
	columnMin(ind) {
		return Math.min.apply(null, this.column(ind));
	}
	
	/**
	 * Get the maximum value in the specified column
	 * @param {(number|string)} ind
	 * @returns {number}
	 */
	columnMax(ind) {
		return Math.max.apply(null, this.column(ind));
	}
	
	/**
	 * Get the sum of the values in the specified row
	 * @param {(number|string)} ind
	 * @returns {number}
	 */
	rowSum(ind) {
		return Table.sum(this.row(ind));
	}
	
	/**
	 * Get the sum of the values in the specified column
	 * @param {(number|string)} ind
	 * @returns {number}
	 */
	columnSum(ind) {
		return Table.sum(this.column(ind));
	}

	/**
	 * Get the mean of the values in the specified row
	 * @param {(number|string)} ind
	 * @returns {number}
	 */
	rowMean(ind) {
		return Table.mean(this.row(ind));
	}
	
	/**
	 * Get the mean of the values in the specified column
	 * @param {(number|string)} ind
	 * @returns {number}
	 */
	columnMean(ind) {
		return Table.mean(this.column(ind));
	}
	
	/**
	 * Get the count of each unique value in the specified row
	 * @param {(number|string)} ind
	 * @returns {number}
	 */
	rowCounts(ind) {
		return Table.counts(this.row(ind));
	}
	
	/**
	 * Get the count of each unique value in the specified column
	 * @param {(number|string)} ind
	 * @returns {number}
	 */
	columnCounts(ind) {
		return Table.counts(this.column(ind));
	}
	
	/**
	 * Get the rolling mean for the specified row
	 * @param {(number|string)} ind
	 * @param {number} neighbors
	 * @param {boolean} overwrite
	 * @returns {Array}
	 */
	rowRollingMean(ind, neighbors, overwrite) {
		let means = Table.rollingMean(this.row(ind), neighbors);
		if (overwrite) {
			this.setRow(ind, means);
		}
		return means;
	}
	
	/**
	 * Get the rolling mean for the specified column
	 * @param {(number|string)} ind
	 * @param {number} neighbors
	 * @param {boolean} overwrite
	 * @returns {Array}
	 */
	columnRollingMean(ind, neighbors, overwrite) {
		let means = Table.rollingMean(this.column(ind), neighbors);
		if (overwrite) {
			this.setColumn(ind, means);
		}
		return means;
	}
	
	/**
	 * Get the variance for the specified row
	 * @param {(number|string)} ind
	 * @returns {number}
	 */
	rowVariance(ind) {
		return Table.variance(this.row(ind));
	}
	
	/**
	 * Get the variance for the specified column
	 * @param {(number|string)} ind
	 * @returns {number}
	 */
	columnVariance(ind) {
		return Table.variance(this.column(ind));
	}
	
	/**
	 * Get the standard deviation for the specified row
	 * @param {(number|string)} ind
	 * @returns {number}
	 */
	rowStandardDeviation(ind) {
		return Table.standardDeviation(this.row(ind));
	}
	
	/**
	 * Get the standard deviation for the specified column
	 * @param {(number|string)} ind
	 * @returns {number}
	 */
	columnStandardDeviation(ind) {
		return Table.standardDeviation(this.column(ind));
	}
	
	/**
	 * Get the z scores for the specified row
	 * @param {(number|string)} ind
	 * @returns {Array}
	 */
	rowZScores(ind) {
		return Table.zScores(this.row(ind));
	}
	
	/**
	 * Get the z scores for the specified column
	 * @param {(number|string)} ind
	 * @returns {Array}
	 */
	columnZScores(ind) {
		return Table.zScores(this.column(ind));
	}
	
	/**
	 * TODO
	 * Sort the specified rows
	 * @returns {Spyral.Table}
	 */
	rowSort(inds, config) {
		// no inds, use all columns
		if (inds===undefined) {
			inds = Array(this.columns()).fill().map((_,i) => i);
		}

		// wrap a single index as array
		if (typeof inds === 'string' || typeof inds === 'number') {
			inds = [inds];
		}

		if (Array.isArray(inds)) {
			return this.rowSort((a,b) => {
				let ind;
				for (let i=0, len=inds.length; i&lt;len; i++) {
					ind = this.getColumnIndex(inds[i]);
					if (a!==b) {
						if (typeof a[ind] === 'string' &amp;&amp; typeof b[ind] === 'string') {
							return a[ind].localeCompare(b[ind]);
						} else {
							return a[ind]-b[ind];
						}
					}
				}
				return 0;
			}, config);
		}

		if (typeof inds === 'function') {
			this._rows.sort((a,b) => {
				if (config &amp;&amp; 'asObject' in config &amp;&amp; config.asObject) {
					let c = {};
					for (let k in this._headers) {
						c[k] = a[this._headers[k]];
					}
					let d = {};
					for (let k in this._headers) {
						d[k] = b[this._headers[k]];
					}
					return inds.apply(this, [c,d]);
				} else {
					return inds.apply(this, [a,b]);
				}
			});
			if (config &amp;&amp; 'reverse' in config &amp;&amp; config.reverse) {
				this._rows.reverse(); // in place
			}
		}
		
		return this;
	}
	
	/**
	 * TODO
	 * Sort the specified columns
	 * @returns {Spyral.Table}
	 */
	columnSort(inds, config) {
		// no inds, use all columns
		if (inds===undefined) {
			inds = Array(this.columns()).fill().map((_,i) => i);
		}

		// wrap a single index as array
		if (typeof inds === 'string' || typeof inds === 'number') {
			inds = [inds];
		}
		
		if (Array.isArray(inds)) {
			
			// convert to column names
			let headers = inds.map(ind => this.header(ind));
			
			// make sure we have all columns
			Object.keys(this._headers).forEach(h => {
				if (!headers.includes(h)) {headers.push(h);}
			});
			
			// sort names alphabetically
			headers.sort((a,b) => a.localeCompare(b));
			
			// reorder by columns
			this._rows = this._rows.map((_,i) => headers.map(h => this.cell(i,h)));
			this._headers = {};
			headers.forEach((h,i) => this._headers[h]=i);
			
		}
		
		if (typeof inds === 'function') {
			let headers = Object.keys(this._headers);
			if (config &amp;&amp; 'asObject' in headers &amp;&amp; headers.asObject) {
				headers = headers.map((h,i) => {
					return {header: h, data: this._rows.map((r,j) => this.cell(i,j))};
				});
			}
			headers.sort((a,b) => {
				return inds.apply(this, [a,b]);
			});
			headers = headers.map(h => typeof h === 'object' ? h.header : h); // convert back to string
			
			// make sure we have all keys
			Object.keys(this._headers).forEach(k => {
				if (headers.indexOf(k)===-1) {headers.push(k);}
			});
			
			this._rows = this._rows.map((_,i) => headers.map(h => this.cell(i,h)));
			this._headers = {};
			headers.forEach((h,i) => this._headers[h]=i);
		}
	}
	
	/**
	 * Get a CSV representation of the Table
	 * @param {Object} [config]
	 * @returns {string}
	 */
	toCsv(config) {
		const cell = function(c) {
			let quote = /"/g;
			return typeof c === 'string' &amp;&amp; (c.indexOf(',')>-1 || c.indexOf('"')>-1) ? '"'+c.replace(quote,'"')+'"' : c;
		};
		return (config &amp;&amp; 'noHeaders' in config &amp;&amp; config.noHeaders ? '' : this.headers(true).map(h => cell(h)).join(',') + '\n') +
			this._rows.map(row => row.map(c => cell(c)).join(',')).join('\n');
	}
	
	/**
	 * Get a TSV representation of the Table
	 * @param {Object} [config]
	 * @returns {string}
	 */
	toTsv(config) {
		return config &amp;&amp; 'noHeaders' in config &amp;&amp; config.noHeaders ? '' : this.headers(true).join('\t') + '\n' +
			this._rows.map(row => row.join('\t')).join('\n');
	}

	/**
	 * Get an array of the rows of the Table.
	 * @param {Boolean} [rowsAsObjects=false] If true, each row will be returned as an object with the headers as keys
	 * @returns {Array}
	 */
	toArray(rowsAsObjects=false) {
		if (!rowsAsObjects) return this.rows(true);
		else {
			const headers = this.headers(true);
			return this.rows(true).map(row => {
				let rowObj = {};
				row.forEach((cell, col) => {
					rowObj[headers[col]] = cell;
				});
				return rowObj;
			});
		}
	}
	
	/**
	 * Set the target's contents to an HTML representation of the Table
	 * @param {(Function|String|Object)} target
	 * @param {Object} [config]
	 * @returns {Spyral.Table}
	 */
	html(target, config) {
		let html = this.toString(config);
		if (typeof target === 'function') {
			target(html);
		} else {
			if (typeof target === 'string') {
				target = document.querySelector(target);
				if (!target) {
					throw 'Unable to find specified target: '+target;
				}
			}
			if (typeof target === 'object' &amp;&amp; 'innerHTML' in target) {
				target.innerHTML = html;
			}
		}
		return this;
	}
	
	/**
	 * Same as {@link toString}.
	 */
	toHtml(config={}) {
		return this.toString(config);
	}

	/**
	 * Displays an interactive table using [DataTables]{@link https://datatables.net/}
	 * @param {HTMLElement} [target]
	 * @param {Object} config 
	 * @returns {DataTable}
	 */
	toDataTable(target, config={}) {
		if (Util.isNode(target) === false &amp;&amp; typeof target === 'object') {
			config = target;
			target = undefined;
		}
		if (target === undefined) {
			if (typeof Spyral !== 'undefined' &amp;&amp; Spyral.Notebook) {
				target = Spyral.Notebook.getTarget();
			} else {
				target = document.createElement('div');
				document.body.appendChild(target);
			}
		} else {
			if (Util.isNode(target) &amp;&amp; target.isConnected === false) {
				throw new Error('The target node does not exist within the document.');
			}
		}
		target = document.body.appendChild(target);
		this.html(target, config);
		let dataTable = new DataTable(target.firstElementChild);
		return dataTable;
	}
	
	/**
	 * Get an HTML representation of the Table
	 * @param {Object} [config]
	 * @returns {string}
	 */
	toString(config={}) {
		if (typeof config === 'number') {
			config = {limit: config};
		}
		if ('top' in config &amp;&amp; !('limit' in config)) {
			config.limit = config.top;
		}
		if ('limit' in config &amp;&amp; !('bottom' in config)) {
			config.bottom = 0;
		}
		if ('bottom' in config &amp;&amp; !('limit' in config)) {
			config.limit=0;
		}
		return '&lt;table'+('id' in config ? ' id="'+config.id+'" ' : ' ')+'class="voyantTable">' +
			((config &amp;&amp; 'caption' in config &amp;&amp; typeof config.caption === 'string') ?
				'&lt;caption>'+config.caption+'&lt;/caption>' : '') +
			((config &amp;&amp; 'noHeaders' in config &amp;&amp; config.noHeaders) ? '' : ('&lt;thead>&lt;tr>'+this.headers(true).map(c => '&lt;th>'+c+'&lt;/th>').join('')+'&lt;/tr>&lt;/thead>'))+
			'&lt;tbody>'+
			this._rows.filter((row,i,arr) => ((!('limit' in config) || i&lt;config.limit) || (!('bottom' in config) || i > arr.length-1 - config.bottom)))
				.map(row => '&lt;tr>'+row.map(c => '&lt;td>'+(typeof c === 'number' ? c.toLocaleString() : c)+'&lt;/td>').join('')+'&lt;/tr>').join('') +
			'&lt;/tbody>&lt;/table>';
	}
	
	/**
	 * Show a chart representing the Table
	 * @param {(String|HTMLElement)} [target]
	 * @param {HighchartsConfig} [config]
	 * @returns {Highcharts.Chart}
	 */
	chart(target = undefined, config = {}) {
		[target, config] = Chart._handleTargetAndConfig(target, config);

		config.chart = config.chart || {};
		
		let columnsCount = this.columns();
		let rowsCount = this.rows();
		let headers = this.headers(config.columns ? config.columns : true);
		let isHeadersCategories = headers.every(h => isNaN(h));

		if (isHeadersCategories) {
			Chart._setDefaultChartType(config, 'column');
		}

		// set categories if not set
		config.xAxis = config.xAxis || {};
		config.xAxis.categories = config.xAxis.categories || headers;
		
		// start filling in series
		config.series = config.series || [];

		if (!('seriesFrom' in config)) {
			// one row, so let's take series from rows
			if (rowsCount === 1) {
				config.dataFrom = config.dataFrom || 'rows';
			} else if (columnsCount === 1 || (!('dataFrom' in config))) {
				config.dataFrom = config.dataFrom || 'columns';
			}
		}

		if ('dataFrom' in config) {
			if (config.dataFrom === 'rows') {
				config.data = {rows:[]};
				config.data.rows.push(headers);
				config.data.rows = config.data.rows.concat(this.rows(true));
			} else if (config.dataFrom === 'columns') {
				config.data = {columns:[]};
				config.data.columns = config.data.columns.concat(this.columns(true));
				if (config.data.columns.length === headers.length) {
					headers.forEach((h, i) => {
						config.data.columns[i].splice(0, 0, h);
					});
				}
			}
		} else if ('seriesFrom' in config) {
			if (config.seriesFrom === 'rows') {
				this.rows(config.rows ? config.rows : true).forEach((row, i) => {
					config.series[i] = config.series[i] || {};
					config.series[i].data = headers.map(h => this.cell(i, h));
				});
			} else if (config.seriesFrom === 'columns') {
				this.columns(config.columns ? config.columns : true).forEach((col, i) => {
					config.series[i] = config.series[i] || {};
					config.series[i].data = [];
					for (let r = 0; r &lt; rowsCount; r++) {
						config.series[i].data.push(this.cell(r, i));
					}
				});
			}
		}
		
		delete config.dataFrom;
		delete config.seriesFrom;

		return Chart.create(target, config);
	}

	/**
	 * Create a new Table
	 * @param {(Object|Array|String|Number)} data
	 * @param {Spyral.Table~TableConfig} config
	 * @returns {Spyral.Table}
	 * @static
	 */
	static create(data, config, ...other) {
		return new Table(data, config, ...other);
	}
	
	/**
	 * Fetch a Table from a source
	 * @param {(String|Request)} input
	 * @param {Object} api
	 * @param {Object} config
	 * @returns {Promise}
	 * @static
	 */
	static fetch(input, api, config) {
		return new Promise((resolve, reject) => {
			window.fetch(input, api).then(response => {
				if (!response.ok) {throw new Error(response.status + ' ' + response.statusText);}
				response.text().then(text => {
					resolve(Table.create(text, config || api));
				});
			});
		});
	}

	/**
	 * Get the count of each unique value in the data
	 * @param {Array} data
	 * @returns {Object}
	 * @static
	 */
	static counts(data) {
		let vals = {};
		data.forEach(v => v in vals ? vals[v]++ : vals[v]=1);
		return vals;
	}
	
	/**
	 * Compare two values
	 * @param {(number|string)} a
	 * @param {(number|string)} b
	 * @returns {number}
	 * @static
	 */
	static cmp(a, b) {
		return typeof a === 'string' &amp;&amp; typeof b === 'string' ? a.localeCompare(b) : a-b;
	}

	/**
	 * Get the sum of the provided values
	 * @param {Array} data
	 * @returns {number}
	 * @static
	 */
	static sum(data) {
		return data.reduce((a,b) => a+b, 0);
	}
	
	/**
	 * Get the mean of the provided values
	 * @param {Array} data
	 * @returns {number}
	 * @static
	 */
	static mean(data) {
		return Table.sum(data) / data.length;
	}
	
	/**
	 * Get rolling mean for the provided values
	 * @param {Array} data
	 * @param {number} neighbors
	 * @returns {Array}
	 * @static
	 */
	static rollingMean(data, neighbors) {
		// https://stackoverflow.com/questions/41386083/plot-rolling-moving-average-in-d3-js-v4/41388581#41387286
		return data.map((val, idx, arr) => {
			let start = Math.max(0, idx - neighbors), end = idx + neighbors;
			let subset = arr.slice(start, end + 1);
			let sum = subset.reduce((a,b) => a + b);
			return sum / subset.length;
		});
	}
	
	/**
	 * Get the variance for the provided values
	 * @param {Array} data
	 * @returns {number}
	 * @static
	 */
	static variance(data) {
		let m = Table.mean(data);
		return Table.mean(data.map(num => Math.pow(num-m, 2)));
	}
	
	/**
	 * Get the standard deviation for the provided values
	 * @param {Array} data
	 * @returns {number}
	 * @static
	 */
	static standardDeviation(data) {
		return Math.sqrt(Table.variance(data));
	}
	
	/**
	 * Get the z scores for the provided values
	 * @param {Array} data
	 * @returns {Array}
	 * @static
	 */
	static zScores(data) {
		let m = Table.mean(data);
		let s = Table.standardDeviation(data);
		return data.map(num => (num-m) / s);
	}
	
	/**
	 * Perform a zip operation of the provided arrays. Learn more about zip on [Wikipedia]{@link https://en.wikipedia.org/wiki/Convolution_%28computer_science%29}.
	 * @param {Array} data
	 * @returns {Array}
	 * @static
	 */
	static zip(...data) {
	
		// we have a single nested array, so let's recall with flattened arguments
		if (data.length===1 &amp;&amp; Array.isArray(data) &amp;&amp; data.every(d => Array.isArray(d))) {
			return Table.zip.apply(null, ...data);
		}
		
		// allow arrays to be of different lengths
		let len = Math.max.apply(null, data.map(d => d.length));
		return new Array(len).fill().map((_,i) => data.map(d => d[i]));
	}
}

// this seems like a good balance between a built-in flexible parser and a heavier external parser
// https://lowrey.me/parsing-a-csv-file-in-es6-javascript/
const regex = /(?!\s*$)\s*(?:'([^'\\]*(?:\\[\S\s][^'\\]*)*)'|"([^"\\]*(?:\\[\S\s][^"\\]*)*)"|([^,'"\s\\]*(?:\s+[^,'"\s\\]+)*))\s*(?:,|$)/g;
function parseCsvLine(line) {
	let arr = [];
	line.replace(regex, (m0, m1, m2, m3) => {
		if (m1 !== undefined) {
			arr.push(m1.replace(/\\'/g, '\''));
		} else if (m2 !== undefined) {
			arr.push(m2.replace(/\\"/g, '"'));
		} else if (m3 !== undefined) {
			arr.push(m3);
		}
		return '';
	});
	if (/,\s*$/.test(line)) {arr.push('');}
	return arr;
	
}

export default Table;
</code></pre>
        </article>
    </section>




</div>

<footer>
    <div class="footer-text"><a href='https://creativecommons.org/licenses/by/4.0/' style='text-decoration: none; color: black;'>© Stéfan Sinclair & Geoffrey Rockwell</a></div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>
