{
"version":3,
"file":"voyant.f5e71ea7e8ecef0b384b2fa5463b6730.min.js.map",
"lineCount":1433,
"mappings":"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",
"sources":["src/com/google/javascript/jscomp/js/base.js","src/com/google/javascript/jscomp/js/es6/util/createtemplatetagfirstarg.js","src/com/google/javascript/jscomp/js/es6/util/arrayiterator.js","src/com/google/javascript/jscomp/js/es6/util/makeiterator.js","src/com/google/javascript/jscomp/js/util/owns.js","src/com/google/javascript/jscomp/js/util/defines.js","src/com/google/javascript/jscomp/js/util/defineproperty.js","src/com/google/javascript/jscomp/js/util/global.js","src/com/google/javascript/jscomp/js/util/shouldpolyfill.js","src/com/google/javascript/jscomp/js/util/polyfill.js","src/com/google/javascript/jscomp/js/es6/util/assign.js","src/com/google/javascript/jscomp/js/es6/object/assign.js","src/com/google/javascript/jscomp/js/es6/util/setprototypeof.js","src/com/google/javascript/jscomp/js/es6/generator_engine.js","src/com/google/javascript/jscomp/js/es6/execute_async_generator.js","/resources/bubblelines/Bubblelines.js","/resources/knots/Knots.js","/resources/cirrus/html5/Cirrus.js","/resources/cirrus/html5/Word.js","/resources/cirrus/html5/WordController.js","/resources/doubletree/DoubleTree.js","/resources/doubletree/Trie.js","/resources/termsradio/TermsRadio.js","/app/util/Api.js","/app/util/Localization.js","/app/util/Colors.js","/app/util/DetailedError.js","/app/util/ResponseError.js","/app/util/SparkLine.js","/app/util/Toolable.js","/app/util/Transferable.js","/app/util/Variants.js","/app/util/Downloadable.js","/app/util/Storage.js","/app/util/DiacriticsRemover.js","/app/data/model/AnalysisToken.js","/app/data/model/Context.js","/app/data/model/CorpusFacet.js","/app/data/model/CorpusCollocate.js","/app/data/model/CorpusTerm.js","/app/data/model/CorpusNgram.js","/app/data/model/Dimension.js","/app/data/model/Document.js","/app/data/model/DocumentEntity.js","/app/data/model/DocumentQueryMatch.js","/app/data/model/DocumentTerm.js","/app/data/model/PrincipalComponent.js","/app/data/model/RelatedTerm.js","/app/data/model/StatisticalAnalysis.js","/app/data/model/Token.js","/app/data/model/TermCorrelation.js","/app/data/model/Entity.js","/app/data/store/VoyantStore.js","/app/data/store/CAAnalysis.js","/app/data/store/Contexts.js","/app/data/store/CorpusCollocates.js","/app/data/store/CorpusFacets.js","/app/data/store/CorpusTerms.js","/app/data/store/DocumentQueryMatches.js","/app/data/store/DocumentTerms.js","/app/data/store/DocumentEntities.js","/app/data/store/Documents.js","/app/data/store/PCAAnalysis.js","/app/data/store/DocSimAnalysis.js","/app/data/store/CorpusNgrams.js","/app/data/store/RelatedTerms.js","/app/data/store/TermCorrelations.js","/app/data/store/Tokens.js","/app/data/store/TSNEAnalysis.js","/app/data/store/NotebookFacets.js","/app/data/util/Table.js","/app/data/util/NetworkGraph.js","/app/data/util/Geonames.js","/app/data/util/DocumentEntities.js","/app/data/model/Corpus.js","/app/widget/CorpusSelector.js","/app/widget/ListEditor.js","/app/widget/StopListOption.js","/app/widget/TermColorsOption.js","/app/widget/QuerySearchField.js","/app/widget/TotalPropertyStatus.js","/app/widget/DocumentSelector.js","/app/widget/CorpusDocumentSelector.js","/app/widget/DownloadFilenameBuilder.js","/app/widget/DownloadFileFormat.js","/app/widget/DownloadOptions.js","/app/widget/FontFamilyOption.js","/app/widget/ColorPaletteOption.js","/app/widget/VoyantChart.js","/app/widget/LiveSearchGrid.js","/app/widget/ProgressMonitor.js","/app/widget/VoyantTableTransform.js","/app/widget/CategoriesBuilder.js","/app/widget/VoyantNetworkGraph.js","/app/widget/ReaderGraph.js","/app/widget/EntitiesList.js","/app/panel/Panel.js","/app/panel/VoyantTabPanel.js","/app/widget/Facet.js","/app/panel/Bubbles.js","/app/panel/Bubblelines.js","/app/panel/Catalogue.js","/app/panel/Cirrus.js","/app/panel/Links.js","/app/panel/Constellations.js","/app/panel/Contexts.js","/app/panel/CorpusCollocates.js","/app/panel/CorpusTermSummary.js","/app/panel/Correlations.js","/app/panel/CorpusCreator.js","/app/panel/DreamScape.js","/app/panel/Entities.js","/app/panel/Knots.js","/app/panel/Phrases.js","/app/panel/CorpusTerms.js","/app/panel/DocumentTerms.js","/app/panel/Documents.js","/app/panel/DocumentsFinder.js","/app/panel/Embedder.js","/app/panel/Fountain.js","/app/panel/RezoViz.js","/app/panel/Loom.js","/app/panel/MicroSearch.js","/app/panel/Mandala.js","/app/panel/MicroOcp.js","/app/panel/Reader.js","/app/panel/SimpleDocReader.js","/app/panel/ScatterPlot.js","/app/panel/StreamGraph.js","/app/panel/Summary.js","/app/panel/TextualArc.js","/app/panel/TopicContexts.js","/app/panel/TermsBerry.js","/app/panel/TermsRadio.js","/app/panel/Trends.js","/app/panel/NoTool.js","/app/panel/VoyantFooter.js","/app/panel/VoyantHeader.js","/app/panel/CorpusSet.js","/app/panel/ScatterSet.js","/app/panel/Subset.js","/app/panel/CollocatesSet.js","/app/panel/BubblelinesSet.js","/app/panel/CustomSet.js","/app/panel/EntitiesSet.js","/app/panel/Veliza.js","/app/panel/WordTree.js","/app/panel/WordWall.js","/app/panel/Topics.js","/app/panel/Via.js","/app/notebook/editor/button/Add.js","/app/notebook/editor/button/CodeConfig.js","/app/notebook/editor/button/Export.js","/app/notebook/editor/button/ExpandCollapse.js","/app/notebook/editor/button/Counter.js","/app/notebook/editor/button/MoveDown.js","/app/notebook/editor/button/MoveUp.js","/app/notebook/editor/button/Remove.js","/app/notebook/editor/button/Run.js","/app/notebook/editor/button/RunAll.js","/app/notebook/editor/button/RunUntil.js","/app/notebook/editor/button/Warning.js","/app/notebook/editor/EditorWrapper.js","/app/notebook/editor/RunnableEditorWrapper.js","/app/notebook/editor/SandboxWrapper.js","/app/notebook/editor/CodeEditor.js","/app/notebook/editor/CodeEditorWrapper.js","/app/notebook/editor/TextEditor.js","/app/notebook/editor/TextEditorWrapper.js","/app/notebook/editor/CachedInput.js","/app/notebook/editor/FileInput.js","/app/notebook/editor/CorpusInput.js","/app/notebook/editor/TableInput.js","/app/notebook/editor/DataWrapper.js","/app/notebook/storage/github/OctokitWrapper.js","/app/notebook/storage/github/ReposBrowser.js","/app/notebook/storage/github/FileSaver.js","/app/notebook/storage/github/GitHubDialogs.js","/app/notebook/storage/voyant/StorageDialogs.js","/app/notebook/metadata/MetadataEditor.js","/app/notebook/util/FormatConverter.js","/app/notebook/util/NotebooksList.js","/app/notebook/util/DocsPanel.js","/app/notebook/Catalogue.js","/app/notebook/Authenticator.js","/app/notebook/Notebook.js","/app/VoyantApp.js","/app/VoyantCorpusApp.js","/app/VoyantCorpusToolsetApp.js","/app/VoyantDefaultApp.js","/app/VoyantDocumentToolsetApp.js","/app/VoyantNotebookApp.js","/app/VoyantToolApp.js"],
"sourcesContent":["","","","","","","","","","","","","","","","function Bubblelines(config) {\r\n\tthis.container = config.container;\r\n\tthis.externalClickHandler = config.clickHandler;\r\n\t\r\n\tthis.INTERVAL = 50; // milliseconds between each redraw\r\n\tthis.DISMISS_DELAY = 2500; // milliseconds before tooltip auto hides\r\n\tthis.UNIFORM_LINE_LENGTH = true; // should all document lines be the same length?\r\n\tthis.SEPARATE_LINES_FOR_TERMS = false; // draw a separate line for each term?\r\n\t\r\n\t// these 2 get set in the code\r\n\tthis.MAX_LABEL_WIDTH = 0;\r\n\tthis.MAX_LINE_WIDTH = 0;\r\n\t\r\n\tthis.DRAW_TITLES = true; // where to draw the document titles for each graph; gets set to false if the corpus has only 1 document\r\n\tthis.DRAW_SHORT_TITLES = false; // whether to use the docIndex for the title or not; gets set to true if the window is small enough\r\n\t\r\n\tthis.MIN_GRAPH_SEPARATION = 50; // vertical separation between graphs\r\n\tthis.graphSeparation = 50;\r\n\t\r\n\tthis.yIndex = 0; // for tracking yIndex during the drawing process\r\n\t\r\n\tthis.mouseOver = false; // is the mouse over the canvas\r\n\tthis.intervalId = null;\r\n\tthis.clearToolTipId = null;\r\n\tthis.overBubbles = [];\r\n\tthis.lastClickedBubbles = {};\r\n\tthis.dragInfo = null;\r\n\tthis.canvas = null;\r\n\tthis.ctx = null;\r\n\tthis.maxDocLength = 2;\r\n\tthis.maxFreq = {term: null, value: 0};\r\n\tthis.maxRadius = 0;\r\n\t\r\n\t/**\r\n\t * The cache of docs. Each has the following properties:\r\n\t * @param {String} id\r\n\t * @param {String} title\r\n\t * @param {Integer} index\r\n\t * @param {Integer} totalTokens\r\n\t * @param {Object} terms Stores the terms for this doc\r\n\t * @param {Object} freqCounts Used for tool tip display\r\n\t * @param {Float} height The height of the graph for this doc\r\n\t * @param {Float} titleWidth The width of the title\r\n\t * @param {Float} lineLength The length of the graph line for this doc\r\n\t */\r\n\tthis.cache = new Ext.util.MixedCollection();\r\n\t\r\n\tthis.currentTerms = {}; // tracks what terms we're currently showing\r\n\tthis.termsFilter = []; // tracks the subset of terms\r\n\tthis.bubbleSpacing = 50;\r\n\r\n\tthis.initialized = false;\r\n}\r\n\r\nBubblelines.prototype = {\r\n\tconstructor: Bubblelines,\r\n\t\r\n\tinitializeCanvas: function() {\r\n\t\tvar container = this.container;\r\n\t\tvar height = container.getHeight();\r\n\t\tvar width = container.getWidth();\r\n\t\tthis.DRAW_SHORT_TITLES = width < 500;\r\n\t\tvar id = Ext.id('bubblelines');\r\n\t\tcontainer.add({\r\n\t\t\txtype: 'container',\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\thtml: '<canvas id=\"'+id+'\" width=\"'+width+'\" height=\"'+height+'\"></canvas>',\r\n\t\t\tborder: false,\r\n        \tlisteners: {\r\n        \t\tafterrender: {\r\n        \t\t\tfn: function(cnt) {\r\n    \t\t\t\t\tthis.canvas = document.getElementById(id);\r\n        \t\t\t\tthis.ctx = this.canvas.getContext('2d');\r\n        \t\t\t\tthis.canvas.addEventListener('click', this.clickHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mousedown', this.mouseDownHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mouseup', this.mouseUpHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mousemove', this.moveHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mouseenter', this.mouseEnterHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mouseleave', this.mouseLeaveHandler.bind(this), false);\r\n        \t\t\t\t            \t\t\t\t\r\n//        \t\t\t\tthis.findLongestDocumentTitle();\r\n//        \t\t\t\t\r\n//        \t\t\t\tvar padding = 75;\r\n//        \t\t\t\tif (this.DRAW_SHORT_TITLES) padding = 50;\r\n//        \t\t\t\tthis.setMaxLineWidth(width - this.MAX_LABEL_WIDTH - padding);\r\n        \t\t\t},\r\n        \t\t\tsingle: true,\r\n        \t\t\tscope: this\r\n        \t\t}\r\n        \t}\r\n\t\t});\r\n\t\tcontainer.updateLayout();\r\n\t\tthis.initialized = true;\r\n\t},\r\n\t\r\n\tdoBubblelinesLayout: function() {\r\n\t\tif (this.initialized) {\r\n\t\t\tvar width = this.container.getWidth();\r\n\t\t\t\r\n\t\t\t// width related calculations\r\n\t\t\tthis.DRAW_SHORT_TITLES = width < 500;\r\n\t\t\tthis.setTitleWidthsAndMaxTitleWidth();\r\n\t\t\t\r\n\t\t\tvar children = Ext.DomQuery.jsSelect('div:not(div[class*=term])', this.container.el.dom);\r\n\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\tvar child = Ext.fly(children[i]);\r\n\t\t\t\tchild.setWidth(width);\r\n\t\t\t}\r\n\t\t\tthis.canvas.width = width;\r\n\t\t\t\r\n\t\t\tvar padding = 75;\r\n\t\t\tif (this.DRAW_SHORT_TITLES) padding = 50;\r\n\t\t\tthis.setMaxLineWidth(width - this.MAX_LABEL_WIDTH - padding);\r\n\t\t\tthis.setLineLengths();\r\n\t\t\t\r\n\t\t\tthis.recache();\r\n\t\t\t\r\n\t\t\t// height related calculations\r\n\t\t\tthis.setCanvasHeight();\r\n\t\t\t\r\n\t\t\tthis.drawGraph();\r\n\t\t}\r\n\t},\r\n\t\r\n\taddDocToCache: function(doc) {\r\n\t\tthis.cacheBubbles(doc);\r\n\t\tthis.calculateBubbleRadii(doc);\r\n\t\tdoc.lineLength = 600;\r\n\t\tdoc.freqCounts = {}; // used for tool tip display\r\n\t\tif (this.cache.containsKey(doc.id) === false) {\r\n\t\t\tthis.cache.add(doc);\r\n\t\t} else {\r\n\t\t\tthis.cache.replace(doc.id, doc);\r\n\t\t}\r\n\t\tthis.cache.sort('index', 'ASC');\r\n\t},\r\n\t\r\n\taddTermsToDoc: function(termsObj, docId) {\r\n\t\tvar term;\r\n\t\t// only one key\r\n\t\tfor (var key in termsObj) {\r\n\t\t\tterm = key;\r\n\t\t}\r\n\t\tthis.currentTerms[term] = true;\r\n\t\t\r\n\t\tvar doc = this.cache.get(docId);\r\n\t\tExt.apply(doc.terms, termsObj);\r\n\t\tvar maxFreqChanged = this.cacheBubbles(doc);\r\n\t\tif (maxFreqChanged) {\r\n\t\t\tthis.recache();\r\n\t\t} else {\r\n\t\t\tthis.calculateBubbleRadii(doc);\r\n\t\t}\r\n\t},\r\n\t\r\n\tcacheBubbles: function(doc) {\r\n\t\tvar maxFreqChanged = false;\r\n\t\tfor (var term in doc.terms) {\r\n\t\t\tvar termInfo = doc.terms[term];\r\n\t\t\tvar bins = termInfo.distributions.length;\r\n\t\t\tvar spacing = doc.lineLength / bins;\r\n\t\t\t\r\n\t\t\tvar cachedPositions = [];\r\n\t\t\tvar tokenPos = 0;\r\n\t\t\tvar maxDistribution = 0;\r\n\t\t\tvar xIndex = 0;\r\n\t\t\tfor (var i = 0; i < bins; i++) {\r\n\t\t\t\tvar d = termInfo.distributions[i];\r\n\t\t\t\tif (d > maxDistribution) {\r\n\t\t\t\t\tmaxDistribution = d;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcachedPositions.push({id: Ext.id(null, 'bub'), x: xIndex, freq: d, radius: 0, bin: i, tokenPositions: termInfo.positions.slice(tokenPos, tokenPos+=d)});\r\n\t\t\t\txIndex += spacing;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdoc.terms[term].maxDistribution = maxDistribution;\r\n\t\t\tdoc.terms[term].pos = cachedPositions;\r\n\t\t\t\r\n\t\t\tif (maxDistribution > this.maxFreq.value) {\r\n\t\t\t\tmaxFreqChanged = true;\r\n\t\t\t\tthis.setMaxFreq({term: term, value: maxDistribution});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn maxFreqChanged;\r\n\t},\r\n\t\r\n\tcalculateBubbleRadii: function(doc, newTerm) {\r\n\t\tvar maxFreqLog = Math.log(this.maxFreq.value);\r\n\t\tvar minFreq = Math.log(2) / 2;\r\n//\t\tthis.cache.each(function(doc) {\r\n\t\t\tfor (var t in doc.terms) {\r\n\t\t\t\tvar term = doc.terms[t];\r\n\t\t\t\tif (term) {\r\n\t\t\t\t\tif (newTerm == null || t == newTerm) {\r\n\t\t\t\t\t\tfor (var i = 0; i < term.pos.length; i++) {\r\n\t\t\t\t\t\t\tvar bubble = term.pos[i];\r\n\t\t\t\t\t\t\tif (bubble.freq > 0) {\r\n\t\t\t\t\t\t\t\tvar freqLog = Math.max(Math.log(bubble.freq), minFreq);\r\n\t\t\t\t\t\t\t\tvar radius = freqLog / maxFreqLog * this.maxRadius;\r\n\t\t\t\t\t\t\t\tbubble.radius = radius;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tbubble.radius = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n//\t\t}, this);\r\n\t},\r\n\t\r\n\t\r\n\trecache: function() {\r\n\t\tfunction doCache(doc) {\r\n\t\t\tthis.cacheBubbles(doc);\r\n\t\t\tthis.calculateBubbleRadii(doc);\r\n\t\t}\r\n\t\t\r\n\t\tthis.cache.each(doCache, this);\r\n\t},\r\n\t\r\n\t/**\r\n\t * Get the total height of the all the graphs\r\n\t */\r\n\tgetTotalHeight: function() {\r\n\t\tvar totalHeight = this.maxRadius;\r\n\t\tthis.cache.each(function(doc, index, length) {\r\n\t\t\ttotalHeight += doc.height;\r\n\t\t}, this);\r\n\t\treturn totalHeight;\r\n\t},\r\n\t\r\n\r\n\t/**\r\n\t * Set the height for the canvas and associated elements\r\n\t */\r\n\tsetCanvasHeight: function() {\r\n\t\tthis.calculateGraphHeights();\r\n\t\tvar height = this.getTotalHeight();\r\n\t\tvar container = this.container.dom;\r\n\t\tif (container !== undefined) {\r\n\t\t\tvar children = Ext.DomQuery.jsSelect('div', container);\r\n\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\tvar child = Ext.fly(children[i]);\r\n\t\t\t\tchild.setHeight(height);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.canvas) {\r\n\t\t\tthis.canvas.height = height;\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t * Set max line width as well as maxRadius\r\n\t */\r\n\tsetMaxLineWidth: function(width) {\r\n\t\tthis.maxRadius = width / 30;\r\n\t\tthis.MAX_LINE_WIDTH = width - this.maxRadius / 2;\r\n\t},\r\n\t\r\n\t/**\r\n\t * Calculate graph heights, based on maxRadius\r\n\t */\r\n\tcalculateGraphHeights: function() {\r\n\t\tvar graphSeparation = this.maxRadius * 0.5;\r\n\t\tif (this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\tvar terms = this.termsFilter;\r\n\t\t\tthis.cache.each(function(doc, index, length) {\r\n\t\t\t\tvar height = this.maxRadius * terms.length;\r\n\t\t\t\tfor (var i = 0; i < terms.length; i++) {\r\n\t\t\t\t\tif (!doc.terms[terms[i]]) {\r\n\t\t\t\t\t\theight -= this.maxRadius;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (height == 0) height = this.maxRadius;\r\n\t\t\t\t\r\n\t\t\t\tdoc.height = height + graphSeparation;\r\n\t\t\t}, this);\r\n\t\t} else {\r\n\t\t\tvar height = Math.max(this.maxRadius, this.MIN_GRAPH_SEPARATION);\r\n\t\t\tthis.cache.each(function(doc, index, length) {\r\n\t\t\t\tdoc.height = height + graphSeparation;\r\n\t\t\t}, this);\r\n\t\t}\r\n\t},\r\n\t\r\n\tfindLongestDocument: function(doc) {\r\n\t\tvar twt = doc.getTotalWordTokens();\r\n\t\tif (twt > this.maxDocLength) {\r\n\t\t\tthis.maxDocLength = twt;\r\n\t\t}\r\n\t},\r\n\t\r\n\tgetTitleWidth: function(doc) {\r\n\t\tvar title = doc.title;\r\n\t\tif (this.DRAW_SHORT_TITLES) {\r\n\t\t\tvar index = this.cache.indexOf(doc);\r\n\t\t\ttitle = (index+1)+')';\r\n\t\t}\r\n\t\tthis.ctx.textBaseline = 'top';\r\n\t\tthis.ctx.font = 'bold 12px Verdana';\r\n\t\tvar width = this.ctx.measureText(title).width;\r\n\t\treturn width;\r\n\t},\r\n\t\r\n\tsetTitleWidthsAndMaxTitleWidth: function() {\r\n\t\tfunction doTitle(doc, index) {\r\n\t\t\tvar width = this.getTitleWidth(doc);\r\n\t\t\tdoc.titleWidth = width;\r\n\t\t\tif (width > this.MAX_LABEL_WIDTH) {\r\n\t\t\t\tthis.MAX_LABEL_WIDTH = width;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.cache.each(doTitle, this);\r\n\t},\r\n\t\r\n\tsetLineLengths: function() {\r\n\t\tfunction doLength(doc, index) {\r\n\t\t\tvar lineLength;\r\n\t\t\tif (this.UNIFORM_LINE_LENGTH) {\r\n\t\t\t\tlineLength = this.MAX_LINE_WIDTH;\r\n\t\t\t} else {\r\n\t\t\t\tvar percentage = Math.log(doc.getTotalWordTokens()) / Math.log(this.maxDocLength);\r\n\t\t\t\tlineLength = percentage * this.MAX_LINE_WIDTH;\r\n\t\t\t}\r\n\t\t\tdoc.lineLength = lineLength;\r\n\t\t}\r\n\t\t\r\n\t\tthis.cache.each(doLength, this);\r\n\t},\r\n\t\r\n\tdrawGraph: function(includeLegend) {\r\n\t\tif (this.intervalId != null) clearInterval(this.intervalId);\r\n\t\t\r\n\t\tif (this.mouseOver) {\r\n\t\t\tthis.intervalId = setInterval(this.doDraw.bind(this, [includeLegend]), this.INTERVAL);\r\n\t\t} else {\r\n\t\t\tsetTimeout(this.doDraw.bind(this, [includeLegend]), 5);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdoDraw: function(includeLegend) {\r\n\t\tthis.clearCanvas();\r\n\t\tthis.yIndex = this.maxRadius;\r\n\t\tif (includeLegend === true) this.yIndex += 30;\r\n\t\tthis.cache.each(this.drawDocument, this);\r\n\t\tif (includeLegend === true) this.drawLegend();\r\n\t\telse this.drawToolTip();\r\n\t\tthis.doDrag();\r\n\t},\r\n\t\r\n\tdrawDocument: function(doc, index, totalDocs) {\r\n\t\tif (!doc.hidden) {\r\n\t\t\tvar lineLength = doc.lineLength;\r\n\t\t\tvar titleIndent = this.MAX_LABEL_WIDTH - doc.titleWidth;\r\n\t\t\t\r\n\t\t\tvar xIndex = 5;\r\n\t\t\t\r\n\t\t\tthis.ctx.textBaseline = 'top';\r\n\t\t\tthis.ctx.font = 'bold 12px Verdana';\r\n\t\t\t\r\n\t\t\tif (this.dragInfo != null && this.dragInfo.oldIndex == index) {\r\n\t\t\t\tthis.ctx.fillStyle = 'rgba(128, 128, 128, 0.5)';\r\n\t\t\t\txIndex += titleIndent;\r\n\t\t\t\tthis.ctx.fillText(doc.title, xIndex, this.yIndex);\r\n\t\t\t\tif (this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\tthis.yIndex += doc.height;\r\n\t\t\t\t}\r\n\t\t\t} else {\t\t\t\r\n\t\t\t\t// draw label\r\n\t\t\t\tif (this.DRAW_TITLES) {\r\n\t\t\t\t\txIndex += titleIndent;\r\n\t//\t\t\t\tvar c = this.getColor(this.getApplication().getCorpus().getDocument(doc.id).getIndex());\r\n\t//\t\t\t\tthis.ctx.strokeStyle = 'rgba('+c[0]+', '+c[1]+', '+c[2]+', 1.0)';\r\n\t//\t\t\t\tthis.ctx.lineWidth = 2;\r\n\t//\t\t\t\tthis.ctx.beginPath();\r\n\t//\t\t\t\tthis.ctx.moveTo(xIndex, this.yIndex+12);\r\n\t//\t\t\t\tthis.ctx.lineTo(this.MAX_LABEL_WIDTH, this.yIndex+12);\r\n\t//\t\t\t\tthis.ctx.stroke();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.ctx.fillStyle = 'rgba(128, 128, 128, 1.0)';\r\n\t\t\t\t\tvar title = doc.title;\r\n\t\t\t\t\tif (this.DRAW_SHORT_TITLES) title = (index+1)+')';\r\n\t\t\t\t\tthis.ctx.fillText(title, xIndex, this.yIndex);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t//\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 128, 1.0)';\r\n\t//\t\t\tthis.ctx.fillRect(0, this.yIndex-this.maxRadius*0.75, 250, 2);\r\n\t\t\t\t\r\n\t\t\t\t// shift down slightly to vertically align line and bubbles with label\r\n\t\t\t\tthis.yIndex += 4;\r\n\t\t\t\t\r\n\t\t\t\t// draw line\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tfunction drawLine() {\r\n\t\t\t\t\txIndex = that.MAX_LABEL_WIDTH + that.maxRadius;\r\n\t\t\t\t\tthat.ctx.strokeStyle = 'rgba(128, 128, 128, 1.0)';\r\n\t\t\t\t\tthat.ctx.fillStyle = 'rgba(128, 128, 128, 1.0)';\r\n\t\t\t\t\tthat.ctx.lineWidth = 0.25;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthat.ctx.beginPath();\r\n\t\t\t\t\tthat.ctx.moveTo(xIndex, that.yIndex-6);\r\n\t\t\t\t\tthat.ctx.lineTo(xIndex, that.yIndex+6);\r\n\t\t\t\t\tthat.ctx.stroke();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthat.ctx.beginPath();\r\n\t\t\t\t\tthat.ctx.moveTo(xIndex, that.yIndex);\r\n\t\t\t\t\tthat.ctx.lineTo(xIndex + lineLength, that.yIndex);\r\n\t\t\t\t\tthat.ctx.stroke();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthat.ctx.beginPath();\r\n\t\t\t\t\tthat.ctx.moveTo(xIndex + lineLength, that.yIndex-6);\r\n\t\t\t\t\tthat.ctx.lineTo(xIndex + lineLength, that.yIndex+6);\r\n\t\t\t\t\tthat.ctx.stroke();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t//\t\t\tvar filter = this.getApiParamValue('typeFilter');\r\n\t//\t\t\tvar filter = [];\r\n\t//\t\t\tfor (var term in this.currentTerms) {\r\n\t//\t\t\t\tfilter.push(term);\r\n\t//\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\tdrawLine();\r\n\t\t\t\t} else if (this.termsFilter == null || this.termsFilter.length === 0) {\r\n\t\t\t\t\tdrawLine();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// draw bubbles\r\n\t\t\t\tvar pi2 = Math.PI * 2;\r\n\t\t\t\t\r\n\t\t\t\tvar freqTotal = 0;\r\n\t\t\t\tdoc.freqCounts = {};\r\n\t\t\t\tvar terms = doc.terms;\r\n\t\t\t\tvar checkClickedBubbles = this.lastClickedBubbles[index] != null;\r\n\t\t\t\tvar termsDrawn = 0;\r\n\t\t\t\tfor (var t in terms) {\r\n\t\t\t\t\tif (this.termsFilter.indexOf(t) !== -1) {\r\n\t\t\t\t\t\tvar info = terms[t];\r\n\t\t\t\t\t\tif (info) {\r\n\t\t\t\t\t\t\ttermsDrawn++;\r\n\t\t\t\t\t\t\tif (this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\t\t\t\tdrawLine();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar freqForType = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar c = info.color.join(',');\r\n\t\t\t\t\t\t\tthis.ctx.strokeStyle = 'rgba('+c+', 1)';\r\n\t\t\t\t\t\t\tthis.ctx.fillStyle = 'rgba('+c+', 0.35)';\r\n\t\t\t\t\t\t\tthis.ctx.lineWidth = 0.25;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfreqTotal += info.rawFreq;\r\n\t\t\t\t\t\t\tfreqForType += info.rawFreq;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar checkCurrentType = checkClickedBubbles && this.lastClickedBubbles[index][t];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfor (var i = 0; i < info.pos.length; i++) {\r\n\t\t\t\t\t\t\t\tvar b = info.pos[i];\r\n\t\t\t\t\t\t\t\tif (b.radius > 0) {\r\n\t\t\t\t\t\t\t\t\tvar doClickedBubble = false;\r\n\t\t\t\t\t\t\t\t\tif (checkCurrentType && this.lastClickedBubbles[index][t] == b.id) {\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.strokeStyle = 'rgba(0, 0, 0, 0.75)';\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.fillStyle = 'rgba('+c+', 0.5)';\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.lineWidth = 1;\r\n\t\t\t\t\t\t\t\t\t\tdoClickedBubble = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tthis.ctx.beginPath();\r\n\t\t\t\t\t\t\t\t\tthis.ctx.arc(b.x+xIndex, this.yIndex, b.radius, 0, pi2, true);\r\n\t\t\t\t\t\t\t\t\tthis.ctx.closePath();\r\n\t\t\t\t\t\t\t\t\tthis.ctx.fill();\r\n\t\t\t\t\t\t\t\t\tthis.ctx.stroke();\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (doClickedBubble) {\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.strokeStyle = 'rgba('+c+', 1)';\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.fillStyle = 'rgba('+c+', 0.35)';\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.lineWidth = 0.25;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdoc.freqCounts[t] = freqForType;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\t\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 0, 1.0)';\r\n\t\t\t\t\t\t\t\tthis.ctx.font = '10px Verdana';\r\n\t\t\t\t\t\t\t\tthis.ctx.fillText(freqForType, xIndex + lineLength + 5, this.yIndex-4);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.yIndex += this.maxRadius;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.SEPARATE_LINES_FOR_TERMS && termsDrawn == 0) {\r\n\t\t\t\t\tdrawLine();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 0, 1.0)';\r\n\t\t\t\t\tthis.ctx.font = '10px Verdana';\r\n\t\t\t\t\tthis.ctx.fillText(0, xIndex + lineLength + 5, this.yIndex-4);\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.yIndex += this.maxRadius;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\txIndex += lineLength;\r\n\t\t\t\t\r\n\t\t\t\tif (!this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 0, 1.0)';\r\n\t\t\t\t\tthis.ctx.font = '10px Verdana';\r\n\t\t\t\t\tthis.ctx.fillText(freqTotal, xIndex + 5, this.yIndex-4);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\tthis.yIndex += doc.height;\r\n\t\t\t} else {\r\n\t\t\t\tthis.yIndex += this.maxRadius * 0.5;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// undo previous shift\r\n\t\t\tthis.yIndex -= 4;\r\n\t\t\t\r\n\t//\t\tthis.ctx.fillStyle = 'rgba(128, 0, 0, 1.0)';\r\n\t//\t\tthis.ctx.fillRect(0, this.yIndex-this.maxRadius*0.75, 350, 2);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawLegend: function() { // obsolete code?\r\n\t\tvar x = this.MAX_LABEL_WIDTH + this.maxRadius;\r\n\t\tvar y = 5;\r\n\t\tthis.ctx.textBaseline = 'top';\r\n\t\tthis.ctx.font = '16px serif';\r\n\t\tif (this.typeStore) {\r\n\t\t\tthis.typeStore.each(function(record) {\r\n\t\t\t\tvar color = record.get('color').join(',');\r\n\t\t\t\tthis.ctx.fillStyle = 'rgb('+color+')';\r\n\t\t\t\tvar type = record.get('type');\r\n\t\t\t\tthis.ctx.fillText(type, x, y);\r\n\t\t\t\tvar width = this.ctx.measureText(type).width;\r\n\t\t\t\tx += width + 8;\r\n\t\t\t}, this);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawToolTip: function() {\r\n\t\tif (this.overBubbles.length > 0) {\r\n\t\t\tthis.ctx.lineWidth = 0.5;\r\n\t\t\tthis.ctx.fillStyle = 'rgba(224, 224, 224, 0.8)';\r\n\t\t\tthis.ctx.strokeStyle = 'rgba(0, 0, 0, 0.8)';\r\n\t\t\t\r\n\t\t\tvar x = this.overBubbles[0].x;\r\n\t\t\tvar y = this.overBubbles[0].y;\r\n\t\t\tvar width = 110;\r\n\t\t\tif (x + width > this.canvas.width) {\r\n\t\t\t\tx -= width;\r\n\t\t\t}\r\n\t\t\tvar height;\r\n\t\t\tvar summary = this.overBubbles[0].label == null;\r\n\t\t\tif (summary) {\r\n\t\t\t\tvar doc = this.cache.get(this.overBubbles[0].docIndex);\r\n\t\t\t\tvar count = 1;\r\n\t\t\t\tfor (var t in doc.freqCounts) {\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t}\r\n\t\t\t\theight = count * 16;// + 10;\r\n\t\t\t\tif (y + height > this.canvas.height) {\r\n\t\t\t\t\ty -= height;\r\n\t\t\t\t}\r\n\t\t\t\tthis.ctx.fillRect(x, y, width, height);\r\n\t\t\t\tthis.ctx.strokeRect(x, y, width, height);\r\n\t\t\t\tx += 10;\r\n\t\t\t\ty += 10;\r\n\t\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';\r\n\t\t\t\tthis.ctx.font = '10px Verdana';\r\n//\t\t\t\tvar total = 0;\r\n\t\t\t\tfor (var t in doc.freqCounts) {\r\n\t\t\t\t\tvar freq = doc.freqCounts[t];\r\n//\t\t\t\t\ttotal += freq;\r\n\t\t\t\t\tthis.ctx.fillText(t+': '+freq, x, y, 90);\r\n\t\t\t\t\ty += 16;\r\n\t\t\t\t}\r\n//\t\t\t\tthis.ctx.fillText(this.localize('total')+': '+total, x, y, 90);\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\theight = this.overBubbles.length * 16 + 10;\r\n\t\t\t\tif (y + height > this.canvas.height) {\r\n\t\t\t\t\ty -= height;\r\n\t\t\t\t}\r\n\t\t\t\tthis.ctx.fillRect(x, y, width, height);\r\n\t\t\t\tthis.ctx.strokeRect(x, y, width, height);\r\n\t\t\t\tx += 10;\r\n\t\t\t\ty += 10;\r\n\t\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';\r\n\t\t\t\tthis.ctx.font = '10px Verdana';\r\n\t\t\t\tfor (var i = 0; i < this.overBubbles.length; i++) {\r\n\t\t\t\t\tvar b = this.overBubbles[i];\r\n\t\t\t\t\tthis.ctx.fillText(b.label+': '+b.freq, x, y, 90);\r\n\t\t\t\t\ty += 16;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this.clearToolTipId == null) {\r\n\t\t\t\tthis.clearToolTipId = setTimeout(this.clearToolTip.bind(this), this.DISMISS_DELAY);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tclearToolTip: function() {\r\n\t\tthis.overBubbles = [];\r\n\t\tclearTimeout(this.clearToolTipId);\r\n\t\tthis.clearToolTipId = null;\r\n\t},\r\n\t\r\n\tmouseEnterHandler: function(event) {\r\n\t\tthis.mouseOver = true;\r\n\t\tthis.drawGraph();\r\n\t},\r\n\t\r\n\tmouseLeaveHandler: function(event) {\r\n\t\tthis.mouseOver = false;\r\n\t\tif (this.intervalId != null) clearInterval(this.intervalId);\r\n\t\t// draw once to remove any popup\r\n\t\tthis.overBubbles = [];\r\n\t\tthis.drawGraph();\r\n\t},\r\n\t\r\n\tmoveHandler: function(event) {\r\n\t\tthis.clearToolTip();\r\n\t\t\r\n\t\tthis.overBubbles = [];\r\n\t\tvar x = event.layerX - this.MAX_LABEL_WIDTH;\r\n\t\tvar y = event.layerY;\r\n\t\t\r\n\t\tvar docHeight = this.maxRadius*0.25; // where the first graph actually starts\r\n\t\t\r\n\t\tvar docIndex = -1;\r\n\t\tthis.cache.each(function(doc, index, length) {\r\n\t\t\tif (y < docHeight) {\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tdocHeight += doc.height;\r\n\t\t\t\tif (y < docHeight) {\r\n\t\t\t\t\tdocIndex = index;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\t\r\n\t\tif (this.dragInfo != null) {\r\n\t\t\tthis.dragInfo.x = event.layerX;\r\n\t\t\tthis.dragInfo.y = y;\r\n\r\n\t\t\tif (docIndex >= this.cache.getCount()) {\r\n\t\t\t\tdocIndex = this.cache.getCount()-1;\r\n\t\t\t} else if (docIndex < 0) {\r\n\t\t\t\tif (y + this.maxRadius > this.canvas.height) {\r\n\t\t\t\t\tdocIndex = this.cache.getCount()-1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocIndex = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.dragInfo.newIndex = docIndex;\r\n\t\t\tdocument.body.style.cursor = 'move';\r\n\t\t} else {\r\n\t\t\tif (docIndex >= 0 && docIndex < this.cache.getCount()) {\r\n\t\t\t\tif (x >= 0) {\r\n\t\t\t\t\tvar showPointer = false;\r\n\t\t\t\t\tx -= this.maxRadius; // re-adjust x to the start of the doc line \r\n\t\t\t\t\tvar hits = [];\r\n\t\t\t\t\tvar doc = this.cache.get(docIndex);\r\n\t\t\t\t\tif (x >= doc.lineLength) {\r\n\t\t\t\t\t\tthis.overBubbles = [{\r\n\t\t\t\t\t\t\tdocIndex: docIndex,\r\n\t\t\t\t\t\t\tx: event.layerX+10,\r\n\t\t\t\t\t\t\ty: event.layerY+10\r\n\t\t\t\t\t\t}];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar spacing = doc.lineLength / this.bubbleSpacing;\r\n\t\t\t\t\t\tvar xIndex = Math.round(x / spacing);\r\n\t\t\t\t\t\tvar prevDocHeight = this.maxRadius;\r\n\t\t\t\t\t\tif (docIndex > 0) {\r\n\t\t\t\t\t\t\tprevDocHeight = docHeight - (this.cache.get(docIndex).height - this.maxRadius*0.75);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar yIndex = Math.round((y - prevDocHeight) / this.maxRadius);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar count = 0;\r\n\t\t\t\t\t\tfor (var t in doc.terms) {\r\n\t\t\t\t\t\t\tif (this.termsFilter.indexOf(t) !== -1) {\r\n\t\t\t\t\t\t\t\tvar type = doc.terms[t];\r\n\t\t\t\t\t\t\t\tif (type) {\r\n\t\t\t\t\t\t\t\t\tif (this.SEPARATE_LINES_FOR_TERMS && count == yIndex || !this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\t\t\t\t\t\tif (type.pos[xIndex] && type.pos[xIndex].radius > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tshowPointer = true;\r\n\t\t\t\t\t\t\t\t\t\t\tthis.overBubbles.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: t,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: type,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdocId: doc.id,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdocIndex: docIndex,\r\n\t\t\t\t\t\t\t\t\t\t\t\txIndex: xIndex,\r\n\t\t\t\t\t\t\t\t\t\t\t\tyIndex: yIndex,\r\n\t\t\t\t\t\t\t\t\t\t\t\tfreq: type.pos[xIndex].freq,\r\n\t\t\t\t\t\t\t\t\t\t\t\tid: type.pos[xIndex].id,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttokenPositions: type.pos[xIndex].tokenPositions,\r\n\t\t\t\t\t\t\t\t\t\t\t\tx: event.layerX+10,\r\n\t\t\t\t\t\t\t\t\t\t\t\ty: event.layerY+10\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (this.SEPARATE_LINES_FOR_TERMS) count--;\r\n\t\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (showPointer) {\r\n\t\t\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.body.style.cursor = 'auto';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocument.body.style.cursor = 'move';\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdocument.body.style.cursor = 'auto';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tmouseDownHandler: function(event) {\r\n\t\tvar x = event.layerX;\r\n\t\tvar y = event.layerY;\r\n\t\tif (x < this.MAX_LABEL_WIDTH) {\r\n\t\t\t\r\n\t\t\tvar docHeight = this.maxRadius*0.25;\r\n\t\t\tvar docIndex = -1;\r\n\t\t\tthis.cache.each(function(doc, index, length) {\r\n\t\t\t\tif (y < docHeight) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocHeight += doc.height;\r\n\t\t\t\t\tif (y < docHeight) {\r\n\t\t\t\t\t\tdocIndex = index;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\r\n\t\t\tif (docIndex >= 0 && docIndex < this.cache.getCount()) {\r\n\t\t\t\tvar xOffset = x - 5;\r\n\t\t\t\tvar yOffset = 5;\r\n\t\t\t\tthis.dragInfo = {\r\n\t\t\t\t\toldIndex: docIndex,\r\n\t\t\t\t\tnewIndex: docIndex,\r\n\t\t\t\t\txOffset: xOffset,\r\n\t\t\t\t\tyOffset: yOffset,\r\n\t\t\t\t\tx: x,\r\n\t\t\t\t\ty: y\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tmouseUpHandler: function(event) {\r\n\t\tthis.dragInfo = null;\r\n\t},\r\n\t\r\n\tdoDrag: function() {\r\n\t\tif (this.dragInfo != null) {\r\n\t\t\tvar ordering = {};\r\n\t\t\tfor (var i = 0; i < this.cache.getCount(); i++) {\r\n\t\t\t\tif (i < this.dragInfo.oldIndex && i < this.dragInfo.newIndex) {\r\n\t\t\t\t\tordering[i] = i;\r\n\t\t\t\t} else if (i < this.dragInfo.oldIndex && i >= this.dragInfo.newIndex) {\r\n\t\t\t\t\tordering[i] = i + 1;\r\n\t\t\t\t} else if (i == this.dragInfo.oldIndex) {\r\n\t\t\t\t\tordering[i] = this.dragInfo.newIndex;\r\n\t\t\t\t} else if (i > this.dragInfo.oldIndex && i > this.dragInfo.newIndex) {\r\n\t\t\t\t\tordering[i] = i;\r\n\t\t\t\t} else if (i > this.dragInfo.oldIndex && i <= this.dragInfo.newIndex) {\r\n\t\t\t\t\tordering[i] = i - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.dragInfo.oldIndex = this.dragInfo.newIndex;\r\n\t\t\t\r\n\t\t\tthis.cache.reorder(ordering);\r\n\t\t\t\r\n\t\t\tvar doc = this.cache.get(this.dragInfo.oldIndex);\r\n\t\t\tthis.ctx.fillStyle = 'rgba(128, 128, 128, 1)';\r\n\t\t\tthis.ctx.textBaseline = 'top';\r\n\t\t\tthis.ctx.font = 'bold 12px Verdana';\r\n\r\n\t\t\tthis.ctx.fillText(doc.title, this.dragInfo.x - this.dragInfo.xOffset, this.dragInfo.y - this.dragInfo.yOffset);\r\n\t\t}\r\n\t},\r\n\t\r\n\tclickHandler: function(event) {\r\n\t\tthis.lastClickedBubbles = {};\r\n\t\tif (this.overBubbles.length > 0 && this.overBubbles[0].label) {\r\n\t\t\tvar hits = [];\r\n\t\t\tvar tokenPositions = [];\r\n\t\t\tvar termData = [];\r\n\t\t\tfor (var i = 0; i < this.overBubbles.length; i++) {\r\n\t\t\t\tvar b = this.overBubbles[i];\r\n\t\t\t\t\r\n\t\t\t\ttermData.push({term: b.label, docIndex: b.docIndex, docId: b.docId, tokenPositions: b.tokenPositions});\r\n\t\t\t\t\r\n\t\t\t\tif (this.lastClickedBubbles[b.docIndex] == null) {\r\n\t\t\t\t\tthis.lastClickedBubbles[b.docIndex] = {};\r\n\t\t\t\t}\r\n\t\t\t\tthis.lastClickedBubbles[b.docIndex][b.label] = b.id;\r\n\t\t\t\thits.push(b.docId+':'+b.label);\r\n\t\t\t\ttokenPositions.push(b.tokenPositions);\r\n\t\t\t}\r\n\t\t\ttokenPositions = Ext.flatten(tokenPositions);\r\n\t\t\ttokenPositions.sort();\r\n\t\t\t\r\n\t\t\tif (this.externalClickHandler !== undefined) {\r\n\t\t\t\tthis.externalClickHandler(termData);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.overBubbles = [];\r\n\t},\r\n\t\r\n\tsetMaxFreq: function(maxObj) {\r\n\t\tif (maxObj == null) {\r\n\t\t\tmaxObj = this.findMaxFreq();\r\n\t\t}\r\n\t\tthis.maxFreq = maxObj;\r\n\t},\r\n\t\r\n\tfindMaxFreq: function() {\r\n\t\tvar max = {term: '', value: 0};\r\n\t\tthis.cache.each(function(doc) {\r\n\t\t\tfor (var t in doc.terms) {\r\n\t\t\t\tvar maxDistribution = doc.terms[t].maxDistribution;\r\n\t\t\t\tif (maxDistribution > max.value) {\r\n\t\t\t\t\tmax = {term: t, value: maxDistribution};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\treturn max;\r\n\t},\r\n\t\r\n\tgetNewColor: function() {\r\n\t\tvar color = null;\r\n\t\tfor (var i = 0; i < this.colors.length; i++) {\r\n\t\t\tcolor = this.colors[i];\r\n\t\t\tvar match = this.typeStore.findExact('color', color);\r\n\t\t\tif (match == -1) break;\r\n\t\t\telse color = null;\r\n\t\t}\r\n\t\tif (color == null) color = [128, 128, 128];\r\n\t\treturn color;\r\n\t},\r\n\t\r\n\tremoveAllTerms: function() {\r\n\t\tthis.cache.each(function(doc) {\r\n\t\t\tdoc.terms = {};\r\n\t\t}, this);\r\n\t\tthis.currentTerms = {};\r\n\t\tthis.termsFilter = [];\r\n\t},\r\n\t\r\n\tremoveTerm: function(term) {\r\n//\t\tvar types = this.store.query('type', type);\r\n//\t\ttypes.each(function(type) {\r\n//\t\t\tthis.store.remove(type);\r\n//\t\t}, this);\r\n\t\t\r\n\t\tdelete this.currentTerms[term];\r\n\t\t\r\n//\t\tvar types = this.getApiParamValue('type');\r\n//\t\ttypes = types.remove(type);\r\n//\t\tthis.setApiParams({type: types});\r\n\t\t\r\n\t\tvar getNewMax = false;\r\n\t\tthis.cache.each(function(doc) {\r\n\t\t\tfor (var t in doc.terms) {\r\n\t\t\t\tif (t == term) {\r\n\t\t\t\t\tif (this.maxFreq.term == term) {\r\n\t\t\t\t\t\tthis.maxFreq = {term: null, value: 0};\r\n\t\t\t\t\t\tgetNewMax = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete doc.terms[t];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\t\r\n\t\tfor (var i in this.lastClickedBubbles) {\r\n\t\t\tvar lcTypes = this.lastClickedBubbles[i];\r\n\t\t\tfor (var lcType in lcTypes) {\r\n\t\t\t\tif (lcType == term) {\r\n\t\t\t\t\tdelete this.lastClickedBubbles[i][lcType];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (getNewMax) {\r\n\t\t\tthis.setMaxFreq();\r\n\t\t\tthis.calculateBubbleRadii();\r\n\t\t\tthis.drawGraph();\r\n\t\t}\r\n\t},\r\n\t\r\n\tclearCanvas: function() {\r\n\t\tthis.canvas.width = this.canvas.width;\r\n\t}\r\n};","function Knots(config) {\r\n\tthis.container = config.container;\r\n\tthis.externalClickHandler = config.clickHandler;\r\n\t\r\n\tthis.MAX_LINE_LENGTH = 0;\r\n\tthis.LINE_SIZE = 2.5;\r\n\t\r\n\tthis.progressiveDraw = true;\r\n\tthis.progDrawDone = false;\r\n\tthis.drawStep = 0;\r\n\t\r\n\tthis.mouseOver = false;\r\n\tthis.refreshInterval = 100;\r\n\tthis.forceRedraw = false;\r\n\tthis.lastDrawTime = new Date().getTime();\r\n\tthis.intervalId = null;\r\n\tthis.startAngle = 315;\r\n\tthis.angleIncrement = 15;\r\n\t\r\n\tthis.canvas = null;\r\n\tthis.ctx = null;\r\n\tthis.currentDoc = {\r\n\t\tterms: {},\r\n\t\tlineLength: undefined\r\n\t};\r\n\tthis.maxDocLength = 0;\r\n\t\r\n\tthis.offset = {x: 0, y: 0};\r\n\r\n\tthis.termsFilter = [];\r\n\t\r\n\tthis.initialized = false;\r\n\t\r\n\tthis.audio = config.audio;\r\n\tthis.audioCtx = null;\r\n}\r\n\r\n\r\nKnots.prototype = {\r\n\tconstructor: Knots,\r\n\t\r\n\tinitializeCanvas: function() {\r\n\t\tvar container = this.container;\r\n\t\tvar height = container.getHeight()-5;\r\n\t\tvar width = container.getWidth();\r\n\t\tthis.MAX_LINE_LENGTH = Math.sqrt((width * width) + (height * height));\r\n\t\t\r\n\t\tvar id = Ext.id('knots');\r\n\t\tcontainer.add({\r\n\t\t\txtype: 'container',\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\thtml: '<canvas id=\"'+id+'\" width=\"'+width+'\" height=\"'+height+'\"></canvas>',\r\n\t\t\tborder: false,\r\n        \tlisteners: {\r\n        \t\tafterrender: {\r\n        \t\t\tfn: function(cnt) {\r\n    \t\t\t\t\tthis.canvas = document.getElementById(id);\r\n        \t\t\t\tthis.ctx = this.canvas.getContext('2d');\r\n        \t\t\t\tthis.canvas.addEventListener('click', this.clickHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mousedown', this.mouseDownHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mouseup', this.mouseUpHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mousemove', this.moveHandler.bind(this), false);\r\n        \t\t\t},\r\n        \t\t\tsingle: true,\r\n        \t\t\tscope: this\r\n        \t\t}\r\n        \t}\r\n\t\t});\r\n\t\tcontainer.updateLayout();\r\n\t\tthis.initialized = true;\r\n\t},\r\n\t\r\n\tdoLayout: function() {\r\n\t\tif (this.initialized) {\r\n\t\t\tvar width = this.container.getWidth();\r\n\t\t\tvar height = this.container.getHeight()-5;\r\n\t\t\tthis.canvas.width = width;\r\n\t\t\tthis.canvas.height = height;\r\n\t\t\tthis.recache();\r\n\t\t\tthis.buildGraph();\r\n\t\t}\r\n\t},\r\n\t\r\n\tbuildGraph: function(drawStep) {\r\n\t\tif (this.intervalId != null) {\r\n\t\t\tthis.progDrawDone = false;\r\n\t\t\tclearInterval(this.intervalId);\r\n\t\t}\r\n\t\tthis.forceRedraw = true;\r\n\r\n\t\tthis.drawStep = drawStep || 0;\r\n\t\t\r\n\t\tfor (var t in this.currentDoc.terms) {\r\n\t\t\tvar term = this.currentDoc.terms[t];\r\n\t\t\tterm.done = false;\r\n\t\t}\r\n\t\t\r\n\t\tif (!this.progressiveDraw) {\r\n\t\t\tthis.doDraw(false);\r\n\t\t} else {\r\n\t\t\tthis.intervalId = setInterval(this.doDraw.createDelegate(this, [false]), 50);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawGraph: function(includeLegend) {\r\n\t\tif (this.intervalId != null) {\r\n\t\t\tthis.progDrawDone = false;\r\n\t\t\tclearInterval(this.intervalId);\r\n\t\t}\r\n\t\tthis.forceRedraw = true;\r\n\t\t\r\n\t\tif (!this.progressiveDraw) {\r\n\t\t\tthis.doDraw(false, includeLegend);\r\n\t\t} else {\r\n\t\t\tthis.intervalId = setInterval(this.doDraw.createDelegate(this, [includeLegend]), 50);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdoDraw: function(includeLegend) {\r\n\t\tvar time = new Date().getTime();\r\n\t\tif (this.forceRedraw || time - this.lastDrawTime >= this.refreshInterval) {\r\n\t\t\tthis.forceRedraw = false;\r\n\t\t\t\r\n\t\t\tthis.clearCanvas();\r\n\t\t\t\r\n\t\t\tthis.ctx.save();\r\n\t\t\tthis.ctx.translate(this.offset.x, this.offset.y);\r\n\t\t\t\r\n\t\t\tthis.drawDocument(this.currentDoc);\r\n\t\t\t\r\n\t\t\t// animate the origin\r\n\t//\t\tthis.originOpacity -= 0.01;\r\n\t//\t\tif (this.originOpacity < 0) {\r\n\t//\t\t\tthis.originOpacity = 1.0;\r\n\t//\t\t}\r\n\t\t\tthis.originOpacity = 0.5;\r\n\t\t\tthis.originColor = '128,128,128';\r\n\t\t\tthis.ctx.lineWidth = Math.abs(this.originOpacity - 1) * 15;\r\n\t\t\tthis.ctx.fillStyle = 'rgba('+this.originColor+',1.0)';\r\n\t\t\tthis.ctx.strokeStyle = 'rgba('+this.originColor+','+this.originOpacity+')';\r\n\t\t\tthis.ctx.beginPath();\r\n\t\t\tthis.ctx.arc(0, 0, this.LINE_SIZE*2, 0, Math.PI*2, true);\r\n\t\t\tthis.ctx.closePath();\r\n\t\t\tthis.ctx.fill();\r\n\t\t\t\r\n\t\t\tif (!includeLegend) this.ctx.stroke();\r\n\t\t\tthis.ctx.restore();\r\n\t\t\tthis.ctx.lineWidth = 1;\r\n\t\t\t\r\n\t\t\tif (includeLegend === true) {\r\n\t\t\t\tthis.drawLegend();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.lastDrawTime = new Date().getTime();\r\n\t\t\t\r\n\t\t\t// test to see if each doc term is done\r\n\t\t\tif (this.progressiveDraw) {\r\n\t\t\t\tvar done = true;\r\n\t\t\t\tfor (var t in this.currentDoc.terms) {\r\n\t\t\t\t\tdone = done && this.currentDoc.terms[t].done;\r\n\t\t\t\t}\r\n\t\t\t\tthis.progDrawDone = done;\r\n\t\t\t\tif (done) {\r\n\t\t\t\t\tclearInterval(this.intervalId);\r\n\t\t\t\t\tthis.intervalId = null;\r\n\t\t\t\t\tthis.muteTerms();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.drawStep++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tsetAudio: function(audio) {\r\n\t\tthis.audio = audio;\r\n\t\tif (!audio) {this.muteTerms();}\r\n\t},\r\n\t\r\n\tmuteTerms: function() {\r\n\t\tfor (t in this.currentDoc.terms) {\r\n\t\t\tif (this.currentDoc.terms[t].audio) {\r\n\t\t\t\tthis.currentDoc.terms[t].audio.gainNode.gain.value=0;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawDocument: function(doc) {\r\n\t\tvar terms = doc.terms;\r\n\t\t\r\n\t\tfor (var t in terms) {\r\n\t\t\tif (this.termsFilter.indexOf(t) != -1) {\r\n\t\t\t\tvar info = terms[t];\r\n\t\t\t\tif (info && info.pos) {\r\n\t\t\t\t\tvar prevXY = [[0,0],[0,0]];\r\n\t\t\t\t\tif (this.progressiveDraw) {\r\n\t\t\t\t\t\tvar length = this.drawStep + 1;\r\n\t\t\t\t\t\tif (info.pos.length <= this.drawStep) {\r\n\t\t\t\t\t\t\tinfo.done = true;\r\n\t\t\t\t\t\t\tlength = info.pos.length;\r\n\t\t\t\t\t\t\tif (info.audio) {info.audio.gainNode.gain.value=0};\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (this.audio && info.audio) {\r\n\t\t\t\t\t\t\t\tinfo.audio.gainNode.gain.value=.1;\r\n\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\tinfo.audio.gainNode.gain.value=0;\r\n\t\t\t\t\t\t\t\t}, this.refreshInterval*.75)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tinfo.done = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\t\t\t\t\tvar xy = info.pos[i];\r\n\t\t\t\t\t\t\tthis.drawPolygon(xy, prevXY, info.color);\r\n\t\t\t\t\t\t\tprevXY = [[xy.polygon[0][3], xy.polygon[1][3]], [xy.polygon[0][2], xy.polygon[1][2]]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (var i = 0; i < info.pos.length; i++) {\r\n\t\t\t\t\t\t\tvar xy = info.pos[i];\r\n\t\t\t\t\t\t\tthis.drawPolygon(xy, prevXY, info.color);\r\n\t\t\t\t\t\t\tprevXY = [[xy.polygon[0][3], xy.polygon[1][3]], [xy.polygon[0][2], xy.polygon[1][2]]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawPolygon: function(xy, prevXY, color) {\r\n\t\tvar polyX = xy.polygon[0];\r\n\t\tvar polyY = xy.polygon[1];\r\n\t\t\r\n\t\t// connect to previous polygon to make smoother turns\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.moveTo(prevXY[0][0], prevXY[0][1]);\r\n\t\tthis.ctx.lineTo(polyX[0], polyY[0]);\r\n\t\tthis.ctx.lineTo(polyX[1], polyY[1]);\r\n\t\tthis.ctx.lineTo(prevXY[1][0], prevXY[1][1]);\r\n\t\tthis.ctx.closePath();\r\n\t\t\r\n\t\tthis.ctx.fillStyle = 'rgba('+color+', 0.6)';\r\n\t\tthis.ctx.fill();\r\n\r\n\t\t// draw the current polygon\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.moveTo(polyX[0], polyY[0]);\r\n\t\tthis.ctx.lineTo(polyX[1], polyY[1]);\r\n\t\tthis.ctx.lineTo(polyX[2], polyY[2]);\r\n\t\tthis.ctx.lineTo(polyX[3], polyY[3]);\r\n\t\tthis.ctx.closePath();\r\n\r\n\t\tif (xy.over) this.ctx.fillStyle = 'rgba('+color+', 1.0)';\r\n\t\tthis.ctx.fill();\r\n\t},\r\n\t\r\n\tdrawLegend: function() {\r\n\t\tvar x = 5;\r\n\t\tvar y = 5;\r\n\t\tthis.ctx.textBaseline = 'top';\r\n\t\tthis.ctx.font = '16px serif';\r\n\t\tthis.termStore.each(function(record) {\r\n\t\t\tvar color = record.get('color');\r\n\t\t\tthis.ctx.fillStyle = 'rgb('+color+')';\r\n\t\t\tvar term = record.get('term');\r\n\t\t\tthis.ctx.fillText(term, x, y);\r\n\t\t\tvar width = this.ctx.measureText(term).width;\r\n\t\t\tx += width + 8;\r\n\t\t}, this);\r\n\t},\r\n\t\r\n\tsetCurrentDoc: function(doc) {\r\n\t\tthis.currentDoc = doc;\r\n\t\tthis.cacheCurrentDocument();\r\n\t},\r\n\t\r\n\taddTerms: function(termsObj) {\r\n\t\tExt.apply(this.currentDoc.terms, termsObj);\r\n\t\tthis.recache();\r\n\t},\r\n\t\r\n\tremoveTerm: function(term) {\r\n\t\tif (this.currentDoc.terms[term].audio) {this.currentDoc.terms[term].audio.oscillator.stop();}\r\n\t\tdelete this.currentDoc.terms[term];\r\n\t\tthis.recache();\r\n\t},\r\n\t\r\n\tremoveAllTerms: function() {\r\n\t\tfor (term in this.currentDoc.terms) {\r\n\t\t\tif (this.currentDoc.terms[term].audio) {\r\n\t\t\t\tthis.currentDoc.terms[term].audio.oscillator.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.currentDoc.terms = {};\r\n\t\tthis.recache();\r\n\t},\r\n\t\r\n\trecache: function() {\r\n\t\tthis.MAX_LINE_LENGTH = Math.sqrt((this.canvas.width * this.canvas.width) + (this.canvas.height * this.canvas.height));\r\n\t\tthis.cacheCurrentDocument();\r\n\t\tthis.determineGraphSizeAndPosition();\r\n\t},\r\n\t\r\n\tcacheCurrentDocument: function() {\r\n\t\tvar lineLength = this.MAX_LINE_LENGTH;\r\n\t\t\r\n\t\tthis.currentDoc.lineLength = lineLength;\r\n\t\t\r\n\t\tif (this.audio && this.audioCtx == null) {\r\n\t\t\ttry {\r\n\t\t\t\tthis.audioCtx = new (window.AudioContext || window.webkitAudioContext)();\r\n\t\t\t} catch(e) {\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor (var term in this.currentDoc.terms) {\r\n\t\t\tif (this.audio && this.audioCtx && !this.currentDoc.terms[term].audio) {\r\n\t\t\t\tvar oscillator = this.audioCtx.createOscillator();\r\n\t\t\t\tvar gainNode = this.audioCtx.createGain();\r\n\t\t\t\toscillator.connect(gainNode);\r\n\t\t\t\tgainNode.connect(this.audioCtx.destination);\r\n\t\t\t\toscillator.frequency.value = (Math.random()*500)+150; // value in hertz\r\n\t\t\t\toscillator.start();\r\n\t\t\t\tgainNode.gain.value = 0;\r\n\t\t\t\tthis.currentDoc.terms[term].audio = {oscillator: oscillator, gainNode: gainNode}\r\n\t\t\t} \r\n\t\t\tthis.cacheTurns(this.currentDoc.terms[term], lineLength);\r\n\t\t}\r\n\t},\r\n\t\r\n\tcacheTurns: function(info, lineLength) {\r\n\t\tvar rawFreq = info.rawFreq;\r\n\t\tif (rawFreq > 0) {\r\n\t\t\tvar doc = this.currentDoc;\r\n\t\t\t\r\n\t\t\tvar term = info.term;\r\n\t\t\tvar color = info.color;\r\n\r\n\t\t\tvar cachedPositions = [];\r\n\t\t\t\r\n\t\t\tvar tokenIds = info.positions;\r\n\t\t\tvar lastTokenId = tokenIds[tokenIds.length-1];\r\n\t\t\t\r\n\t\t\tvar angle = this.startAngle;\r\n\t\t\tvar angleIncrement = this.angleIncrement;\r\n\t\t\tvar prevX = 0;\r\n\t\t\tvar prevY = 0;\r\n\t\t\tvar x = 0;\r\n\t\t\tvar y = 0;\r\n\t\t\tvar prevLength = 0;\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < tokenIds.length; i++) {\r\n\t\t\t\tvar o = tokenIds[i];\r\n\t\t\t\t\r\n\t\t\t\tvar length = o / lastTokenId * lineLength;\r\n\t\t\t\tvar segment = length - prevLength;\r\n\t\t\t\t\r\n\t\t\t\tprevX = x;\r\n\t\t\t\tprevY = y;\r\n\t\t\t\t\r\n\t\t\t\tvar newPoint = this.findEndPoint([x, y], segment, angle);\r\n\t\t\t\tx = newPoint[0];\r\n\t\t\t\ty = newPoint[1];\r\n\t\t\t\t\r\n\t\t\t\tvar polygon = this.getPolygonFromLine([prevX, prevY], [x, y], angle, this.LINE_SIZE);\r\n\t\t\t\t\r\n\t\t\t\tcachedPositions.push({tokenId: o, polygon: polygon, over: false});\r\n\t\t\t\t\r\n\t\t\t\tprevLength = length;\r\n\t\t\t\tangle += angleIncrement;\r\n\t\t\t}\r\n\t\t\t\r\n//\t\t\tdoc.terms[term] = {pos: cachedPositions, rawFreq: rawFreq, color: color, done: false};\r\n\t\t\tdoc.terms[term].pos = cachedPositions;\r\n\t\t\tdoc.terms[term].done = false;\r\n\t\t}\r\n\t},\r\n\t\r\n\tfindEndPoint: function(point, length, angle) {\r\n\t\tvar radians = this.degreesToRadians(angle);\r\n\t\tvar x2 = point[0] + (length * Math.cos(radians));\r\n\t\tvar y2 = point[1] + (length * Math.sin(radians));\r\n\t\treturn [x2, y2];\r\n\t},\r\n\t\r\n\tdetermineGraphSizeAndPosition: function() {\t\t\r\n\t\tvar bb = this.findBoundingBoxForGraph();\r\n\r\n\t\t// find the size ratio between the graph and the canvas\r\n\t\tvar width = bb.maxX - bb.minX;\r\n\t\tvar height = bb.maxY - bb.minY;\r\n\t\tvar widthRatio = this.canvas.width / width;\r\n\t\tvar heightRatio = this.canvas.height / height;\r\n\t\tvar ratio = Math.min(widthRatio, heightRatio);\r\n\t\tratio -= 0.05; // create some space around the borders\r\n\t\t\r\n\t\twidth *= ratio;\r\n\t\theight *= ratio;\r\n\t\t\r\n\t\tthis.offset.x = Math.abs(bb.minX * ratio - (this.canvas.width / 2 - width / 2));\r\n\t\tthis.offset.y = Math.abs(bb.minY * ratio - (this.canvas.height / 2 - height / 2));\r\n\t\t\r\n\t\tthis.MAX_LINE_LENGTH = Math.sqrt((this.canvas.width * this.canvas.width) + (this.canvas.height * this.canvas.height)) * ratio;\r\n\t\t\r\n\t\tthis.cacheCurrentDocument();\r\n\t},\r\n\t\r\n\tfindBoundingBoxForGraph: function() {\r\n\t\tvar minX = null;\r\n\t\tvar maxX = null;\r\n\t\tvar minY = null;\r\n\t\tvar maxY = null;\r\n\t\tfor (var t in this.currentDoc.terms) {\r\n\t\t\tvar pos = this.currentDoc.terms[t].pos;\r\n\t\t\tfor (var i = 0; i < pos.length; i++) {\r\n\t\t\t\tvar polygon = pos[i].polygon;\r\n\t\t\t\tvar bb = this.getBoundingBox(polygon[0], polygon[1]);\r\n\t\t\t\tif (minX == null || bb[0] < minX) minX = bb[0];\r\n\t\t\t\tif (maxX == null || bb[2] > maxX) maxX = bb[2];\r\n\t\t\t\tif (minY == null || bb[1] < minY) minY = bb[1];\r\n\t\t\t\tif (maxY == null || bb[3] > maxY) maxY = bb[3];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn {minX: minX, minY: minY, maxX: maxX, maxY: maxY};\r\n\t},\r\n\t\r\n\tgetBoundingBox: function(polyX, polyY) {\r\n\t\tvar minX = Math.min(polyX[0], polyX[2]);\r\n\t\tvar maxX = Math.max(polyX[0], polyX[2])\r\n\t\tvar minY = Math.min(polyY[0], polyY[2]);\r\n\t\tvar maxY = Math.max(polyY[0], polyY[2]);\r\n\t\treturn [minX, minY, maxX, maxY];\r\n\t},\r\n\t\r\n\tdegreesToRadians: function(d) {\r\n\t\treturn d * (Math.PI / 180);\r\n\t},\r\n\t\r\n\tclickHandler: function(event) {\r\n\t\tvar x = event.layerX - this.offset.x;\r\n\t\tvar y = event.layerY - this.offset.y;\r\n\t\tvar hit = null;\r\n\t\tvar tokenId = 0;\r\n\t\tfor (var t in this.currentDoc.terms) {\r\n\t\t\tif (this.termsFilter.indexOf(t) != -1) {\r\n\t\t\t\tvar pos = this.currentDoc.terms[t].pos;\r\n\t\t\t\tfor (var i = 0; i < pos.length; i++) {\r\n\t\t\t\t\tvar polygon = pos[i].polygon;\r\n\t\t\t\t\tvar test = this.isPointInPolygon(polygon[0], polygon[1], x, y);\r\n\t\t\t\t\tif (test) {\r\n\t\t\t\t\t\thit = t;\r\n\t\t\t\t\t\ttokenId = pos[i].tokenId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (hit) {\r\n\t\t\tif (this.externalClickHandler !== undefined) {\r\n\t\t\t\tthis.externalClickHandler({term: hit, tokenId: tokenId});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tmoveHandler: function(event) {\r\n\t\tvar x = event.layerX - this.offset.x;\r\n\t\tvar y = event.layerY - this.offset.y;\r\n\t\tif (this.dragInfo != null) {\r\n\t\t\tdocument.body.style.cursor = 'move';\r\n\t\t\tthis.dragInfo.lastX = this.dragInfo.x;\r\n\t\t\tthis.dragInfo.lastY = this.dragInfo.y;\r\n\t\t\tthis.dragInfo.x = event.layerX;\r\n\t\t\tthis.dragInfo.y = event.layerY;\r\n\t\t\tvar xDiff = this.dragInfo.x - this.dragInfo.lastX;\r\n\t\t\tvar yDiff = this.dragInfo.y - this.dragInfo.lastY;\r\n\t\t\tthis.offset.x += xDiff;\r\n\t\t\tthis.offset.y += yDiff;\r\n\t\t} else {\r\n\t\t\tthis.mouseOver = false;\r\n\t\t\tfor (var t in this.currentDoc.terms) {\r\n\t\t\t\tif (this.termsFilter.indexOf(t) != -1) {\r\n\t\t\t\t\tvar pos = this.currentDoc.terms[t].pos;\r\n\t\t\t\t\tfor (var i = 0; i < pos.length; i++) {\r\n\t\t\t\t\t\tif (!this.mouseOver) {\r\n\t\t\t\t\t\t\tvar polygon = pos[i].polygon;\r\n\t\t\t\t\t\t\tvar test = this.isPointInPolygon(polygon[0], polygon[1], x, y);\r\n\t\t\t\t\t\t\tif (test) {\r\n\t\t\t\t\t\t\t\tthis.currentDoc.terms[t].pos[i].over = true;\r\n\t\t\t\t\t\t\t\tthis.mouseOver = true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.currentDoc.terms[t].pos[i].over = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.currentDoc.terms[t].pos[i].over = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.mouseOver) {\r\n\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t\tif (!this.progressiveDraw || (this.progressiveDraw && this.progDrawDone)) {\r\n\t\t\t\t\tclearInterval(this.intervalId);\r\n\t\t\t\t\tthis.intervalId = setInterval(this.doDraw.createDelegate(this, [false]), 50);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdocument.body.style.cursor = 'auto';\r\n\t\t\t\tif (!this.progressiveDraw || (this.progressiveDraw && this.progDrawDone)) {\r\n\t\t\t\t\tclearInterval(this.intervalId);\r\n\t\t\t\t\tthis.doDraw(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tmouseDownHandler: function(event) {\r\n\t\tvar x = event.layerX;\r\n\t\tvar y = event.layerY;\r\n\t\tthis.dragInfo = {\r\n\t\t\tlastX: x,\r\n\t\t\tlastY: y,\r\n\t\t\tx: x,\r\n\t\t\ty: y\r\n\t\t};\r\n\t},\r\n\t\r\n\tmouseUpHandler: function(event) {\r\n\t\tthis.dragInfo = null;\r\n\t},\r\n\t\r\n\tgetPolygonFromLine: function(point1, point2, angle, size) {\r\n\t\tvar perpDown = angle + 90;\r\n\t\tvar perpUp = angle - 90;\r\n\t\t\r\n\t\tvar p1 = this.findEndPoint(point1, size, perpDown);\r\n\t\tvar p2 = this.findEndPoint(point1, size, perpUp);\r\n\t\tvar p3 = this.findEndPoint(point2, size, perpUp);\r\n\t\tvar p4 = this.findEndPoint(point2, size, perpDown);\r\n\t\t\r\n\t\tvar polyX = [p1[0], p2[0], p3[0], p4[0]];\r\n\t\tvar polyY = [p1[1], p2[1], p3[1], p4[1]];\r\n\t\treturn [polyX, polyY];\r\n\t},\r\n\t\r\n\t// from http://alienryderflex.com/polygon/\r\n\tisPointInPolygon: function(polyX, polyY, x, y) {\r\n\t\tvar i = 0;\r\n\t\tvar j = 3; // number of polygon sides minus 1\r\n\t\tvar oddNodes = false;\r\n\t\tfor (i = 0; i < 4; i++) {\r\n\t\t\tif ((polyY[i] < y && polyY[j] >= y) ||\r\n\t\t\t\t(polyY[j] < y && polyY[i] >= y)) {\r\n\t\t\t\tif (polyX[i] + (y - polyY[i]) / (polyY[j] - polyY[i]) * (polyX[j] - polyX[i]) < x) {\r\n\t\t\t\t\toddNodes = !oddNodes;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tj = i;\r\n\t\t}\r\n\t\treturn oddNodes;\r\n\t},\r\n\t\r\n\tclearCanvas: function() {\r\n\t\tthis.canvas.width = this.canvas.width;\r\n\t}\r\n};","/*\r\n * Author: Andrew MacDonald\r\n * Licensed for use under the GNU General Public License\r\n * http://creativecommons.org/licenses/GPL/2.0/\r\n */\r\n\r\nfunction Cirrus(config) {\r\n    var that = this;\r\n    this.config = config;\r\n    var canvasId = Ext.id(null, 'cirrusCanvas');\r\n    if (this.config.containerId == null) {\r\n        alert('You must provide a valid container ID!');\r\n        return;\r\n    }\r\n    var containerId = '#'+this.config.containerId;\r\n    var wordController = null;\r\n    var resizeTimer = null;\r\n    \r\n    this.clear = function() {\r\n        this.canvas.width = this.canvas.width;\r\n    };\r\n    \r\n    this.addWords = function(words) {\r\n        wordController.addWords(words);\r\n    };\r\n    \r\n    this.arrangeWords = function() {\r\n        wordController.arrangeWords();\r\n    };\r\n\r\n    this.clearAll = function() {\r\n        wordController.setWords([]);\r\n        wordController.grid = [];\r\n        this.clear();\r\n    };\r\n\r\n    this.resizeWords = function() {\r\n        that.setCanvasDimensions();\r\n        wordController.resetWordCoordinates();\r\n        wordController.calculateSizeAdjustment();\r\n        wordController.resizeWords();\r\n        wordController.arrangeWords();\r\n        resizeTimer = null;\r\n    };\r\n\r\n    this.setCanvasDimensions = function() {\r\n        var container = $(containerId)[0];\r\n        var width = Math.max(container.offsetWidth, container.clientWidth);\r\n        var height = Math.max(container.offsetHeight, container.clientHeight);\r\n        this.canvas.width = width;\r\n        this.canvas.height = height;\r\n    };\r\n\r\n    function hex2RGB(hex) {\r\n        hex = hex.charAt(0) == '#' ? hex.substring(1,7) : hex;\r\n        var rgb = [];\r\n        rgb.push(parseInt(hex.substring(0, 2), 16));\r\n        rgb.push(parseInt(hex.substring(2, 4), 16));\r\n        rgb.push(parseInt(hex.substring(4, 6), 16));\r\n        return rgb;\r\n    }\r\n    \r\n    function init() {\r\n        \r\n        if ($('#'+that.config.containerId).length == 0) {\r\n            alert('You must provide a valid container ID!');\r\n            return;\r\n        }\r\n        \r\n        // create the canvas\r\n        that.canvas = document.createElement('canvas');\r\n        that.canvas.setAttribute('id', canvasId);\r\n        that.canvas.setAttribute('tabIndex', 1);\r\n        that.setCanvasDimensions();\r\n        $(containerId).append(that.canvas);\r\n        canvasId = '#'+canvasId;\r\n        \r\n        that.context = that.canvas.getContext('2d');\r\n        var isLocal = false; // should we call the server for words or use local ones?\r\n        that.wordData = new Array(); // the word data to input into the app\r\n        that.useFadeEffect = true; // should we use a fade effect for displaying words?\r\n        that.colors = [[116,116,181], [139,163,83], [189,157,60], [171,75,75], [174,61,155]];\r\n        wordController = new WordController(that);\r\n        \r\n        for (var key in that.config) {\r\n            if (key == 'words') that.wordData = that.config[key];\r\n            if (key == 'layout') {\r\n                if (that.config[key] == 'circle') wordController.layout = wordController.CIRCLE;\r\n                else if (that.config[key] == 'square') wordController.layout = wordController.SQUARE;\r\n            }\r\n            if (key == 'colors') {\r\n                // expects an array of hex colors\r\n                if ($.isArray(that.config[key]) && that.config[key].length > 0) {\r\n                    that.colors = [];\r\n                    for (var c in that.config[key]) {\r\n                        that.colors.push(hex2RGB(that.config[key][c]));\r\n                    }\r\n                }\r\n            }\r\n            if (key == 'background') {\r\n                $(canvasId).css(\"background-color\", that.config[key]);\r\n            }\r\n            if (key == 'fade') {\r\n                if (that.config[key] == 'true') that.useFadeEffect = true;\r\n                else if (that.config[key] == 'false') that.useFadeEffect = false;\r\n            }\r\n            if (key == 'smoothness') {\r\n                wordController.wordsToArrange = Math.max(1, Math.min(20, parseInt(that.config[key]))); // set to value between 1-20\r\n            }\r\n        }\r\n        \r\n        if (isLocal && testData) {\r\n            var cnt = 0;\r\n            for (var key in testData) {\r\n                that.wordData.push({word: key, size: testData[key] / 13, label: key});\r\n                cnt++;\r\n                if (cnt == 100) break;\r\n            }\r\n        }\r\n        \r\n        if (that.wordData.length > 0) {\r\n            that.clear();\r\n            wordController.addWords(that.wordData);\r\n            wordController.arrangeWords();\r\n        }\r\n        \r\n        $(window).resize(function() {\r\n            if (resizeTimer != null) clearTimeout(resizeTimer);\r\n            resizeTimer = setTimeout(that.resizeWords, 1000);\r\n        });\r\n\r\n        $(canvasId).keypress(function(event) {\r\n            if (event.which == 114) wordController.arrangeWords(); // r was pressed\r\n        });\r\n        \r\n        $(canvasId).click(function(event) {\r\n            var matchingWord = wordController.handleWordClick(event);\r\n            if (matchingWord !== undefined) {\r\n\t            if (that.config.clickHandler) {\r\n\t            \tthat.config.clickHandler({term: matchingWord.text, value: matchingWord.value});\r\n\t            }\r\n            }\r\n        });\r\n        \r\n        $(canvasId).mouseover(function(event) {\r\n        \twordController.startUpdates();\r\n        });\r\n        $(canvasId).mouseout(function(event) {\r\n        \twordController.stopUpdates();\r\n        });\r\n        \r\n        $(canvasId).mousemove(function(event) {\r\n            wordController.handleMouseMove(event);\r\n        });\r\n    }\r\n    \r\n    $(document).ready(init);\r\n}","\r\n/**\r\n * The word object.  Stores various properties related to diplaying the word.\r\n * @author Andrew\r\n */\r\nfunction Word(_text, _origSize, _color, _rolloverText, _value) {\r\n    this.height = 0;\t\t\t\t\t// the height of the label\r\n    this.width = 0;\t\t\t\t\t\t// the width of the label\r\n    this.rotation = 0; \t\t\t\t\t// rotation of the label, in radians\r\n    this.relativeSize = 0;\t\t\t\t// the size relative to the largest and smallest word sizes\r\n    this.mask = null;\t\t\t\t\t// a 2 dimensional array containing the local xy co-ordinates of opaque pixels\r\n    this.size = 0;\t\t\t\t\t\t// the largest of either the height or width, used in the circle layout\r\n    \r\n    /* Init */\r\n    this.text = _text;\t\t\t\t\t// the actual word\r\n    this.color = _color;\t\t\t\t// the color of the label\r\n    this.origSize = _origSize;\t\t\t// the original size (used when re-calculating relative sizes of words)\r\n    this.rolloverText = _rolloverText;\t// the text to show on rollover\r\n    this.value = _value || 0;\t\t\t// a value associated with the word (can be anything)\r\n    this.x = 0;\t\t\t\t\t\t\t// the x co-ordinate\r\n    this.y = 0;\t\t\t\t\t\t\t// the y co-ordinate\r\n    this.tx = 0;\t\t\t\t\t\t// the translation value for x\r\n    this.ty = 0;\t\t\t\t\t\t// the translation value for y\r\n    this.fontFamily = 'Arial';\t\t\t// the font family\r\n    this.fontSize = 12;\t\t\t\t\t// the font family\r\n    this.alpha = 1;\t\t\t\t\t\t// alpha of the label\r\n    this.live = false;\t\t\t\t\t// true if the word should be displayed\r\n    this.isOver = false;\t\t\t\t// true if the mouse if over the word\r\n    \r\n    this.draw = function(ctx) {\r\n        ctx.save();\r\n        ctx.fillStyle = 'rgba('+this.color[0]+','+this.color[1]+','+this.color[2]+','+this.alpha+')';\r\n        ctx.textBaseline = 'alphabetic';\r\n        ctx.font = this.fontSize + 'px '+ this.fontFamily;\r\n        ctx.translate(this.x + this.tx, this.y + this.ty);\r\n        ctx.rotate(this.rotation);\r\n        ctx.fillText(this.text, 0, 0);\r\n        ctx.restore();\r\n    };\r\n}","\r\nfunction WordController(parentApp) {\r\n    var that = this;\r\n    \r\n    var app = parentApp;\r\n    \r\n    var myFont = 'Impact';\r\n    \r\n    this.CIRCLE = 0; // circle layout\r\n    \r\n    this.ratio = 1; // the width to height ratio\r\n    \r\n    var _layout = this.CIRCLE; // what layout to use\r\n    this.getLayout = function() {\r\n        return _layout;\r\n    };\r\n    this.setLayout = function(value) {\r\n        _layout = value;\r\n    };\r\n    \r\n    this.HORIZONTAL = 0;\r\n    this.MIXED = 1; // horizontal and vertical\r\n    \r\n    var _wordOrientation = this.MIXED;\r\n    this.getWordOrientation = function() {\r\n        return _wordOrientation;\r\n    };\r\n    this.setWordOrientation = function(value) {\r\n    \t_wordOrientation = value;\r\n    };\r\n    \r\n    this.UPDATE_RATE = 25; // update frequency in milliseconds\r\n    this.COARSENESS = 5; // how many pixels do we skip when creating the mask?\r\n//    if ($.browser.webkit) this.COARSENESS = 3; \r\n    this.grid = new Array(); // a multidimensional array ([x][y]), holding co-ords for words\r\n    var timer_i = 0;\r\n    var timer; // timer used to incrementally call the arrange method\r\n    this.doingArrange = false;\r\n    this.wordsToArrange = 5; // how many words to arrange for each call to the arrange method\r\n    var overWord = null; // what word is the user mousing over?\r\n    var overX = 0; // position of the mouse when over a word\r\n    var overY = 0;\r\n    \r\n    var _words = new Array(); // the list of word objects\r\n    this.getWords = function() {\r\n        return _words;\r\n    }\r\n    this.setWords = function(value) {\r\n        _words = value;\r\n    }\r\n    \r\n    this.sizeAdjustment = 100; // amount to multiply a word's relative size by\r\n    \r\n    this.minFontSize = 12;\r\n    \r\n    // for tracking sizes in word data\r\n    this.largestWordSize = 0;\r\n    this.smallestWordSize = 10000;\r\n    \r\n    var _uniqueWords = new Object(); // stores words as properties, making sure we don't have duplicates\r\n    \r\n    /**\r\n     * Creates a word object and adds it to the list.\r\n     * If the size value is outside the current max/min value, returns true (meaning we have to resize all the words).\r\n     * @param\tword\r\n     * @param\tsize\r\n     * @param\tcolor\r\n     * @param\tlabel\r\n     * @param\tvalue\r\n     * @return\r\n     */\r\n    function addWord(word, size, color, label, value) {\r\n        var sizeChanged = false;\r\n        if (_uniqueWords[word] == null) {\r\n            _uniqueWords[word] = true;\r\n            \r\n            if (size > that.largestWordSize) {\r\n                that.largestWordSize = size;\r\n                sizeChanged = true;\r\n            }\r\n            if (size < that.smallestWordSize) {\r\n                that.smallestWordSize = size * 0.8; // set the smallest size a bit smaller than the actual smallest size; this will insure all words are legible.\r\n                sizeChanged = true;\r\n            }\r\n            var wordObj = new Word(word, size, color, label, value);\r\n            _words.push(wordObj);\r\n        }\r\n        return sizeChanged;\r\n    }\r\n    \r\n    /**\r\n     * Adds an array of objects with the following properties: word, size, color, label, value.\r\n     * @param\twords\r\n     */\r\n    this.addWords = function(newWords) {\r\n        var sizeChanged = false;\r\n        for (var i = 0; i < newWords.length; i++) {\r\n            var wordObj = newWords[i];\r\n            \r\n            var color;\r\n            if (typeof(wordObj.color) == undefined || wordObj.color == null || wordObj.color == '') {\r\n                color = app.colors[Math.floor(Math.random() * (app.colors.length))];\r\n            } else color = wordObj.color;\r\n            \r\n            var size;\r\n            if (typeof(wordObj.size) == undefined || wordObj.size == null || wordObj.size == '') {\r\n                size = Math.floor(Math.random() * 40);\r\n            } else size = parseFloat(wordObj.size);\r\n            \r\n            sizeChanged = addWord(wordObj.word, size, color, wordObj.label, wordObj.value) || sizeChanged;\r\n        }\r\n        sortWords();\r\n        \r\n        this.setRelativeSizes();\r\n        this.calculateSizeAdjustment();\r\n        if (sizeChanged) this.resizeWords();\r\n        else createAllGraphics();\r\n    }\r\n    \r\n    this.resetWordCoordinates = function() {\r\n        app.clear();\r\n        clearTimeout(timer);\r\n        for (var i = 0; i < _words.length; i++) {\r\n            var word = _words[i];\r\n            word.x = 0;\r\n            word.y = 0;\r\n            word.tx = 0;\r\n            word.ty = 0;\r\n        }\r\n    }\r\n    \r\n    this.calculateSizeAdjustment = function() {\r\n    \tthis.ratio = app.canvas.width / app.canvas.height;\r\n        var stageArea = app.canvas.width * app.canvas.height;\r\n        if (stageArea < 100000) this.minFontSize = 8;\r\n        else this.minFontSize = 12;\r\n        var pixelsPerWord = stageArea / _words.length;\r\n        var totalWordsSize = 0;\r\n        for (var i = 0; i < _words.length; i++) {\r\n            var word = _words[i];\r\n            var wordArea = calculateWordArea(word);\r\n            totalWordsSize += wordArea;\r\n        }\r\n        this.sizeAdjustment = stageArea / totalWordsSize;\r\n    }\r\n    \r\n    function calculateWordArea(word) {\r\n        var baseSize = Math.log(word.relativeSize * 10) * Math.LOG10E; // take the relativeSize (0.1 to 1.0), multiply by 10, then get the base-10 log of it\r\n        var height = (baseSize + word.relativeSize) / 2; // find the average between relativeSize and the log\r\n        var width = 0; //(baseSize / 1.5) * word.text.length;\r\n        for (var i = 0; i < word.text.length; i++ ) {\r\n            var letter = word.text.charAt(i);\r\n            if (letter == 'f' || letter == 'i' || letter == 'j' || letter == 'l' || letter == 'r' || letter == 't') width += baseSize / 3;\r\n            else if (letter == 'm' || letter == 'w') width += baseSize / (4 / 3);\r\n            else width += baseSize / 1.9;\r\n        }\r\n        var wordArea = height * width;\r\n        return wordArea;\r\n    }\r\n    \r\n    // based on post from http://stackoverflow.com/questions/1134586/how-can-you-find-the-height-of-text-on-an-html-canvas\r\n    // not really working yet\r\n    function measureTextHeight(label) {\r\n        app.context.fillStyle = 'rgb(255,255,255)';\r\n        app.context.fillRect(label.x, label.y, label.width, label.height);\r\n        label.draw(app.context);\r\n        var imageData = app.context.getImageData(label.x, label.y, label.width, label.height);\r\n        var first = false;\r\n        var last = false;\r\n        var y = label.height;\r\n        var x = 0;\r\n        while (!last && y) {\r\n            y--;\r\n            for (x = 0; x < label.width; x++) {\r\n                var pixel = getPixel(x, y, imageData);\r\n                if (pixel[0] != 255 || pixel[1] != 255 || pixel[2] != 255) {\r\n                    last = y;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        while (y) {\r\n            y--;\r\n            for (x = 0; x < label.width; x++) {\r\n                var pixel = getPixel(x, y, imageData);\r\n                if (pixel[0] != 255 || pixel[1] != 255 || pixel[2] != 255) {\r\n                    first = y;\r\n                    break;\r\n                }\r\n            }\r\n            if (first != y) {\r\n                return last - first;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n    \r\n    function measureDimensions(word) {\r\n        app.context.save();\r\n        app.context.textBaseline = 'alphabetic';\r\n        app.context.font = word.fontSize + 'px '+ word.fontFamily;\r\n        word.width = app.context.measureText(word.text).width;\r\n        word.height = Math.ceil(app.context.measureText('m').width * 1.15); // initial estimate (make it bigger for when we actually measure the height)\r\n        app.context.restore();\r\n    }\r\n    \r\n    // returns an array [r, g, b, a]\r\n    function getPixel(x, y, imageData) {\r\n        var index = (x + y * imageData.width) * 4;\r\n        return [imageData.data[index], imageData.data[index+1], imageData.data[index+2], imageData.data[index+3]];\r\n    }\r\n    \r\n    function setPixel(imageData, x, y, r, g, b, a) {\r\n        var index = (x + y * imageData.width) * 4;\r\n        imageData.data[index] = r;\r\n        imageData.data[index+1] = g;\r\n        imageData.data[index+2] = b;\r\n        imageData.data[index+3] = a;\r\n    }\r\n    \r\n    function findNewRelativeSize(word, areaMultiplier) {\r\n        var area = calculateWordArea(word) * areaMultiplier;\r\n        // given the area = (x+6)*(2*x/3*y), solve for x\r\n        var newRelativeSize = (Math.sqrt(6) * Math.sqrt(6 * Math.pow(word.text.length, 2) + area * word.text.length) - 6 * word.text.length) / (2 * word.text.length);\r\n        return newRelativeSize;\r\n    }\r\n    \r\n    /**\r\n     * Determines the relative size for each word.\r\n     * Call after all/new words are added and before createAllGraphics.\r\n     */\r\n    this.setRelativeSizes = function() {\r\n    \tfor (var i = 0; i < _words.length; i++) {\r\n            var word = _words[i];\r\n            word.relativeSize = mapValue(word.origSize, this.smallestWordSize, this.largestWordSize, 0.1, 1);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Re-adds words using new adjusted sizes.\r\n     * Run after the largestWordSize and/or smallestWordSize have changed.\r\n     * Need to run manually, since it's intensive.\r\n     */\r\n    this.resizeWords = function() {\r\n        app.clear();\r\n        createAllGraphics();\r\n        sortWords();\r\n    }\r\n    \r\n    /**\r\n     * Sort the word list by size, largest first.\r\n     */\r\n    function sortWords() {\r\n        _words.sort(function(a, b) {\r\n            if (a.origSize > b.origSize) return -1;\r\n            else if (a.origSize < b.origSize) return 1;\r\n            else return 0;\r\n        });\r\n    }\r\n    \r\n    /**\r\n     * Creates the Label that gets displayed on the stage.\r\n     * Randomly selects an angle from possible values.\r\n     * Calculates the mask of the word (used in hit detection).\r\n     * @param\twordObj\r\n     */\r\n\r\n    function createWordGraphics(wordObj) {\r\n        var adjustedSize = findNewRelativeSize(wordObj, that.sizeAdjustment);\r\n        wordObj.fontSize = adjustedSize > that.minFontSize ? adjustedSize : that.minFontSize;\r\n        wordObj.fontFamily = myFont;\r\n        \r\n        measureDimensions(wordObj);\r\n        // these values are needed for accurate x and y co-ordinates after rotating the word\r\n        wordObj.tx = 0;\r\n        wordObj.ty = wordObj.height;\r\n        //~ var trueHeight = measureTextHeight(wordObj);\r\n        //~ console.log(wordObj.height, trueHeight);\r\n        //~ wordObj.height = trueHeight;\r\n        \r\n        var angle = 0;\r\n        \r\n        if (that.getWordOrientation() === that.MIXED) {\r\n\t        if (wordObj.text.match(/\\s/) == null) {\r\n\t\t\t\tif (Math.random() > 0.66) {\r\n\t\t\t\t\tvar tempHeight = wordObj.height;\r\n\t\t\t\t\tvar tempWidth = wordObj.width;\r\n\t\t\t\t\twordObj.height = tempWidth;\r\n\t\t\t\t\twordObj.width = tempHeight;\r\n\t\t\t\t\tif (Math.round(Math.random()) == 0) {\r\n\t\t\t\t\t\tangle = 90;\r\n\t\t\t\t\t\twordObj.ty = 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tangle = -90;\r\n\t\t\t\t\t\twordObj.ty = wordObj.height;\r\n\t\t\t\t\t\twordObj.tx = wordObj.width;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n        }\r\n        \r\n        \r\n\r\n        wordObj.size = Math.max(wordObj.height, wordObj.width);\r\n        wordObj.rotation = degreesToRadians(angle);\r\n        \r\n        // find the pixels that aren't transparent and store them as the mask\r\n        app.context.fillStyle = app.canvas.style.backgroundColor;\r\n        app.context.fillRect(0, 0, app.canvas.width, app.canvas.height);\r\n        wordObj.draw(app.context);\r\n        var imageData = app.context.getImageData(wordObj.x, wordObj.y, wordObj.width, wordObj.height);\r\n        var mask = new Array();\r\n        for (var x = 0; x < wordObj.width; x++) {\r\n            var xm = Math.floor(x / that.COARSENESS) * that.COARSENESS;\r\n            if (mask[xm] == null) mask[xm] = {};\r\n            for (var y = 0; y < wordObj.height; y++) {\r\n                var ym = Math.floor(y / that.COARSENESS) * that.COARSENESS;\r\n                var pixel = getPixel(x, y, imageData);\r\n                var pixelColor = 'rgb('+pixel[0]+', '+pixel[1]+', '+pixel[2]+')';\r\n                if (pixelColor != app.canvas.style.backgroundColor) {\r\n                    mask[xm][ym] = true;\r\n                }\r\n                if (mask[xm][ym]) {\r\n                    y = ym + that.COARSENESS; // there's a match, so skip ahead\r\n                    continue;\r\n                }\r\n            }\r\n        }\r\n        wordObj.mask = mask;\r\n    }\r\n    \r\n    /**\r\n     * Helper method which runs createWordGraphics for all the words.\r\n     */\r\n    function createAllGraphics() {\r\n    \tfor (var i = 0; i < _words.length; i++) {\r\n            createWordGraphics(_words[i]);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Arrange the words on the stage using the chosen layout scheme.\r\n     */\r\n    this.arrangeWords = function() {\r\n//    \tconsole.profile();\r\n        clearTimeout(timer);\r\n        app.clear(); // reset canvas\r\n        \r\n        this.toggleLoadingText();\r\n\r\n        if (_words.length > 0) {\r\n            \r\n            this.grid = [];\r\n            timer_i = 0; // used as the increment for the word list\r\n      \r\n            function doArrange() {                \r\n                // common variables between the layout schemes\r\n                var x;\r\n                var y;\r\n                var word;\r\n                var breakOut;\r\n                var fail;\r\n                var wordCount = this.wordsToArrange - 1;\r\n                var appCanvasWidth = app.canvas.width;\r\n                var appCanvasHeight = app.canvas.height;\r\n                var halfWidth = appCanvasWidth * 0.5;\r\n                var halfHeight = appCanvasHeight * 0.5;\r\n                var dd = 0.05;\r\n\r\n                do {\r\n                    word = _words[timer_i];\r\n                    if (word !== undefined) {\r\n\t                    var a = Math.random() * Math.PI; // angle?\r\n\t                    var d = Math.random() * (word.size * 0.25); // diameter?\r\n\t                    var da = (Math.random() - 0.5) * 0.5;\r\n\t                    var halfWordWidth = word.width * 0.5;\r\n\t                    var halfWordHeight = word.height * 0.5;\r\n\t\r\n\t                    while (true) {\r\n\t                        x = Math.floor((halfWidth + (Math.cos(a) * d * this.ratio) - halfWordWidth) / this.COARSENESS) * this.COARSENESS;\r\n\t                        y = Math.floor((halfHeight + (Math.sin(a) * d) - halfWordHeight) / this.COARSENESS) * this.COARSENESS;\r\n\t\r\n\t                        fail = false;\r\n\t                        if (x + halfWordWidth >= appCanvasWidth || y + halfWordHeight >= appCanvasHeight) {\r\n\t                            fail = true;\r\n\t                        } else {\r\n\t                        \tfail = hitTest(x, y, word.height, word.width, word.mask);\r\n\t                        }\r\n\t                        if (!fail) {\r\n\t                            break;\r\n\t                        }\r\n\t                        a += da;\r\n\t                        d += dd;\r\n\t                    }\r\n\t\r\n\t                    finalizeWord(x, y, word);\r\n\t                    if (app.useFadeEffect) {\r\n\t                    \tword.alpha = 0;\r\n\t\t                    for (var w = 0; w < timer_i; w++) {\r\n\t\t                        var wrd = _words[w];\r\n\t\t                        if (wrd.alpha < 1) fadeWord(wrd);\r\n\t\t                    }\r\n\t                    } else {\r\n\t                    \tword.alpha = 1;\r\n\t                    \tword.draw(app.context);\r\n\t                    }\r\n                    }\r\n                    timer_i++;\r\n                    if (timer_i >= _words.length) {\r\n                        clearTimeout(timer);\r\n//                        console.profileEnd();\r\n                        this.doingArrange = false;\r\n                        \r\n                        this.toggleLoadingText(false);                               \r\n                        \r\n                        drawWords();\r\n                        \r\n                        break;\r\n                    }\r\n                } while (wordCount--);\r\n            }\r\n            \r\n            /**\r\n             * Test the mask of a word against the overall grid to see if they intersect.\r\n             * @param\tx\r\n             * @param\ty\r\n             * @param\th\r\n             * @param\tw\r\n             * @param\tmask\r\n             * @return\r\n             */\r\n            function hitTest(x, y, h, w, mask) {\r\n                for (var xt = 0; xt <= w; xt += this.COARSENESS) {\r\n                    for (var yt = 0; yt <= h; yt += this.COARSENESS) {\r\n                        if (mask[xt] && mask[xt][yt] && this.grid[xt + x] != null && this.grid[xt + x][yt + y] != null) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n            \r\n            /**\r\n             * Set the new position of the word, and make it visible.\r\n             * @param\tx\r\n             * @param\ty\r\n             * @param\tword\r\n             * @param   drawIt\r\n             */\r\n            function finalizeWord(x, y, word, drawIt) {\r\n                set_grid(x, y, word);\r\n\r\n                word.x = x;\r\n                word.y = y;\r\n\r\n                word.live = true;\r\n                if (drawIt) {\r\n                \t/*\r\n                    if ($.browser.webkit) {\r\n                        // cover the canvas with a transparent rectangle\r\n                        // forces webkit to show the words\r\n                        app.context.fillStyle = 'rgba(0,0,0,0)';\r\n                        app.context.fillRect(0, 0, app.canvas.width, app.canvas.height);\r\n                    }\r\n                    */\r\n                    word.draw(app.context);\r\n                }\r\n            }\r\n            \r\n            function fadeWord(word) {\r\n                word.alpha += 0.25;\r\n//                if ($.browser.webkit) {\r\n                    // cover the canvas with a transparent rectangle\r\n                    // forces webkit to show the words\r\n//                    app.context.fillStyle = 'rgba(0,0,0,0)';\r\n//                    app.context.fillRect(0, 0, app.canvas.width, app.canvas.height);\r\n//               }\r\n                word.draw(app.context);\r\n            }\r\n\r\n            /**\r\n             * Mark the spots on the grid where the word is located.\r\n             * @param\tx\r\n             * @param\ty\r\n             * @param\tword\r\n             */\r\n            function set_grid(x, y, word) {\r\n                for (var xt = 0; xt < word.width; xt += this.COARSENESS) {\r\n                    for (var yt = 0; yt < word.height; yt += this.COARSENESS) {\r\n                        if (word.mask[xt] && word.mask[xt][yt]) {\r\n                            if (!this.grid[xt + x]) this.grid[xt + x] = [];\r\n                            this.grid[xt + x][yt + y] = word;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            \r\n            doArrange = doArrange.createDelegate(this);\r\n            hitTest = hitTest.createDelegate(this);\r\n            finalizeWord = finalizeWord.createDelegate(this);\r\n            fadeWord = fadeWord.createDelegate(this);\r\n            set_grid = set_grid.createDelegate(this);\r\n            this.doingArrange = true;\r\n            \r\n//            if ($.browser.mozilla) {\r\n//                // FF needs more time to perform each layout run\r\n//                timer = setInterval(doArrange, 250);\r\n//            } else {\r\n                timer = setInterval(doArrange, 50);\r\n//            }\r\n            \r\n        } else {\r\n            alert(\"Error: There are no words to arrange.\");\r\n        }\r\n    }\r\n    \r\n    this.toggleLoadingText = function(show) {\r\n        app.context.save();\r\n        \r\n        if (show) app.context.fillStyle = 'black';\r\n        else app.context.fillStyle = app.canvas.style.backgroundColor;\r\n        \r\n        app.context.textBaseline = 'top';\r\n        app.context.font = '10px Arial';\r\n        var offset = app.context.measureText('Loading').width + 10;\r\n        app.context.fillText('Loading', app.canvas.width - offset, 10);\r\n        \r\n        app.context.restore();\r\n    }\r\n    \r\n    this.startUpdates = function() {\r\n    \ttimer = setInterval(drawWords, that.UPDATE_RATE);\r\n    }\r\n    \r\n    this.stopUpdates = function() {\r\n    \tif (overWord != null) {\r\n\t    \t// remove existing tooltip\r\n\t    \toverWord = null;\r\n\t    \tdrawWords();\r\n    \t}\r\n    \tclearTimeout(timer);\r\n    }\r\n    \r\n    function drawWords() {\r\n        app.clear();\r\n        var i = _words.length;\r\n        while(i--) {\r\n        \tvar word = _words[i];\r\n            word.alpha = 1;\r\n            if (word.live) word.draw(app.context);\r\n        }\r\n        var $canvasEl = $(app.canvas);\r\n        if (overWord != null) {\r\n        \t// add pointer cursor\r\n        \t$canvasEl.css('cursor', 'pointer');\r\n        \t\r\n            // draw the tooltip\r\n            app.context.save();\r\n            app.context.textBaseline = 'alphabetic';\r\n            app.context.font = '12px Arial';\r\n            \r\n            var wordWidth = app.context.measureText(overWord.text).width;\r\n            var valueWidth = app.context.measureText(overWord.value).width;\r\n            var maxWidth = wordWidth > valueWidth ? wordWidth : valueWidth;\r\n            maxWidth += 20;\r\n            \r\n            var x = overX + 15;\r\n            var y = overY + 25;\r\n            var appWidth = $canvasEl.width();\r\n            var appHeight = $canvasEl.height();\r\n            if (x + maxWidth >= appWidth) {\r\n            \tx -= maxWidth;\r\n            }\r\n            if (y + 40 >= appHeight) {\r\n            \ty -= 40;\r\n            }\r\n            \r\n            app.context.fillStyle = 'rgba(255,255,255,0.9)';\r\n            app.context.strokeStyle = 'rgba(100,100,100,0.9)';\r\n            app.context.translate(x, y);\r\n            app.context.fillRect(0, 0, maxWidth, 40);\r\n            app.context.strokeRect(0, 0, maxWidth, 40);\r\n            app.context.fillStyle = 'rgba(0,0,0,0.9)';\r\n            app.context.fillText(overWord.text+':', 8, 18);\r\n            app.context.fillText(overWord.value, 8, 30);\r\n            app.context.restore();\r\n        } else {\r\n        \t$canvasEl.css('cursor', 'default');\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Checks to see if the mouse is currently over a word.\r\n     * @param\tevent\r\n     */\r\n    this.handleMouseMove = function(event) {\r\n        if (!this.doingArrange) {\r\n        \tvar i = _words.length;\r\n            while(i--) {\r\n                _words[i].isOver = false;\r\n            }\r\n            var offset = $(app.canvas).offset();\r\n            var remainder = (event.pageX - offset.left) % this.COARSENESS;\r\n            var x = (event.pageX - offset.left) - remainder;\r\n            remainder = (event.pageY - offset.top) % this.COARSENESS;\r\n            var y = (event.pageY - offset.top) - remainder;\r\n            overWord = this.findWordByCoords(x, y);\r\n            if (overWord != null) {\r\n                overWord.isOver = true;\r\n                overX = x;\r\n                overY = y;\r\n            }\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Checks to see if a word was clicked on, and then sends out the corresponding event.\r\n     * @param\tevent\r\n     * @return\r\n     */\r\n    this.handleWordClick = function(event) {\r\n        var offset = $(app.canvas).offset();\r\n        var remainder = (event.pageX - offset.left) % this.COARSENESS;\r\n        var x = (event.pageX - offset.left) - remainder;\r\n        remainder = (event.pageY - offset.top) % this.COARSENESS;\r\n        var y = (event.pageY - offset.top) - remainder;\r\n        var matchingWord = this.findWordByCoords(x, y);\r\n        \r\n        if (matchingWord != null) {\r\n            return {text: matchingWord.text, value: matchingWord.value};\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Returns the word which occupies the co-ordinates that were passed in.\r\n     * @param\tx\r\n     * @param\ty\r\n     * @return\r\n     */\r\n    this.findWordByCoords = function(x, y) {\r\n        var matchingWord = null;\r\n        if (this.grid[x] !=  null) {\r\n            if (this.grid[x][y] != null) {\r\n                matchingWord = this.grid[x][y];\r\n            } else if (this.grid[x][y + this.COARSENESS] != null) {\r\n                matchingWord = this.grid[x][y + this.COARSENESS];\r\n            }\r\n        }\r\n        if (matchingWord == null && this.grid[x + this.COARSENESS] != null) {\r\n            if (this.grid[x + this.COARSENESS][y] != null) {\r\n                matchingWord = this.grid[x + this.COARSENESS][y];\r\n            } else if (this.grid [x + this.COARSENESS][y + this.COARSENESS] != null) {\r\n                matchingWord = this.grid[x + this.COARSENESS][y + this.COARSENESS];\r\n            }\r\n        }\r\n        \r\n        return matchingWord;\r\n    }\r\n    \r\n    /**\r\n     * Convert an angle in degrees to radians.\r\n     * @param\tdegrees\r\n     * @return\r\n     */\r\n    function degreesToRadians(degrees) {\r\n        var radians = degrees * (Math.PI / 180);\r\n        return radians;\r\n    }\r\n    \r\n    /**\r\n     * Convenience function to map a variable from one coordinate space to another (from processing).\r\n     */\r\n    function mapValue(value, istart, istop, ostart, ostop) {\r\n        return ostart + (ostop - ostart) * ((value - istart) / (istop - istart));\r\n    }\r\n    \r\n}\r\n\r\n// from Ext\r\nFunction.prototype.createDelegate = function(obj, args, appendArgs){\r\n    var method = this;\r\n    return function() {\r\n        var callArgs = args || arguments;\r\n        if (appendArgs === true){\r\n            callArgs = Array.prototype.slice.call(arguments, 0);\r\n            callArgs = callArgs.concat(args);\r\n        }else if (typeof appendArgs==\"number\"){\r\n            callArgs = Array.prototype.slice.call(arguments, 0); // copy arguments first\r\n            var applyArgs = [appendArgs, 0].concat(args); // create method call params\r\n            Array.prototype.splice.apply(callArgs, applyArgs); // splice them in\r\n        }\r\n        return method.apply(obj || window, callArgs);\r\n    };\r\n}","/**\n * Voyant changes & additions:\n * - height setter, height no longer calculated based on content\n * - replaced tree.size with tree.nodeSize\n * - pointer cursor for node\n * - rect now behind text, made opaque to block paths obscuring text\n * - branch length based on text length on per node basis\n * - click handler\n * - zoom fixes\n * - redraw checks for tries before re-running setup\n * - prevent negative height error\n */\n\n/*\n * (This is the new BSD license.) Copyright (c) 2012-2014, Chris Culy All rights\n * reserved.\n * \n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met: *\n * Redistributions of source code must retain the above copyright notice, this\n * list of conditions and the following disclaimer. * Redistributions in binary\n * form must reproduce the above copyright notice, this list of conditions and\n * the following disclaimer in the documentation and/or other materials provided\n * with the distribution. * Neither the name of the Chris Culy nor the names of\n * its contributors may be used to endorse or promote products from this\n * software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY Chris Culy ``AS IS'' AND ANY OR IMPLIED\n * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO\n * EVENT SHALL Chris Culy BE LIABLE FOR ANY, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; OF USE, DATA, OR PROFITS; OR\n * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\"use strict\";\n/**\n * @namespace doubletree All of the functionality is in the doubletree namespace\n */\nvar doubletree = {};\n\n(function() {\n\n// TBD what about visWidth? to be fixed visWidth is really width and width\n// is really just the width of one side of the doubletree\n\n/**\n * @class doubletree.DoubleTree This is the class for the DoubleTree\n *        visualization\n */\ndoubletree.DoubleTree = function() {\n\tvar containers = []; // nominally for allowing the same tree in\n\t\t\t\t\t\t\t// multiple places, but not tested and probably\n\t\t\t\t\t\t\t// doesn't work right (e.g. for search)\n\t// defaults. see below for getter/setters\n\tvar visWidth = 600;\n\tvar visHt = 400; // calculated, not settable\n\tvar prefixesOnRight = false; // true for right to left writing systems\n\tvar filters = {\n\t\t\"left\" : [],\n\t\t\"right\" : []\n\t};\n\tvar handlers = {\n\t\t\"alt\" : noOp,\n\t\t\"shift\" : noOp,\n\t\t\"click\" : noOp\n\t};\n\tvar showTokenExtra = true;\n\tvar scaleLabels = true;\n\tvar sortFun = doubletree.sortByStrFld(\"token\");\n\tvar nodeText = doubletree.tokenText; // default\n\tvar tokenExtraText = function(info) {\n\t\treturn doubletree.fieldText(info, \"POS\");\n\t};\n\tvar rectColor = function(info) {\n\t\treturn \"rgba(255,255,255,1)\";\n\t};\n\tvar rectBorderColor = function(info) {\n\t\treturn \"rgba(255,255,255,1)\";\n\t};\n\tvar continuationColor = function(info) {\n\t\treturn \"red\";\n\t};\n\tvar basicStyles = {\n\t\t\"node\" : {\n\t\t\t\"fill\" : \"white\",\n\t\t\t\"stroke\" : \"steelblue\",\n\t\t\t\"stroke-width\" : \"1.5px\"\n\t\t},\n\t\t\"branch\" : {\n\t\t\t\"stroke\" : \"#aaa\",\n\t\t\t\"stroke-width\" : \"1.5px\"\n\t\t}\n\t};\n\n\tvar succeeded = false; // did we succeed in building a DoubleTree? we\n\t\t\t\t\t\t\t// need this flag, since we no longer return\n\t\t\t\t\t\t\t// true/false from setupFromX (since we do\n\t\t\t\t\t\t\t// chaining)\n\n\tvar dispatch = d3.dispatch(\"idsUpdated\");\n\tdispatch.on(\"idsUpdated\", function() {\n\t\tif (this == leftTree) {\n\t\t\trtTree.setIds(leftTree.continuationIDs);\n\t\t\trtTree.updateContinuations();\n\t\t} else if (this == rtTree) {\n\t\t\tleftTree.setIds(rtTree.continuationIDs);\n\t\t\tleftTree.updateContinuations();\n\t\t}\n\t});\n\n\tvar leftTrie, rtTrie, leftTree, rtTree;\n\tvar visibleIDs; // the ids of the results that are showing\n\n\t// tmp, until we can do sizing right. the font sizes are specified in\n\t// doubletree.css and manually copied here\n\tvar kFontSize = 14; // normal\n\tvar kBigFontSize = 1.15 * kFontSize; // for found text and\n\t\t\t\t\t\t\t\t\t\t\t// continuations (was 18) NB:\n\t\t\t\t\t\t\t\t\t\t\t// this is 0.05 bigger than in\n\t\t\t\t\t\t\t\t\t\t\t// doubletree.css\n\tvar kMinFontSize = 8; // smallest that we'll scale to\n\tvar textScale;\n\n\t/** @exports mine as doubletree.DoubleTree */\n\t/** @ignore */\n\tfunction mine(selection) {\n\t\t// generate container and data independent part of chart here, using\n\t\t// `width` and `height` etc\n\n\t\tselection.each(function(d, i) {\n\t\t\t// generate chart here; `d` is the data and `this` is the\n\t\t\t// element\n\t\t\t// really, storing containers. Use updateData and redraw to\n\t\t\t// really do the generation\n\t\t\tcontainers.push(this.node());\n\t\t});\n\n\t}\n\n\t/**\n\t * initialize the visualization in one or more html containers\n\t * <p>\n\t * \n\t * @param containerPattern\n\t *            CSS selector for the containers\n\t */\n\tmine.init = function(containerPattern) {\n\t\td3.select(d3.selectAll(containerPattern)).call(this);\n\t\treturn mine;\n\t};\n\n\t/**\n\t * redraw the visualization\n\t */\n\tmine.redraw = function() {\n\t\tif (leftTrie !== undefined && rtTrie !== undefined) {\n\t\t\tmine.setupFromTries(leftTrie, rtTrie);\n\t\t}\n\n\t\treturn mine;\n\t};\n\n\t/**\n\t * set up the visualization using 2 {@link doubletree.Trie}s\n\t * \n\t * @param leftOne\n\t *            the left {@link doubletree.Trie}\n\t * @param rtOne\n\t *            the right {@link doubletree.Trie}\n\t */\n\tmine.setupFromTries = function(leftOne, rtOne) {\n\t\tleftTrie = leftOne.getUniqRoot();\n\t\trtTrie = rtOne.getUniqRoot();\n\n\t\tvar leftTrieTree = leftTrie.toTree(filters.left);\n\t\tvar rtTrieTree = rtTrie.toTree(filters.right);\n\n\t\tvar copyIDs = true;\n\t\tif (Object.keys(rtTrieTree.pruned).length > 0) {\n\t\t\tnew_pruneTree(rtTrieTree, rtTrieTree.pruned, copyIDs);\n\t\t\tnew_pruneTree(leftTrieTree, rtTrieTree.pruned, copyIDs);\n\t\t\tcopyIDs = false;\n\t\t}\n\n\t\tif (Object.keys(leftTrieTree.pruned).length > 0) {\n\t\t\tnew_pruneTree(leftTrieTree, leftTrieTree.pruned, copyIDs);\n\t\t\tnew_pruneTree(rtTrieTree, leftTrieTree.pruned, copyIDs);\n\t\t}\n\n\t\t// combine the info's from the two trees\n\t\tvar newInfo = {}; // rtTrieTree.info;\n\n\t\tfor ( var k in rtTrieTree.info) {\n\t\t\tif (k != \"continuations\" && k != \"ids\" && k != \"count\") {\n\t\t\t\tnewInfo[k] = rtTrieTree.info[k];\n\t\t\t}\n\t\t}\n\n\t\tnewInfo[\"right continuations\"] = rtTrieTree.info.continuations;\n\t\tnewInfo[\"left continuations\"] = leftTrieTree.info.continuations;\n\n\t\tnewInfo.ids = {};\n\t\taddTo(newInfo.ids, rtTrieTree.info.ids);\n\t\taddTo(newInfo.ids, leftTrieTree.info.ids);\n\t\tnewInfo.count = Object.keys(newInfo.ids).length;\n\t\tvisibleIDs = Object.keys(newInfo.ids);\n\n\t\tif (rtTrieTree.info.origIDs || leftTrieTree.info.origIDs) {\n\t\t\tnewInfo.origIDs = {};\n\t\t\taddTo(newInfo.origIDs, rtTrieTree.info.origIDs);\n\t\t\taddTo(newInfo.origIDs, leftTrieTree.info.origIDs);\n\t\t\tnewInfo.origCount = Object.keys(newInfo.origIDs).length;\n\t\t}\n\n\t\trtTrieTree.info = newInfo;\n\t\tleftTrieTree.info = newInfo;\n\n\t\tvar maxChildren = Math.max(leftTrieTree.maxChildren,\n\t\t\t\trtTrieTree.maxChildren);\n\t\tif (isNaN(maxChildren) || maxChildren == 0) {\n\t\t\tsucceeded = false;\n\t\t\treturn mine;\n\t\t}\n\n\t\tif (scaleLabels) {\n\t\t\ttextScale = d3.scaleLog().range([ kMinFontSize, kFontSize ]);\n\t\t} else {\n\t\t\ttextScale = function() {\n\t\t\t\treturn kFontSize;\n\t\t\t};\n\t\t\ttextScale.domain = function() {\n\t\t\t};\n\t\t}\n\n\t\tvar minCount = Math.min(leftTrieTree.minCount, rtTrieTree.minCount);\n\t\ttextScale.domain([ minCount, leftTrieTree.info.count ]);\n\n\t\t// TBD ?? margin, width, height, duplicated in Tree\n\t\tvar margin = {\n\t\t\ttop : 20,\n\t\t\tright : 20,\n\t\t\tbottom : 20,\n\t\t\tleft : 20\n\t\t};\n\t\tvar width = visWidth - margin.right - margin.left;\n\t\tvar height = visHt - margin.top - margin.bottom;\n\n\t\tcontainers.forEach(function(d, i) {\n\t\t\tvar thisContainer = d;\n\t\t\tvar thisVis;\n\n\t\t\tvar tmp = d3.select(thisContainer).select(\"svg\");\n\t\t\tif (tmp.node() == null) {\n\t\t\t\tthisVis = d3.select(thisContainer).append(\"svg\")\n\t\t\t\t\t.attr(\"width\", width + margin.right + margin.left)\n\t\t\t\t\t.attr(\"height\", height + margin.top + margin.bottom)\n\t\t\t\t\t.attr(\"cursor\", \"move\")\n\t\t\t\t\t.call(d3.zoom().scaleExtent([1,1]).on('zoom', function(event) {\n\t\t\t\t\t\tvar x = event.transform.x + width/2; // need offset because of initial offset in g element\n\t\t\t\t\t\tvar y = event.transform.y + height/2;\n\t\t\t\t\t\td3.select(thisContainer).select(\"svg > g\").attr(\"transform\", 'translate('+x+','+y+')');\n\t\t\t\t\t}));\n\n\t\t\t\tthisVis.append(\"g\") // container for both trees\n\t\t\t\t\t.attr('transform', 'translate('+width/2+','+height/2+')'); // initial offset\n\n\t\t\t} else {\n\t\t\t\tthisVis = tmp;\n\t\t\t\tthisVis\n\t\t\t\t\t.attr(\"width\", width + margin.right + margin.left)\n\t\t\t\t\t.attr(\"height\", height + margin.top + margin.bottom);\n\t\t\t\tthisVis.selectAll(\"g *\").remove(); // clear\n\t\t\t\t\t\t\t\t\t\t\t\t\t// previous\n\t\t\t}\n\n\t\t\tleftTree = new doubletree.Tree(thisVis.select(\"g\"),\n\t\t\t\t\tvisWidth, visHt, leftTrieTree, true,\n\t\t\t\t\tsortFun, dispatch, textScale, showTokenExtra,\n\t\t\t\t\tnodeText, tokenExtraText, rectColor,\n\t\t\t\t\trectBorderColor, continuationColor, basicStyles);\n\t\t\trtTree = new doubletree.Tree(thisVis.select(\"g\"),\n\t\t\t\t\tvisWidth, visHt, rtTrieTree, false,\n\t\t\t\t\tsortFun, dispatch, textScale, showTokenExtra,\n\t\t\t\t\tnodeText, tokenExtraText, rectColor,\n\t\t\t\t\trectBorderColor, continuationColor, basicStyles);\n\t\t});\n\n\t\tleftTree.handleAltPress = handlers.alt;\n\t\trtTree.handleAltPress = handlers.alt;\n\n\t\tleftTree.handleShiftPress = handlers.shift;\n\t\trtTree.handleShiftPress = handlers.shift;\n\t\t\n\t\tleftTree.handleClick = handlers.click;\n\t\trtTree.handleClick = handlers.click;\n\n\t\tsucceeded = true;\n\t\treturn mine;\n\t};\n\n\t// hitArray is an array of items, prefixArray and suffixArray are arrays\n\t// of arrays of items\n\t/**\n\t * set up the visualization from arrays corresponding to the hit, the\n\t * prefix, and the suffix of a key word in context result.\n\t * <p>\n\t * The ith elements should correspond with each other. Each item\n\t * consists of fields separated by a field delimiter. For example we\n\t * might have word/tag (with / as the delimiter) or word\\tlemma\\tauthor\n\t * (with tab (\\t) as the delimiter) Only certain fields are relevant for\n\t * deciding whether two items are to be considered the same (e.g. we\n\t * might ignore an author field)\n\t * \n\t * @param prefixArray\n\t *            the array of arrays of the prefixes of the hits\n\t * @param hitArray\n\t *            the array of the hits\n\t * @param suffixArray\n\t *            the array of arrays of the suffixes of the hits\n\t * @param idArray\n\t *            the array of ids of the hits (or null, if there are no ids\n\t *            for the hits)\n\t * @param caseSensitive\n\t *            are the hits case sensitive\n\t * @param fieldNames\n\t *            the names of the fields\n\t * @param fieldDelim\n\t *            the field delimiter\n\t * @param distinguishingFieldsArray\n\t *            the fields that determine identity\n\t * @param prefixesOnRight\n\t *            display the prefixes on the right, for right-to-left\n\t *            writing systems. Default is false\n\t */\n\tmine.setupFromArrays = function(prefixArray, hitArray, suffixArray, idArray, caseSensitive, fieldNames, fieldDelim, distinguishingFieldsArray) {\n\n\t\tif (undefined == caseSensitive && leftTrie) {\n\t\t\tcaseSensitive = leftTrie.caseSensitive();\n\t\t}\n\t\tif (undefined == fieldNames && leftTrie) {\n\t\t\tfieldNames = leftTrie.fieldNames();\n\t\t}\n\t\tif (undefined == fieldDelim && leftTrie) {\n\t\t\tfieldDelim = leftTrie.fieldDelim();\n\t\t}\n\t\tif (undefined == distinguishingFieldsArray && leftTrie) {\n\t\t\tdistinguishingFieldsArray = leftTrie.distinguishingFieldsArray();\n\t\t}\n\n\t\tleftTrie = new doubletree.Trie(caseSensitive, fieldNames, fieldDelim, distinguishingFieldsArray);\n\t\trtTrie = new doubletree.Trie(caseSensitive, fieldNames, fieldDelim, distinguishingFieldsArray);\n\n\t\tvar n = hitArray.length;\n\t\tfor ( var i = 0; i < n; i++) {\n\t\t\tvar thisID = idArray ? idArray[i] : i;\n\t\t\tvar thisHit = hitArray[i];\n\t\t\tvar thesePrefixes = prefixArray[i].slice();\n\t\t\tvar theseSuffixes = suffixArray[i].slice();\n\n\t\t\tthesePrefixes.push(thisHit);\n\t\t\tthesePrefixes.reverse();\n\t\t\ttheseSuffixes.unshift(thisHit);\n\n\t\t\t/*\n\t\t\t * if (prefixesOnRight) { //e.g. for Arabic, Hebrew, N'Ko, ...\n\t\t\t * thesePrefixes.push(thisHit); thesePrefixes.reverse();\n\t\t\t * \n\t\t\t * rtTrie.addNgram( thesePrefixes, thisID);\n\t\t\t * \n\t\t\t * theseSuffixes.unshift(thisHit); leftTrie.addNgram(\n\t\t\t * theseSuffixes, thisID);\n\t\t\t *  } else { thesePrefixes.push(thisHit);\n\t\t\t * thesePrefixes.reverse(); leftTrie.addNgram( thesePrefixes,\n\t\t\t * thisID);\n\t\t\t * \n\t\t\t * theseSuffixes.unshift(thisHit); rtTrie.addNgram(\n\t\t\t * theseSuffixes, thisID); }\n\t\t\t */\n\n\t\t\tif (prefixesOnRight) {\n\t\t\t\trtTrie.addNgram(thesePrefixes, thisID);\n\t\t\t\tleftTrie.addNgram(theseSuffixes, thisID);\n\t\t\t} else {\n\t\t\t\tleftTrie.addNgram(thesePrefixes, thisID);\n\t\t\t\trtTrie.addNgram(theseSuffixes, thisID);\n\t\t\t}\n\t\t}\n\n\t\tmine.setupFromTries(leftTrie, rtTrie);\n\t\treturn mine;\n\t};\n\n\t/**\n\t * @returns just the <em>ids</em> of the data that satisfies the\n\t *          current filters\n\t */\n\tmine.filteredIDs = function() {\n\t\treturn visibleIDs;\n\t};\n\n\t// return how many found\n\t/**\n\t * search the nodes of the visualization for a pattern\n\t * <p>\n\t * The found nodes will get the CSS class foundText\n\t * \n\t * @param searchRE\n\t *            the regular expression to look for\n\t * @returns how many nodes were found\n\t */\n\tmine.search = function(searchRE) {\n\t\tleftTree.search(searchRE);\n\t\trtTree.search(searchRE);\n\n\t\tvar thisVis = d3.select(containers[0]);\n\t\tvar found = thisVis.selectAll(\"text.foundText\");\n\n\t\tif (found.empty()) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar what = found[0].length;\n\n\t\tvar foundRt = thisVis.selectAll(\"text.rtNdText.foundText\");\n\n\t\tif (foundRt.node() != null) {\n\t\t\twhat--; // root node, and we have 2 of those, so subtract one\n\t\t\t\t\t// from the count\n\t\t}\n\t\treturn what;\n\t};\n\n\t/**\n\t * clear the visualization of the search results\n\t * <p>\n\t * the CSS class foundText is removed\n\t */\n\tmine.clearSearch = function() {\n\t\tleftTree.clearSearch();\n\t\trtTree.clearSearch();\n\t\treturn mine;\n\t};\n\n\t/**\n\t * update the showing/hiding of extra information associated with the\n\t * basic item, e.g. part of speech information\n\t * <p>\n\t * Notes:\n\t * <ul>\n\t * <li>This <em>DOES</em> redraw the visualization.</li>\n\t * <li>Safari does not update the visualization correctly by itself, so\n\t * we force it to rebuild the entire visualization, unlike in other\n\t * browsers.</li>\n\t * </ul>\n\t */\n\tmine.updateTokenExtras = function() {\n\t\tleftTree.showTokenExtras(showTokenExtra);\n\t\trtTree.showTokenExtras(showTokenExtra);\n\n\t\t// Safari doesn't update reshowing correctly, so we'll force it to\n\t\t// build this again :( (Chrome works correctly, so it's not a webkit\n\t\t// issue)\n\t\tvar thisVis = d3.select(containers[0]);\n\t\tvar tokExtra = thisVis.select('.tokenExtra[display=\"inline\"]');\n\t\tif (!tokExtra.empty()) {\n\t\t\tvar ht = tokExtra.style(\"height\");\n\t\t\tif (ht == \"0px\") {\n\t\t\t\tmine.redraw();\n\t\t\t}\n\t\t}\n\n\t\treturn mine;\n\t};\n\n\t// ////////// getter/setters\n\t/**\n\t * Getter/setter for the maximum width of the DoubleTree area\n\t * \n\t * @param value\n\t *            the maximum width\n\t */\n\tmine.visWidth = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn visWidth;\n\t\tvisWidth = value;\n\t\treturn mine;\n\t};\n\n\t// ADDED\n\tmine.visHeight = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn visHt;\n\t\tvisHt = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for whether the prefixes are displayed on the right or\n\t * the left.\n\t * <p>\n\t * The default value is false, i.e. the prefixes are displayed on the\n\t * left, as in English. <em>prefixesOnRight</em> should be set to true\n\t * for right-to-left writing systems such as Arabic, Hebrew, N'Ko, etc.\n\t * \n\t * @param value\n\t *            true or false\n\t */\n\tmine.prefixesOnRight = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn prefixesOnRight;\n\t\tprefixesOnRight = value;\n\t\treturn mine;\n\t};\n\n\t// NB: doesn't redraw\n\t/**\n\t * Getter/setter for the filter functions.\n\t * <p>\n\t * The filter functions get an information object as their argument, and\n\t * return true/false. Each position away from the root has its own\n\t * filter, and the left and right sides also have their own filters. The\n\t * filters are specified via an object with \"left\" and \"right\" keys\n\t * whose values are arrays of functions The function at index <em>i</em>\n\t * filters position <em>i + 1</em> away from the root. Default is no\n\t * filtering (via empty arrays)\n\t * <p>\n\t * Note: setting the filters does <em>not</em> redraw the\n\t * visualization. See {@link #redraw}\n\t * \n\t * @param value\n\t *            an object containing the filters\n\t */\n\tmine.filters = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn filters;\n\t\tfilters = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the handlers for alt-click and shift-click on the\n\t * nodes.\n\t * <p>\n\t * The handlers get an information object as their argument. The\n\t * handlers are specified via an object with \"alt\" and \"shift\" keys\n\t * whose values are functions The default is no handlers, i.e.\n\t * <em>NO</em> interaction\n\t * \n\t * @param value\n\t *            an object containing the handlers\n\t */\n\tmine.handlers = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn handlers;\n\t\thandlers = value;\n\t\treturn mine;\n\t};\n\n\t// NB: doesn't redraw\n\t/**\n\t * Getter/setter for showing/hiding extra information associated with\n\t * the main value, e.g. part of speech information.\n\t * <p>\n\t * Note: setting this value does <em>not</em> redraw the\n\t * visualization. See {@link #redraw} Default is true\n\t * \n\t * @param value\n\t *            a boolean specifying whether to show the information or\n\t *            not\n\t */\n\tmine.showTokenExtra = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn showTokenExtra;\n\t\tshowTokenExtra = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for scaling the node labels by their frequency.\n\t * <p>\n\t * Default is true\n\t * \n\t * @param value\n\t *            a boolean specifying whether to scale the labels or not\n\t */\n\tmine.scaleLabels = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn scaleLabels;\n\t\tscaleLabels = value;\n\t\treturn mine;\n\t};\n\n\t// succeeded is read only\n\t/**\n\t * Reports whether the DoubleTree was constructed successfully\n\t * <p>\n\t * \n\t * @returns true if the DoubleTree was constructed successfully and\n\t *          false otherwise\n\t */\n\tmine.succeeded = function() {\n\t\treturn succeeded;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the sort order of sibling\n\t * nodes.\n\t * <p>\n\t * The function gets an information object as its argument, and should\n\t * return -1 for precedes, 1 for follows and 0 for don't care The nodes\n\t * are displayed in \"preceding\" (i.e. ascending) order, from top to\n\t * bottom. The default is alphabetical by a \"token\" field if there is\n\t * one: doubletree.sortByStrFld(\"token\")\n\t * \n\t * @param the\n\t *            sort order function\n\t */\n\tmine.sortFun = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn sortFun;\n\t\tsortFun = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the content of the node\n\t * labels.\n\t * <p>\n\t * The function gets an information object as its first argument and a\n\t * boolean indicating whether the node is the root or not as its second\n\t * argument. The function should return a string. The default is\n\t * {@link #tokenText}\n\t * \n\t * @param the\n\t *            content function\n\t */\n\tmine.nodeText = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn nodeText;\n\t\tnodeText = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the content of the \"extra\"\n\t * information for the labels labels\n\t * <p>\n\t * The function gets an information object as its first argument and a\n\t * boolean indicating whether the node is the root or not as its second\n\t * argument. The function should return a string. The default is the POS\n\t * field of the information object\n\t * \n\t * @param the\n\t *            content function\n\t */\n\tmine.tokenExtraText = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn tokenExtraText;\n\t\ttokenExtraText = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the color of the\n\t * background rectangles for the nodes.\n\t * <p>\n\t * The function gets an information object as its argument, and should\n\t * return a CSS color in a string, e.g. \"rgba(255,128,0,0.5)\" The\n\t * default is transparent white (i.e., effectively no color);\n\t * \n\t * @param value\n\t *            the background color function\n\t */\n\tmine.rectColor = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn rectColor;\n\t\trectColor = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the color of the borders\n\t * of the background rectangles for the nodes.\n\t * <p>\n\t * The function gets an information object as its argument, and should\n\t * return a CSS color in a string, e.g. \"rgba(255,128,0,0.5)\" The\n\t * default is transparent white (i.e., effectively no color);\n\t * \n\t * @param value\n\t *            the border color function\n\t */\n\tmine.rectBorderColor = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn rectBorderColor;\n\t\trectBorderColor = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the color of the text of\n\t * the nodes that are continuations of the clicked node.\n\t * <p>\n\t * The function gets an information object as its argument, and should\n\t * return a CSS color in a string, e.g. \"rgba(255,128,0,0.5)\" The\n\t * default is transparent white (i.e., effectively no color);\n\t * \n\t * @param value\n\t *            the border color function\n\t */\n\tmine.continuationColor = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn continuationColor;\n\t\tcontinuationColor = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the styles of the nodes and branches. For now these\n\t * are constant throughout the tree. Takes an object of the form:\n\t * {\"node\":{\"fill\":cssColor, \"stroke\":cssColor,\n\t * \"stroke-width\":cssWidth}, \"branch\":{\"stroke\":cssColor,\n\t * \"stroke-width\":cssWidth}} All of the attributes are optional Defaults\n\t * are: {\"node\":{\"fill\":\"white\", \"stroke\":\"steelblue\",\n\t * \"stroke-width\":\"1.5px\"}, \"branch\":{\"stroke\":\"#777\",\n\t * \"stroke-width\":\"1.5px\"}};\n\t */\n\tmine.basicStyles = function(stylesObj) {\n\t\tif (!arguments.length)\n\t\t\treturn basicStyles;\n\n\t\tObject.keys(basicStyles).forEach(\n\t\t\tfunction(aspect) {\n\t\t\t\tif (aspect in stylesObj) {\n\t\t\t\t\tObject.keys(basicStyles[aspect]).forEach(\n\t\t\t\t\t\tfunction(attr) {\n\t\t\t\t\t\t\tif (attr in stylesObj[aspect]) {\n\t\t\t\t\t\t\t\tbasicStyles[aspect][attr] = stylesObj[aspect][attr];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\treturn mine;\n\t};\n\n\treturn mine;\n};\n\n// ////// tree for doubletree\n/** @private */\ndoubletree.Tree = function(vis, visWidth, visHt, data, toLeft,\n\t\tsortFun, dispatch, textScale, showTokenXtra, nodeTextFun,\n\t\ttokenExtraTextFun, rectColorFun, rectBorderFun, contColorFun,\n\t\tbaseStyles) {\n\tvar showTokenExtra = false || showTokenXtra;\n\tvar continuationIDs = {};\n\tvar clickedNode;\n\tvar nodeText = nodeTextFun;\n\tvar tokenExtraText = tokenExtraTextFun;\n\tvar rectColor = rectColorFun;\n\tvar rectBorderColor = rectBorderFun;\n\tvar continuationColor = contColorFun;\n\tvar basicStyles = baseStyles;\n\n\tvar margin = {\n\t\ttop : 20,\n\t\tright : 20,\n\t\tbottom : 20,\n\t\tleft : 20\n\t}, width = visWidth - margin.right - margin.left, height = visHt - margin.top - margin.bottom, i = 0, duration = 200, root;\n\tvar dx;\n\n\tif (!sortFun) {\n\t\tsortFun = doubletree.sortByStrFld(\"token\");\n\t}\n\n\tvar i = 0;\n\tvar tree = d3.tree()\n\t.size([height, width])\n\t.nodeSize([ 40, 40 ]);\n\t//.sort(sortFun);\n\n\tvar diagonal = d3.linkHorizontal()\n\t\t.x(function(d) { return positionX(d.y); })\n\t\t.y(function(d) { return positionY(d.x); });\n\n\tvis = vis.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n\t// //////\n\tthis.readJSONTree = function(json) {\n\t\troot = d3.hierarchy(json);\n\t\troot.x0 = 0;\n\t\troot.y0 = 0;\n\n\t\troot.children.forEach(collapse);\n\t\tthis.update(root);\n\t};\n\n\t// CC had been inside readJSONTree\n\tfunction collapse(d) {\n\t\tif (d.children) {\n\t\t\td._children = d.children;\n\t\t\td._children.forEach(collapse);\n\t\t\td.children = null;\n\t\t}\n\t}\n\n\t// CC new\n\tfunction collapseSiblings(nd) {\n\t\tif (nd.parent) {\n\t\t\tnd.parent.children.forEach(function(d) {\n\t\t\t\tif (d != nd) {\n\t\t\t\t\tcollapse(d);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tthis.update = function(source) {\n\t\t// seems unnecessary\n//\t\tif (!source) {\n//\t\t\tsource = root;\n//\t\t}\n\n\t\t// Compute the new tree layout.\n\t\tvar treeData = tree(root);\n\t\tvar nodes = treeData.descendants();\n\n\t\tvar baseBranchSegmentWidth = 25;\n\t\t// Normalize for fixed-depth.\n\t\tnodes.forEach(function(d) {\n\t\t\tvar textSize = d.textSize;\n\t\t\tif (textSize == undefined) {\n\t\t\t\ttextSize = 0;\n\t\t\t\tvar parent = d.parent;\n\t\t\t\twhile (parent != null) {\n\t\t\t\t\tvar measured = Ext.draw.TextMeasurer.measureText(parent.data.name, 'arial').width;\n\t\t\t\t\ttextSize += measured;\n\t\t\t\t\tparent = parent.parent;\n\t\t\t\t}\n\t\t\t\td.textSize = textSize; // cache the size so we don't recalculate each time\n\t\t\t}\n\t\t\td.y = (d.depth * baseBranchSegmentWidth) + textSize;\n\t\t});\n\t\t\n\t\t\n\t\t// Update the nodes\u2026\n\t\tvar node = vis.selectAll(\"g.node_\" + toLeft)\n\t\t\t.data(nodes, function(d) {\n\t\t\t\treturn d.id || (d.id = ++i);\n\t\t\t});\n\n\t\t// Enter any new nodes at the parent's previous position.\n\t\tvar nodeEnter = node.enter().append(\"g\").attr(\"class\", \"node node_\" + toLeft).attr(\"cursor\", \"pointer\")\n\t\t\t.attr(\"transform\", function(d) {\n\t\t\t\treturn \"translate(\" + positionX(source.y0) + \",\" + positionY(source.x0) + \")\";\n\t\t\t})\n\t\t\t.on(\"click\", click);\n\n\t\tnodeEnter.append(\"title\").text(function(d) {\n\t\t\tvar what = doubletree.infoToText(d.data.info);\n\t\t\treturn what;\n\t\t});\n\n\t\tnodeEnter.append(\"circle\")\n\t\t\t.attr(\"r\", 1e-6)\n\t\t\t.style(\"fill\", function(d) {\n\t\t\t\treturn d._children ? \"#fff\" : basicStyles.node.fill;\n\t\t\t})\n\t\t\t.style(\"stroke\", function(d) {\n\t\t\t\treturn basicStyles.node.stroke;\n\t\t\t});\n\n\t\tvar txtNode = nodeEnter.append(\"text\").attr(\"class\", function(d) {\n\t\t\tif (d.depth == 0) {\n\t\t\t\treturn \"rtNdText\";\n\t\t\t} else {\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t}).attr(\"x\", function(d) {\n\t\t\tif (d.children || d._children) {\n\t\t\t\treturn 0;\n\t\t\t} else {\n\t\t\t\treturn toLeft ? 10 : -10;\n\t\t\t}\n\t\t}).attr(\"text-anchor\", function(d) {\n\t\t\tif (!d.parent) {\n\t\t\t\treturn \"middle\";\n\t\t\t}\n\t\t\tif (d.children || d._children) {\n\t\t\t\treturn toLeft ? \"end\" : \"start\";\n\t\t\t} else {\n\t\t\t\treturn toLeft ? \"start\" : \"end\";\n\t\t\t}\n\t\t}).style(\"font-size\", function(d) {\n\t\t\t/*\n\t\t\t * if (d.depth == 0 && toLeft) { return 0; //suppress left side\n\t\t\t * root -- do this because of differences in counts when\n\t\t\t * filtering }\n\t\t\t */\n\t\t\treturn textScale(d.data.info.count) + \"pt\";\n\t\t});\n\n\t\ttxtNode.append(\"tspan\").attr(\"dy\", \".35em\").attr(\"class\", \"tokenText\").text(function(d) {\n\t\t\treturn nodeText(d.data.info, d.depth < 1);\n\t\t}).style(\"fill-opacity\", 1e-6);\n\n\t\ttxtNode.append(\"tspan\").attr(\"dx\", \".35em\").attr(\"class\", \"tokenExtra\").text(function(d) {\n\t\t\treturn tokenExtraText(d.data.info, d.depth < 1);\n\t\t}).style(\"fill-opacity\", 1e-6);\n\n\t\t\n\t\tthis.drawRects();\n\n\t\tvar nodeUpdate = nodeEnter.merge(node);\n\t\t\n\t\t// Transition nodes to their new position.\n\t\tnodeUpdate.transition().duration(duration)\n\t\t\t.attr(\"transform\", function(d) {\n\t\t\t\treturn \"translate(\" + positionX(d.y) + \",\" + positionY(d.x) + \")\";\n\t\t\t});\n\n\t\tnodeUpdate.select(\"circle\")\n\t\t\t// .attr(\"r\", 4.5)\n\t\t\t.attr(\"r\", function(d) {\n\t\t\t\treturn (d.children || d._children) ? 1e-6 : 4.5;\n\t\t\t})\n\t\t\t.style(\"fill\", function(d) {\n\t\t\t\treturn d._children ? \"#fff\" : basicStyles.node.fill;\n\t\t\t}) // function(d) { return d._children ? \"lightsteelblue\" : \"#fff\";\n\t\t\t\t// })\n\t\t\t.style(\"stroke-width\", basicStyles.node[\"stroke-width\"]);\n\n\t\tnodeUpdate.selectAll(\"tspan\").style(\"fill-opacity\", 1);\n\n\t\t// Transition exiting nodes to the parent's new position.\n\t\tvar nodeExit = node.exit().transition().duration(duration).attr(\"transform\", function(d) {\n\t\t\treturn \"translate(\" + positionX(source.y) + \",\" + positionY(source.x) + \")\";\n\t\t}).remove();\n\n\t\tnodeExit.select(\"circle\").attr(\"r\", 1e-6);\n\n\t\t// nodeExit.select(\"text\")\n\t\tnodeExit.selectAll(\"tspan\").style(\"fill-opacity\", 1e-6);\n\n\t\t// Update the links\u2026\n\t\tvar link = vis.selectAll(\"path.link_\" + toLeft)\n\t\t\t.data(root.links(), function(d) {\n\t\t\t\tvar id = d.source.id+'-'+d.target.id;\n\t\t\t\treturn id;\n\t\t\t});\n\n\t\t// Enter any new links at the parent's previous position.\n\t\tvar linkEnter = link.enter().insert(\"path\", \"g\").attr(\"class\", \"link link_\" + toLeft)\n\t\t\t.attr(\"d\", function(d) {\n\t\t\t\tvar o = {x: source.x0, y: source.y0};\n\t\t\t\treturn diagonal({source: o, target: o});\n\t\t\t})\n\t\t\t.style(\"fill\", \"none\").style(\"stroke\", basicStyles.branch.stroke).style(\"stroke-width\", basicStyles.branch[\"stroke-width\"]);\n\n\t\tvar linkUpdate = linkEnter.merge(link);\n\t\t\n\t\t// Transition links to their new position.\n\t\tlinkUpdate.transition().duration(duration).attr(\"d\", diagonal);\n\n\t\t// Transition exiting nodes to the parent's new position.\n\t\tvar linkExit = link.exit().transition().duration(duration)\n\t\t\t.attr(\"d\", function(d) {\n\t\t\t\tvar o = {x: source.x0, y: source.y0};\n\t\t\t\treturn diagonal({source: o, target: o});\n\t\t\t})\n\t\t\t.remove();\n\n\t\t// Stash the old positions for transition.\n\t\tnodes.forEach(function(d) {\n\t\t\td.x0 = d.x;\n\t\t\td.y0 = d.y;\n\t\t});\n\n\t\tthis.updateContinuations();\t\t\n\t};\n\t\n\tthis.drawRects = function() {\n\t\tvar which = showTokenExtra ? \"inline\" : \"none\";\n\t\tvis.selectAll(\".tokenExtra\").attr(\"display\", which);\n\n\t\tvar node = vis.selectAll(\"g.node_\" + toLeft);\n\t\t\n\t\tnode.selectAll(\"rect\").remove(); // remove previous rects\n\n\t\tvar nodeRect = node\n\t\t\t\t.insert(\"rect\", \"text\")\n\t\t\t\t.attr(\"class\", \"nodeRect\")\n\t\t\t\t.attr(\"height\", function() {\n\t\t\t\t\tvar height = this.parentElement.getBBox().height;\n\t\t\t\t\tif (height < 6) {\n\t\t\t\t\t\t// end of branch, need to prevent negative height\n\t\t\t\t\t\theight = 6.1;\n\t\t\t\t\t}\n\t\t\t\t\treturn height - 6;\n\t\t\t\t})\n\t\t\t\t.attr(\"y\", function(d) {\n\t\t\t\t\tif (!d.parent) {\n\t\t\t\t\t\treturn -0.5 * this.parentElement.getBBox().height / 2 - 2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn -0.5 * this.parentElement.getBBox().height / 2;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.attr(\"width\", function() {\n\t\t\t\t\treturn this.parentElement.getBBox().width;\n\t\t\t\t})\n\t\t\t\t.attr(\"x\", function(d) {\n\t\t\t\t\tvar parentW = this.parentElement.getBBox().width;\n\t\t\t\t\tif (!d.parent) {\n\t\t\t\t\t\treturn -0.33333 * parentW;\n\t\t\t\t\t}\n\t\t\t\t\tif (!toLeft) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\treturn -0.5 * parentW;\n\t\t\t\t})\n\t\t\t\t// .style(\"stroke-opacity\", 1e-6)\n\t\t\t\t.style(\"stroke-opacity\", 1).style(\"stroke-width\", 1)\n\t\t\t\t.style(\"stroke\", function(d) {\n\t\t\t\t\treturn rectBorderColor(d.data.info);\n\t\t\t\t}).style(\"fill\", function(d) {\n\t\t\t\t\treturn rectColor(d.data.info);\n\t\t\t\t}).style(\"fill-opacity\", function(d) {\n\t\t\t\t\treturn 1;\n//\t\t\t\t\tif (!d.parent && !toLeft) {\n//\t\t\t\t\t\treturn 1e-6;\n//\t\t\t\t\t} else {\n//\t\t\t\t\t\treturn 1;\n//\t\t\t\t\t}\n\t\t\t\t});\n\t};\n\n\tvar that = this;\n\t\n\t// Toggle children on click.\n\tfunction click(event, d, i) {\n\t\tif (event.altKey) {\n\t\t\tthat.handleAltPress(d, i);\n\t\t\t// that.showTokenExtras(showTokenExtra);\n\t\t\treturn;\n\t\t}\n\t\tif (event.shiftKey) {\n\t\t\tthat.handleShiftPress(d, i);\n\t\t\t// that.showTokenExtras(showTokenExtra);\n\t\t\treturn;\n\t\t}\n\n\t\tthat.handleClick(d, i);\n\t\t\n\t\tif (!d.parent) {\n\t\t\treturn;\n\t\t}\n\t\tif (that.continuationIDs != d.data.info.ids) {\n\t\t\tthat.setIds(d.data.info.ids);\n\t\t\tthat.clickedNode = d.id;\n\t\t\tdispatch.call('idsUpdated', that);\n\t\t}\n\n\t\tcollapseSiblings(d); // CC new\n\t\t/*\n\t\t * if (d.children) { d._children = d.children; d.children = null; }\n\t\t * else { d.children = d._children; d._children = null; }\n\t\t * that.update(d);\n\t\t */\n\t\ttoggleChildren(d, true);\n\t}\n\n\tfunction toggleChildren(d, update) { // we only update the clicked\n\t\t\t\t\t\t\t\t\t\t\t// node, not recursively\n\t\t// collapseSiblings(d); //CC we don't do this here, since after the\n\t\t// top level there's no point\n\n\t\tif (d.children) {\n\t\t\tif (d.children && d.children.length == 1) {\n\t\t\t\ttoggleChildren(d.children[0], true); // need true to make\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// sure we toggle\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// all the way down\n\t\t\t}\n\t\t\td._children = d.children;\n\t\t\td.children = null;\n\n\t\t} else {\n\t\t\td.children = d._children;\n\t\t\td._children = null;\n\n\t\t\t// expand all if there is only one path\n\t\t\tif (d.children && d.children.length == 1) {\n\t\t\t\ttoggleChildren(d.children[0], false);\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tthat.update(d);\n\t\t}\n\t}\n\n\tthis.setIds = function(ids) {\n\t\tthat.continuationIDs = ids;\n\t};\n\tthis.updateContinuations = function() {\n\t\tvis.selectAll(\"g.node_\" + toLeft + \" text\")\n\t\t\t.classed(\"continuation\", function(d) {\n\t\t\t\t\tvar isContinuation = overlap(d.data.info.ids, that.continuationIDs || {});\n\t\t\t\t\treturn isContinuation;\n\t\t\t})\n\t\t\t.style(\"fill\", function(d) {\n\t\t\t\tif (d3.select(this).classed(\"continuation\")) {\n\t\t\t\t\treturn continuationColor(d.data.info);\n\t\t\t\t}\n\t\t\t\treturn \"#444\"; // default text color\n\t\t\t}); // this is duplicated from above, nodeUpdate\n\t};\n\n\tthis.search = function(searchRE) {\n\t\tvis.selectAll(\"g.node text\").classed(\"foundText\", function(d) {\n\t\t\tvar what = searchRE.test(nodeText(d.data.info));\n\t\t\treturn what;\n\t\t});\n\t};\n\n\tthis.clearSearch = function() {\n\t\tvis.selectAll(\"g.node text\").classed(\"foundText\", false);\n\t};\n\n\tthis.showTokenExtras = function(show) {\n\t\tif (arguments.length == 0) {\n\t\t\treturn showTokenExtra;\n\t\t}\n\t\tshowTokenExtra = show;\n\n\t\tthis.drawRects();\n\t\treturn this;\n\t};\n\n\tthis.setRectColor = function(rectColorFun) {\n\t\tif (arguments.length == 0) {\n\t\t\treturn rectColor;\n\t\t}\n\t\trectColor = rectColorFun;\n\t\tthis.drawRects();\n\t\treturn this;\n\t};\n\n\t// /////////////\n\tfunction positionX(x) {\n\t\treturn toLeft ? -x : x;\n\t}\n\tfunction positionY(y) {\n\t\treturn y;\n\t}\n\n\t// //default modifier handlers\n\tthis.handleAltPress = function() {\n\t};\n\tthis.handleShifttPress = function() {\n\t};\n\tthis.handleClick = function() {\n\t};\n\n\tthis.readJSONTree(data);\n\treturn this;\n};\n\n// /////////////////////////////// tree sorting functions\n/**\n * function to sort the nodes (case insenstive) by a field in the\n * information object\n * \n * @param fld\n *            the field to sort by\n */\ndoubletree.sortByStrFld = function(fld) {\n\tvar field = fld;\n\treturn function(a, b) {\n\t\tvar aUndefined = (undefined == a.data.info[field]);\n\t\tvar bUndefined = (undefined == b.data.info[field]);\n\t\tif (aUndefined && bUndefined) {\n\t\t\treturn 0;\n\t\t} else if (aUndefined) {\n\t\t\treturn -1;\n\t\t} else if (bUndefined) {\n\t\t\treturn 1;\n\t\t}\n\t\tvar aVal = a.data.info[field].join(\" \").toLowerCase();\n\t\tvar bVal = b.data.info[field].join(\" \").toLowerCase();\n\t\tif (aVal < bVal) {\n\t\t\treturn -1;\n\t\t} else if (aVal > bVal) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t};\n};\n/**\n * function to sort the nodes according to the count field in the\n * information object\n */\ndoubletree.sortByCount = function() {\n\treturn function(a, b) {\n\t\treturn b.data.info.count - a.data.info.count;\n\t};\n};\n\n/**\n * function to sort the nodes according to the continuations field in the\n * information object\n */\ndoubletree.sortByContinuations = function() {\n\treturn function(a, b) {\n\t\treturn b.data.info.continuations - a.data.info.continuations;\n\t};\n};\n\n// /////////////////////////////// some tree filtering functions\n/**\n * function to filter the nodes according to a minimum for the count field\n * \n * @param n\n *            the minimum count to include\n */\ndoubletree.filterByMinCount = function(n) {\n\treturn function(inf) {\n\t\treturn inf.count >= n;\n\t};\n};\n\n/**\n * function to filter the nodes according to a maximum for the count field\n * \n * @param n\n *            the maximum count to include\n */\ndoubletree.filterByMaxCount = function(n) {\n\treturn function(inf) {\n\t\treturn inf.count <= n;\n\t};\n};\n\n/**\n * function to filter the nodes according to the \"POS\" field (if it exists)\n * \n * @param n\n *            a string for a regular expression of the POS values to include\n */\ndoubletree.filterByPOS = function(pos) {\n\tvar re = new RegExp(pos);\n\treturn function(inf) {\n\t\treturn inf[\"POS\"] && inf[\"POS\"].filter(function(p) {\n\t\t\treturn p.search(re) > -1;\n\t\t}).length > 0; // end of ng has no POS\n\t};\n};\n\n// /////////////////////////////// formatting functions\n\n// doubletree.nodeText = function(info) {\n// return doubletree.tokenText(info); //default\n// }\n\n// extracts a field\n/**\n * return the value of a field in the provided information object\n * \n * @param info\n *            the information object\n * @param the\n *            field to get\n * @returns the value of the field in the information object\n */\ndoubletree.fieldText = function(info, fieldName) {\n\treturn info[fieldName];\n};\n// extracts the \"token\" field\n/**\n * convenience function to return the value of the \"token\" field (if it\n * exists). The same as doubletree.fieldText(info, \"token\")\n * \n * @param info\n *            the information object\n * @returns the value of the \"token\" field of the information object\n */\ndoubletree.tokenText = function(info) {\n\tvar tokenText = '';\n\tif (info.token !== undefined) {\n\t\ttokenText = info.token;//info.token[0]; // don't return all token values, just the first\n\t}\n\treturn tokenText;\n};\n\n/**\n * converts an information object to a string\n * \n * @param the\n *            information object\n * @returns a string with one key/value pair per line\n */\ndoubletree.infoToText = function(info) {\n\tvar what = \"\";\n\tfor ( var infp in info) {\n\t\tif (infp == \"ids\" || infp == \"origIDs\") {\n\t\t\twhat += infp + \"\\t:\\t\" + Object.keys(info[infp]).join(\",\")\n\t\t\t\t\t+ \"\\n\";\n\t\t} else {\n\t\t\twhat += (infp + \"\\t:\\t\" + info[infp] + \"\\n\");\n\t\t}\n\t}\n\treturn what;\n};\n// //////////////// internal utility functions\n\nfunction old_pruneTree(tree, ids) {\n\n\tif (!tree.children) {\n\t\treturn;\n\t}\n\n\tvar n = tree.children.length;\n\tfor ( var i = 0; i < n; i++) {\n\t\tvar c = tree.children[i];\n\n\t\tif (containedIn(c.info.ids, ids)) {\n\t\t\ttree.children[i] = null;\n\t\t} else {\n\t\t\told_pruneTree(c, ids);\n\t\t}\n\t}\n\ttree.children = tree.children.filter(function(c) {\n\t\treturn c != null;\n\t});\n\n\t// recalculate maxChildren\n\tvar cMax = d3.max(tree.children.map(function(c) {\n\t\treturn c.maxChildren;\n\t}));\n\ttree.maxChildren = Math.max(tree.children.length, cMax);\n}\n\nfunction new_pruneTree(tree, ids, copyIDs) {\n\n\tif (!tree.children) {\n\t\treturn;\n\t}\n\n\t// copy over original ids\n\tif (copyIDs) {\n\t\tif (!tree.info.origIDs) {\n\t\t\ttree.info.origIDs = {};\n\t\t\taddTo(tree.info.origIDs, tree.info.ids);\n\t\t\ttree.info.origCount = Object.keys(tree.info.origIDs).length;\n\t\t} else {\n\t\t\ttree.info.ids = {};\n\t\t\taddTo(tree.info.ids, tree.info.origIDs);\n\t\t\ttree.info.count = Object.keys(tree.info.ids).length;\n\t\t}\n\t}\n\n\t// adjust IDs\n\tvar idNums = Object.keys(ids);\n\tfor ( var i = 0, n = idNums.length; i < n; i++) {\n\t\tvar cid = idNums[i];\n\t\tdelete tree.info.ids[cid];\n\t}\n\ttree.info.count = Object.keys(tree.info.ids).length;\n\n\t// recurse and prune\n\tvar n = tree.children.length;\n\tfor ( var i = 0; i < n; i++) {\n\t\tvar c = tree.children[i];\n\n\t\tif (containedIn(c.info.ids, ids)) {\n\t\t\ttree.children[i] = null;\n\t\t} else {\n\t\t\tnew_pruneTree(c, ids, false);\n\t\t}\n\t}\n\ttree.children = tree.children.filter(function(c) {\n\t\treturn c != null;\n\t});\n\ttree.info.continuations = tree.children.length;\n\n\t// recalculate maxChildren\n\tvar cMax = d3.max(tree.children.map(function(c) {\n\t\treturn c.maxChildren;\n\t}));\n\ttree.maxChildren = Math.max(tree.children.length, cMax);\n}\n\nfunction restoreTree(tree) {\n\n\tif (tree.info.origCount) { // otherwise tree was suppressed, so its ids\n\t\t\t\t\t\t\t\t// never got switched around\n\t\t// restore originals\n\t\ttree.info.ids = {};\n\t\taddTo(tree.info.ids, tree.info.origIDs);\n\t\t// delete tree.info.origIDs;\n\t\ttree.info.count = tree.info.origCount;\n\t\t// delete tree.info.origCount;\n\n\t\tvar n = tree.children.length;\n\t\ttree.info.continuations = n;\n\t\tfor ( var i = 0; i < n; i++) {\n\t\t\tvar c = tree.children[i];\n\t\t\trestoreTree(c);\n\t\t}\n\t}\n\n}\n\n// do the keys in o1 and o2 overlap\nfunction overlap(o1, o2) {\n\tfor ( var k in o1) {\n\t\tif (k in o2) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n// are all the keys in o1 also in o2\nfunction containedIn(o1, o2) {\n\tif (!o1 || !o2) {\n\t\treturn false;\n\t}\n\tfor ( var k in o1) {\n\t\tif (!(k in o2)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\n// add key/vals of o2 to o1 and return o1; (top level key-value only, o2\n// values maintained over o1)\n// same as in Trie.js\nfunction addTo(o1, o2) {\n\tfor ( var k in o2) {\n\t\to1[k] = o2[k];\n\t}\n}\n\nfunction noOp() {\n}\n\n// ////////////////\n\n})();","/* (This is the new BSD license.)\n* Copyright (c) 2012-2014, Chris Culy\n* All rights reserved.\n*\n* Redistribution and use in source and binary forms, with or without\n* modification, are permitted provided that the following conditions are met:\n*     * Redistributions of source code must retain the above copyright\n*       notice, this list of conditions and the following disclaimer.\n*     * Redistributions in binary form must reproduce the above copyright\n*       notice, this list of conditions and the following disclaimer in the\n*       documentation and/or other materials provided with the distribution.\n*     * Neither the name of the Chris Culy nor the \n*\t\tnames of its contributors may be used to endorse or promote \n*\t\tproducts from this software without specific prior written permission.\n*\n* THIS SOFTWARE IS PROVIDED BY Chris Culy\n* ``AS IS'' AND ANY OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, \n* THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE \n* ARE DISCLAIMED. IN NO EVENT SHALL Chris Culy\n* BE LIABLE FOR ANY, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR \n* CONSEQUENTIAL DAMAGES INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE \n* GOODS OR SERVICES; OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER \n* CAUSED AND ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR \n* TORT INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF \n* THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n\"use strict\";\nvar doubletree = doubletree || {};\n\n(function(){\n    \n    /**\n     * @class doubletree.Trie\n     * This is the class for the specialized trie that is the data for {@link doubletree.DoubleTree}.\n * The Trie will get pieces of data that contain fields. Some (possibly all) of those fields will be used for distinguishing among items.\n * For example, we might have an \"author\" field, but not use it when distinguishing among items for the Trie.\n * @param caseSensitive are the elements in the first distinguishing field compared in a case sensitive fashion\n * @param fldNames the names of the fields\n * @param fldDelim the field delimiter\n * @distinguishingFldsArray the distinguishing fields\n * @undistinguishedRoot true if the root should be calculated without using the distinguishing fields\n */\ndoubletree.Trie = function(caseSensitive, fldNames, fldDelim, distinguishingFldsArray, undistinguishedRoot) {\n    var endNG = \" \";\n    var rootName = \"_root_\";\n    var noCase = (! caseSensitive) && true;\n    if (! fldNames) {\n        fldNames = [\"item\"];\n    }\n    var fieldNames = fldNames;\n    if (! fieldDelim) {\n        fieldDelim = \"\\t\"; //default\n    }\n    var fieldDelim = fldDelim;\n    if (! distinguishingFieldsArray) {\n        distinguishingFieldsArray = [ fieldNames[0] ];\n    }\n    var distinguishingFieldsArray = distinguishingFldsArray;\n    var undistinguishedRt = undistinguishedRoot;\n    if (undefined == undistinguishedRt) {\n        undistinguishedRt = true; //TBD: check to make sure this doesn't break anything\n    }\n    \n    var trie = new TrieNode(rootName,-1,0);\n    \n    /** @private */\n    function TrieNode(item, id, count) {\n        this.id = id;\n        this.count = count;        \n        this.info = {\"count\":count, \"ids\":{}};\n        \n        if (item == null) {\n            this.item = rootName;        \n        } else {\n            this.item = item;\n            this.info.ids = {};\n            this.info.ids[id] = true;\n            var flds = item.split(fieldDelim);\n            for(var i in flds) {\n                this.info[ fieldNames[i] ] = [ flds[i] ];\n            }\n        }\n        this.nodes = {};\n        \n         /** @private */\n        this.addNgram = function(itemArray, id, count) {\n            if (! count) {\n                count = 1;\n            }\n            var thisItem, thisKey;\n            if (itemArray.length > 0) {\n                thisItem = itemArray.shift();\n                    \n                var theseFlds = thisItem.split(fieldDelim);\n\n                if (undistinguishedRt && this.item == rootName) {\n                    thisKey = \"\";\n                } else {\n                    thisKey = theseFlds.filter(function(f,i) {\n                            return distinguishingFieldsArray.indexOf( fieldNames[i] ) > -1;\n                        })\n                    .map(function(f) {\n                            if (noCase) {\n                                return f.toLocaleLowerCase();\n                            }\n                            return f;\n                        })\n                    .join(fieldDelim);\n                }\n                \n            } else {\n                thisItem = endNG;\n                thisKey = thisItem;\n            }\n            \n            var subTrie;\n            if (thisKey in this.nodes && this.nodes[thisKey] instanceof TrieNode) { //we need the instanceof TrieNode so we can override Object properties -- hope that none are already arrays\n                subTrie = this.nodes[thisKey];\n                subTrie.info.count += count;\n                subTrie.info.ids[id] = true;\n                \n                for(var f in theseFlds) {\n                    var thisFld = theseFlds[f];\n                    if (subTrie.info[ fieldNames[f] ].indexOf( thisFld ) == -1 ){\n                        subTrie.info[ fieldNames[f] ].push(thisFld);\n                    }                \n                }\n                \n                \n            } else {\n                subTrie = new TrieNode(thisItem, id, count);            \n                this.nodes[thisKey] = subTrie;\n            }\n            if (thisItem != endNG) {\n                subTrie.addNgram(itemArray,id, count);\n            }\n        };\n            \n         /** @private */\n        this.getUniqRoot = function() {\n            if (this.item == rootName) {\n                var children = Object.keys(this.nodes);\n                if (children.length == 1) {\n                    return this.nodes[ children[0] ];\n                }\n            }\n        \n            return this;\n        };\n        \n        /** @private */\n        this.toTree = function(filterFuns) {\n            \n            function toTreeHelper(filterFuns, descendentLevel, trieData) {\n                \n                var what = {\"children\":[]};\n                what.name = trieData.item;\n                what.info = {};\n                for(var k in trieData.info) {\n                    if (typeof(trieData.info[k]) === 'Object') {\n                        what.info[k] = {};\n                        for(var k2 in trieData.info[k]) {\n                            what.info[k][k2] = this.info[k][k2];\n                        }\n                    } else {\n                        what.info[k] = trieData.info[k];\n                    }\n                }\n                what.pruned = {};\n                \n                \n                for(var item in trieData.nodes) {\n                    var itemNode = trieData.nodes[item];\n                    var thisFilter = filterFuns[descendentLevel];            \n                    if ( ! thisFilter || (thisFilter && thisFilter(itemNode.info)) ) {\n                        what.children.push( toTreeHelper(filterFuns, descendentLevel +1, itemNode) );\n                        if (itemNode.pruned != {}) {\n                            addTo(what.pruned, itemNode.pruned);\n                        }\n                    } else {\n                        addTo(what.pruned, itemNode.info.ids);\n                    }\n                }\n        \n                what.info.continuations = what.children.length;\n                //this is to record info we need for sizing the tree, since D3 automatically scales to fit, which is not what we want\n                //we also need to keep track of the minimum count (the root always has the max, of course), for scaling\n                if (what.children.length == 0) {\n                   what.children = null; //the trees expect null if there are no children, not the empty array. Odd, but true.\n                   what.maxChildren = 0;\n                   \n                   if (what.name) {\n                    what.maxLen = what.name.length;\n                   } else {\n                    what.maxLen = 0;\n                   }\n                   \n                   what.minCount = what.info.count;\n                   //what.maxChildren = 0; //new\n                   \n                } else {\n                    var cMax = d3.max( what.children.map(function(c) {return c.maxChildren;}) );\n                    what.maxChildren = Math.max(what.children.length, cMax);\n                    \n                    var maxLen = d3.max( what.children.map(function(c) {return c.maxLen;}));\n                    what.maxLen = Math.max(maxLen, what.name.length);\n                    \n                    what.minCount = d3.min( what.children.map(function(c) {return c.minCount;})); //the children are always <= the parent\n                }\n                return what;\n            }\n            \n            if (! filterFuns ) {\n                filterFuns = [];\n            }\n            \n            var trieData = JSON.parse(JSON.stringify(this)); //CuC make a copy of the data, to keep the real trie immutable\n        \n            return toTreeHelper(filterFuns, 0, trieData);\n        };\n    }\n    \n    \n    \n    \n    /**\n     * Add an ngram to the Trie\n     * @param itemArray an array of delimited items (the ngrams)\n     * @param id an id for this ngram \n     * @param count a count for this ngram. Default is 1\n     */\n    this.addNgram = function(itemArray, id, count) {trie.addNgram(itemArray, id, count);};\n    \n    /**\n     * get the unique root of this Trie. Used only by {@link DoubleTree}\n     * @returns a new Trie with a unique item as the root\n     */\n    this.getUniqRoot = function() {\n        var what = new doubletree.Trie((!noCase), fieldNames, fieldDelim, distinguishingFieldsArray);\n        what.trie( trie.getUniqRoot() );\n        return what;\n    };\n    \n    /**\n     * convert the Trie to a tree structure for display. Used only by {@link DoubleTree}\n     * @param filterFuns the filtering functions to apply to the tree see {@link DoubleTree.filters}\n     * @param descendentLevel the current level we are filtering\n     * @returns the tree\n     */\n    this.toTree = function(filterFuns, descendentLevel) {return trie.toTree(filterFuns, descendentLevel);};\n    \n    /**\n     * serialize the Trie as a JSON string\n     * @returns the JSON string representation of the Trie\n     */\n    this.serialize = function() {\n        return JSON.stringify(this);\n    };\n    \n    /**\n     * make this Trie have the values of a previously serialized Trie see {@link #serialize}\n     */\n    this.deserialize = function(serialized) {\n        var obj = JSON.parse(serialized);\n        \n        endNG = obj.endNG();\n        rootName = obj.rootName();\n        noCase = obj.caseSensitive();\n        fieldNames = obj.fieldNames();\n        fieldDelim = obj.fieldDelim();\n        distinguishingFieldsArray = obj.distinguishingFieldsArray();\n        trie = obj.trie();\n        \n    };\n    \n    //getters -- the properties are readonly, set in constructor\n    \n    //private, only used in deserialization\n    /** @private */\n    this.endNG = function() {\n        return endNG;\n    };\n    //private, only used in deserialization\n    /** @private */\n    this.rootName = function() {\n        return rootName;\n    };\n    \n    //private, also a setter, only used in deserialization and getUniqRoot;\n    /** @private */\n    this.trie = function(value) {\n      if (arguments.length > 0) {\n        trie = value;\n      }\n      return trie;\n    };\n    \n    /**\n     * @returns whether this Trie uses case sensitive comparison\n     */\n    this.caseSensitive = function() {\n        return ! noCase;\n    };\n    \n    /**\n     * get the field names in the data\n     * @returns the field names in the data\n     */\n    this.fieldNames = function() {\n        return fieldNames;\n    };\n    \n    /**\n     * get the field delimiter for the data\n     * @returns the field delimiter for the data\n     */\n    this.fieldDelim = function() {\n        return fieldDelim;\n    };\n    \n    /**\n     * get the distinguishing fields for the data\n     * @returns the distinguishing fields for the data\n     */\n    this.distinguishingFieldsArray = function() {\n        return distinguishingFieldsArray;\n    };\n    \n    //add key/vals of o2 to o1 and return o1; (top level key-value only, o2 values maintained over o1)\n    /** @private */\n    function addTo(o1, o2) {\n        for(var k in o2) {\n            o1[k] = o2[k];\n        }\n    }\n\n    \n};  \n\n})();\n","/**\r\n * @param {object} config\r\n * @param {Voyant.panel.TermsRadio} config.parent\r\n * @param {Ext.dom.Element} config.container\r\n * @param {boolean} config.showSlider\r\n */\r\nfunction TermsRadio(config) {\r\n\tthis.parent = config.parent;\r\n\tthis.container = config.container;\r\n\tthis.isSliderVisible = config.showSlider == undefined ? true : config.showSlider;\r\n\t\r\n\tthis.chart = null;\r\n\t\r\n\tthis.absMaxFreq = 0;\r\n\tthis.absMinFreq = 0;\r\n\tthis.allData = [];\r\n\t\r\n\tthis.continueTransition = true;\r\n\tthis.counterSeries = [];\r\n\tthis.displayData = [];\r\n\tthis.dragged = false;\r\n//\tthis.intervalIdArray = [];\r\n\tthis.isTransitioning = false;\r\n\tthis.lastSlippery = null;\r\n\tthis.lastSticky = null;\r\n\tthis.maxFont = 30;\r\n\tthis.minFreq = 0;\r\n\tthis.numDataPoints = 0;\r\n\tthis.numVisPoints = 5;\r\n\tthis.overlayQueue = [];\r\n\tthis.records = 0;\r\n\tthis.recordsLength = 0;\r\n\tthis.reselectTop = false;\r\n\tthis.shiftCount = 0;\r\n\tthis.sliderDragSum = 0;\r\n\tthis.titlesArray = [];\r\n\tthis.transitionCall = 'draw'; //possible calls 'draw', 'redraw', 'left', and 'right'\r\n\tthis.valFraction = 1;\r\n\tthis.win = 0;\r\n\t\r\n\t//window padding dimensions, b - bottom, l - left, r - right, t - top\r\n\tthis.bPadding = 25;\r\n\tthis.lPadding = 40;\r\n\tthis.rPadding = 20;\r\n\tthis.tPadding = 10;\r\n\t\r\n\tthis.sliderHeightRatio = 0.1; // slider/container height ratio\r\n\tthis.sliderHeight = 0; // set in init and resize\r\n\tthis.sliderBPadding = 10;\r\n\t\r\n\t//tracks largest dimensions, used in resizing\r\n\tthis.largestW = 0;\r\n\tthis.largestH = 0;\r\n\t\r\n\tthis.xAxisEl = undefined;\r\n\tthis.xAxis = d3.axisBottom();\r\n\tthis.xScale = d3.scaleLinear();\r\n\tthis.xSliderScale = d3.scaleLinear();\r\n\t\r\n\tthis.yAxisEl = undefined;\r\n\tthis.yAxis = d3.axisLeft();\r\n\tthis.yScale = d3.scaleLinear();\r\n\tthis.ySliderScale = d3.scaleLinear();\r\n\t\r\n\tthis.fontScale = d3.scaleLinear();\r\n\tthis.opacityScale = d3.scaleLinear();\r\n\t\r\n\tthis.container.on('resize', this.doResize, this);\r\n}\r\n\r\nTermsRadio.prototype = {\r\n\tconstructor: TermsRadio\r\n\t\r\n\t,loadRecords: function(records) {\r\n\t\tif (records.length > 0) {\r\n\t\t\tthis.initData(records);\r\n\t\t\tthis.prepareData();\r\n\t\t\t//for shiftcount > 0 exclusively\r\n\t\t\tvar len = this.shiftCount;\r\n\t\t\twhile(len-- > 0){\r\n\t\t\t//for(var j = 0; j < this.shiftCount; j++){\r\n\t\t\t\tthis.displayData.shift();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.chart != null) {\r\n\t\t\tthis.redraw();\r\n\t\t} else {\r\n\t\t\tthis.initializeChart();\r\n\t\t}\r\n\t}\r\n\r\n\t,highlightQuery: function(query, sticky) {\r\n\t\tvar docId = null;\r\n\t\tif (this.parent.getApiParam(\"mode\") === 'document') {\r\n\t\t\tdocId = this.parent.getCorpus().getDocument(0).getId();\r\n\t\t}\r\n\t\tvar info = {wordString : query, docId : docId};\r\n\t\tvar paramsBundle = this.buildParamsBundle(info);\r\n\t\tif (sticky) {\r\n\t\t\tthis.manageOverlaySticky(paramsBundle);\r\n\t\t} else {\r\n\t\t\tthis.manageOverlaySlippery(paramsBundle);\r\n\t\t}\r\n\t}\r\n\t\r\n\t,highlightRecord: function(record, sticky) {\r\n\t\tvar info = {wordString : record.get('term'), docId : record.get('docId')};\r\n\t\tvar paramsBundle = this.buildParamsBundle(info);\r\n\t\tif (sticky) {\r\n\t\t\tthis.manageOverlaySticky(paramsBundle);\r\n\t\t} else {\r\n\t\t\tthis.manageOverlaySlippery(paramsBundle);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//\r\n\t//DATA FUNCTIONS\r\n\t//\t\r\n\r\n\t,initData: function (records) { \t\r\n\t\t//console.log(\"fn: initData\")\r\n\t\t//console.profile('profilethis')\r\n\t\tthis.records = records;\r\n\t\t\r\n\t\tthis.recordsLength = this.records.length;\r\n\t\r\n\t\tthis.numVisPoints = parseInt(this.parent.getApiParam('visibleBins'));\r\n\t\tthis.shiftCount = parseInt(this.parent.getApiParam('position'));\r\n\t\t\r\n\t\tif(this.parent.getApiParam('mode') === 'document') {\r\n\t\t\tthis.numDataPoints = this.records[0].get('distributions').length;\r\n\t\t\tvar parentBins = parseInt(this.parent.getApiParam('bins'));\r\n\t\t\tif(this.numDataPoints !== parentBins){\r\n\t\t\t\tthis.numDataPoints = parentBins;\r\n\t\t\t\tthis.loadStore();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.numDataPoints = this.records[0].get('distributions').length;\r\n\t\t}\r\n\t\t\r\n    \tthis.counterSeries = [];\r\n    \tvar transferArray = [];\r\n\t\t\t\r\n    \t//find max frequency value\r\n    \tthis.absMaxFreq = 0;\r\n\t\tfor( var k = 0; k < this.numDataPoints; k++ ) { \r\n\t        for( var p = 0; p < this.recordsLength; p++ ) {\r\n\t        \tif(this.records[p].get('distributions')[k] > this.absMaxFreq) {\r\n\t        \t\tthis.absMaxFreq = this.records[p].get('distributions')[k];\r\n\t        \t}\r\n\t        }\r\n\t\t}\r\n\t\t\t    \r\n\t\t//find the absolute minimum frequency value\r\n\t\t//first start by setting the minimum frequency to the maximum frequency\r\n\t\tthis.absMinFreq = this.absMaxFreq;\r\n\t\tfor( var k = 0; k < this.numDataPoints; k++ ) { \r\n\t        for( var p = 0; p < this.recordsLength; p++ ) {\r\n\t        \tif(this.records[p].get('distributions')[k] <= this.absMinFreq && this.records[p].get('distributions')[k] !== 0) { \r\n\t        \t\tthis.absMinFreq = this.records[p].get('distributions')[k];\r\n\t        \t}\r\n\t        }\r\n\t\t}\r\n\t\t\r\n\t\t//Calculate the lower value of the y axis, must be > 0 \r\n\t\tif( this.absMinFreq < 0) {\r\n\t\t\tthis.absMinFreq = 0;\r\n\t\t}\r\n\t\t\r\n\t\tthis.minFreq = this.absMinFreq * 1.01;\r\n\t\t\r\n\t    //transfer all of the relevant data from 'records' to an array 'allData'\r\n\t\tfor( var k = 0; k < this.numDataPoints; k++ ) { \r\n\t        for( var p = 0; p < this.recordsLength; p++ ) {\r\n\t        \tvar rec = this.records[p];\r\n\t        \tvar dists = rec.get('distributions')[k];\r\n//\t        \tif (dists > this.minFreq && dists <= this.absMaxFreq) {\r\n\t        \tif (dists > 0) {\r\n\t        \t\ttransferArray.push({\r\n\t        \t\t\tfreq: dists,\r\n\t\t                wordString: rec.get('term'),\r\n\t\t                counter: k,\r\n\t\t                posInSeries: 0, \r\n\t\t                numInSeries: 0,\r\n\t\t                docId: rec.get('docId')\r\n\t\t            });\r\n\t        \t}\r\n//\t        \t} else { //do nothing\r\n//\t        \t}\r\n\t        }\r\n\t        this.counterSeries.push(transferArray);\r\n\t        transferArray = [];\r\n\t    }\r\n\t}\r\n\r\n\t,prepareData: function() {\r\n\t\t//console.log(\"fn: prepareData\")\r\n\t    var frequencySeries = [],\r\n\t    \tcopy1 = [],\r\n\t    \tcopy2 = [],\r\n\t    \tcopy3 = [],\r\n\t    \tcopy4 = [],\r\n\t    \tcheck = 0;\r\n\t\t\r\n\t\tthis.allData = [];\r\n\t\tthis.displayData = [];\r\n\t\t\r\n\t\t//set the number of points to be displayed at once\r\n\t\tif(this.numDataPoints < this.numVisPoints) {\r\n\t\t\tthis.numVisPoints = this.numDataPoints;\r\n\t\t}\r\n\t\t\r\n\t\t//adjust shiftCount if it for some reason is out of the normal range\r\n\t\tif(this.shiftCount + this.numVisPoints > this.numDataPoints){ \r\n\t\t\tthis.shiftCount = this.numDataPoints - this.numVisPoints; \r\n\t\t}\r\n\t\t\r\n\t    for( var k = 0; k < this.numDataPoints; k++ ) {\r\n\t\t\tvar check1 = 0; //add a single first data point\r\n\t    \tfor(var p = 0; p < this.counterSeries[k].length; p++ ) {\r\n\t    \t\t\t\r\n    \t\t\tvar check2 = 0; //check will make sure a data point is not added to a series more than once\r\n    \t\t\t\r\n\t    \t\t//add very first point, this is done like this so the for loop can use the .length operator\r\n\t    \t\tif(check1 === 0){\r\n\t\t\t    \tcopy1.push(this.counterSeries[k][p]);\r\n\t\t\t    \tcopy2.push({freq: this.counterSeries[k][p].freq,\r\n\t\t    \t\t\tfrequencyArray: copy1,\r\n\t\t    \t\t\tnumInSeries: 0\r\n\t\t    \t\t});\r\n\t\t    \t\tfrequencySeries.push(copy2);\r\n\t\t    \t\t\r\n\t\t    \t\tcopy1 = [];\r\n\t\t    \t\tcopy2 = [];\r\n\t\t    \t\tcheck1 = 1;\r\n\t\t    \t\tcheck2 = 1;\r\n\t    \t\t}\r\n\t    \t\t\r\n\t    \t\t//checks if a given frequency has an existing 'series' that the data point can be grouped into\r\n\t    \t\tfor( var l = 0; l < frequencySeries[k].length && check2 === 0; l++) {\r\n\t\t\t\t\tif(this.counterSeries[k][p].freq === frequencySeries[k][l].freq) {\r\n\t\t\t\t\t\tvar inSeries = 0; \r\n\t\t\t\t\t\tinSeries = frequencySeries[k][l].numInSeries;\r\n\t\t\t\t\t\tthis.counterSeries[k][p].posInSeries = ++inSeries;\r\n\t\t\t\t\t\tfrequencySeries[k][l].numInSeries = inSeries;\r\n\t\t\t\t\t\tfrequencySeries[k][l].frequencyArray.push(this.counterSeries[k][p]);\r\n\t\t\t\t\t\tcheck2 = 1;\r\n\t\t\t\t\t}\t\r\n\t    \t\t}\r\n\t    \t\t\r\n\t    \t\t//if there is no existing series then create a new one\r\n\t    \t\tif(check2 === 0) {\r\n\t\t\t\t\tcopy4.push(this.counterSeries[k][p]);\r\n\t\t    \t\tfrequencySeries[k].push({freq: this.counterSeries[k][p].freq,\r\n\t\t    \t\t\tfrequencyArray: copy4,\r\n\t\t    \t\t\tnumInSeries: 0\r\n\t\t    \t\t});\r\n\t\t    \t\tcopy4 = [];\r\n\t\t    \t\tcheck2 = 1;\r\n\t\t\t\t}\r\n\t    \t}\t\r\n\t    \t//if counterSeries[k] is empty add or there is no eligible value add an empty array to frequencySeries such that frequencySeries[k] is not undefined\r\n\t    \tif(this.counterSeries[k].length < 1 || check1 === 0) {  \r\n\t    \t\tfrequencySeries.push([]);\r\n    \t\t}\r\n\t    }\r\n\t    \r\n\t    for( var k = 0; k < this.numDataPoints; k++ ) {\r\n\t    \tfor( var p = 0; p < frequencySeries[k].length; p++) {\r\n\t    \t\t++frequencySeries[k][p].numInSeries;\r\n\t    \t\tfor( var l = 0; l < frequencySeries[k][p].frequencyArray.length; l++) {\r\n\t    \t\t\tfrequencySeries[k][p].frequencyArray[l].numInSeries = frequencySeries[k][p].numInSeries;\r\n\t    \t\t}\r\n\t    \t}\r\n\t    }\r\n\t    \r\n\t    var allDataSetup = [];\r\n\t    \r\n\t    //add the selected points into the array that will be used to display the data\r\n\t    for( var k = 0; k < this.numDataPoints; k++ ) {\r\n\t        this.allData.push({allDataInternal: frequencySeries[k],\r\n\t            outerCounter: k});\r\n\t    }\r\n\t    \r\n    \tvar displaySetup = [],\r\n    \t\ttransferArray = [];\r\n\t\t\r\n\t    //transfer the first x points (= numVisPoints, the number of points to be visualized)\r\n\t    //into an array that will be used to display the data\r\n\t    for( var k = 0; k < this.numVisPoints + this.shiftCount; k++ ) { \r\n\t        for( var p = 0; p < this.recordsLength; p++ ) {\r\n\t        \tif(this.allData[k].allDataInternal[p]) {\r\n\t\t            transferArray.push({freq: this.allData[k].allDataInternal[p].freq,\r\n\t\t                inSeries: this.allData[k].allDataInternal[p].numInSeries,\r\n\t\t                frequencyArray: this.allData[k].allDataInternal[p].frequencyArray,\r\n\t\t                dotObject: [{counter: k, freq: this.allData[k].allDataInternal[p].freq}]\r\n\t\t            });\r\n\t        \t}\r\n\t        }\r\n\t        displaySetup.push(transferArray);\r\n\t        transferArray = [];\r\n\t    }\r\n\t    \r\n\t    //add the selected points into the array that will be used to display the data\r\n\t    for( var k = 0; k < this.numVisPoints + this.shiftCount; k++ ) {\r\n\t        this.displayData.push({displayInternal: displaySetup[k],\r\n\t            outerCounter: k});\r\n\t    }\r\n\t    displaySetup = [];\r\n\t}\r\n\t\r\n\t//TRANSITION FUNCTIONS\r\n\t\r\n\t//disable forward back if moving, disable pause if stopped, disable back if at beginning\r\n\t,manageMvtButtons: function () {\r\n\t\t//console.log('fn: manageMvtButtons')\r\n\t\tthis.parent.queryById(\"play\").setPlaying(this.isTransitioning);\r\n\t\t/*\r\n\t\tif(this.isTransitioning === true) {\r\n\t\t\tthis.toggleRight.setDisabled(true);\r\n\t\t\tthis.toggleLeft.setDisabled(true);\r\n\t\t\tthis.stop.setDisabled(false);\r\n\t\t}\r\n\t\tif(this.isTransitioning === false) {\r\n\t\t\tthis.toggleRight.setDisabled(false);\r\n\t\t\tthis.toggleLeft.setDisabled(false);\r\n\t\t\tthis.stop.setDisabled(true);\r\n\t\t\t\r\n\t\t\tif(this.shiftCount === 0){\r\n\t\t\t\tthis.toggleLeft.setDisabled(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.toggleLeft.setDisabled(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(this.shiftCount + this.numVisPoints === this.numDataPoints){\r\n\t\t\t\tthis.toggleRight.setDisabled(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.toggleRight.setDisabled(false);\r\n\t\t\t}\r\n\t\t}\t\r\n\t\t*/\r\n\t}\r\n\r\n\t//provides the next value to the left     \r\n    ,nextR: function () {\r\n    \t//console.log('fn: nextR')\r\n    \t\r\n    \tvar displaySetup = [];\r\n    \t//this.displayData.shift();\r\n\t\t\r\n    \tfor( var p = 0; p < this.recordsLength; p++ ) {\r\n    \t\tif(this.allData[this.numVisPoints + this.shiftCount].allDataInternal[p]) {\r\n\t            displaySetup.push({freq: this.allData[this.numVisPoints + this.shiftCount].allDataInternal[p].freq,\r\n\t            \tinSeries: this.allData[this.numVisPoints + this.shiftCount].allDataInternal[p].numInSeries,\r\n\t            \tfrequencyArray: this.allData[this.numVisPoints + this.shiftCount].allDataInternal[p].frequencyArray,\r\n\t                dotObject: [{counter: this.numVisPoints + this.shiftCount, freq: this.allData[this.numVisPoints + this.shiftCount].allDataInternal[p].freq}]\r\n\t            });\r\n    \t\t}\r\n        }\r\n        \r\n\t    this.displayData.push({displayInternal: displaySetup, outerCounter: this.numVisPoints + this.shiftCount});\r\n\t    displaySetup = [];\r\n    }\r\n    \r\n    //verifies that data CAN be moved to the right\r\n    ,toggleRightCheck: function () {\r\n    \t//console.log(\"fn: toggleRightCheck\")\r\n    \tif(this.numVisPoints + this.shiftCount < this.numDataPoints) {\r\n    \t\t//manage transition movements and controls\r\n    \t\tthis.isTransitioning = true;\r\n    \t\tthis.continueTransition = true;\r\n    \t\tthis.manageMvtButtons();\r\n    \t\t\r\n    \t\t//draw\r\n\t        this.nextR();\r\n\t\t\tthis.shiftCount = ++this.shiftCount;\r\n\t\t\tthis.manageXScale();\r\n\t\t\tthis.parent.setApiParams({position: this.shiftCount});\r\n\t\t\tthis.transitionCall = 'right';\r\n\t\t\tthis.animateVis();\r\n\t\t\tthis.displayData.shift();\r\n\t\t} else {\r\n    \t\t//manage transition movements and controls\r\n\t\t\tthis.isTransitioning = false;\r\n\t\t\tthis.continueTransition = false;\r\n\t\t\tthis.manageMvtButtons();\r\n\t\t}\r\n    }\r\n    \r\n    //provide the next value\r\n    ,nextL: function () {\r\n    \t//console.log('fn: nextLeft')\r\n    \tvar displaySetup = [];\r\n        \r\n        for( var p = 0; p < this.recordsLength; p++ ) {\r\n        \tif(this.allData[this.shiftCount].allDataInternal[p]) {\r\n        \t\tdisplaySetup.push({freq: this.allData[this.shiftCount].allDataInternal[p].freq,\r\n\t            \tinSeries: this.allData[this.shiftCount].allDataInternal[p].numInSeries,\r\n\t            \tfrequencyArray: this.allData[this.shiftCount].allDataInternal[p].frequencyArray,\r\n\t                dotObject: [{counter: this.shiftCount, freq: this.allData[this.shiftCount].allDataInternal[p].freq}]\r\n\t            });\r\n        \t}\r\n        }\r\n\t    this.displayData.unshift({displayInternal: displaySetup, outerCounter: this.shiftCount});\r\n        displaySetup = [];\r\n    }\r\n    \r\n    /*\r\n    ,toggleLeftCheck: function () {    \t\r\n    \t//console.log(\"fn: toggleLeftCheck\")\r\n    \tif(this.shiftCount > 0) {\r\n    \t\t//manage transition movement and controls\r\n    \t\tthis.isTransitioning = true;\r\n\t\t\tthis.continueTransition = true;\r\n\t\t\tthis.manageMvtButtons();\r\n\t\t\t\r\n\t\t\t//draw\r\n\t\t\tthis.shiftCount = --this.shiftCount;\r\n\t\t\tthis.manageXScale();\r\n\t\t\tthis.parent.setApiParams({position: this.shiftCount});\r\n\t        this.nextL();\r\n\t\t\tthis.transitionCall = 'left';\r\n\t        this.animateVis();\r\n\t        this.displayData.pop();\r\n\t\t} else {\r\n\t\t\t//manage transition movements and controls\r\n\t\t\tthis.isTransitioning = false;\r\n\t\t\tthis.manageMvtButtons();\r\n\t\t}\r\n    }\r\n    */\r\n    \r\n    ,startScroll: function() {\r\n    \t//console.log(\"fn: startScroll\")\r\n    \tvar me = this;\r\n    \t\r\n    \tif(me.numDataPoints > me.numVisPoints && me.shiftCount === 0){\r\n\t\t\t//manage transition movements and controls\r\n\t\t\tme.isTransitioning = true;\r\n\t\t\tthis.manageMvtButtons();\r\n    \t\t\r\n    \t\t//repeat transition\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tme.toggleRightCheck();\r\n\t\t\t},3000);\r\n\t\t}\r\n    }\r\n    \r\n    //\r\n    //DISPLAY FUNCTIONS\r\n    //\r\n\t\r\n\t\r\n\t// init and draw everything\r\n\t,initializeChart: function() {\r\n\t\tthis.initChart();\r\n\t\t\r\n\t\tthis.drawXAxis();\r\n\t\tthis.drawYAxis();\r\n\t\tthis.drawChart();\r\n\t\tif (this.isSliderVisible) {\r\n\t\t\tthis.drawSlider();\r\n\t\t\tthis.drawVerticalSlider();\r\n\t\t\tthis.redrawSliderOverlay();\r\n\t\t}\r\n\t\tthis.transitionCall = 'draw';\r\n\t}\r\n\t\r\n    ,redraw: function() {\r\n\r\n//    \tconsole.log(\"fn: redraw\")\r\n    \tthis.transitionCall = 'redraw';\r\n    \tthis.updateFullPath();\r\n\t\tthis.redrawXAxis();\r\n\t\tthis.redrawYAxis();\r\n\t\tthis.redrawChart();\r\n\t\tif (this.isSliderVisible) {\r\n\t\t\tthis.redrawSlider();\r\n\t\t\tthis.redrawVerticalSlider();\r\n\t\t\tthis.redrawSliderOverlay();\r\n\t\t}\r\n\t\tthis.redrawChartOverlay();\r\n    }\r\n    \r\n\t,initChart: function () {\r\n\t\tvar h = this.container.getHeight(),\r\n\t\t\tw = this.container.getWidth();\r\n    \r\n\t\t//create main SVG Element\r\n\t\tvar chartSVG = Ext.DomHelper.append(this.container.down('div[class$=innerCt]'), '<svg class=\"chart\" width=\"'+w+'\" height=\"'+h+'\"></svg>');\r\n\t    this.chart = d3.select(chartSVG);\r\n\t    \r\n\t    this.setSliderHeight();\r\n\t    \r\n\t\tthis.largestW = w;\r\n\t\tthis.largestH = h - this.getSliderHeight();\r\n\t\t\r\n\t\tvar y = this.tPadding + this.getSliderHeight();\r\n\t    \t    \r\n\t    this.chart.append('clipPath')\r\n\t        .attr('id', 'clip1')\r\n\t      .append('rect')\r\n\t      \t.attr('class', 'clipping-rectangle')\r\n\t        .attr(\"x\", 0)\r\n\t        .attr(\"y\", y)\r\n\t        .attr(\"width\", w)\r\n\t        .attr(\"height\", this.largestH);\r\n\t    \r\n\t    this.chart.append('g')\r\n\t    \t.attr('class','overlay')\r\n\t    \t.attr(\"clip-path\", \"url(#clip1)\");\r\n\t    \r\n\t\t//depending on the size of display set the length that labels can be\r\n\t\tthis.setTitleLength();\r\n\t}\r\n    \r\n\t,doResize: function() {\r\n\t\tif(this.chart) {\r\n\t\t\tvar h = this.container.getHeight(),\r\n\t\t\t\tw = this.container.getWidth();\r\n\r\n\t\t\tthis.setSliderHeight();\r\n\t\t\t\r\n\t\t\tthis.largestH = h - this.getSliderHeight();\r\n\t\t\tthis.largestW = w;\r\n\t\t\t\r\n\t\t\tthis.chart.attr('height', h)\r\n\t\t\t\t.attr('width', w);\r\n\t\t\t\t\r\n\t\t\tthis.setTitleLength();\r\n\t\t\t\r\n\t\t\tthis.chart.select('rect[class=clipping-rectangle]')\r\n\t\t        .attr(\"x\", 0)\r\n\t\t        .attr(\"y\", this.tPadding + this.getSliderHeight())\r\n\t\t        .attr(\"width\", w)\r\n\t\t        .attr(\"height\", this.largestH);\r\n\t\t\r\n\t\t\tthis.redraw();\r\n\t\t}\r\n\t}\r\n\t\r\n    ,drawXAxis: function() {\r\n    \tvar me = this;\r\n    \t//svg element constants\r\n\t\tvar h = this.container.getHeight(),\r\n\t\t\tw = this.container.getWidth();\r\n    \t\r\n\t\t//initialize x scales\r\n\t\tthis.manageAllXScales();\r\n\t\t\t\r\n    \t//define X axis\r\n\t\tthis.xAxis = d3.axisBottom(me.xScale)\r\n\t\t    .ticks(Math.round(me.numVisPoints))\r\n\t\t    .tickFormat(function(d){\r\n\t\t    \tvar val;\r\n\t\t    \tif(me.parent.getApiParam('mode') === 'document') { \r\n\t\t\t\t\tval = 'Segment ' + (parseInt(d) + 1);\r\n\t\t\t\t}\r\n\t\t\t\tif(me.parent.getApiParam('mode') === 'corpus') {\r\n\t\t\t\t\tval = d + 1 + '. ' + me.titlesArray[d];\r\n\t\t\t\t}\r\n\t\t\t\treturn val;\r\n\t\t    });\r\n\t\t\r\n\t\t//draw the x-axis\r\n\t\tthis.xAxisEl = this.chart.append('g')\r\n    \t\t.attr('class', 'axisX')\r\n    \t\t.attr('transform', 'translate(0,' + (h - this.bPadding) + ')')\r\n    \t\t.call(this.xAxis);\r\n    \t\r\n//    \tthis.xAxisEl.selectAll('text')\r\n//\t\t\t.on('mouseover', function () {\r\n//\t\t\t\td3.select(this)\r\n//\t\t\t\t\t.attr('fill', 'red')\r\n//\t\t\t\t\t.style(\"font-size\", '18px');\r\n//\t\t\t})\r\n//\t\t\t.on('mouseout', function () {\r\n//\t\t\t\td3.select(this)\r\n//\t\t\t\t\t.attr('fill', 'black')\r\n//\t\t\t\t\t.style(\"font-size\", '11px');\r\n//\t\t\t});\r\n\t\tthis.styleXAxis();\r\n    }\r\n    \r\n    ,styleXAxis: function() {\r\n    \tthis.xAxisEl.selectAll('text')\r\n\t        .style('font-family', 'sans-serif')\r\n\t        .style('font-size', '11px');\r\n\r\n\t    this.xAxisEl.selectAll('line')\r\n\t        .style('fill','none')\r\n\t        .style('stroke','black')\r\n\t        .style('shape-rendering', 'crispEdges');\r\n\t        \r\n\t    this.xAxisEl.selectAll('path')\r\n\t        .style('fill','none')\r\n\t        .style('stroke','black')\r\n\t        .style('shape-rendering', 'crispEdges');\r\n    }\r\n    \r\n    ,redrawXAxis: function() {\r\n    \tthis.chart.selectAll('g[class=axisX]')\r\n\t\t\t.remove();\r\n\t\t\r\n\t\tthis.drawXAxis();\r\n    }\r\n    \r\n    ,drawYAxis: function() {\r\n    \tvar me = this;\r\n    \t\r\n    \t//svg element constants\r\n\t\tvar h = this.container.getHeight(),\r\n\t\t\tw = this.container.getWidth();\r\n\t\t\r\n\t\t//initialize Y scales\r\n\t\tthis.manageAllYScales();\r\n    \t\r\n    \tvar yTicksScale = d3.scaleLinear()\r\n\t\t\t.domain([200,700])\r\n\t\t\t.range([5,15]);\r\n\t\t\t\r\n\t\tvar numberFormat = d3.format(\".2r\");\r\n\t\tfunction logFormat(d) {\r\n\t\t\tvar x = Math.log(d) / Math.log(10) + 1e-6;\r\n\t\t\treturn Math.abs(x - Math.floor(x)) < 0.7 ? numberFormat(d) : \"\";\r\n\t\t} \r\n\t\t\r\n\t\tthis.yAxis = d3.axisLeft(me.yScale)\r\n\t    \t.ticks(yTicksScale(h))\r\n\t    \t.tickFormat(logFormat)\r\n\t\t\t.tickSize(-w + this.rPadding + this.lPadding);\r\n\t\t\r\n\t\t//draw the y-axis\r\n\t\tthis.yAxisEl = this.chart.append('g')\r\n\t    \t.attr('class', 'axisY')\r\n\t    \t.attr('transform', 'translate(' + this.lPadding + ',0)')\r\n\t    \t.call(this.yAxis);\r\n\t\t\r\n\t    this.yAxisEl.selectAll('text')\r\n\t        .style('font-family', 'sans-serif')\r\n\t        .style('font-size', '11px');\r\n\t    \r\n\t    //controls horizontal grid line-opacity\r\n\t    this.yAxisEl.selectAll('line')\r\n\t        .style('fill','none')\r\n\t        .style('stroke','black')\r\n\t        .style('shape-rendering', 'crispEdges')\r\n\t        .style('stroke-opacity', 0.05);\r\n\t        \r\n\t    this.yAxisEl.selectAll('path')\r\n\t        .style('fill','none')\r\n\t        .style('stroke','black')\r\n\t        .style('shape-rendering', 'crispEdges');\r\n    }\r\n    \r\n    ,redrawYAxis: function() {\r\n    \tthis.chart.selectAll('g[class=axisY]')\r\n\t\t\t.remove();\r\n\t\t\r\n\t\tthis.drawYAxis();\r\n    }\r\n    \r\n    ,drawChart: function() {\r\n    \tvar me = this;\r\n    \t\r\n    \t//create graph text\r\n\t    //attach the nested data to svg:g elements\r\n\t\tvar counterSeriesDiv = this.chart.selectAll('g[class=section]')\r\n\t        .data(me.displayData, function(d) { return d.outerCounter; })\r\n\t      .enter().append('g')\r\n\t        .attr('class', 'section')\r\n\t        .attr(\"clip-path\", \"url(#clip1)\");\r\n\t\t\r\n\t\tvar frequencySeriesDiv = counterSeriesDiv.selectAll('g')\r\n\t\t\t.data(function(d) { return d.displayInternal; })\r\n\t      .enter().append('g')\r\n\t        .attr('class', 'frequencies')\r\n\t        .on('mouseover', function() {\r\n\t\t\t\td3.select(this).style('fill', 'red');\r\n\t\t\t})\r\n\t\t\t.on('mouseout', function() {\r\n\t            d3.select(this).style('fill', 'black');\r\n\t\t\t});\r\n\t             \r\n        //attach the frequency data to data points \r\n\t\tvar dataPoint = frequencySeriesDiv.selectAll('text')\r\n    \t\t.data(function(d) { return d.frequencyArray; })\r\n\t\t  .enter().append('text')\r\n\t        .attr('class', function(d) {\r\n\t        \treturn me.getSelectorFromTerm(d.wordString);\r\n\t        })\r\n\t    \t.attr('x', function (d) {\r\n\t    \t\tvar startPoint = (0.5 / d.numInSeries) - 0.5\r\n\t\t\t\t\t,valueRange = (d.posInSeries / d.numInSeries * 0.8)\r\n\t\t\t\t\t,x = d.counter + me.callOffset() + startPoint + valueRange; \r\n\t\t\t\treturn me.xScale(x);\r\n\t\t\t})\r\n\t    \t.attr('y', function (d) { \r\n\t\t\t\tvar y = d.freq;\r\n\t\t\t\treturn me.yScale(y);\r\n\t    \t})\r\n\t    \t.attr('text-anchor', 'middle')\r\n\t    \t.attr('transform', function (d) {\r\n\t    \t\tvar startPoint = (0.5 / d.numInSeries) - 0.5\r\n\t\t\t\t\t,valueRange = (d.posInSeries / d.numInSeries * 0.8)\r\n\t\t\t\t\t,x = d.counter + me.callOffset() + startPoint + valueRange\r\n\t\t\t\t\t,y = d.freq;\r\n\t    \t\treturn 'translate(0, 0) rotate(-20 ' + me.xScale(x) + ' '+ me.yScale(y) + ')';\r\n\t    \t})\r\n\t    \t.style('font-size', function(d) { return me.fontScale(d.freq) + 'px'; })\r\n\t    \t.style('fill-opacity', function(d) { return me.opacityScale(d.freq); })\r\n\t        .text(function(d) { return d.wordString; })\r\n\t        .on('mouseover', function(d) { \r\n\t \t        d3.select(this).style('cursor', 'pointer').style('font-size', function(d) { return (me.fontScale(d.freq) * me.maxFont / me.fontScale(d.freq)) + 'px'; });\r\n\t \t        var paramsBundle = me.buildParamsBundle(d);\r\n\t \t        me.manageOverlaySlippery(paramsBundle);\r\n\t        })\r\n\t        .on('mouseout', function(d) { \r\n\t        \td3.select(this).style('cursor', 'auto').style('font-size', function(d) { return me.fontScale(d.freq) + 'px'; });\r\n\t        \tvar paramsBundle = me.buildParamsBundle(d);\r\n\t        \tme.manageOverlaySlippery(paramsBundle);\r\n\t        })\r\n\t        .on('click', function(d) {\r\n\t        \tvar paramsBundle = me.buildParamsBundle(d);\r\n\t        \tme.manageOverlaySticky(paramsBundle);\r\n\t\t\t})\r\n\t  \t  .append('title')\r\n\t    \t.text(function(d) { return d.wordString; });\r\n    }\r\n    \r\n    ,redrawChart: function() {\r\n    \tthis.chart.selectAll('g[class=section]')\r\n\t\t\t.remove();\r\n\t\t\t\r\n\t\tthis.drawChart();\r\n    }\r\n    \r\n    ,drawVerticalSlider: function() {\r\n//    \tvar h = this.container.getHeight(),\r\n//\t\t\tw = this.container.getWidth();\r\n//    \t\r\n//    \tvar totalTopOffset = (this.tPadding * 2) + this.sliderHeight\r\n//        \t,lengthVer = h - (totalTopOffset + this.bPadding);\r\n//        \r\n//\t    //create vertical minimap rectangle and slider\r\n//\t    var sliderPosScale = d3.scaleLinear()\r\n//\t\t\t.domain([this.absMaxFreq, this.minFreq])\r\n//\t\t\t.range([totalTopOffset, lengthVer]);\r\n//\t    \r\n//\t    var rectVer = this.chart.append('rect')\r\n//\t  \t    .attr('class', 'minimap')\r\n//\t  \t    .attr('x', w - (this.rPadding * 0.66))\r\n//\t  \t    .attr('y', totalTopOffset)\r\n//\t  \t    .attr('rx', 3.33)\r\n//\t  \t    .attr('width', 6.66)\r\n//\t  \t    .attr('height', lengthVer)\r\n//\t  \t    .style('fill','aliceblue')\r\n//\t  \t    .style('stroke','black')\r\n//\t  \t    .style('stroke-width','1')\r\n//\t  \t    .style('fill-opacity','0.75');\r\n//\t    \t\r\n//\t    var sliderVer = this.chart.append('rect')\r\n//\t\t\t.attr('class', 'minimap')\r\n//\t  \t    .attr('x', w - (this.rPadding * 0.66))\r\n//\t  \t    .attr('y', totalTopOffset)\r\n//\t  \t    .attr('rx', 3.33)\r\n//\t  \t    .attr('width', 6.66)\r\n//\t  \t    .attr('height', lengthVer * ((this.absMaxFreq * this.valFraction) - this.minFreq) / this.absMaxFreq)\r\n//\t  \t    .style('fill','CornflowerBlue')\r\n//\t  \t    .style('stroke','black')\r\n//\t  \t    .style('stroke-width','1');\r\n    }\r\n    \r\n    ,redrawVerticalSlider: function() {\r\n    \tthis.chart.selectAll('rect[class=minimap]')\r\n\t\t\t.remove();\r\n\t\t\t\r\n\t\tthis.drawVerticalSlider();\r\n    }\r\n    \r\n    ,drawSlider: function() {\r\n    \tvar h = this.container.getHeight(),\r\n\t\t\tw = this.container.getWidth();\r\n\t    \r\n\t\t//Create navigation bar\r\n\t\tvar lengthHor = w - (this.rPadding + this.lPadding)\r\n\t\t\t,offsetVis = this.lPadding + (lengthHor * ((this.numVisPoints - 1) / 2) * ( 1 / (this.numDataPoints - 1)))\r\n\t\t\t,offsetVisStart = this.lPadding\r\n\t\t\t,offsetVisEnd = this.lPadding + (lengthHor * ((this.numVisPoints - 1) / (this.numDataPoints - 1)));\r\n\t\t\r\n\t\tvar lineX = this.chart.append('line')\r\n\t\t\t.attr('class', 'slider axis')\r\n\t\t\t.attr('x1', this.lPadding)\r\n\t\t\t.attr('x2', this.container.getWidth() - this.rPadding)\r\n\t\t\t.attr('y1', this.tPadding + this.sliderHeight)\r\n\t\t\t.attr('y2', this.tPadding + this.sliderHeight)\r\n\t\t\t.style('shape-rendering', 'crispEdges')\r\n\t\t\t.style('stroke','black')\r\n\t  \t    .style('stroke-width','1');\r\n\t\t\t\t\t\r\n\t\tvar lineY = this.chart.append('line')\r\n\t\t\t.attr('class', 'slider axis')\r\n\t\t\t.attr('x1', this.lPadding)\r\n\t\t\t.attr('x2', this.lPadding)\r\n\t\t\t.attr('y1', this.tPadding + this.sliderHeight)\r\n\t\t\t.attr('y2', this.tPadding)\r\n\t\t\t.style('shape-rendering', 'crispEdges')\r\n\t\t\t.style('stroke','black')\r\n\t  \t    .style('stroke-width','1');\r\n\t\t\r\n\t    var sliderHorStart = this.chart.append('line')\r\n\t  \t    .attr('class', 'slider')\r\n\t  \t    .attr('id', 'before')\r\n\t  \t    .attr('x1', (lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1)) + offsetVisStart)\r\n\t  \t    .attr('x2', (lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1)) + offsetVisStart)\r\n\t  \t    .attr('y1', this.tPadding + this.sliderHeight)\r\n\t  \t    .attr('y2', this.tPadding)\r\n\t  \t    .style('stroke', 'black')\r\n\t  \t    .style('stroke-width', '1');\r\n\t    \r\n\t    var sliderHorEnd = this.chart.append('line')\r\n\t  \t    .attr('class', 'slider')\r\n\t  \t    .attr('id', 'after')\r\n\t  \t    .attr('x1', (lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t  \t    .attr('x2', (lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t  \t    .attr('y1', this.tPadding + this.sliderHeight)\r\n\t  \t    .attr('y2', this.tPadding)\r\n\t  \t    .style('stroke', 'black')\r\n\t  \t    .style('stroke-width', '1');\r\n\t  \t    \t  \t    \r\n\t   var greyBoxBefore = this.chart.append('rect')\r\n  \t    \t.attr('class', 'slider')\r\n  \t    \t.attr('id', 'boxBefore')\r\n  \t    \t.attr('x', this.lPadding)\r\n  \t    \t.attr('y', this.tPadding)\r\n  \t    \t.attr('height', this.sliderHeight)\r\n  \t    \t.attr('width', lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1))\r\n  \t    \t.style('fill', 'silver')\r\n  \t    \t.style('fill-opacity', 0.25)\r\n\t    \t.style('cursor', 'move');\r\n\t    \t\t    \r\n\t    var greyBoxAfter = this.chart.append('rect')\r\n\t    \t.attr('class', 'slider')\r\n\t    \t.attr('id', 'boxAfter')\r\n\t    \t.attr('x', (lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t    \t.attr('y', this.tPadding)\r\n\t    \t.attr('height', this.sliderHeight)\r\n\t    \t.attr('width', lengthHor * (this.numDataPoints - this.numVisPoints - this.shiftCount + this.callOffset()) / (this.numDataPoints - 1))\r\n\t    \t.style('fill', 'silver')\r\n\t    \t.style('fill-opacity', 0.25)\r\n\t    \t.style('cursor', 'move');\r\n\t    \r\n\t    var me = this;\r\n    \tvar drag = d3.drag()\r\n        .on('drag', function(d) {\r\n        \tif(!me.isTransitioning) {\r\n        \t\tthis.drag = true;\r\n        \t\t\r\n\t        \tvar w = me.parent.getWidth()\r\n\t        \t\t,displaceX = parseInt(d3.event.dx)\r\n\t        \t\t,checkBefore\r\n\t        \t\t,checkAfter\r\n\t        \t\t,pos = 0;\r\n\t        \t\t\r\n\t        \t//add up the slider movements as they occur\t\r\n        \t\tme.sliderDragSum += d3.event.dx;\r\n\t        \t\r\n\t        \tme.chart.selectAll('#before')\r\n\t        \t\t.attr('x1', function () { \r\n\t        \t\t\tcheckBefore = parseInt(this.getAttribute('x1'));\r\n\t        \t\t\tpos = parseInt(this.getAttribute('x1')) + displaceX;\r\n\t        \t\t\treturn parseInt(this.getAttribute('x1'));\r\n\t        \t\t});\r\n\t        \t\r\n\t        \tme.chart.selectAll('#after')\r\n\t        \t\t.attr('x1', function () { \r\n\t        \t\t\tcheckAfter = parseInt(this.getAttribute('x1'));\r\n\t        \t\t\treturn parseInt(this.getAttribute('x1'));\r\n\t        \t\t});\r\n\t        \t\r\n\t        \tif(checkBefore + displaceX < me.lPadding || checkAfter + displaceX > w - me.rPadding) {\r\n\t        \t\tdisplaceX = 0;\r\n\t        \t}\r\n\t        \t\r\n\t        \tme.chart.select('#boxBefore')\r\n\t        \t\t.attr('width', function () { return parseInt(this.getAttribute('width')) + displaceX; });\r\n\t        \t\r\n\t        \tme.chart.select('#boxAfter')\r\n\t        \t\t.attr('x', function () { return parseInt(this.getAttribute('x')) + displaceX; })\r\n        \t\t\t.attr('width', function () { return Math.max(0, parseInt(this.getAttribute('width')) - displaceX); });\r\n\t        \t\t\r\n\t        \tme.chart.selectAll('#before')\r\n\t        \t\t.attr('x1', function () { return parseInt(this.getAttribute('x1')) + displaceX; })\r\n\t        \t\t.attr('x2', function () { return parseInt(this.getAttribute('x2')) + displaceX; });\r\n\t        \t\r\n\t        \tme.chart.selectAll('#after')\r\n        \t\t\t.attr('x1', function () { return parseInt(this.getAttribute('x1')) + displaceX; })\r\n        \t\t\t.attr('x2', function () { return parseInt(this.getAttribute('x2')) + displaceX; });\r\n        \t}\r\n        })\r\n        .on('end', function(d) {\r\n        \tif(this.drag){\r\n        \t\tthis.drag = false;\r\n        \t\t\r\n        \t\tvar inverseSliderScale = d3.scaleLinear()\r\n\t\t\t    \t.domain([0, me.container.getWidth() - (me.lPadding + me.rPadding)])\r\n\t\t\t    \t.range([0, me.numDataPoints]);\r\n\t\t\t    \t\r\n\t\t\t\t//calculate the position that everything should transition to\r\n\t        \tvar moveByThis = inverseSliderScale(me.sliderDragSum),\r\n\t        \t\tmoveShiftCount,\r\n\t        \t\toldShiftCount = me.shiftCount;\r\n\t        \t\t\r\n\t    \t\tif(moveByThis > 0) moveShiftCount = Math.floor(moveByThis);\r\n\t    \t\tif(moveByThis < 0) moveShiftCount = Math.ceil(moveByThis);\r\n\t    \t\t\r\n\t    \t\t//update shiftCount re-animate \r\n\t    \t\tme.shiftCount += moveShiftCount;\r\n\t    \t\tif(me.shiftCount < 0) me.shiftCount = 0;\r\n\t    \t\tif(me.shiftCount > me.numDataPoints - 1) me.shiftCount = me.numDataPoints - 1;\r\n\t    \t\t\r\n\t    \t\tif(me.shiftCount !== oldShiftCount) {\r\n\t    \t\t\tme.sliderDragSum = 0;\r\n\t    \t\t\t\r\n\t        \t\tme.parent.setApiParams({position: me.shiftCount});\r\n\t\t\t\t\tme.prepareData();\r\n\t\t\t\t\t\r\n\t\t\t\t\tme.redraw();\r\n\t        \t}\r\n        \t}\r\n        });\r\n\t    \r\n\t    greyBoxBefore.call(drag);\r\n\t    greyBoxAfter.call(drag);\r\n    }\r\n    \r\n    ,removeSlider: function(removeTermLines) {\r\n    \tthis.chart.selectAll('rect[class=slider]')\r\n    \t\t.remove();\r\n\t\r\n    \tthis.chart.selectAll('line[class~=slider]')\r\n\t    \t.remove();\r\n    \t\r\n    \tif (removeTermLines) {\r\n    \t\tthis.chart.selectAll('g[class=slider]')\r\n\t    \t\t.remove();\r\n    \t}\r\n    }\r\n    \r\n    ,redrawSlider: function() {\r\n    \tthis.removeSlider();\r\n    \tthis.drawSlider();\r\n    }\r\n\t\r\n\t,animateVis: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\t//prepare the data for the visualization\r\n\t\t//shiftCount = 0, means the displayData begins with the same value as nestedData\r\n\t\tvar mode = this.parent.getApiParam('mode');\r\n\t\t\r\n\t    //svg element constants\r\n\t\tvar h = this.container.getHeight(),\r\n\t\t\tw = this.container.getWidth();\r\n\r\n\t\tvar duration = this.getDuration();\r\n\t\t\r\n\t\t//if transitionCall === 'draw': draw the function for the first time\t\t\r\n\t\t//if not: shift displayData to a different subset of allData\r\n\t\t//then display the newly shifted data\t\r\n\t\tif(this.transitionCall === 'left' || this.transitionCall ==='right'){\r\n\t\t\tthis.xAxisEl.transition()\r\n\t            .duration(duration)\r\n\t            .ease(d3.easeLinear)\r\n\t            .call(this.xAxis);\r\n\t            \r\n\t        this.styleXAxis();\r\n\t        \r\n\t        this.drawChart();\r\n\t    \r\n        \t//if call is shift move the dataPoints\t\r\n        \tthis.chart.selectAll('.frequencies').transition()\r\n        \t\t.duration(duration)\r\n\t            .ease(d3.easeLinear)\r\n\t            .selectAll('text')\r\n\t            .attr('x', function (d) {\r\n\t            \tvar startPoint = (0.5 / d.numInSeries) - 0.5,\r\n\t\t\t\t\t\tvalueRange = (d.posInSeries / d.numInSeries * 0.8),\r\n\t\t\t\t\t\tx = d.counter + startPoint + valueRange; \r\n\t\t\t\t\treturn me.xScale(x);\r\n\t\t\t\t})\r\n\t\t\t\t.attr('transform', function (d) {\r\n\t\t    \t\tvar startPoint = (0.5 / d.numInSeries) - 0.5\r\n\t\t\t\t\t\t,valueRange = (d.posInSeries / d.numInSeries * 0.8)\r\n\t\t\t\t\t\t,x = d.counter + startPoint + valueRange\r\n\t\t\t\t\t\t,y = d.freq;\r\n\t\t    \t\treturn 'translate(0, 0) rotate(-20 ' + me.xScale(x) + ' '+ me.yScale(y) + ')';\r\n\t\t\t\t});\r\n\t    \t   \r\n        \t//Create navigation bar\r\n\t\t\tvar lengthHor = w - (this.rPadding + this.lPadding)\r\n\t\t\t\t,offsetVis = this.lPadding + (lengthHor * ((this.numVisPoints - 1) / 2) * ( 1 / (this.numDataPoints - 1)))\r\n\t\t\t\t,offsetVisStart = this.lPadding\r\n\t\t\t\t,offsetVisEnd = this.lPadding + (lengthHor * ((this.numVisPoints - 1) / (this.numDataPoints - 1)));\r\n\t\t\t\t\r\n        \tthis.chart.select('#before').transition()\r\n\t\t\t\t.duration(duration)\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t\t\t \t.attr('x1', (lengthHor * this.shiftCount / (this.numDataPoints - 1)) + offsetVisStart)\r\n\t\t\t \t.attr('x2', (lengthHor * this.shiftCount / (this.numDataPoints - 1)) + offsetVisStart)\r\n\t\t  \t    .attr('y1', this.tPadding + this.getSliderHeight())\r\n\t\t  \t    .attr('y2', this.tPadding)\r\n\t\t  \t    .on('end', function () {\r\n\t\t  \t    \tif (me.parent.isMasked()) {\r\n\t\t  \t    \t\tme.parent.unmask();\r\n\t\t  \t    \t}\r\n\t\t  \t    \tif(me.continueTransition) { \r\n\t\t  \t    \t\tsetTimeout(function () {\r\n\t\t  \t    \t\t\tme.callTransition();\r\n\t\t  \t    \t\t},50); \r\n\t\t  \t    \t} else { \r\n\t\t  \t    \t\t//manage transition movements and controls\r\n\t\t  \t    \t\tme.isTransitioning = false;\r\n\t\t  \t\t\t\tme.manageMvtButtons();\r\n\t\t  \t    \t}\r\n\t\t  \t    });\r\n        \t\r\n\t  \t   this.chart.select('#after').transition()\r\n\t\t\t\t.duration(duration)\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t\t\t \t.attr('x1', (lengthHor * this.shiftCount / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t\t\t \t.attr('x2', (lengthHor * this.shiftCount / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t\t  \t    .attr('y1', this.tPadding + this.getSliderHeight())\r\n\t\t  \t    .attr('y2', this.tPadding);\r\n\t\t    \r\n\t  \t   this.chart.select('#boxBefore').transition()\r\n\t\t\t\t.duration(duration)\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t  \t    \t.attr('x', this.lPadding)\r\n\t  \t    \t.attr('y', this.tPadding)\r\n\t  \t    \t.attr('height', this.getSliderHeight())\r\n\t  \t    \t.attr('width', lengthHor * (this.shiftCount) / (this.numDataPoints - 1));\r\n\t    \r\n\t  \t    this.chart.select('#boxAfter').transition()\r\n\t\t\t\t.duration(duration)\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t  \t    \t.attr('x', (lengthHor * this.shiftCount / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t  \t    \t.attr('y', this.tPadding)\r\n\t  \t    \t.attr('height', this.getSliderHeight())\r\n\t  \t    \t.attr('width', lengthHor * (this.numDataPoints - this.numVisPoints - this.shiftCount) / (this.numDataPoints - 1));\r\n        }\r\n        \r\n        //animates the chart overlay\r\n\t\tthis.redrawChartOverlay();\r\n\t}\r\n\t\r\n\t,callTransition: function () {\r\n\t\tif(this.transitionCall === 'left') this.toggleLeftCheck();\r\n        if(this.transitionCall === 'right') this.toggleRightCheck();\r\n\t}\r\n\t\t\r\n\t//build the params bundle to pass to manageOverlaySticky\r\n\t,buildParamsBundle: function (info) { \r\n\t\t//console.log('fn: builParamsBundle')\r\n\t\tvar type = info.wordString,\r\n\t\t\tparams = {},\r\n\t\t\tparamsBundle = {},\r\n\t\t\tdocId;\r\n\r\n\t\tif ( this.parent.getApiParam('mode') === 'document') { // set position\r\n\t\t\tdocId = info.docId;\r\n\t\t\tvar totalTokens = this.parent.getCorpus().getDocument(docId).getLexicalTokensCount() - 1;\r\n\t\t\tparams.tokenIdStart = parseInt(totalTokens / this.numDataPoints);\r\n\t\t\tparams.docIdType = docId + ':' + type;\r\n\t\t} else {\r\n\t\t}\r\n\t\t\t\t\r\n\t\tparamsBundle = { params: params, type: type };\r\n\t\t\r\n\t\treturn paramsBundle;\r\n\t}\r\n\t\r\n\t,manageOverlaySlippery: function (paramsBundle) {\r\n\r\n\t\t//console.log('fn: manageOverlaySlippery')\r\n\t\tvar string = paramsBundle.type\r\n\t\t\t,selector = this.getSelectorFromTerm(paramsBundle.type) \r\n\t\t\t,checkOn = 'on'\r\n\t\t\t,index;\r\n\t\t\r\n//\t\tthis.continueTransition = true;\r\n//\r\n//\t\tthis.transitionCall = 'draw';\r\n\t\t\r\n\t\t//check if the word that was selected was already sticky\r\n\t\t//if so checkOn = off and nothing happens\r\n\t\tvar len = this.overlayQueue.length;\r\n\t\twhile(--len >= 0){\r\n\t\t\tif(selector === this.overlayQueue[len].selector){ \r\n\t\t    \tcheckOn = 'off';\r\n\t\t    \tindex = len;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//make sure the selected word wasn't just a sticky word that is being deselected\r\n\t\t//thus happens to be scrolled over\r\n\t\tif(selector === this.lastSticky){\r\n\t\t\tcheckOn = 'off';\r\n\t\t\tthis.lastSticky = null;\r\n\t\t}\r\n\t\t\r\n\t\tif(checkOn === 'on') {\r\n\t\t\t//select a slippery word\r\n\t\t\tif(selector !== this.lastSlippery) {\r\n\t\t\t\tvar pathHolder = this.prepareFullPath(string);\r\n\t\t\t\tvar lineObject = {\r\n\t\t\t\t\tword: string, \r\n\t\t\t\t\tselector: selector, \r\n\t\t\t\t\tparams: paramsBundle, \r\n\t\t\t\t\tfullPath: pathHolder.path,\r\n\t\t\t\t\tpathMin: pathHolder.min,\r\n\t\t\t\t\tpathMax: pathHolder.max,\r\n\t\t\t\t\tcolour: 'red'\r\n\t\t\t\t};\t\r\n\t\t\t\tif(this.lastSlippery !== null) {\r\n\t\t\t\t\t//exceptional case where lastSlippery was not properly removed\r\n\t\t\t\t\tthis.chartOverlayOff(this.lastSlippery);\r\n\t\t\t\t\tif (this.isSliderVisible) {\r\n\t\t\t\t\t\tthis.sliderOverlayOff(this.lastSlippery);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.lastSlippery = null;\r\n\t\t\t\t\t\r\n\t\t\t\t\t//select new slippery word\r\n\t\t\t\t\t//change its colour\r\n\t\t\t\t\tthis.chartOverlayOn(lineObject);\r\n\t\t\t\t\tif (this.isSliderVisible) {\r\n\t\t\t\t\t\tthis.sliderOverlayOn(lineObject);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.lastSlippery = selector;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t//normal case select slippery word\r\n\t\t\t\t\t//change its colour\r\n\t\t\t\t\tthis.chartOverlayOn(lineObject);\r\n\t\t\t\t\tif (this.isSliderVisible) {\r\n\t\t\t\t\t\tthis.sliderOverlayOn(lineObject);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.lastSlippery = selector;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t//normal case deselect a slippery word\r\n\t\t\t\tthis.chartOverlayOff(selector);\r\n\t\t\t\tif (this.isSliderVisible) {\r\n\t\t\t\t\tthis.sliderOverlayOff(this.lastSlippery);\r\n\t\t\t\t}\r\n\t\t\t\tthis.lastSlippery = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\t//else do nothing \r\n\t\t\t//this means, don't select a word that is already sticky\r\n\t\t}\r\n\t}\r\n\r\n\t,manageOverlaySticky: function (paramsBundle) {\r\n//\t\tconsole.log('fn: manageOverlaySticky')\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tvar term = paramsBundle.type;\r\n\t\t\r\n\t\tthis.transitionCall = 'draw';\r\n\t\t\r\n\t\tif (!this.isTermSelected(term)) {\r\n\t\t\tthis.doTermSelect(term, true);\r\n\t\t} else {\r\n\t\t\tthis.doTermDeselect(term, true);\r\n\t\t}\r\n\t},\r\n\t\r\n\tgetTermIndex: function(term) {\r\n\t\tvar index = -1;\r\n\t\tvar selector = this.getSelectorFromTerm(term);\r\n\t\tvar len = this.overlayQueue.length;\r\n\t\twhile(--len >= 0){\r\n\t\t\tif(selector === this.overlayQueue[len].selector){ \r\n\t\t\t\tindex = len;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn index;\r\n\t},\r\n\t\r\n\tisTermSelected: function(term) {\r\n\t\treturn this.getTermIndex(term) !== -1;\r\n\t},\r\n\t\r\n\tdoTermSelect: function(term, legendAdd) {\r\n\t\tvar selector = this.getSelectorFromTerm(term);\r\n\t\t//finish updating API array of selected words\r\n\t\tvar apiArray = this.parent.getApiParam('selectedWords');\r\n\t\tapiArray.push(term);\r\n\t\tthis.parent.setApiParams({selectedWords: apiArray});\r\n\t\t\r\n\t\t//draw the sticky path\r\n\t\tvar color = this.parent.getApplication().getColorForTerm(term, true);\r\n\t\t\r\n\t\tif (legendAdd === true) {\r\n\t\t\tvar legend = this.parent.query('[xtype=legend]')[0];\r\n\t\t\tlegend.getStore().add({name: term, mark: color, selector: selector});\r\n\t\t\tlegend.refresh();\r\n\t\t} else {\r\n\t\t\tvar legend = this.parent.query('[xtype=legend]')[0];\r\n\t\t\tvar record = legend.getStore().findRecord('name', term);\r\n\t\t\tif (record !== null) {\r\n\t\t\t\trecord.set('mark', color);\r\n\t\t\t\tlegend.refresh();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tvar pathHolder = this.prepareFullPath(term);\r\n\t\tvar lineObject = {\r\n\t\t\tword: term, \r\n\t\t\tselector: selector,\r\n\t\t\tparams: {params: {}, type: term},\r\n\t\t\tfullPath: pathHolder.path,\r\n\t\t\tpathMin: pathHolder.min,\r\n\t\t\tpathMax: pathHolder.max,\r\n\t\t\tcolour: color\r\n\t\t};\r\n\t\t\r\n\t\t//if this was selected a slippery before click event remove line from navigation bar\r\n\t\tif(selector === this.lastSlippery){\r\n\t\t\tif (this.isSliderVisible) {\r\n\t\t\t\tthis.sliderOverlayOff(selector);\r\n\t\t\t}\r\n\t\t\tthis.lastSlippery = null;\r\n\t\t}\r\n\t\t\r\n\t\t//make sure there is no path already present\r\n\t\tthis.chart.select('g[class=frequency-line-' + selector + ']').remove();\r\n\r\n\t\tthis.overlayQueue.push(lineObject);\r\n\t\tthis.chartOverlayOn(lineObject);\r\n\t\tif (this.isSliderVisible) {\r\n\t\t\tthis.sliderOverlayOn(lineObject);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdoTermDeselect: function(term, legendRemove) {\r\n\t\tvar selector = this.getSelectorFromTerm(term);\r\n\t\tvar index = this.getTermIndex(term);\r\n\t\t\r\n\t\tif (legendRemove === true) {\r\n\t\t\tvar legend = this.parent.query('[xtype=legend]')[0];\r\n\t\t\tvar index = legend.getStore().findExact('name', term);\r\n\t\t\tlegend.getStore().removeAt(index);\r\n\t\t\tlegend.refresh();\r\n\t\t}\r\n\t\t\r\n\t\tvar updateApi = this.parent.getApiParam('selectedWords');\r\n\t\tfor(var i = 0, len = updateApi.length; i < len; i++) {\r\n\t\t\tif(updateApi[i] === selector) {\r\n\t\t\t\tupdateApi.splice(i, 1);\r\n\t\t\t\tthis.parent.setApiParams({selectedWords: updateApi});\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.chartOverlayOff(selector);\r\n    \tthis.overlayQueue.splice(index, 1);\r\n    \tif (this.isSliderVisible) {\r\n    \t\tthis.sliderOverlayOff(selector);\r\n    \t}\r\n\t\tthis.lastSticky = selector;\r\n\t}\r\n\t\r\n\t,prepareFullPath: function (string) {\r\n\t\tvar linePosArray = [],\r\n\t\t\tpathMin = this.absMaxFreq,\r\n\t\t\tpathMax = this.absMinFreq;\r\n\t\t\r\n\t\tfor(var k = 0, len = this.allData.length; k < len; k++){\r\n\t\t\tfoundB = 0;\r\n\t\t\tfor(var i = 0, lenA = this.allData[k].allDataInternal.length; i < lenA; i++) {\r\n\t\t\t\tfor(var j = 0, lenB = this.allData[k].allDataInternal[i].frequencyArray.length; j < lenB; j++){\r\n\t\t\t\t\tif(this.allData[k].allDataInternal[i].frequencyArray[j].wordString === string){\r\n\t\t\t\t\t\tvar yVal1 = this.allData[k].allDataInternal[i].frequencyArray[j].freq;\r\n\t\t\t\t\t\tlinePosArray.push({x: k, y: yVal1});\r\n\t\t\t\t\t\tif(yVal1 < pathMin) pathMin = yVal1;\r\n\t\t\t\t\t\tif(yVal1 > pathMax) pathMax = yVal1;\r\n\t\t\t\t\t\tfoundB = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(foundB === 0){\r\n\t\t\t\tvar yVal2 = this.minFreq;\r\n\t\t\t\tlinePosArray.push({x: k, y: yVal2});\r\n\t\t\t\tif(yVal2 < pathMin) pathMin = yVal2;\r\n\t\t\t\tif(yVal2 > pathMax) pathMax = yVal2;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {path: linePosArray, min: pathMin, max: pathMax};\r\n\t}\r\n\t\r\n\t,updateFullPath: function () {\r\n//\t\tconsole.log(\"fn: updateFullPath\")\r\n\t\tvar lenA = this.overlayQueue.length;\r\n\t\twhile(lenA-- > 0){\r\n\t\t\tvar pathHolder = this.prepareFullPath(this.overlayQueue[lenA].word);\r\n\t\t\tthis.overlayQueue[lenA].fullPath = pathHolder.path;\r\n\t\t\tthis.overlayQueue[lenA].pathMin = pathHolder.min;\r\n\t\t\tthis.overlayQueue[lenA].pathMax = pathHolder.max;\r\n\t\t}\r\n//\t\tconsole.log(this.overlayQueue)\r\n\t}\r\n\t\r\n\t,buildSliderPath: function (pathArray) {\r\n\t\tvar me = this;\r\n\t\tvar line = d3.line()\r\n\t\t    .x(function(d) { return me.xSliderScale(d.x); })\r\n\t\t    .y(function(d) { return me.ySliderScale(d.y); })\r\n\t\t    .curve(d3.curveNatural);\r\n\t\treturn line(pathArray);\r\n\t}\r\n\t\r\n\t,sliderOverlayOn: function (objectToSelect) {\r\n\t\t//console.log('fn: sliderOverlayOn')\t\t\r\n\t\tthis.transitionSliderOverlay(objectToSelect);\r\n\t\t\r\n\t\t//draw path\r\n\t\tthis.chart.append('g')\r\n\t\t\t.attr('class', 'slider')\r\n\t\t\t.attr('id', 'slider-line-' + objectToSelect.selector)\r\n\t\t\t.append('path')\r\n\t\t\t.attr(\"d\", this.buildSliderPath(objectToSelect.fullPath))\r\n\t\t\t.style('stroke', objectToSelect.colour)\r\n\t\t\t.style('stroke-width', 2)\r\n\t\t\t.style('fill', 'none');\r\n\t\t\t\r\n\t\t//redraw slider\r\n\t\tthis.redrawSlider();\r\n\t}\r\n\t\r\n\t,sliderOverlayOff: function (selector) {\r\n\t    this.chart.selectAll('g[id=slider-line-' + selector + ']')\r\n\t    \t.remove();\r\n\t    \r\n\t    //update slider overlay axis\r\n\t\tthis.transitionSliderOverlay();\r\n\t}\r\n\t\r\n\t,redrawSliderOverlay: function() {\t\r\n\t\t//console.log('redrawSliderOverlay')\r\n\t\tfor(var l = 0; l < this.overlayQueue.length; l++){\r\n\t\t\tthis.sliderOverlayOff(this.overlayQueue[l].selector);\r\n\t\t\tthis.sliderOverlayOn(this.overlayQueue[l]);\r\n\t\t}\r\n\t}\r\n\t\r\n\t,transitionSliderOverlay: function(objectToSelect) {\r\n\t\t//console.log('transitionSliderOverlay')\r\n\t\tobjectToSelect = objectToSelect || 0;\r\n\t\t\r\n\t\t//update slider overlay axis\r\n\t\tthis.updateYSliderScale(objectToSelect);\r\n\t\t\r\n\t\t//transition all other paths\r\n\t\tvar lenA = this.overlayQueue.length;\r\n\t\twhile(lenA-- > 0){\r\n\t\t\tthis.chart.selectAll('g#slider-line-' + this.overlayQueue[lenA].selector)\r\n\t\t\t\t.select('path')\r\n\t\t\t\t.transition().duration(300)\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t\t\t\t.attr(\"d\", this.buildSliderPath(this.overlayQueue[lenA].fullPath));\r\n\t\t}\r\n\t}\r\n\t\r\n\t,preparePath: function (string) {\r\n\t\t//console.log('fn: prepareData')\r\n\t\t\r\n\t\tvar linePosArray = [];\r\n\t\t\r\n\t\t//peek at the next frequency point and the preceding one to end the line on the edge of the graph\r\n\t\tvar foundA\r\n\t\t\t,foundB\r\n\t\t\t,foundC;\r\n\t\t\r\n\t\t//add two positions offscreen to the left for smooth transitions \r\n\t\tfor(var k = 0; k < 3 && this.shiftCount - k > 0; k++) {\r\n\t\t\tfoundA = 0;\r\n\t\t\tfor(var i = 0; i < this.allData[this.shiftCount - (1 + k)].allDataInternal.length; i++) {\r\n\t\t\t\tfor(var j = 0; j < this.allData[this.shiftCount - (1 + k)].allDataInternal[i].frequencyArray.length; j++){\r\n\t\t\t\t\tif(this.allData[this.shiftCount - (1 + k)].allDataInternal[i].frequencyArray[j].wordString === string){\r\n\t\t\t\t\t\tvar yVal3 = this.yScale(this.allData[this.shiftCount - (1 + k)].allDataInternal[i].frequencyArray[j].freq);\r\n\t\t\t\t\t\tlinePosArray.unshift({x: this.shiftCount - (1 + k), y: yVal3});\r\n\t\t\t\t\t\tfoundA = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(foundA === 0){\r\n\t\t\t\tvar yVal4 = this.yScale(this.minFreq);\r\n\t\t\t\tlinePosArray.unshift({x: this.shiftCount - (1 + k), y: yVal4});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//fill in the middle values\r\n\t\tfor(var k = this.shiftCount, len = this.numVisPoints + this.shiftCount; k < len; k++){\r\n\t\t\tfoundB = 0;\r\n\t\t\tfor(var i = 0, lenA = this.allData[k].allDataInternal.length; i < lenA; i++) {\r\n\t\t\t\tfor(var j = 0, lenB = this.allData[k].allDataInternal[i].frequencyArray.length; j < lenB; j++){\r\n\t\t\t\t\tif(this.allData[k].allDataInternal[i].frequencyArray[j].wordString === string){\r\n\t\t\t\t\t\tvar yVal1 = this.yScale(this.allData[k].allDataInternal[i].frequencyArray[j].freq);\r\n\t\t\t\t\t\tlinePosArray.push({x: k, y: yVal1});\r\n\t\t\t\t\t\tfoundB = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(foundB === 0){\r\n\t\t\t\tvar yVal2 = this.yScale(this.minFreq);\r\n\t\t\t\tlinePosArray.push({x: k, y: yVal2});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//add two positions offscreen to the right for smooth transitions \r\n\t\tfor(var k = 0; k < 3 && this.numVisPoints + this.shiftCount + k < this.numDataPoints; k++){\r\n\t\t\tfoundC = 0;\r\n\t\t\tfor(var i = 0; i < this.allData[this.numVisPoints + this.shiftCount + k].allDataInternal.length; i++) {\r\n\t\t\t\tfor(var j = 0; j < this.allData[this.numVisPoints + this.shiftCount + k].allDataInternal[i].frequencyArray.length; j++){\r\n\t\t\t\t\tif(this.allData[this.numVisPoints + this.shiftCount + k].allDataInternal[i].frequencyArray[j].wordString === string){\r\n\t\t\t\t\t\tvar yVal1 = this.yScale(this.allData[this.numVisPoints + this.shiftCount + k].allDataInternal[i].frequencyArray[j].freq);\r\n\t\t\t\t\t\tlinePosArray.push({x: this.numVisPoints + this.shiftCount + k, y: yVal1});\r\n\t\t\t\t\t\tfoundC = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(foundC === 0){\r\n\t\t\t\tvar yVal2 = this.yScale(this.minFreq);\r\n\t\t\t\tlinePosArray.push({x: this.numVisPoints + this.shiftCount + k, y: yVal2});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn linePosArray;\r\n\t}\r\n\t\r\n\t//draws the line graph overlay of the frequency info\r\n\t,chartOverlayOn: function(objectToSelect) {\r\n//\t\tconsole.log('fn: chartOverlayOn')\r\n\t\t\r\n\t\tvar me = this;\r\n\t\t\t\t\t\r\n\t\t//change selected word colour\r\n\t\tthis.chart.selectAll('g[class=section]')\r\n\t\t\t.selectAll('g[class=frequencies]')\r\n\t\t\t.selectAll('text[class=' + objectToSelect.selector.replace(/'/g,\"\\\\'\") + ']')\r\n\t\t\t.style('fill', objectToSelect.colour)\r\n\t\t\t.style('fill-opacity', 1);\r\n\t    \t\r\n\t    //if transitionCall === 'draw': draw the function for the first time\t\t\r\n\t\t//if not: shift displayData to a different subset of allData\r\n\t\t//then display the newly shifted data\r\n\t\t\r\n\t\tvar linePosArray = this.preparePath(objectToSelect.word);\r\n\t\t\r\n\t\tvar pos;\r\n\t\t\r\n\t\t//draw path\r\n\t\tvar line = d3.line()\r\n\t\t    .x(function(d) { \r\n\t\t    \tpos = d.x;\r\n\t\t    \treturn me.xScale(d.x + me.callOffset()); })\r\n\t\t    .y(function(d) { return d.y; })\r\n\t\t    .curve(d3.curveNatural);\r\n\t\t\r\n\t\tvar path = this.chart.select('.overlay')\r\n\t\t\t.append('g')\r\n\t\t\t.attr('class', 'frequency-line-' + objectToSelect.selector)\r\n\t\t\t.append('path')\r\n\t\t\t.attr(\"d\", line(linePosArray))\r\n\t\t\t.style('stroke', objectToSelect.colour)\r\n\t\t\t.style('stroke-width', 2)\r\n\t\t\t.style('fill', 'none');\r\n\t\t\t\t\t\r\n\t\tvar posDif = (this.xScale(pos) - this.xScale(pos + this.callOffset()));\r\n\t\t\r\n\t\tif(this.transitionCall === 'left' || this.transitionCall ==='right') {\r\n\t\t\tpath.transition()\r\n\t\t\t\t.duration(me.getDuration())\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t\t\t    .attr(\"transform\", \"translate(\" + posDif + \")\");\r\n\t\t}\r\n\t}\r\n\t\r\n\t,chartOverlayOff: function(selector){\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tthis.chart.selectAll('text.' + selector)\r\n\t    \t.style('fill', 'black')\r\n\t    \t.style('fill-opacity', function(d) { return me.opacityScale(d.freq); });\r\n\t    \r\n\t    this.chart.select('g.frequency-line-' + selector)\r\n\t    \t.remove();\r\n\t}\r\n\t\r\n\t//reselect all the sticky words\r\n\t//a screen movement has changed the words positions\r\n\t,redrawChartOverlay: function () {\r\n\t\t//console.log('fn: redrawChartOverlay')\r\n\t\tfor(var i = 0; i < this.overlayQueue.length; i++){\r\n\t\t\tthis.chartOverlayOff(this.overlayQueue[i].selector);\r\n\t\t\tthis.chartOverlayOn(this.overlayQueue[i]);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//\r\n\t//SCALE FUNCTIONS\r\n\t//\r\n\t\r\n\t//all these scales need to be updated if this.absMaxFreq or this.valFraction changes\r\n\t,manageAllYScales: function() {\r\n\t\tthis.manageFontScale();\r\n\t\tthis.manageOpacityScale();\r\n\t\tthis.manageYScale();\r\n\t\tthis.manageYSliderScale();\r\n\t}\r\n\t\r\n\t,manageFontScale: function() {\r\n\t\t//console.log('fn: fontScale')\r\n\t\t this.fontScale.domain([this.minFreq, this.absMaxFreq * this.valFraction])\r\n\t    \t.range([10, this.maxFont]);\r\n\t}\r\n\t\r\n\t/*,maxFontScale : function (value) {\r\n\t\tvar scale = d3.scaleLinear()\r\n\t\t\t.domain([600,2000])\r\n\t\t\t.range([15,60]);\r\n\t\treturn scale(value);\r\n\t}*/\r\n\t\r\n\t,manageOpacityScale: function() {\r\n\t\tthis.opacityScale.domain([0, this.absMaxFreq * this.valFraction])\r\n    \t\t.range([0.4, 0.8]);\r\n\t}\r\n\t\r\n\t,manageYScale: function () {\r\n\t\tif(this.parent.getApiParam('yAxisScale') == 'linear') this.yScale = d3.scaleLinear();\r\n\t\tif(this.parent.getApiParam('yAxisScale') == 'log') this.yScale = d3.scaleLog();\r\n\t\t\r\n\t\tthis.yScale.domain([this.minFreq, this.absMaxFreq * this.valFraction * 1.25])\r\n\t\t\t\t.rangeRound([this.container.getHeight() - this.bPadding, (this.tPadding) + this.getSliderHeight()]);\r\n\t}\r\n\t\r\n\t,manageYSliderScale: function() {\r\n\t\tvar top = this.tPadding\r\n\t\t\t,bottom = this.tPadding + this.getSliderHeight();\r\n\t\t\r\n\t\tif(this.parent.getApiParam('yAxisScale') == 'linear') this.ySliderScale = d3.scaleLinear();\r\n\t\tif(this.parent.getApiParam('yAxisScale') == 'log') this.ySliderScale = d3.scaleLog();\r\n\t\t\r\n\t\tthis.ySliderScale.domain([this.minFreq, this.absMaxFreq])\r\n\t\t\t\t.rangeRound([bottom, top]);\r\n\t}\r\n\t\r\n\t,updateYSliderScale: function(updateWithObject) {\r\n\t\tupdateWithObject = updateWithObject || 0;\r\n\t\tvar selectedMin = this.minFreq, //setting this to this.absMinFreq effectively deactivates it, to make it work use this.absMaxFreq\r\n\t\t\tselectedMax = 0;\r\n\t    \t\r\n\t    //go through overlayQueue check for min / max\r\n\t\tvar len = this.overlayQueue.length;\r\n\t\twhile(len-- > 0){\r\n\t\t\tif(this.overlayQueue[len].pathMin < selectedMin) selectedMin = this.overlayQueue[len].pathMin;\r\n\t\t\tif(this.overlayQueue[len].pathMax > selectedMax) selectedMax = this.overlayQueue[len].pathMax;\r\n\t\t}\r\n\t\tif(updateWithObject != 0 && updateWithObject.pathMin < selectedMin) selectedMin = updateWithObject.pathMin;\r\n\t\tif(updateWithObject != 0 && updateWithObject.pathMax > selectedMax) selectedMax = updateWithObject.pathMax;\r\n\t\t\r\n\t\tthis.ySliderScale.domain([selectedMin, selectedMax]);\r\n\t}\r\n\t\r\n\t,manageAllXScales: function() {\r\n\t\tthis.manageXScale();\r\n\t\tthis.manageXSliderScale();\r\n\t}\r\n\t\r\n\t,manageXScale: function() {\r\n\t\tthis.xScale.domain([this.shiftCount - 0.5, this.numVisPoints + this.shiftCount - 0.5])\r\n\t    \t.range([this.lPadding, this.container.getWidth() - this.rPadding]);\r\n\t}\r\n\t\r\n\t,manageXSliderScale: function() {\r\n\t\tthis.xSliderScale.domain([0, this.numDataPoints - 1])\r\n\t    \t.range([this.lPadding, this.container.getWidth() - this.rPadding]);\r\n\t}\r\n\r\n\t,getSliderHeight: function() {\r\n\t\treturn this.isSliderVisible ? this.sliderHeight+this.sliderBPadding : 0;\r\n\t}\r\n\t\r\n\t,setSliderHeight: function() {\r\n\t\tthis.sliderHeight = Math.max(10, this.container.getHeight()*this.sliderHeightRatio);\r\n\t}\r\n\t\r\n\t,hideSlider: function() {\r\n\t\tthis.isSliderVisible = false;\r\n\t\tthis.removeSlider(true);\r\n\t\tthis.doResize();\r\n\t}\r\n\t\r\n\t,showSlider: function() {\r\n\t\tthis.isSliderVisible = true;\r\n\t\tthis.doResize();\r\n\t}\r\n\t\r\n\t\r\n\t//\r\n\t//MISC. FUNCTIONS\r\n\t//\r\n\r\n\t\r\n\t,setTitleLength: function () {\r\n\t\t//console.log('fn:setTitleLength')\r\n\t\tvar me = this, \r\n\t\t\titem;\r\n\t\tthis.titlesArray = [];\r\n\t\t\r\n\t\tvar scale = d3.scaleLinear()\r\n\t\t\t.domain([350,1250])\r\n\t\t\t.range([10,40]);\r\n\t\t\r\n\t\tvar corpus = this.parent.getCorpus();\r\n\t\tfor (var i = 0, len = corpus.getDocumentsCount(); i < len; i++) {\r\n\t\t\tvar item = corpus.getDocument(i);\r\n\t\t\tvar shortTitle = item.getShortTitle();\t\t\t\r\n\t\t\tif(shortTitle.length <= scale(me.container.getWidth())) {\r\n\t\t\t\tme.titlesArray.push(shortTitle); \r\n\t\t\t} else {\r\n\t\t\t\tvar shorterTitle = shortTitle.substring(0,scale(me.container.getWidth()) - 3);\r\n\t\t\t\tme.titlesArray.push(shorterTitle + '...'); \r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t,callOffset: function () {\r\n//\t\tconsole.log('fn: callOffset')\r\n\t\tvar callOffset;\r\n\t\tif(this.transitionCall === 'draw' || this.transitionCall === 'redraw') { \r\n\t\t\tcallOffset = 0; \r\n\t\t}\r\n\t\tif(this.transitionCall === 'left') { \r\n\t\t\tcallOffset = -1;\r\n\t\t}\r\n\t\tif(this.transitionCall === 'right') { \r\n\t\t\tcallOffset = 1;\r\n\t\t}\r\n\t\treturn callOffset;\r\n\t}\r\n\t\r\n\t,getSelectorFromTerm: function (string) {\r\n\t\t//console.log('fn: getSelectorFromTerm')\r\n\t\t// return string || ''; // https://github.com/voyanttools/Voyant/commit/9b675b325fd1b4968d7b8285a65650fd26577f40\r\n\r\n\t\tif (string !== undefined) {\r\n\t\t\t// construct valid css selector\r\n\t\t\tvar charCodeStr = 'tr';\r\n\t\t\tfor (var i = 0; i < string.length; i++) {\r\n\t\t\t\tcharCodeStr += '-'+string.charCodeAt(i);\r\n\t\t\t}\r\n\t\t\treturn charCodeStr;\r\n\t\t} else {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t},\r\n\t\r\n\tgetDuration: function() {\r\n\t\treturn this.numDataPoints*(100-this.parent.getSpeed())\r\n\t}\r\n\t\r\n};","Ext.define('Voyant.util.Api', {\n\tconstructor: function(config) {\n\t\tvar apis = [];\n\t\tif (!this.isApplication) {\n\t\t\tvar app = this.getApplication ? this.getApplication() : Voyant.application;\n\t\t\t\n\t\t\t// try to load from first-level mixins\n\t\t\tif (this.mixins) {\n\t\t\t\tfor (key in this.mixins) {\n\t\t\t\t\tvar clz = Ext.ClassManager.get(key);\n\t\t\t\t\tif (clz && clz.api) {\n\t\t\t\t\t\tapis.splice(0, 0, clz.api)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.addParentApi(apis, Ext.ClassManager.getClass(app)); // gather class params\n\t\t\tif (app.getApiParams) {\n\t\t\t\tapis.push(app.getApiParams()); // now add instance params, last\n\t\t\t}\n\t\t}\n\n\t\tthis.addParentApi(apis, Ext.ClassManager.getClass(this)); // add params from this class and parents\n\n\t\tthis.api = {};\n\t\tapis.forEach(function(a) {\n\t\t\tfor (key in a) {\n\t\t\t\tthis.api[key] = {initial: a[key], value: a[key]} // overwrite previous entries\n\t\t\t}\n\t\t}, this)\n\t\t\n    \tvar queryParams = Ext.Object.fromQueryString(document.location.search);\n\t\tvar xtype = this.getXType ? this.getXType() : undefined;\n    \tfor (var key in queryParams) {\n    \t\tif (this.api[key]) {\n    \t\t\tthis.setApiParam(key, queryParams[key]);\n    \t\t} else if (xtype && key.indexOf(\".\")>0) {\n    \t\t\tvar k = key.substring(key.indexOf(\".\")+1);\n    \t\t\tif (k && k in this.api) {\n    \t\t\t\tthis.setApiParam(k, queryParams[key])\n    \t\t\t}\n    \t\t}\n    \t}\n    \t\n\t\tif (config && Ext.isObject(config.api)) {\n\t    \tfor (var key in config.api) {\n\t    \t\tif (this.api[key]) {\n\t    \t\t\tthis.setApiParam(key, config.api[key]);\n\t    \t\t}\n\t    \t}\n\t    \tdelete config.api; // remove so it doesn't overwrite default api\n\t\t}\n\t\t\n    \t// handle \"type\"  parameter specially for backwards compatibility\n    \tif (queryParams[\"type\"] && (\"query\" in this.api) && !this.getApiParam('query')) {\n    \t\tthis.setApiParam(\"query\", queryParams['type']);\n    \t}\n    \t\n\t},\n\taddParentApi: function(apis, clz) {\n\t\tif (clz.api) {apis.splice(0,0, clz.api)} // add to front\n\t\tif (clz.superclass) {this.addParentApi(apis, clz.superclass.self)}\n\t},\n\tgetApiParam: function(key, defaultValue) {\n\t\treturn this.api[key]!==undefined ? this.api[key].value : defaultValue\n\t},\n\tgetApiParams: function(keys, keepEmpty) {\n\t\tkeys = keys || Object.keys(this.api);\n\t\tvar api = {};\n\t\tif (Ext.isString(keys)) {keys=[keys]}\n\t\tkeys.forEach(function(key) {\n\t\t\tvar val = this.getApiParam(key);\n\t\t\tif (keepEmpty || !Ext.isEmpty(val)) {api[key]=val;}\n\n\t\t}, this);\n\t\treturn api;\n\t},\n\t\n\tgetModifiedApiParams: function() {\n\t\tvar api = {};\n\t\tfor (var key in this.api) {\n\t\t\tif (this.api[key].initial!=this.api[key].value) {\n\t\t\t\tapi[key]=this.api[key].value\n\t\t\t}\n\t\t}\n\t\treturn api\n\t},\n\t\n\tsetApiParams: function(config) {\n\t\tfor (var key in config) {this.setApiParam(key, config[key])}\n\t},\n\t\n\tsetApiParam: function(key, value) {\n\t\tif (this.api && this.api[key]) {this.api[key].value=value;}\n\t}\n});","Ext.define('Voyant.util.Localization', {\n\tstatics: {\n\t\tDEFAULT_LANGUAGE: 'en',\n\t\tLANGUAGE: 'en',\n\t\tAVAILABLE_LANGUAGES: [\"ar\",\"bs\",\"cz\",\"de\",\"en\",\"es\",\"fa\",\"fr\",\"gu\",\"he\",\"hr\",\"it\",\"ja\",\"pt\",\"ru\",\"sl\",\"sr\"],\n\t\ti18n: {\n\t\t}\n\t},\n\t\n\tgetLanguage: function(code) {\n\t\tif (code.length === 2) {\n\t\t\tif (Voyant.util.Localization.AVAILABLE_LANGUAGES.indexOf(code) !== -1) {\n\t\t\t\treturn this.localize(code);\n\t\t\t} else {\n\t\t\t\treturn code;\n\t\t\t}\n\t\t} else {\n\t\t\tvar langs = Voyant.util.Localization.AVAILABLE_LANGUAGES.map(function(lang) {\n\t\t\t\treturn {text: this.localize(lang).toLowerCase(), value: lang}\n\t\t\t}, this);\n\t\t\tvar lowerCaseCode = code.toLowerCase();\n\t\t\tvar match = langs.find(function(lang) {\n\t\t\t\treturn lang.text === lowerCaseCode;\n\t\t\t});\n\t\t\tif (match) return match.value;\n\t\t\telse return code;\n\t\t}\n\t},\n\t\n\tlocalize: function(key, config) {\n\t\treturn this._localizeObject(this, key, config);\n\t},\n\t\n\t_localizeObject: function(object, key, config) {\n\n\t\tvar val = this._localizeClass(Ext.ClassManager.getClass(object), key, config);\n\t\tif (val) {return val;}\n\t\tif (object.mixins) { // look at mixins first\n\t\t\tfor (mixin in object.mixins) {\n\t\t\t\tvar val = this._localizeClass(Ext.ClassManager.getClass(object.mixins[mixin]), key, config);\n\t\t\t\tif (val) {return val;}\n\t\t\t}\n\t\t}\n\t\tif (object.superclass) { // then superclasses\n\t\t\tval =  this._localizeObject(object.superclass, key, config);\n\t\t\tif (val) {return val;}\n\t\t}\n\t\treturn config && config['default']!=undefined ? config['default'] : '['+key+']';\n\t},\n\t\n\t_localizeClass: function(clazz, key, config) {\n\t\tif (clazz && clazz.i18n && clazz.i18n[key]) {\n\t\t\tvar use = false;\n\t\t\tif (clazz.i18n[key]) {\n\t\t\t\tuse = clazz.i18n[key];\n\t\t\t}\n\t\t\t/*\n\t\t\tif (config && config.lang && clazz.i18n[key][config.lang]) {\n\t\t\t\tuse = clazz.i18n[key][config.lang];\n\t\t\t}\n\t\t\telse if (clazz.i18n[key][Voyant.util.Localization.LANGUAGE]) {\n\t\t\t\tuse = clazz.i18n[key][Voyant.util.Localization.LANGUAGE];\n\t\t\t}\n\t\t\telse if (clazz.i18n[key][Voyant.util.Localization.DEFAULT_LANGUAGE]) {\n\t\t\t\tuse = clazz.i18n[key][Voyant.util.Localization.DEFAULT_LANGUAGE];\n\t\t\t}\n\t\t\t*/\n\t\t\tif (use) {\n\t\t\t\tif (use.isTemplate) { // template\n\t\t\t\t\treturn use.apply(config);\n\t\t\t\t}\n\t\t\t\treturn use; // string\n\t\t\t}\n\t\t\treturn config && config['default']!=undefined ? config['default'] : '['+key+']'; // no language key found, so just return the key\n\t\t}\n\t\treturn false\n\t},\n\t\n\tgetLanguageToolMenu: function() {\n\t\tvar me = this;\n\t\treturn {\n\t\t\ttype: 'language',\n\t\t\ttooltip: this.localize(\"languageTitle\"),\n\t\t\txtype: 'toolmenu',\n\t        glyph: 'xf1ab@FontAwesome',\n\t\t\thandler: me.showLanguageOptions,\n\t\t\tscope: me\n\t\t} \n\t},\n\n\t\n\tshowLanguageOptions: function() {\n\t\tvar me = this;\n\t\tvar langs = Voyant.util.Localization.AVAILABLE_LANGUAGES.map(function(lang) {\n\t\t\treturn {text: this.localize(lang), value: lang}\n\t\t}, this);\n\t\tlangs.sort(function(a,b) {\n\t\t\treturn a.text.localeCompare(b.text);\n\t\t});\n\t\tlangs.splice(0,0,{text: this.localize('autoRecommended'), value: ''})\n\t\t\n\t\tnew Ext.window.Window({\n\t\t\ttitle: this.localize(\"languageTitle\"),\n\t\t\tmodal: true,\n\t\t\titems: {\n\t\t\t\txtype: 'form',\n\t\t\t\tbodyPadding: '10 10 10 10',\n\t\t\t\titems: [{\n\t\t\t\t\txtype: 'combo',\n\t\t\t\t\tname: 'lang',\n\t\t\t\t\tvalue: this.getApiParam(\"lang\") || \"\",\n\t    \t        queryMode: 'local',\n\t    \t        editable: false,\n\t    \t        fieldLabel: this.localize('chooseLanguage'),\n\t    \t        width: 450,\n\t\t\t\t\tmargin: 0,\n\t    \t        labelAlign: 'right',\n\t    \t        labelWidth: 150,\n\t    \t        displayField: 'text',\n\t    \t        valueField: 'value',\n\t\t\t\t\tstore: {\n\t\t\t\t\t\tfields: ['text', 'value'],\n\t\t\t\t\t\tdata: langs\n\t\t\t\t\t}\n\t\t\t\t}],\n\t\t\t\tbuttons: [{\n\t            \ttext: this.localize(\"cancelTitle\"),\n\t\t            ui: 'default-toolbar',\n\t                glyph: 'xf00d@FontAwesome',\n\t        \t\tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t}\n\t\t\t\t},{xtype: 'tbfill'},{\n\t            \ttext: this.localize(\"confirmTitle\"),\n\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t            \tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar form = btn.up('form');\n\t        \t\t\tif (form.isDirty()) {\n\t        \t\t\t\tvar app = me.getApplication();\n\t        \t\t\t\tvar params = app.getModifiedApiParams();\n\t        \t\t\t\tif (app.getCorpus()) {\n\t        \t\t\t\t\tparams.corpus = app.getCorpus().getAliasOrId();\n\t        \t\t\t\t} else {\n\t        \t\t\t\t\tdelete params.panels; // we probably don't need this\n\t        \t\t\t\t}\n\t        \t\t\t\tdelete params.lang;\n//\t        \t\t\t\tdelete params.rtl;\n\t        \t\t\t\tvar values = form.getValues();\n\t        \t\t\t\tif (values.lang) {params.lang = values.lang;}\n//\t        \t\t\t\tif (values.rtl) {params.rtl = values.lang;}\n\t        \t\t\t\tlocation.assign(\"./?\"+Ext.Object.toQueryString(params))\n\t        \t\t\t}\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t},\n\t        \t\tscope: me\n\t            }]\n\t\t\t}\n\t\t}).show()\n\t}\n\t\n});\n","/**\n * A utility for storing palettes and associations between terms and colors.\n */\nExt.define('Voyant.util.Colors', {\n\n\tconfig: {\n\t\t/**\n\t\t * Palettes for use with terms and documents.\n\t\t * @private\n\t\t */\n\t\tpalettes: undefined,\n\t\t/**\n\t\t * For tracking associations between a term and a color (in rgb format), to ensure consistent coloring across tools.\n\t\t * @private\n\t\t */\n\t\tcolorTermAssociations: {},\n\t\t/**\n\t\t * For tracking the text color to use with the corresponding background color.\n\t\t * @private\n\t\t */\n\t\ttextColorsForBackgroundColors: {}\n\t},\n\n\td3Palettes: {\n\t\tcategorical: [\"Category10\",\"Tableau10\",\"Observable10\",\"Set1\",\"Set2\",\"Set3\",\"Accent\",\"Dark2\",\"Pastel1\",\"Pastel2\",\"Paired\"],\n\t\tcyclical: [\"Rainbow\",\"Sinebow\"],\n\t\tsequentialDiverging: [\"BrBG\",\"PRGn\",\"PiYG\",\"PuOr\",\"RdBu\",\"RdGy\",\"RdYlBu\",\"RdYlGn\",\"Spectral\"],\n\t\tsequentialMulti: [\"BuGn\",\"BuPu\",\"GnBu\",\"OrRd\",\"PuBuGn\",\"PuBu\",\"PuRd\",\"RdPu\",\"YlGnBu\",\"YlGn\",\"YlOrBr\",\"YlOrRd\",\"Cividis\",\"Viridis\",\"Inferno\",\"Magma\",\"Plasma\",\"Warm\",\"Cool\",\"CubehelixDefault\",\"Turbo\"],\n\t\tsequentialSingle: [\"Blues\",\"Greens\",\"Greys\",\"Oranges\",\"Purples\",\"Reds\"]\n\t},\n\n\tlastUsedPaletteIndex: -1, // for tracking the last palette index that was used when getting a new color for a term\n\n\tconstructor: function(config) {\n\t\tthis.setPalettes({\n\t\t\t'default': [[0, 0, 255], [51, 197, 51], [255, 0, 255], [121, 51, 255], [28, 255, 255], [255, 174, 0], [30, 177, 255], [182, 242, 58], [255, 0, 164], [51, 102, 153], [34, 111, 52], [155, 20, 104], [109, 43, 157], [128, 130, 33], [111, 76, 10], [119, 115, 165], [61, 177, 169], [202, 135, 115], [194, 169, 204], [181, 212, 228], [182, 197, 174], [255, 197, 197], [228, 200, 124], [197, 179, 159]]\n\t\t});\n\t\tthis.resetColorTermAssociations();\n\n\t\t// palettes\n\t\tif (d3 !== undefined) {\n\t\t\tthis.d3Palettes.categorical.forEach(function(palName) {\n\t\t\t\tvar rgbs = d3.scaleOrdinal(d3['scheme'+palName]).range().map(function(val) { return this.hexToRgb(val); }, this);\n\t\t\t\tthis.addColorPalette(palName, rgbs);\n\t\t\t}, this);\n\t\t}\n\t\t\n\t\tvar extjs = Ext.create('Ext.chart.theme.Base').getColors().map(function(val) { return this.hexToRgb(val); }, this);\n\t\tthis.addColorPalette('extjs', extjs);\n\t},\n\n\tresetColorTermAssociations: function() {\n\t\tthis.lastUsedPaletteIndex = -1;\n\t\tthis.setColorTermAssociations({});\n\t\tthis.setTextColorsForBackgroundColors({});\n\t},\n\n\trgbToHex: function(a) {\n\t\treturn \"#\" + ((1 << 24) + (a[0] << 16) + (a[1] << 8) + a[2]).toString(16).slice(1);\n\t},\n\t\n\thexToRgb: function(hex) {\n\t\t// Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n\t\tvar shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n\t\thex = hex.replace(shorthandRegex, function(m, r, g, b) {\n\t\t\treturn r + r + g + g + b + b;\n\t\t});\n\n\t\tvar result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\t\treturn result ? [\n\t\t\tparseInt(result[1], 16),\n\t\t\tparseInt(result[2], 16),\n\t\t\tparseInt(result[3], 16)\n\t\t] : null;\n\t},\n\n\t/**\n\t * Adds a new palette to the list.\n\t * @param key {String} The palette name.\n\t * @param values {Array} The array of colors. Format: [[r,g,b],[r,g,b],....]\n\t */\n\taddColorPalette: function(key, values) {\n\t\tthis.getPalettes()[key] = values;\n\t},\n\n\t/**\n\t * Gets the whole color palette.\n\t * @param {String} [key] The key of the palette to return.\n\t * @param {Boolean} [returnHex] True to return a hexadecimal representation of each color (optional, defaults to rgb values).\n\t * @return {Array} The color palette.\n\t * @private\n\t */\n\tgetColorPalette: function(key, returnHex) {\n\t\tvar paletteKey = key || 'default';\n\t\tvar palette = this.getPalettes()[paletteKey];\n\t\tif (palette === undefined) {\n\t\t\tpalette = [];\n\t\t}\n\t\tif (returnHex) {\n\t\t\tvar colors = [];\n\t\t\tfor (var i = 0; i < palette.length; i++) {\n\t\t\t\tcolors.push(this.rgbToHex(palette[i]));\n\t\t\t}\n\t\t\treturn colors;\n\t\t} else {\n\t\t\treturn palette;\n\t\t}\n\t},\n\n\t/**\n\t * Generate a color palette from one of the D3 color palettes.\n\t * Available palettes: \"Blues\", \"Greens\", \"Greys\", \"Oranges\", \"Purples\", \"Reds\", \"BuGn\", \"BuPu\", \"GnBu\", \"OrRd\", \"PuBuGn\", \"PuBu\", \"PuRd\", \"RdPu\", \"YlGnBu\", \"YlGn\", \"YlOrBr\", \"YlOrRd\", \"Cividis\", \"Viridis\", \"Inferno\", \"Magma\", \"Plasma\", \"Warm\", \"Cool\", \"CubehelixDefault\", \"Turbo\", \"BrBG\", \"PRGn\", \"PiYG\", \"PuOr\", \"RdBu\", \"RdGy\", \"RdYlBu\", \"RdYlGn\", \"Spectral\", \"Rainbow\", \"Sinebow\"\n\t * @param {String} d3Name The D3 color palette name\n\t * @param {Number} [steps] How many steps to divide the palette into, defaults to 10\n\t * @param {Boolean} [returnHex] True to return a hexadecimal representation of each color, defaults to rgb values\n\t */\n\tcreateD3ColorPalette: function(d3Name, steps, returnHex) {\n\t\tvar colors;\n\t\tsteps = steps === undefined ? 10 : steps;\n\t\treturnHex = returnHex === undefined ? false : returnHex;\n\n\t\tif (d3['scheme'+d3Name] === undefined && d3['interpolate'+d3Name] === undefined) {\n\t\t\tthrow new Error('Invalid color palette name');\n\t\t}\n\n\t\tif (d3['interpolate'+d3Name]) {\n\t\t\tvar interpolate = d3['interpolate'+d3Name];\n\t\t\tcolors = [];\n\t\t\tfor (var i = 0; i < steps; ++i) {\n\t\t\t\tcolors.push(d3.rgb(interpolate(i / (steps - 1))));\n\t\t\t}\n\t\t} else {\n\t\t\tif (d3['scheme'+d3Name][steps] === undefined) {\n\t\t\t\tsteps = d3['scheme'+d3Name].length - 1;\n\t\t\t}\n\t\t\tcolors = Array.isArray(d3['scheme'+d3Name][steps]) ? d3['scheme'+d3Name][steps] : d3['scheme'+d3Name]; // handling for both flat and multi-dimensional palette arrays\n\t\t\tcolors = colors.map(function(c) { return d3.rgb(c)});\n\t\t}\n\n\t\tcolors = colors.map(function(c) {\n\t\t\treturn [c.r, c.g, c.b];\n\t\t}, this);\n\t\t\n\t\tif (returnHex) {\n\t\t\tcolors = colors.map(function(c) {\n\t\t\t\treturn this.rgbToHex([c.r, c.g, c.b]);\n\t\t\t}, this);\n\t\t}\n\n\t\treturn colors;\n\t},\n\n\tsaveCustomColorPalette: function(paletteArray) {\n\t\tvar dfd = new Ext.Deferred();\n\n\t\tExt.Ajax.request({\n\t\t\turl: this.getTromboneUrl(),\n\t\t\tparams: {\n\t\t\t\ttool: 'resource.StoredResource',\n\t\t\t\tstoreResource: Ext.encode(paletteArray)\n\t\t\t},\n\t\t\tsuccess: function(response, req) {\n\t\t\t\tvar json = Ext.util.JSON.decode(response.responseText);\n\t\t\t\tvar id = json.storedResource.id;\n\t\t\t\tthis.addColorPalette(id, paletteArray);\n\t\t\t\t\n\t\t\t\tdfd.resolve(id, paletteArray);\n\t\t\t},\n\t\t\tfailure: function(response) {\n\t\t\t\tdfd.reject();\n\t\t\t},\n\t\t\tscope: this\n\t\t});\n\n\t\treturn dfd.promise;\n\t},\n\t\n\tloadCustomColorPalette: function(paletteId) {\n\t\tvar dfd = new Ext.Deferred();\n\n\t\tExt.Ajax.request({\n\t\t\turl: this.getTromboneUrl(),\n\t\t\tparams: {\n\t\t\t\ttool: 'resource.StoredResource',\n\t\t\t\tretrieveResourceId: paletteId\n\t\t\t},\n\t\t\tsuccess: function(response, req) {\n\t\t\t\tvar json = Ext.util.JSON.decode(response.responseText);\n\t\t\t\tvar value = json.storedResource.resource;\n\t\t\t\tvar palette = Ext.decode(value);\n\t\t\t\t// TODO should palette api param be set here?\n\t\t\t\tthis.addColorPalette(paletteId, palette);\n\n\t\t\t\tdfd.resolve(paletteId, palette);\n\t\t\t},\n\t\t\tfailure: function(response) {\n\t\t\t\tthis.setApiParam('palette', undefined);\n\n\t\t\t\tdfd.reject();\n\t\t\t},\n\t\t\tscope: this\n\t\t});\n\n\t\treturn dfd.promise;\n\t},\n\n\n\t/**\n\t * Gets a particular color from the palette.\n\t * @param {String} key The palette key.\n\t * @param {Integer} index The index of the color to get.\n\t * @param {Boolean} [returnHex] True to return a hexadecimal representation of the color (optional, defaults to rgb values).\n\t * @return {Mixed} The requested color, either a hex string or array of rgb values.\n\t * @private\n\t */\n\tgetColor: function(key, index, returnHex) {\n\t\tvar paletteKey = key || 'default';\n\t\tvar palette = this.getPalettes()[paletteKey];\n\t\tif (index >= palette.length) {\n\t\t\tindex = index % palette.length;\n\t\t}\n\t\tif (returnHex) {\n\t\t\treturn this.rgbToHex(palette[index]);\n\t\t} else {\n\t\t\treturn palette[index];\n\t\t}\n\t},\n\n\t/**\n\t * Gets the color associated with the term.  Creates a new association if none exists.\n\t * @param {String} key The palette key.\n\t * @param {String} term The term to get the color for.\n\t * @param {Boolean} [returnHex] True to return a hexadecimal representation of the color (optional, defaults to rgb values).\n\t * @return {Mixed} The requested color, either a hex string or array of rgb values.\n\t * @private\n\t */\n\tgetColorForTerm: function(key, term, returnHex) {\n\t\tvar paletteKey = key || 'default';\n\t\tvar palette = this.getPalettes()[paletteKey];\n\n\t\tif (palette === undefined) {\n\t\t\tconsole.warn('no palette found for',key);\n\t\t\tpalette = this.getPalettes()['default'];\n\t\t}\n\n\t\tif (term.indexOf(':') != -1) {\n\t\t\tterm = term.split(':')[1];\n\t\t}\n\t\tterm = term.toLowerCase();\n\n\t\tvar color = this.getColorTermAssociations()[term];\n\t\tif (color === undefined) {\n\t\t\tvar index = this.lastUsedPaletteIndex+1;\n\t\t\tindex %= palette.length;\n\t\t\tcolor = palette[index];\n\t\t\tthis.getColorTermAssociations()[term] = color;\n\t\t\tthis.lastUsedPaletteIndex = index;\n\t\t}\n\t\tif (returnHex) {\n\t\t\tcolor = this.rgbToHex(color);\n\t\t}\n\t\treturn color;\n\t},\n\n\t/**\n\t * Set the color assocation for a term.\n\t * @param {String} term The term\n\t * @param {Array} color An array of RGB values\n\t */\n\tsetColorForTerm: function(term, color) {\n\t\tif (Array.isArray(color) === false) {\n\t\t\tcolor = this.hexToRgb(color);\n\t\t}\n\t\tterm = term.toLowerCase();\n\t\tthis.getColorTermAssociations()[term] = color;\n\t},\n\n\tgetColorForEntityType: function(type, returnHex) {\n\t\tvar index;\n\t\tswitch(type) {\n\t\t\tcase 'person':\n\t\t\t\tindex = 5;\n\t\t\t\tbreak;\n\t\t\tcase 'location':\n\t\t\t\tindex = 6;\n\t\t\t\tbreak;\n\t\t\tcase 'organization':\n\t\t\t\tindex = 2;\n\t\t\t\tbreak;\n\t\t\tcase 'misc':\n\t\t\t\tindex = 0;\n\t\t\t\tbreak;\n\t\t\tcase 'time':\n\t\t\tcase 'date':\n\t\t\tcase 'duration':\n\t\t\t\tindex = 4;\n\t\t\t\tbreak;\n\t\t\tcase 'money':\n\t\t\t\tindex = 1;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tindex = 8;\n\t\t}\n\n\t\tvar color = this.getPalettes()['Set3'][index];\n\t\tif (returnHex) {\n\t\t\tcolor = this.rgbToHex(color);\n\t\t}\n\t\treturn color;\n\t},\n\n\t/**\n\t * Accessible Perceptual Contrast Algorithm adapted from https://github.com/Myndex/apca-w3\n\t * @param {Array} background An array of RGB values\n\t * @param {Array} foreground An array of RGB values\n\t * @return {Number}\n\t */\n\tgetColorContrast: function(background, foreground) {\n\n\t\t// exponents\n\t\tconst normBG = 0.56;\n\t\tconst normTXT = 0.57;\n\t\tconst revTXT = 0.62;\n\t\tconst revBG = 0.65;\n\n\t\t// clamps\n\t\tconst blkThrs = 0.022;\n\t\tconst blkClmp = 1.414;\n\t\tconst loClip = 0.1;\n\t\tconst deltaYmin = 0.0005;\n\n\t\t// scalers\n\t\t// see https://github.com/w3c/silver/issues/645\n\t\tconst scaleBoW = 1.14;\n\t\tconst loBoWoffset = 0.027;\n\t\tconst scaleWoB= 1.14;\n\t\tconst loWoBoffset = 0.027;\n\n\t\tfunction fclamp (Y) {\n\t\t\tif (Y >= blkThrs) {\n\t\t\t\treturn Y;\n\t\t\t}\n\t\t\treturn Y + (blkThrs - Y) ** blkClmp;\n\t\t}\n\n\t\tfunction linearize (val) {\n\t\t\tlet sign = val < 0? -1 : 1;\n\t\t\tlet abs = Math.abs(val);\n\t\t\treturn sign * Math.pow(abs, 2.4);\n\t\t}\n\n\t\tlet S;\n\t\tlet C;\n\t\tlet Sapc;\n\n\t\t// Myndex as-published, assumes sRGB inputs\n\t\tlet R, G, B;\n\n\t\t// Calculates \"screen luminance\" with non-standard simple gamma EOTF\n\t\t// weights should be from CSS Color 4, not the ones here which are via Myndex and copied from Lindbloom\n\t\t[R, G, B] = foreground;\n\t\tlet lumTxt = linearize(R) * 0.2126729 + linearize(G) * 0.7151522 + linearize(B) * 0.0721750;\n\n\t\t[R, G, B] = background;\n\t\tlet lumBg = linearize(R) * 0.2126729 + linearize(G) * 0.7151522 + linearize(B) * 0.0721750;\n\n\t\t// toe clamping of very dark values to account for flare\n\t\tlet Ytxt = fclamp(lumTxt);\n\t\tlet Ybg = fclamp(lumBg);\n\n\t\t// are we \"Black on White\" (dark on light), or light on dark?\n\t\tlet BoW = Ybg > Ytxt;\n\n\t\t// why is this a delta, when Y is not perceptually uniform?\n\t\t// Answer: it is a noise gate, see\n\t\t// https://github.com/LeaVerou/color.js/issues/208\n\t\tif (Math.abs(Ybg - Ytxt) < deltaYmin) {\n\t\t\tC = 0;\n\t\t}\n\t\telse {\n\t\t\tif (BoW) {\n\t\t\t\t// dark text on light background\n\t\t\t\tS = Ybg ** normBG - Ytxt ** normTXT;\n\t\t\t\tC = S * scaleBoW;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// light text on dark background\n\t\t\t\tS = Ybg ** revBG - Ytxt ** revTXT;\n\t\t\t\tC = S * scaleWoB;\n\t\t\t}\n\t\t}\n\t\tif (Math.abs(C) < loClip) {\n\t\t\tSapc = 0;\n\t\t}\n\t\telse if (C > 0) {\n\t\t\t// not clear whether Woffset is loBoWoffset or loWoBoffset\n\t\t\t// but they have the same value\n\t\t\tSapc = C - loBoWoffset;\n\t\t}\n\t\telse {\n\t\t\tSapc = C + loBoWoffset;\n\t\t}\n\n\t\treturn Sapc * 100;\n\t},\n\n\t/**\n\t * Returns either black or white color, depending on the supplied background color.\n\t * @param {Array} backgroundColor An array of RGB values\n\t * @returns {Array}\n\t */\n\tgetTextColorForBackground: function(backgroundColor) {\n\t\tvar textColor = this.getTextColorsForBackgroundColors()[backgroundColor.join('')];\n\t\tif (textColor === undefined) {\n\t\t\tvar darkText = [0,0,0];\n\t\t\tvar lightText = [255,255,255];\n\t\t\tvar darkContrast = Math.abs(this.getColorContrast(backgroundColor, darkText));\n\t\t\tvar lightContrast = Math.abs(this.getColorContrast(backgroundColor, lightText));\n\t\t\ttextColor = lightContrast > darkContrast ? lightText : darkText;\n\t\t\tthis.getTextColorsForBackgroundColors()[backgroundColor.join('')] = textColor;\n\t\t}\n\t\treturn textColor;\n\t}\n})\n","Ext.define(\"Voyant.util.DetailedError\", {\n\textend: \"Ext.Error\",\n\tmixins: ['Voyant.util.Localization'],\n\tconfig: {\n\t\tmsg: undefined,\n\t\terror: undefined,\n\t\tdetails: undefined\n\t},\n\tstatics: {\n\t\ti18n: {\n\t\t\terror: \"Error\"\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tthis.setMsg(config.msg);\n\t\tthis.setError(config.error);\n\t\tthis.setDetails(config.details);\n\t\tthis.callParent(arguments);\n//\t\tdebugger\n//\t\tthis.show();\n\t},\n\t\n\tshow: function(config) {\n\t\tif (window.showError) {showError.call(this);}\n\t\telse {this.showMsg(config)}\n\t},\n\t\n\tshowMsg: function(config) {\n\t\tconfig = config || {};\n\t\tExt.applyIf(config, {\n\t\t\tmessage: this.getMsg()+\"<p class='error'>\\n\"+this.getError()+\"\u2026 \"+\n\t\t\t\t\"<a href='#' onclick=\\\"window.open('').document.write(unescape('<pre>\"+escape(this.getDetails())+\"</pre>')); return false;\\\">more</a></p>\",\n\t\t\ttitle: this.localize(\"error\"),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.MessageBox.ERROR,\n\t\t    autoScroll: true\n\t\t});\n\t\tExt.Msg.show(config);\n\t}\n})\n","Ext.define(\"Voyant.util.ResponseError\", {\n\textend: \"Voyant.util.DetailedError\",\n\tconfig: {\n\t\tresponse: undefined\n\t},\n\tconstructor: function(config) {\n\t\tthis.setResponse(config.response);\n\t\tExt.applyIf(config, {\n\t\t\tmsg: config.response.statusText, // hopefully already set by creator\n\t\t\terror: (typeof config.response === 'object' && 'responseText' in config.response) ? config.response.responseText.split(/(\\r\\n|\\r|\\n)/).shift() : config.response, // show first line of response\n\t\t\tdetails: (typeof config.response === 'object' && 'responseText' in config.response) ? config.response.responseText : config.response\n\t\t})\n\t\tthis.callParent(arguments);\n\t}\n\t\n})\n","Ext.define('Voyant.util.SparkLine', {\r\n\t/**\r\n\t * Gets a Google spark line.\r\n\t * \r\n\t * @param {Array} values An array of numerical values.\r\n\t * @param {Integer} stretch The width to stretch the spark line towards (currently unused).\r\n\t * @return {String} The image(s) of the spark line.\r\n\t * @private\r\n\t */\r\n\tgetSparkLine : function(values, stretch) {\r\n\t\tif (values.length < 2) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\tvar min = Number.MAX_VALUE;\r\n\t\tvar max = Number.MIN_VALUE;\r\n\t\tvar hasDecimal = false;\r\n\t\tfor ( var i = 0; i < values.length; i++) {\r\n\t\t\tif (values[i] < min) {\r\n\t\t\t\tmin = values[i];\r\n\t\t\t}\r\n\t\t\tif (values[i] > max) {\r\n\t\t\t\tmax = values[i];\r\n\t\t\t}\r\n\t\t\tif (!hasDecimal\r\n\t\t\t\t\t&& values[i].toString().indexOf('.') > -1) {\r\n\t\t\t\thasDecimal = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar dif = (max - min).toString();\r\n\t\tvar multiplier = 1;\r\n\t\tvar divider = 1;\r\n\r\n\t\tvar newvalues = [];\r\n\t\tif (hasDecimal) {\r\n\t\t\tvar multiplier = 100;\r\n\t\t\tvar ind = dif.indexOf(\".\") + 1;\r\n\t\t\tfor ( var i = ind; i < dif.length; i++) {\r\n\t\t\t\tif (dif.charAt(i) == '0') {\r\n\t\t\t\t\tmultiplier *= 10;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor ( var i = 0; i < values.length; i++) {\r\n\t\t\t\tnewvalues[i] = parseInt(values[i] * multiplier);\r\n\t\t\t}\r\n\t\t\tmax = parseInt(max * multiplier);\r\n\t\t\tmin = parseInt(min * multiplier);\r\n\r\n\t\t} else {\r\n\t\t\tvar divider = 1;\r\n\t\t\tfor ( var i = dif.length - 1; i > -1; i--) {\r\n\t\t\t\tif (dif.charAt(i) == '0') {\r\n\t\t\t\t\tdivider *= 10;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (divider != 1) {\r\n\t\t\t\tfor ( var i = 0; i < values.length; i++) {\r\n\t\t\t\t\tnewvalues[i] = values[i] / divider;\r\n\t\t\t\t}\r\n\t\t\t\tmax /= divider;\r\n\t\t\t\tmin /= divider;\r\n\t\t\t} else {\r\n\t\t\t\tnewvalues = values;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar valLen = (max.toString().length > min.toString().length ? max\r\n\t\t\t\t.toString().length\r\n\t\t\t\t: min.toString().length) + 1;\r\n\t\tvar valuesPerImage = Math.floor(1800 / valLen);\r\n\t\tvar baseUrl = 'http://chart.apis.google.com/chart?cht=ls&amp;chco=0077CC&amp;chls=1,0,0&amp;chds='+ min + ',' + max;\r\n\t\tvar images = Math.ceil(values.length / valuesPerImage);\r\n\t\tvar counter = 0;\r\n\t\tvar response = '';\r\n\t\tvar wid;\r\n\t\tif (values.length < 5) {\r\n\t\t\twid = 5;\r\n\t\t} else if (values.length < 10) {\r\n\t\t\twid = 4;\r\n\t\t} else if (values.length < 20) {\r\n\t\t\twid = 3;\r\n\t\t} else if (values.length < 50) {\r\n\t\t\twid = 2;\r\n\t\t} else {\r\n\t\t\twid = 1;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * if (stretch) { wid =\r\n\t\t * Math.ceil(stretch/values.length); if (wid>5) {wid=5;} }\r\n\t\t */\r\n\r\n\t\tfor ( var i = 0; i < images; i++) {\r\n\t\t\tvar vals = newvalues.slice(counter,\r\n\t\t\t\t\tcounter += valuesPerImage);\r\n\t\t\tresponse += \"<img style='margin: 0; padding: 0;' border='0' src='\"\r\n\t\t\t\t\t+ baseUrl\r\n\t\t\t\t\t+ '&amp;chs='\r\n\t\t\t\t\t+ (wid * vals.length)\r\n\t\t\t\t\t+ 'x15&amp;chd=t:'\r\n\t\t\t\t\t+ vals.join(',') + \"' alt='' class='chart-\";\r\n\t\t\tif (images == 1) {\r\n\t\t\t\tresponse += 'full';\r\n\t\t\t} else {\r\n\t\t\t\tif (i > 0 && i + 1 < images) {\r\n\t\t\t\t\tresponse + 'middle';\r\n\t\t\t\t} else if (i == 0) {\r\n\t\t\t\t\tresponse += 'left';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresponse += 'right';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresponse += \"' />\";\r\n\t\t}\r\n\t\treturn response;\r\n\t}\r\n});","Ext.define('Voyant.util.Toolable', {\n\trequires: ['Voyant.util.Localization','Voyant.util.Api'],\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tsuppressTools: false\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tif (this.getApiParam && this.getApiParam(\"suppressTools\")==\"true\") {return;}\n\t\tif (\"header\" in config && config.header===false) {return;}\n\t\tvar me = this;\n\t\tvar moreTools = undefined;\n\t\tvar parent = this.up('component');\n\t\tif (config.moreTools) {\n\t\t\tmoreTools = [];\n\t\t\tconfig.moreTools.forEach(function(xtype) {\n\t\t\t\t if (xtype && xtype!=this.xtype) {\n\t\t\t\t\tmoreTools.push(this.getMenuItemFromXtype(xtype));\n\t\t\t\t }\n\n\t\t\t}, this)\n\t\t}\n\t\telse if (parent && parent.getInitialConfig('moreTools')) {\n\t\t\tmoreTools = [];\n\t\t\t parent.getInitialConfig('moreTools').forEach(function(xtype) {\n\t\t\t\t if (xtype && xtype!=this.xtype) {\n\t\t\t\t\tmoreTools.push(this.getMenuItemFromXtype(xtype));\n\t\t\t\t }\n\n\t\t\t}, this)\n\t\t}\n\t\tif (moreTools && this.getApplication().getMoreTools) {\n\t\t\tmoreTools.push({xtype: 'menuseparator'});\n\t\t}\n\t\tif (this.getApplication().getMoreTools) {\n\t\t\tmoreTools = moreTools || [];\n\t\t\tvar app = this.getApplication();\n\t\t\tvar tools = app.getMoreTools();\n\t\t\ttools.forEach(function(category) {\n\t\t\t\tvar categories = [];\n\t\t\t\tcategory.items.forEach(function(xtype) {\n\t\t\t\t\tcategories.push(this.getMenuItemFromXtype(xtype))\n\t\t\t\t}, this)\n\t\t\t\tmoreTools.push({\n\t\t\t\t\ttext: app.localize(category.i18n),\n\t\t\t\t\tglyph: category.glyph,\n\t\t\t\t\tmenu: {items: categories}\n\t\t\t\t})\n\t\t\t}, this);\n\t\t}\t\t\t\n\n\t\tvar exportItems = undefined;\n\t\tvar toolsMap = {\n//\t\t\t\tmaximize: {\n//\t\t\t\t\tglyph: 'xf08e@FontAwesome',\n//\t\t\t\t\tfn: this.maximizeToolClick\n//\t\t\t\t},\n\t\t\t\tsave: {\n\t\t\t\t\tglyph: 'xf08e@FontAwesome',\n\t\t\t\t\tfn: this.exportToolClick,\n\t\t\t\t\titems: exportItems\n\t\t\t\t},\n\t\t\t\tplus: moreTools ? {\n\t\t\t\t\tglyph: 'xf17a@FontAwesome',\n\t\t\t\t\titems: moreTools\n\t\t\t\t} : undefined,\n\t\t\t\tgear: this.showOptionsClick || this.getOptions ? {\n\t\t\t\t\tglyph: 'xf205@FontAwesome',\n\t\t\t\t\tfn: this.showOptionsClick ? this.showOptionsClick : function(panel) {\n\t\t\t\t\t\tif (panel.isXType(\"voyanttabpanel\")) {panel = panel.getActiveTab()}\n\t\t\t\t\t\t// we're here because the panel hasn't overridden the click function\n\t\t\t\t\t\tExt.create('Ext.window.Window', {\n\t\t\t\t\t\t\ttitle: panel.localize(\"optionsTitle\"),\n\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\tresizable: false,\n\t\t\t            \tpanel: panel,\n\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\txtype: 'form',\n\t\t\t\t\t\t\t\tbodyPadding: '10 10 0 10',\n\t\t\t\t\t\t\t\tdefaults: {\n\t\t\t\t\t\t\t\t\tmargin: '0 0 10 0'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\titems: panel.getOptions(),\n\t\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\t\tafterrender: function(form) {\n\t\t\t\t\t\t\t\t\t\tvar api = panel.getApiParams(form.getForm().getFields().collect('name'));\n\t\t\t\t\t\t\t\t\t\tform.getForm().setValues(api);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tbuttons: [{\n\t\t\t\t\t            \ttext: panel.localize(\"reset\"),\n\t\t\t\t\t\t\t\t\tglyph: 'xf0e2@FontAwesome',\n\t\t\t\t\t            \tflex: 1,\n\t\t\t\t\t            \tpanel: panel,\n\t\t\t\t\t\t            ui: 'default-toolbar',\n\t\t\t\t\t        \t\thandler: function(btn) {\n\t\t\t\t\t        \t\t\tif (this.mixins && this.mixins[\"Voyant.util.Api\"]) {\n\t\t\t\t\t        \t\t\t\tthis.mixins[\"Voyant.util.Api\"].constructor.apply(this);\n\t\t\t\t\t        \t\t\t\tif (this.getCorpus && this.getCorpus()) {\n\t\t\t\t\t        \t\t\t\t\tthis.fireEvent(\"loadedCorpus\", this, this.getCorpus())\n\t\t\t\t\t        \t\t\t\t}\n\t\t\t\t\t        \t\t\t}\n\t\t\t\t\t        \t\t\tbtn.up('window').close();\n\t\t\t\t\t        \t\t},\n\t\t\t\t\t        \t\tscope: panel\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t},{xtype: 'tbfill'}, {\n\t\t\t\t\t            \ttext: panel.localize(\"cancelTitle\"),\n\t\t\t\t\t\t            ui: 'default-toolbar',\n\t\t\t\t\t                glyph: 'xf00d@FontAwesome',\n\t\t\t\t\t        \t\tflex: 1,\n\t\t\t\t\t        \t\thandler: function(btn) {\n\t\t\t\t\t        \t\t\tbtn.up('window').close();\n\t\t\t\t\t        \t\t}\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t            \ttext: panel.localize(\"confirmTitle\"),\n\t\t\t\t\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t\t\t\t\t            \tflex: 1,\n\t\t\t\t\t            \tpanel: panel,\n\t\t\t\t\t        \t\thandler: function(btn) {\n\t\t\t\t\t\t\t\t\t\tvar values = btn.up('form').getValues();\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t// set api values (all of them, not just global ones)\n\t\t\t\t\t\t\t\t\t\tthis.setApiParams(values);\n\n\t\t\t\t\t\t\t\t\t\tvar app = this.getApplication();\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tvar keyValuesForGlobalUpdate = [];\n\t\t\t\t\t\t\t\t\t\tif (values['stopList'] !== undefined && values['stopListGlobal'] !== undefined && values.stopListGlobal) {\n\t\t\t\t\t\t\t\t\t\t\tkeyValuesForGlobalUpdate.push(['stopList', values['stopList']]);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (values['termColors'] !== undefined && values['termColorsGlobal'] !== undefined && values.termColorsGlobal) {\n\t\t\t\t\t\t\t\t\t\t\tkeyValuesForGlobalUpdate.push(['termColors', values['termColors']]);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tvar categoriesDfd = new Ext.Deferred();\n\t\t\t\t\t\t\t\t\t\tif (values['categories'] && values['categories'] !== '') {\n\t\t\t\t\t\t\t\t\t\t\tapp.loadCategoryData(values['categories']).then(function() {\n\t\t\t\t\t\t\t\t\t\t\t\t// no errors\n\t\t\t\t\t\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\t\t\t\t\t\tvalues['categories'] = undefined;\n\t\t\t\t\t\t\t\t\t\t\t}).finally(function() { // this returns a ES6 Promise instead of Ext so used finally\n\t\t\t\t\t\t\t\t\t\t\t\tkeyValuesForGlobalUpdate.push(['categories', values['categories']]);\n\t\t\t\t\t\t\t\t\t\t\t\tcategoriesDfd.resolve();\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tcategoriesDfd.resolve();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tvar paletteDfd = new Ext.Deferred(); // need a deferred since we might have to load a custom palette\n\t\t\t\t\t\t\t\t\t\tif (values['palette'] !== undefined) {\n\t\t\t\t\t\t\t\t\t\t\tapp.resetColorTermAssociations();\n\t\t\t\t\t\t\t\t\t\t\tif (app.getColorPalette(values['palette']).length === 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t// it's a custom palette that we need to load first\n\t\t\t\t\t\t\t\t\t\t\t\tapp.loadCustomColorPalette(values['palette']).then(function() {\n\t\t\t\t\t\t\t\t\t\t\t\t\t// no errors\n\t\t\t\t\t\t\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\t\t\t\t\t\t\t// error loading palette, so reset to default\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalues['palette'] = 'default';\n\t\t\t\t\t\t\t\t\t\t\t\t}).always(function() { // this returns a Ext Promise instead of ES6 so used always\n\t\t\t\t\t\t\t\t\t\t\t\t\tkeyValuesForGlobalUpdate.push(['palette', values['palette']]);\n\t\t\t\t\t\t\t\t\t\t\t\t\tpaletteDfd.resolve();\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tkeyValuesForGlobalUpdate.push(['palette', values['palette']]);\n\t\t\t\t\t\t\t\t\t\t\t\tpaletteDfd.resolve();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tpaletteDfd.resolve();\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tExt.Promise.all([categoriesDfd, paletteDfd]).then(function() {\n\t\t\t\t\t\t\t\t\t\t\tvar corpus = app.getCorpus();\n\t\t\t\t\t\t\t\t\t\t\tif (keyValuesForGlobalUpdate.length > 0) {\n\t\t\t\t\t\t\t\t\t\t\t\tvar panels = app.getViewport().query(\"panel,chart\");\n\t\t\t\t\t\t\t\t\t\t\t\tkeyValuesForGlobalUpdate.forEach(function(keyValue) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar key = keyValue[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar value = keyValue[1];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t// set the api value for the app\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (app.setApiParam) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tapp.setApiParam(key, value);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t// tell the panels, including this one\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var i=0; i<panels.length; i++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (panels[i].setApiParam) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpanels[i].setApiParam(key, value);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\t\t// trigger a reloading of the app\n\t\t\t\t\t\t\t\t\t\t\t\tif (corpus) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tapp.dispatchEvent(\"loadedCorpus\", this, corpus);\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tapp.dispatchEvent(\"apiParamsUpdated\", this, values);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t// fire this even if we have global params since the app dispatch won't reach this tool\n\t\t\t\t\t\t\t\t\t\t\tif (corpus) {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.fireEvent(\"loadedCorpus\", this, corpus);\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.fireEvent(\"apiParamsUpdated\", this, values);\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tscope: panel\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).show()\n\t\t\t\t\t}\n\t\t\t\t} : undefined,\n\t\t\t\thelp: {\n\t\t\t\t\tglyph: 'xf128@FontAwesome',\n\t\t\t\t\tfn: this.helpToolClick\n\t\t\t\t}\n\t\t}\n\t\tvar tools = [];\n\t\t\n\t\t// check to see if there are tool objects configured\n\t\tif (config.includeTools) {\n\t\t\tfor (var tool in config.includeTools) {\n\t\t\t\tif (typeof config.includeTools[tool] == \"object\") {\n\t\t\t\t\ttools.push(config.includeTools[tool])\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tfor (var tool in toolsMap) {\n\t\t\tif (config.includeTools && !config.includeTools[tool] || !toolsMap[tool]) {continue;}\n\t\t\ttools.push({\n\t\t\t\ttype: tool,\n\t\t\t\ttooltip: this.localize(tool+\"Tip\"),\n\t\t\t\tcallback: toolsMap[tool].fn,\n\t\t\t\txtype: 'toolmenu',\n\t\t\t\tglyph: toolsMap[tool].glyph,\n\t\t\t\titems: toolsMap[tool].items\n\t\t\t})\n\t\t}\n\t\t\n\t\tExt.apply(this, {\n\t\t\ttools: tools\n\t\t})\n\t\tthis.on(\"afterrender\", function() {\n\t\t\tvar header = this.getHeader();\n\t\t\tif (header && Ext.os.deviceType==\"Desktop\" && !this.isXType(\"corpuscreator\") && !this.isXType('notebook')) {\n\t\t\t\tvar el = header.getEl();\n\t\t\t\tel.on(\"mouseover\", function() {\n\t\t\t\t\tthis.getHeader().getTools().forEach(function(tool) {\n\t\t\t\t\t\ttool.show();\n\t\t\t\t\t})\n\t\t\t\t}, this);\n\t\t\t\tel.on(\"mouseout\", function() {\n\t\t\t\t\tthis.getHeader().getTools().forEach(function(tool) {\n\t\t\t\t\t\tvar type = tool.config.type || tool.type; // auto-added tools don't have config.type\n\t\t\t\t\t\tif (type && type !== 'help') tool.hide();\n\t\t\t\t\t})\n\t\t\t\t}, this);\n\t\t\t\theader.getTools().forEach(function(tool,i) {\n\t\t\t\t\tif (tool.config.type !== 'help') tool.hide();\n\t\t\t\t});\n\t\t\t}\n\t\t}, this)\n\t},\n\tgetMenuItemFromXtype: function(xtype) {\n\t\tvar xt = xtype;\n\t\tvar config = this.getApplication().getToolConfigFromToolXtype(xtype);\n\t\tif (config && config.tooltip) {\n\t\t\tdelete config.tooltip // don't use this for now since it causes problems in the menu\n\t\t}\n\t\treturn Ext.apply(Ext.clone(config), {\n\t\t\txtype: 'menuitem',\n\t\t\ttext: config.title,\n\t\t\ttextAlign: 'left',\n\t\t\thandler: function() {this.replacePanel(config.xtype)},\n\t\t\tscope: this\n\t\t})\n\t},\n\tmaximizeToolClick: function(panel) {\n\t\tvar name = Ext.getClass(panel).getName();\n\t\tvar parts = name.split(\".\");\n\t\turl = panel.getBaseUrl()+\"tool/\"+parts[parts.length-1]+\"/\";\n\t\tparams = panel.getModifiedApiParams();\n\t\tif (!params.corpus && panel.getCorpus && panel.getCorpus()) {\n\t\t\tparams.corpus = panel.getCorpus().getId();\n\t\t}\n\t\tif (params) {url += \"?\"+Ext.Object.toQueryString(params);}\n\t\tpanel.openUrl(url);\n\t},\n\texportToolClick: function(panel) {\n\t\tif (panel.isXType('voyanttabpanel')) {panel = panel.getActiveTab()}\n\t\tvar items = window.location.hostname=='beta.voyant-tools.org' ? [{html: \"<p class='keyword' style='text-align: center; font-weight: bold; padding: 4px;'>Please note that this is the beta server and you should not count on corpora persisting (for bookmarks, embedding, etc.).\"}] : [];\n\t\tvar exportViewItems = [{\n       \t\txtype: 'radio',\n       \t\tname: 'export',\n       \t\tinputValue: 'embed',\n       \t\tboxLabel: panel.localize('exportViewHtmlEmbed')\n       \t},{\n       \t\txtype: 'radio',\n       \t\tname: 'export',\n       \t\tinputValue: 'biblio',\n       \t\tboxLabel: panel.localize('exportViewBiblio')\n       \t},{\n       \t\txtype: 'radio',\n       \t\tname: 'export',\n       \t\tinputValue: 'spyral',\n       \t\tboxLabel: panel.localize(\"exportViewSpyral\")\n       \t}];\n\t\tif (panel.isXType('notebook')) {\n\t\t\texportViewItems.splice(2, 1); // remove redundant spyral export for spyral notebooks\n\t\t}\n\t\tif (panel.getExtraViewExportItems) {\n\t\t\tpanel.getExtraViewExportItems().forEach(function(item) {\n\t\t\t\tExt.applyIf(item, {\n\t\t\t\t\txtype: 'radio',\n\t\t\t\t\tname: 'export'\n\t\t\t\t})\n\t\t\t\texportViewItems.push(item)\n\t\t\t})\n\t\t}\n\t\titems.push({\n\t       \t\txtype: 'radio',\n\t       \t\tname: 'export',\n\t       \t\tinputValue: 'url',\n\t       \t\tboxLabel: \"<a href='\"+panel.getExportUrl.call(panel)+\"' target='_blank'>\"+panel.localize('exportViewUrl')+\"</a>\",\n\t       \t\tchecked: true,\n\t       \t\tlisteners: {\n\t       \t\t\tafterrender: function() {\n\t       \t\t\t\tthis.boxLabelEl.on(\"click\", function() {\n\t       \t\t\t\t\tthis.up('window').close()\n\t       \t\t\t\t}, this)\n\t       \t\t\t}\n\t       \t\t}\n\t\t},{\n\t       xtype: 'fieldset',\n\t       collapsible: true,\n\t       collapsed: true,\n\t       title: panel.localize('exportViewFieldset'),\n\t       items: exportViewItems\n\t\t})\n\t\tvar exportDataItems = [];\n\t\tif (panel.isXType('grid')) {\n\t\t\texportDataItems.push({\n\t       \t\txtype: 'radio',\n\t       \t\tname: 'export',\n\t       \t\tinputValue: 'gridCurrentHtml',\n\t       \t\tboxLabel: panel.localize('exportGridCurrentHtml')\n\t        },{\n\t       \t\txtype: 'radio',\n\t       \t\tname: 'export',\n\t       \t\tinputValue: 'gridCurrentTsv',\n\t       \t\tboxLabel: panel.localize('exportGridCurrentTsv')\n\t        });\n\t\t\tif (!panel.getExportGridAll || panel.getExportGridAll()!=false) {\n\t\t\t\texportDataItems.push({\n\t\t       \t\txtype: 'radio',\n\t\t       \t\tname: 'export',\n\t\t       \t\tinputValue: 'gridAllJson',\n\t\t       \t\tboxLabel: panel.localize('exportGridAllJson')\n\t    \t   },{\n\t\t       \t\txtype: 'radio',\n\t\t       \t\tname: 'export',\n\t\t       \t\tinputValue: 'gridAllTsv',\n\t\t       \t\tboxLabel: panel.localize('exportGridAllTsv')\n\t    \t   })\n\t\t\t}\n\t\t}\n\t\tif (panel.getExtraDataExportItems) {\n\t\t\tpanel.getExtraDataExportItems().forEach(function(item) {\n\t\t\t\tExt.applyIf(item, {\n\t\t\t\t\txtype: 'radio',\n\t\t\t\t\tname: 'export'\n\t\t\t\t})\n\t\t\t\texportDataItems.push(item)\n\t\t\t})\n\t\t}\n\t\tif (exportDataItems.length > 0) {\n\t\t\titems.push({\n\t\t\t\txtype: 'fieldset',\n\t\t\t\tcollapsible: true,\n\t\t\t\tcollapsed: true,\n\t\t\t\ttitle: panel.localize('exportGridCurrent'),\n\t\t\t\titems: exportDataItems\n\t\t\t });\n\t\t}\n\t\tif ((!panel.getExportVisualization || panel.getExportVisualization()) && panel.isXType(\"grid\")==false && (panel.down(\"chart\") || panel.getTargetEl().dom.querySelector(\"canvas\") || panel.getTargetEl().dom.querySelector(\"svg\"))) {\n\t\t\tvar formats = [{\n\t\t\t\txtype: 'radio',\n\t\t\t\tname: 'export',\n\t\t\t\tinputValue: 'png',\n\t\t\t\tboxLabel: panel.localize('exportPng')\n\t\t\t},{\n\t\t\t\txtype: 'slider',\n\t\t\t\twidth: 200,\n\t\t\t\tvalue: 1,\n\t\t\t\tminValue: .5,\n\t\t\t\tmaxValue: 10,\n\t\t\t\tincrement: .5,\n\t\t\t\tlabelAlign: 'right',\n\t\t\t\tdecimalPrecision: 1,\n\t\t\t\titemId: 'scale',\n\t\t\t\tfieldLabel: new Ext.Template(panel.localize(\"scaleLabel\")).apply([1]),\n\t\t\t\tlisteners: {\n\t\t\t\t\tchange: function(slider, newVal) {\n\t\t\t\t\t\tthis.setFieldLabel(new Ext.Template(panel.localize(\"scaleLabel\")).apply([newVal]))\n\t\t\t\t\t},\n\t\t\t\t\tchangecomplete: function(slider) {\n\t\t\t\t\t\tslider.previousSibling().setValue(true); // make sure PNG is selected\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}];\n\t\t\tif (panel.getTargetEl().dom.querySelector(\"svg\")) {\n\t\t\t\tformats.push({\n\t\t\t\t\txtype: 'radio',\n\t\t\t\t\tname: 'export',\n\t\t\t\t\tinputValue: 'svg',\n\t\t\t\t\tboxLabel: panel.localize('exportSvg')\n\t\t\t\t})\n\t\t\t}\n\t\t\titems.push({\n\t\t\t       xtype: 'fieldset',\n\t\t\t       collapsible: true,\n\t\t\t       collapsed: true,\n\t\t\t       title: panel.localize('exportVizTitle'),\n\t\t    \t   items: formats\n\t    \t});\n\t\t}\n\t\tExt.create('Ext.window.Window', {\n\t\t\ttitle: panel.localize(\"exportTitle\"),\n\t\t\tmodal: true,\n\t\t\titems: {\n\t\t\t\txtype: 'form',\n\t\t\t\titems: items,\n\t\t\t\tbuttons: [{\n\t            \ttext: panel.localize(\"exportTitle\"),\n\t\t\t\t\tglyph: 'xf08e@FontAwesome',\n\t            \tflex: 1,\n\t            \tpanel: panel,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar form = btn.up('form');\n\t        \t\t\tvar fn = 'export'+Ext.String.capitalize(form.getValues()['export']);\n\t        \t\t\tif (Ext.isFunction(panel[fn])) {\n\t        \t\t\t\tpanel[fn].call(panel, panel, form)\n\t        \t\t\t}\n\t        \t\t\telse {\n\t        \t\t\t\tExt.Msg.show({\n\t        \t\t\t\t    title: panel.localize('exportError'),\n\t        \t\t\t\t    message: panel.localize('exportNoFunction'),\n\t        \t\t\t\t    buttons: Ext.Msg.OK,\n\t        \t\t\t\t    icon: Ext.Msg.ERROR\n\t        \t\t\t\t});\n\t        \t\t\t}\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t},\n\t        \t\tscope: panel\n\t            }, {\n\t            \ttext: panel.localize(\"cancelTitle\"),\n\t                glyph: 'xf00d@FontAwesome',\n\t        \t\tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t}\n\t\t\t\t}]\n\t\t\t},\n\t\t\tbodyPadding: 5\n\t\t}).show()\n\t},\n\texportSvg: function(img) {\n\t\tvar svg = this.getTargetEl().dom.querySelector(\"svg\");\n\t\tif (svg) {\n\t\t\tvar html = d3.select(svg)\n\t\t\t\t.attr(\"version\", 1.1)\n\t\t\t\t.attr(\"xmlns\", \"http://www.w3.org/2000/svg\")\n\t\t\t\t.attr(\"xmlns:xlink\", \"http://www.w3.org/1999/xlink\") // TermsBerry support\n\t\t\t\t.node().parentNode.innerHTML;\n\t\t\tExt.Msg.show({\n\t\t\t    title: this.localize('exportSvgTitle'),\n\t\t\t    message: '<img src=\"'+'data:image/svg+xml;base64,'+ btoa(unescape(encodeURIComponent(html)))+'\" style=\"float: right; max-width: 200px; max-height: 200px; border: thin dotted #ccc;\"/>'+this.localize('exportSvgMessage'),\n\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t    icon: Ext.Msg.INFO,\n\t\t\t    prompt: true,\n\t\t        multiline: true,\n\t\t        value: html\n\t\t\t});\t\t\n\t\t}\n\t},\n\texportPngData: function(img) {\n\t\tExt.Msg.show({\n\t\t    title: this.localize('exportPngTitle'),\n\t\t    message: '<img class=\"thumb\" src=\"'+img+'\" style=\"float: right; max-width: 200px; max-height: 200px; border: thin dotted #ccc;\"/>'+this.localize('exportPngMessage'),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO,\n\t\t    prompt: true,\n\t        multiline: true,\n\t        value: '<img src=\"'+img+'\" />'\n\t\t});\n\t},\n\texportPng: function(panel, form) {\n\t\tvar scale = 1;\n\t\tif (form) {\n\t\t\tform.mask(panel.localize('loading'));\n\n\t\t\tvar slider = form.queryById(\"scale\");\n\t\t\tif (slider && slider.getValue) {\n\t\t\t\tscale = slider.getValue();\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar canvasSurface = this.down('draw') || this.down('chart');\n\t\tif (canvasSurface && (canvasSurface.isChart || canvasSurface.isCanvas)) {\n\n\t\t\t// first part taken from EXTJ Draw.getImage()\n\t\t\t// http://docs.sencha.com/extjs/6.2.0/classic/src/Container.js-2.html#Ext.draw.Container-method-getImage\n\t\t\t// reproduced here because we want to scale the image in the canvas, not the final image\n\t\t\tvar size = canvasSurface.innerElement.getSize(),\n            \t\tsurfaces = Array.prototype.slice.call(canvasSurface.items.items),\n            \t\tzIndexes = canvasSurface.surfaceZIndexes,\n            \t\timage, imageElement,\n            \t\ti, j, surface, zIndex;\n \n\t        // Sort the surfaces by zIndex using insertion sort. \n\t        for (j = 1; j < surfaces.length; j++) {\n\t            surface = surfaces[j];\n\t            zIndex = zIndexes[surface.type];\n\t            i = j - 1;\n\t            while (i >= 0 && zIndexes[surfaces[i].type] > zIndex) {\n\t                surfaces[i + 1] = surfaces[i];\n\t                i--;\n\t            }\n\t            surfaces[i + 1] = surface;\n\t        }\n\t        \n\t        // next part taken from EXTJS Canvas Flatten\n\t        // http://docs.sencha.com/extjs/6.2.0/classic/src/Canvas.js-1.html#line897\n\t        // reproduced here because we want to scale the image when drawing to the new canvas\n\t        \n\t        var targetCanvas = document.createElement('canvas'),\n            className = Ext.getClassName(surfaces[0]),\n            ratio = surfaces[0].devicePixelRatio * scale,\n            ctx = targetCanvas.getContext('2d'),\n            surface, canvas, rect, i, j, xy;\n\n\t        targetCanvas.width = Math.ceil(size.width * ratio);\n\t        targetCanvas.height = Math.ceil(size.height * ratio);\n\t\n\t        \n\t        for (i = 0; i < surfaces.length; i++) {\n\t            surface = surfaces[i];\n\t            if (Ext.getClassName(surface) !== className) {\n\t                continue;\n\t            }\n\t            rect = surface.getRect();\n\t            surfaceSize = surface.el.getSize();\n\t            for (j = 0; j < surface.canvases.length; j++) {\n\t                canvas = surface.canvases[j];\n\t                xy = canvas.getOffsetsTo(canvas.getParent());\n\t                ctx.drawImage(canvas.dom, (rect[0] + xy[0]) * ratio, (rect[1] + xy[1]) * ratio, surfaceSize.width*ratio,surfaceSize.height*ratio);\n\t            }\n\t        }\n\t        if (form && form.isVisible()) {form.unmask();}\n\t        \n\t        // now we're ready\n\t\t\treturn this.exportPngData(targetCanvas.toDataURL());\n\t\t}\n\t\t\n//\t\tvar chart = this.down('chart'); // first try finding a chart\n//\t\tif (chart) {\n//\t\t\treturn this.exportPngData(this.down('chart').getImage().data);\n//\t\t}\n//\n\t\tvar targetEl = this.getTargetEl().dom,\n\t\t\tcanvas = targetEl.querySelector(\"canvas\"); // next try finding a canvas\n\t\tif (canvas) {\n\t\t\tif (scale==1) {\n\t\t\t\tvar data = canvas.toDataURL(\"image/png\");\n\t\t        if (form && form.isVisible()) {form.unmask();}\n\t\t\t\treturn this.exportPngData(data);\n\t\t\t}\n\t        var targetCanvas = document.createElement('canvas'),\n            ctx = targetCanvas.getContext('2d');\n\t        targetCanvas.width = Math.ceil(canvas.width * scale);\n\t        targetCanvas.height = Math.ceil(canvas.height * scale);\n\n\t\t\t  var image = new Image;\n\t\t\t  image.src = canvas.toDataURL(\"image/png\");\n\t\t\t  image.panel = this;\n\t\t\t  image.onload = function() {\n\t\t\t\t  ctx.drawImage(image, 0, 0, targetCanvas.width, targetCanvas.height);\n\t\t\t\t  img = targetCanvas.toDataURL(\"image/png\");\n\t\t\t        if (form && form.isVisible()) {form.unmask();}\n\t\t\t\t  this.panel.exportPngData.call(this.panel, img);\n\t\t\t  };\t\n\t\t\t  return;\n\t\t}\n\t\t\n\t\tvar svg = targetEl.querySelector(\"svg\"); // finally try finding an SVG\n\t\tif (svg) {\n\t\t\tvar width = targetEl.offsetWidth*scale,\n\t\t\t\theight = targetEl.offsetHeight*scale;\n\t\t\tvar clone = svg.cloneNode(true); // we don't want to scale, etc. the original\n\t\t\tclone.setAttribute(\"version\", 1.1)\n\t\t\tclone.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\")\n\t\t\tclone.setAttribute(\"width\", width)\n\t\t\tclone.setAttribute(\"height\", height)\n\n\t\t\tvar svgChildren = [];\n\t\t\twhile (clone.children.length > 0) {\n\t\t\t\tsvgChildren.push(clone.removeChild(clone.children[0]));\n\t\t\t};\n\n\t\t\tvar g = document.createElement('g');\n\t\t\tg.setAttribute(\"style\", \"transform-box: fill-box;\");\n\t\t\tg.setAttribute(\"transform\", \"scale(\"+scale+\")\")\n\t\t\tclone.appendChild(g);\n\n\t\t\tsvgChildren.forEach(function(item) {\n\t\t\t\tg.appendChild(item);\n\t\t\t})\n\n\t\t\tvar html = clone.outerHTML,\n\t\t\t\timg = 'data:image/svg+xml;base64,'+ btoa(unescape(encodeURIComponent(html)));\n\n\t\t\tvar canvas = Ext.DomHelper.createDom({tag:'canvas',width: width,height:height}),\n\t\t\t\tcontext = canvas.getContext(\"2d\");\n\t\t\t  \n\t\t\tvar image = new Image;\n\t\t\timage.src = img;\n\t\t\timage.panel = this;\n\t\t\timage.onload = function() {\n\t\t\t\tcontext.drawImage(image, 0, 0);\n\t\t\t\timg = canvas.toDataURL(\"image/png\");\n\t\t        if (form && form.isVisible()) {form.unmask();}\n\t\t\t\treturn this.panel.exportPngData.call(this.panel, img);\n\t\t\t};\n\t\t\t// image.onerror = function(ev) {\n\t\t\t// \tconsole.log(ev)\n\t\t\t// }\n\t\t}\n\t},\n\texportUrl: function() {\n\t\tthis.openUrl(this.getExportUrl());\n\t},\n\texportEmbed: function() {\n\t\tvar asTool = this.isXType('voyantheader')==false;\n\t\tExt.Msg.show({\n\t\t    title: this.localize('exportViewEmbedTitle'),\n\t\t    message: this.localize('exportViewEmbedMessage'),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO,\n\t\t    prompt: true,\n\t        multiline: true,\n\t        value: \"\u003c!--\tExported from Voyant Tools (voyant-tools.org).\\n\"+\n\t        \t\"The iframe src attribute below uses a relative protocol to better function with both\\n\"+\n\t        \t\"http and https sites, but if you're embedding this into a local web page (file protocol)\\n\"+\n\t        \t\"you should add an explicit protocol (https if you're using voyant-tools.org, otherwise\\n\"+\n\t        \t\"it depends on this server.\\n\"+\n\t        \t\"Feel free to change the height and width values or other styling below: --\u003e\\n\"+\n\t        \t\"<iframe style='width: \"+(asTool ? this.getWidth()+\"px\" : \"100%\")+\"; height: \"+(asTool ? this.getHeight()+\"px\" : \"800px\")+\";' src='\"+this.getExportUrl(asTool)+\"'></iframe>\"\n\t\t});\n\t},\n\texportBiblio: function() {\n\t\tvar date = new Date();\n\t\tvar url = this.getExportUrl();\n\t\tvar websiteTitle = this.isXType('voyantheader') ? 'Voyant Tools' : this.localize('title');\n\t\tvar msg = Ext.Msg.show({\n\t\t    title: this.localize('exportBiblioTitle'),\n\t\t\tminHeight: 525,\n\t\t    message: '<fieldset><legend>MLA</legend>'+\n\t    \t'<div class=\"x-selectable\">Sinclair, St\u00e9fan and Geoffrey Rockwell. \"'+websiteTitle+'.\" '+\n\t    \t'<i>Voyant Tools</i>. '+Ext.Date.format(date,'Y')+'. Web. '+Ext.Date.format(date,'j M Y')+'. &lt;'+url+'&gt;.</div></fieldset>'+\n\t    \t'<br >'+\n\t    \t'<fieldset><legend>Chicago</legend>'+\n\t    \t'<div class=\"x-selectable\">St\u00e9fan Sinclair and Geoffrey Rockwell, \"'+websiteTitle+'\", '+\n\t    \t'<i>Voyant Tools</i>, accessed '+Ext.Date.format(date,'F j, Y')+', '+url+'.</div></fieldset>'+\n\t    \t'<br >'+\n\t    \t'<fieldset><legend>APA</legend>'+\n\t    \t'<div class=\"x-selectable\">Sinclair, S. &amp; G. Rockwell. ('+Ext.Date.format(date,'Y')+\"). \"+websiteTitle+'. '+\n\t    \t'<i>Voyant Tools</i>. Retrieved '+Ext.Date.format(date,'F j, Y')+', from '+url+'</div></fieldset>'+\n\t\t\t'<br >'+\n\t\t\t'<fieldset><legend>BibTeX</legend>'+\n\t\t\t'<div class=\"x-selectable\">'+this.getExportBibTex()+'</div></fieldset>',\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO\n\t\t});\n\t\tmsg.getEl().query('fieldset > div', false).forEach(function(el) {\n\t\t\tel.on('click', function(evt, el) {\n\t\t\t\tvar doc = window.document, sel, range;\n\t\t\t\tif (window.getSelection && doc.createRange) {\n\t\t\t\t\tsel = window.getSelection();\n\t\t\t\t\trange = doc.createRange();\n\t\t\t\t\trange.selectNodeContents(el);\n\t\t\t\t\tsel.removeAllRanges();\n\t\t\t\t\tsel.addRange(range);\n\t\t\t\t} else if (doc.body.createTextRange) {\n\t\t\t\t\trange = doc.body.createTextRange();\n\t\t\t\t\trange.moveToElementText(el);\n\t\t\t\t\trange.select();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\texportSpyral: function() {\n\t\tlet toolForUrl = Ext.getClassName(this).split(\".\").pop();\n\t\tlet api = this.getApplication().getModifiedApiParams();\n\t\tif (this.isXType('voyantheader')==false) {\n\t\t\tdelete api.panels; // not needed for individual tools\n\t\t\t// add (and overwrite if need be) this tool's api\n\t\t\tExt.apply(api, this.getModifiedApiParams());\n\t\t\tdelete api.corpus;\n\t\t} else {\n\t\t\ttoolForUrl = this.getApiParam('view');\n\t\t}\n\t\tlet isDebug = api && \"debug\" in api;\n\t\tdelete api.view;\n\t\tdelete api.debug;\n\t\tlet enc = function(str) {\n\t\t\treturn btoa(encodeURIComponent(str)).replace(/=/g, \"%3D\");\n\t\t}\n\t\tlet input = \"['<h1>Spyral Notebook Imported from Voyant Tools</h1>',\"+\n\t\t\t\"'<p>You can use this as a base to create your own notebook. The first code cell below loads your corpus and assigns it to a variable. The second uses the corpus variable to invoke a tool.</p><p>Don\\\\'t forget to save your changes by clicking on the cloud icon!</p>','\"+\n\t\t\t'loadCorpus(\"'+this.getApplication().getCorpus().getAliasOrId()+'\").assign(\"myCorpus\");\\',\\''+\n\t\t\t'myCorpus.tool(\"'+\n\t\t\t(toolForUrl==\"VoyantHeader\" ? \"\" : toolForUrl)+'\"'+(Object.keys(api).length>0 ? (\",\"+Ext.encode(api)) : \"\")+\n\t\t\t\");']\"\n\t\tthis.openUrl(this.getApplication().getBaseUrl()+\"spyral/?run=true&\"+(isDebug ? \"debug=true&\" : \"\")+\"inputJsonArrayOfEncodedBase64=\"+enc(input));\n\t},\n\texportGridCurrentJson: function(grid, form) {\n\t\tvar store = grid.getStore();\n\t\tvar fields = store.getFields();\n\t\tvar value = \"<table>\\n\\t<thead>\\n\\t\\t<tr>\\n\";\n\t\tvar visibleColumns = grid.getColumnManager().headerCt.getVisibleGridColumns().filter(function(col) { return col.dataIndex && col.dataIndex.trim().length > 0 });\n\t\tvalues = [];\n\n\t\tfunction jsonCollector(row) {\n\t\t\tvar val = {};\n\t\t\tvisibleColumns.forEach(function (column) {\n\t\t\t\tval[column.text] = row.get(column.dataIndex);\n\t\t\t});\n\t\t\tvalues.push(val);\n\t\t}\n\n\t\tif (store.buffered) {\n\t\t\tstore.data.forEach(jsonCollector);\n\t\t} else {\n\t\t\tstore.each(jsonCollector);\n\t\t}\n\n\t\tExt.Msg.show({\n\t\t    title: this.localize('exportDataTitle'),\n\t\t    message: this.localize('exportDataJsonMessage'),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO,\n\t\t    prompt: true,\n\t        multiline: true,\n\t        value: Ext.encode(values)\n\t\t});\n\t},\n\texportGridCurrentTsv: function(grid, form) {\n\t\tvar store = grid.getStore();\n\t\tvar visibleColumns = grid.getColumnManager().headerCt.getVisibleGridColumns().filter(function(col) { return col.dataIndex && col.dataIndex.trim().length > 0 });\n\t\tvar fields = [];\n\t\tvisibleColumns.forEach(function(column) {\n\t\t\tfields.push(column.text);\n\t\t})\n\t\tvar value = fields.join(\"\\t\")+\"\\n\";\n\n\t\tfunction tsvCollector(row) {\n\t\t\tvar cells = [];\n\t\t\tvisibleColumns.forEach(function (column) {\n\t\t\t\tvar val = row.get(column.dataIndex);\n\t\t\t\tif (Ext.isString(val)) {\n\t\t\t\t\tval = val.replace(/\\s+/g, ' '); // get rid of multiple whitespace (including newlines and tabs)\n\t\t\t\t}\n\t\t\t\tcells.push(val)\n\t\t\t});\n\t\t\tvalue += cells.join(\"\\t\") + \"\\n\";\n\t\t}\n\n\t\tif (store.buffered) {\n\t\t\tstore.data.forEach(tsvCollector);\n\t\t} else {\n\t\t\tstore.each(tsvCollector);\n\t\t}\n\n\t\tExt.Msg.show({\n\t\t    title: this.localize('exportDataTitle'),\n\t\t    message: this.localize('exportDataTsvMessage'),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO,\n\t\t    prompt: true,\n\t        multiline: true,\n\t        value: value\n\t\t});\n\t},\n\texportGridCurrentHtml: function(grid, form) {\n\t\tvar store = grid.getStore();\n\t\tvar fields = store.getFields();\n\t\tvar value = \"<table>\\n\\t<thead>\\n\\t\\t<tr>\\n\";\n\t\tvar visibleColumns = grid.getColumnManager().headerCt.getVisibleGridColumns().filter(function(col) { return col.dataIndex && col.dataIndex.trim().length > 0 });\n\t\tvisibleColumns.forEach(function(column) {\n\t\t\tvalue+=\"\\t\\t\\t<td>\"+column.text+\"</td>\\n\";\n\t\t});\n\n\t\tvalue+=\"\\t\\t</tr>\\n\\t</thead>\\n\\t<tbody>\\n\";\n\n\t\tfunction htmlCollector(row) {\n\t\t\tvalue += \"\\t\\t<tr>\\n\";\n\t\t\tvisibleColumns.forEach(function (column) {\n\t\t\t\tvar val = row.get(column.dataIndex);\n\t\t\t\tif (Ext.isString(val)) {\n\t\t\t\t\tval = val.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&lg;');\n\t\t\t\t}\n\t\t\t\tvalue += \"\\t\\t\\t<td>\" + val + \"</td>\\n\";\n\t\t\t});\n\t\t\tvalue += \"\\t\\t</tr>\\n\";\n\t\t}\n\n\t\tif (store.buffered) {\n\t\t\tstore.data.forEach(htmlCollector);\n\t\t} else {\n\t\t\tstore.each(htmlCollector);\n\t\t}\n\n\t\tvalue+=\"\\t</tbody>\\n</table>\";\n\t\tExt.Msg.show({\n\t\t    title: this.localize('exportDataTitle'),\n\t\t    message: this.localize('exportDataHtmlMessage'),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO,\n\t\t    prompt: true,\n\t        multiline: true,\n\t        value: value\n\t\t});\n\t},\n\texportGridAllJson: function(grid, form) {\n\t\tExt.Msg.confirm(this.localize('exportAllTitle'), this.localize('exportAllJsonWarning'), function(btn) {\n\t\t\tif (btn=='yes') {\n\t\t\t\tvar params = {start: 0};\n\t\t\t\tExt.applyIf(params, grid.getStore().getProxy().getExtraParams());\n\t\t\t\tthis.openUrl(this.getTromboneUrl()+\"?\"+Ext.Object.toQueryString(params));\n\t\t\t}\n\t\t}, this)\n\t},\n\texportGridAllTsv: function(grid, form) {\n\t\tExt.Msg.confirm(this.localize('exportAllTitle'), this.localize('exportAllTsvWarning'), function(btn) {\n\t\t\tif (btn=='yes') {\n\t\t\t\tvar params = {start: 0, template: this.getXType()+\"2tsv\", outputFormat: 'text'};\n\t\t\t\tExt.applyIf(params, grid.getStore().getProxy().getExtraParams());\n\t\t\t\tthis.openUrl(this.getTromboneUrl()+\"?\"+Ext.Object.toQueryString(params));\n\t\t\t}\n\t\t}, this)\n\t},\n\tgetExportUrl: function(asTool) {\n\t\t// start with the application api\n\t\tvar api = this.getApplication().getModifiedApiParams();\n\t\tvar toolForUrl = Ext.getClassName(this).split(\".\").pop();\n\t\tif (this.isXType('voyantheader')==false) {\n\t\t\tdelete api.panels; // not needed for individual tools\n\t\t\t// add (and overwrite if need be) this tool's api\n\t\t\tExt.apply(api, this.getModifiedApiParams());\n\t\t\tif (!asTool) {api.view=toolForUrl;}\n\t\t}\n\t\tif (!api.corpus) {\n\t\t\tapi.corpus = this.getApplication().getCorpus().getAliasOrId();\n\t\t}\n\t\treturn this.getApplication().getBaseUrl()+(asTool ? \"tool/\"+toolForUrl+\"/\" : \"\")+'?'+Ext.Object.toQueryString(api);\n\t},\n\tgetExportBibTex: function() {\n\t\tvar url = this.getExportUrl();\n\t\tvar corpus = this.getApplication().getCorpus();\n\t\t\n\t\tvar websiteTitle = this.isXType('voyantheader') ? 'Voyant Tools' : this.localize('title');\n\n\t\tvar abstract = 'Voyant Tools analysis of ';\n\t\tif (corpus.getTitle() === '') {\n\t\t\tabstract += 'a corpus';\n\t\t} else {\n\t\t\tabstract += 'the corpus \"'+corpus.getTitle()+'\"';\n\t\t}\n\t\tif (this.isXType('voyantheader') === false) {\n\t\t\tabstract += ' using the '+this.localize('title')+' tool';\n\t\t}\n\n\t\tvar now = new Date();\n\t\tvar accessed = Ext.Date.format(now,'Y-m-d');\n\t\tvar createdTime = new Date(this.getApplication().getCorpus().getCreatedTime());\n\n\t\tvar lang = this.getApiParam('lang') || 'en';\t\t\n\n\t\tvar citekey = 'voyanttools_'+now.getTime();\n\t\t\n\t\tvar bib = ['@misc{'+citekey+','];\n\t\tbib.push('title = {'+websiteTitle+'},');\n\t\tbib.push('author = {Sinclair, St\u00e9fan and Rockwell, Geoffrey},');\n\t\tbib.push('year = '+createdTime.getFullYear()+',');\n\t\tbib.push('url = {'+url+'},');\n\t\tbib.push('urldate = {'+accessed+'},');\n\t\tbib.push('publisher = {Voyant Tools},');\n\t\tbib.push('copyright = {CC BY 4.0},');\n\t\tbib.push('abstract = {'+abstract+'},');\n\t\tbib.push('language = {'+lang+'},');\n\t\t\n\t\treturn bib.join('<br/>&nbsp;&nbsp;') + '<br/>}';\n\t},\n\thelpToolClick: function(panel) {\n\t\tif (panel.isXType('voyanttabpanel')) {panel = panel.getActiveTab()}\n\t\tvar help = panel.localize('help', {\"default\": false}) || panel.localize('helpTip');\n\t\tif (help==panel._localizeClass(Ext.ClassManager.get(\"Voyant.util.Toolable\"), \"helpTip\")) {\n\t\t\tpanel.openUrl( panel.getBaseUrl()+\"docs/tutorial-\"+panel.getXType()+'.html');\n\t\t}\n\t\telse {\n\t\t\tExt.Msg.alert(panel.localize('title'), help +\"<p><a href='\"+panel.getBaseUrl()+\n\t\t\t\t\t\"docs/\"+ (panel.isXType('voyantheader') ? '' : \"tutorial-\"+panel.getXType()+'.html') +\"' target='voyantdocs'>\"+panel.localize(\"moreHelp\")+\"</a></p>\")\n\t\t}\n\t},\n\treplacePanel: function(xtype) {\n\t\tvar corpus = this.getApplication().getCorpus();\n\t\tvar config = this.getInitialConfig();\n\t\tvar parent;\n\t\tif (this.isXType('voyantheader') && this.getApplication().getViewComponent) {\n\t\t\tparent = this.getApplication().getViewComponent();\n\t\t\tparent.removeAll(true);\n\t\t\tvar newTool = parent.add({xtype: xtype});\n\t\t\tif (corpus) {\n\t\t\t\tthis.getApplication().dispatchEvent(\"loadedCorpus\", parent, corpus);\n\t\t\t}\n\t\t\t\n\t\t\tvar queryParams = Ext.Object.fromQueryString(document.location.search);\n\t\t\tvar url = this.getApplication().getBaseUrl();\n\t\t\turl += '?corpus='+corpus.getAliasOrId();\n\t\t\turl += '&view='+xtype;\n\t\t\tfor (var key in queryParams) {\n\t\t\t\tif (key !== 'corpus' && key !== 'view') {\n\t\t\t\t\turl += '&'+key+'='+queryParams[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\twindow.history.pushState({\n\t\t\t\tcorpus: corpus.getAliasOrId(),\n\t\t\t\tview: xtype\n\t\t\t}, '', url);\n\t\t}\n\t\telse {\n\t\t\tparent = this.isXType('voyantheader') && this.getApplication().getViewComponent ? this.getApplication().getViewComponent() : this.up(\"component\");\n\t\t\tparent.remove(this, true);\n\t\t\tvar newTool = parent.add({xtype: xtype});\n\t\t\tif (parent.isXType(\"voyanttabpanel\")) {\n\t\t\t\tparent.setActiveTab(newTool)\n\t\t\t}\n\t\t\tif (corpus) {\n\t\t\t\tnewTool.fireEvent(\"loadedCorpus\", newTool, corpus)\n\t\t\t}\n\t\t}\n\t\tthis.getApplication().dispatchEvent('panelChange', this)\n\t}\n});\n\n// from http://www.sencha.com/forum/showthread.php?281658-add-dropdown-menu-to-panel-tool&p=1054579&viewfull=1#post1054579\n// and http://www.sencha.com/forum/showthread.php?281953-Glyphs-in-panel-tool&p=1068934&viewfull=1#post1068934\n\nExt.define('Voyant.util.ToolMenu', {\n    extend: 'Ext.panel.Tool',\n    alias: 'widget.toolmenu',\n    renderTpl: ['<div class=\"x-menu-tool-hover\">' + '</div>'+\n            '<tpl if=\"glyph\">' + \n            '<span id=\"{id}-toolEl\" class=\"{baseCls}-glyph {childElCls}\" role=\"presentation\" style=\"font-family: {glyphFontFamily}; '+\n            \t'<tpl if=\"Ext.os.name==\\'iOS\\'\">'+ // FIXME: this is an awful hack..\n            \t\t'margin-right: 15px; '+\n            \t'</tpl>'+\n            '\">&#{glyph}</span>' + \n            '<tpl else>' + \n            '<img id=\"{id}-toolEl\" src=\"{blank}\" class=\"{baseCls}-img {baseCls}-{type}' + '{childElCls}\" role=\"presentation\"/>' + \n            '</tpl>'],\n    privates: {\n        onClick: function() {\n            var me = this;\n            var returnValue = me.callParent(arguments);\n\n\t\t\tif (returnValue) {\n                me.showToolMenu.call(me);\n            }\n\n            return returnValue;\n        },\n        onDestroy: function() {\n            Ext.destroyMembers(this, 'toolMenu'); //destructor\n            this.callParent();\n        }\n    },\n\tshowToolMenu: function() {\n\t\tif (this.items && this.items.length > 0) {\n\t\t\tif (!this.toolMenu || this.toolMenu.destroyed) {\n\t\t\t\tthis.toolMenu = new Ext.menu.Menu({\n\t\t\t\t\titems: this.items\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.toolMenu.showAt(0, 0);\n\t\t\tthis.toolMenu.showAt(this.getX() + this.getWidth() - this.toolMenu.getWidth(), this.getY() + this.getHeight() + 10);\n\t\t}\n\t},\n\tinitComponent: function() {\n\t    var me = this;\n\t    me.callParent(arguments);\n\t\n\t    var glyph, glyphParts, glyphFontFamily;\n\t    glyph = me.glyph || 'xf12e@FontAwesome';\n\t\n\t    if (glyph) {\n\t        if (typeof glyph === 'string') {\n\t            glyphParts = glyph.split('@');\n\t            glyph = glyphParts[0];\n\t            glyphFontFamily = glyphParts[1];\n\t        } else if (typeof glyph === 'object' && glyph.glyphConfig) {\n\t            glyphParts = glyph.glyphConfig.split('@');\n\t            glyph = glyphParts[0];\n\t            glyphFontFamily = glyphParts[1];\n\t        }\n\t\n\t\n\t        Ext.applyIf(me.renderData, {\n\t            baseCls: me.baseCls,\n\t            blank: Ext.BLANK_IMAGE_URL,\n\t            type: me.type,\n\t            glyph: glyph,\n\t            glyphFontFamily: glyphFontFamily\n\t        });\n\t    }\n\t}\n\n});\n","Ext.define(\"Voyant.util.Transferable\", {\n\ttransferable: ['transfer'],\n\ttransfer: function(source, destination) {\n\t\tif (source.transferable) {\n\t\t\tfor (var i=0;i<source.transferable.length;i++) {\n\t\t\t\tvar member = source.transferable[i];\n\t\t\t\tdestination[member] = Ext.bind(source[member], destination);\n\t\t\t}\n\t\t}\n\t\tif (source.mixins) {\n\t\t\tfor (mixin in source.mixins) {\n\t\t\t\tthis.transfer(source.mixins[mixin], destination)\n\t\t\t}\n\t\t}\n\t}\n})","Ext.define(\"Voyant.util.Variants\", {\n\textend: 'Ext.Base',\n\tconstructor: function(variants) {\n\t\tthis.variants = variants;\n\t\tthis.map = {};\n\t\tthis.variants.forEach(function(variant, index) {\n\t\t\tvariant.forEach(function(v) {\n\t\t\t\tthis.map[v]=index;\n\t\t\t}, this)\n\t\t}, this)\n\t},\n\tgetVariants: function(terms) {\n\t\tvar variants = [];\n\t\tif (Ext.isString(terms)) {terms = [terms]}\n\t\tif (Ext.isArray(terms)) {\n\t\t\tterms.forEach(function(term) {\n\t\t\t\tif (this.map[term]!=undefined) {\n\t\t\t\t\tvariants.push.apply(variants, this.variants[this.map[term]]);\n\t\t\t\t}\n\t\t\t}, this)\n\t\t}\n\t\treturn variants\n\t}\n})","Ext.define(\"Voyant.util.Downloadable\", {\n\tmixins: ['Voyant.util.Localization'],\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tdocumentFormat: undefined,\n\t\t\tdocumentFilename: undefined\n\t\t}\n\t},\n\n\tdownloadFromCorpusId: function(corpusId) {\n\t\tvar panel = this;\n\t\tExt.create('Ext.window.Window', {\n\t\t\ttitle: this.localize('exportTitle'),\n\t\t\tmodal: true,\n\t\t\titems: {\n\t\t\t\txtype: 'form',\n\t\t\t\titems: {xtype: 'downloadoptions'},\n\t\t\t\tlisteners: {\n\t\t\t\t\tafterrender: function(form) {\n\t\t\t\t\t\t// make sure defaults are set based on panel's API\n\t\t\t\t\t\tform.getForm().setValues(panel.getApiParams(['documentFilename','documentFormat']));\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tbuttons: [{\n\t            \ttext: this.localize(\"cancelButton\"),\n\t                glyph: 'xf00d@FontAwesome',\n\t        \t\tflex: 1,\n\t\t            ui: 'default-toolbar',\n\t        \t\thandler: function(btn) {\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t}\n\t\t\t\t},{\n\t            \ttext: this.localize('downloadButton'),\n\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t            \tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar values = btn.up('form').getValues();\n\t        \t\t\tpanel.setApiParams(values);\n\t        \t\t\tpanel.openDownloadCorpus(corpusId);\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t},\n\t        \t\tscope: this\n\t            }]\n\t\t\t},\n\t\t\tbodyPadding: 5\n\t\t}).show()\n\t},\n\t\n    openDownloadCorpus: function(corpusId) {\n\t\tvar url = this.getTromboneUrl()+\"?corpus=\"+corpusId+\"&tool=corpus.CorpusExporter&outputFormat=zip\"+\n\t\t\t\"&zipFilename=DownloadedVoyantCorpus-\"+corpusId+\".zip\"+\n\t\t\t(this.getApiParam(\"documentFormat\") ? \"&documentFormat=\"+this.getApiParam(\"documentFormat\") : '')+\n\t\t\t(this.getApiParam(\"documentFilename\") ? \"&documentFilename=\"+this.getApiParam(\"documentFilename\") : '')\n\t\tthis.openUrl(url)\n    }\n})","Ext.define('Voyant.util.Storage', {\n\tMAX_LENGTH: 950000, // keep it under 1 megabyte\n\t\n\tstoreResource: function(id, data) {\n\t\tvar dataString = Ext.encode(data);\n\t\t\n\t\tif (dataString.length > this.MAX_LENGTH) {\n\t\t\t// split into chunks\n\t\t\tvar dfd = new Ext.Deferred();\n\t\t\t\n\t\t\tvar numChunks = Math.ceil(dataString.length / this.MAX_LENGTH);\n\t\t\t\n\t\t\tvar chunkIds = [];\n\t\t\tfor (var i = 0; i < numChunks; i++) {\n\t\t\t\tchunkIds.push(id+'-chunk'+i);\n\t\t\t}\n\t\t\tthis._doStore(id+'-hasChunks', Ext.encode(chunkIds)).then(function() {\n\t\t\t\tvar chunkCount = 0;\n\t\t\t\tvar currIndex = 0;\n\t\t\t\tfor (var i = 0; i < numChunks; i++) {\n\t\t\t\t\tvar chunkString = dataString.substr(currIndex, this.MAX_LENGTH);\n\t\t\t\t\t\n\t\t\t\t\tthis._doStore(chunkIds[i], chunkString).then(function() {\n\t\t\t\t\t\tchunkCount++;\n\t\t\t\t\t\tif (chunkCount == numChunks) {\n\t\t\t\t\t\t\tdfd.resolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, function() {\n\t\t\t\t\t\tdfd.reject();\n\t\t\t\t\t}, null, this);\n\t\t\t\t\t\n\t\t\t\t\tcurrIndex += this.MAX_LENGTH;\n\t\t\t\t}\n\t\t\t}, function() {\n\t\t\t\tdfd.reject();\n\t\t\t}, null, this);\n\t\t\t\n\t\t\treturn dfd.promise;\n\t\t} else {\n\t\t\treturn this._doStore(id, dataString);\n\t\t}\n\t},\n\t\n\t_doStore: function(id, dataString) {\n\t\tvar dfd = new Ext.Deferred();\n\t\tExt.Ajax.request({\n            url: this.getTromboneUrl(),\n            params: {\n                tool: 'resource.StoredResource',\n                resourceId: id,\n                storeResource: dataString\n            }\n        }).then(function(response) {\n            dfd.resolve();\n        }, function(response) {\n            dfd.reject();\n        });\n\t\t\n\t\treturn dfd.promise;\n\t},\n\t\n\tgetStoredResource: function(id) {\n\t\tvar dfd = new Ext.Deferred();\n\t\t\n\t\tExt.Ajax.request({\n            url: this.getTromboneUrl(),\n            params: {\n                tool: 'resource.StoredResource',\n                verifyResourceId: id+'-hasChunks'\n            }\n        }).then(function(response) {\n        \tvar json = Ext.decode(response.responseText);\n        \tif (json && json.storedResource && json.storedResource.id && json.storedResource.id != '') {\n            \t// chunks\n            \tthis._doGetStored(json.storedResource.id, false).then(function(chunkIds) {\n            \t\tvar fullData = '';\n                    var dataChunks = {};\n\t            \tfor (var i = 0; i < chunkIds.length; i++) {\n\t            \t\tthis._doGetStored(chunkIds[i], true).then(function(response) {\n\t            \t\t\tvar chunkId = response[0];\n\t            \t\t\tvar value = response[1];\n\t            \t\t\tdataChunks[chunkId] = value;\n\t            \t\t\t\n\t            \t\t\tvar done = true;\n\t            \t\t\tfor (var j = chunkIds.length-1; j >= 0; j--) {\n\t            \t\t\t\tif (dataChunks[chunkIds[j]] === undefined) {\n\t            \t\t\t\t\tdone = false;\n\t            \t\t\t\t\tbreak;\n\t            \t\t\t\t}\n\t            \t\t\t}\n\t            \t\t\t\n\t            \t\t\tif (done) {\n\t            \t\t\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t            \t\t\t\t\tfullData += dataChunks[chunkIds[j]];\n\t            \t\t\t\t}\n\t            \t\t\t\tdfd.resolve(Ext.decode(fullData));\n\t            \t\t\t}\n\t            \t\t}, function() {\n\t                        dfd.reject();\n\t                    }, null, this);\n\t            \t}\n            \t}, function() {\n            \t\tdfd.reject();\n            \t}, null, this);\n        \t} else {\n            \t// no chunks\n\t\t\t\tthis._doGetStored(id, false).then(function(value) {\n\t\t\t\t\tdfd.resolve(value);\n\t\t\t\t}, function() {\n\t\t\t\t\tdfd.reject();\n\t\t\t\t}, null, this);\n        \t}\n        }, function() {\n        \tdfd.reject();\n        }, null, this);\n\t\t\n\t\treturn dfd.promise;\n\t},\n\t\n\t_doGetStored: function(id, isChunk) {\n\t\tvar dfd = new Ext.Deferred();\n\t\t\n\t\tExt.Ajax.request({\n            url: this.getTromboneUrl(),\n            params: {\n                tool: 'resource.StoredResource',\n                retrieveResourceId: id,\n                failQuietly: true\n            }\n        }).then(function(response) {\n        \tvar json = Ext.decode(response.responseText);\n        \tvar id = json.storedResource.id;\n        \tvar value = json.storedResource.resource;\n        \tif (value.length == 0) {\n        \t\tdfd.reject();\n        \t} else {\n\t        \tif (isChunk != true) {\n\t        \t\tvalue = Ext.decode(value);\n\t        \t\tdfd.resolve(value);\n\t        \t} else {\n\t        \t\tdfd.resolve([id, value]);\n\t        \t}\n        \t}\n        }, function() {\n        \tdfd.reject();\n        }, null, this);\n\t\t\n\t\treturn dfd.promise;\n\t}\n});\n","/*\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\nExt.define(\"Voyant.util.DiacriticsRemover\", {\n    diacriticsMap: {},\n    \n    constructor: function() {\n        var defaultDiacriticsRemovalMap = [\n            {'base':'A', 'letters':'\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F'},\n            {'base':'AA','letters':'\\uA732'},\n            {'base':'AE','letters':'\\u00C6\\u01FC\\u01E2'},\n            {'base':'AO','letters':'\\uA734'},\n            {'base':'AU','letters':'\\uA736'},\n            {'base':'AV','letters':'\\uA738\\uA73A'},\n            {'base':'AY','letters':'\\uA73C'},\n            {'base':'B', 'letters':'\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181'},\n            {'base':'C', 'letters':'\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E'},\n            {'base':'D', 'letters':'\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779\\u00D0'},\n            {'base':'DZ','letters':'\\u01F1\\u01C4'},\n            {'base':'Dz','letters':'\\u01F2\\u01C5'},\n            {'base':'E', 'letters':'\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E'},\n            {'base':'F', 'letters':'\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B'},\n            {'base':'G', 'letters':'\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E'},\n            {'base':'H', 'letters':'\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D'},\n            {'base':'I', 'letters':'\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197'},\n            {'base':'J', 'letters':'\\u004A\\u24BF\\uFF2A\\u0134\\u0248'},\n            {'base':'K', 'letters':'\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2'},\n            {'base':'L', 'letters':'\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780'},\n            {'base':'LJ','letters':'\\u01C7'},\n            {'base':'Lj','letters':'\\u01C8'},\n            {'base':'M', 'letters':'\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C'},\n            {'base':'N', 'letters':'\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4'},\n            {'base':'NJ','letters':'\\u01CA'},\n            {'base':'Nj','letters':'\\u01CB'},\n            {'base':'O', 'letters':'\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C'},\n            {'base':'OI','letters':'\\u01A2'},\n            {'base':'OO','letters':'\\uA74E'},\n            {'base':'OU','letters':'\\u0222'},\n            {'base':'OE','letters':'\\u008C\\u0152'},\n            {'base':'oe','letters':'\\u009C\\u0153'},\n            {'base':'P', 'letters':'\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754'},\n            {'base':'Q', 'letters':'\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A'},\n            {'base':'R', 'letters':'\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782'},\n            {'base':'S', 'letters':'\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784'},\n            {'base':'T', 'letters':'\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786'},\n            {'base':'TZ','letters':'\\uA728'},\n            {'base':'U', 'letters':'\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244'},\n            {'base':'V', 'letters':'\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245'},\n            {'base':'VY','letters':'\\uA760'},\n            {'base':'W', 'letters':'\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72'},\n            {'base':'X', 'letters':'\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C'},\n            {'base':'Y', 'letters':'\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE'},\n            {'base':'Z', 'letters':'\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762'},\n            {'base':'a', 'letters':'\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250'},\n            {'base':'aa','letters':'\\uA733'},\n            {'base':'ae','letters':'\\u00E6\\u01FD\\u01E3'},\n            {'base':'ao','letters':'\\uA735'},\n            {'base':'au','letters':'\\uA737'},\n            {'base':'av','letters':'\\uA739\\uA73B'},\n            {'base':'ay','letters':'\\uA73D'},\n            {'base':'b', 'letters':'\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253'},\n            {'base':'c', 'letters':'\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184'},\n            {'base':'d', 'letters':'\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A'},\n            {'base':'dz','letters':'\\u01F3\\u01C6'},\n            {'base':'e', 'letters':'\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD'},\n            {'base':'f', 'letters':'\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C'},\n            {'base':'g', 'letters':'\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F'},\n            {'base':'h', 'letters':'\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265'},\n            {'base':'hv','letters':'\\u0195'},\n            {'base':'i', 'letters':'\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131'},\n            {'base':'j', 'letters':'\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249'},\n            {'base':'k', 'letters':'\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3'},\n            {'base':'l', 'letters':'\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u017F\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747'},\n            {'base':'lj','letters':'\\u01C9'},\n            {'base':'m', 'letters':'\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F'},\n            {'base':'n', 'letters':'\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5'},\n            {'base':'nj','letters':'\\u01CC'},\n            {'base':'o', 'letters':'\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275'},\n            {'base':'oi','letters':'\\u01A3'},\n            {'base':'ou','letters':'\\u0223'},\n            {'base':'oo','letters':'\\uA74F'},\n            {'base':'p','letters':'\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755'},\n            {'base':'q','letters':'\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759'},\n            {'base':'r','letters':'\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783'},\n            {'base':'s','letters':'\\u0073\\u24E2\\uFF53\\u00DF\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B'},\n            {'base':'t','letters':'\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787'},\n            {'base':'tz','letters':'\\uA729'},\n            {'base':'u','letters': '\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289'},\n            {'base':'v','letters':'\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C'},\n            {'base':'vy','letters':'\\uA761'},\n            {'base':'w','letters':'\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73'},\n            {'base':'x','letters':'\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D'},\n            {'base':'y','letters':'\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF'},\n            {'base':'z','letters':'\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763'}\n        ];\n        \n        this.diacriticsMap = {};\n        for (var i=0; i < defaultDiacriticsRemovalMap .length; i++){\n            var letters = defaultDiacriticsRemovalMap [i].letters;\n            for (var j=0; j < letters.length ; j++){\n                this.diacriticsMap[letters[j]] = defaultDiacriticsRemovalMap [i].base;\n            }\n        }\n    },\n    \n    // \"what?\" version ... http://jsperf.com/diacritics/12\n    removeDiacritics: function(str) {\n        return str.replace(/[^\\u0000-\\u007E]/g, function(a){\n            return this.diacriticsMap[a] || a; \n        }.bind(this));\n    }\n\n});","Ext.define('Voyant.data.model.AnalysisToken', {\n    extend: 'Ext.data.Model',\n    idProperty: 'term',\n    fields: [\n         {name: 'term'},\n         {name: 'rawFreq', type: 'int'},\n         {name: 'relativeFreq', type: 'number'},\n         {name: 'cluster', type: 'int'},\n         {name: 'clusterCenter', type: 'boolean'},\n         {name: 'vector'}\n    ]\n});","Ext.define('Voyant.data.model.Context', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'id'},\n             {name: 'docIndex', 'type': 'int'},\n             {name: 'position', 'type': 'int'},\n             {name: 'docId'},\n             {name: 'left'},\n             {name: 'keyword'},\n             {name: 'term'},\n             {name: 'right'}\n        ],\n\n        getDocIndex: function() {return this.get(\"docIndex\")},\n        getLeft: function() {return this.get(\"left\")},\n        getMiddle: function() {return this.get(\"middle\")},\n        getHighlightedMiddle: function() {return \"<span class='keyword'>\"+this.getMiddle()+\"</span>\"},\n        getRight: function() {return this.get(\"right\")},\n        getPosition: function() {return this.get(\"position\")},\n        getHighlightedContext: function() {return this.getLeft()+this.getHighlightedMiddle()+this.getRight();}\n\t\n});","Ext.define('Voyant.data.model.CorpusFacet', {\n    extend: 'Ext.data.Model',\n    idProperty: 'label',\n    fields: [\n             {name: 'facet'},\n             {name: 'label'},\n             {name: 'inDocumentsCount', type: 'int'}\n    ],\n    getLabel: function() {\n    \treturn this.get('label')\n    },\n    getFacet: function() {\n    \treturn this.get('facet')\n    },\n\tgetInDocumentsCount: function() {\n\t\treturn this.get('inDocumentsCount')\n\t}\n});","Ext.define('Voyant.data.model.CorpusCollocate', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'term'},\n             {name: 'rawFreq', type: 'int'},\n             {name: 'contextTerm'},\n             {name: 'contextTermRawFreq', type: 'int'}\n    ],\n    \n    getTerm: function() {return this.getKeyword()},\n    getRawFreq: function() {return this.getKeywordRawFreq()},\n    getKeyword: function() {return this.get('term');},\n    getKeywordRawFreq: function() {return this.get('rawFreq');},\n    getContextTerm: function() {return this.get('contextTerm');},\n    getContextTermRawFreq: function() {return this.get('contextTermRawFreq');}\n});","/*\n * Corpus Term\n */\nExt.define('Voyant.data.model.CorpusTerm', {\n    extend: 'Ext.data.Model',\n    idProperty: 'term', // should be unique\n    fields: [\n             {name: 'id'},\n             {name: 'rawFreq', type: 'int'},\n             {name: 'inDocumentsCount', type: 'int'},\n             {name: 'relativeFreq', type: 'float'},\n             {name: 'relativePeakedness', type: 'float'},\n             {name: 'relativeSkewness', type: 'float'},\n             {name: 'comparisonRelativeFreqDifference', type: 'float'},\n             {name: 'distributions'},\n             {name: 'typeTokenRatio-lexical', type: 'float', calculate:  function(data) {\n        \t \treturn data['typesCount-lexical']/data['tokensCount-lexical'];\n             }}\n    ],\n    \n    /**\n     * Get the term.\n     * @returns {String} Returns the term.\n     */\n    getTerm: function() {\n    \treturn this.get('term');\n    },\n    \n    /**\n     * Get the term's raw frequency.\n     * @returns {Number} Returns the term's frequency.\n     */\n\tgetRawFreq: function() {\n\t\treturn parseInt(this.get('rawFreq'));\n\t},\n\t\n\tgetInDocumentsCount: function() {\n\t\treturn parseInt(this.get('inDocumentsCount'));\n\t},\n\t\n\tgetDistributions: function() {\n\t\treturn this.get('distributions');\n\t},\n\t\n\t/**\n\t * Show a one line summary of this term.\n\t */\n\tshow: function(config) {\n\t\tshow(this.getString(config))\n\t},\n\t\n\tgetString: function() {\n\t\treturn this.getTerm()+\": \"+this.getRawFreq();\n\t}\n});","Ext.define('Voyant.data.model.CorpusNgram', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'term'},\n             {name: 'length', type: 'int'},\n             {name: 'rawFreq', type: 'int'},\n             {name: 'distributions'}\n        ],\n    getTerm: function() {return this.get('term');}\n});","Ext.define('Voyant.data.model.Dimension', {\n    extend: 'Ext.data.Model',\n    fields: [\n        {name: 'percentage', type: 'number'}\n    ]\n});","Ext.define('Voyant.data.model.Document', {\n    extend: 'Ext.data.Model',\n    //requires: ['Voyant.data.store.DocumentTerms'],\n    fields: [\n             {name: 'corpus'},\n\t\t\t {name: 'id'},\n\t\t\t {name: 'author'},\n             {name: 'pubDate'},\n             {name: 'publisher'},\n             {name: 'pubPlace'},\n             {name: 'keyword'},\n             {name: 'collection'},\n             {name: 'index', type: 'int'},\n             {name: 'tokensCount-lexical', type: 'int'},\n             {name: 'typesCount-lexical', type: 'int'},\n             {name: 'typeTokenRatio-lexical', type: 'float', calculate:  function(data) {\n        \t \treturn data['typesCount-lexical']/data['tokensCount-lexical'];\n             }},\n             {name: 'lastTokenStartOffset-lexical', type: 'int'},\n             {name: 'title'},\n             {name: 'language', convert: function(data) {return Ext.isEmpty(data) ? '' : data;}},\n             {name: 'sentencesCount', type: 'int'},\n             {name: 'averageWordsPerSentence', type: 'float', calculate:  function(data) {\n        \t \treturn data['sentencesCount'] ? data['tokensCount-lexical'] / data['sentencesCount'] : 0;\n\t\t\t }},\n\t\t\t {name: 'css', type: 'string'}\n    ],\n    \n    getLexicalTokensCount: function() {\n    \treturn this.get('tokensCount-lexical')\n    },\n    \n    getLexicalTypeTokenRatio: function() {\n    \treturn this.get('typeTokenRatio-lexical')\n    },\n    \n    loadDocumentTerms: function(config) {\n\t\tvar dfd = new Ext.Deferred();\n\t\tconfig = config || {};\n\t\tif (Ext.isNumber(config)) {\n\t\t\tconfig = {limit: config};\n\t\t}\n\t\tExt.applyIf(config, {\n\t\t\tlimit: 0\n\t\t})\n\t\tvar documentTerms = this.getDocumentTerms();\n\t\tdocumentTerms.load({\n\t\t\tparams: config,\n\t\t\tcallback: function(records, operation, success) {\n\t\t\t\tif (success) {\n\t\t\t\t\tdfd.resolve(documentTerms)\n\t\t\t\t} else {\n\t\t\t\t\tdfd.reject(operation)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn dfd.promise\n    },\n    \n    loadTokens: function(config) {\n\t\tvar dfd = new Ext.Deferred();\n\t\tconfig = config || {};\n\t\tif (Ext.isNumber(config)) {\n\t\t\tconfig = {limit: config};\n\t\t}\n\t\tExt.applyIf(config, {\n\t\t\tlimit: 0\n\t\t})\n\t\tvar tokens = this.getTokens({});\n\t\ttokens.load({\n\t\t\tparams: config,\n\t\t\tcallback: function(records, operation, success) {\n\t\t\t\tif (success) {\n\t\t\t\t\tdfd.resolve(tokens)\n\t\t\t\t} else {\n\t\t\t\t\tdfd.reject(operation)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn dfd.promise\n    },\n    \n    getTokens: function(config) {\n\t\tconfig = config || {};\n\t\tExt.applyIf(config, {\n\t\t\tproxy: {}\n\t\t});\n\t\tExt.applyIf(config.proxy, {\n\t\t\textraParams: {}\n\t\t})\n\t\tExt.applyIf(config.proxy.extraParams, {\n\t\t\tdocIndex: this.get('index')\n\t\t})\n\t\tExt.apply(config, {\n\t\t\tdocId: this.get('id')\n\t\t});\n\t\treturn this.get('corpus').getTokens(config);\n    },\n\n    getDocumentTerms: function(config) {\n\t\tconfig = config || {};\n\t\tExt.applyIf(config, {\n\t\t\tproxy: {}\n\t\t});\n\t\tExt.applyIf(config.proxy, {\n\t\t\textraParams: {}\n\t\t})\n\t\tExt.applyIf(config.proxy.extraParams, {\n\t\t\tdocIndex: this.get('index')\n\t\t})\n\t\tif (config.corpus) {\n\t\t\treturn config.corpus.getDocumentTerms(config);\n\t\t}\n\t\treturn this.get('corpus').getDocumentTerms(config); // FIXME: when does this happen?\n    },\n    \n    getIndex: function() {\n    \treturn this.get('index');\n    },\n    \n    getId: function() {\n    \treturn this.get('id');\n    },\n    \n    getFullLabel: function() {\n    \tvar author = this.getAuthor();\n    \treturn this.getTitle() + (author ? \"(\"+author+\")\" : ''); // TODO: complete full label\n    },\n    \n    getTitle: function() {\n    \tvar title = this.get('title');\n    \tif (title === undefined) title = '';\n    \ttitle = Ext.isArray(title) ? title.join(\"; \") : title;\n    \ttitle = title.trim().replace(/\\s+/g, ' '); // remove excess whitespace\n    \treturn title;\n    },\n    \n    getTruncated: function(string, max) {\n  \t\tif (string.length > max) {\n\t\t\t// maybe a file or URL?\n\t\t\tvar slash = string.lastIndexOf(\"/\");\n\t\t\tif (slash>-1) {\n\t\t\t\tstring = string.substr(slash+1);\n\t\t\t}\n\t\t\t\n\t\t\tif (string.length>max) {\n\t\t\t\tvar space = string.indexOf(\" \", max-5);\n\t\t\t\tif (space < 0 || space > max) {\n\t\t\t\t\tspace = max;\n\t\t\t\t}\n\t\t\t\tstring = string.substring(0, space) + \"\u2026\";\n\t\t\t}\n\t\t}\n  \t\treturn string;\n    \t\n    },\n    \n    getShortTitle: function() {\n     \tvar title = this.getTitle();\n     \ttitle = title.replace(/\\.(html?|txt|xml|docx?|pdf|rtf|\\/)$/,'');\n     \ttitle = title.replace(/^(the|a|le|l'|un|une)\\s/,'');\n     \treturn this.getTruncated(title, 25);\n    },\n    \n    getTinyTitle: function() {\n    \treturn this.getTruncated(this.getShortTitle(), 10);\n    },\n    \n    getShortLabel: function() {\n    \tvar author = this.getAuthor(25);\n    \treturn (parseInt(this.getIndex())+1) + ') <i>' + this.getShortTitle() + \"</i>\" +(author ? \" (\"+author+\")\" : '')\n    },\n    \n    getTinyLabel: function() {\n    \treturn (parseInt(this.getIndex())+1) + ') ' + this.getTinyTitle();\n    },\n    \n    getPubDate: function() {\n    \treturn this.get(\"pubDate\");\n    },\n    \n    getPublisher: function() {\n    \treturn this.get(\"publisher\");\n    },\n    \n    getPubPlace: function() {\n    \treturn this.get(\"pubPlace\");\n    },\n    \n    getKeyword: function() {\n    \treturn this.getMultiple(\"keyword\");\n    },\n    \n    getCollection: function() {\n    \treturn this.getMultiple(\"collection\");\n    },\n    \n    getAuthor: function(max) {\n    \treturn this.getMultiple(\"author\");\n    },\n    \n    getMultiple: function(field, max) {\n    \tvar val = this.get(field) || \"\";\n    \tval = Ext.isArray(val) ? val.join(\"; \") : val;\n    \tval = val.trim().replace(/\\s+/g, ' ');\n    \treturn max ? this.getTruncated(val, max) : val;\n    },\n    \n    getCorpusId: function() {\n    \treturn this.get('corpus').getAliasOrId();\n    },\n    \n    isPlainText: function() {\n    \tif (this.get(\"extra.Content-Type\") && new RegExp(\"plain\",\"i\").test(this.get(\"extra.Content-Type\"))) {\n    \t\treturn true\n    \t}\n    \treturn false;\n    },\n    \n    getAverageWordsPerSentence: function() {\n    \treturn this.get(\"averageWordsPerSentence\");\n    },\n    \n    show: function() {\n    \tshow(this.getFullLabel())\n    },\n    \n    getCorpus: function() {\n    \treturn this.get('corpus');\n    },\n    \n    \n    getText: function(config) {\n\t\tconfig = config || {};\n\t\tExt.apply(config, {\n\t\t\tdocIndex: this.get('index')\n\t\t});\n\t\treturn this.getCorpus().getText(config);\n    },\n    \n    getPlainText: function(config) {\n\t\tconfig = config || {};\n\t\tExt.apply(config, {\n\t\t\ttemplate: 'docTokens2plainText',\n\t\t\tdocIndex: this.get('index')\n\t\t});\n\t\treturn this.getCorpus().getText(config);\n    },\n    \n    getLemmasArray: function(config) {\n    \tconfig = config || {};\n    \tconfig.docId = this.getId();\n\t\treturn this.getCorpus().getLemmasArray(config);\n    },\n    \n    getEntities: function(config) {\n    \tconfig = config || {};\n    \tExt.applyIf(config, {\n    \t\tproxy: {}\n    \t});\n    \tExt.applyIf(config.proxy, {\n    \t\textraParams: {}\n    \t})\n    \tExt.applyIf(config.proxy.extraParams, {\n    \t\tdocIndex: this.get('index')\n    \t})\n\t\treturn Ext.create(\"Voyant.data.store.DocumentEntities\", Ext.apply(config, {corpus: this.getCorpus(), docId: this.getId()}));\n    },\n    \n    loadEntities: function(config) {\n\t\tvar dfd = new Ext.Deferred();\n\t\tthis.getEntities().load({\n\t\t\tparams: config,\n\t\t\tcallback: function(records, operation, success) {\n\t\t\t\tif (success) {\n\t\t\t\t\tdfd.resolve(records)\n\t\t\t\t} else {\n\t\t\t\t\tdfd.reject(operation.error.response);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn dfd.promise\n\t},\n\t\n\tgetCSS: function() {\n\t\treturn this.get('css') || this.get('parent_css');\n\t}\n    \n});","Ext.define('Voyant.data.model.DocumentEntity', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'term'},\n             {name: 'docIndex', 'type': 'int'},\n             {name: 'rawFreq', type: 'int'},\n             {name: 'type'},\n             {name: 'positions'},\n\t\t\t {name: 'offsets'}\n        ],\n    getTerm: function() {return this.get('term');},\n    getDocIndex: function() {return this.get('docIndex')},\n    getRawFreq: function() {return this.get('rawFreq')},\n    getPositions: function() {return this.get('positions')},\n\tgetOffsets: function() {return this.get('offsets')}\n});","Ext.define('Voyant.data.model.DocumentQueryMatch', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'id'},\n             {name: 'count', 'type': 'int'},\n             {name: 'query'},\n             {name: 'distributions'}\n        ],\n    getCount: function() {return this.get('count')},\n    getDistributions: function() {return this.get(\"distributions\")},\n    getDocIds: function() {return this.get(\"docIds\")}\n});","Ext.define('Voyant.data.model.DocumentTerm', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'id'},\n             {name: 'term'},\n             {name: 'docIndex', 'type': 'int'},\n             {name: 'docId'},\n             {name: 'rawFreq', type: 'int'},\n             {name: 'relativeFreq', type: 'float'},\n             {name: 'tfidf', type: 'float'},\n             {name: 'zscore', type: 'float'},\n             {name: 'zscoreRatio', type: 'float'},\n             {name: 'distributions'}\n        ],\n    getTerm: function() {return this.get('term');},\n    getDocIndex: function() {return this.get('docIndex')},\n    getRawFreq: function() {return this.get('rawFreq')},\n    getRelativeFreq: function() {return this.get('relativeFreq')},\n    getDistributions: function() {return this.get('distributions')}\n});","Ext.define('Voyant.data.model.PrincipalComponent', {\n    extend: 'Ext.data.Model',\n    fields: [\n        {name: 'eigenValue', type: 'number'},\n        {name: 'eigenVectors'}\n    ]\n});","/*\n * Related Term\n */\nExt.define('Voyant.data.model.RelatedTerm', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'source'},\n             {name: 'target'},\n             {name: 'rawFreq', type: 'int'}\n    ],\n    \n    /**\n     * Get the source term.\n     * @returns {String} Returns the term.\n     */\n    getSource: function() {\n    \treturn this.get('source');\n    },\n    \n    /**\n     * Get the source term.\n     * @returns {String} Returns the term.\n     */\n    getTarget: function() {\n    \treturn this.get('target');\n    },\n    \n\t/**\n\t * Show a one line summary of this term.\n\t */\n\tshow: function(config) {\n\t\tshow(this.getString(config))\n\t},\n\t\n\tgetString: function() {\n\t\treturn this.getSource()+\"-\"+this.getTarget();\n\t}\n});","Ext.define('Voyant.data.model.StatisticalAnalysis', {\n    extend: 'Ext.data.Model',\n    requires: ['Voyant.data.model.PrincipalComponent', 'Voyant.data.model.Dimension', 'Voyant.data.model.AnalysisToken'],\n    fields: [\n         {name: 'id'}\n//         ,{name: 'dimensions', reference: 'Voyant.data.model.Dimension'}\n//         ,{name: 'tokens', reference: 'Voyant.data.model.AnalysisToken'}\n    ]\n    \n\t// alternative access methods to \"reference\" or \"hasMany\"\n\t,getPrincipalComponents: function() {\n\t\tvar pcs = [];\n\t\tthis.data.principalComponents.forEach(function(pc) {\n\t\t\tpcs.push(Ext.create('Voyant.data.model.PrincipalComponent', pc));\n\t\t});\n\t\treturn pcs;\n\t}\n\t,getDimensions: function() {\n\t\tvar dimensions = [];\n\t\tthis.data.dimensions.forEach(function(dim) {\n\t\t\tdimensions.push(Ext.create('Voyant.data.model.Dimension', {percentage: dim}));\n\t\t});\n\t\treturn dimensions;\n\t}\n\t,getTokens: function() {\n\t\tvar tokens = [];\n\t\tthis.data.tokens.forEach(function(tok) {\n\t\t\ttokens.push(Ext.create('Voyant.data.model.AnalysisToken', tok));\n\t\t});\n\t\treturn tokens;\n\t}\n\n\n//    ,hasMany: [{\n//    \tname: 'dimensions', model: 'Voyant.data.model.Dimension'\n//    },{\n//    \tname: 'tokens', model: 'Voyant.data.model.AnalysisToken'\n//    }]\n});","Ext.define('Voyant.data.model.Token', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'id'},\n             {name: 'docId'},\n             {name: 'docIndex', type: 'int'},\n             {name: 'token'},\n             {name: 'rawFreq'},\n             {name: 'tokenType'},\n             {name: 'position', type: 'int'},\n             {name: 'startOffset', type: 'int'},\n             {name: 'endOffset', type: 'int'}\n        ],\n    statics: {\n\t\t/**\n\t\t * Parse an element's ID and return doc index and position info.\n\t\t * @param {*} el Either an ExtJS element or an HTML element\n\t\t * @returns {Object}\n\t\t */\n    \tgetInfoFromElement: function(el) {\n    \t\tif (el && el.id) {\n    \t\t\tvar parts = el.id.split(\"_\");\n    \t\t\treturn {\n    \t\t\t\tdocIndex: parseInt(parts[1]),\n    \t\t\t\tposition: parseInt(parts[2])\n    \t\t\t};\n    \t\t}\n    \t}\n    },\n\tisWord: function() {\n\t\treturn this.getTokenType()=='lexical'; // maybe something else later?\n\t},\n\tisStopword: function() {\n\t\treturn this.get(\"stopword\")==\"true\";\n\t},\n\tgetTokenType: function() {\n\t\treturn this.get(\"tokenType\");\n\t},\n\tgetId: function() {\n\t\treturn [\"\",this.getDocIndex(),this.getPosition()].join(\"_\");\n\t},\n\tgetDocIndex: function() {\n\t\treturn this.get(\"docIndex\");\n\t},\n\tgetDocId: function() {\n\t\treturn this.get(\"docId\");\n\t},\n\tgetTerm: function() {\n\t\treturn this.get(\"term\");\n\t},\n\tgetTermWithLineSpacing: function(isPlainText) {\n\t\tvar term = this.getTerm();\n\t\tif (isPlainText) {\n\t\t\tterm = term.replace(/(\\r\\n|\\r|\\n)\\s*/g,\"<br />\");\n\t\t} else {\n\t\t\t// alternate very general regex: <[^>]*>\n\t\t\tterm = term.replace(/<\\/?(.|\\n|\\r)*?>/gm, \"<br /><br />\").replace(/>\\s+</g,\"><\").replace(/<br \\/><br \\/>(<br \\/>)+/g,\"<br \\/><br \\/>\");\n\t\t}\n\t\treturn term;\n\t},\n\tgetPosition: function() {\n\t\treturn this.get(\"position\");\n\t},\n\tgetDocumentRawFreq: function() {\n\t\treturn this.get(\"rawFreq\");\n\t}\n});","/*\n * Related Term\n */\nExt.define('Voyant.data.model.TermCorrelation', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'source'},\n             {name: 'target'},\n             {name: 'correlation', type: 'float'},\n             {name: 'significance', type: 'float'},\n             {name: 'sourceTerm', calculate: function(data) {return data.source.term}},\n             {name: 'targetTerm', calculate: function(data) {return data.target.term}},\n             {name: 'source-distributions', calculate: function(data) {return data.source.distributions}},\n             {name: 'target-distributions', calculate: function(data) {return data.target.distributions}}\n    ],\n    \n    /**\n     * Get the source term.\n     * @returns {String} Returns the term.\n     */\n    getSource: function() {\n    \treturn this.get('source');\n    },\n    \n    /**\n     * Get the source term.\n     * @returns {String} Returns the term.\n     */\n    getTarget: function() {\n    \treturn this.get('target');\n    },\n    \n\t/**\n\t * Show a one line summary of this term.\n\t */\n\tshow: function(config) {\n\t\tshow(this.getString(config))\n\t},\n\t\n\tgetString: function() {\n\t\treturn this.getSource()+\"-\"+this.getTarget();\n\t}\n});","Ext.define('Voyant.data.model.Entity', {\n\textend: 'Ext.data.Model',\n\tfields: [\n\t\t{name: 'term'},\n\t\t{name: 'normalized'},\n\t\t{name: 'type'},\n\t\t{name: 'docIndex', 'type': 'int'},\n\t\t{name: 'rawFreq', type: 'int'},\n\t\t{name: 'positions'},\n\t\t{name: 'offsets'},\n\t\t{name: 'distributions'}\n\t],\n\tgetTerm: function() {return this.get('term');},\n\tgetNormalized: function() {return this.get('normalized');},\n\tgetType: function() {return this.get('type')},\n\tgetDocIndex: function() {return this.get('docIndex')},\n\tgetRawFreq: function() {return this.get('rawFreq')},\n\tgetDistributions: function() {return this.get('distributions')},\n\tgetPositions: function() {return this.get('positions')},\n\tgetOffsets: function() {return this.get('offsets')}\n});","Ext.define('Voyant.data.store.VoyantStore', {\r\n\tmixins: ['Voyant.util.Localization'],\r\n\tconfig: {\r\n\t\tcorpus: undefined,\r\n\t\tparentPanel: undefined\r\n\t},\r\n\tstatics: {\r\n\t\ti18n: {\r\n\t\t\tmaxTime: 'This tool has exceeded the maximum run time and has returned partial results.'\r\n\t\t}\r\n\t},\r\n\tconstructor: function(config, extras) {\r\n\t\tvar me = this;\r\n\t\tconfig = config || {};\r\n\t\tExt.applyIf(config, {\r\n\t\t\tremoteSort: true,\r\n\t\t\tautoLoad: false,\r\n//\t\t\tlisteners: {\r\n//\t\t\t\tbeforeload: function(store, operation) {\r\n//\t\t\t\t\tvar parent = this.getParentPanel();\r\n//\t\t\t\t\tif (parent !== undefined) {\r\n//\t\t\t\t\t\tvar params = parent.getApiParams();\r\n//\t\t\t\t\t\toperation = operation ? (operation===1 ? {} : operation) : {};\r\n//\t\t\t\t\t\toperation.params = operation.params || {};\r\n//\t\t\t\t\t\tfor (var key in params) {\r\n//\t\t\t\t\t\t\toperation.params[key] = params[key];\r\n//\t\t\t\t\t\t}\r\n//\t\t\t\t\t}\r\n//\t\t\t\t}\r\n//\t\t\t},\r\n//\t\t\tscope: this,\r\n\t\t\t// define buffered configuration even if ignored when this isn't a buffered store\r\n\t\t\tpagePurgeCount : 0, // don't purge any data\r\n\t\t\tpageSize : 100, // each request is more intenstive, so do fewer of them then default\r\n\t\t\tleadingBufferZone : 200 // stay two pages ahead\r\n\t\t});\r\n\t\tconfig.proxy = config.proxy || {};\r\n\t\tExt.applyIf(config.proxy, {\r\n\t\t\ttype: 'ajax',\r\n\t\t\turl: Voyant.application.getTromboneUrl(),\r\n\t\t\tactionMethods: {read: 'POST'},\r\n\t\t\ttimeout: extras['proxy.timeout'] || 30000,\r\n\t\t\treader: {\r\n\t\t\t\ttype: 'json',\r\n\t\t\t\trootProperty: extras['proxy.reader.rootProperty'],\r\n\t\t\t\ttotalProperty: extras['proxy.reader.totalProperty'],\r\n\t\t\t\tmetaProperty: extras['proxy.reader.metaProperty'] || 'metaData'\r\n\t\t\t},\r\n\t\t\tsimpleSortMode: true,\r\n\t\t\tlisteners: {\r\n\t\t\t\texception: function(proxy, request, operation) {\r\n\t\t\t\t\tif (me.parentPanel && me.parentPanel.showError) {\r\n\t\t\t\t\t\t// FIXME: this should probably send the request, not the operation\r\n\t\t\t\t\t\tme.parentPanel.showError(operation)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tendprocessresponse: function(proxy, response, operation) {\r\n\t\t\t\t\tif (operation.wasSuccessful()) {\r\n\t\t\t\t\t\t// check for tool messages from the server\r\n\t\t\t\t\t\tvar config = proxy.getReader().initialConfig;\r\n\t\t\t\t\t\tvar rootPropertyParent = config.rootProperty.split('.')[0];\r\n\t\t\t\t\t\tvar json = JSON.parse(response.responseText);\r\n\t\t\t\t\t\tvar parent = json[rootPropertyParent];\r\n\t\t\t\t\t\tif (parent && parent.messages) {\r\n\t\t\t\t\t\t\tvar message = '';\r\n\t\t\t\t\t\t\tvar firstMessage = parent.messages[0];\r\n\t\t\t\t\t\t\tif (firstMessage.code === 'maxTime') {\r\n\t\t\t\t\t\t\t\tmessage = me.localize('maxTime');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tmessage = firstMessage.message;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (me.parentPanel && me.parentPanel.toastInfo) {\r\n\t\t\t\t\t\t\t\tme.parentPanel.toastInfo(message);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.warn('VoyantStore server message: '+message);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\tconfig.proxy.extraParams = config.proxy.extraParams || {};\r\n\t\tExt.applyIf(config.proxy.extraParams, {\r\n\t\t\ttool: extras['proxy.extraParams.tool']\r\n\t\t});\r\n\t\t\r\n\t\tif (config.parentPanel !== undefined) {\r\n\t\t\tExt.applyIf(config.proxy.extraParams, {\r\n\t\t\t\tforTool: config.parentPanel.xtype\r\n\t\t\t});\r\n\t\t\tthis.setParentPanel(config.parentPanel);\r\n\t\t\tconfig.parentPanel.on(\"loadedCorpus\", function(src, corpus) {\r\n\t\t\t\tthis.setCorpus(corpus);\r\n\t\t\t}, this);\r\n\t\t\tconfig.listeners = config.listeners || {};\r\n\t\t\tconfig.listeners.beforeload = {\r\n\t\t\t\t\tfn: function(store, operation) {\r\n\t\t\t\t\t\tvar parent = this.getParentPanel(), proxy = store.getProxy();\r\n\t\t\t\t\t\tif (parent !== undefined) {\r\n\r\n\t\t\t\t\t\t\tvar params = parent.getApiParams();\r\n\t\t\t\t\t\t\toperation = operation ? (operation===1 ? {} : operation) : {};\r\n\t\t\t\t\t\t\toperation.params = operation.params || {};\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// unset any previously set extra params (only applies with proxy and buffered store)\r\n\t\t\t\t\t\t\tif (proxy && this.isBufferedStore) {\r\n\t\t\t\t\t\t\t\tExt.Array.from(this.previouslySetExtraParams).forEach(function(key) {\r\n\t\t\t\t\t\t\t\t\tproxy.setExtraParam(key, undefined);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tthis.previouslySetExtraParams = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfor (var key in params) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t/* TODO NOT SURE ABOUT THIS\r\n\t\t\t\t\t\t\t\t// don't sent stopList when there's a query\r\n\t\t\t\t\t\t\t\tif (key==\"stopList\" && \"query\" in params && params.query) {continue;}\r\n\t\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (proxy && this.isBufferedStore) { // also set proxy for automatic buffering calls\r\n\t\t\t\t\t\t\t\t\tthis.previouslySetExtraParams.push(key);\r\n\t\t\t\t\t\t\t\t\tproxy.setExtraParam(key, params[key]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\toperation.params[key] = params[key];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tExt.apply(this, config);\r\n\t},\r\n\tsetCorpus: function(corpus) {\r\n\t\tif (corpus && this.getProxy && this.getProxy()) {\r\n\t\t\tthis.getProxy().setExtraParam('corpus', Ext.isString(corpus) ? corpus : corpus.getId());\r\n\t\t}\r\n\t\tthis.callParent(arguments);\r\n\t},\r\n\tgetString: function(config) {\r\n\t\tvar count = this.getCount();\r\n\t\treturn \"This store contains \"+this.getCount()+\" items\"+(count>0 ? \" with these fields: \"+this.getAt(0).getFields().map(function(field) {return field.getName()}).join(\", \") : \"\")+\".\"\r\n\t}\r\n\t\r\n});","Ext.define('Voyant.data.store.CAAnalysisMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.StatisticalAnalysis',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CA',\n\t\t\t'proxy.reader.rootProperty': 'correspondenceAnalysis',\n\t\t\t'proxy.reader.totalProperty': 'correspondenceAnalysis.totalTerms'\n\t\t}])\n\t\tconfig.proxy.extraParams.withDistributions = true;\n\t}\n});\n\nExt.define('Voyant.data.store.CAAnalysis', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.CAAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CAAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.CAAnalysisBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.CAAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CAAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.ContextsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.Context',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentContexts',\n\t\t\t'proxy.reader.rootProperty': 'documentContexts.contexts',\n\t\t\t'proxy.reader.totalProperty': 'documentContexts.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.Contexts', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.ContextsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.ContextsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.ContextsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.ContextsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.ContextsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.CorpusCollocatesMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.CorpusCollocate',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CorpusCollocates',\n\t\t\t'proxy.reader.rootProperty': 'corpusCollocates.collocates',\n\t\t\t'proxy.reader.totalProperty': 'corpusCollocates.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusCollocates', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.CorpusCollocatesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusCollocatesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusCollocatesBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.CorpusCollocatesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusCollocatesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.CorpusFacetsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: Voyant.data.model.CorpusFacet,\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CorpusFacets',\n\t\t\t'proxy.reader.rootProperty': 'corpusFacets.facets',\n\t\t\t'proxy.reader.totalProperty': 'corpusFacets.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusFacets', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.CorpusFacetsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusFacetsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusFacetsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.CorpusFacetsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusFacetsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.CorpusTermsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: Voyant.data.model.CorpusTerm,\n//    statics: {\n//    \ti18n: {\n//    \t\tgetString: \"This store has {0} terms with a total of {1} occurrences.\"\n//    \t}\n//    },\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CorpusTerms',\n\t\t\t'proxy.reader.rootProperty': 'corpusTerms.terms',\n\t\t\t'proxy.reader.totalProperty': 'corpusTerms.total'\n\t\t}])\n\t},\n\n\tshow: function(config) {\n\t\tshow(this.getString(config))\n\t}\n\n});\n\n/*\n * Corpus Terms store.\n */\nExt.define('Voyant.data.store.CorpusTerms', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.CorpusTermsMixin'],\n    model: Voyant.data.model.CorpusTerm,\n\t\n\t/**\n\t * @method each\n\t * Iterate over each {@link Voyant.data.model.CorpusTerm corpus term} in this store.\n\t * \n\t * \tnew Corpus(\"Hello Voyant!\").loadCorpusTerms().then(function(corpusTerms) {\n\t * \t\tcorpusTerms.each(function(corpusTerm) {\n\t * \t\t\tcorpusTerm.show();\n\t * \t\t});\n\t * \t});\n\t * \n\t * @param {function} function The function to call for each corpus term.\n\t */\n\t\n\t/**\n\t * @method show\n\t * Shows a one line summary of the corpus terms.\n\t * \n\t * \tnew Corpus(\"Hello Voyant!\").loadCorpusTerms().then(function(corpusTerms) {\n\t * \t\tcorpusTerms.show();\n\t * \t});\n\t */\n\t\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n\t\n});\n\nExt.define('Voyant.data.store.CorpusTermsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.CorpusTermsMixin'],\n    model: Voyant.data.model.CorpusTerm,\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.DocumentQueryMatchesMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.DocumentQueryMatch',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentsFinder',\n\t\t\t'proxy.reader.rootProperty': 'documentsFinder.queries',\n\t\t\t'proxy.reader.totalProperty': undefined,\n\t\t\t'proxy.reader.metaProperty': 'documentsFinder.corpus'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentQueryMatches', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.DocumentQueryMatchesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentQueryMatchesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentQueryMatchesBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.DocumentQueryMatchesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentQueryMatchesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.DocumentTermsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.DocumentTerm',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentTerms',\n\t\t\t'proxy.reader.rootProperty': 'documentTerms.terms',\n\t\t\t'proxy.reader.totalProperty': 'documentTerms.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentTerms', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.DocumentTermsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentTermsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.DocumentTermsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.DocumentEntitiesMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.DocumentEntity',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentEntities',\n\t\t\t'proxy.reader.rootProperty': 'documentEntities.entities',\n\t\t\t'proxy.reader.totalProperty': 'documentEntities.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentEntities', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.DocumentEntitiesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentEntitiesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentEntitiesBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.DocumentEntitiesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentEntitiesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.DocumentsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.Document',\n    statics: {\n    \ti18n: {\n    \t}\n    },\n\tsorters: {\n        property: 'index',\n        direction: 'ASC'\n\t},\n\tremoteSort: true,\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentsMetadata',\n\t\t\t'proxy.reader.rootProperty': 'documentsMetadata.documents',\n\t\t\t'proxy.reader.totalProperty': 'documentsMetadata.total'\n\t\t}])\n\t},\n\tlisteners: {\n\t\t load: function(store, records, successful, opts) {\n\t\t\t if (successful) {\n\t\t\t\t var corpus = store.getCorpus();\n\t\t\t\t records.forEach(function(record) {\n\t\t\t\t\t record.set('corpus', corpus);\n\t\t\t\t });\n\t\t\t }\n\t\t }\n\t},\n\tgetDocument: function(config) {\n\t\treturn Ext.isNumber(config) ? this.getAt(config) : this.getById(config);\n\t}\n\t\n});\n\nExt.define('Voyant.data.store.Documents', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.DocumentsMixin'],\n    model: 'Voyant.data.model.Document',\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.DocumentsMixin'],\n    model: 'Voyant.data.model.Document',\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.PCAAnalysisMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.StatisticalAnalysis',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.PCA',\n\t\t\t'proxy.reader.rootProperty': 'pcaAnalysis',\n\t\t\t'proxy.reader.totalProperty': 'pcaAnalysis.totalTerms'\n\t\t}])\n\t\tconfig.proxy.extraParams.withDistributions = true;\n\t}\n});\n\nExt.define('Voyant.data.store.PCAAnalysis', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.PCAAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.PCAAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.PCAAnalysisBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.PCAAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.PCAAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.DocSimAnalysisMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.StatisticalAnalysis',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentSimilarity',\n\t\t\t'proxy.reader.rootProperty': 'documentSimilarity',\n\t\t\t'proxy.reader.totalProperty': 'documentSimilarity.total'\n\t\t}])\n\t\tconfig.proxy.extraParams.withDistributions = true;\n\t}\n});\n\nExt.define('Voyant.data.store.DocSimAnalysis', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.DocSimAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocSimAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.DocSimAnalysisBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.DocSimAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocSimAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.CorpusNgramsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.CorpusNgram',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CorpusNgrams',\n\t\t\t'proxy.reader.rootProperty': 'corpusNgrams.ngrams',\n\t\t\t'proxy.reader.totalProperty': 'corpusNgrams.total',\n\t\t\t'proxy.timeout': 90000\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusNgrams', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.CorpusNgramsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusNgramsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusNgramsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.CorpusNgramsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusNgramsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.RelatedTermsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.RelatedTerm',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.SemanticGraph',\n\t\t\t'proxy.reader.rootProperty': 'semanticGraph.edges',\n\t\t\t'proxy.reader.totalProperty': 'semanticGraph.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.RelatedTerms', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.RelatedTermsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.RelatedTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.RelatedTermsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.RelatedTermsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.RelatedTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.TermCorrelationsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.TermCorrelation',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CorpusTermCorrelations',\n\t\t\t'proxy.extraParams.withDistributions': 'true',\n\t\t\t'proxy.reader.rootProperty': 'termCorrelations.correlations',\n\t\t\t'proxy.reader.totalProperty': 'termCorrelations.total',\n\t\t\t'proxy.timeout': 90000\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.TermCorrelations', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.TermCorrelationsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TermCorrelationsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.TermCorrelationsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.TermCorrelationsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TermCorrelationsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.TokensMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.Token',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentTokens',\n\t\t\t'proxy.reader.rootProperty': 'documentTokens.tokens',\n\t\t\t'proxy.reader.totalProperty': 'documentTokens.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.Tokens', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.TokensMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TokensMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.TokensBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.TokensMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TokensMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.TSNEAnalysisMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.StatisticalAnalysis',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.TSNE',\n\t\t\t'proxy.reader.rootProperty': 'tsneAnalysis',\n\t\t\t'proxy.reader.totalProperty': 'tsneAnalysis.totalTerms'\n\t\t}])\n\t\tconfig.proxy.extraParams.withDistributions = true;\n\t\tconfig.proxy.extraParams.noCache = 1;\n\t}\n});\n\nExt.define('Voyant.data.store.TSNEAnalysis', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.TSNEAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TSNEAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.TSNEAnalysisBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.TSNEAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TSNEAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.model.NotebookFacet', {\n    extend: 'Ext.data.Model',\n    idProperty: 'label',\n    fields: [\n             {name: 'facet'},\n             {name: 'label'},\n             {name: 'inDocumentsCount', type: 'int'}\n    ],\n    getLabel: function() {\n    \treturn this.get('label')\n    },\n    getFacet: function() {\n    \treturn this.get('facet')\n    },\n\tgetInDocumentsCount: function() {\n\t\treturn this.get('inDocumentsCount')\n\t}\n});\n\nExt.define('Voyant.data.store.NotebookFacetsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: Voyant.data.model.NotebookFacet,\n\tconstructor : function(config) {\n\t\tif (config.facet) {\n\t\t\tif (config.proxy === undefined) {\n\t\t\t\tconfig.proxy = {};\n\t\t\t}\n\t\t\tif (config.proxy.extraParams === undefined) {\n\t\t\t\tconfig.proxy.extraParams = {};\n\t\t\t}\n\t\t\tconfig.proxy.extraParams.facet = config.facet;\n\t\t\tconfig.proxy.extraParams.noCache = 1;\n\t\t\tdelete config.facet;\n\t\t}\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'notebook.CatalogueFacets',\n\t\t\t'proxy.reader.rootProperty': 'catalogue.facets',\n\t\t\t'proxy.reader.totalProperty': 'catalogue.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.NotebookFacets', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.NotebookFacetsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.NotebookFacetsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.NotebookFacetsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.NotebookFacetsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.NotebookFacetsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","/*\n * @class VoyantTable\n * A VoyantTable can facilitate working with tabular data structures, as well as\n * displaying results (especially with {@link #embed} and {@link show}). \n * Here's a simple example showing the Zipf-Law distribution of the top 20 frequency terms.\n * \n * \tnew Corpus(\"austen\").loadCorpusTerms(20).then(function(corpusTerms) {\n * \t\tvar table = new VoyantTable({rowKey: 0}); // use first column as row key\n * \t\tcorpusTerms.each(function(corpusTerm) {\n *\t\t\ttable.addRow([corpusTerm.getTerm(), corpusTerm.getRawFreq()]);\n * \t\t});\n * \t\ttable.embed(\"voyantchart\"); // graph table as line chart\n * \t});\n */\nExt.define('Voyant.data.table.Table', {\n\talternateClassName: [\"VoyantTable\"],\n\tconfig: {\n\t\t\n\t\t/**\n\t\t * @private\n\t\t */\n\t\trows: [],\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\theaders: [],\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\trowsMap: {},\n\t\t\n\t\t/**\n\t\t * @private\n\t\t */\n\t\theadersMap: {},\n\t\t\n\t\t/**\n\t\t * Specifies that a specific header should serve as row key.\n\t\t * \n\t\t */\n\t\trowKey: undefined,\n\t\t\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tmodel: undefined\n\t},\n\t\n\tclone: function() {\n\t\tvar table = new VoyantTable();\n\t\ttable.setRows(Ext.clone(this.getRows()));\n\t\ttable.setHeaders(Ext.clone(this.getHeaders()))\n\t\ttable.setRowsMap(Ext.clone(this.getRowsMap()))\n\t\ttable.setHeadersMap(Ext.clone(this.getHeadersMap()))\n\t\ttable.setRowKey(Ext.clone(this.getRowKey()))\n\t\treturn table;\n\t},\n\n\tconstructor: function(config, opts) {\n\n\t\tconfig = config || {};\n\t\tif (config.fromBlock) {\n\t\t\tvar data = Voyant.notebook.Notebook.getDataFromBlock(config.fromBlock);\n\t\t\tif (data) {\n\t\t\t\tdata = data.trim();\n\t\t\t\tconfig.rows = [];\n\t\t\t\tdata.split(/\\n+/).forEach(function(line,i) {\n\t\t\t\t\tvar cells = line.split(\"\\t\");\n\t\t\t\t\tif (i==0 && !config.noHeaders) {\n\t\t\t\t\t\tconfig.headers = cells\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconfig.rows.push(cells)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t}\n\t\t} else if (config.count && Ext.isArray(config.count)) {\n\t\t\t// create counts\n\t\t\tvar freqs = {};\n\t\t\tconfig.count.forEach(function(item) {freqs[item] = freqs[item] ? freqs[item]+1 : 1;});\n\t\t\t// sort counts\n\t\t\tvar counts = [];\n\t\t\tfor (var key in freqs) {counts.push([key, freqs[key]])}\n\t\t\tcounts.sort(function(a,b) {return b[1] - a[1]});\n\t\t\tif (config.limit && counts.length>config.limit) {\n\t\t\t\tcounts.splice(config.limit);\n\t\t\t}\n\t\t\tif (config.orientation && config.orientation==\"horizontal\") {\n\t\t\t\tconfig.headers = counts.map(function(item) {return item[0]});\n\t\t\t\tconfig.rows = [counts.map(function(item) {return item[1]})];\n\t\t\t} else {\n\t\t\t\tconfig.headers = config.headers ? config.headers : [\"Item\",\"Count\"];\n\t\t\t\tconfig.rows = counts;\n\t\t\t}\n\t\t} else if (config.isStore || config.store) {\n\t\t\tvar store = config.store ? config.store : config;\n\t\t\tif (opts && opts.headers) {\n\t\t\t\tconfig.headers = opts.headers;\n\t\t\t} else {\n\t\t\t\t// store.getModel() doesn't seem to work (for CorpusTerms at least)\n\t\t\t\t// so instead we'll try looking at the first record to get headers\n\t\t\t\tvar record = store.getAt(0);\n\t\t\t\tif (record) { // don't know what to do if this fails?\n\t\t\t\t\tconfig.headers = record.getFields().map(function(field) {return field.getName()});\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// now we get rows\n\t\t\tconfig.rows = [];\n\t\t\tstore.each(function(record) {\n\t\t\t\tvar data = record.getData();\n\t\t\t\tvar cells = config.headers.map(function(header) {return data[header]}); // only from headers\n\t\t\t\tconfig.rows.push(cells);\n\t\t\t}, this);\n\t\t}\n\n\t\t// not sure why config isn't working\n\t\tif (!config.rows && Ext.isArray(config)) {\n\t\t\tconfig.rows = config;\n\t\t}\n\t\tif (!this.getHeaders()) {\n\t\t\tif (!config.headers && !config.noHeaders && config.rows) {\n\t\t\t\tthis.setHeaders(config.rows.shift())\n\t\t\t} else {\n\t\t\t\tthis.setHeaders(Ext.Array.from(config.headers));\n\t\t\t}\n\t\t}\n\t\tthis.setRows(Ext.Array.from(config.rows));\n\t\tthis.setRowKey(config.rowKey ? config.rowKey : this.getHeaders()[0]);\n\n\t\t// if we have no headers, use the index as header\n\t\tif (this.getHeaders().length==0) {\n\t\t\tvar firstRow = this.getRow(0, false);\n\t\t\tif (firstRow) {\n\t\t\t\tthis.setHeaders(firstRow.map(function(cell, i) {return i}));\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar headersMap = {};\n\t\tthis.getHeaders().forEach(function(header, i) {\n\t\t\theadersMap[header] = i;\n\t\t});\n\t\tthis.setHeadersMap(headersMap);\n\t\t\n\t\tthis.reMapRows();\n\t\t\n\t\tthis.callParent();\n\t},\n\taddRow: function(row) {\n\t\tif (Ext.isArray(row))\n\t\tif (Ext.isObject(row)) {\n\t\t\tvar len = this.getRows().length;\n\t\t\tfor (var key in row) {\n\t\t\t\tthis.updateCell(len, key, row[key])\n\t\t\t}\n\t\t\t\n\t\t} else if (Ext.isArray(row)) {\n\t\t\tthis.getRows().push(row);\n\t\t\tvar header = this.getColumnIndex(this.getRowKey());\n\t\t\tif (header!==undefined && row[header]!==undefined) {\n\t\t\t\tthis.getRowsMap()[row[header]] = this.getRows().length-1;\n\t\t\t}\n\t\t}\n\t},\n\teachRecord: function(fn, scope) {\n\t\tvar item, i=0, len=this.getRows().length;\n\t\tfor (; i<len; i++) {\n            item = this.getRecord(i);\n\t\t\tif (fn.call(scope || item, item, i, len) === false) {\n                break;\n            }\t\t\t\n\t\t}\n\t},\n\teachRow: function(fn, asMap, scope) {\n\t\tvar item, i=0, len=this.getRows().length;\n\t\tfor (; i<len; i++) {\n            item = this.getRow(i, asMap);\n\t\t\tif (fn.call(scope || item, item, i, len) === false) {\n                break;\n            }\t\t\t\n\t\t}\n\t},\n\tgetRow: function(index, asMap) {\n\t\tvar r = this.getRowIndex(index);\n\t\tif (asMap) {\n\t\t\tvar row = {};\n\t\t\tvar headers = this.getHeaders();\n\t\t\tExt.Array.from(this.getRows()[r]).forEach(function(item, i) {\n\t\t\t\trow[headers[i] || i] = item;\n\t\t\t}, this);\n\t\t\treturn row;\n\t\t} else {\n\t\t\treturn this.getRows()[r];\n\t\t}\n\t},\n\tgetRecord: function(index) {\n\t\tif (this.model) {return new this.model(this.getRow(index, true))}\n\t},\n\tmapRows: function(fn, asMap, scope) {\n\t\tvar rows = [];\n\t\tthis.eachRow(function(row, i) {\n//\t\t\tif (Object.keys(row).length>0) {\n\t\t\t\trows.push(fn.call(scope || this, row, i))\n//\t\t\t}\n\t\t}, asMap, this)\n\t\treturn rows;\n\t},\n\t\n\t/**\n\t * Update the cell value at the specified row and column.\n\t * \n\t * This will create the row and column as needed. If there's an existing value in the cell,\n\t * it will be added to the new value, unless the `replace` argument is set to true.\n\t * \n\t * @param {Number/String} row The cell's row.\n\t * @param {Number/String} column The cell's column.\n\t * @param {Mixed} value The cell's value.\n\t * @param {boolean} [replace] Replace the current value (if it exists), otherwise\n\t * the value is added to any current value (which is the default behaviour).\n\t */\n\tupdateCell: function(row, column, value, replace) {\n\t\tvar rows = this.getRows();\n\t\tvar r = Ext.isNumber(row) ? row : this.getRowIndex(row);\n\t\tvar c = this.getColumnIndex(column);\n\t\tif (rows[r]===undefined) {rows[r]=[]}\n\t\tif (rows[r][c]===undefined || replace) {rows[r][c]=value}\n\t\telse {rows[r][c]+=value}\n\t\t// add to rowsMap if this is the header\n\t\tif (this.getHeaders()[c]===this.getRowKey()) {\n\t\t\tthis.getRowsMap()[column] = r;\n\t\t}\n\t},\n\t\n\tgetRowIndex: function(key) {\n\t\tif (Ext.isNumber(key)) {return key;}\n\t\tif (Ext.isString(key)) {\n\t\t\tvar rowsMap = this.getRowsMap();\n\t\t\tif (!(key in rowsMap)) {\n\t\t\t\trowsMap[key] = this.getRows().length;\n\t\t\t\tthis.getRows().push(new Array(this.getHeaders().length))\n\t\t\t}\n\t\t\treturn rowsMap[key];\n\t\t}\n\t},\n\t\n\tgetColumnIndex: function(column) {\n\t\tvar headers = this.getHeaders();\n\t\tif (Ext.isNumber(column)) {\n\t\t\tif (headers[column]===undefined) {\n\t\t\t\theaders[column]=column;\n\t\t\t\tthis.getRows().forEach(function(row) {\n\t\t\t\t\trow.splice(column, 0, undefined);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn column;\n\t\t} else if (Ext.isString(column)) {\n\t\t\tif (!(column in this.getHeadersMap())) {\n\t\t\t\t// we don't have this column yet, so create it and expand rows\n\t\t\t\tthis.getHeaders().push(column);\n\t\t\t\tthis.getHeadersMap()[column] = this.getHeaders().length-1\n\t\t\t\tthis.getRows().forEach(function(row) {\n\t\t\t\t\trow.push(undefined)\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this.getHeadersMap()[column]\n\t\t}\n\t},\n\t\n\tgetColumnHeader: function(column) {\n\t\tvar c = this.getColumnIndex(column);\n\t\treturn this.getHeaders()[c];\n\t},\n\t\n\t/**\n\t * Compute the sum of the values in the column.\n\t * \n\t * @param {Number/String} column The column index (as a number) or key (as a string).\n\t */\n\tgetColumnSum: function(column) {\n\t\treturn Ext.Array.sum(this.getColumnValues(column, true));\n\t},\n\t\n\t/**\n\t * Compute the sum of the values in the column.\n\t * \n\t * @param {Number/String} column The column index (as a number) or key (as a string).\n\t */\n\tgetColumnMean: function(column) {\n\t\treturn Ext.Array.mean(this.getColumnValues(column, true));\n\t},\n\t\n\t/**\n\t * Get the largest value in the array.\n\t * \n\t * @param {Number/String} column The column index (as a number) or key (as a string).\n\t */\n\tgetColumnMax: function(column) {\n\t\treturn Ext.Array.max(this.getColumnValues(column, true));\n\t},\n\t\n\t/**\n\t * Get the smallest value in the array.\n\t * \n\t * @param {Number/String} column The column index (as a number) or key (as a string).\n\t */\n\tgetColumnMin: function(column) {\n\t\treturn Ext.Array.min(this.getColumnValues(column, true));\n\t},\n\t\n\tgetColumnValues: function(column, clean) {\n\t\tvar c = this.getColumnIndex(column), vals = [];\n\t\tthis.eachRow(function(row) {\n\t\t\tvals.push(row[c]);\n\t\t});\n\t\tif (clean) {return Ext.Array.clean(vals)}\n\t\telse {return vals;}\n\t},\n\t\n\t/**\n\t * @private\n\t */\n\treMapRows: function() {\n\t\tvar rowKey = this.getRowKey();\n\t\tvar rowsMap = {}\n\t\tthis.eachRow(function(row, i) {\n\t\t\tif (rowKey in row) {\n\t\t\t\trowsMap[row[rowKey]] = i;\n\t\t\t}\n\t\t}, true);\n\t\tthis.setRowsMap(rowsMap)\n\t},\n\t\n\tsortByColumn: function(columns) {\n\t\tvar rows = this.getRows(),\n\t\t\tsortColumnsIndices = Ext.Array.from(columns).map(function(column) {\n\t\t\t\tif (Ext.isObject(column)) {\n\t\t\t\t\tfor (key in column) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tindex: this.getColumnIndex(key),\n\t\t\t\t\t\t\tdirection: column[key].indexOf(\"asc\")>-1 ? 'asc' : 'desc'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tindex: this.getColumnIndex(column),\n\t\t\t\t\t\tdirection: \"desc\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this);\n\t\trows.sort(function(a, b) {\n\t\t\tfor (var i=0, len=sortColumnsIndices.length; i<len; i++) {\n\t\t\t\tvar header = sortColumnsIndices[i].index\n\t\t\t\tif (a[header]!=b[header]) {\n\t\t\t\t\tif (sortColumnsIndices[i].direction=='asc') {return a[header] > b[header] ? 1 : -1}\n\t\t\t\t\telse {return a[header] > b[header] ? -1 : 1}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.reMapRows();\n\t\treturn this;\n\t},\n\t\n\tloadCorrespondenceAnalysis: function(config) {\n\t\treturn this._doAnalysisLoad('table.CA', 'Voyant.data.store.CAAnalysis', config);\n\t},\n\t\n\tloadPrincipalComponentAnalysis: function(config) {\n\t\treturn this._doAnalysisLoad('table.PCA', 'Voyant.data.store.PCAAnalysis', config);\n\t},\n\t\n\tloadTSNEAnalysis: function(config) {\n\t\treturn this._doAnalysisLoad('table.TSNE', 'Voyant.data.store.TSNEAnalysis', config);\t\t\n\t},\n\t\n\t_doAnalysisLoad: function(tool, storeType, config) {\n\t\tconfig = config || {};\n\t\tvar dfd = new Ext.Deferred();\n\t\tExt.apply(config, {\n\t\t\tcolumnHeaders: true,\n\t\t\trowHeaders: true,\n\t\t\ttool: tool,\n\t\t\tanalysisInput: this.toTsv(),\n\t\t\tinputFormat: 'tsv'\n\t\t});\n\t\tvar store = Ext.create(storeType, {noCorpus: true});\n\t\tstore.load({\n\t\t\tparams: config,\n\t\t\tcallback: function(records, operation, success) {\n\t\t\t\tif (success) {\n\t\t\t\t\tdfd.resolve(store, records)\n\t\t\t\t} else {\n\t\t\t\t\tdfd.reject(operation.error.response);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn dfd.promise\n\t},\n\t\n\tembed: function(cmp, config) {\n\t\tif (!config && Ext.isObject(cmp)) {\n\t\t\tconfig = cmp;\n\t\t\tcmp = this.embeddable[0];\n\t\t}\n\t\tconfig = config || {};\n\t\t\n\t\tvar columnHeaders = Ext.Array.from(config.headers || this.getHeaders()).map(function(header) {return this.getColumnHeader(header);}, this);\n\t\t\n\t\tvar json = {\n\t\t\t\trowkey: this.getRowKey(),\n\t\t\t\tconfig: config,\n\t\t\t\theaders: columnHeaders\n\t\t};\n\t\tif (\"headers\" in config) {\n\t\t\tvar columnIndices = Ext.Array.from(config.headers).map(function(header) {return this.getColumnIndex(header);}, this);\n\t\t\tvar rows = [];\n\t\t\tthis.getRows().forEach(function(row) {\n\t\t\t\trows.push(columnIndices.map(function(i) {\n\t\t\t\t\treturn row[i]\n\t\t\t\t}))\n\t\t\t})\n\t\t\tExt.apply(json, {\n\t\t\t\trows: rows\n\t\t\t})\n\t\t} else {\n\t\t\tExt.apply(json, {\n\t\t\t\trows: this.getRows()\n\t\t\t})\n\t\t}\n\t\tExt.apply(config, {\n\t\t\ttableJson: JSON.stringify(json)\n\t\t});\n\t\tdelete config.axes;\n\t\tdelete config.series;\n\t\t\n\t\tembed.call(this, cmp, config);\n\t\t\n\t},\n\t\n\ttoTsv: function(config) {\n\t\tvar tsv = this.getHeaders().join(\"\\t\");\n\t\tthis.getRows().forEach(function(row, i) {\n\t\t\tif (config && Ext.isNumber(config) && i>config) {return;}\n\t\t\ttsv += \"\\n\"+row.map(function(cell) {\n\t\t\t\treturn Ext.isString(cell) ? cell.replace(/(\\n|\\t)/g, \"\") : cell;\n\t\t\t}).join(\"\\t\");\n\t\t})\n\t\treturn tsv;\n\t},\n\t\n\tgetString: function(config) {\n\t\tconfig = config || {};\n\t\tvar table = \"<table class='voyant-table' style='\"+(config.width ? ' width: '+config.width : '')+\"' id='\"+(config.id ? config.id : Ext.id())+\"'>\";\n\t\tvar headers = this.getHeaders();\n\t\tif (headers.length) {\n\t\t\ttable+=\"<thead><tr>\";\n\t\t\tfor (var i=0, len = headers.length; i<len; i++) {\n\t\t\t\ttable+=\"<th>\"+headers[i]+\"</th>\";\n\t\t\t}\n\t\t\ttable+=\"</tr></thead>\";\n\t\t}\n\t\ttable+=\"<tbody>\";\n\t\tfor (var i=0, len = Ext.isNumber(config) ? config : this.getRows().length; i<len; i++) {\n\t\t\tvar row = this.getRow(i);\n\t\t\tif (row && Ext.isArray(row)) {\n\t\t\t\ttable+=\"<tr>\";\n\t\t\t\trow.forEach(function(cell) {\n\t\t\t\t\ttable+=\"<td>\"+cell+\"</td>\";\n\t\t\t\t})\n\t\t\t\ttable+=\"</tr>\";\n\t\t\t}\n\t\t}\n\t\ttable+=\"</tbody></table>\";\n\t\treturn table;\n\t}\n});","/*\n * @class NetworkGraph\n * \n * A NetworkGraph can facilitate working with network graph data structures, as well as\n * displaying results (especially with {@link #embed} and {@link show}). \n * Here's a simple example showing the Zipf-Law distribution of the top 20 frequency terms.\n * \n * \tnew Corpus(\"austen\").loadCorpusTerms(20).then(function(corpusTerms) {\n * \t\tvar table = new VoyantTable({rowKey: 0}); // use first column as row key\n * \t\tcorpusTerms.each(function(corpusTerm) {\n *\t\t\ttable.addRow([corpusTerm.getTerm(), corpusTerm.getRawFreq()]);\n * \t\t});\n * \t\ttable.embed(\"voyantchart\"); // graph table as line chart\n * \t});\n */\nExt.define('Voyant.data.util.NetworkGraph', {\n\talternateClassName: [\"NetworkGraph\"],\n\tconfig: {\n\t\t\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tedges: [],\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tnodes: []\n\n\t},\n\n\tconstructor: function(config, opts) {\n\t\tconfig = config || {};\n\t\tthis.setEdges(Ext.Array.from(config.edges));\n\t\tthis.setNodes(Ext.Array.from(config.nodes));\n\t\tthis.callParent([config]);\n\t},\n\taddEdge: function(src, target, value) {\n\t\tthis.getEdges().push(Ext.isObject(src) ? src : {source: src, target: target, value: value});\n\t},\n\tgetNode: function(term) {\n\t\treturn Ext.Array.binarySearch(this.getNodes(), term, undefined, undefined, function(lhs, rhs) {\n\t\t\treturn (lhs.term < rhs.term) ? -1 : ((lhs.term > rhs.term) ? 1 : 0);\n\t\t})\n\t},\n\tembed: function(cmp, config) {\n\t\tif (!config && Ext.isObject(cmp)) {\n\t\t\tconfig = cmp;\n\t\t\tcmp = this.embeddable[0];\n\t\t}\n\t\tconfig = config || {};\n\t\tvar json = {\n\t\t\t\tedges: this.getEdges(),\n\t\t\t\tnodes: this.getNodes(),\n\t\t\t\tconfig: config\n\t\t};\n\t\tif (config.limit && json.edges.length>config.limit) {\n\t\t\tjson.edges = json.edges.slice(0, config.limit);\n\t\t\tvar terms = {};\n\t\t\tjson.edges.forEach(function(edge) {\n\t\t\t\tterms[\"_\"+edge.source] = true;\n\t\t\t\tterms[\"_\"+edge.target] = true;\n\t\t\t})\n\t\t\tvar nodes = [];\n\t\t\tjson.nodes.forEach(function(node) {\n\t\t\t\tif (\"_\"+node.term in terms) {\n\t\t\t\t\tnodes.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\tjson.nodes = nodes;\n\t\t}\n\t\tExt.apply(config, {\n\t\t\tjsonData: JSON.stringify(json)\n\t\t})\n\t\tembed.call(this, cmp, config);\n\t},\n\t\n\tgetString: function(config) {\n\t\tconfig = config || {};\n\t\treturn this.getEdges().map(function(edge) {edge.source+\"-\"+edge.target}).join(\"; \");\n\t}\n});","Ext.define('Voyant.data.util.Geonames', {\n    mixins: ['Voyant.util.Localization'],\n    statics: {\n    \t\ti18n: {\n    \t\t}\n    },\n\n\tconfig: {\n\t\tdata: {},\n\t\tqueries: undefined,\n\t\tcorpus: undefined,\n\t\tisIncrementalLoadingOccurrences: false,\n\t\tpreviousParams: {}\n\t},\n\tconstructor: function(config, opts) {\n\t\tconfig = config || {};\n\t\tthis.callParent([config]);\n\t\tthis.setCorpus(config.corpus);\n\t},\n\tload: function(params, dfd) {\n\t\tthis.setPreviousParams(params);\n\t\tdfd = dfd || new Ext.Deferred();\n\t\tvar me = this, localParams = {\n\t\t\tcorpus: this.getCorpus().getAliasOrId(),\n\t\t\tqueries: this.getQueries(),\n\t\t\ttool: 'corpus.Dreamscape',\n\t\t\tlimit: 200\n\t\t};\n\t\tExt.apply(localParams, params || {});\n\t\t\n\t\tif (!params.noOverwrite) {\n\t\t\tme.setData({});\n\t\t}\n\n\t\tExt.Ajax.request({\n\t\t\turl: Voyant.application.getTromboneUrl(),\n\t\t\tparams: localParams,\n\t\t\tscope: this\n\t\t}).then(function(response) {\n\t\t\tvar data = Ext.JSON.decode(response.responseText);\n\t\t\tif (data && data.dreamscape && data.dreamscape.progress) {\n\t\t\t\tnew Voyant.widget.ProgressMonitor({\n\t\t\t\t\tprogress: data.dreamscape.progress,\n\t\t\t\t\tmaxMillisSinceStart: 1000*60*60, // an hour (!)\n\t\t\t\t\ttool: 'corpus.Dreamscape',\n\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\tme.load.call(me, params, dfd);\n\t\t\t\t\t},\n\t\t\t\t\tfailure: function(responseOrProgress) {\n\t\t\t\t\t\tVoyant.application.showResponseError(me.localize(\"failedToFetchGeonames\"), responseOrProgress);\n\t\t\t\t\t\tdfd.reject();\n\t\t\t\t\t},\n\t\t\t\t\tscope: me\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (data && data.dreamscape && !data.dreamscape.progress) {\n\t\t\t\tif (!params.noOverwrite) {\n\t\t\t\t\tme.setData(data.dreamscape);\n\t\t\t\t}\n\t\t\t\tdfd.resolve(data);\n\t\t\t}\n\t\t}, function(response) {\n\t\t\tVoyant.application.showResponseError(me.localize('failedToFetchGeonames'), response);\n\t\t\tdfd.reject();\n\t\t});\n\t\treturn dfd.promise;\n\t},\n\tgetCitiesCount: function() {\n\t\treturn Object.keys(this.getData().locations.locations).length;\n\t},\n\tgetTotalCitiesCount: function() {\n\t\treturn this.getData().locations.total;\n\t},\n\thasMoreCities: function() {\n\t\treturn this.getCitiesCount()<this.getTotalCitiesCount();\n\t},\n\teachCity: function(fn, scope, max) {\n\t\tvar locations = this.getData().locations.locations, orderedLocations = [];\n\t\tfor (var id in locations) { // create a sortable list with id\n\t\t\torderedLocations.push(Ext.apply(locations[id], {id: id}))\n\t\t}\n\t\torderedLocations.sort(function(c1, c2) { // order by rawFreq (count)\n\t\t\treturn c1.rawFreq == c2.rawFreq ? c1.label - c2.label : c2.rawFreq - c1.rawFreq;\n\t\t});\n\t\tif (max && orderedLocations.length>max) {orderedLocations = orderedLocations.slice(0,max)}\n\t\torderedLocations.forEach(function(location) {fn.call(scope, location);});\n\t},\n\tgetConnectionsCount: function() {\n\t\treturn this.getData().connections.connections.length;\n\t},\n\tgetTotalConnectionsCount: function() {\n\t\treturn this.getData().connections.total;\n\t},\n\teachConnection: function(fn, scope, max) {\n\t\tvar connections = this.getData().connections.connections,\n\t\t\tlocations = this.getData().locations.locations;\n\t\t\torderedConnections = [];\n\t\tfor (var i=0, len=connections.length; i<len; i++) {\n\t\t\tfn.call(scope, {\n\t\t\t\tsource: Ext.apply({id: connections[i].source}, locations[connections[i].source]),\n\t\t\t\ttarget: Ext.apply({id: connections[i].target}, locations[connections[i].target]),\n\t\t\t\trawFreq: connections[i].rawFreq\n\t\t\t});\n\t\t\tif (i>max) {break;}\n\t\t}\n\t},\n\tgetConnectionOccurrence: function(index) {\n\t\tif (!this.getData().locations) {return undefined;}\n\t\tvar connectionOccurrencesData = this.getData().connectionOccurrences,\n\t\t\tconnectionOccurrences = connectionOccurrencesData.connectionOccurrences;\n\t\t\tlocations = this.getData().locations.locations;\n\t\tif (!this.getIsIncrementalLoadingOccurrences() && connectionOccurrences.length<connectionOccurrencesData.total && index+100>connectionOccurrences.length) {\n\t\t\tthis.setIsIncrementalLoadingOccurrences(true);\n\t\t\tvar me = this;\n\t\t\tvar params = {};\n\t\t\tExt.apply(params, this.getPreviousParams);\n\t\t\tExt.apply(params, {\n\t\t\t\tstart: connectionOccurrences.length,\n\t\t\t\tnoOverwrite: true,\n\t\t\t\tsuppressLocations: true,\n\t\t\t\tsuppressConnections: true\n\t\t\t});\n\t\t\tthis.load(params).then(function(data) {\n\t\t\t\tme.setIsIncrementalLoadingOccurrences(false);\n\t\t\t\tme.getData().connectionOccurrences.connectionOccurrences = connectionOccurrences.concat(data.dreamscape.connectionOccurrences.connectionOccurrences);\n\t\t\t})\n\t\t}\n\t\tif (connectionOccurrences && connectionOccurrences[index]) {\n\t\t\tvar occurrence = connectionOccurrences[index];\n\t\t\toccurrence.index = index;\n\t\t\tExt.apply(occurrence.source, locations[occurrence.source.location]);\n\t\t\tExt.apply(occurrence.target, locations[occurrence.target.location]);\n\t\t\treturn occurrence;\n\t\t}\n\t\treturn null;\n\t},\n    getAllConnectionOccurrences: function(sourceId, targetId) {\n    \tdebugger\n        // TODO return all occurences of connection with given source and target, including those not loaded yet\n        var occurences = [];\n        for (var i = 0; i < this.getTotalConnectionsCount(); i++) {\n            var occurence = this.getConnectionOccurrence(i);\n            if (occurence && occurence.target.id == targetId && occurence.source.id == sourceId) {\n                occurences.push(occurence);\n            }\n        }\n        return occurences\n    }\n});","/**\n * A class for calling corpus.DocumentEntities and displaying the progress of that call.\n * This is usually a preliminary call before making use of the entities, e.g. corpus.EntityCollocationsGraph\n */\nExt.define('Voyant.data.util.DocumentEntities', {\n\textend: 'Ext.Base',\n\tmixins: ['Voyant.util.Localization'],\n\tstatics: {\n\t\ti18n: {\n\t\t\tidentifyingDocEnts: 'Identifying Document Entities',\n\t\t\terror: 'Error Identifying Document Entities',\n\t\t\tretry: 'Retry Failed Documents',\n\t\t\tdone: 'Done',\n\t\t\tstatusDone: 'Done',\n\t\t\tstatusFailed: 'Failed',\n\t\t\tstatusQueued: 'Queued',\n\t\t\tstatusStarted: 'Started',\n\t\t\tstatus413: 'Your document is too large for this service'\n\t\t},\n\n\t\tgetStanfordTypeFromSpacyType(spacyType) {\n\t\t\t//\tDATE - Absolute or relative dates or periods\n\t\t\t//\tPERSON - People, including fictional\n\t\t\t//\tGPE - Countries, cities, states\n\t\t\t//\tLOC - Non-GPE locations, mountain ranges, bodies of water\n\t\t\t//\tMONEY - Monetary values, including unit\n\t\t\t//\tTIME - Times smaller than a day\n\t\t\t//\tPRODUCT - Objects, vehicles, foods, etc. (not services)\n\t\t\t//\tCARDINAL - Numerals that do not fall under another type\n\t\t\t//\tORDINAL - \"first\", \"second\", etc.\n\t\t\t//\tQUANTITY - Measurements, as of weight or distance\n\t\t\t//\tEVENT - Named hurricanes, battles, wars, sports events, etc.\n\t\t\t//\tFAC - Buildings, airports, highways, bridges, etc.\n\t\t\t//\tLANGUAGE - Any named language\n\t\t\t//\tLAW - Named documents made into laws.\n\t\t\t//\tNORP - Nationalities or religious or political groups\n\t\t\t//\tPERCENT - Percentage, including \"%\"\n\t\t\t//\tWORK_OF_ART - Titles of books, songs, etc.\n\t\t\tswitch (spacyType.toLowerCase()) {\n\t\t\t\tcase \"gpe\":\n\t\t\t\tcase \"loc\":\n\t\t\t\t\treturn \"location\";\n\t\t\t\tcase \"norp\":\n\t\t\t\t\treturn \"organization\";\n\t\t\t\tcase \"product\":\n\t\t\t\tcase \"cardinal\":\n\t\t\t\tcase \"ordinal\":\n\t\t\t\tcase \"quantity\":\n\t\t\t\tcase \"event\":\n\t\t\t\tcase \"fac\":\n\t\t\t\tcase \"language\":\n\t\t\t\tcase \"law\":\n\t\t\t\tcase \"work_of_art\":\n\t\t\t\t\treturn \"misc\";\n\t\t\t\tdefault:\n\t\t\t\t\treturn spacyType.toLowerCase();\n\t\t\t}\n\t\t},\n\t\t\n\t\tgetSpacyTypesFromStanfordType(stanfordType) {\n\t\t\tswitch (stanfordType.toLowerCase()) {\n\t\t\t\tcase \"location\":\n\t\t\t\t\treturn [\"loc\", \"gpe\"];\n\t\t\t\tcase \"organization\":\n\t\t\t\t\treturn \"norp\";\n\t\t\t\tcase \"misc\":\n\t\t\t\t\treturn [\"product\",\"cardinal\",\"ordinal\",\"quantity\",\"event\",\"fac\",\"language\",\"law\",\"work_of_art\"];\n\t\t\t\tdefault:\n\t\t\t\t\treturn stanfordType.toLowerCase();\n\t\t\t}\n\t\t}\n\t},\n\n\tconfig: {\n\t\tprogressWindow: undefined,\n\t\tupdateDelay: 5000,\n\t\tbins: 25,\n\t\ttimeoutId: undefined\n\t},\n\t\n\t// FIXME duplicating colors from styles.css\n\tentitiesColors: {\n\t\tdate: '#80b1d3',\n\t\ttime: '#80b1d3',\n\t\tduration: '#80b1d3',\n\t\tperson: '#fdb462',\n\t\torganization: '#bebada',\n\t\tgpe: '#bebada',\n\t\tloc: '#b3de69',\n\t\tlocation: '#b3de69',\n\t\tmoney: '#ffffb3',\n\t\tmisc: '#8dd3c7',\n\t\tproduct: undefined,\n\t\tcardinal: undefined,\n\t\tquantity: undefined,\n\t\tevent: undefined,\n\t\tfac: undefined,\n\t\tlanguage: undefined,\n\t\tlaw: undefined,\n\t\tnorp: undefined,\n\t\tpercent: undefined,\n\t\twork_of_art: undefined,\n\t\tunknown: undefined,\n\t\tset: undefined\n\t},\n\n\tconstructor: function(params) {\n\t\tthis.mixins['Voyant.util.Localization'].constructor.apply(this, arguments);\n\t\tthis.initConfig();\n\t\tthis.callParent();\n\n\t\treturn this.load(params);\n\t},\n\n\t/**\n\t * Load the entities\n\t * @param {Object} params Additional params\n\t * @param {String} params.annotator Annotator can be: 'stanford' (default) or 'nssi' or 'spacy'\n\t */\n\tload: function(params) {\n\t\tparams = Ext.apply({\n\t\t\ttool: 'corpus.DocumentEntities',\n\t\t\tcorpus: Voyant.application.getCorpus().getId(),\n\t\t\tnoCache: true\n\t\t}, params || {});\n\n\t\tthis.doLoad(params, true);\n\t},\n\n\tdoLoad: function(params, firstCall) {\n\t\tvar me = this;\n\t\tExt.Ajax.request({\n\t\t\turl: Voyant.application.getTromboneUrl(),\n\t\t\tparams: params\n\t\t}).then(function(response) {\n\t\t\tvar data = Ext.decode(response.responseText).documentEntities;\n\t\t\t\n\t\t\tvar progressArray = me._getProgressFromStatus(data.status);\n\t\t\tvar isDone = progressArray[0] === progressArray[1];\n\t\t\tvar hasFailures = progressArray[2];\n\t\t\tvar has413Status = progressArray[3].indexOf('413') !== -1; // 413 = corpus too large\n\n\t\t\tif (firstCall && isDone && !hasFailures) {\n\t\t\t\tvar win = me.getProgressWindow();\n\t\t\t\tif (win) {\n\t\t\t\t\twin.close();\n\t\t\t\t}\n\n\t\t\t\tme._addDistributionsToEntities(data.entities, me.getBins());\n\t\t\t\tme._addEntitiesToCategories(data.entities);\n\t\t\t\tVoyant.application.dispatchEvent('entityResults', me, data.entities);\n\t\t\t} else {\n\t\t\t\tme.updateProgress(data.status, progressArray);\n\t\t\t\tif (isDone) {\n\t\t\t\t\tvar win = me.getProgressWindow();\n\t\t\t\t\twin.down('#identifyingMessage').getEl().down('div.x-mask-msg-text').setStyle('backgroundImage', 'none');\n\t\t\t\t\twin.down('#doneButton').setHidden(false);\n\t\n\t\t\t\t\tif (hasFailures && !has413Status) {\n\t\t\t\t\t\twin.down('#retryButton').setHidden(false).setDisabled(false).setHandler(function(btn) {\n\t\t\t\t\t\t\tme.load(Ext.apply({retryFailures: true}, params));\n\t\t\t\t\t\t\tbtn.setDisabled(true);\n\t\t\t\t\t\t}, me);\n\t\t\t\t\t} else {\n\t\t\t\t\t\twin.down('#retryButton').setHidden(true);\n\t\t\t\t\t\tif (firstCall) {\n\t\t\t\t\t\t\twin.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tme._addDistributionsToEntities(data.entities, me.getBins());\n\t\t\t\t\tme._addEntitiesToCategories(data.entities);\n\t\t\t\t\tVoyant.application.dispatchEvent('entityResults', me, data.entities);\n\t\t\t\t} else {\n\t\t\t\t\tdelete params.retryFailures;\n\t\t\t\t\tme.setTimeoutId(Ext.defer(me.doLoad, me.getUpdateDelay(), me, [params, false]));\n\t\t\t\t}\n\t\t\t}\n\t\t}, function(err) {\n\t\t\tVoyant.application.showError(me.localize('error'));\n\t\t\tconsole.warn(err);\n\t\t\tVoyant.application.dispatchEvent('entityResults', me, null);\n\t\t});\n\t},\n\n\t_getProgressFromStatus: function(statusArray) {\n\t\tvar total = statusArray.length;\n\t\tvar numDone = 0;\n\t\tvar hasFailures = false;\n\t\tvar statusCodes = [];\n\t\tstatusArray.forEach(function(item) {\n\t\t\tif (item[1] === 'done') numDone++;\n\t\t\telse if (item[1].indexOf('failed') === 0) {\n\t\t\t\tnumDone++;\n\t\t\t\thasFailures = true;\n\t\t\t\tvar statusCode = item[1].match(/\\d\\d\\d$/);\n\t\t\t\tif (statusCode !== null) {\n\t\t\t\t\tstatusCodes.push(statusCode[0]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn [numDone, total, hasFailures, statusCodes];\n\t},\n\n\tupdateProgress: function(statusArray, progressArray) {\n\t\tif (this.getProgressWindow() === undefined) {\n\t\t\tthis.setProgressWindow(Ext.create('Ext.window.Window', {\n\t\t\t\ttitle: this.localize('identifyingDocEnts'),\n\t\t\t\twidth: 400,\n\t\t\t\theight: 300,\n\t\t\t\tminimizable: true,\n\t\t\t\tcloseAction: 'destroy',\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\talign: 'stretch',\n\t\t\t\t\tpack: 'center',\n\t\t\t\t},\n\t\t\t\titems: [{\n\t\t\t\t\titemId: 'identifyingMessage',\n\t\t\t\t\txtype: 'container',\n\t\t\t\t\thtml: '<div style=\"text-align: center\" class=\"x-mask-msg-text\">'+this.localize('identifyingDocEnts')+'</div>',\n\t\t\t\t\tflex: .5,\n\t\t\t\t\tmargin: '20 10 10 10'\n\t\t\t\t},{\n\t\t\t\t\titemId: 'progressBar',\n\t\t\t\t\txtype: 'progressbar',\n\t\t\t\t\theight: 20,\n\t\t\t\t\tmargin: '0 10 10 10'\n\t\t\t\t},{\n\t\t\t\t\txtype: 'dataview',\n\t\t\t\t\tflex: 1,\n\t\t\t\t\tmargin: '0 10 10 10',\n\t\t\t\t\tscrollable: 'y',\n\t\t\t\t\titemId: 'documentStatus',\n\t\t\t\t\tstore: Ext.create('Ext.data.ArrayStore', {\n\t\t\t\t\t\tfields: ['docTitle', 'statusIcon', 'statusText']\n\t\t\t\t\t}),\n\t\t\t\t\titemSelector: '.doc',\n\t\t\t\t\ttpl: [\n\t\t\t\t\t'<tpl for=\".\">',\n\t\t\t\t\t\t'<div class=\"doc\">',\n\t\t\t\t\t\t\t'<i class=\"fa {statusIcon}\" style=\"margin-right: 5px;\"></i>',\n\t\t\t\t\t\t\t'<span class=\"\" style=\"\">{docTitle}</span>',\n\t\t\t\t\t\t\t'<span style=\"float: right\">{statusText}</span>',\n\t\t\t\t\t\t'</div>',\n\t\t\t\t\t'</tpl>']\n\t\t\t\t}],\n\t\t\t\ttools: [{\n\t\t\t\t\ttype: 'restore',\n\t\t\t\t\titemId: 'restoreButton',\n\t\t\t\t\thidden: true,\n\t\t\t\t\thandler: function(evt, el, owner, tool) {\n\t\t\t\t\t\tvar win = owner.up('window');\n\t\t\t\t\t\twin.expand();\n\t\t\t\t\t\twin.anchorTo(Ext.getBody(), 'c-c', [0, -win.getBox().height], {duration: 250});\n\t\t\t\t\t\ttool.hide();\n\t\t\t\t\t}\n\t\t\t\t}],\n\t\t\t\tbuttons: [{\n\t\t\t\t\titemId: 'retryButton',\n\t\t\t\t\txtype: 'button',\n\t\t\t\t\ttext: this.localize('retry'),\n\t\t\t\t\thidden: true\n\t\t\t\t},{\n\t\t\t\t\titemId: 'doneButton',\n\t\t\t\t\txtype: 'button',\n\t\t\t\t\ttext: this.localize('done'),\n\t\t\t\t\thidden: true,\n\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t\t}\n\t\t\t\t}],\n\t\t\t\tlisteners: {\n\t\t\t\t\tminimize: function(win) {\n\t\t\t\t\t\twin.collapse(Ext.Component.DIRECTION_BOTTOM, false);\n\t\t\t\t\t\twin.anchorTo(Ext.getBody(), 'br-br', [0,0], {duration: 250});\n\t\t\t\t\t\twin.down('#restoreButton').show();\n\t\t\t\t\t},\n\t\t\t\t\tdestroy: function(win) {\n\t\t\t\t\t\tclearTimeout(this.getTimeoutId());\n\t\t\t\t\t\tthis.setProgressWindow(undefined);\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\tvar numDone = progressArray[0];\n\t\tvar total = progressArray[1];\n\n\t\tvar win = this.getProgressWindow();\n\t\t\n\t\twin.down('#progressBar').updateProgress(numDone/total, numDone+' / '+total);\n\t\t\n\t\tvar docsStore = Voyant.application.getCorpus().getDocuments();\n\t\tvar statusWithDocTitles = statusArray.map(function(status, index) {\n\t\t\tvar docTitle = docsStore.getById(status[0]).getShortTitle();\n\t\t\tvar statusMsg = status[1];\n\t\t\tvar statusIcon = 'fa-spinner';\n\t\t\tvar statusText = '';//this.localize('statusStarted');\n\t\t\tif (statusMsg.indexOf('failed') === 0) {\n\t\t\t\tstatusIcon = 'fa-exclamation-triangle';\n\t\t\t\tif (statusMsg.indexOf('413') !== -1) {\n\t\t\t\t\tstatusText = this.localize('status413');\n\t\t\t\t} else {\n\t\t\t\t\tstatusText = this.localize('statusFailed');\n\t\t\t\t}\n\t\t\t\tconsole.log('ner: '+docTitle+', '+statusMsg);\n\t\t\t} else if (statusMsg === 'done') {\n\t\t\t\tstatusIcon = 'fa-check';\n\t\t\t\tstatusText = '';//this.localize('statusDone');\n\t\t\t} else if (statusMsg === 'queued') {\n\t\t\t\tstatusIcon = 'fa-clock-o';\n\t\t\t\tstatusText = '';//this.localize('statusQueued');\n\t\t\t}\n\t\t\treturn [docTitle, statusIcon, statusText];\n\t\t}, this);\n\t\twin.down('#documentStatus').getStore().loadData(statusWithDocTitles);\n\n\t\twin.setTitle(this.localize('identifyingDocEnts')+' '+numDone+' / '+total);\n\n\t\twin.show();\n\t},\n\n\t_addEntitiesToCategories: function(entities) {\n\t\tvar categories = {};\n\t\tentities.forEach(function(entity) {\n\t\t\tif (categories[entity.type] === undefined) {\n\t\t\t\tcategories[entity.type] = [];\n\t\t\t}\n\t\t\tcategories[entity.type].push(entity.term);\n\t\t});\n\t\tvar catMan = Voyant.application.getCategoriesManager();\n\t\tObject.keys(categories).forEach(function(category) {\n\t\t\tvar color = this.entitiesColors[category];\n\t\t\tif (color !== undefined) {\n\t\t\t\tcatMan.addCategory(category);\n\t\t\t\tcatMan.addTerms(category, categories[category]);\t\n\t\t\t\tcatMan.setCategoryFeature(category, 'color', color);\n\t\t\t}\n\t\t}, this);\t\n\t},\n\n\t_addDistributionsToEntities: function(entities, bins) {\n\t\tfunction doAdd(docIndex, positions) {\n\t\t\tvar totalTokens = Voyant.application.getCorpus().getDocument(docIndex).get('tokensCount-lexical');\n\t\t\tvar binSize = Math.floor(totalTokens/bins);\n\t\t\t\n\t\t\tvar distribution = new Array(bins);\n\t\t\tfor (var i = 0; i < bins; i++) { distribution[i] = 0; }\n\n\t\t\tpositions.forEach(function(position) {\n\t\t\t\tvar bin;\n\t\t\t\tif (Array.isArray(position)) {\n\t\t\t\t\tbin = Math.floor(position[0] / binSize);\n\t\t\t\t} else {\n\t\t\t\t\tbin = Math.floor(position / binSize);\n\t\t\t\t}\n\t\t\t\tdistribution[bin]++;\n\t\t\t});\n\n\t\t\treturn distribution;\n\t\t}\n\n\t\tentities.forEach(function(entity) {\n\t\t\tif (entity.positions) {\n\t\t\t\tentity.distributions = doAdd(entity.docIndex, entity.positions);\n\t\t\t} else {\n\t\t\t\tconsole.warn('no positions for:',entity);\n\t\t\t\tentity.distributions = [];\n\t\t\t}\n\t\t}, this);\n\t}\n\n});","Ext.define('Voyant.data.model.Corpus', {\r\n\talternateClassName: [\"Corpus\"],\r\n    mixins: ['Voyant.util.Transferable','Voyant.util.Localization'],\r\n    transferable: ['loadCorpusTerms','loadTokens','getPlainText','getText','getWords','getString','getLemmasArray'],\r\n//    transferable: ['getSize','getId','getDocument','getDocuments','getCorpusTerms','getDocumentsCount','getWordTokensCount','getWordTypesCount','getDocumentTerms'],\r\n\trequires: ['Voyant.util.ResponseError','Voyant.data.store.CorpusTerms','Voyant.data.store.Documents'/*,'Voyant.panel.Documents'*/],\r\n    extend: 'Ext.data.Model',\r\n    config: {\r\n    \tdocumentsStore: undefined\r\n    },\r\n    statics: {\r\n    \ti18n: {}\r\n    },\r\n    fields: [\r\n         {name: 'documentsCount', type: 'int'},\r\n         {name: 'lexicalTokensCount', type: 'int'},\r\n         {name: 'lexicalTypesCount', type: 'int'},\r\n         {name: 'createdTime', type: 'int'},\r\n         {name: 'createdDate', type: 'date', dateFormat: 'c'},\r\n         {name: 'title', type: 'string'},\r\n         {name: 'subTitle', type: 'string'},\r\n         {name: 'languagueCodes', type: 'string'}\r\n    ],\r\n    \r\n\t/**\r\n     * Create a promise for a new Corpus with relevant data loaded.\r\n     * \r\n     * The typical usage in Spyral is to call {@link #assign} in a first code block:\r\n     * \r\n     * \t\tnew Corpus(\"Hello Voyant!\").assign(\"corpus\");\r\n     * \r\n     * Then use the named variable in a subsequent code block:\r\n     * \r\n     * \t  corpus.show();\r\n     * \r\n     * Alternatively, the returned promise can be chained with {@link Ext.promise.Promise#then then}\r\n     * and a function argument that receives the Corpus as an argument.\r\n     * \r\n     * \tvar corpus;\r\n     * \tnew Corpus(\"Hello Voyant!\").then(function(data) {\r\n     * \t\tcorpus = data;\r\n     * \t\tcorpus.show();\r\n     * \t});\r\n     * \r\n     * The following scenarios are possible for the config argument:\r\n     * \r\n     * - a string that looks like a corpus ID (not a URL and no spaces): treated as a {@link #corpus} config\r\n     * - a string that doesn't look like a corpus ID: treated as an {@link #input} config\r\n     * - an array of strings: treated as an array of {@link #input} config values\r\n     * - an object: treated a normal config object\r\n     * \r\n     * As such, these two constructions do the same thing:\r\n     * \r\n     * \tnew Corpus(\"Hello World!\");\r\n     * \tnew Corpus({input: \"Hello World!\"});\r\n\t * @param  {String|String[]|Object} source The source document(s) as a text string, a URL, an array of text strings and URLs, or a config object.\r\n     * @param {String|String[]|Object} [config] An additional config to use with the source.\r\n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return a Corpus but a promise to return a Corpus when it's finished loading\r\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\r\n\t * Corpus as an argument, as per the example above).\r\n\t */\r\n\tconstructor : function(source, config) {\r\n\t\tsource = source || {};\r\n\t\tconfig = config || {};\r\n\t\t\t\t\r\n\t\tthis.callParent([]); // only send config, not source\r\n\t\t\r\n\t\tvar dfd = new Ext.Deferred();\r\n\t\t\r\n\t\tif (Ext.isString(source)) { // a string could be a corpus ID or an input string (text or URL)\r\n\t\t\tif (/\\s/.test(source)==false && source.indexOf(\":\")==-1) { // looks like a corpus ID\r\n\t\t\t\tExt.apply(config, {\r\n\t\t\t\t\tcorpus: source\r\n\t\t\t\t});\r\n\t\t\t} else { // looks like input (text or URL)\r\n\t\t\t\tExt.apply(config, {\r\n\t\t\t\t\tinput: source\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (Ext.isArray(source)) { // assume we have an array of texts or URLs\r\n\t\t\tExt.apply(config, {\r\n\t\t\t\tinput: source\r\n\t\t\t});\r\n\t\t} else if (Ext.isObject(source)) { // copy the source to the config\r\n\t\t\tExt.apply(config, source);\r\n\t\t} else {\r\n\t\t\tVoyant.application.showError(this.localize(\"badDataTypeCorpus\")+\": (\"+ (typeof source)+\") \"+source);\r\n\t\t\tExt.defer(function() {\r\n\t\t\t\tdfd.reject(this.localize(\"badDataTypeCorpus\")+\": (\"+ (typeof source)+\") \"+source)\r\n\t\t\t}, 50, this);\r\n\t\t\treturn dfd.promise;\r\n\t\t}\r\n\t\t\r\n\t\tif (Ext.isObject(config)) {\r\n\t\t\t\r\n\t\t\tif (!config.corpus && !config.input && !config.inlineData) {\r\n\t\t\t\tVoyant.application.showError(this.localize(\"noCorpusOrInput\")+\": \"+config);\r\n\t\t\t\tExt.defer(function() {\r\n\t\t\t\t\tdfd.reject(this.localize(\"noCorpusOrInput\")+\": \"+config)\r\n\t\t\t\t}, 50, this);\r\n\t\t\t\treturn dfd.promise;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tExt.apply(config, {tool: 'corpus.CorpusMetadata'})\r\n\r\n\t\t\tvar me = this;\r\n\t\t\tvar promise = Ext.Ajax.request({\r\n\t\t\t\turl: Voyant.application.getTromboneUrl(),\r\n\t\t\t\tparams: config\r\n\t\t\t}).then(function(response) {\r\n\t\t\t\tme.set(Ext.JSON.decode(response.responseText).corpus.metadata);\r\n\t\t\t\t// removed calls to set title and subtitle which should now be in metadata\r\n\t\t\t\tif (config.title || config.subTitle) {\r\n\t\t\t\t\tme.set('title', config.title);\r\n\t\t\t\t\tme.set('subTitle', config.subTitle);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// (removed calls for title and subtitle which should now be part of metadata\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn me;\r\n\t\t\t}, function(response){\r\n\t\t\t\tVoyant.application.showResponseError(me.localize('failedCreateCorpus'), response);\r\n\t\t\t\tdfd.reject(me.localize('failedCreateCorpus'));\r\n\t\t\t}).then(function(corpus) {\r\n\t\t\t\tif (corpus.getDocumentsCount()==0) {\r\n\t\t\t\t\tVoyant.application.showError(me.localize(\"thisCorpus\")+\" \"+me.localize(\"isEmpty\")+\".\");\r\n\t\t\t\t}\r\n\t\t\t\tif (!('docsLimit' in config) || (config.docsLimit!==false && config.docsLimit>0)) {\r\n\t\t\t\t\tme.getDocuments().load({\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tlimit: ('docsLimit' in config) ? config.docsLimit : me.getDocumentsCount()\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcallback: function(records, operation, success) {\r\n\t\t\t\t\t\t\tif (success) {\r\n\t\t\t\t\t\t\t\tme.setDocumentsStore(this);\r\n\t\t\t\t\t\t\t\tdfd.resolve(corpus)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdfd.reject(operation)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdfd.resolve(corpus)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn dfd.promise\r\n\t\t} else {\r\n\t\t\tVoyant.application.showError(this.localize(\"badDataTypeCorpus\")+\": (\"+ (typeof config)+\") \"+config);\r\n\t\t\tExt.defer(function() {\r\n\t\t\t\tdfd.reject(this.localize(\"badDataTypeCorpus\")+\": (\"+ (typeof config)+\") \"+config)\r\n\t\t\t}, 50, this);\r\n\t\t\treturn dfd.promise;\r\n\t\t}\r\n\t},\r\n\t\r\n\tgetId: function() {\r\n\t\t// overrides the getId() function from the model to handle promises\r\n    \treturn this.get('id');\t\t\r\n\t},\r\n\t\r\n\t\r\n\tgetAliasOrId: function() {\r\n\t\t// overrides the getId() function from the model to handle promises\r\n    \treturn (this.get('alias') || this.get('id'));\t\t\r\n\t},\r\n\t\r\n\t/**\r\n     * Create a promise for {@link Voyant.data.store.CorpusTerms Corpus Terms}.\r\n     * \r\n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\r\n     * provide a function that receives the {@link Voyant.data.store.CorpusTerms Corpus Terms} as an argument.\r\n     * \r\n     * \tnew Corpus(\"Hello Voyant!\").loadCorpusTerms().then(function(corpusTerms) {\r\n     * \t\tcorpusTerms.show();\r\n     * \t});\r\n     * \r\n     * @param {Number/Object} config\r\n     * \r\n     * - when this is a number, it's the maximum number of corpus terms to load (see {@link Voyant.data.store.CorpusTerms#limit})\r\n     * - otherwise this is a regular config object\r\n     * \r\n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return corpus terms but a promise to return a corpus terms when they're finished loading\r\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\r\n\t * corpus terms as an argument, as per the example above).\r\n\t */\r\n\tloadCorpusTerms: function(config) {\r\n\t\tvar dfd = new Ext.Deferred();\r\n\t\tconfig = config || {};\r\n\t\tif (Ext.isNumber(config)) {\r\n\t\t\tconfig = {limit: config};\r\n\t\t}\r\n\t\tExt.applyIf(config, {\r\n\t\t\tlimit: 0\r\n\t\t})\r\n\t\tvar corpusTerms = this.getCorpusTerms();\r\n\t\tcorpusTerms.load({\r\n\t\t\tparams: config,\r\n\t\t\tcallback: function(records, operation, success) {\r\n\t\t\t\tif (success) {\r\n\t\t\t\t\tdfd.resolve(corpusTerms)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdfd.reject(operation)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn dfd.promise\r\n\t},\r\n\t\r\n\t/**\r\n     * Create a promise for {@link Voyant.data.store.Tokens Tokens}.\r\n     * \r\n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\r\n     * provide a function that receives the {@link Voyant.data.store.Tokens Tokens} as an argument.\r\n     * \r\n     * \tnew Corpus(\"Hello Voyant!\").loadTokens().then(function(tokens) {\r\n     * \t\ttokens.show();\r\n     * \t});\r\n     * \r\n     * @param {Number/Object} config\r\n     * \r\n     * - when this is a number, it's the maximum number of corpus terms to load (see {@link Voyant.data.store.CorpusTerms#limit})\r\n     * - otherwise this is a regular config object\r\n     * \t- **limit**: the maximum number of tokens to return (default is no limit)\r\n     * \t- **perDocLimit**: the maximum number of tokens to return per document\r\n     * \t- **start**: where to start (when pageing, default is 0)\r\n     * \t- **noOthers**: determine if only word tokens are returned (default is false)\r\n     * \t- **withPosLemmas**: try to populate pos (part-of-speech) tags and lemmas (only works in English for now)\r\n     * \t- **docIndex**: a comma-separated list of integers of document indices\r\n     * \t- **docId**: a comma-separated list of document IDs\r\n     * \t- **stopList**: the ID of an existing stopList resource or an array of words to skip\r\n     * \t- **whiteList**: the ID of an existing whiteList resource or an array of words to keep\r\n     * \r\n     * \r\n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return tokens but a promise to return tokens when they're finished loading\r\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\r\n\t * tokens as an argument, as per the example above).\r\n\t */\r\n\tloadTokens: function(config) {\r\n\t\tvar dfd = new Ext.Deferred();\r\n\t\tconfig = config || {};\r\n\t\tif (Ext.isNumber(config)) {\r\n\t\t\tconfig = {limit: config};\r\n\t\t}\r\n\t\tExt.applyIf(config, {\r\n\t\t\tlimit: 0\r\n\t\t})\r\n\t\tvar tokens = this.getTokens();\r\n\t\ttokens.load({\r\n\t\t\tparams: config,\r\n\t\t\tcallback: function(records, operation, success) {\r\n\t\t\t\tif (success) {\r\n\t\t\t\t\tdfd.resolve(tokens)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdfd.reject(operation)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn dfd.promise\r\n\t},\r\n\t\r\n\tgetCorpusTerms: function(config) {\r\n\t\treturn Ext.create(\"Voyant.data.store.CorpusTerms\", Ext.apply(config || {}, {corpus: this}));\r\n\t},\r\n\t\r\n\tgetTokens: function(config) {\r\n\t\treturn Ext.create(\"Voyant.data.store.Tokens\", Ext.apply(config || {}, {corpus: this}));\r\n\t},\r\n\t\r\n\teach: function(fn, scope) {\r\n\t\tthis.getDocuments().each(function(doc, i) {\r\n\t\t\tfn.call(scope || doc, doc, i);\r\n\t\t})\r\n\t},\r\n\t\r\n\tmap: function(fn, scope) {\r\n\t\treturn this.getDocuments().getRange().map(function(doc, i) {\r\n\t\t\treturn fn.call(scope || doc, doc, i)\r\n\t\t}, scope || this)\r\n\t},\r\n\t\r\n\tgetCorpusCollocates: function(config) {\r\n\t\treturn Ext.create(\"Voyant.data.store.CorpusCollocates\", Ext.apply(config || {}, {corpus: this}));\r\n\t},\r\n\t\r\n\tgetDocumentQueryMatches: function(config) {\r\n\t\t// not expected to be called before corpus is defined\r\n\t\treturn Ext.create(\"Voyant.data.store.DocumentQueryMatches\", Ext.apply(config || {}, {corpus: this}));\r\n\t},\r\n\t\r\n\tgetDocumentTerms: function(config) {\r\n\t\treturn Ext.create(\"Voyant.data.store.DocumentTerms\", Ext.apply(config || {}, {corpus: this}));\r\n\t},\r\n\t\r\n\tgetDocumentEntities: function(config) {\r\n\t\treturn Ext.create(\"Voyant.data.store.DocumentEntities\", Ext.apply(config || {}, {corpus: this}));\r\n\t},\r\n\t\r\n\tloadContexts: function(config) {\r\n\t\tvar dfd = new Ext.Deferred();\r\n\t\tconfig = config || {};\r\n\t\tif (Ext.isNumber(config)) {\r\n\t\t\tconfig = {limit: config};\r\n\t\t}\r\n\t\tExt.applyIf(config, {\r\n\t\t\tlimit: 0\r\n\t\t})\r\n\t\tvar contexts = this.getContexts();\r\n\t\tcontexts.load({\r\n\t\t\tparams: config,\r\n\t\t\tcallback: function(records, operation, success) {\r\n\t\t\t\tif (success) {\r\n\t\t\t\t\tdfd.resolve(contexts)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdfd.reject(operation)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn dfd.promise\r\n\t},\r\n\t\r\n\tgetContexts: function(config) {\r\n\t\treturn Ext.create(\"Voyant.data.store.Contexts\", Ext.apply(config || {}, {corpus: this}));\r\n\t},\r\n\t\r\n\tgetDocuments: function(config) {\r\n\t\treturn this.getDocumentsStore() ? this.getDocumentsStore() : Ext.create(\"Voyant.data.store.Documents\", Ext.apply(config || {}, {corpus: this}));\r\n\t},\r\n\t\r\n\tgetDocument: function(config) {\r\n\t\tif (this.getDocumentsStore()) {\r\n\t\t\tif (config instanceof Voyant.data.model.Document) {\r\n\t\t\t\treturn config;\r\n\t\t\t}\r\n\t\t\telse if (Ext.isNumeric(config)) {\r\n\t\t\t\treturn this.getDocumentsStore().getAt(parseInt(config))\r\n\t\t\t}\r\n\t\t\telse if (Ext.isString(config)) {\r\n\t\t\t\treturn this.getDocumentsStore().getById(config)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.getDocumentsStore().getDocument(config);\r\n\t},\r\n\t\r\n\tgetDocumentsCount: function() {\r\n\t\treturn this.get('documentsCount');\r\n\t},\r\n\t\r\n\tgetWordTokensCount: function() {\r\n    \treturn this.get('lexicalTokensCount');\r\n\t},\r\n\t\r\n\tgetWordTypesCount: function() {\r\n    \treturn this.get('lexicalTypesCount');\r\n\t},\r\n\t\r\n\tgetCreatedTime: function() {\r\n    \treturn this.get('createdTime');\t\t\r\n\t},\r\n\t\r\n\trequiresPassword: function() {\r\n\t\tvar noPasswordAccess = this.getNoPasswordAccess();\r\n\t\treturn noPasswordAccess=='NONE' || noPasswordAccess=='NONCONSUMPTIVE';\r\n\t},\r\n\t\r\n\tgetNoPasswordAccess: function() {\r\n    \treturn this.get('noPasswordAccess');\r\n\t},\r\n\t\r\n\tgetTitle: function() {\r\n\t\treturn this.get('title');\r\n\t},\r\n\t\r\n\tgetSubTitle: function() {\r\n\t\treturn this.get('subTitle');\r\n\t},\r\n\t\r\n\tgetRelatedWords : function(config) {\r\n\t\treturn Ext.create(\"Voyant.data.store.RelatedTerms\", Ext.apply(config || {}, {corpus: this}))\r\n\t},\r\n\t\r\n\tloadRelatedWords : function(config) {\r\n\t\tvar dfd = new Ext.Deferred();\r\n\t\tconfig = config || {};\r\n\t\tif (Ext.isNumber(config)) {\r\n\t\t\tconfig = {limit: config};\r\n\t\t}\r\n\t\tExt.applyIf(config, {\r\n\t\t\tlimit: 0\r\n\t\t})\r\n\t\tvar relatedTerms = this.getRelatedWords();\r\n\t\trelatedTerms.load({\r\n\t\t\tparams: config,\r\n\t\t\tcallback: function(records, operation, success) {\r\n\t\t\t\tif (success) {\r\n\t\t\t\t\tdfd.resolve(records)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdfd.reject(operation.error.response);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn dfd.promise\r\n\t},\r\n\t\t\r\n\t/**\r\n     * Create a promise for a text representation of all the document bodies in the corpus.\r\n     * \r\n     * This does NOT necessarily return the full original document, but rather the body or main\r\n     * content, as extracted by Voyant. You can also request a {@link #plainText} version with\r\n     * the tags stripped.\r\n     * \r\n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\r\n     * provide a function that receives the text as an argument.\r\n     * \r\n     * \tnew Corpus(\"http://hermeneuti.ca\").getText().then(function(text) {\r\n     * \t\tshow(text.replace(/</g, \"&lt;\")); // show the markup \r\n     * \t});\r\n     * \r\n     * @param {Number/Object} config\r\n     * \r\n     * - when this is a number, it's the maximum number of words to fetch (though there may be any number of other tokens, like punctuation and space (but no tags).\r\n     * - otherwise this is a regular config object that can contain the following:\r\n     * \t - `limit`: a limit on the total number of words (by default there's no limit)\r\n     * \t - `perDocLimit`: a limit on the number of words to fetch for each document (by default there's no limit)\r\n     * \t - `start`: start at this word index for each document\r\n     * \t - `stopList`: the ID of an existing stopList resource or an array of words to skip\r\n     * \t - `whiteList`: the ID of an existing whiteList resource or an array of words to keep\r\n     * \r\n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return text but a promise to return text when it's finished loading\r\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\r\n\t * text as an argument, as per the example above).\r\n\t */\r\n\tgetText: function(config) {\r\n\t\tvar dfd = new Ext.Deferred();\r\n\t\tconfig = config || {};\r\n\t\tif (Ext.isNumber(config)) {\r\n\t\t\tconfig = {limit: config}\r\n\t\t} else if (Ext.isString(config)) {\r\n\t\t\tconfig = {limit: parseInt(config)}\r\n\t\t};\r\n\t\tExt.applyIf(config, {\r\n\t\t\tlimit: 0,\r\n\t\t\toutputFormat: \"text\",\r\n\t\t\ttemplate: \"docTokens2text\"\r\n\t\t});\r\n\t\tExt.apply(config, {\r\n\t\t\ttool: 'corpus.DocumentTokens',\r\n\t\t\tcorpus: this.getAliasOrId()\r\n\t\t});\r\n\t\tExt.Ajax.request({\r\n\t\t\turl: Voyant.application.getTromboneUrl(),\r\n\t\t\tparams: config,\r\n\t\t\tsuccess: function(response, opts) {\r\n\t\t\t\tvar text = response.responseText.trim();\r\n\t\t\t\tif (config.transformCase) {\r\n\t\t\t\t\tif (config.transformCase.indexOf(\"lower\")>-1) {\r\n\t\t\t\t\t\ttext = text.toLowerCase();\r\n\t\t\t\t\t} else if (config.transformCase.indexOf(\"upper\")>-1) {\r\n\t\t\t\t\t\ttext = text.toUpperCase();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdfd.resolve(text);\r\n\t\t\t},\r\n\t\t\tfailure: function(response, opts) {\r\n\t\t\t\tdfd.reject(response);\r\n\t\t\t},\r\n\t\t\tscope: this\r\n\t\t})\r\n\t\treturn dfd.promise\r\n    },\r\n    \r\n\t/**\r\n     * Create a promise for a plain text representation of all the text in the corpus.\r\n     * \r\n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\r\n     * provide a function that receives the text as an argument.\r\n     * \r\n     * \tnew Corpus(\"http://hermeneuti.ca\").getPlainText().then(function(text) {\r\n     * \t\tshow(text.trim().replace(/\\s+/g, \" \").substr(-150)); // show the end \r\n     * \t});\r\n     * \r\n     * @param {Number/Object} config\r\n     * \r\n     * - when this is a number, it's the maximum number of words to fetch (though there may be any number of other tokens, like punctuation and space (but no tags).\r\n     * - otherwise this is a regular config object \u2013 see {@link #getText} for more details.\r\n     * \r\n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return text but a promise to return text when it's finished loading\r\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\r\n\t * text as an argument, as per the example above).\r\n\t */\r\n    getPlainText: function(config) {\r\n\t\tconfig = config || {};\r\n\t\tif (Ext.isNumber(config)) {\r\n\t\t\tconfig = {limit: config}\r\n\t\t} else if (Ext.isString(config)) {\r\n\t\t\tconfig = {limit: parseInt(config)}\r\n\t\t}\r\n\t\tExt.apply(config, {\r\n\t\t\ttemplate: \"docTokens2plainText\"\r\n\t\t});\r\n\t\treturn this.getText(config);\r\n    },\r\n\r\n\t/**\r\n     * Create a promise for a string containing just the words from the corpus.\r\n     * \r\n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\r\n     * provide a function that receives the text as an argument.\r\n     * \r\n     * \tnew Corpus(\"http://hermeneuti.ca\").getWords().then(function(words) {\r\n     * \t\tshow(words); // show the words \r\n     * \t});\r\n     * \r\n     * @param {Number/Object} config\r\n     * \r\n     * - when this is a number, it's the maximum number of words to fetch (though there may be any number of other tokens, like punctuation and space (but no tags).\r\n     * - otherwise this is a regular config object \u2013 see {@link #getText} for more details.\r\n     * \r\n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return the words but a promise to return words when it's finished loading\r\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\r\n\t * words as a string argument, as per the example above).\r\n\t */\r\n    getWords: function(config) {\r\n\t\tconfig = config || {};\r\n\t\tif (Ext.isNumber(config)) {\r\n\t\t\tconfig = {limit: config}\r\n\t\t} else if (Ext.isString(config)) {\r\n\t\t\tconfig = {limit: parseInt(config)}\r\n\t\t};\r\n\t\tExt.applyIf(config, {\r\n\t\t\ttemplate: \"docTokens2words\"\r\n\t\t});\r\n\t\treturn this.getText(config);\r\n    },\r\n\t\r\n\t/**\r\n     * Create a promise for a string containing just the words from the corpus.\r\n     * \r\n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\r\n     * provide a function that receives the text as an argument.\r\n     * \r\n     * \tnew Corpus(\"http://hermeneuti.ca\").getWords().then(function(words) {\r\n     * \t\tshow(words); // show the words \r\n     * \t});\r\n     * \r\n     * @param {Number/Object} config\r\n     * \r\n     * - when this is a number, it's the maximum number of words to fetch (though there may be any number of other tokens, like punctuation and space (but no tags).\r\n     * - otherwise this is a regular config object \u2013 see {@link #getText} for more details.\r\n     * \r\n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return the words but a promise to return words when it's finished loading\r\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\r\n\t * words as a string argument, as per the example above).\r\n\t */\r\n    getWordsArray: function(config) {\r\n\t\tvar dfd = new Ext.Deferred();\r\n\t\tthis.getWords(config).then(function(text) {\r\n\t\t\tdfd.resolve(text.split(\" \"));\r\n\t\t})\r\n\t\treturn dfd.promise\r\n    },\r\n    \r\n\t/**\r\n     * Create a promise for an array of lemmas from the corpus (only works for English).\r\n     * \r\n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\r\n     * provide a function that receives the lemmas as an argument.\r\n     * \r\n\t * \tnew Corpus(\"Hello world, I like Spyral notebooks!\", {language: \"en\"}).getLemmasArray().then(function(lemmas) {\r\n\t\t\tshow(lemmas.join(\", \"))\r\n\t *  });\r\n     * \r\n     * @param {Number/Object} config\r\n     * \r\n     * - when this is a number, it's the maximum number of words to fetch (though there may be any number of other tokens, like punctuation and space (but no tags).\r\n     * - otherwise this is a regular config object \u2013 see {@link #getText} for more details.\r\n     * \r\n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return the words but a promise to return words when it's finished loading\r\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\r\n\t * words as a string argument, as per the example above).\r\n\t */\r\n    getLemmasArray: function(config) {\r\n    \tconfig = config || {};\r\n\t\tvar dfd = new Ext.Deferred();\r\n\t\tExt.applyIf(config, {\r\n\t\t\ttemplate: \"docTokens2lemmas\",\r\n\t\t\twithPosLemmas: true,\r\n\t\t\tnoOthers: true\r\n\t\t})\r\n\t\tthis.getWords(config).then(function(text) {\r\n\t\t\tvar lemmas = text.split(\" \").map(function(word) {return word.substring(0, word.indexOf(\"/\"))})\r\n\t\t\tdfd.resolve(lemmas);\r\n\t\t})\r\n\t\treturn dfd.promise\r\n    },\r\n\r\n\t/**\r\n\t * Get the readability index for the documents in this corpus.\r\n\t * @param {String} indexType Which index to use: 'automated', 'coleman-liau', 'dale-chall', 'fog', 'lix', 'smog'\r\n\t * @param {Object} config A config object to limit the results to certain documents, using docIndex or docId keys\r\n\t * \r\n\t * @returns {Ext.promise.Promise}\r\n\t */\r\n\t getReadability: function(indexType, config) {\r\n\t\tindexType = indexType === undefined ? 'coleman-liau' : indexType;\r\n\t\tconfig = config || {};\r\n\t\t\r\n\t\tvar tool = 'corpus.';\r\n\t\tswitch (indexType) {\r\n\t\t\tcase 'automated':\r\n\t\t\t\ttool += 'DocumentAutomatedReadabilityIndex';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'coleman-liau':\r\n\t\t\t\ttool += 'DocumentColemanLiauIndex';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'dale-chall':\r\n\t\t\t\ttool += 'DocumentDaleChallIndex';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'fog':\r\n\t\t\t\ttool += 'DocumentFOGIndex';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'lix':\r\n\t\t\t\ttool += 'DocumentLIXIndex';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'smog':\r\n\t\t\t\ttool += 'DocumentSMOGIndex';\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tExt.apply(config, {\r\n\t\t\tcorpus: this.getId(),\r\n\t\t\ttool: tool\r\n\t\t});\r\n\r\n\t\tvar dfd = new Ext.Deferred();\r\n\r\n\t\tvar corpus = this.getId();\r\n\t\tExt.Ajax.request({\r\n\t\t\turl: Voyant.application.getTromboneUrl(),\r\n\t\t\tparams: config\r\n\t\t}).then(function(response) {\r\n\t\t\tvar data = Ext.JSON.decode(response.responseText);\r\n\t\t\t// remove extraneous json data\r\n\t\t\tvar parentKey;\r\n\t\t\tfor (var key in data) {\r\n\t\t\t\tif (key.indexOf('document') === 0) {\r\n\t\t\t\t\tparentKey = key;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (parentKey) {\r\n\t\t\t\tvar indexKey;\r\n\t\t\t\tfor (var subkey in data[parentKey]) {\r\n\t\t\t\t\tindexKey = subkey;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tvar readabilityKey = indexKey.substring(0,indexKey.length-2); // assume the indexKey ends in Indexes, so remove the \"es\"\r\n\t\t\t\tvar indexData = data[parentKey][indexKey].map(function(item) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tdocIndex: item.docIndex,\r\n\t\t\t\t\t\tdocId: item.docId,\r\n\t\t\t\t\t\ttext: item.text,\r\n\t\t\t\t\t\treadability: item[readabilityKey] // standardize the key for the readability score\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tdfd.resolve(indexData);\r\n\t\t\t} else {\r\n\t\t\t\tdfd.reject();\r\n\t\t\t}\r\n\t\t}, function(response){\r\n\t\t\tdfd.reject();\r\n\t\t});\r\n\r\n\t\treturn dfd.promise;\r\n\t},\r\n    \r\n    /**\r\n\t * Returns a one-line summary of this corpus.\r\n\t * \r\n\t * @method getString\r\n\t * @param {boolean} [withID] Includes the corpus ID in parentheses at the end, if true.\r\n\t */\r\n    getString: function(withID) {\r\n\t\tvar size = this.getDocumentsCount();\r\n\t\tvar message = this.localize('thisCorpus');\r\n\t\tif (size==0) {message += ' '+this.localize('isEmpty')+'.';}\r\n\t\telse {\r\n\t\t\tmessage+=' ';\r\n\t\t\tif (size>1) {\r\n\t\t\t\tmessage+=new Ext.XTemplate(this.localize('hasNdocuments')).apply({count: Ext.util.Format.number(size,\"0,000\")});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tmessage+=this.localize('has1document');\r\n\t\t\t}\r\n\t\t\tmessage+=' '+new Ext.XTemplate(this.localize('widthNwordsAndNTypes')).apply({words: Ext.util.Format.number(this.getWordTokensCount(),\"0,000\"), types: Ext.util.Format.number(this.getWordTypesCount(),\"0,000\")})+'.'\r\n\t\t\tmessage+=\" \"+this.localize('created')+\" \";\r\n\t\t\tvar createdDate = this.get('createdDate');\r\n\t\t\tvar now = new Date();\r\n\t\t\tif (Ext.Array.each([\r\n\t\t    \t\t\t\t['year', Ext.Date.YEAR],\r\n\t\t    \t\t\t\t['month', Ext.Date.MONTH],\r\n\t\t    \t\t\t\t['day', Ext.Date.DAY],\r\n\t\t    \t\t\t\t['hour', Ext.Date.HOUR],\r\n\t\t    \t\t\t\t['minute', Ext.Date.MINUTE],\r\n\t\t    \t\t\t\t['second', Ext.Date.SECOND]\r\n\t\t    \t], function(time) {\r\n        \t\t\tif (Ext.Date.diff(createdDate, now, time[1])>(time[0]=='second' ? 1 : 0)) {\r\n        \t\t\t\tvar count = Ext.Date.diff(createdDate, now, time[1]);\r\n        \t\t\t\tmessage+=\"<span class='info-tip' data-qtip='\"+Ext.Date.format(createdDate, \"Y-m-d, H:i:s\")+\"'>\";\r\n        \t\t\t\tif (count==1) {message+=new Ext.XTemplate(this.localize(time[0]+'Ago')).apply({count: count, date: createdDate})}\r\n        \t\t\t\telse {message+=new Ext.XTemplate(this.localize(time[0]+'sAgo')).apply({count: count, date: createdDate})}\r\n        \t\t\t\tmessage+=\"</span>\";\r\n        \t\t\t\treturn false\r\n        \t\t\t}\r\n\t\t\t\t}, this\r\n\t\t\t)===true) { // if array returns true, none of the conditions matched, so say now\r\n\t\t\t\tmessage+=this.localize('now');\r\n\t\t\t}\r\n\t\t\tmessage+='.';\r\n\t\t\t\r\n\t\t\tmessage+='';\r\n\t\t}\r\n\t\tif (withID===true) {message+=' ('+this.getId()+\")\";}\r\n\t\treturn message;\r\n    }\r\n    \r\n    \r\n\r\n});","Ext.define('Voyant.widget.CorpusSelector', {\n\textend: 'Ext.form.field.ComboBox',\n\tmixins: ['Voyant.util.Localization', 'Voyant.util.Api'],\n\talias: 'widget.corpusselector',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\topenMenu: undefined\n\t\t}\n\t},\n\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\t\n\t\t// need to call here to get openMenu\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n\n\t\tvar data = [['shakespeare',\"Shakespeare's Plays\"],['austen',\"Austen's Novels\"],['frank',\"Mary Shelley's Frankenstein\"]];\t\n\t\t// check API and server option for open menu values\n\t\tif (this.getApiParam(\"openMenu\")) {\n\t\t\tdata = this.getStoreItemsFromDefinition(this.getApiParam(\"openMenu\"));\n\t\t} else if (Voyant.application && Voyant.application.getOpenMenu && Voyant.application.getOpenMenu()) {\n\t\t\tvar arg = Voyant.application.getOpenMenu();\n\t\t\targ = decodeURIComponent(arg);\n\t\t\targ = arg.replace(/\\+/g,' ');\n\t\t\tif (arg.charAt(0)=='\"' && arg.charAt(arg.length-1)=='\"') {\n\t\t\t\targ = arg.substring(1, arg.length-1);\n\t\t\t}\n\t\t\tdata = this.getStoreItemsFromDefinition(arg);\n\t\t}\n\t\n\t\tExt.applyIf(config, {\n\t\t\tfieldLabel: this.localize('chooseCorpus'),\n\t\t\tlabelWidth: 125,\n\t\t\twidth: 330,\n\t\t\tlabelAlign: 'right',\n\t\t\tname:'corpus',\n\t\t\tqueryMode:'local',\n\t\t\tstore: data\n\t\t});\n\t\tthis.callParent([config]);\n\t},\n\n\tinitComponent: function(config) {\n\t\tconfig = config || {};\n\t\tthis.callParent([config]);\n\t},\n\t\t\n\tgetStoreItemsFromDefinition: function(definition) {\n\t\tvar data = [], items = definition.split(\";\");\n\t\tfor (var i=0; i<items.length; i++) {\n\t\t\tvar nameValue = items[i].split(\":\");\n\t\t\tif (nameValue[0]) {\n\t\t\t\tdata.push([nameValue[0],nameValue[1] ? nameValue[1] : nameValue[0]]);\n\t\t\t}\n\t\t}\n\t\treturn data;\n\t}\n})","Ext.define('Voyant.widget.ListEditor', {\n    extend: 'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.listeditor',\n    layout: 'hbox',\n    statics: {\n    \ti18n: {\n    \t}\n    },\n    initComponent: function(config) {\n    \tvar me = this;\n    \tvar value = this.up('window').panel.getApiParam(this.name);\n    \tvar data = value ? [{name: value, value: value}] : [];\n    \t\n    \tdata.splice(0, 0, {name : this.localize('none'),   value: ''},  {name : this.localize('new'),   value: 'new'})\n    \tExt.apply(me, {\n\t    \t\titems: [{\n\t    \t        xtype: 'combo',\n\t    \t        queryMode: 'local',\n\t    \t        value: value,\n\t    \t        triggerAction: 'all',\n\t    \t        editable: true,\n\t    \t        fieldLabel: this.localize(this.name+'Label'),\n\t    \t        labelAlign: 'right',\n\t    \t        name: this.name,\n\t    \t        displayField: 'name',\n\t    \t        valueField: 'value',\n\t    \t        store: {\n\t    \t            fields: ['name', 'value'],\n\t    \t            data: data\n\t    \t        }\n\t    \t\t}, {width: 10}, {xtype: 'tbspacer'}, {\n\t    \t\t\txtype: 'button',\n\t    \t\t\ttext: this.localize('editList'),\n\t\t            ui: 'default-toolbar',\n\t    \t\t\thandler: this.editList,\n\t    \t\t\tscope: this\n\t    \t\t}]\n    \t})\n        me.callParent(arguments);\n    },\n    \n    editList: function() {\n    \tvar win = this.up('window');\n    \tvar panel = win.panel;\n    \tvar value = this.down('combo').getValue();\n    \tExt.Ajax.request({\n    \t    url: panel.getTromboneUrl(),\n    \t    params: {\n        \t\ttool: 'resource.KeywordsManager',\n        \t\tlist: value\n    \t    },\n    \t    success: function(response){\n    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t    \tvar keywords = json.keywords.keywords.sort().join(\"\\n\");\n    \t\t\tExt.Msg.show({\n\t    \t\t    title: this.localize('editListTitle'),\n\t    \t\t    message: this.localize('editListMessage'),\n\t    \t\t    buttons: Ext.Msg.OKCANCEL,\n\t    \t\t    buttonText: {\n\t    \t\t        ok: this.localize('ok'),\n\t    \t\t        cancel: this.localize('cancel')\n\t    \t\t    },\n\t    \t\t    icon: Ext.Msg.INFO,\n\t    \t\t    prompt: true,\n\t    \t        multiline: true,\n\t    \t        value: keywords,\n\t    \t        original: keywords,\n\t    \t        fn: function(btn,value,list) {\n\t    \t        \tif (btn=='ok' && list.original!=value) {\n\t    \t        \t\tvar combo = this.down('combo')\n\t    \t        \t\tif (Ext.String.trim(value).length==0) {\n\t    \t        \t\t\tcombo.setValue('empty');\n\t    \t        \t\t}\n\t    \t        \t\telse {\n\t    \t        \t    \tExt.Ajax.request({\n\t    \t        \t    \t    url: panel.getTromboneUrl(),\n\t    \t        \t    \t    params: {\n\t    \t        \t        \t\ttool: 'resource.StoredResource',\n\t    \t        \t    \t\t\tstoreResource: value\n\t    \t        \t    \t    },\n\t    \t        \t    \t    combo: combo,\n\t    \t        \t    \t    success: function(response, req) {\n\t    \t        \t    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n\t    \t        \t    \t    \tvar store = req.combo.getStore();\n\t    \t        \t    \t    \tvar value = 'keywords-'+json.storedResource.id;\n\t    \t        \t    \t    \tstore.add({name: value, value: value});\n\t    \t        \t    \t    \treq.combo.setValue(value)\n\t    \t        \t    \t    \treq.combo.updateLayout()\n\t    \t        \t    \t    },\n\t    \t        \t    \t    scope: this\n\t    \t        \t    \t})\n\t    \t        \t\t}\n\t    \t        \t}\n\t    \t        },\n\t    \t        scope: this\n    \t\t\t})\n    \t    },\n    \t    scope: this\n    \t});\n    }\n})","Ext.define('Voyant.widget.StopListOption', {\n    extend: 'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.stoplistoption',\n    layout: 'hbox',\n    statics: {\n    \t\tstoplists: {\n    \t\t    ar: \"stop.ar.txt\",\n    \t\t\tbg: \"stop.bu.txt\",\n    \t\t\tbr: \"stop.br.txt\",\n    \t\t\tca: \"stop.ca.txt\",\n    \t\t\tckb: \"stop.ku.txt\",\n    \t\t\tcn: \"stop.zh.txt\",\n    \t\t\tcz: \"stop.cz.txt\",\n    \t\t\tde: \"stop.de.txt\",\n    \t\t\tel: \"stop.el.txt\",\n    \t\t\ten: \"stop.en.txt\",\n    \t\t\tes: \"stop.es.txt\",\n    \t\t\teu: \"stop.eu.txt\",\n    \t\t\tfa: \"stop.fa.txt\",\n    \t\t\tfr: \"stop.fr.txt\",\n    \t\t\tga: \"stop.ga.txt\",\n    \t\t\tgl: \"stop.gl.txt\",\n    \t\t\tgrc: \"stop.grc.txt\",\n\t\t\t\the: \"stop.he.txt\",\n    \t\t\thi: \"stop.hi.txt\",\n    \t\t\thu: \"stop.hu.txt\",\n    \t\t\thy: \"stop.hy.txt\",\n    \t\t\tid: \"stop.id.txt\",\n    \t\t\tit: \"stop.it.txt\",\n    \t\t\tja: \"stop.ja.txt\",\n    \t\t\tla: \"stop.la.txt\",\n    \t\t\tlv: \"stop.lv.txt\",\n    \t\t\tlt: \"stop.lt.txt\",\n    \t\t\tmu: \"stop.multi.txt\",\n    \t\t\tnl: \"stop.nl.txt\",\n    \t\t\tno: \"stop.no.txt\",\n    \t\t\tpt: \"stop.pt.txt\",\n    \t\t\tro: \"stop.ro.txt\",\n    \t\t\tru: \"stop.ru.txt\",\n    \t\t\tse: \"stop.sv.txt\",\n    \t\t\tth: \"stop.th.txt\",\n    \t\t\ttr: \"stop.tr.txt\",\n\t\t\t\tuk: \"stop.uk.txt\"\n    \t\t},\n\t    \ti18n: {\n\t    \t\t\n\t    \t}\n    },\n    initComponent: function(config) {\n    \tvar me = this;\n    \tvar value = this.up('window').panel.getApiParam('stopList');\n    \tvar data = [];\n    \tfor (id in Voyant.widget.StopListOption.stoplists) {\n    \t\tdata.push({name: this.localize(id), value: Voyant.widget.StopListOption.stoplists[id]})\n    \t}\n    \tdata.sort(function(a,b) { // sort by label\n    \t\treturn a.name < b.name ? -1 : 1;\n    \t})\n    \tdata.splice(0, 0, {name : this.localize('auto'),   value: 'auto'}, {name : this.localize('none'),   value: ''},  {name : this.localize('new'),   value: 'new'})\n    \tExt.apply(me, {\n\t    \t\titems: [{\n\t    \t        xtype: 'combo',\n\t    \t        queryMode: 'local',\n\t    \t        value: value,\n\t    \t        triggerAction: 'all',\n\t    \t        editable: true,\n\t    \t        fieldLabel: this.localize('label'),\n\t    \t        labelAlign: 'right',\n\t    \t        name: 'stopList',\n\t    \t        displayField: 'name',\n\t    \t        valueField: 'value',\n\t    \t        store: {\n\t    \t            fields: ['name', 'value'],\n\t    \t            data: data\n\t    \t        }\n\t    \t\t}, {width: 10}, {xtype: 'tbspacer'}, {\n\t    \t\t\txtype: 'button',\n\t    \t\t\ttext: this.localize('editList'),\n\t\t            ui: 'default-toolbar',\n\t    \t\t\thandler: this.editList,\n\t    \t\t\tscope: this\n\t    \t\t}, {width: 10}, {\n\t    \t\t\txtype: 'checkbox',\n\t    \t\t\tname: 'stopListGlobal',\n\t    \t\t\tchecked: true,\n\t    \t\t\tboxLabel: this.localize('applyGlobally')\n\t    \t\t}]\n    \t})\n        me.callParent(arguments);\n    },\n    \n    editList: function() {\n    \tvar win = this.up('window');\n    \tvar panel = win.panel;\n    \tvar value = this.down('combo').getValue();\n    \tvar corpusId = panel.getApplication && panel.getApplication().getCorpus ? panel.getApplication().getCorpus().getId() : undefined;\n    \tif (value=='auto' && !corpusId) {\n    \t\tExt.Msg.show({\n\t\t\t    title: this.localize('noEditAutoTitle'),\n\t\t\t    message: this.localize('noEditAutoMessage'),\n\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t});\n    \t\treturn\n    \t}\n    \tExt.Ajax.request({\n    \t    url: panel.getTromboneUrl(),\n    \t    params: {\n        \t\ttool: 'resource.KeywordsManager',\n    \t\t\tstopList: value,\n    \t\t\tcorpus: corpusId\n    \t    },\n    \t    success: function(response){\n    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t    \tvar keywords = json.keywords.keywords.sort().join(\"\\n\");\n    \t\t\tExt.Msg.show({\n\t    \t\t    title: this.localize('editStopListTitle'),\n\t    \t\t    message: this.localize('editStopListMessage'),\n\t    \t\t    buttons: Ext.Msg.OKCANCEL,\n\t    \t\t    buttonText: {\n\t    \t\t        ok: this.localize('ok'),\n\t    \t\t        cancel: this.localize('cancel')\n\t    \t\t    },\n\t    \t\t    icon: Ext.Msg.INFO,\n\t    \t\t    prompt: true,\n\t    \t        multiline: true,\n\t    \t        value: keywords,\n\t    \t        original: keywords,\n\t    \t        fn: function(btn,value,stoplist) {\n\t    \t        \t// force lowercase for simple stopword list since it's lexical (this may change if the widget is used elsewhere)\t    \t        \tvalue = value.toLowerCase();\n\t    \t        \tvalue = value.toLowerCase();\n\t    \t        \tif (btn=='ok' && stoplist.original!=value) {\n\t    \t        \t\tvar combo = this.down('combo')\n\t    \t        \t\tif (Ext.String.trim(value).length==0) {\n\t    \t        \t\t\tcombo.setValue('empty');\n\t    \t        \t\t}\n\t    \t        \t\telse {\n\t    \t        \t    \tExt.Ajax.request({\n\t    \t        \t    \t    url: panel.getTromboneUrl(),\n\t    \t        \t    \t    params: {\n\t    \t        \t        \t\ttool: 'resource.StoredResource',\n\t    \t        \t    \t\t\tstoreResource: value,\n\t    \t        \t    \t\t\tcorpus: corpusId\n\t    \t        \t    \t    },\n\t    \t        \t    \t    combo: combo,\n\t    \t        \t    \t    success: function(response, req) {\n\t    \t        \t    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n\t    \t        \t    \t    \tvar store = req.combo.getStore();\n\t    \t        \t    \t    \tvar value = 'keywords-'+json.storedResource.id;\n\t    \t        \t    \t    \tstore.add({name: value, value: value});\n\t    \t        \t    \t    \treq.combo.setValue(value)\n\t    \t        \t    \t    \treq.combo.updateLayout()\n\t    \t        \t    \t    },\n\t    \t        \t    \t    scope: this\n\t    \t        \t    \t})\n\t    \t        \t\t}\n\t    \t        \t}\n\t    \t        },\n\t    \t        scope: this\n    \t\t\t})\n    \t    },\n    \t    scope: this\n    \t});\n    }\n})","Ext.define('Voyant.widget.TermColorsOption', {\n\textend: 'Ext.container.Container',\n\tmixins: ['Voyant.util.Localization'],\n\talias: 'widget.termcolorsoption',\n\tlayout: 'hbox',\n\tstatics: {\n\t\t\ti18n: {\n\t\t\t\tlabel: 'Term Colors',\n\t\t\t\tnone: 'None',\n\t\t\t\tcategories: 'Categories Only',\n\t\t\t\tcategoriesTerms: 'Categories and Terms',\n\t\t\t\tapplyGlobally: 'apply globally'\n\t\t\t}\n\t},\n\tinitComponent: function(config) {\n\t\tvar me = this;\n\t\tExt.apply(me, {\n\t\t\titems: [{\n\t\t\t\txtype: 'combo',\n\t\t\t\tqueryMode: 'local',\n\t\t\t\tvalue: 'categories',\n\t\t\t\tfieldLabel: this.localize('label'),\n\t\t\t\tlabelAlign: 'right',\n\t\t\t\tname: 'termColors',\n\t\t\t\tdisplayField: 'name',\n\t\t\t\tvalueField: 'value',\n\t\t\t\tstore: {\n\t\t\t\t\tfields: ['name', 'value'],\n\t\t\t\t\tdata: [{\n\t\t\t\t\t\tname: this.localize('categories'),\n\t\t\t\t\t\tvalue: 'categories'\n\t\t\t\t\t},{\n\t\t\t\t\t\tname: this.localize('categoriesTerms'),\n\t\t\t\t\t\tvalue: 'terms'\n\t\t\t\t\t},{\n\t\t\t\t\t\tname: this.localize('none'),\n\t\t\t\t\t\tvalue: ''\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t}, {width: 20}, {\n\t\t\t\txtype: 'checkbox',\n\t\t\t\tname: 'termColorsGlobal',\n\t\t\t\tchecked: true,\n\t\t\t\tboxLabel: this.localize('applyGlobally')\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tboxready: function(cmp) {\n\t\t\t\t\tvar win = cmp.up('window');\n\t\t\t\t\tvar value = win.panel.getApiParam('termColors');\n\t\t\t\t\tcmp.down('combo').setValue(value);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\tme.callParent(arguments);\n\t}\n});\n\n/**\n * A column field for use in grid panels.\n * Uses the term's color for display.\n */\nExt.define('Voyant.widget.ColoredTermField', {\n\textend: 'Ext.grid.column.Template',\n\talias: 'widget.coloredtermfield',\n\tconfig: {\n\t\tuseCategoriesMenu: false\n\t},\n\tinitComponent: function() {\n\t\tvar panel = this.up('gridpanel');\n\n\t\tif (this.getUseCategoriesMenu()) {\n\t\t\tthis.categoriesMenu = Ext.create('Voyant.categories.CategoriesMenu', {\n\t\t\t\tpanel: panel,\n\t\t\t\tlisteners: {\n\t\t\t\t\tcategorySet: function(src, cats) {\n\t\t\t\t\t\tvar store = panel.getStore();\n\t\t\t\t\t\tstore.removeAll();\n    \t\t\t\t\tstore.load();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tpanel.on('rowcontextmenu', function(cmp, record, tr, rowIndex, evt) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tpanel.getSelectionModel().select(record, true, false); // force selection on mac\n\t\t\t\tvar terms = panel.getSelection().map(function(sel) { return sel.get('term') });\n\t\t\t\tthis.categoriesMenu.setTerms(terms);\n\t\t\t\tthis.categoriesMenu.showAt(evt.getXY());\n\t\t\t}, this);\n\t\t}\n\n\t\tvar dataIndex = this.dataIndex;\n\t\tExt.apply(this, {\n\t\t\ttpl: new Ext.XTemplate('<span style=\"{[this.getColorStyle(values.'+dataIndex+')]}; padding: 1px 3px; border-radius: 2px;\">{'+dataIndex+'}</span>', {\n\t\t\t\tgetColorStyle: function(term) {\n\t\t\t\t\tvar termColors = panel.getApiParam('termColors');\n\t\t\t\t\tif (termColors !== undefined && termColors !== '' &&\n\t\t\t\t\t\t(termColors === 'categories' && panel.getApplication().getCategoriesManager().getCategoriesForTerm(term).length > 0) ||\n\t\t\t\t\t\t(termColors === 'terms')) {\n\t\t\t\t\t\tvar bgColor = panel.getApplication().getColorForTerm(term);\n\t\t\t\t\t\tvar textColor = panel.getApplication().getTextColorForBackground(bgColor);\n\t\t\t\t\t\treturn 'background-color: rgb('+bgColor.join(',')+'); color: rgb('+textColor.join(',')+')';\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn 'color: rgb(0,0,0)';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\t\tthis.callParent(arguments);\n\t}\n});\n","Ext.define('Voyant.widget.QuerySearchField', {\n    extend: 'Ext.form.field.Tag',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.querysearchfield',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t\tcorpus: undefined,\n\t\ttokenType: 'lexical',\n\t\tisDocsMode: false,\n\t\tinDocumentsCountOnly: undefined,\n\t\tstopList: undefined,\n\t\tshowAggregateInDocumentsCount: false,\n\t\tclearOnQuery: false,\n\t\tparentPanel: undefined,\n\t\tcurrentOriginalRawQueryPlan: undefined\n\t},\n\thasCorpusLoadedListener: false,\n\tisClearing: false, // flag for clearOnQuery\n    \n    constructor: function(config) {\n    \t\n    \tconfig = config || {};\n    \tvar itemTpl = config.itemTpl ? config.itemTpl : (config.inDocumentsCountOnly ?\n    \t\t\t('<tpl><tpl if=\"term.charAt(0)==\\'@\\'\">{term}</tpl><tpl if=\"term.charAt(0)!=\\'@\\'\">{term} ({inDocumentsCount})</tpl></tpl>') :\n    \t\t\t('<tpl><tpl if=\"term.charAt(0)==\\'@\\'\">{term}</tpl><tpl if=\"term.charAt(0)!=\\'@\\'\">{term} ({rawFreq})</tpl></tpl>'))\n    \tExt.applyIf(config, {\n    \t\tminWidth: 100,\n    \t\tmaxWidth: 200,\n    \t\tmatchFieldWidth : false,\n    \t\tminChars: 2,\n    \t    displayField: 'term',\n    \t    valueField: 'term',\n    \t    filterPickList: true,\n    \t    createNewOnEnter: true,\n    \t    createNewOnBlur: false,\n    \t    autoSelect: false,\n//    \t    emptyText: this.localize('querySearch'),\n    \t    tpl: [\n    \t    \t'<ul class=\"x-list-plain\"><tpl for=\".\">',\n    \t    \t'<li role=\"option\" class=\"x-boundlist-item\" style=\"white-space: nowrap;\">'+itemTpl+'</li>',\n    \t    \t'</tpl></ul>'\n    \t    ],\n    \t    triggers: {\n    \t        help: {\n    \t            weight: 2,\n    \t            cls: 'fa-trigger form-fa-help-trigger',\n    \t            handler: function() {\n    \t            \tExt.Msg.show({\n    \t            \t    title: this.localize('querySearch'),\n    \t            \t    message: this.getIsDocsMode() ? this.localize('querySearchDocsModeTip') : this.localize('querySearchTip'),\n    \t            \t    buttons: Ext.OK,\n    \t            \t    icon: Ext.Msg.INFO\n    \t            \t});\n    \t            },\n    \t            scope: 'this'\n    \t        }\n    \t   }\n    \t})\n    \tif (config.showAggregateInDocumentsCount) {\n    \t\tconfig.triggers.count = {\n\t            cls: 'fa-trigger',\n\t            handler: 'onHelpClick',\n\t            scope: 'this',\n\t            hidden: true\n    \t\t}\n    \t}\n    \tif (config.clearOnQuery) {\n    \t\tthis.setClearOnQuery(config.clearOnQuery);\n    \t}\n        this.callParent(arguments);\n    },\n    initComponent: function(config) {\n\n    \tvar me = this;\n\n    \tme.on(\"beforequery\", function(queryPlan) {\n\n    \t\tif (queryPlan.query) {\n    \t\t\tqueryPlan.query = queryPlan.query.trim();\n    \t\t\t\n    \t\t\t// set it in the raw state because we use it in the load event to add categories\n    \t\t\tvar originalRawQueryPlan = queryPlan.query.toLowerCase();\n    \t\t\tthis.setCurrentOriginalRawQueryPlan(queryPlan.query)\n    \t\t\t\n    \t\t\tif (queryPlan.query.charAt(0)!=\"@\") {\n\t    \t\t\tif (queryPlan.query.charAt(0)==\"^\") {\n\t    \t\t\t\tqueryPlan.query=queryPlan.query.substring(1)\n\t    \t\t\t\tqueryPlan.cancel = queryPlan.query.length==0; // cancel if it's just that character\n\t    \t\t\t}\n\t    \t\t\tif (queryPlan.query.charAt(0)==\"*\") { // convert leading wildcard to regex\n\t    \t\t\t\tqueryPlan.query = \".\"+queryPlan.query;\n\t    \t\t\t}\n\t    \t\t\tif (queryPlan.query.charAt(queryPlan.query.length-1)=='*' || queryPlan.query.charAt(queryPlan.query.length-1)=='|') {\n\t    \t\t\t\tqueryPlan.query=queryPlan.query.substring(0,queryPlan.query.length-1)\n\t    \t\t\t\tqueryPlan.cancel = queryPlan.query.length==0; // cancel if it's just that character\n\t    \t\t\t}\n\t    \t\t\tif (queryPlan.query.charAt(0)==\".\") {\n\t    \t\t\t\tqueryPlan.cancel = queryPlan.query.length< (/\\W/.test(queryPlan.query.charAt(1)) ? 5 : 4) // cancel if we only have 3 or fewer after .\n\t    \t\t\t}\n\t    \t\t\ttry {\n\t                    new RegExp(queryPlan.query);\n\t\t            }\n\t\t            catch(e) {\n\t\t            \tqueryPlan.cancel = true;\n\t\t            }\n\t\t            if (queryPlan.query.indexOf('\"')>-1) { // deal with unfinished phrases\n\t\t            \tif (queryPlan.query.indexOf(\" \")==-1) {queryPlan.cancel=true} // no space in phrase\n\t\t            \tif ((queryPlan.query.match(/\"/) || []).length!=2) {queryPlan.cancel=true;} // not balanced quotes\n\t\t            }\n\t\t            if (queryPlan.query.indexOf(\"*\")>-1) {\n\t\t            \t// skip for multiword or pipes\n\t\t            \tif (queryPlan.query.indexOf(\" \")==-1 && queryPlan.query.indexOf(\"|\")==-1) {\n\t\t            \t\tqueryPlan.query += \",^\"+queryPlan.query;\n\t\t            \t}\n\t\t            } else {\n\t\t            \tqueryPlan.query = queryPlan.query+\"*\"+ (queryPlan.query.indexOf(\" \")==-1  && queryPlan.query.indexOf(\"|\")==-1 ? \",\"+\"^\"+queryPlan.query+\"*\" : \"\")\n\t\t            }\n    \t\t\t} else if (queryPlan.query==\"@\") { // no letters yet\n    \t\t\t\tqueryPlan.cancel = true;\n    \t\t\t}\n\t            \n\t            var parent = me.getParentPanel();\n\t            if (queryPlan.cancel==false && parent) {\n\t            \tvar originalRawQueryPlanWithoutAt = originalRawQueryPlan.charAt(0)==\"@\" ? originalRawQueryPlan.substring(1) : originalRawQueryPlan;\n\t\t            for (var cat in parent.getApplication().getCategoriesManager().getCategories()) {\n\t\t            \tif (cat.toLowerCase().indexOf(originalRawQueryPlanWithoutAt)>-1) {\n\t\t            \t\tqueryPlan.query = \"@\"+cat+(originalRawQueryPlan.charAt(0)==\"@\" ? \"\" : \",\"+queryPlan.query);\n\t\t            \t}\n\t\t            }\t\n\t            }\n    \t\t}\n\t            \n\t            \n    \t}, this);\n    \t\n    \tme.on(\"change\", function(tags, queries) {\n    \t\t\n    \t\tif (!me.isClearing) {\n\t\t\t\t// handling for multiSelect=false\n\t\t\t\tif (queries === null) {\n\t\t\t\t\tqueries = [];\n\t\t\t\t} else if (Ext.isArray(queries) === false) {\n\t\t\t\t\tqueries = [queries];\n\t\t\t\t}\n\t\t\t\t\n\t    \t\tqueries = queries.map(function(query) {return query.replace(/^(\\^?)\\*/, \"$1.*\")});\n\t    \t\tme.up('panel').fireEvent(\"query\", me, queries);\n\t    \t\tif (me.getClearOnQuery()) {\n\t    \t\t\tme.isClearing = true;\n\t    \t\t\tme.removeValue(me.getValueRecords());\n\t    \t\t}\n\t    \t\tif (me.triggers.count) {\n\t    \t\t\tme.triggers.count.show();\n\t    \t\t\tme.triggers.count.getEl().setHtml('0');\n\t    \t\t\tif (queries.length>0) {\n\t    \t\t\t\tme.getCorpus().getCorpusTerms().load({\n\t    \t\t\t\t\tparams: {\n\t    \t\t\t\t\t\tquery: queries.map(function(q) {return '('+q+')'}).join(\"|\"),\n\t\t\t\t    \t\t\ttokenType: me.getTokenType(),\n\t\t\t\t    \t\t\tstopList: me.getStopList(),\n\t\t\t\t    \t\t\tinDocumentsCountOnly: true\n\t    \t\t\t\t\t},\n\t    \t\t\t\t\tcallback: function(records, operation, success) {\n\t    \t\t\t\t\t\tif (success && records && records.length==1) {\n\t    \t\t\t\t\t\t\tme.triggers.count.getEl().setHtml(records[0].getInDocumentsCount())\n\t    \t\t\t\t\t\t}\n\t    \t\t\t\t\t}\n\t    \t\t\t\t})\n\t    \t\t\t} else {\n\t    \t\t\t\tme.triggers.count.hide();\n\t    \t\t\t}\n\t    \t\t}\n    \t\t} else {\n    \t\t\tme.isClearing = false;\n    \t\t}\n    \t});\n\n    \t// we need to make sure the panel is a voyantpanel\n    \t// so that we get loadedCorpus event after a call to Voyant.util.Toolable.replacePanel\n    \tvar parentPanel = me.findParentBy(function(clz) {\n    \t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n\t\t});\n    \tif (parentPanel != null) {\n    \t\tthis.setParentPanel(parentPanel);\n    \t\tif (parentPanel.getCorpus && parentPanel.getCorpus()) {\n    \t\t\tme.on(\"afterrender\", function(c) {\n    \t\t\t\tthis.doSetCorpus(parentPanel.getCorpus());\t\n    \t\t\t})\n    \t\t\tme.hasCorpusLoadedListener = true;    \t\t\t\n    \t\t} else {\n\t    \t    \tparentPanel.on(\"loadedCorpus\", function(src, corpus) {\n\t    \t    \t\tme.doSetCorpus(corpus);\n\t    \t    \t}, me);\n\t    \t    \tme.hasCorpusLoadedListener = true;    \t\t\t\n    \t\t}\n    \t}\n    \t\n    \tme.on(\"afterrender\", function(c) {\n    \t\t\n    \t\tif (me.hasCorpusLoadedListener === false) {\n    \t\t\tif (!me.getCorpus()) {\n    \t    \t\tparentPanel = me.findParentBy(function(clz) {\n    \t    \t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n        \t\t\t});\n    \t    \t\tif (parentPanel == null) {\n    \t    \t\t\tparentPanel = me.up('window').panel;\n    \t    \t\t}\n    \t    \t\tvar corpus = parentPanel.getApplication().getCorpus();\n    \t\t\t\tif (corpus !== undefined) {\n    \t\t\t\t\tme.doSetCorpus(corpus);\n    \t\t\t\t} else {\n    \t\t\t\t\tparentPanel.on(\"loadedCorpus\", function(src, corpus) {\n    \t\t\t\t\t\tme.doSetCorpus(corpus);\n    \t\t\t    \t}, me);\n    \t\t\t\t\tme.hasCorpusLoadedListener = true;\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n\t\t\t\n    \t\tif (me.triggers && me.triggers.help) {\n    \t\t\tExt.tip.QuickTipManager.register({\n    \t\t\t\ttarget: me.triggers.help.getEl(),\n    \t\t\t\ttext: me.getIsDocsMode() ? me.localize('querySearchDocsModeTip') : me.localize('querySearchTip')\n\t\t\t\t});\n\t\t\t}\n    \t\tif (me.triggers && me.triggers.count) {\n    \t\t\tExt.tip.QuickTipManager.register({\n    \t\t\t\ttarget: me.triggers.count.getEl(),\n    \t\t\t\ttext: me.localize('aggregateInDocumentsCount')\n\t\t\t\t});\n\t\t\t}\n    \t});\n    \t\n    \tme.on(\"beforedestroy\", function(c) {\n    \t\t\n    \t\tif (me.triggers && me.triggers.help) {\n    \t\t\tExt.tip.QuickTipManager.unregister(me.triggers.help.getEl());\n    \t\t}\n    \t\tif (me.triggers && me.triggers.count) {\n    \t\t\tExt.tip.QuickTipManager.unregister(me.triggers.count.getEl());\n    \t\t}\n    \t});\n    \t\n    \tme.callParent(arguments);\n    },\n    \n    doSetCorpus: function(corpus) {\n\t\t\n    \tif (corpus != null) {\n\t    \tthis.setCorpus(corpus);\n\t\t\tvar stopList = this.getStopList();\n\t\t\tif (stopList==undefined) {\n\t    \t\tif (this.getApiParam) {this.setStopList(this.getApiParam(\"stopList\"))}\n\t    \t\telse {\n\t    \t\t\tvar parent = this.up(\"panel\");\n\t    \t\t\twhile (parent) {\n\t    \t\t\t\tif (parent && parent.getApiParam) {\n\t\t    \t\t\t\tthis.setStopList(parent.getApiParam(\"stopList\"))\n\t\t    \t\t\t\tbreak;\n\t\t    \t\t\t}\n\t    \t\t\t\tparent = parent.up(\"panel\");\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t}\n\n\t\t\tvar categories = this.getApiParam ? this.getApiParam(\"categories\") : undefined;\n\t\t\tif (!categories) {\n    \t\t\tvar parent = this.up(\"panel\");\n    \t\t\twhile (parent) {\n    \t\t\t\tif (parent && parent.getApiParam) {\n    \t\t\t\t\tcategories = parent.getApiParam('categories');\n\t    \t\t\t\tbreak;\n\t    \t\t\t}\n    \t\t\t\tparent = parent.up(\"panel\");\n    \t\t\t}\n\t\t\t}\n\t\t\tvar store = corpus.getCorpusTerms({\t\t\t\t\n\t\t\t\tcorpus: corpus.getAliasOrId(),\n\t\t\t\tproxy: {\n\t\t\t\t\textraParams: {\n\t\t\t    \t\t\tlimit: 10,\n\t\t\t    \t\t\ttokenType: this.tokenType,\n\t\t\t    \t\t\tstopList: this.getStopList(),\n\t\t\t    \t\t\tinDocumentsCountOnly: this.getInDocumentsCountOnly(),\n\t\t\t    \t\t\tcategories: categories\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n//\t\t\tstore.on(\"load\", function() {\n//\t\t\t\tthis.fireEvent.apply(this, [\"load\"].concat(Array.prototype.slice.call(arguments)));\n//\t\t\t}, this);\n\n\t\t\tthis.setStore(store);\n    \t}\n    }\n    \n});\n","Ext.define('Voyant.widget.TotalPropertyStatus', {\n    extend: 'Ext.Component',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.totalpropertystatus',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n    initComponent: function() {\n        Ext.applyIf(this, {\n            tpl: this.localize('totalPropertyStatus'),\n            itemId: 'totalpropertystatus',\n            style: 'margin-right:5px',\n            listeners: {\n            \tafterrender: function(cmp) {\n            \t\tvar grid = cmp.up('grid')\n            \t\tif (grid) {\n            \t\t\tvar store = grid.getStore();\n                        cmp.update({count: store.getTotalCount()});\n            \t\t\tstore.on('datachanged', function(store) {\n                            cmp.update({count: store.getTotalCount()});\n                        });\n            \t\t}\n            \t}\n            }\n        });\n        this.callParent(arguments);\n    }\n});\n","Ext.define('Voyant.widget.DocumentSelector', {\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.documentselector',\n\tglyph: 'xf10c@FontAwesome',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\n\tconfig: {\n\t\tdocs: undefined,\n\t\tcorpus: undefined,\n\t\tsingleSelect: false\n\t},\n\t\n    initComponent: function() {\n\n\t\tvar me = this;\n\t\t\n\t\tthis.setSingleSelect(this.config.singleSelect == undefined ? this.getSingleSelect() : this.config.singleSelect);\n\t\t\n\t\tExt.apply(me, {\n\t\t\ttext: this.localize('documents'),\n\t\t\tmenu: {\n\t\t\t\twidth: 250,\n\t\t\t\tfbar: [{\n\t\t\t\t\txtype: 'checkbox',\n\t\t\t\t\thidden: this.getSingleSelect(),\n\t\t\t\t\tboxLabel: this.localize(\"all\"),\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tchange: {\n\t\t\t\t\t\t\tfn: function(item, checked) {\n\t\t\t\t\t\t\t\tthis.getMenu().items.each(function(item) {\n\t\t\t\t\t\t\t\t\titem.setChecked(checked);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},{xtype:'tbfill'},{\n\t\t    \t\txtype: 'button',\n\t\t    \t\ttext: this.localize('ok'),\n\t\t\t\t\thidden: this.getSingleSelect(),\n\t    \t    \tscale: 'small',\n\t\t    \t\thandler: function(button, e) {\n\t\t    \t\t\tvar docs = [];\n\t\t    \t\t\tthis.getMenu().items.each(function(item) {\n\t\t    \t\t\t\tif (item.checked) {\n\t\t\t    \t\t\t\tdocs.push(item.docId);\n\t\t    \t\t\t\t}\n\t\t    \t\t\t}, this);\n\t\t    \t\t\t\n\t\t    \t\t\t// tell parent tool\n\t\t\t\t\t\tvar panel = button.findParentBy(function(clz) {\n\t\t\t\t\t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (panel) {\n\t\t\t    \t\t\tpanel.fireEvent('documentsSelected', button, docs);\n\t\t\t\t\t\t}\n\n\t\t    \t\t\t// hide the opened menu\n\t\t    \t\t\tbutton.findParentBy(function(clz) {\n\t\t    \t\t\t\tif (clz.isXType(\"button\") && clz.hasVisibleMenu()) {\n\t\t    \t\t\t\t\tclz.hideMenu();\n\t\t    \t\t\t\t\treturn true;\n\t\t    \t\t\t\t}\n\t\t    \t\t\t\treturn false;\n\t\t    \t\t\t});\n\t\t    \t\t},\n\t\t    \t\tscope: this\n\t\t    \t},{\n\t\t    \t\txtype: 'button',\n\t\t    \t\ttext: this.localize('cancel'),\n\t    \t    \tscale: 'small',\n\t\t    \t\thandler: function(b, e) {\n\t\t    \t\t\tthis.findParentBy(function(clz) {\n\t\t    \t\t\t\tif (clz.isXType(\"button\") && clz.hasVisibleMenu()) {\n\t\t    \t\t\t\t\tclz.hideMenu();\n\t\t    \t\t\t\t\treturn true;\n\t\t    \t\t\t\t}\n\t\t    \t\t\t\treturn false;\n\t\t    \t\t\t}, this);\n\t\t    \t\t\tthis.hideMenu();\n\t\t    \t\t},\n\t\t    \t\tscope: this\n\t\t    \t}]\n\t\t\t},\n\t\t\tlisteners: {\n\t\t\t\tafterrender: function(selector) {\n\t\t\t\t\tselector.on(\"loadedCorpus\", function(src, corpus) {\n\t\t\t\t\t\tthis.setCorpus(corpus);\n\t\t\t\t\t\tif (corpus.getDocumentsCount()==1) {\n\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tselector.populate(corpus.getDocumentsStore().getRange());\n\t\t\t\t\t\t}\n\t\t\t\t\t}, selector);\n\t\t\t\t\tvar panel = selector.findParentBy(function(clz) {\n\t\t\t\t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n\t\t\t\t\t});\n\t\t\t\t\tif (panel) {\n\t\t\t\t\t\tpanel.on(\"loadedCorpus\", function(src, corpus) {\n\t\t\t\t\t\t\tselector.fireEvent(\"loadedCorpus\", src, corpus);\n\t\t\t\t\t\t}, selector);\n\t\t\t\t\t\tif (panel.getCorpus && panel.getCorpus()) {selector.fireEvent(\"loadedCorpus\", selector, panel.getCorpus());}\n\t\t\t\t\t\telse if (panel.getStore && panel.getStore() && panel.getStore().getCorpus && panel.getStore().getCorpus()) {\n\t\t\t\t\t\t\tselector.fireEvent(\"loadedCorpus\", selector, panel.getStore().getCorpus());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\n    },\n    \n    populate: function(docs) {\n    \tthis.setDocs(docs);\n    \t\n\t\tvar checkedDocs = {docId: undefined, docIndex: undefined, match: false};\n\t\tvar panel = this.findParentBy(function(clz) {\n\t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n\t\t});\n\t\tif (panel && panel.getApiParam) {\n\t\t\tcheckedDocs.docId = panel.getApiParam('docId');\n\t\t\tcheckedDocs.docIndex = panel.getApiParam('docIndex');\n\t\t\tif (checkedDocs.docId !== undefined && typeof checkedDocs.docId === 'string') {\n\t\t\t\tcheckedDocs.docId = checkedDocs.docId.split(',');\n\t\t\t\tcheckedDocs.match = true;\n\t\t\t}\n\t\t\tif (checkedDocs.docIndex !== undefined && typeof checkedDocs.docIndex === 'string') {\n\t\t\t\tcheckedDocs.docIndex = checkedDocs.docIndex.split(',').map(function(di) { return parseInt(di)});\n\t\t\t\tcheckedDocs.match = true;\n\t\t\t}\n\t\t}\n\n    \tvar menu = this.getMenu();\n    \tmenu.removeAll();\n    \t\n    \tvar isSingleSelect = this.getSingleSelect();\n    \t\n    \tvar groupId = 'docGroup'+Ext.id();\n    \tdocs.forEach(function(doc, index) {\n\t\t\tvar checked = isSingleSelect && index == 0 || !isSingleSelect;\n\t\t\tif (checkedDocs.match) {\n\t\t\t\tchecked = (checkedDocs.docId !== undefined && checkedDocs.docId.indexOf(doc.get('id')) !== -1) || (checkedDocs.docIndex !== undefined && checkedDocs.docIndex.indexOf(doc.get('index')) !== -1);\n\t\t\t}\n    \t\tmenu.add({\n    \t\t\txtype: 'menucheckitem',\n    \t\t\ttext: doc.getShortTitle(),\n    \t\t\tdocId: doc.get('id'),\n    \t\t\tchecked: checked,\n    \t\t\tgroup: isSingleSelect ? groupId : undefined,\n    \t\t\tcheckHandler: function(item, checked) {\n    \t\t\t\tif (this.getSingleSelect() && checked) {\n    \t\t\t\t\tvar panel = this.findParentBy(function(clz) {\n    \t\t\t\t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n    \t\t\t\t\t});\n    \t\t\t\t\tif (panel) {\n\t    \t\t\t\t\tpanel.fireEvent('documentSelected', this, doc);\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t},\n    \t\t\tscope: this\n    \t\t});\n    \t}, this);\n    \t\n    }\n});\n\nExt.define('Voyant.widget.DocumentSelectorButton', {\n    extend: 'Ext.button.Button',\n    alias: 'widget.documentselectorbutton',\n    mixins: ['Voyant.widget.DocumentSelector'],\n    initComponent: function() {\n    \tthis.mixins[\"Voyant.widget.DocumentSelector\"].initComponent.apply(this, arguments);\n\t\tthis.callParent();\n    }\n})\n    \nExt.define('Voyant.widget.DocumentSelectorMenuItem', {\n    extend: 'Ext.menu.Item',\n    alias: 'widget.documentselectormenuitem',\n    mixins: ['Voyant.widget.DocumentSelector'],\n    initComponent: function() {\n    \tthis.mixins[\"Voyant.widget.DocumentSelector\"].initComponent.apply(this, arguments);\n\t\tthis.callParent();\n    }\n})\n","Ext.define('Voyant.widget.CorpusDocumentSelector', {\n    extend: 'Ext.button.Button',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.corpusdocumentselector',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t\tcorpus: undefined,\n\t\tsingleSelect: false\n\t},\n\t\n    initComponent: function() {\n\t\tvar me = this;\n\t\t\n\t\tthis.setSingleSelect(this.config.singleSelect == undefined ? this.getSingleSelect() : this.config.singleSelect);\n\t\t\n\t\tExt.apply(me, {\n\t\t\ttext: this.localize('scale'),\n\t\t\tglyph: 'xf059@FontAwesome',\n\t\t\tmenu: {\n\t\t\t\titems: [{\n\t\t\t\t\ttext: this.localize(\"corpus\"),\n\t\t\t\t\tglyph: 'xf111@FontAwesome',\n\t\t\t\t\thandler: function(button) {\n\t\t\t\t\t\tvar panel = this.findParentBy(function(clz) {\n\t\t\t\t\t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (panel) {\n\t\t\t\t\t\t\tbutton.nextSibling().menu.items.each(function(item) {\n\t\t\t\t\t\t\t\titem.setChecked(false, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tpanel.fireEvent(\"corpusSelected\", this, this.getCorpus());\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t},{\n\t\t\t\t\txtype: 'documentselectormenuitem',\n\t\t\t\t\tsingleSelect: this.getSingleSelect()\n\t\t\t\t}]\n\t\t\t},\n\t\t\tlisteners: {\n\t\t\t\tafterrender: function(selector) {\n\t\t\t\t\tselector.on(\"loadedCorpus\", function(src, corpus) {\n\t\t\t\t\t\tthis.setCorpus(corpus);\n\t\t\t\t\t\tif (corpus.getDocumentsCount()==1) {\n\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, selector);\n\t\t\t\t\tvar panel = selector.findParentBy(function(clz) {\n\t\t\t\t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n\t\t\t\t\t});\n\t\t\t\t\tif (panel) {\n\t\t\t\t\t\tpanel.on(\"loadedCorpus\", function(src, corpus) {\n\t\t\t\t\t\t\tselector.fireEvent(\"loadedCorpus\", src, corpus);\n\t\t\t\t\t\t}, selector);\n\t\t\t\t\t\tif (panel.getCorpus && panel.getCorpus()) {selector.fireEvent(\"loadedCorpus\", selector, panel.getCorpus())}\n\t\t\t\t\t\telse if (panel.getStore && panel.getStore() && panel.getStore().getCorpus && panel.getStore().getCorpus()) {\n\t\t\t\t\t\t\tselector.fireEvent(\"loadedCorpus\", selector, panel.getStore().getCorpus());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tme.callParent(arguments);\t\n    }\n});","Ext.define('Voyant.widget.DownloadFilenameBuilder', {\n    extend: 'Ext.form.FieldContainer', //'Ext.container.Container',\n    mixins: ['Voyant.util.Localization', 'Ext.form.field.Field'],\n    alias: 'widget.downloadfilenamebuilder',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t    name: 'documentFilename',\n\t    itemId: 'documentFilename',\n\t\tfields: ['pubDate', 'title', 'author'],\n\t\tvalue: ['pubDate', 'title'],\n\t\twidth: 400\n\t},\n\t\n\n    initComponent: function(config) {\n    \tconfig = config || {};\n        var me = this;\n        \n        me.initField();\n\n        me.on('afterrender', function() {\n        \tthis.items.eachKey(function(key) {\n        \t\tnew Ext.dd.DropZone(this.items.get(key).getTargetEl(), {\n        \t\t\tddGroup: 'downloadfilename',\n        \t\t\tgetTargetFromEvent: function(e) {\n        \t\t\t\tvar target = e.getTarget();\n        \t\t\t\t// check that we're not dropping on another source\n        \t\t\t\treturn target.className && target.className.indexOf('dragsource')>-1 ? target.parentNode : target;\n        \t        },\n        \t        onNodeDrop : function(target, dd, e, data){\n        \t        \ttarget.appendChild(dd.el.dom);\n        \t            return true;\n        \t        }\n        \t\t});\n        \t}, this)\n        \t\n        \tthis.getFields().map(function(item) {\n        \t\titem = Ext.isString(item) ? {\n            \t\ttag: 'span',\n            \t\thtml: this.localize(item+\"Label\"),\n            \t\tvalue: item\n        \t\t} : item;\n        \t\tvar container = this.queryById(Ext.Array.contains(this.getValue(), item.value) ? 'enabled' : 'available')\n\t\t\t\tvar el = Ext.dom.Helper.append(container.getTargetEl(), Ext.apply(item, {cls: 'dragsource'}));\n    \t\t\tExt.create('Ext.dd.DragSource', el, {\n    \t\t\t\tddGroup: 'downloadfilename'\n                });\n        \t}, this)\n        }, me);\n        me.callParent(arguments);\n    }, \n    defaults: {\n    \txtype: 'container',\n    \twidth: '100%'\n    },\n    items: [{\n    \titemId: 'enabled',\n    \tcls: 'dropzone dropzone-enabled'\n    }, {\n    \titemId: 'available',\n    \tcls: 'dropzone dropzone-disabled'\n    }],\n    \n    \n    getValue: function() {\n    \treturn this.rendered ? this.getTargetEl().query('.dropzone-enabled .dragsource').map(function(source) {return source.getAttribute('value')}) : this.value;\n    },\n    \n    setValue: function(val) {\n    \tif (this.rendered) {\n        \tthis.getTargetEl().query(\".dragsource\", false).forEach(function(source) {\n        \t\tvar enabled = Ext.Array.contains(this.value, source.getAttribute('value'))\n        \t\tif (enabled && source.parent().hasCls('dropzone-disabled')) {\n        \t\t\tthis.queryById('enabled').getTargetEl().appendChild(source.dom);\n        \t\t} else if (!enabled && source.parent().hasCls('dropzone-enabled')) {\n        \t\t\tthis.queryById('available').getTargetEl().appendChild(source.dom);\n        \t\t}\n        \t}, this)\n    \t} else {\n    \t\tthis.value = val;\n    \t}\n    }\n    \n    \n});\n","Ext.define('Voyant.widget.DownloadFileFormat', {\n    extend: 'Ext.form.CheckboxGroup', //'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.downloadfileformat',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n    initComponent: function(config) {\n    \tconfig = config || {};\n        var me = this;\n        \n        Ext.apply(this, {\n        \tlabelAlign: config.labelAlign ? config.labelAlign : 'right'\n        })\n\n        Ext.applyIf(this, {\n        \tfieldLabel: this.localize('fieldLabel'),\n        \titems: [\n\t            {boxLabel: this.localize('original'), name: 'documentFormat', inputValue: 'SOURCE'},\n\t            {boxLabel: this.localize('voyantXml'), name: 'documentFormat', inputValue: 'VOYANT'},\n                {boxLabel: this.localize('plainText'), name: 'documentFormat', inputValue: 'TXT'}\n        \t],\n        \twidth: 450\n        })\n        me.on('afterrender', function() {\n        \tthis.query('checkbox').forEach(function(cmp) {\n        \t\tvar tooltip = this.localize(cmp.inputValue+\"Tip\");\n        \t\tif (tooltip.indexOf(cmp.inputValue+\"Tip\")==-1) {\n\t\t        \tExt.tip.QuickTipManager.register({\n\t\t                 target:cmp.getEl(),\n\t\t                 text: tooltip\n\t\t             });\n        \t\t}\n        \t}, this)\n        }, this)\n        me.on('beforedestroy', function() {\n        \tthis.query('checkbox').forEach(function(cmp) {\n        \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n        \t}, this);\n        }, this);\n\n        me.callParent(arguments);\n    }\n});\n","Ext.define('Voyant.widget.DownloadOptions', {\n    extend: 'Ext.form.FieldSet',\n    mixins: ['Voyant.util.Localization'],\n    requires: ['Voyant.widget.DownloadFileFormat', 'Voyant.widget.DownloadFilenameBuilder'],\n    alias: 'widget.downloadoptions',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t\titems: [{xtype: 'downloadfileformat'}, {xtype: 'downloadfilenamebuilder'}]\n\t},\n    initComponent: function(config) {\n    \tconfig = config || {};\n    \tvar me = this;\n        Ext.apply(this, {\n        \ttitle: config.title ? config.title : this.localize('title')\n        })\n        me.callParent(arguments);\n    }\n});\n","Ext.define('Voyant.widget.FontFamilyOption', {\n    extend: 'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.fontfamilyoption',\n    statics: {\n    \ti18n: {\n    \t},\n    \tfonts: [{name: \"Georgia\", value: 'Georgia, serif'},\n\t            {name: \"Palatino\", value: '\"Palatino Linotype\", \"Book Antiqua\", Palatino, serif'},\n\t            {name: \"Times New Roman\", value: '\"Times New Roman\", Times, serif'},\n\t            {name: \"Arial\", value: 'Arial, Helvetica, sans-serif'},\n\t            {name: \"Arial Black\", value: '\"Arial Black\", Gadget, sans-serif'},\n\t            {name: \"Comic Sans MS\", value: '\"Comic Sans MS\", cursive, sans-serif'},\n\t            {name: \"Impact\", value: 'Impact, Charcoal, sans-serif'},\n\t            {name: \"Lato\", value: 'LatoWeb'},\n\t            {name: \"Lucida\", value: '\"Lucida Sans Unicode\", \"Lucida Grande\", sans-serif'},\n\t            {name: \"Tahoma/Geneva\", value: 'Tahoma, Geneva, sans-serif'},\n\t            {name: \"Trebuchet MS/Helvetica\", value: '\"Trebuchet MS\", Helvetica, sans-serif'},\n\t            {name: \"Verdana/Geneva\", value: 'Verdana, Geneva, sans-serif'},\n\t            {name: \"Courrier New\", value: '\"Courier New\", Courier, monospace'},\n\t            {name: \"Lucida/Monaco\", value: '\"Lucida Console\", Monaco, monospace'}]\n    },\n    name: 'fontFamily',\n    initComponent: function(config) {\n    \tconfig = config || {};\n    \tvar me = this;\n    \tvar value = this.up('window').panel.getApiParam('fontFamily');\n    \tvar data = Ext.ClassManager.getClass(this).fonts;\n\n    \tif (!Ext.Array.contains(data.map(function(item) {return item.value}), value)) {\n        \tdata.splice(0, 0, {name : value, value: value});//\n    \t}\n    \t\n    \tExt.apply(me, {\n    \t\titems: {\n    \t\t\txtype: 'combo',\n    \t        queryMode: 'local',\n    \t        name: 'fontFamily',\n    \t        value: value,\n    \t        triggerAction: 'all',\n    \t        editable: true,\n    \t        fieldLabel: this.localize('label'),\n    \t        labelAlign: 'right',\n    \t        displayField: 'name',\n    \t        valueField: 'value',\n    \t        store: {\n    \t            fields: ['name', 'value'],\n    \t            data: data\n    \t        }\n    \t\t}\n    \t})\n        me.callParent(arguments);\n    }\n})","Ext.define('Voyant.widget.ColorPaletteOption', {\n    extend: 'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.colorpaletteoption',\n    layout: 'hbox',\n    statics: {\n    \ti18n: {\n\t\t\tpresetPalettes: 'Preset Palettes',\n\t\t\tpaletteSize: 'Palette Size',\n\t\t\tcategorical: 'Categorical',\n\t\t\tsequentialSingle: 'Sequential (Single Value)',\n\t\t\tsequentialMulti: 'Sequential (Multi Value)',\n\t\t\tsequentialDiverging: 'Sequential (Diverging Value)',\n\t\t\tcyclical: 'Cyclical'\n    \t}\n    },\n    \n    paletteTpl: new Ext.XTemplate(\n\t\t'<tpl for=\".\">',\n\t\t\t'<div class=\"color\" style=\"background-color: rgb({color});\"></div>',\n\t\t'</tpl>'\n\t),\n\tpaletteStore: new Ext.data.ArrayStore({\n        fields: ['color']\n    }),\n\n\td3PaletteTreeData: [],\n    \n    editPaletteWin: null,\n    spectrum: null,\n    \n    initComponent: function(config) {\n    \tvar me = this;\n\n    \tvar app = this.up('window').panel.getApplication();\n    \tvar data = [];\n    \tfor (var key in app.getPalettes()) {\n    \t\tdata.push({name: key, value: key});\n    \t}\n    \t\n\t\tif (this.d3PaletteTreeData.length === 0) {\n\t\t\tObject.entries(app.d3Palettes).forEach(function(entry) {\n\t\t\t\tvar palCategory = entry[0];\n\t\t\t\tvar palNames = entry[1];\n\t\t\t\tvar parent = {\n\t\t\t\t\ttext: this.localize(palCategory),\n\t\t\t\t\texpanded: false,\n\t\t\t\t\tchildren: []\n\t\t\t\t}\n\t\t\t\tvar isCategorical = palCategory === 'categorical';\n\t\t\t\tparent.children = palNames.map(function(palName) {\n\t\t\t\t\t// categorical palettes start with _ to mark them as non-interpolatable\n\t\t\t\t\treturn {text: palName, value: (isCategorical?'_':'')+palName, leaf: true, glyph: 'xf1fc@FontAwesome', cls: 'd3-palette-item'};\n\t\t\t\t});\n\t\t\t\tthis.d3PaletteTreeData.push(parent);\n\t\t\t}, this);\n\t\t}\n\n\t\tvar value = app.getApiParam('palette');\n    \tExt.apply(me, {\n\t\t\titems: [{\n\t\t\t\txtype: 'combo',\n\t\t\t\tqueryMode: 'local',\n\t\t\t\tvalue: value,\n\t\t\t\ttriggerAction: 'all',\n\t\t\t\teditable: true,\n\t\t\t\tfieldLabel: me.localize('palette'),\n\t\t\t\tlabelAlign: 'right',\n\t\t\t\tname: 'palette',\n\t\t\t\tdisplayField: 'name',\n\t\t\t\tvalueField: 'value',\n\t\t\t\tstore: {\n\t\t\t\t\tfields: ['name', 'value'],\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t}, {width: 10}, {xtype: 'tbspacer'}, {\n\t\t\t\txtype: 'button',\n\t\t\t\ttext: this.localize('editList'),\n\t\t\t\tui: 'default-toolbar',\n\t\t\t\thandler: this.editPalette,\n\t\t\t\tscope: this\n\t\t\t}]\n    \t});\n        me.callParent(arguments);\n    },\n    \n    editPalette: function() {\n    \tvar value = this.down('combo').getValue();\n    \tthis.loadPalette(value);\n    \t\n    \tthis.editPaletteWin = Ext.create('Ext.window.Window', {\n\t\t\ttitle: this.localize('paletteEditor'),\n\t\t\tmodal: true,\n\t\t\theight: 400,\n\t\t\twidth: 680,\n\t\t\tlayout: {\n\t\t\t\ttype: 'hbox',\n\t\t\t\talign: 'stretch',\n\t\t\t\tpack: 'center',\n\t\t\t\tpadding: '5 10'\n\t\t\t},\n\t\t\titems:[{\n\t\t\t\twidth: 225,\n\t\t\t\tmargin: '0 10 0 0',\n\t\t\t\tpadding: '0 5 0 0',\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\talign: 'stretch'\n\t\t\t\t},\n\t\t\t\titems: [{\n\t\t\t\t\txtype: 'component',\n\t\t\t\t\thtml: this.localize('presetPalettes')\n\t\t\t\t},{\n\t\t\t\t\titemId: 'd3PaletteNames',\n\t\t\t\t\tflex: 1,\n\t\t\t\t\txtype: 'treepanel',\n\t\t\t\t\tscrollable: 'y',\n\t\t\t\t\trootVisible: false,\n\t\t\t\t\troot: {expanded: true, children: this.d3PaletteTreeData},\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tbeforeselect: function(view, record) {\n\t\t\t\t\t\t\treturn record.get('leaf');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tselectionchange: function(view, records) {\n\t\t\t\t\t\t\tif (records.length > 0) {\n\t\t\t\t\t\t\t\tif (records[0].get('value') === null || records[0].get('value').startsWith('_')) {\n\t\t\t\t\t\t\t\t\tthis.editPaletteWin.down('#d3PaletteSize').disable();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.editPaletteWin.down('#d3PaletteSize').enable();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.loadD3Palette();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\titemId: 'd3PaletteSize',\n\t\t\t\t\tmargin: '5 0',\n\t\t\t\t\txtype: 'numberfield',\n\t\t\t\t\tfieldLabel: this.localize('paletteSize'),\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tminValue: 3,\n\t\t\t\t\tmaxValue: 40,\n\t\t\t\t\tvalue: 10,\n\t\t\t\t\tdisabled: true,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tchange: function(field, newValue, oldValue) {\n\t\t\t\t\t\t\tif (field.isValid()) {\n\t\t\t\t\t\t\t\tthis.loadD3Palette();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t},{\n\t\t\t\titemId: 'paletteSwatches',\n\t\t\t\txtype: 'dataview',\n\t\t\t\tflex: 1,\n\t\t\t\tscrollable: 'y',\n\t\t\t\tstore: this.paletteStore,\n\t\t\t\ttpl: this.paletteTpl,\n\t\t\t\titemSelector: 'div.color',\n\t\t\t\toverItemCls: 'over',\n\t\t\t\tselectedItemCls: 'selected',\n\t\t\t\tselectionModel: {\n\t\t\t\t\tmode: 'SINGLE'\n\t\t\t\t},\n\t\t\t\tlisteners: {\n\t\t\t\t\tselectionchange: function(viewmodel, selected, opts) {\n\t\t\t\t\t\tif (selected[0] !== undefined) {\n\t\t\t\t\t\t\tvar color = selected[0].get('color');\n\t\t\t\t\t\t\tvar parentPanel = this.up('window').panel;\n\t\t\t\t\t\t\tvar hex = parentPanel.getApplication().rgbToHex(color);\n\t\t\t\t\t\t\tthis.spectrum.spectrum('set', hex);\n\t\t\t\t\t\t\tthis.editPaletteWin.down('#removeButton').enable();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.editPaletteWin.down('#removeButton').disable();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t},{\n\t\t\t\twidth: 210,\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\talign: 'middle'\n\t\t\t\t},\n\t\t\t\tmargin: '0 0 0 10',\n\t\t\t\tpadding: '0 0 0 5',\n\t\t\t\titems: [{\n\t\t\t\t\titemId: 'colorEditor',\n\t\t\t\t\twidth: 200,\n\t\t\t\t\theight: 200,\n\t\t\t\t\tmargin: '0 -10 10 20',\n\t\t\t\t\thtml: '<input type=\"text\" style=\"display: none;\" />'\n\t\t\t\t},{\n\t\t\t\t\txtype: 'button',\n\t\t\t\t\twidth: 190,\n\t\t\t\t\ttext: this.localize('add'),\n\t\t\t\t\tmargin: '0 0 10 0',\n\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\tvar color = this.spectrum.spectrum('get').toRgb();\n\t\t\t\t\t\tthis.paletteStore.add([[[color.r, color.g, color.b]]]);\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t},{\n\t\t\t\t\titemId: 'removeButton',\n\t\t\t\t\txtype: 'button',\n\t\t\t\t\twidth: 190,\n\t\t\t\t\tdisabled: true,\n\t\t\t\t\ttext: this.localize('remove'),\n\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\tvar dv = this.editPaletteWin.down('#paletteSwatches');\n\t\t\t\t\t\tvar sel = dv.getSelection()[0];\n\t\t\t\t\t\tif (sel !== undefined) {\n\t\t\t\t\t\t\tthis.paletteStore.remove(sel);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}]\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: this.localize('clear'),\n\t\t\t\tui: 'default-toolbar',\n\t\t\t\thandler: function(btn) {\n\t\t\t\t\tthis.paletteStore.removeAll();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},'->',{\n\t\t\t\ttext: this.localize('cancel'),\n\t\t\t\tui: 'default-toolbar',\n\t\t\t\thandler: function(btn) {\n\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: this.localize('saveNewPalette'),\n\t\t\t\thandler: function(btn) {\n\t\t\t\t\tthis.savePalette();\n\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tclose: function(panel) {\n\t\t\t\t\tif (this.spectrum) {\n\t\t\t\t\t\tthis.spectrum.spectrum('destroy');\n\t\t\t\t\t\tthis.spectrum = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n    \t}).show();\n    \t\n    \tthis.initSpectrum();\n    },\n    \n    setColorForSelected: function(color) {\n    \tif (this.spectrum !== null) { // need check due to https://github.com/bgrins/spectrum/issues/387\n\t\t\tvar rgb = color.toRgb();\n\t\t\tvar rgbA = [rgb.r, rgb.g, rgb.b];\n\t\t\tvar dv = this.editPaletteWin.down('#paletteSwatches');\n\t\t\tvar sel = dv.getSelection()[0];\n\t\t\tif (sel !== undefined) {\n\t\t\t\tsel.set('color', rgbA);\n\t\t\t}\n    \t}\n\t},\n    \n\tinitSpectrum: function() {\n\t\tif (this.spectrum === null) {\n\t\t\tvar editor = this.editPaletteWin.down('#colorEditor');\n\t\t\tvar input = editor.el.down('input');\n\t\t\tthis.spectrum = $(input.dom).spectrum({\n\t\t\t\tflat: true,\n\t\t\t\tshowInput: true,\n\t\t\t\tshowButtons: false,\n\t\t\t\tpreferredFormat: 'hex',\n\t\t\t\tchange: this.setColorForSelected.bind(this),\n\t\t\t\tmove: this.setColorForSelected.bind(this)\n\t\t\t});\n\t\t}\n\t},\n\t\n    loadPalette: function(paletteId) {\n    \tvar application = this.up('window').panel.getApplication();\n    \t\n    \tvar palette = application.getColorPalette(paletteId);\n\n\t\tif (palette == undefined) {\n\t\t\tapplication.loadCustomColorPalette(paletteId).then(function(id) {\n\t\t\t\tthis.loadPalette(paletteId);\n\t\t\t}.bind(this), function() {\n\t\t\t\t// error loading palette\n\t\t\t})\n\t\t} else {\n\t\t\tvar paletteData = palette.map(function(c) { return [c]});\n\t\t\tthis.paletteStore.loadRawData(paletteData);\n\t\t}\n    },\n\n\tloadD3Palette: function() {\n\t\tvar application = this.up('window').panel.getApplication();\n\n\t\tvar palName = '';\n\t\tvar palRecord = this.editPaletteWin.down('#d3PaletteNames').getSelection()[0];\n\t\tif (palRecord === null) {\n\t\t\treturn;\n\t\t} else {\n\t\t\tpalName = palRecord.get('value').replace(/^_/, ''); // remove underscore from categorical palettes\n\t\t}\n\t\tvar steps = this.editPaletteWin.down('#d3PaletteSize');\n\t\tif (steps.isValid()) {\n\t\t\tsteps = steps.getValue();\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tvar palette = application.createD3ColorPalette(palName, steps);\n\t\tvar paletteData = palette.map(function(c) { return [c]});\n\t\tthis.paletteStore.loadRawData(paletteData);\n\t},\n    \n    savePalette: function() {\n\t\t// TODO if it's a d3 categorical preset then no need to save\n\t\t\n    \tvar value = [];\n    \tthis.paletteStore.each(function(c) {\n    \t\tvalue.push(c.get('color'));\n    \t});\n    \t\n\t\tthis.up('window').panel.getApplication()\n\t\t\t.saveCustomColorPalette(value).then(function(id) {\n\t\t\t\tvar combo = this.down('combo');\n\t\t\t\tvar store = combo.getStore();\n\t\t\t\tstore.add({name: id, value: id});\n\t\t\t\tcombo.setValue(id);\n\t\t\t\tcombo.updateLayout();\n\t\t\t}.bind(this));\n    }\n});","Ext.define('Voyant.widget.VoyantChart', {\n    extend: 'Ext.chart.CartesianChart',\n    mixins: ['Voyant.util.Localization','Voyant.util.Api'],\n    alias: 'widget.voyantchart',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\ttableJson: undefined\n    \t}\n    },\n    constructor: function(config) {\n    \tconfig = config || {};\n    \tvar me = this;\n    \tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n    \tthis.callParent(arguments)\n    \t\n    },\n    initComponent: function(config) {\n    \tconfig = config || {};\n    \tthis.on(\"afterrender\", function() {\n        \tif (config && \"tableJson\" in config) {\n        \t\tExt.apply(this, this.getConfigFromTableJson(config.tableJson));\n        \t}\n        \telse if (this.getApiParam('tableJson')) {\n        \t\tvar chart = this.getConfigFromTableJson();\n        \t\tthis.setAxes(chart.axes);\n        \t\tthis.setSeries(chart.series);\n        \t\tthis.setLegend(chart.legend);\n        \t\tthis.setStore(chart.store);\n        \t\tthis.redraw();\n        \t}\n    \t}, this)\n    \tthis.callParent(arguments)\n    },\n    \n    getConfigFromTableJson: function(jsonString) {\n    \tjsonString = jsonString || this.getApiParam('tableJson');\n    \tif (!jsonString) {return {}};\n    \t\n\t\tvar json = JSON.parse(jsonString);\n\t\t\n\t\tjson.headers = json.headers.map(function(header) {return header})\n\t\t// if we have only one column add a second column with a counter (as category)\n\t\tif (json.headers.length==1) {\n\t\t\tjson.headers.push(1);\n\t\t\tjson.rowKey = 1;\n\t\t\tjson.rows.forEach(function(row, i) {if (row) {row.push(i)}})\n\t\t}\n\t\t\n\t\t// data\n\t\tvar data = [];\n\t\tif (!json.rowKey) {json.rowKey=json.headers[0];}\n\t\tjson.rows.forEach(function(row, i) {\n\t\t\tif (row) {\n\t\t\t\tvar map = {};\n\t\t\t\tmap[json.rowKey] = i;\n\t\t\t\trow = row.forEach(function(cell, j) {\n\t\t\t\t\tmap[json.headers[j]] = cell\n\t\t\t\t})\n\t\t\t\tdata.push(map);\n\t\t\t}\n\t\t})\n\n\t\t// start chart\n\t\tif (!json.config) {json.config = {}}\n\t\tvar chart = {\n\t\t\tstore: {\n\t\t        fields: Object.keys(data[0]),\n\t\t        data: data\n\t\t\t},\n\t        axes: Ext.isArray(json.config.axes) ? json.config.axes : [{},{}],\n\t        series: [],\n    \t\tlegend: json.config.noLegend || Object.keys(data[0]).length<3 ? undefined : {docked:'top'}\n\n\t\t}\n\n\t\t// axes\n\t\tif (!json.config.axes) {json.config.axes = [{},{}]}\n\t\tchart.axes.forEach(function(axis, i) {\n\t\t\tif (Ext.isObject(json.config.axes)) {\n\t\t\t\tExt.apply(axis, json.config.axes);\n\t\t\t} else if (Ext.isArray(json.config.axes)) {\n\t\t\t\tExt.apply(axis, json.config.axes[i]);\n\t\t\t}\n\t\t\tExt.applyIf(axis, {\n\t        \ttype: i==0 ? 'numeric' : 'category',\n\t        \tposition: i==0 ? 'left' : 'bottom',\n\t        \tlabel: i==0 ? {} : {rotation: {degrees:-30}}\n\t        });\n\t\t})\n\n\t\t// series\n\t\tfor (var i=0, len=json.headers.length; i<len;i++) {\n\t\t\tif (json.headers[i]==json.rowKey) {continue;} // don't chart the row key, that's the x axis \n\t\t\tvar cfg = {};\n\t\t\tif (json.config.series) {\n\t\t\t\tif (Ext.isObject(json.config.series)) {\n\t\t\t\t\tExt.apply(cfg, json.config.series);\n\t\t\t\t} else if (Ext.isArray(json.config.series)) {\n\t\t\t\t\tExt.apply(cfg, json.config.series[chart.series.length]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tExt.applyIf(cfg, {\n\t\t        type: 'line',\n\t\t        xField: json.rowKey,\n\t\t        yField: json.headers[i],\n\t\t        marker: {\n\t\t        \tradius: 2\n\t\t        },\n\t\t        highlightCfg: {\n\t                scaling: 2\n\t            },\n\t            tooltip: {\n\t            \ttrackMouse: true,\n\t            \trenderer: function (tooltip, record, item) {\n\t                    tooltip.setHtml(record.get(item.series.getYField())+\": \"+record.get(item.series.getYField()));\n\t                }\n\t            }\n\t\t\t});\n\t\t\tchart.series.push(cfg);\n\t\t}\n\t\t\n\t\treturn chart;\n    \t\n    }\n\n})","Ext.define('Voyant.widget.LiveSearchGrid', {\n    extend: 'Ext.grid.Panel',\n    \n    /**\n     * @private\n     * search value initialization\n     */\n    searchValue: null,\n    \n    /**\n     * @private\n     * The matched positions from the most recent search\n     */\n    matches: [],\n    \n    /**\n     * @private\n     * The current index matched.\n     */\n    currentIndex: null,\n    \n    /**\n     * @private\n     * The generated regular expression used for searching.\n     */\n    searchRegExp: null,\n    \n    /**\n     * @private\n     * Case sensitive mode.\n     */\n    caseSensitive: false,\n    \n    /**\n     * @private\n     * Regular expression mode.\n     */\n    regExpMode: false,\n    \n    /**\n     * @cfg {String} matchCls\n     * The matched string css classe.\n     */\n    matchCls: 'keyword',\n    \n    // Component initialization override: adds the top and bottom toolbars and setup headers renderer.\n    initComponent: function() {\n        var me = this;\n        me.callParent(arguments);\n    },\n    \n    // detects html tag\n    tagsRe: /<[^>]*>/gm,\n    \n    // DEL ASCII code\n    tagsProtect: '\\x0f',\n    \n    /**\n     * Finds all strings that matches the searched value in each grid cells.\n     * @private\n     */\n     onTextFieldChange: function(field, val) {\n         var me = this,\n             count = 0,\n             view = me.view,\n             cellSelector = view.cellSelector,\n             innerSelector = view.innerSelector,\n             columns = me.visibleColumnManager.getColumns();\n\n         view.refresh();\n\n         me.searchValue = val;\n         me.matches = [];\n         me.currentIndex = null;\n\n         if (me.searchValue !== null) {\n             me.searchRegExp = new RegExp(val, 'g' + (me.caseSensitive ? '' : 'i'));\n\n             me.store.each(function(record, idx) {\n                var node = view.getNode(record);\n\n                if (node) {\n                    Ext.Array.forEach(columns, function(column) {\n                    \t\n                        var cell = Ext.fly(node).down(column.getCellInnerSelector(), true),\n                            matches, cellHTML,\n                            seen;\n\n                        if (cell && column.isXType('widgetcolumn')==false) {\n                            matches = cell.innerHTML.match(me.tagsRe);\n                            cellHTML = cell.innerHTML.replace(me.tagsRe, me.tagsProtect);\n\n                            // populate indexes array, set currentIndex, and replace wrap matched string in a span\n                            cellHTML = cellHTML.replace(me.searchRegExp, function(m) {\n                                ++count;\n                                if (!seen) {\n                                    me.matches.push({\n                                        record: record,\n                                        column: column\n                                    });\n                                    seen = true;\n                                }\n                                return '<span class=\"' + me.matchCls + '\">' + m + '</span>';\n                            }, me);\n                            // restore protected tags\n                            Ext.each(matches, function(match) {\n                                cellHTML = cellHTML.replace(me.tagsProtect, match);\n                            });\n                            // update cell html\n                            cell.innerHTML = cellHTML;\n                        }\n                    });\n                }\n             }, me);\n\n             // results found\n             if (count) {\n                me.currentIndex = 0;\n                me.gotoCurrent();\n             }\n         }\n\n         // no results found\n         if (me.currentIndex === null) {\n             me.getSelectionModel().deselectAll();\n         }\n         field.focus();\n     },\n\n    privates: {\n        gotoCurrent: function() {\n            var pos = this.matches[this.currentIndex];\n            this.getNavigationModel().setPosition(pos.record, pos.column);\n            this.getSelectionModel().select(pos.record);\n        }\n    }\n});\n","Ext.define('Voyant.widget.ProgressMonitor', {\n\textend: \"Ext.Base\",\n\tmixins: ['Voyant.util.Localization'],\n\tmsgbox: undefined,\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t\tprogress: undefined,\n\t\tscope: undefined,\n\t\tsuccess: undefined,\n\t\tfailure: undefined,\n\t\targs: undefined,\n\t\ttool: undefined, // TODO unused?\n\t\tdelay: 1000,\n\t\tmaxMillisSinceStart: undefined\n\t},\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.util.Localization'].constructor.apply(this, arguments);\n\t\tif (!config || !config.progress || !config.progress.id) {\n\t\t\treturn Voyant.application.showError(this.localize(\"noProgress\"))\n\t\t}\n\t\tthis.initConfig(config);\n\t\tthis.callParent(arguments);\n\t\tthis.update();\n\t},\n\n\tupdate: function() {\n\t\tvar progress = this.getProgress()\n\t\tvar scope = this.getScope();\n\t\t\n\t\tvar msg = scope.localize ? scope.localize(progress.code) : this.localize(progress.code);\n\t\tif (msg==\"[\"+progress.code+\"]\") {msg=progress.message}\n\t\tmsg+=\" (\"+(parseInt(progress.completion*100))+\"%)\";\n\t\t\n\t\tvar text = this.localize(progress.status.toLowerCase());\n\t\tif (!this.msgbox || this.msgbox.msg.html!=msg || !this.msgbox.progressBar || this.msgbox.progressBar.getText()!=text) {\n\t\t\tthis.msgbox = Ext.Msg.wait(msg, this.localize(\"progress\"), {\n\t\t\t\ttext: text\n\t\t\t});\n\t\t}\n\n\t\tif (progress.status==\"LAUNCH\" || progress.status==\"RUNNING\") {\n\t\t\tvar me = this;\n\t\t\tExt.defer(function() {\n\t\t\t\tExt.Ajax.request({\n\t\t\t\t     url: Voyant.application.getTromboneUrl(),\n\t\t\t\t     params: {\n\t\t\t\t    \t \ttool: \"progress.ProgressMonitor\",\n\t\t\t\t    \t \tid: progress.id,\n\t\t\t\t    \t \tmaxMillisSinceStart: me.getMaxMillisSinceStart()\n\t\t\t\t     }\n\t\t\t\t }).then(function(response, opt) {\n\t\t\t\t\t var data = Ext.decode(response.responseText);\n\t\t\t\t\t if (data && data.progress.progress) {\n\t\t\t\t\t\t me.setProgress(data.progress.progress);\n\t\t\t\t\t\t me.update();\n\t\t\t\t\t } else {\n\t\t\t\t\t\t me.finish(false, me.localize(\"badProgress\"))\n\t\t\t\t\t }\n\t\t\t\t }, function(response, opt) {\n\t\t\t\t\t me.finish(false, response);\n\t\t\t\t });\n\t\t\t}, this.getDelay(), this)\n\t\t} else {\n\t\t\tthis.finish(progress.status==\"FINISHED\", msg);\n\t\t}\n\t\tif (this.getDelay()<5000) {this.setDelay(this.getDelay()+500)} // longer delay, up to 5 secs\n\t},\n\t\n\tfinish: function(success, response) {\n\t\tvar callback = success ? this.getSuccess() : this.getFailure();\n\t\tvar args = this.getArgs(), progress = this.getProgress(), scope = this.getScope();\n\t\t\n\t\tthis.close();\n\t\t\n\t\tif (callback && callback.apply) {\n\t\t\tcallback.apply(scope, [success ? args : response || progress]);\n\t\t} else {\n\t\t\tVoyant.application.showError(response);\n\t\t}\n\t},\n\t\n\tclose: function() {\n\t\tif (this.msgbox) {\n\t\t\tthis.msgbox.close();\n\t\t}\n\t\tthis.destroy();\n\t}\n\n});\n","Ext.define('Voyant.widget.VoyantTableTransform', {\n\textend: 'Ext.panel.Panel',\n    mixins: ['Voyant.util.Localization','Voyant.util.Api'],\n\talias: 'widget.voyanttabletransform',\n    statics: {\n    \ti18n: {},\n\t\tapi: {\n\t\t\ttableHtml: undefined,\n\t\t\ttableJson: undefined,\n\t\t\twidth: undefined,\n\t\t\tapi: undefined\n\t\t}\n    },\n    html: '',\n    config: {\n    \thiddenColumns: undefined\n    },\n\tconstructor: function(config) {\n    \tconfig = config || {};\n\t\tvar me = this;\n        me.callParent(arguments);\n\t},\n\tinitComponent: function(config) {\n    \tvar me = this, config = config || {};\n    \tme.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n    \tif (this.config.api && this.config.api.tableJson) {\n    \t\tthis.setApiParam(\"tableJson\", this.config.api.tableJson);\n    \t}\n\t\tme.on('afterrender', function() {\n\t    \tme.buildFromParams();\n\t\t\tvar table = this.getTargetEl().down('table');\n\t\t\tif (table) {\n\t\t\t\tvar parent = table.parent();\n\t\t\t\tvar grid = new Ext.ux.grid.TransformGrid(table, {\n\t\t\t\t\twidth: this.getApiParam('width') || parent.getWidth(),\n\t\t\t\t\theight: this.getApiParam('height') || 20+(table.query('tr').length*24) // based on grid heights in crisp\n\t\t\t\t});\n\t\t\t\tgrid.render(parent);\n\t\t\t\tif (this.getHiddenColumns()) {\n\t\t\t\t\tvar hides = {}; // map for speed\n\t\t\t\t\tExt.Array.from(this.getHiddenColumns()).forEach(function(header) {hides[header]=true})\n\t\t\t\t\tgrid.getColumns().forEach(function(column) {\n\t\t\t\t\t\tif (column.text in hides) {column.hide()}\n\t\t\t\t\t});\n\t\t\t\t\tExt.defer(function() {\n\t\t\t\t\t\tgrid.setWidth(grid.getEl().dom.parentNode.offsetWidth); // resize\n\t\t\t\t\t},10)\n\t\t\t\t}\n\t\t\t}\n\t\t}, me);\n\t\t\n    \tme.callParent(arguments);\n\t},\n\t\n\tbuildFromParams: function() {\n\t\tvar me = this, tableHtml = this.getApiParam('tableHtml'), tableJson = this.getApiParam('tableJson');\n\t\tif (tableHtml) {\n\t\t\tthis.setHtml(tableHtml);\n\t\t} else if (tableJson) {\n\t\t\tvar html = \"<table><thead><tr>\", json = JSON.parse(tableJson);\n\t\t\t\n\t\t\tif (json.headers) {\n\t\t\t\tjson.headers.forEach(function(header) {\n\t\t\t\t\thtml+=\"<th>\"+header+\"</th>\"\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tjson.rows[0].forEach(function(cell, i) {\n\t\t\t\t\thtml+=\"<th>\"+(i+1)+\"</th>\";\n\t\t\t\t})\n\t\t\t}\n\t\t\thtml+=\"</tr></thead><tbody>\";\n\t\t\tjson.rows.forEach(function(row) {\n\t\t\t\thtml+=\"<tr>\";\n\t\t\t\trow.forEach(function(cell) {\n\t\t\t\t\thtml+=\"<td>\"+cell+\"</td>\"\n\t\t\t\t})\n\t\t\t\thtml+=\"</tr>\";\n\t\t\t})\n\t\t\thtml+=\"</tbody></table>\";\n\t\t\tthis.setHtml(html);\n\t\t\tif (json.config && json.config.hidden) {this.setHiddenColumns(json.config.hidden)}\n\t\t}\n\t\t\n\t}\n\n})\n\n\n\n/**\n * A Grid which creates itself from an existing HTML table element.\n */\nExt.define('Ext.ux.grid.TransformGrid', {\n    extend: 'Ext.grid.Panel',\n\n    /**\n     * Creates the grid from HTML table element.\n     * @param {String/HTMLElement/Ext.Element} table The table element from which this grid will be created -\n     * The table MUST have some type of size defined for the grid to fill. The container will be\n     * automatically set to position relative if it isn't already.\n     * @param {Object} [config] A config object that sets properties on this grid and has two additional (optional)\n     * properties: fields and columns which allow for customizing data fields and columns for this grid.\n     */\n    constructor: function(table, config) {\n        config = Ext.apply({}, config);\n        this.table = Ext.get(table);\n\n        var configFields = config.fields || [],\n            configColumns = config.columns || [],\n            fields = [],\n            cols = [],\n            headers = table.query(\"thead th\"),\n            i = 0,\n            len = headers.length,\n            data = table.dom,\n            width,\n            height,\n            store,\n            col,\n            text,\n            name;\n\n        for (; i < len; ++i) {\n            col = headers[i];\n\n            text = col.innerHTML;\n            name = 'tcol-' + i;\n\n            fields.push(Ext.applyIf(configFields[i] || {}, {\n                name: name,\n                mapping: 'td:nth(' + (i + 1) + ')/@innerHTML'\n            }));\n\n            cols.push(Ext.applyIf(configColumns[i] || {}, {\n                text: text,\n                dataIndex: name,\n                //width: col.offsetWidth,\n                flex: 1,\n                tooltip: col.title,\n                sortable: true\n            }));\n        }\n\n        if (config.width) {\n            width = config.width;\n        } else {\n            width = table.getWidth() + 1;\n        }\n\n        if (config.height) {\n            height = config.height;\n        }\n\n        Ext.applyIf(config, {\n            store: {\n                data: data,\n                fields: fields,\n                proxy: {\n                    type: 'memory',\n                    reader: {\n                        record: 'tbody tr',\n                        type: 'xml'\n                    }\n                }\n            },\n            columns: cols,\n            width: width,\n            height: height\n        });\n        this.callParent([config]);\n        \n        if (config.remove !== false) {\n            // Don't use table.remove() as that destroys the row/cell data in the table in\n            // IE6-7 so it cannot be read by the data reader.\n            data.parentNode.removeChild(data);\n        }\n    },\n\n    doDestroy: function() {\n        this.table.remove();\n        this.tabl = null;\n        this.callParent();\n    }\n});\n","Ext.namespace('Voyant.categories');\n\nExt.define('Voyant.categories.CategoriesOption', {\n\textend: 'Ext.container.Container',\n\tmixins: ['Voyant.util.Localization'],\n\talias: 'widget.categoriesoption',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tinitComponent: function() {\n\t\tvar value = this.up('window').panel.getApiParam('categories');\n    \tvar data = value ? [{name: value, value: value}] : [];\n\t\tif (value !== 'auto') {\n\t\t\tdata.push({name: 'auto', value: 'auto'});\n\t\t}\n\t\tdata.push({name: 'Harvard: Adjectives', value: 'categories.h_adjective'});\n\t\tdata.push({name: 'Harvard: Cognitive Orientation', value: 'categories.h_cognitive'});\n\t\tdata.push({name: 'Harvard: Communication', value: 'categories.h_communication'});\n\t\tdata.push({name: 'Harvard: Institutions', value: 'categories.h_institution'});\n\t\tdata.push({name: 'Harvard: Motivation', value: 'categories.h_motivation'});\n\t\tdata.push({name: 'Harvard: Objects', value: 'categories.h_object'});\n\t\tdata.push({name: 'Harvard: Over/Understatement', value: 'categories.h_overunderstate'});\n\t\tdata.push({name: 'Harvard: Places', value: 'categories.h_place'});\n\t\tdata.push({name: 'Harvard: Pleasure & Pain', value: 'categories.h_pleasurepain'});\n\t\tdata.push({name: 'Harvard: Positive & Negative', value: 'categories.h_posneg'});\n\t\tdata.push({name: 'Harvard: Processes', value: 'categories.h_process'});\n\t\tdata.push({name: 'Harvard: Pronouns', value: 'categories.h_pronoun'});\n\t\tdata.push({name: 'Harvard: Roles', value: 'categories.h_role'});\n\t\tdata.push({name: 'Harvard: Social', value: 'categories.h_social'});\n\t\tdata.push({name: 'Harvard: Verbs', value: 'categories.h_verb'});\n\t\tdata.push({name: 'Harvard: Yes & No', value: 'categories.h_yesno'});\n\t\t\n\t\tExt.apply(this, {\n    \t\tlayout: 'hbox',\n    \t\titems: [{\n    \t\t\txtype: 'combo',\n    \t\t\tqueryMode: 'local',\n    \t\t\ttriggerAction: 'all',\n    \t\t\tfieldLabel: this.localize('categories'),\n    \t\t\tlabelAlign: 'right',\n    \t\t\tdisplayField: 'name',\n    \t\t\tvalueField: 'value',\n    \t\t\tstore: {\n    \t\t\t\tfields: ['name', 'value'],\n    \t\t\t\tdata: data\n    \t\t\t},\n    \t\t\tname: 'categories',\n    \t\t\tvalue: value\n    \t\t}, {width: 10}, {xtype: 'tbspacer'}, {\n    \t\t\txtype: 'button',\n    \t\t\ttext: this.localize('edit'),\n    \t\t\tui: 'default-toolbar',\n    \t\t\thandler: function() {\n    \t\t\t\tif (Voyant.categories.Builder === undefined) {\n\t\t\t\t\t\tVoyant.categories.Builder = Ext.create('Voyant.categories.CategoriesBuilder', {\n\t\t\t\t\t\t\tpanel: this.up('window').panel\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tVoyant.categories.Builder.on('close', function(win) {\n\t\t\t\t\t\tvar id = win.getCategoriesId();\n\t\t\t\t\t\tif (id !== undefined) {\n\t\t\t\t\t\t\tvar combo = this.down('combo');\n\t\t\t\t\t\t\tvar name = id;\n\t\t\t\t\t\t\tcombo.getStore().add({name: name, value: id});\n\t\t\t\t\t\t\tcombo.setValue(id);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.up('window').panel.setApiParam('categories', id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this, { single: true });\n    \t\t\t\t\n    \t\t\t\tvar categoriesId = this.down('combo').getValue();\n    \t\t\t\tVoyant.categories.Builder.setCategoriesId(categoriesId);\n\t\t\t\t\tVoyant.categories.Builder.show();\n    \t\t\t},\n    \t\t\tscope: this\n    \t\t}]\n    \t});\n\t\t\n\t\tthis.callParent(arguments);\n\t}\n});\n\nExt.define('Voyant.categories.CategoriesBuilder', {\n    extend: 'Ext.window.Window',\n    requires: ['Voyant.widget.FontFamilyOption'],\n    mixins: ['Voyant.util.Localization','Voyant.util.Api'],\n    alias: 'widget.categoriesbuilder',\n    statics: {\n    \ti18n: {\n    \t\ttitle: 'Categories Builder',\n    \t\tterms: 'Terms',\n    \t\tterm: 'Term',\n    \t\trawFreq: 'Count',\n    \t\trelativeFreq: 'Relative',\n    \t\tcategories: 'Categories',\n    \t\taddCategory: 'Add Category',\n    \t\tremoveCategory: 'Remove Category',\n    \t\tremoveTerms: 'Remove Selected Terms',\n    \t\tcategoryName: 'Category Name',\n    \t\tadd: 'Add',\n    \t\tcancel: 'Cancel',\n    \t\texists: 'Category already exists',\n    \t\tconfirmRemove: 'Are you sure you want to remove the category?',\n    \t\tsave: 'Save',\n    \t\tfeatures: 'Features',\n\t\t\tcategory: 'Category',\n\t\t\tincreaseCategory: 'Increase Category Priority',\n\t\t\tdecreaseCategory: 'Decrease Category Priority',\n\t\t\tsetColorsFromPalette: 'Set Colors From Palette',\n\t\t\tloadingCategories: 'Loading Categories',\n\t\t\terrorLoadingCategories: 'Error loading Categories',\n    \t\t\n    \t\tcolor: 'Color',\n    \t\tfont: 'Font',\n    \t\torientation: 'Orientation'\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\tquery: undefined\n    \t},\n    \tfeatures: {\n        \tcolor: {\n        \t\txtype: 'colorfield',\n        \t\tformat: '#hex6'\n//        \t\t,listeners: {\n//        \t\t\trender: function(field) {\n//        \t\t\t\tfield.on('change', function(field, color) {\n//        \t\t\t\t\tfield.inputEl.setStyle('background-color', color);\n//        \t\t\t\t});\n//        \t\t\t}\n//        \t\t}\n        \t},\n        \tfont: {\n        \t\txtype: 'combobox',\n        \t\tqueryMode: 'local',\n        \t\tdisplayField: 'name',\n        \t\tvalueField: 'value',\n        \t\tstore: {\n        \t\t\tfields: ['name', 'value'],\n        \t\t\tdata: Voyant.widget.FontFamilyOption.fonts\n        \t\t}\n        \t},\n        \torientation: {\n        \t\txtype: 'combobox',\n        \t\tqueryMode: 'local',\n        \t\tdisplayField: 'name',\n        \t\tvalueField: 'value',\n        \t\tstore: {\n        \t\t\tfields: ['name', 'value'],\n        \t\t\tdata: [{name: 'Horizontal', value: 0}, {name: 'Vertical', value: 90}]\n        \t\t}\n        \t}\n        }\n    },\n    config: {\n    \tcorpus: undefined,\n    \tbuilderWin: undefined,\n    \taddCategoryWin: undefined,\n    \tcategoriesId: undefined\n    },\n    \n    // window defaults\n    closeAction: 'hide',\n    modal: true,\n\theight: 250,\n\twidth: 500,\n\n    constructor: function(config) {\n    \tconfig = config || {};\n\n    \tif (config.panel) {\n    \t\tthis.panel = config.panel;\n\t\t\tthis.app = this.panel.getApplication();\n\t\t\tthis.categoriesManager = this.app.getCategoriesManager();\n\t\t} else {\n\t\t\tconsole.warn('CategoriesBuilder cannot find panel!');\n\t\t}\n\n\t\tconfig.height = this.app.getViewport().getHeight()*0.75;\n\t\tconfig.width = this.app.getViewport().getWidth()*0.75;\n    \t\n    \tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n    \tthis.callParent(arguments);\n    },\n    \n    initComponent: function() {\n    \tExt.apply(this, {\n    \t\theader: false,\n    \t\tlayout: 'fit',\n    \t\tonEsc: Ext.emptyFn,\n    \t\titems: {\n\t    \t\txtype: 'tabpanel',\n\t    \t\ttitle: this.localize('title'),\n\t    \t\ttabBarHeaderPosition: 1,\n\t    \t\titems: [{\n\t\t    \t\tlayout: 'border',\n\t\t    \t\ttitle: this.localize('categories'),\n\t\t    \t\titems: [{\n\t\t    \t\t\ttitle: this.localize('terms'),\n\t\t    \t\t\tsplit: true,\n\t\t    \t\t\twidth: 250,\n\t\t    \t\t\tregion: 'west',\n\t\t    \t\t\tlayout: 'fit',\n\t\t    \t\t\titems: {\n\t\t    \t\t\t\titemId: 'terms',\n\t\t    \t\t\t\txtype: 'grid',\n\t\t    \t\t\t\tstore: Ext.create('Voyant.data.store.CorpusTermsBuffered', {\n\t\t    \t\t        \tparentPanel: this\n\t\t    \t\t        }),\n\t\t    \t\t\t\tviewConfig: {\n\t\t    \t\t\t\t\tplugins: {\n\t\t    \t\t\t\t\t\tptype: 'gridviewdragdrop',\n\t\t    \t\t\t\t\t\tddGroup: 'terms',\n\t\t    \t\t\t\t\t\tcopy: true,\n\t\t    \t\t\t\t\t\tenableDrop: false, // can't drop on grid with buffered store\n\t\t    \t\t\t\t\t\tdragZone: {\n\t\t    \t\t\t\t\t\t\tgetDragText: function() {\n\t\t    \t\t\t\t\t\t\t\tvar text = '';\n\t\t    \t\t\t\t\t\t\t\tthis.dragData.records.forEach(function(d) {\n\t\t    \t\t\t\t\t\t\t\t\ttext += d.get('term')+', ';\n\t\t    \t\t\t\t\t\t\t\t});\n\t\t    \t\t\t\t\t\t\t\ttext = text.substr(0, text.length-2);\n\t\t    \t\t\t\t\t\t\t\tif (text.length > 20) {\n\t\t    \t\t\t\t\t\t\t\t\ttext = text.substr(0, 20) + '...';\n\t\t    \t\t\t\t\t\t\t\t}\n\t\t    \t\t\t\t\t\t\t\treturn text;\n\t\t    \t\t\t\t\t\t\t}\n\t\t    \t\t\t\t\t\t}\n\t\t    \t\t\t\t\t}\n\t\t    \t\t\t\t},\n\t\t    \t\t\t\tselModel: {\n\t\t    \t    \t\t\tmode: 'MULTI'\n\t\t    \t    \t\t},\n\t\t    \t\t\t\tcolumns: [{\n\t\t\t\t    \t\t\ttext: this.localize('term'),\n\t\t\t\t        \t\tdataIndex: 'term',\n\t\t\t\t        \t\tflex: 1,\n\t\t\t\t                sortable: true\n\t\t\t\t            },{\n\t\t\t\t            \ttext: this.localize('rawFreq'),\n\t\t\t\t            \tdataIndex: 'rawFreq',\n\t\t\t\t                width: 'autoSize',\n\t\t\t\t            \tsortable: true\n\t\t\t\t            },{\n\t\t\t\t            \ttext: this.localize('relativeFreq'),\n\t\t\t\t            \tdataIndex: 'relativeFreq',\n\t\t\t\t            \trenderer: function(val) {\n\t\t\t\t            \t\treturn Ext.util.Format.number(val*1000000, \"0,000\");\n\t\t\t\t            \t},\n\t\t\t\t                width: 'autoSize',\n\t\t\t\t                hidden: true,\n\t\t\t\t            \tsortable: true\n\t\t\t\t            }],\n\t\t\t\t            dockedItems: [{\n\t\t\t\t                dock: 'bottom',\n\t\t\t\t                xtype: 'toolbar',\n\t\t\t\t                overflowHandler: 'scroller',\n\t\t\t\t                items: [{\n\t\t\t\t                    xtype: 'querysearchfield'\n\t\t\t\t                }]\n\t\t\t\t            }],\n\t\t\t\t            listeners: {\n\t\t\t\t            \tquery: function(src, query) {\n\t\t\t\t            \t\tthis.setApiParam('query', query);\n\t\t\t\t            \t\tvar store = this.queryById('terms').getStore();\n\t\t\t\t            \t\tstore.removeAll();\n\t\t\t\t            \t\tstore.load();\n\t\t\t\t            \t},\n\t\t\t\t            \tscope: this\n\t\t\t\t            }\n\t\t    \t\t\t}\n\t\t    \t\t},{\n\t\t    \t\t\ttitle: this.localize('categories'),\n\t\t    \t\t\titemId: 'categories',\n\t\t    \t\t\tregion: 'center',\n\t\t    \t\t\txtype: 'panel',\n\t\t    \t\t\tlayout: {\n\t\t    \t\t\t\ttype: 'hbox',\n\t\t    \t\t\t\talign: 'stretch'\n\t\t    \t\t\t},\n\t\t    \t\t\tscrollable: 'x',\n\t\t    \t\t\tdockedItems: [{\n\t\t                    dock: 'bottom',\n\t\t                    xtype: 'toolbar',\n\t\t                    overflowHandler: 'scroller',\n\t\t                    items: [{\n\t\t\t\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\t\t\t\titemId: 'categoryFilter',\n\t\t\t\t\t\t\t\tfieldLabel: 'Category Filter',\n\t\t\t\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\t\t\t\tenableKeyEvents: true,\n\t\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\t\tkeyup: function(cmp, e) {\n\t\t\t\t\t\t\t\t\t\tvar query = cmp.getValue().trim();\n\t\t\t\t\t\t\t\t\t\tthis.queryById('categories').query('grid').forEach(function(grid) {\n\t\t\t\t\t\t\t\t\t\t\tif (query === '') {\n\t\t\t\t\t\t\t\t\t\t\t\tgrid.getStore().clearFilter();\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tgrid.getStore().filter('term', query);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}, this);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},'-',{\n\t\t                    \ttext: this.localize('addCategory'),\n\t\t                    \thandler: function() {\n\t\t                    \t\tthis.getAddCategoryWin().show();\n\t\t                    \t},\n\t\t                    \tscope: this\n\t\t                    },{\n\t\t                    \ttext: this.localize('removeTerms'),\n\t\t                    \thandler: function() {\n\t\t                    \t\tthis.queryById('categories').query('grid').forEach(function(grid) {\n\t\t\t\t\t\t\t\t\t\tvar sels = grid.getSelection();\n\t\t\t\t\t\t\t\t\t\tsels.forEach(function(sel) {\n\t\t\t\t\t\t\t\t\t\t\tthis.categoriesManager.removeTerm(grid.category, sel.get('term'));\n\t\t\t\t\t\t\t\t\t\t}, this);\n\t\t                    \t\t\tgrid.getStore().remove(sels);\n\t\t                    \t\t}, this);\n\t\t                    \t},\n\t\t                    \tscope: this\n\t\t                    }]\n\t\t    \t\t\t}],\n\t\t    \t\t\titems: []\n\t\t    \t\t}]\n\t    \t\t},{\n\t    \t\t\tlayout: 'fit',\n\t    \t\t\titemId: 'features',\n\t    \t\t\ttitle: this.localize('features'),\n\t    \t\t\txtype: 'grid',\n\t    \t\t\tscrollable: 'y',\n\t    \t\t\tstore: Ext.create('Ext.data.JsonStore', {\n\t\t    \t\t\tfields: ['category']\n\t\t    \t\t}),\n\t    \t\t\tcolumns: [{\n\t    \t\t\t\ttext: this.localize('category'),\n\t    \t\t\t\tdataIndex: 'category',\n\t    \t\t\t\tsortable: false,\n\t    \t\t\t\thideable: false,\n\t    \t\t\t\tflex: 1\n\t    \t\t\t}],\n\t\t\t\t\tbbar: [{\n\t\t\t\t\t\txtype: 'colorpaletteoption'\n\t\t\t\t\t},' ',{\n\t\t\t\t\t\ttext: this.localize('setColorsFromPalette'),\n\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\tvar palName = btn.up().down('colorpaletteoption').down('combo').getValue();\n\t\t\t\t\t\t\tvar palColors = this.app.getColorPalette(palName, true);\n\t\t\t\t\t\t\tif (palColors.length > 0) {\n\t\t\t\t\t\t\t\tObject.keys(this.categoriesManager.getCategories()).forEach(function(categoryName, index) {\n\t\t\t\t\t\t\t\t\tvar color = palColors[index % (palColors.length)];\n\t\t\t\t\t\t\t\t\tthis.categoriesManager.setCategoryFeature(categoryName, 'color', color);\n\t\t\t\t\t\t\t\t}, this);\n\t\t\t\t\t\t\t\tthis.buildFeatures();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}]\n\t    \t\t}]\n    \t\t},\n    \t\tbuttons: [{\n\t\t\t\ttext: this.localize('cancel'),\n\t\t\t\tui: 'default-toolbar',\n\t\t\t\thandler: function(btn) {\n\t\t\t\t\tthis.setCategoriesId(undefined);\n\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: this.localize('save'),\n\t\t\t\thandler: function(btn) {\n\t\t\t\t\tthis.processFeatures();\n\t\t\t\t\tthis.setColorTermsFromCategoryFeatures();\n\t\t\t\t\tthis.app.saveCategoryData().then(function(id) {\n\t\t\t\t\t\tthis.setCategoriesId(id);\n\t\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t\t}.bind(this), function() {\n\t\t\t\t\t\tthis.setCategoriesId(undefined);\n\t\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t\t}.bind(this));\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tshow: function() {\n\t\t\t\t\tthis.down('tabpanel').setActiveTab(0);\n\t\t\t\t\tthis.queryById('categoryFilter').setValue('');\n\t\t\t\t\t// check to see if the widget value is different from the API\n\t\t\t\t\tif (this.getCategoriesId() !== this.panel.getApiParam('categories')) {\n\t\t\t\t\t\tthis.queryById('categories').mask(this.localize('loadingCategories'));\n\t\t    \t\t\tthis.app.loadCategoryData(this.getCategoriesId()).then(function(data) {\n\t\t\t\t\t\t\tthis.queryById('categories').unmask();\n\t\t\t\t\t\t\tthis.setColorTermsFromCategoryFeatures();\n\t\t\t\t\t\t\tthis.buildCategories();\n\t\t\t\t\t\t\tthis.buildFeatures();\n\t\t\t\t\t\t}.bind(this), function(error) {\n\t\t\t\t\t\t\tthis.queryById('categories').unmask();\n\t\t\t\t\t\t\tthis.panel.showError(this.localize('errorLoadingCategories'));\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.buildCategories();\n\t\t\t\t\t\tthis.buildFeatures();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tafterrender: function(builder) {\n\t\t\t\t\tbuilder.on('loadedCorpus', function(src, corpus) {\n\t\t    \t\t\tthis.setCorpus(corpus);\n\t\t\t    \t\tvar terms = this.queryById('terms');\n\t\t\t    \t\tterms.getStore().load();\n\t\t    \t\t}, builder);\n\t\t    \t\t\n\t\t\t\t\tthis.panel.on('loadedCorpus', function(src, corpus) {\n\t    \t\t\t\tbuilder.fireEvent('loadedCorpus', src, corpus);\n\t    \t\t\t}, builder);\n\t    \t\t\tif (this.panel.getCorpus && this.panel.getCorpus()) {builder.fireEvent('loadedCorpus', builder, this.panel.getCorpus());}\n\t    \t\t\telse if (this.panel.getStore && this.panel.getStore() && this.panel.getStore().getCorpus && this.panel.getStore().getCorpus()) {\n\t    \t\t\t\tbuilder.fireEvent('loadedCorpus', builder, this.panel.getStore().getCorpus());\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n    \t});\n    \t\n    \tthis.setAddCategoryWin(Ext.create('Ext.window.Window', {\n    \t\ttitle: this.localize('addCategory'),\n    \t\tmodal: true,\n    \t\tcloseAction: 'hide',\n    \t\tlayout: 'fit',\n    \t\titems: {\n    \t\t\txtype: 'form',\n    \t\t\twidth: 300,\n\t\t\t\tbodyPadding: '10 5 5',\n    \t\t\tdefaults: {\n    \t\t\t\tlabelAlign: 'right'\n    \t\t\t},\n\t    \t\titems: [{\n\t    \t\t\txtype: 'textfield',\n\t    \t\t\tfieldLabel: this.localize('categoryName'),\n\t    \t\t\tname: 'categoryName',\n\t    \t\t\tallowBlank: false,\n\t    \t\t\tvalidator: function(val) {\n\t    \t\t\t\treturn this.categoriesManager.getCategoryTerms(val) === undefined ? true : this.localize('exists');\n\t    \t\t\t}.bind(this),\n\t    \t\t\tenableKeyEvents: true,\n\t    \t\t\tlisteners: {\n\t    \t\t\t\tkeypress: function(field, evt) {\n\t    \t\t\t\t\tif (evt.getKey() === Ext.event.Event.ENTER) {\n\t    \t\t\t\t\t\tfield.up('form').queryById('addCategoryButton').click();\n\t    \t\t\t\t\t}\n\t    \t\t\t\t},\n\t    \t\t\t\tscope: this\n\t    \t\t\t}\n\t    \t\t}],\n\t    \t\tbuttons: [{\n\t    \t\t\ttext: this.localize('cancel'),\n\t    \t\t\thandler: function(btn) {\n\t    \t\t\t\tbtn.up('window').close();\n\t    \t\t\t}\n\t    \t\t},{\n\t    \t\t\titemId: 'addCategoryButton',\n\t    \t\t\ttext: this.localize('add'),\n\t    \t\t\thandler: function(btn) {\n\t    \t\t\t\tvar form = btn.up('form');\n\t    \t\t\t\tif (form.isValid()) {\n\t    \t\t\t\t\tvar name = form.getValues()['categoryName'];\n\t    \t\t\t\t\tthis.addCategory(name);\n\t    \t\t\t\t\tbtn.up('window').close();\n\t    \t\t\t\t}\n\t    \t\t\t},\n\t    \t\t\tscope: this\n\t    \t\t}]\n    \t\t},\n    \t\tlisteners: {\n    \t\t\tshow: function(win) {\n    \t\t\t\tvar form = win.down('form').getForm();\n    \t\t\t\tform.reset();\n\t\t\t\t\tform.clearInvalid();\n    \t\t\t}\n    \t\t}\n\t\t}));\n    \t\n    \tthis.callParent(arguments);\n    },\n    \n    addCategory: function(name) {\n    \tthis.categoriesManager.addCategory(name);\n    \t\n    \tthis.queryById('features').getStore().add({category: name});\n\n    \tvar termsData = [];\n    \tvar terms = this.categoriesManager.getCategoryTerms(name);\n    \tif (terms !== undefined) {\n    \t\tfor (var i = 0; i < terms.length; i++) {\n    \t\t\ttermsData.push({term: terms[i]});\n    \t\t}\n    \t}\n    \t\n    \tvar grid = this.queryById('categories').add({\n    \t\txtype: 'grid',\n    \t\tcategory: name,\n    \t\ttitle: name,\n    \t\tframe: true,\n    \t\twidth: 150,\n    \t\tmargin: '10 0 10 10',\n    \t\tlayout: 'fit',\n    \t\ttools: [{\n    \t\t\ttype: 'close',\n    \t\t\ttooltip: this.localize('removeCategory'),\n    \t\t\tcallback: function(panel) {\n    \t\t\t\tExt.Msg.confirm(this.localize('removeCategory'), this.localize('confirmRemove'), function(btn) {\n    \t\t\t\t\tif (btn === 'yes') {\n    \t\t\t\t\t\tthis.removeCategory(name);\n    \t\t\t\t\t}\n    \t\t\t\t}, this);\n    \t\t\t},\n    \t\t\tscope: this\n\t\t\t}],\n\t\t\tbbar: [{\n\t\t\t\txtype: 'button',\n\t\t\t\ttext: '',\n\t\t\t\ttooltip: this.localize('increaseCategory'),\n\t\t\t\tglyph: 'xf067@FontAwesome',\n\t\t\t\thandler: function(b) {\n\t\t\t\t\tvar grid = b.findParentByType('grid');\n\t\t\t\t\tvar parent = this.queryById('categories');\n\t\t\t\t\tvar prev = parent.prevChild(grid);\n\t\t\t\t\tif (prev !== null) {\n\t\t\t\t\t\tparent.moveBefore(grid, prev);\n\t\t\t\t\t\tthis.app.getCategoriesManager().setCategoryRanking(grid.getTitle(), parent.items.indexOf(grid));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},'->',{\n\t\t\t\txtype: 'button',\n\t\t\t\ttext: '',\n\t\t\t\ttooltip: this.localize('decreaseCategory'),\n\t\t\t\tglyph: 'xf068@FontAwesome',\n\t\t\t\thandler: function(b) {\n\t\t\t\t\tvar grid = b.findParentByType('grid');\n\t\t\t\t\tvar parent = this.queryById('categories');\n\t\t\t\t\tvar next = parent.nextChild(grid);\n\t\t\t\t\tif (next !== null) {\n\t\t\t\t\t\tparent.moveAfter(grid, next);\n\t\t\t\t\t\tthis.app.getCategoriesManager().setCategoryRanking(grid.getTitle(), parent.items.indexOf(grid));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}],\n    \t\t\n    \t\tstore: Ext.create('Ext.data.JsonStore', {\n    \t\t\tdata: termsData,\n    \t\t\tfields: ['term']\n    \t\t}),\n    \t\tviewConfig: {\n\t    \t\tplugins: {\n\t    \t\t\tptype: 'gridviewdragdrop',\n\t\t\t\t\tddGroup: 'terms',\n\t\t\t\t\tdragZone: {\n\t\t\t\t\t\tgetDragText: function() {\n\t\t\t\t\t\t\tvar text = '';\n\t\t\t\t\t\t\tthis.dragData.records.forEach(function(d) {\n\t\t\t\t\t\t\t\ttext += d.get('term')+', ';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn text.substr(0, text.length-2);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t    \t\t}\n    \t\t},\n    \t\tselModel: {\n    \t\t\tmode: 'MULTI'\n    \t\t},\n    \t\tcolumns: [{\n        \t\tdataIndex: 'term',\n        \t\tflex: 1,\n                sortable: true\n            }],\n    \t\tlisteners: {\n    \t\t\tbeforedrop: function(node, data) {\n\t\t\t\t\tvar categoriesManager = this.up('categoriesbuilder').categoriesManager;\n\t\t\t\t\tvar source = data.view.up('grid');\n\n\t\t\t\t\tif (source.category !== undefined) {\n\t\t\t\t\t\t// we're moving a term from one category to another\n\t\t\t\t\t\tfor (var i = data.records.length-1; i >= 0; i--) {\n\t\t\t\t\t\t\tvar term = data.records[i].get('term');\n\t\t\t\t\t\t\tcategoriesManager.removeTerm(source.category, term);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n    \t\t\t},\n    \t\t\tdrop: function(node, data) {\n    \t\t\t\tdata.view.getSelectionModel().deselectAll();\n    \t\t\t\tthis.getSelectionModel().deselectAll();\n    \t\t\t\t\n    \t\t\t\tvar categoriesManager = this.up('categoriesbuilder').categoriesManager;\n    \t\t\t\tvar terms = [];\n    \t\t\t\tfor (var i = 0; i < data.records.length; i++) {\n    \t\t\t\t\tvar term = data.records[i].get('term');\n    \t\t\t\t\tterms.push(term);\n    \t\t\t\t}\n    \t\t\t\tcategoriesManager.addTerms(name, terms);\n    \t\t\t}\n    \t\t}\n    \t});\n    \t\n    \tvar titleEditor = new Ext.Editor({\n    \t\tupdateEl: true,\n    \t\talignment: 'l-l',\n    \t\tautoSize: {\n    \t\t\twidth: 'boundEl'\n    \t\t},\n    \t\tfield: {\n    \t\t\txtype: 'textfield',\n    \t\t\tallowBlank: false,\n    \t\t\tvalidator: function(val) {\n    \t\t\t\treturn this.categoriesManager.getCategoryTerms(val) === undefined || val ===  grid.getTitle() ? true : this.localize('exists');\n    \t\t\t}.bind(this)\n    \t\t},\n    \t\tlisteners: {\n    \t\t\tcomplete: function(ed, newvalue, oldvalue) {\n    \t\t\t\tthis.categoriesManager.renameCategory(oldvalue, newvalue);\n    \t\t\t\tthis.buildFeatures();\n    \t\t\t},\n    \t\t\tscope: this\n    \t\t}\n    \t});\n    \t\n    \tgrid.header.getTitle().textEl.on('dblclick', function(e, t) {\n    \t\ttitleEditor.startEdit(t);\n\t\t});\n    },\n    \n    removeCategory: function(name) {\n    \tvar categoriesParent = this.queryById('categories');\n    \tvar panel = categoriesParent.queryBy(function(cmp) {\n    \t\tif (cmp.category && cmp.category == name) {\n    \t\t\treturn true;\n    \t\t}\n    \t\treturn false;\n    \t});\n    \tcategoriesParent.remove(panel[0]);\n    \t\n    \tvar featuresStore = this.queryById('features').getStore();\n    \tfeaturesStore.removeAt(featuresStore.findExact('category', name));\n    \t\n\t\tthis.categoriesManager.removeCategory(name);\n    },\n    \n    addFeature: function(name) {\n\t\tthis.categoriesManager.addFeature(name);\n\t\tthis.buildFeatures();\n    },\n    \n    buildFeatures: function() {\n    \tthis.queryById('features').getStore().removeAll();\n    \t\n    \tvar fields = ['category'];\n\t\tvar columns = [{\n\t\t\tsortable: false,\n\t\t\ttext: this.localize('category'),\n\t\t\tdataIndex: 'category',\n\t\t\tflex: 1\n\t\t}];\n\t\tvar data = [];\n\t\t\n\t\tfor (var category in this.categoriesManager.getCategories()) {\n\t\t\tdata.push({category: category});\n\t\t}\n\t\t\n\t\tvar features = this.categoriesManager.getFeatures();\n\t\tvar featuresConfigs = Ext.ClassManager.getClass(this).features;\n\t\t\n\t\t// populate with default features if there are none (can happen when creating categories programmatically)\n\t\tif (Object.entries(features).length === 0) {\n\t\t\tfor (var feature in featuresConfigs) {\n\t\t\t\tfeatures[feature] = {};\n\t\t\t\tfor (var category in this.categoriesManager.getCategories()) {\n\t\t\t\t\tfeatures[feature][category] = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (var feature in features) {\n\t\t\tfields.push(feature);\n\t\t\t\n\t\t\tvar featureConfig = featuresConfigs[feature];\n\t\t\tvar widgetConfig = Ext.applyIf({\n\t\t\t\tfeature: feature,\n\t\t\t\tlisteners: {\n\t\t\t\t\tchange: function(cmp, newvalue) {\n\t\t\t\t\t\tif (cmp.rendered) {\n\t\t\t\t\t\t\tvar rowIndex = cmp.up('gridview').indexOf(cmp.el.up('table'));\n\t\t\t\t\t\t\tvar record = cmp.up('grid').getStore().getAt(rowIndex);\n\t\t\t\t\t\t\tif (record) {\n\t\t\t\t\t\t\t\trecord.set(cmp.feature, newvalue);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (window.console) {\n\t\t\t\t\t\t\t\t\tconsole.warn('no record for', rowIndex, cmp);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t}, featureConfig);\n\t\t\tif (featureConfig.listeners) {\n\t\t\t\tExt.applyIf(widgetConfig.listeners, featureConfig.listeners);\n\t\t\t}\n\t\t\t\n\t\t\tcolumns.push({\n\t\t\t\tsortable: false,\n\t\t\t\thideable: false,\n\t\t\t\ttext: this.localize(feature),\n\t\t\t\tdataIndex: feature,\n\t\t\t\tflex: 0.5,\n\t\t\t\txtype: 'widgetcolumn',\n\t\t\t\twidget: widgetConfig\n\t\t\t});\n\t\t\t\n\t\t\tfor (var category in this.categoriesManager.getCategories()) {\n\t\t\t\tvar value = this.categoriesManager.getCategoryFeature(category, feature);\n\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\tif (data[i].category == category) {\n\t\t\t\t\t\tdata[i][feature] = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar store = Ext.create('Ext.data.JsonStore', {\n\t\t\tfields: fields,\n\t\t\tdata: data\n\t\t});\n\t\tthis.queryById('features').reconfigure(store, columns);\n    },\n\t\n\tprocessFeatures: function() {\n\t\tvar store = this.queryById('features').getStore();\n\t\tvar features = Object.keys(this.categoriesManager.getFeatures());\n\t\tstore.each(function(record) {\n\t\t\tvar category = record.get('category');\n\t\t\tfeatures.forEach(function(feature) {\n\t\t\t\tvar featureValue = record.get(feature);\n\t\t\t\tif (featureValue !== undefined) {\n\t\t\t\t\tthis.categoriesManager.setCategoryFeature(category, feature, featureValue);\n\t\t\t\t}\n\t\t\t}, this)\n\t\t}, this)\n\t},\n\n\tsetColorTermsFromCategoryFeatures: function() {\n        for (var category in this.categoriesManager.getCategories()) {\n            var color = this.categoriesManager.getCategoryFeature(category, 'color');\n            if (color !== undefined) {\n                var rgb = this.app.hexToRgb(color);\n                var terms = this.categoriesManager.getCategoryTerms(category);\n                for (var i = 0; i < terms.length; i++) {\n                    this.app.setColorForTerm(terms[i], rgb);\n                }\n            }\n        }\n    },\n\n    buildCategories: function() {\n\n    \tthis.queryById('categories').removeAll();\n    \t\n    \tvar cats = this.categoriesManager.getCategories();\n    \tfor (var key in cats) {\n    \t\tthis.addCategory(key);\n    \t}\n    }\n});\n\nExt.define('Voyant.categories.CategoriesMenu', {\n\textend: 'Ext.menu.Menu',\n\talias: 'widget.categoriesmenu',\n\n\tconfig: {\n\t\tterms: []\n\t},\n\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tif (config.panel) {\n\t\t\tthis.panel = config.panel;\n\t\t\tthis.app = this.panel.getApplication();\n\t\t\tthis.categoriesManager = this.app.getCategoriesManager();\n\t\t} else {\n\t\t\tif (window.console) {\n\t\t\t\tconsole.warn('can\\'t find panel!');\n\t\t\t}\n\t\t}\n\t\tthis.callParent(arguments);\n\t},\n\n\tsetColorTermsFromCategoryFeatures: function() {\n\t\tfor (var category in this.categoriesManager.getCategories()) {\n\t\t\tvar color = this.categoriesManager.getCategoryFeature(category, 'color');\n\t\t\tif (color !== undefined) {\n\t\t\t\tvar rgb = this.app.hexToRgb(color);\n\t\t\t\tvar terms = this.categoriesManager.getCategoryTerms(category);\n\t\t\t\tfor (var i = 0; i < terms.length; i++) {\n\t\t\t\t\tthis.app.setColorForTerm(terms[i], rgb);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tinitComponent: function() {\n\t\tExt.apply(this, {\n\t\t\titems: [{\n\t\t\t\ttext: 'Set category for selected terms',\n\t\t\t\tmenu: {\n\t\t\t\t\tminWidth: 250,\n\t\t\t\t\titemId: 'cats',\n\t\t\t\t\titems: [],\n\t\t\t\t\tminButtonWidth: 50,\n\t\t\t\t\tfbar: [{\n\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\ttext: 'Ok',\n\t\t\t\t\t\thandler: function(button) {\n\t\t\t\t\t\t\tvar terms = this.getTerms();\n\t\t\t\t\t\t\tvar addCats = [];\n\t\t\t\t\t\t\tvar remCats = [];\n\t\t\t\t\t\t\tbutton.up('menu').items.each(function(item) {\n\t\t\t\t\t\t\t\tif (item.checked) {\n\t\t\t\t\t\t\t\t\taddCats.push(item.text);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tremCats.push(item.text);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tremCats.forEach(function(cat) { this.categoriesManager.removeTerms(cat, terms); }, this);\n\t\t\t\t\t\t\taddCats.forEach(function(cat) { this.categoriesManager.addTerms(cat, terms); }, this);\n\t\t\n\t\t\t\t\t\t\tbutton.up('menu').up('menu').hide();\n\n\t\t\t\t\t\t\tthis.setColorTermsFromCategoryFeatures();\n\t\t\t\t\t\t\tthis.fireEvent('categorySet', this, addCats);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\ttext: 'Cancel',\n\t\t\t\t\t\thandler: function(button) {\n\t\t\t\t\t\t\tbutton.up('menu').up('menu').hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t},{xtype: 'tbfill'},{\n\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\tglyph: 'xf013@FontAwesome',\n\t\t\t\t\t\ttooltip: 'Show Categories Builder',\n\t\t\t\t\t\thandler: function(button) {\n\t\t\t\t\t\t\tif (Voyant.categories.Builder === undefined) {\n\t\t\t\t\t\t\t\tVoyant.categories.Builder = Ext.create('Voyant.categories.CategoriesBuilder', {\n\t\t\t\t\t\t\t\t\tpanel: this.panel\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tVoyant.categories.Builder.show();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tbeforeshow: function(menu) {\n\t\t\t\t\tvar categories = this.categoriesManager.getCategories();\n\t\t\t\t\tvar catsMenu = menu.down('#cats');\n\t\t\t\t\tcatsMenu.removeAll();\n\n\t\t\t\t\tvar terms = this.getTerms();\n\t\t\t\t\tvar term = Array.isArray(terms) ? terms[0] : terms;\n\t\t\t\t\tvar termCats = this.categoriesManager.getCategoriesForTerm(term);\n\n\t\t\t\t\tcatsMenu.add(Object.keys(categories).map(function(cat) { return {text: cat, xtype: 'menucheckitem', checked: termCats.indexOf(cat) !== -1} }));\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\n\t\tthis.callParent(arguments);\n\t}\n})","/**\n * This class is essentially a wrapper for a D3 force directed graph.\n * It provides defaults for physics and styling and simplifies loading data.\n * It fires the following events:\n * \tnodeclicked, nodedblclicked, nodecontextclicked,\n * \tedgeclicked,\n * \tnodedragstart, nodedrag, nodedragend\n */\nExt.define('Voyant.widget.VoyantNetworkGraph', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.util.Localization','Voyant.util.Api'],\n\talias: 'widget.voyantnetworkgraph',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tjsonData: undefined,\n\t\t\tdocId: undefined,\n\t\t\tdocIndex: undefined,\n\t\t\tjson: undefined,\n\t\t\tapi: undefined\n\t\t}\n\t},\n\tconfig: {\n\t\tvis: undefined, // svg > g element\n\t\tvisLayout: undefined, // d3 layout algorithm\n\t\t\n\t\t// backing data. don't set through config, use config.nodes & config.edges\n\t\tnodeData: undefined,\n\t\tedgeData: undefined,\n\t\t\n\t\tnodeSelection: undefined, // d3 selection for nodes\n\t\tedgeSelection: undefined, // d3 selection for edges\n\t\t\n\t\tcurrentNode: undefined,\n\t\tcurrentEdge: undefined,\n\t\t\n\t\tzoom: undefined, // d3 zoom\n\t\tzoomExtent: [0.25, 8],\n\t\t\n\t\tdragging: false, // is the user currently dragging a node\n\t\t\n\t\tnodeScaling: {\n\t\t\tminSize: 8,\n\t\t\tmaxSize: 36,\n\t\t\tscalingFunction: undefined\n\t\t},\n\t\tedgeScaling: {\n\t\t\tminSize: 1,\n\t\t\tmaxSize: 10,\n\t\t\tscalingFunction: undefined\n\t\t},\n\t\t\n\t\tgraphStyle: {\n\t\t\tnode: {\n\t\t\t\tnormal: {\n\t\t\t\t\tfill: '#c6dbef',\n\t\t\t\t\tfillOpacity: 1,\n\t\t\t\t\tstroke: '#6baed6',\n\t\t\t\t\tstrokeOpacity: 1,\n\t\t\t\t\tstrokeWidth: 1\n\t\t\t\t},\n\t\t\t\thighlight: {\n\t\t\t\t\tfill: '#9ecae1',\n\t\t\t\t\tfillOpacity: 1,\n\t\t\t\t\tstroke: '#3182bd',\n\t\t\t\t\tstrokeOpacity: 1,\n\t\t\t\t\tstrokeWidth: 3\n\t\t\t\t}\n\t\t\t},\n\t\t\tedge: {\n\t\t\t\tnormal: {\n\t\t\t\t\tstroke: '#000000',\n\t\t\t\t\tstrokeOpacity: 0.25,\n\t\t\t\t\tstrokeWidth: 1\n\t\t\t\t},\n\t\t\t\thighlight: {\n\t\t\t\t\tstroke: '#000000',\n\t\t\t\t\tstrokeOpacity: 0.5,\n\t\t\t\t\tstrokeWidth: 3\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\n\t\tgraphPhysics: {\n\t\t\tdamping: 0.4, // 0 = no damping, 1 = full damping\n\t\t\tcentralGravity: 0.1, // 0 = no grav, 1 = high grav\n\t\t\tnodeGravity: -50,  // negative = repel, positive = attract\n\t\t\tspringLength: 100,\n\t\t\tspringStrength: 0.25, // 0 = not strong, >1 = probably too strong\n\t\t\tcollisionScale: 1.25 // 1 = default, 0 = no collision \n\t\t}\n\t},\n\t\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\t\n\t\tthis.setNodeData([]);\n\t\tthis.setEdgeData([]);\n\t\t\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n\t\tthis.callParent(arguments);\n\t\t\n\t\tvar json = {};\n\t\tif (this.getApiParam('jsonData')) {\n\t\t\tjson = Ext.decode(this.getApiParam('jsonData'));\n\t\t} else if (this.getApiParam('json')) {\n\t\t\tjson = this.getApiParam('json');\n\t\t} else if (config.json) {\n\t\t\tjson = config.json;\n\t\t} else if (config.edges) {\n\t\t\tjson.edges = config.edges;\n\t\t\tif (config.nodes) {\n\t\t\t\tjson.nodes = config.nodes;\n\t\t\t}\n\t\t} else if (config && config.jsonData) {\n\t\t\tjson = JSON.parse(config.jsonData);\n\t\t}\n\t\tthis.loadJson(json);\n\t},\n\n\tinitComponent: function(config) {\n\t\tthis.on('boxready', function(src, corpus) {\n\t\t\tthis.initGraph();\n\t\t\tthis.refreshGraph();\n\t\t}, this);\n\t\t\n\t\tthis.on('resize', function(panel, width, height) {\n\t\t\tvar vis = this.body.down('svg');\n\t\t\tif (vis) {\n\t\t\t\tvar el = this.body;\n\t\t\t\tvar elHeight = el.getHeight();\n\t\t\t\tvar elWidth = el.getWidth();\n\t\t\t\tvis.dom.setAttribute('width', elWidth);\n\t\t\t\tvis.dom.setAttribute('height', elHeight);\n\t\t\t\tthis.getVisLayout()\n\t\t\t\t\t.force('x', d3.forceX(elWidth/2))\n\t\t\t\t\t.force('y', d3.forceY(elHeight/2));\n\t\t\t\t\n\t\t\t\tExt.Function.defer(this.zoomToFit, 100, this);\n\t\t\t}\n\t\t}, this);\n\t\t\n\t\tthis.callParent(arguments);\n\t},\n\t\n\t/**\n\t * Primary method for adding data to the graph.\n\t * @param {Object} json The json data to load\n\t * @param {Array} json.nodes An array of objects that will become nodes\n\t * @param {String} json.nodes[].term The only required node property (used as ID for edges)\n\t * @param {Array} json.edges An array of objects that will become edges\n\t * @param {String} json.edges[].source The term/ID of the source node\n\t * @param {String} json.edges[].target The term/ID of the target node\n\t */\n\tloadJson: function(json) {\n\t\tthis.processJson(json);\n\t\t\n\t\tvar existingTerms = {};\n\t\tthis.getNodeData().forEach(function(node) {\n\t\t\texistingTerms[node.term] = true;\n\t\t}, this);\n\t\t\n\t\tvar newNodes = [];\n\t\tvar newEdges = [];\n\t\t\n\t\tjson.nodes.forEach(function(node) {\n\t\t\tif (existingTerms[node.term] === undefined) {\n\t\t\t\tnode.id = this.idGet(node.term);\n\t\t\t\tnewNodes.push(node);\n\t\t\t}\n\t\t}, this);\n\t\tjson.edges.forEach(function(newedge) {\n\t\t\tvar sourceId = this.idGet(newedge.source);\n\t\t\tvar targetId = this.idGet(newedge.target);\n\t\t\tvar edges = this.getEdgeData();\n\t\t\tvar exists = false;\n\t\t\tfor (var i = 0; i < edges.length; i++) {\n\t\t\t\tvar edge = edges[i];\n\t\t\t\tif ((edge.source.id == sourceId && edge.target.id == targetId) || (edge.target.id == sourceId && edge.source.id == targetId)) {\n\t\t\t\t\texists = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!exists) {\n\t\t\t\tnewedge.source = sourceId;\n\t\t\t\tnewedge.target = targetId;\n\t\t\t\tnewedge.id = sourceId+'-'+targetId;\n\t\t\t\tnewEdges.push(newedge);\n\t\t\t}\n\t\t}, this);\n\t\t\n\t\tthis.setNodeData(this.getNodeData().concat(newNodes));\n\t\tthis.setEdgeData(this.getEdgeData().concat(newEdges));\n\t\t\n\t\tthis.refreshGraph();\n\t},\n\t\n\tprocessJson: function(json) {\n\t\tif (!json || !json.edges) {\n\t\t\tif (json && json.links) {\n\t\t\t\tjson.edges = json.links;\n\t\t\t\tdelete json.links;\n\t\t\t}\n\t\t\tif (!json || !json.edges) {\n\t\t\t\tjson = json || {};\n\t\t\t\tjson.edges = [];\n\t\t\t}\n\t\t}\n\t\tif (!json.nodes) {\n\t\t\tjson.nodes = [];\n\t\t}\n\t\tif (json.nodes.length === 0) {\n\t\t\tvar wordFreq = {};\n\t\t\tjson.edges.forEach(function(edge) {\n\t\t\t\t['source', 'target'].forEach(function(loc) {\n\t\t\t\t\tvar term = edge[loc];\n\t\t\t\t\tif (term in wordFreq == false) {\n\t\t\t\t\t\twordFreq[term] = 1;\n\t\t\t\t\t\tjson.nodes.push({term: term});\n\t\t\t\t\t} else {\n\t\t\t\t\t\twordFreq[term]++;\n\t\t\t\t\t}\n\t\t\t\t\tedge.value = 1;\n\t\t\t\t});\n\t\t\t}, this);\n\t\t\tjson.nodes.forEach(function(node) {\n\t\t\t\tvar val = wordFreq[node.term] === undefined ? 1 : wordFreq[node.term];\n\t\t\t\tExt.applyIf(node, {value: val});\n\t\t\t});\n\t\t} else {\n\t\t\tjson.nodes.forEach(function(node) {\n\t\t\t\tExt.applyIf(node, {value: 1});\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn json;\n\t},\n\t\n\t/**\n\t * Get a DOM appropriate ID\n\t * @param {String} term \n\t * @returns {String}\n\t */\n\tidGet: function(term) {\n\t\treturn 'vng_'+term.replace(/\\W/g, '_');\n\t},\n\t\n\t/**\n\t * Update the data for a specific node\n\t * @param {String} nodeId \n\t * @param {Object} dataObj \n\t */\n\tupdateDataForNode: function(nodeId, dataObj) {\n\t\tvar data = this.getNodeData();\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tif (data[i].id === nodeId) {\n\t\t\t\tExt.apply(data[i], dataObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t * Update the data for a specific edge\n\t * @param {String} edgeId \n\t * @param {Object} dataObj \n\t */\n\tupdateDataForEdge: function(edgeId, dataObj) {\n\t\tvar data = this.getEdgeData();\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tif (data[i].id === edgeId) {\n\t\t\t\tExt.apply(data[i], dataObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t * Add a new node to the graph\n\t * @param {Object|String} dataObj \n\t */\n\taddNode: function(dataObj) {\n\t\tif (Ext.isString(dataObj)) {\n\t\t\tdataObj = {term: dataObj};\n\t\t}\n\t\tif (dataObj.term) {\n\t\t\tthis.loadJson({nodes: [dataObj]});\n\t\t}\n\t},\n\t\n\t/**\n\t * Remove a node from the graph\n\t * @param {String} nodeId \n\t * @param {Boolean} removeOrphans \n\t */\n\tremoveNode: function(nodeId, removeOrphans) {\n\t\tvar data = this.getNodeData();\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tif (data[i].id === nodeId) {\n\t\t\t\tdata.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar potentialOrphans = {};\n\t\tdata = this.getEdgeData();\n\t\tfor (var i = data.length-1; i >= 0; i--) {\n\t\t\tvar match = false;\n\t\t\tif (data[i].source.id === nodeId) {\n\t\t\t\tmatch = true;\n\t\t\t\tpotentialOrphans[data[i].target.id] = true;\n\t\t\t}\n\t\t\tif (data[i].target.id === nodeId) {\n\t\t\t\tmatch = true;\n\t\t\t\tpotentialOrphans[data[i].source.id] = true;\n\t\t\t}\n\t\t\tif (match) {\n\t\t\t\tdata.splice(i, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (removeOrphans) {\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\tif (potentialOrphans[data[i].source.id]) {\n\t\t\t\t\tdelete potentialOrphans[data[i].source.id];\n\t\t\t\t}\n\t\t\t\tif (potentialOrphans[data[i].target.id]) {\n\t\t\t\t\tdelete potentialOrphans[data[i].target.id];\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var orphanId in potentialOrphans) {\n\t\t\t\tthis.removeNode(orphanId, true);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.refreshGraph();\n\t},\n\t\n\t/**\n\t * Add a new edge to the graph\n\t * @param {Object} dataObj \n\t */\n\taddEdge: function(dataObj) {\n\t\tif (Ext.isObject(dataObj) && dataObj.source && dataObj.target) {\n\t\t\tthis.loadJson({edges: [dataObj]});\n\t\t}\n\t},\n\t\n\t/**\n\t * Remove a specific edge from the graph\n\t * @param {String} edgeId \n\t * @param {Boolean} removeOrphans \n\t */\n\tremoveEdge: function(edgeId, removeOrphans) {\n\t\tvar data = this.getEdgeData();\n\t\tfor (var i = data.length-1; i >= 0; i--) {\n\t\t\tif (data[i].id === edgeId) {\n\t\t\t\tdata.splice(i, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (removeOrphans) {\n\t\t\tvar potentialOrphans = {};\n\t\t\tdata = this.getNodeData();\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\tpotentialOrphans[data[i].id] = true;\n\t\t\t}\n\t\t\tdata = this.getEdgeData();\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\tif (potentialOrphans[data[i].source.id]) {\n\t\t\t\t\tdelete potentialOrphans[data[i].source.id];\n\t\t\t\t}\n\t\t\t\tif (potentialOrphans[data[i].target.id]) {\n\t\t\t\t\tdelete potentialOrphans[data[i].target.id];\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var orphanId in potentialOrphans) {\n\t\t\t\tthis.removeNode(orphanId, true);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tthis.refreshGraph();\n\t},\n\t\n\t/**\n\t * Initialize graph\n\t */\n\tinitGraph: function() {\n\t\tvar el = this.getLayout().getRenderTarget();\n\t\tel.update('');\n\t\tvar width = el.getWidth();\n\t\tvar height = el.getHeight();\n\t\t\n\t\tvar physics = this.getGraphPhysics();\n\t\tthis.setVisLayout(d3.forceSimulation()\n\t\t\t.velocityDecay(physics.damping)\n\t\t\t.force('x', d3.forceX(width/2).strength(physics.centralGravity))\n\t\t\t.force('y', d3.forceY(height/2).strength(physics.centralGravity))\n\t\t\t.force('link', d3.forceLink().id(function(d) { return d.id; }).distance(physics.springLength).strength(physics.springStrength))\n\t\t\t.force('charge', d3.forceManyBody().strength(physics.nodeGravity))\n\t\t\t.force('collide', d3.forceCollide().radius(function(d) { return Math.sqrt(d.bbox.width * d.bbox.height)*physics.collisionScale; }))\n\t\t\t.on('tick', function() {\n\t\t\t\tthis.getEdgeSelection()\n\t\t\t\t\t.attr('x1', function(d) { return d.source.x; })\n\t\t\t\t\t.attr('y1', function(d) { return d.source.y; })\n\t\t\t\t\t.attr('x2', function(d) { return d.target.x; })\n\t\t\t\t\t.attr('y2', function(d) { return d.target.y; });\n\t\t\n\t\t\t\tthis.getNodeSelection()\n\t\t\t\t\t.attr('transform', function(d) {\n\t\t\t\t\t\tvar x = d.x - d.bbox.width*0.5;\n\t\t\t\t\t\tvar y = d.y - d.bbox.height*0.5;\n\t\t\t\t\t\treturn 'translate('+x+','+y+')';\n\t\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (this.getVisLayout().alpha() < 0.075) {\n \t\t\t\t\tthis.getVisLayout().alpha(-1); // trigger end event\n \t\t\t\t}\n\t\t\t}.bind(this))\n\t\t\t.on('end', function() {\n\t\t\t\tExt.Function.defer(this.zoomToFit, 100, this);\n\t\t\t}.bind(this))\n\t\t);\n\t\t\n\t\tvar svg = d3.select(el.dom).append('svg').attr('width', width).attr('height', height);\n\t\tvar g = svg.append('g');\n\t\t\n\t\tvar zoom = d3.zoom()\n\t\t\t.scaleExtent(this.getZoomExtent())\n\t\t\t.on('zoom', function(event) {\n\t\t\t\tg.attr('transform', event.transform);\n\t\t\t});\n\t\tthis.setZoom(zoom);\n\t\tsvg.call(zoom);\n\t\t\n\t\tthis.setEdgeSelection(g.append('g').attr('class', 'edges').selectAll('.edge'));\n\t\tthis.setNodeSelection(g.append('g').attr('class', 'nodes').selectAll('.node'));\n\t\tthis.setVis(g);\n\t},\n\t\n\tresetGraph: function() {\n\t\tthis.setNodeData([]);\n\t\tthis.setEdgeData([]);\n\t\tthis.refreshGraph();\n\t},\n\t\n\t/**\n\t * Rebuild graph from data\n\t */\n\trefreshGraph: function() {\n\t\tif (this.getVisLayout() === undefined) return;\n\t\t\n\t\tvar edgeData = this.getEdgeData();\n\t\tvar nodeData = this.getNodeData();\n\t\t\n\t\tvar nodeExtent = d3.extent(nodeData, function(d) { return d.value; });\n\t\tvar edgeExtent = d3.extent(edgeData, function(d) { return d.value; });\n\n\t\tvar edgeScaling = this.getEdgeScaling();\n\t\tif (edgeScaling.scalingFunction === undefined) {\n\t\t\tedgeScaling.scalingFunction = d3.scaleLinear().domain(edgeExtent).range([edgeScaling.minSize, edgeScaling.maxSize]);\n\t\t}\n\t\t\n\t\tvar nodeScaling = this.getNodeScaling();\n\t\tif (nodeScaling.scalingFunction === undefined) {\n\t\t\tnodeScaling.scalingFunction = d3.scaleLog().domain(nodeExtent).range([nodeScaling.minSize, nodeScaling.maxSize]);\n\t\t}\n\t\t\n\t\tvar edge = this.getEdgeSelection().data(edgeData, function(d) { return d.id; });\n\t\tedge.exit().remove();\n\t\tvar edgeEnter = edge.enter().append('line')\n\t\t\t.attr('class', 'edge')\n\t\t\t.attr('id', function(d) { return d.id; })\n\t\t\t.style('cursor', 'pointer')\n\t\t\t.style('stroke-width', function(d) { return edgeScaling.scalingFunction(d.value); })\n\t\t\t.on('mouseover', this.edgeMouseOver.bind(this))\n\t\t\t.on('mouseout', this.edgeMouseOut.bind(this))\n\t\t\t.on('click', function(event, d) {\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.setCurrentEdge(d);\n\t\t\t\tthis.fireEvent('edgeclicked', this, d);\n\t\t\t}.bind(this));\n\t\t\n\t\tthis.setEdgeSelection(edgeEnter.merge(edge));\n\t\t\n\t\tvar node = this.getNodeSelection().data(nodeData, function(d) { return d.id; });\n\t\tnode.exit().remove();\n\t\tvar nodeEnter = node.enter().append('g')\n\t\t\t.attr('class', 'node')\n\t\t\t.attr('id', function(d) { return d.id; })\n\t\t\t.style('cursor', 'pointer')\n\t\t\t.on('mouseover', this.nodeMouseOver.bind(this))\n\t\t\t.on('mouseout', this.nodeMouseOut.bind(this))\n\t\t\t.on('click', function(event, d) {\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.setCurrentNode(d);\n\t\t\t\tthis.fireEvent('nodeclicked', this, d);\n\t\t\t}.bind(this))\n\t\t\t.on('dblclick', function(event, d) {\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.fireEvent('nodedblclicked', this, d);\n\t\t\t}.bind(this))\n\t\t\t.on('contextmenu', function(event, d) {\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.fireEvent('nodecontextclicked', this, d);\n\t\t\t}.bind(this))\n\t\t\t.call(d3.drag()\n\t\t\t\t.on('start', function(event, d) {\n\t\t\t\t\tthis.setDragging(true);\n\t\t\t\t\tif (!event.active) {\n\t\t\t\t\t\tthis.getVisLayout().alpha(0.3).restart();\n\t\t\t\t\t}\n\t\t\t\t\td.fx = d.x;\n\t\t\t\t\td.fy = d.y;\n\t\t\t\t\td.fixed = true;\n\t\t\t\t\tthis.fireEvent('nodedragstart', this, d);\n\t\t\t\t}.bind(this))\n\t\t\t\t.on('drag', function(event, d) {\n\t\t\t\t\tthis.getVisLayout().alpha(0.3); // don't let simulation end while the user is dragging\n\t\t\t\t\td.fx = event.x;\n\t\t\t\t\td.fy = event.y;\n\t\t\t\t\tthis.fireEvent('nodedrag', this, d);\n\t\t\t\t}.bind(this))\n\t\t\t\t.on('end', function(event, d) {\n\t\t\t\t\tthis.setDragging(false);\n\t\t\t\t\t// if (!event.active) this.getVisLayout().alpha(0);\n\t\t\t\t\tif (d.fixed != true) {\n\t\t\t\t\t\td.fx = null;\n\t\t\t\t\t\td.fy = null;\n\t\t\t\t\t}\n\t\t\t\t\tthis.fireEvent('nodedragend', this, d);\n\t\t\t\t}.bind(this))\n\t\t\t);\n\n\t\t// TODO detect title\n\t\t// nodeEnter.append('title').text(function(d) { return d.title; });\n\n\t\tnodeEnter.append('rect');\n\t\t\t\t\n\t\tnodeEnter.append('text')\n\t\t\t.text(function(d) { return d.term; })\n\t\t\t.attr('font-family', function(d) { return Voyant.application.getCategoriesManager().getFeatureForTerm('font', d.term); })\n\t\t\t.attr('font-size', function(d) {return nodeScaling.scalingFunction(d.value)+'px';})\n//            .attr('text-anchor', 'middle')\n\t\t\t.attr('dominant-baseline', 'middle')\n\t\t\t.style('user-select', 'none')\n\t\t\t.each(function(d) { d.bbox = this.getBBox(); });\n\t\t\n\t\tthis.setNodeSelection(nodeEnter.merge(node));\n\t\t\n\t\tthis.getNodeSelection().selectAll('rect')\n\t\t\t.attr('width', function(d) { return d.bbox.width+16; })\n\t\t\t.attr('height', function(d) { return d.bbox.height+8; })\n\t\t\t.attr('rx', function(d) { return Math.max(2, d.bbox.height * 0.2); })\n\t\t\t.attr('ry', function(d) { return Math.max(2, d.bbox.height * 0.2); });\n\t\t\n\t\tthis.getNodeSelection().selectAll('text')\n\t\t\t.attr('dx', 8)\n\t\t\t.attr('dy', function(d) { return d.bbox.height*0.5+4; });\n\t\t\n\n\t\tthis.getEdgeSelection().call(this.applyEdgeStyle.bind(this));\n\t\tthis.getNodeSelection().call(this.applyNodeStyle.bind(this));\n\t\t\n\t\tthis.getVisLayout().nodes(nodeData);\n\t\tthis.getVisLayout().force('link').links(edgeData);\n\t\tthis.getVisLayout().alpha(1).restart();\n\t},\n\t\n\tzoomToFit: function(paddingPercent, transitionDuration) {\n\t\tvar bounds = this.getVis().node().getBBox();\n\t\tvar width = bounds.width;\n\t\tvar height = bounds.height;\n\t\tvar midX = bounds.x + width/2;\n\t\tvar midY = bounds.y + height/2;\n\t\tvar svg = this.getVis().node().parentElement;\n\t\tvar svgRect = svg.getBoundingClientRect();\n\t\tvar fullWidth = svgRect.width;\n\t\tvar fullHeight = svgRect.height;\n\t\tvar scale = (paddingPercent || 0.8) / Math.max(width/fullWidth, height/fullHeight);\n\t\tvar translate = [fullWidth/2 - scale*midX, fullHeight/2 - scale*midY];\n\t\tif (width<1) {return} // FIXME: something strange with spyral\n\t\t\n\t\td3.select(svg)\n\t\t\t.transition()\n\t\t\t.duration(transitionDuration || 500)\n\t\t\t.call(this.getZoom().transform, d3.zoomIdentity.translate(translate[0],translate[1]).scale(scale));\n\t},\n\t\n\tnodeScaling: function(min, max, total, value) {\n\t\tif (min === max) {\n\t\t\treturn 0.5;\n\t\t} else {\n\t\t\tvar scale = 1 / (max - min);\n\t\t\treturn Math.max(0, (value-min)*scale);\n\t\t}\n\t},\n\t\n\t/**\n\t * Method for styling nodes, using the default config.graphStyle.\n\t * Override this method for custom styling.\n\t * @param {*} sel D3 selection\n\t * @param {String} nodeState  The state of the node: 'normal' or 'highlight'\n\t */\n\tapplyNodeStyle: function(sel, nodeState) {\n\t\tvar state = nodeState === undefined ? 'normal' : nodeState;\n\t\tvar style = this.getGraphStyle().node[state];\n\t\tsel.selectAll('rect')\n\t\t\t.style('fill', function(d) { return style.fill; }.bind(this))\n\t\t\t.style('fill-opacity', function(d) { return style.fillOpacity; }.bind(this))\n\t\t\t.style('stroke', function(d) { return style.stroke; }.bind(this))\n\t\t\t.style('stroke-opacity', function(d) { return style.strokeOpacity; }.bind(this))\n\t\t\t.style('stroke-width', function(d) { return style.strokeWidth; }.bind(this));\n\t},\n\t\n\t/**\n\t * Method for styling edges, using the default config.graphStyle.\n\t * Override this method for custom styling.\n\t * @param {*} sel D3 selection\n\t * @param {String} edgeState The state of the edge: 'normal' or 'highlight'\n\t */\n\tapplyEdgeStyle: function(sel, edgeState) {\n\t\tvar state = edgeState === undefined ? 'normal' : edgeState;\n\t\tvar style = this.getGraphStyle().edge[state];\n\t\tsel.style('stroke', function(d) { return style.stroke; }.bind(this))\n\t\t\t.style('stroke-opacity', function(d) { return style.strokeOpacity; }.bind(this));\n//\t    \t.style('stroke-width', function(d) { return style.strokeWidth; }.bind(this));\n\t},\n\n\tedgeMouseOver: function(event, d) {\n\t\tthis.getEdgeSelection().call(this.applyEdgeStyle.bind(this));\n\t\tthis.getVis().select('#'+d.id).call(this.applyEdgeStyle.bind(this), 'highlight');\n\t},\n\t\n\tedgeMouseOut: function(event, d) {\n\t\tthis.getEdgeSelection().call(this.applyEdgeStyle.bind(this));\n\t},\n\t\n\tnodeMouseOver: function(event, d) {\n\t\tthis.setCurrentNode(d);\n\t\t\n\t\tthis.getNodeSelection().call(this.applyNodeStyle.bind(this));\n\t\t\n\t\tthis.getEdgeSelection().each(function(link) {\n\t\t\tvar id;\n\t\t\tif (link.source.id == d.id) {\n\t\t\t\tid = link.target.id;\n\t\t\t} else if (link.target.id == d.id) {\n\t\t\t\tid = link.source.id;\n\t\t\t}\n\t\t\tif (id !== undefined) {\n\t\t\t\tthis.getVis().select('#'+id).call(this.applyNodeStyle.bind(this), 'highlight');\n\t\t\t\tthis.getVis().select('#'+link.id).call(this.applyEdgeStyle.bind(this), 'highlight');\n\t\t\t}\n\t\t}.bind(this));\n\t\t\n\t\tthis.getVis().select('#'+d.id).call(this.applyNodeStyle.bind(this), 'highlight');\n\t},\n\t\n\tnodeMouseOut: function(event, d) {\n\t\tthis.getNodeSelection().call(this.applyNodeStyle.bind(this));\n\t\tthis.getEdgeSelection().call(this.applyEdgeStyle.bind(this));\n\t}\n});","Ext.define('Voyant.widget.ReaderGraph', {\n    extend: 'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.readergraph',\n    statics: {\n        i18n: {\n        }\n    },\n    config: {\n        parentPanel: undefined,\n        documentsStore: undefined,\n    \tlocationMarker: undefined,\n    \tisDetailedGraph: true,\n\t\tseriesToolTip: undefined\n    },\n    \n    locationMarkerColor: '#157fcc',\n\n    DETAILED_GRAPH_DOC_LIMIT: 25, // upper limit on document count for showing detailed graphs\n    LOCATION_UPDATE_FREQ: 100,\n\n    SCROLL_UP: -1,\n    SCROLL_EQ: 0,\n    SCROLL_DOWN: 1,\n\n    RESERVED_KEYS: ['id', 'docIndex', 'readerGraphPadding', 'readerGraphTotal'],\n\n    constructor: function(config) {\n        this.callParent(arguments);\n    },\n\n    initComponent: function() {\n        Ext.apply(this, {\n            layout: {\n                type: 'hbox'\n            },\n            items: []\n        });\n\n        this.callParent(arguments);\n\n        var parentPanel = this.findParentBy(function(clz) {\n    \t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n        });\n        if (parentPanel === null) {\n            throw new Error('No parent panel for ReaderGraph!');\n        } else {\n            this.setParentPanel(parentPanel);\n            parentPanel.on('loadedCorpus', this.handleCorpus, this);\n        }\n\n\t\tthis.setSeriesToolTip(Ext.create('Ext.tip.ToolTip', {\n\t\t\tstyle: 'background: #fff',\n\t\t\tdismissDelay: 0\n\t\t}));\n        \n        this.on('boxready', function() {\n            if (this.getLocationMarker() == undefined) {\n                this.setLocationMarker(Ext.DomHelper.append(this.getEl(), {tag: 'div', style: 'background-color: '+this.locationMarkerColor+'; height: 100%; width: 2px; z-index: 3; position: absolute; top: 0; left: 0;'}));\n            }\n        });        \n    },\n\n    handleCorpus: function(parentPanel, corpus) {\n        var docs = corpus.getDocuments();\n        this.setDocumentsStore(docs);\n        this.setIsDetailedGraph(docs.getTotalCount() < this.DETAILED_GRAPH_DOC_LIMIT);\n\n        this.generateChart();\n    },\n\n    loadQueryTerms: function(queryTerms) {\n        // TODO add categories param?\n        if (this.getIsDetailedGraph()) {\n            this.getParentPanel().getCorpus().getDocumentTerms().load({\n                params: {\n                    query: queryTerms,\n                    limit: -1,\n                    withDistributions: true\n                },\n                callback: function(records, operation) {\n                    this.populateDetailedChart(records);\n                },\n                scope: this\n            })\n        } else {\n            this.getParentPanel().getCorpus().getCorpusTerms().load({\n                params: {\n                    query: queryTerms,\n                    limit: -1,\n                    withDistributions: true\n                },\n                callback: function(records, operation) {\n                    this.populateChart(records);\n                },\n                scope: this\n            })\n        }\n            \n    },\n\n    populateDetailedChart: function(records) {\n        var graphDatas = {};\n        var maxValue = 0;\n        records.forEach(function(r) {\n            var graphData = [];\n            var dist = r.get('distributions');\n            var docId = r.get('docId');\n            var docIndex = r.get('docIndex');\n            var term = r.get('term');\n            for (var i = 0; i < dist.length; i++) {\n                var val = dist[i];\n                if (val > maxValue) maxValue = val;\n                graphData.push([docId, docIndex, i, val, term]);\n            }\n            if (graphDatas[docIndex] === undefined) {\n                graphDatas[docIndex] = {};\n            }\n            graphDatas[docIndex][term] = graphData;\n        });\n        var graphs = this.query('cartesian');\n        for (var i = 0; i < graphs.length; i++) {\n            var graph = graphs[i];\n\n            var docData = graphDatas[i];\n            if (docData !== undefined) {\n                var series = [];\n                for (var term in docData) {\n                    var termData = docData[term];\n                    var sColor = this.getParentPanel().getApplication().getColorForTerm(term, true);\n                    series.push({\n                        type: 'line',\n                        xField: 'bin',\n                        yField: 'distribution',\n                        style: { lineWidth: 1, strokeStyle: sColor },\n                        store: Ext.create('Ext.data.ArrayStore', {\n                            fields: ['docId', 'docIndex', 'bin', 'distribution', 'term'],\n                            data: termData\n                        })\n                    });\n                }\n                graph.getAxes()[0].setMaximum(maxValue);\n                graph.setSeries(series);\n            }\n        }\n    },\n\n\tpopulateChart: function(records) {\n\t\tvar graphDatas = {};\n        this.getParentPanel().getCorpus().getDocuments().each(function(doc, index) {\n            graphDatas[index] = {};\n        });\n        var terms = [];\n        records.forEach(function(r) {\n            var term = r.get('term');\n            if (terms.indexOf(term) === -1) {\n                terms.push(term);\n            }\n            var dists = r.get('distributions');\n            dists.forEach(function(val, docIndex) {\n                graphDatas[docIndex][term] = val;\n            });\n        });\n        terms.push('readerGraphPadding');\n\n        var seriesData = Object.entries(graphDatas).map(function(termData) {\n            return Object.assign({docIndex: parseInt(termData[0])}, termData[1]);\n        });\n\n        var maxValue = -1;\n        seriesData.forEach(function(termData) {\n            var total = Object.entries(termData)\n                .filter(function(td) { return td[0] !== 'docIndex'})\n                .map(function(td) { return td[1]})\n                .reduce(function(prevVal, currVal) { return prevVal+currVal});\n            \n            termData.readerGraphTotal = total;\n\n            if (total > maxValue) {\n                maxValue = total;\n            }\n        });\n\n        seriesData.forEach(function(termData) {\n            termData.readerGraphPadding = maxValue - termData.readerGraphTotal;\n        });\n\n        var series = {\n            type: 'bar',\n            stacked: true,\n            fullStack: true,\n            xField: 'docIndex',\n            yField: terms,\n            style: {\n                minGapWidth: 0,\n                minBarWidth: 1,\n                lineWidth: 0,\n                strokeStyle: 'none'\n            },\n            renderer: function (sprite, config, rendererData, index) {\n                var term = sprite.getField();\n                var color;\n                if (term === 'readerGraphPadding') {\n                    color = this.getColor(index, 0.3);\n                } else {\n                    color = this.getParentPanel().getApplication().getColorForTerm(term, true);\n                }\n                return {fillStyle: color};\n            }.bind(this)\n        };\n        var graph = this.down('cartesian');\n        graph.getAxes()[0].setFields(terms);\n        graph.setSeries(series);\n        graph.setStore(Ext.create('Ext.data.JsonStore', {\n            fields: ['docIndex'].concat(terms),\n            data: seriesData\n        }));\n    },\n\n\tgetColor: function(index, alpha) {\n\t\tvar c = index % 2 === 0 ? [200,200,200] : [240,240,240];\n\t\treturn 'rgba('+c.join(',')+','+alpha+')';\n\t},\n\n    generateChart: function() {\n\t\tvar me = this;\n        \n        function addChart(docInfo) {\n            var index = docInfo.docIndex;\n            var fraction = docInfo.fraction;\n            var height = docInfo.relativeHeight;\n            var bColor = this.getColor(index, 0.3);\n            var chart = me.add({\n                xtype: 'cartesian',\n                plugins: {\n                    ptype: 'chartitemevents'\n                },\n                flex: fraction,\n                height: '100%',\n                insetPadding: 0,\n                background: {\n                    type: 'linear',\n                    degrees: 90,\n                    stops: [{\n                        offset: 0,\n                        color: bColor\n                    },{\n                        offset: height,\n                        color: bColor\n                    },{\n                        offset: height,\n                        color: 'white'\n                    },{\n                        offset: 1,\n                        color: 'white'\n                    }]\n                },\n                axes: [{\n                    type: 'numeric',\n                    position: 'left',\n                    fields: 'distribution',\n                    hidden: true\n                },{\n                    type: 'category',\n                    position: 'bottom',\n                    fields: 'bin',\n                    hidden: true\n                }],\n\t\t\t\tlisteners: {\n\t\t\t\t\titemmouseover: function(chart, item, event) {\n\t\t\t\t\t\tvar tooltipHtml = this.getParentPanel().getCorpus().getDocument(item.record.get('docIndex')).getTitle();\n\t\t\t\t\t\tchart.getSeries().forEach(function(series) {\n\t\t\t\t\t\t\tvar seriesItem = series.getItemByIndex(item.index);\n\t\t\t\t\t\t\tvar term = seriesItem.record.get('term');\n\t\t\t\t\t\t\tvar dist = seriesItem.record.get('distribution');\n\t\t\t\t\t\t\ttooltipHtml += '<br>'+term+': '+dist;\n\t\t\t\t\t\t}, this);\n\t\t\t\t\t\tthis.getSeriesToolTip().setHtml(tooltipHtml);\n\t\t\t\t\t\tvar xy = event.getXY();\n\t\t\t\t\t\txy[0] += 15;\n\t\t\t\t\t\txy[1] += 18;\n\t\t\t\t\t\tthis.getSeriesToolTip().showAt(xy);\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n            });\n\n            chart.body.on('mouseenter', function(event, target) {\n                if (chart.getSeries().length === 0) {\n                    var tooltipHtml = this.getParentPanel().getCorpus().getDocument(docInfo.docIndex).getTitle();\n                    this.getSeriesToolTip().setHtml(tooltipHtml);\n                    var xy = event.getXY();\n                    xy[0] += 15;\n                    xy[1] += 18;\n                    this.getSeriesToolTip().showAt(xy);\n                }\n            }, this);\n\n\t\t\tchart.body.on('mouseleave', function(event, target) {\n\t\t\t\tthis.getSeriesToolTip().hide();\n\t\t\t}, this);\n            \n            chart.body.on('click', function(event, target) {\n                var el = Ext.get(target);\n                \n                var x = event.getX();\n                var box = el.getBox();\n                var fraction = (x - box.x) / box.width;\n\n                var chartContainer = el.parent('.x-panel');\n                var containerParent = chartContainer.parent();\n                var children = Ext.toArray(containerParent.dom.children);\n                var docIndex = children.indexOf(chartContainer.dom);\n\n                this.fireEvent('documentRelativePositionSelected', this, {docIndex: docIndex, fraction: fraction});\n            }, this);\n        }\n        \n        me.removeAll();\n        \n        var docs = me.getParentPanel().getCorpus().getDocuments();\n        var tokensTotal = me.getParentPanel().getCorpus().getWordTokensCount();\n        var docInfos = [];\n        for (var i = 0; i < docs.getCount(); i++) {\n            var d = docs.getAt(i);\n            var docIndex = d.get('index');\n            var count = d.get('tokensCount-lexical');\n            var fraction = count / tokensTotal;\n            docInfos.push({\n                docIndex: docIndex,\n                count: 1, // same height for all\n                fraction: fraction\n            });\n        }\n        \n        if (this.getIsDetailedGraph()) {\n            for (var i = 0; i < docInfos.length; i++) {\n                var d = docInfos[i];\n                d.relativeHeight = 1; // same height for all\n                addChart.call(this, d);\n            }\n        } else {\n            var chart = me.add({\n                xtype: 'cartesian',\n                plugins: {\n                    ptype: 'chartitemevents'\n                },\n                flex: 1,\n                height: '100%',\n                animation: false,\n                insetPadding: 0,\n                axes: [{\n                    type: 'numeric',\n                    position: 'left',\n                    fields: 'count',\n                    hidden: true\n                },{\n                    type: 'category',\n                    position: 'bottom',\n                    fields: 'docIndex',\n                    hidden: true\n                }],\n                series: [{\n                    type: 'bar',\n                    xField: 'docIndex',\n                    yField: 'count',\n                    style: {\n                        minGapWidth: 0,\n                        minBarWidth: 1,\n                        lineWidth: 0,\n                        strokeStyle: 'none'\n                    },\n                    renderer: function (sprite, config, rendererData, index) {\n                        return {fillStyle: this.getColor.call(this, index, 0.3)};\n                    }.bind(this)\n                }],\n                store: Ext.create('Ext.data.JsonStore', {\n                    fields: [{name: 'docIndex', type: 'int'}, {name: 'count', type: 'int'}],\n                    data: docInfos\n                }),\n                listeners: {\n                    itemmouseover: function(chart, item, event) {\n\t\t\t\t\t\tvar tooltipHtml = this.getParentPanel().getCorpus().getDocument(item.record.get('docIndex')).getTitle();\n\n                        if (chart.getSeries()[0].getFullStack()) {\n                            Object.keys(item.record.data)\n                                .filter(function(key) { return me.RESERVED_KEYS.indexOf(key) === -1 })\n                                .forEach(function(key) {\n                                    var val = item.record.data[key];\n                                    tooltipHtml += '<br>'+key+': '+val;\n                                }, this);\n                        }\n                        \n\t\t\t\t\t\tthis.getSeriesToolTip().setHtml(tooltipHtml);\n\t\t\t\t\t\tvar xy = event.getXY();\n\t\t\t\t\t\txy[0] += 15;\n\t\t\t\t\t\txy[1] += 18;\n\t\t\t\t\t\tthis.getSeriesToolTip().showAt(xy);\n\t\t\t\t\t},\n                    itemclick: function(chart, item, event) {\n                        var el = Ext.get(event.getTarget());\n                        var x = event.getX();\n                        var box = el.getBox();\n                        var docWidth = box.width / this.getParentPanel().getCorpus().getDocuments().getCount();\n                        var docX = (x - box.x) % docWidth;\n                        var fraction = docX / docWidth;\n\n            \t\t\tvar docIndex = item.record.get('docIndex');\n                        var doc = this.getDocumentsStore().getAt(docIndex);\n                        var docIndex = doc.getIndex();\n\n                        this.fireEvent('documentRelativePositionSelected', this, {docIndex: docIndex, fraction: fraction});\n                    },\n                    scope: this\n                }\n            });\n            chart.body.on('mouseleave', function(event, target) {\n\t\t\t\tthis.getSeriesToolTip().hide();\n\t\t\t}, this);\n        }\n\n    },\n\n    moveLocationMarker: function(docIndex, fraction, scrollDir) {\n        var locMarkEl = Ext.get(this.getLocationMarker());\n        var locX = locMarkEl.getX();\n        if (this.getIsDetailedGraph()) {\n            var graph = this.query('cartesian')[docIndex];\n            if (graph) {\n                locX = graph.getX() + graph.getWidth()*fraction;\n            }\n        } else {\n            var graph = this.down('cartesian');\n            if (graph) {\n                var docWidth = graph.getWidth() / this.getParentPanel().getCorpus().getDocuments().getCount();\n                locX = graph.getX() + docWidth*docIndex + docWidth*fraction;\n            }\n        }\n        if (scrollDir != null) {\n            var currX = locMarkEl.getX();\n            // prevent location being set in opposite direction of scroll\n            if ((scrollDir == this.SCROLL_DOWN && currX > locX) || (scrollDir == this.SCROLL_UP && currX < locX)) locX = currX;\n        }\n        locMarkEl.setX(locX);\n    }\n});","Ext.define('Voyant.widget.EntitiesList', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.util.Localization'],\n\talias: 'widget.entitieslist',\n\tstatics: {\n\t\ti18n: {\n\t\t\tterm: 'Term',\n\t\t\tcount: 'Count',\n\t\t\ttype: 'Type',\n\t\t\tdocIndex: 'Document',\n\t\t\tnext: 'Next Occurrence',\n\t\t\tprev: 'Previous Occurrence',\n\t\t\tdate: 'Date',\n\t\t\tperson: 'Person',\n\t\t\tgpe: 'Geopolitical Entity',\n\t\t\tloc: 'Location',\n\t\t\tmoney: 'Money',\n\t\t\ttime: 'Time',\n\t\t\tproduct: 'Product',\n\t\t\tcardinal: 'Cardinal',\n\t\t\tquantity: 'Quantity',\n\t\t\tevent: 'Event',\n\t\t\tfac: 'Facility',\n\t\t\tlanguage: 'Language',\n\t\t\tlaw: 'Law',\n\t\t\tnorp: 'National/Religious/Political',\n\t\t\tpercent: 'Percent',\n\t\t\twork_of_art: 'Work of Art',\n\t\t\tunknown: 'Unknown',\n\t\t\tduration: 'Duration',\n\t\t\tlocation: 'Location',\n\t\t\tmisc: 'Misc',\n\t\t\torganization: 'Organization',\n\t\t\tset: 'Set'\n\t\t}\n\t},\n\n\tinitComponent: function() {\n\t\tvar me = this;\n\t\tvar hasEntitiesParent = this.up().xtype === 'entities';\n\t\tExt.apply(this, {\n\t\t\ttitle: 'Entities',\n\t\t\tforceFit: true,\n\t\t\tstore: Ext.create('Ext.data.JsonStore', {\n\t\t\t\tmodel: 'Voyant.data.model.Entity',\n\t\t\t\tgroupField: 'type',\n\t\t\t\tsorters: [{\n\t\t\t\t\tproperty: 'rawFreq',\n\t\t\t\t\tdirection: 'DESC'\n\t\t\t\t}]\n\t\t\t}),\n\t\t\tfeatures: [{\n\t\t\t\tftype: 'grouping',\n\t\t\t\thideGroupedHeader: true,\n\t\t\t\tenableGroupingMenu: true,\n\t\t\t\tstartCollapsed: true,\n\t\t\t\tgroupHeaderTpl: ['{name:this.localizeName} ({children.length})',{\n\t\t\t\t\tlocalizeName: function(name) {\n\t\t\t\t\t\tvar localized = me.localize(name);\n\t\t\t\t\t\tvar bracketsCheck = localized.match(/^\\[(.*)\\]$/);\n\t\t\t\t\t\tif (bracketsCheck !== null) {\n\t\t\t\t\t\t\t// there was no localization so just show the value sans brackets\n\t\t\t\t\t\t\tlocalized = bracketsCheck[1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn localized;\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}],\n\t\t\tselModel: {\n\t\t\t\tmode: hasEntitiesParent ? 'SIMPLE' : 'SINGLE'\n\t\t\t},\n\t\t\tplugins: [{\n\t\t\t\tptype: 'rowexpander',\n\t\t\t\trowBodyTpl: new Ext.XTemplate(''),\n\t\t\t\texpandOnDblClick: false\n\t\t\t}],\n\t\t\tviewConfig: {\n\t\t\t\tlisteners: {\n\t\t\t\t\texpandbody: function(rowNode, record, expandRow, eOpts) {\n\t\t\t\t\t\tme.getSelectionModel().select(record, false, true); // select expanded row, otherwise select event gets triggered later when interacting with prev/next buttons\n\t\t\t\t\t\tif (expandRow.textContent === '' || (eOpts && eOpts.force)) {\n\t\t\t\t\t\t\tvar parentEl = expandRow.querySelector('div.x-grid-rowbody');\n\t\t\t\t\t\t\tvar expandedRow = Ext.create('Ext.container.Container', {\n\t\t\t\t\t\t\t\tcurrentEntityPositionIndex: 0,\n\t\t\t\t\t\t\t\thandlePositionChange: function(dir) {\n\t\t\t\t\t\t\t\t\tif (dir < 0) {\n\t\t\t\t\t\t\t\t\t\tthis.currentEntityPositionIndex--;\n\t\t\t\t\t\t\t\t\t\tif (this.currentEntityPositionIndex < 0) this.currentEntityPositionIndex = record.get('positions').length-1;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tthis.currentEntityPositionIndex++;\n\t\t\t\t\t\t\t\t\t\tif (this.currentEntityPositionIndex > record.get('positions').length-1) this.currentEntityPositionIndex = 0;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// programatically highlight the current bar\n\t\t\t\t\t\t\t\t\tvar dist = record.get('distributions');\n\t\t\t\t\t\t\t\t\tvar distBinToHighlight = 0;\n\t\t\t\t\t\t\t\t\tvar distBinCount = 0;\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < dist.length; i++) {\n\t\t\t\t\t\t\t\t\t\tdistBinCount += dist[i];\n\t\t\t\t\t\t\t\t\t\tif (distBinCount > this.currentEntityPositionIndex) {\n\t\t\t\t\t\t\t\t\t\t\tdistBinToHighlight = i;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvar sparkline = this.down('sparklinebar');\n\t\t\t\t\t\t\t\t\tvar sparklineBox = sparkline.canvas.el.getBox();\n\t\t\t\t\t\t\t\t\tvar binWidth = sparkline.getBarWidth()+sparkline.getBarSpacing();\n\t\t\t\t\t\t\t\t\tvar mouseX = sparklineBox.x + (binWidth * distBinToHighlight);\n\t\t\t\t\t\t\t\t\tvar mouseY = sparklineBox.y + (sparklineBox.height*.5);\n\t\t\t\t\t\t\t\t\tvar event = Ext.create('Ext.event.Event', new MouseEvent('mousemove', {clientX: mouseX, clientY: mouseY}));\n\t\t\t\t\t\t\t\t\tsparkline.onMouseMove(event);\n\n\t\t\t\t\t\t\t\t\tVoyant.application.dispatchEvent('entityLocationClicked', this, record, this.currentEntityPositionIndex);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\t\t\ttype: 'hbox',\n\t\t\t\t\t\t\t\t\talign: 'middle'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\trenderTo: parentEl,\n\t\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\t\t\t\tglyph: 'xf060@FontAwesome',\n\t\t\t\t\t\t\t\t\ttooltip: me.localize('prev'),\n\t\t\t\t\t\t\t\t\thandler: function(btn, e) {\n\t\t\t\t\t\t\t\t\t\tbtn.up('container').handlePositionChange(-1);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\t\t\t\tglyph: 'xf061@FontAwesome',\n\t\t\t\t\t\t\t\t\ttooltip: me.localize('next'),\n\t\t\t\t\t\t\t\t\tmargin: '0 5',\n\t\t\t\t\t\t\t\t\thandler: function(btn, e) {\n\t\t\t\t\t\t\t\t\t\tbtn.up('container').handlePositionChange(1);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\txtype: 'sparklinebar',\n\t\t\t\t\t\t\t\t\tvalues: record.get('distributions'),\n\t\t\t\t\t\t\t\t\thighlightColor: '#f80',\n\t\t\t\t\t\t\t\t\theight: 24,\n\t\t\t\t\t\t\t\t\ttipTpl: false,\n\t\t\t\t\t\t\t\t\twidth: parentEl.offsetWidth - 80 // TODO resize when layout changes\n\t\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\t\tboxready: function(cmp) {\n\t\t\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\t\t\tcmp.currentEntityPositionIndex = -1;\n\t\t\t\t\t\t\t\t\t\t\tcmp.handlePositionChange(1);\n\t\t\t\t\t\t\t\t\t\t}, 50);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tcolumns: [{\n\t\t\t\ttext: this.localize('docIndex'),\n\t\t\t\tdataIndex: 'docIndex',\n\t\t\t\thidden: true,\n\t\t\t\twidth: 100\n\t\t\t},{\n\t\t\t\ttext: this.localize('type'),\n\t\t\t\tdataIndex: 'type',\n\t\t\t\thidden: true,\n\t\t\t\tflex: 1\n\t\t\t},{\n\t\t\t\ttext: this.localize('term'),\n\t\t\t\tdataIndex: 'term',\n\t\t\t\tflex: 1\n\t\t\t},{\n\t\t\t\ttext: this.localize('count'),\n\t\t\t\tdataIndex: 'rawFreq',\n\t\t\t\twidth: 50\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tselectionchange: function(cmp, records, index) {\n\t\t\t\t\tVoyant.application.dispatchEvent('entitiesClicked', this, records);\n\t\t\t\t},\n\t\t\t\tcolumnresize: function(ct, column, width) {\n\t\t\t\t},\n\t\t\t\tentityResults: function(src, entities) {\n\t\t\t\t\tthis.addEntities(entities);\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.callParent(arguments);\n\t},\n\n\tclearEntities: function() {\n\t\tvar store = this.getStore();\n\t\tif (store !== undefined) {\n\t\t\tstore.removeAll();\n\t\t}\n\t},\n\n\tgetEntities: function(annotator, docs) {\n\t\tvar docIds = [];\n\t\tvar corpus = Voyant.application.getCorpus();\n\t\tif (docs) {\n\t\t\tdocs.forEach(function(doc) {\n\t\t\t\tdocIds.push(corpus.getDocument(doc).getId())\n\t\t\t}, this);\n\t\t}\n\t\tnew Voyant.data.util.DocumentEntities({\n\t\t\tannotator: annotator,\n\t\t\tincludeEntities: true,\n\t\t\tdocId: docIds\n\t\t});\n\t},\n\t\n\taddEntities: function(entities) {\n\t\tvar store = this.getStore();\n\t\tif (store !== undefined) {\n\t\t\tvar append = false;\n\t\t\tif (store.count() > 0 && entities.length > 0) {\n\t\t\t\tvar oldDocIndex = store.first().get('docIndex');\n\t\t\t\tvar newDocIndex = entities[0].docIndex;\n\t\t\t\tappend = oldDocIndex === newDocIndex;\n\t\t\t}\n\t\t\tstore.loadData(entities, append);\n\t\t\tif (append === false) {\n\t\t\t\tthis.view.findFeature('grouping').collapseAll();\n\t\t\t}\n\t\t}\n\t},\n\n\t\n});","/**\n * Each member of Tools is available for use with the {@link Spyral.Corpus#tool} method.\n * @namespace Tools\n */\n\n/**\n * The base class for Voyant tool panels.\n * \n * @class Panel\n * @memberof Tools\n */\nExt.define('Voyant.panel.Panel', {\n\tmixins: ['Voyant.util.Localization','Voyant.util.Api','Voyant.util.Toolable','Voyant.util.DetailedError'],\n\trequires: ['Voyant.widget.QuerySearchField','Voyant.widget.StopListOption','Voyant.categories.CategoriesOption','Voyant.widget.TotalPropertyStatus'],\n\talias: 'widget.voyantpanel',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tconfig: {\n\t\t\tcorpusValidated: false\n\t\t},\n\t\t// typedefs for commonly used API params\n\t\t/**\n\t\t * @typedef {String} stopList A comma-separated list of words, a named list or a URL to a plain text list, one word per line.\n\t\t * By default this is set to 'auto' which auto-detects the document's language and loads an appropriate list (if available for that language). Set this to blank to not use the default stopList.\n\t\t * For more information see the [Stopwords documentation]{@tutorial stopwords}.\n\t\t */\n\n\t\t/**\n\t\t * @typedef {String|String[]} query A query or array of queries (queries can be separated by a comma).\n\t\t * For query syntax, see the [search documentation]{@tutorial search}.\n\t\t */\n\n\t\t/**\n\t\t * @typedef {String|String[]} docId The document ID(s) to restrict the results to.\n\t\t */\n\n\t\t/**\n\t\t * @typedef {Number|Number[]} docIndex The document index(es) to restrict the results to.\n\t\t */\n\n\t\t/**\n\t\t * @typedef {String} categories The categories ID to use. For more information see the [Categories documentation]{@tutorial categories}.\n\t\t */\n\n\t\t/**\n\t\t * @typedef {Number} bins The number of \"bins\" to divide the result into.\n\t\t */\n\n\t\t/**\n\t\t * @typedef {Number} start The index of the item to start the results at.\n\t\t */\n\n\t\t/**\n\t\t * @typedef {Number} limit The number of items to limit the result to.\n\t\t */\n\n\t\t/**\n\t\t * @typedef {Number} context The number of terms to consider on each side of the keyword.\n\t\t */\n\n\t\t/**\n\t\t * @typedef {String} withDistributions Determines whether to show \"raw\" or \"relative\" frequencies (those are the two valid values).\n\t\t * The default value is \"relative\" (unless there's only one document in the corpus, in which case raw frequencies are shown).\n\t\t */\n\n\t\t/**\n\t\t * @typedef {String} termColors Which term colors to show in the grid.\n\t\t * By default this is set to 'categories' which shows the term color only if it's been assigned by a category.\n\t\t * The other alternatives are 'terms' which shows all terms colors, and '' or undefined which shows no term colors.\n\t\t */\n\n\t\t/**\n\t\t * @typedef {String|String[]} columns One or more column data indexes to display, separated by a comma.\n\t\t * Use this to modify the default set of visible columns.\n\t\t */\n\n\t\t/**\n\t\t * @typedef {String} sort The column to sort the results by\n\t\t */\n\n\t\t/**\n\t\t * @typedef {String} dir The direction in which to sort the results: 'asc' or 'desc'\n\t\t */\n\t\tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.Panel\n\t\t\t * @instance\n\t\t\t * @property {String} corpus The ID of the corpus to use.\n\t\t\t */\n\t\t\tcorpus: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Panel\n\t\t\t * @instance\n\t\t\t * @property {String|String[]} input Use to directly provide input, instead of specifying a corpus. Can be: one or more URLs, one or more chunks of text.\n\t\t\t */\n\t\t\tinput: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Panel\n\t\t\t * @instance\n\t\t\t * @property {String} inputFormat The input format of the provided input (the default is auto-detect).\n\t\t\t */\n\t\t\tinputFormat: undefined,\n\t\t\t\n\t\t\t/**\n\t\t\t * @memberof Tools.Panel\n\t\t\t * @instance\n\t\t\t * @property {String} subtitle Specify a subtitle to display in the tool's header.\n\t\t\t */\n\t\t\tsubtitle: undefined\n\t\t}\n\t},\n\tconfig: {\n\t\tcorpus: undefined\n\t},\n\tconstructor: function(config) {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n\t\tthis.mixins['Voyant.util.Toolable'].constructor.apply(this, arguments);\n\t\tif (!this.glyph) {\n\t\t\tthis.glyph = Ext.ClassManager.getClass(this).glyph\n\t\t}\n\t\t\n\t\tthis.on(\"afterrender\", function() {\n\t\t\tif (this.getXType()!='facet' && this.getApiParam('subtitle') && this.getTitle()) {\n\t\t\t\tthis.setTitle(this.getTitle()+\" <i style='font-size: smaller;'>\"+this.getApiParam('subtitle')+\"</i>\")\n\t\t\t}\n\t\t\tif (this.isXType(\"grid\")) {\n\t\t\t\tthis.on('boxready', function() {\n\t\t\t\t\tvar columns = this.getApiParam('columns');\n\t\t\t\t\tif (columns !== undefined) {\n\t\t\t\t\t\tif (Array.isArray(columns) === false) {\n\t\t\t\t\t\t\tcolumns = columns.split(',');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (columns.length > 0) {\n\t\t\t\t\t\t\tvar anyMatch = false;\n\t\t\t\t\t\t\tthis.getColumns().forEach(function(gcol) {\n\t\t\t\t\t\t\t\tvar match = columns.indexOf(gcol.dataIndex) !== -1;\n\t\t\t\t\t\t\t\tanyMatch = match || anyMatch;\n\t\t\t\t\t\t\t\tgcol.setVisible(match);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (!anyMatch) {\n\t\t\t\t\t\t\t\tthis.getColumns().forEach(function(gcol) {\n\t\t\t\t\t\t\t\t\tgcol.setVisible(gcol.initialConfig.hidden !== undefined ? !gcol.initialConfig.hidden : true);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t\t\n\t\t\t\tthis.getSelectionModel().on(\"selectionchange\", function(store, records) {\n//\t\t\t\t\tconsole.warn(records, this.selectedRecordsToRemember)\n//\t\t\t\t\tthis.selectedRecordsToRemember = records;\n\t\t\t\t}, this);\n\t\t\t\tthis.getStore().on(\"beforeload\", function() {\n\t\t\t\t\tthis.selectedRecordsToRemember = this.getSelection();\n\t\t\t\t}, this)\n\t\t\t\tthis.getStore().on(\"load\", function(store, records) {\n\t\t\t\t\tif (Ext.Array.from(this.selectedRecordsToRemember).length>0) {\n\t\t\t\t\t\t// combine contents of store with contents of remembered items, filtering out duplicates\n\t\t\t\t\t\tvar seen = {}\n\t\t\t\t\t\tvar mergedRecords = Ext.Array.merge(this.selectedRecordsToRemember, records).filter(function(item) {\n\t\t\t\t\t\t\tif (!(item.getId() in seen)) {\n\t\t\t\t\t\t\t\tseen[item.getId()]=true;\n\t\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (store.isBufferedStore) {\n\t\t\t\t\t\t\tif (store.currentPage==1) {\n\t\t\t\t\t\t\t\tstore.data.addAll(mergedRecords);\n\t\t\t\t\t\t\t\tstore.totalCount = mergedRecords.length;\n\t\t\t\t\t\t\t\tstore.fireEvent('refresh', store);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstore.loadRecords(mergedRecords);\n\t\t\t\t\t\t\tthis.getSelectionModel().select(this.selectedRecordsToRemember);\n\t\t\t\t\t\t\tstore.fireEvent('refresh', store);\n\t\t\t\t\t\t\tthis.selectedRecordsToRemember = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\t\t}, this);\n\t\t\n\t\tthis.on({\n\t\t\tloadedCorpus: {\n\t\t\t\tfn: function(src, corpus) {\n\t\t    \t\t// make sure API is updated if we had a corpus and it's changed, this should be registered first, so hopefully be fired before tools receive notification\n\t\t    \t\tthis.setApiParam(\"corpus\", corpus.getAliasOrId());\n\t\t\t\t\tthis.setCorpus(corpus);\n\t\t\t\t},\n\t\t\t\tpriority: 999, // very high priority\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\t},\n\t\n\tgetApplication: function() {\n\t\treturn Voyant.application;\n\t},\n\t\n\tgetBaseUrl: function() {\n\t\treturn this.getApplication().getBaseUrl();\n\t},\n\t\n\topenUrl: function(url) {\n\t\tthis.getApplication().openUrl.apply(this, arguments);\n\t},\n\t\n\tgetTromboneUrl: function() {\n\t\treturn this.getApplication().getTromboneUrl();\n\t},\n\t\n\tdispatchEvent: function() {\n\t\tvar application = this.getApplication();\n\t\tapplication.dispatchEvent.apply(application, arguments);\n\t},\n\t\n\tshowError: function(config, response) {\n\t\tif (Ext.isString(config)) {\n\t\t\tconfig = {\n\t\t\t\tmessage: config\n\t\t\t}\n\t\t}\n\t\tExt.applyIf(config, {\n\t\t\ttitle: this.localize(\"error\")+\" (\"+this.localize(\"title\")+\")\"\n\t\t})\n\t\tthis.getApplication().showError(config, response)\n\t},\n\t\n\tshowResponseError: function(config, response) {\n\t\tthis.getApplication().showResponseError(config, response)\n\t},\n\t\n\ttoastError: function(config) {\n\t\tif (Ext.isString(config)) {\n\t\t\tconfig = {html: config}\n\t\t}\n\t\tExt.applyIf(config, {\n\t\t\tglyph: 'xf071@FontAwesome',\n\t\t\ttitle: this.localize(\"error\")\n\t\t})\n\t\tthis.toast(config);\n\t},\n\t\n\ttoastInfo: function(config) {\n\t\tif (Ext.isString(config)) {\n\t\t\tconfig = {html: config}\n\t\t}\n\t\tExt.applyIf(config, {\n\t\t\tglyph: 'xf05a@FontAwesome',\n\t\t\ttitle: this.localize(\"info\")\n\t\t})\n\t\tthis.toast(config);\n\t},\n\t\n\ttoast: function(config) {\n\t\tif (Ext.isString(config)) {\n\t\t\tconfig = {html: config}\n\t\t}\n\t\tExt.applyIf(config, {\n\t\t\t slideInDuration: 500,\n\t\t\t shadow: true,\n\t\t\t align: 'b',\n\t\t\t anchor: this.getTargetEl()\t\t\t\n\t\t})\n\t\tExt.toast(config);\n\t},\n\n\t/**\n\t * Checks to see if we have access to this corpus, first by checking the application's\n\t * access setting for the corpus, then by checking the corpus setting.\n\t * @private\n\t */\n\thasCorpusAccess: function(corpus) {\n\t\tvar app = this.getApplication();\n\t\tvar corpusAccess = app.getCorpusAccess();  // undefined: corpus is unprotected, ACCESS: user entered the access password, ADMIN: user entered there admin password, LIMITED: no password entered\n\t\tif (corpusAccess === 'ADMIN' || corpusAccess === 'ACCESS') return true;\n\t\tif (!corpus) {\n\t\t\tcorpus = this.getCorpus();\n\t\t\tif (!corpus) {\n\t\t\t\tcorpus = app.getCorpus();\n\t\t\t}\n\t\t}\n\t\treturn corpus.getNoPasswordAccess() === 'NORMAL'; // NORMAL: corpus is unprotected, NONE: corpus cannot be accessed except by password, NONCONSUMPTIVE: limited access without password\n\t},\n\t\n\t/**\n\t * Checks to see if the user can modify the corpus.\n\t * @private\n\t */\n\thasModifyCorpusAccess: function(corpus) {\n\t\tvar allowDownload = this.getApplication().getAllowDownload();\n\t\tif (!allowDownload) return false;\n\n\t\tvar allowInput = this.getApplication().getAllowInput();\n\t\tif (!allowInput) return false;\n\n\t\tvar corpusAccess = this.getApplication().getCorpusAccess();\n\t\tvar noPasswordAccess = corpus.getNoPasswordAccess();\n\t\t\n\t\tvar canModify = (corpusAccess === undefined && noPasswordAccess === 'NORMAL') || corpusAccess === 'ADMIN';\n\t\t\n\t\treturn canModify;\n\t}\n});","\nExt.define('Voyant.panel.VoyantTabPanel', {\n\textend: 'Ext.tab.Panel',\n\talias: 'widget.voyanttabpanel',\n\tmixins: ['Voyant.panel.Panel'],\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconstructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\tinitComponent: function() {\n    \tthis.callParent(arguments);\n\t},\n\tlisteners: {\n\t\ttabchange: function(panel, newTab) {\n\t\t\tthis.tools = [];\n\t\t\tthis.getHeader().tools = [];\n\t\t\tthis.query(\"toolmenu\").forEach(function(toolMenu) {\n\t\t\t\ttoolMenu.destroy();\n\t\t\t})\n\t\t\tthis.addTool(newTab.tools)\n\t\t\tthis.getApplication().dispatchEvent(\"panelChange\", this)\n\t\t},\n\t\tafterrender: function(panel) {\n\t\t\tthis.fireEvent(\"tabchange\", this, this.getActiveTab())\n\t\t}\n\t},\n\tshowOptionsClick: function(panel) {\n\t\tvar tab = panel.getActiveTab();\n\t\tif (tab.showOptionsClick) {\n\t\t\ttab.showOptionsClick.apply(tab, arguments)\n\t\t}\n\t}\n});","Ext.define('Voyant.widget.Facet', {\n\textend: 'Ext.grid.Panel',\n    mixins: ['Voyant.panel.Panel'],\n    alias: 'widget.facet',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tstopList: 'auto',\n\t\t\tquery: undefined\n\t\t}\n\t},\n\t\n\tconstructor: function(config) {\n        this.callParent(arguments);\n        Ext.applyIf(config || {}, {\n        \tincludeTools: [], // don't show tools in header\n        \trowLines: false,\n\t\t\tsubtitle: undefined\n        });\n        this.mixins['Voyant.panel.Panel'].constructor.apply(this, [config]);\n\t},\n\t\n\trowLines: false,\n\t\n    initComponent: function(){\n\n    \tvar me = this;\n    \tif (!this.store) {\n    \t\tthis.store = new Ext.create(\"Voyant.data.store.CorpusFacets\", {\n    \t\t\tproxy: {\n    \t\t\t\textraParams: {\n    \t\t\t\t\tfacet: this.facet\n    \t\t\t\t}\n    \t\t\t},\n    \t\t\tparentPanel: this\n    \t\t})\n    \t\tthis.store.getProxy().on(\"exception\", function(proxy, request, operation, eOpts) {\n\t\t    \tme.showResponseError(\"Unable to fetch facet: \"+me.facet, request);\n    \t\t})\n    \t}\n    \t\n        Ext.applyIf(this, {\n        \temptyText: this.localize(\"emptyText\"),\n        \thideHeaders: true,\n        \tselType: 'checkboxmodel',\n        \tcolumns: [\n\t\t\t\t{ renderer: function(value, metaData, record) {return \"(\"+record.getInDocumentsCount()+\") \"+record.getLabel()}, flex: 1 }\n        \t]\n        });\n        this.callParent();\n        \n        if (this.corpus) {\n        \tthis.setStoreCorpus(this.corpus);\n        }\n        \n        this.on('loadedCorpus', function(src, corpus) {\n        \tthis.setStoreCorpus(corpus);\n        }, this);\n        \n        this.on(\"query\", function(src, query) {\n        \tthis.setApiParam(\"query\", query);\n        \t// not getting set from beforeload, so set params here\n        \tthis.store.load({\n        \t\tparams: this.getApiParams()\n        \t})\n        })\n    },\n    \n    setStoreCorpus: function(corpus) {\n//    \tthis.callParent(arguments)\n    \tif (this.getStore()) {\n        \tthis.getStore().setCorpus(corpus);\n        \tthis.getStore().load();\n    \t}\n    }\n});\n","// assuming Bubblelines library is loaded by containing page (via voyant.jsp)\n/**\n * Bubbles is a playful visualization of term frequencies by document.\n *\n * @example\n *\n * let config = {\n * \taudio: false, // whether or not to include audio\n * \tdocIndex: 1, // document index to restrict to (can be comma-separated list)\n * \tspeed: 10, // speed of the animation (0 to 60 lower is slower)\n * \tstopList: null, // a named stopword list or comma-separated list of words\n * };\n *\n * loadCorpus(\"austen\").tool(\"bubbles\", config);\n *\n * @class Bubbles\n * @tutorial bubbles\n * @memberof Tools\n */\nExt.define('Voyant.panel.Bubbles', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.bubbles',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t/**\n\t\t\t * @memberof Tools.Bubbles\n    \t\t * @instance\n    \t\t * @property {stopList}\n\t\t\t * @default\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n\t\t\t/**\n\t\t\t * @memberof Tools.Bubbles\n\t\t\t * @instance\n\t\t\t * @property {docIndex}\n\t\t\t */\n    \t\tdocIndex: 0,\n    \t\t\n\t\t\t/**\n\t\t\t * @memberof Tools.Bubbles\n\t\t\t * @instance\n\t\t\t * @property {limit}\n\t\t\t * @default\n\t\t\t */\n    \t\tlimit: 100,\n    \t\t\n\t\t\t/**\n\t\t\t * @memberof Tools.Bubbles\n\t\t\t * @instance\n\t\t\t * @property {Boolean} audio Whether or not to play audio\n\t\t\t * @default\n\t\t\t */\n    \t\taudio: false,\n    \t\t\n\t\t\t/**\n\t\t\t * @memberof Tools.Bubbles\n\t\t\t * @instance\n\t\t\t * @property {Number} speed How fast to play the visualization\n\t\t\t * @default\n\t\t\t */\n    \t\tspeed: 30\n    \t\t\t\n    \t\t\t\n    \t},\n    \tglyph: 'xf06e@FontAwesome'\n\t},\n\tconfig: {\n    \toptions: {xtype: 'stoplistoption'},\n    \taudio: false\n\t},\n\t\n\tcorpusLoaded: false,\n\tprocessingLoaded: false,\n\tbubblesAppCode: undefined,\n\t\n\tbubbles: undefined,\n\toscillator: undefined,\n\tgainNode: undefined,\n\t\n\t\n    constructor: function() {\n\n    \tthis.mixins['Voyant.util.Localization'].constructor.apply(this, arguments);\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n\t\t\thtml: '<canvas style=\"width: 100%; height: 100%\"></canvas>',\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n\t            \txtype: 'documentselectorbutton',\n\t            \tsingleSelect: true\n\t            },{\n\t\t\t\t\txtype: 'slider',\n\t\t\t\t\tfieldLabel: this.localize('speed'),\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tlabelWidth: 40,\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tincrement: 1,\n\t\t\t\t\tminValue: 1,\n\t\t\t\t\tmaxValue: 60,\n\t\t\t\t\tvalue: 30,\n\t\t\t\t\tlisteners: {\n\t                \trender: function(cmp) {\n\t                \t\tcmp.setValue(parseInt(this.getApiParam(\"speed\")));\n\t                \t\tif (this.bubbles) {this.bubbles.frameRate(cmp.getValue())}\n\t                \t\tthis.setAudio(cmp.getValue());\n\t    \t\t        \tExt.tip.QuickTipManager.register({\n\t    \t\t        \t\ttarget: cmp.getEl(),\n\t   \t\t                 \ttext: this.localize('speedTip')\n\t    \t\t        \t});\n\t                \t\t\n\t                \t},\n\t                \tbeforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n\t                    changecomplete: function(cmp, val) {\n\t                    \tthis.setApiParam('speed', val);\n\t                \t\tif (this.bubbles) {this.bubbles.frameRate(val)}\n\t                    },\n\t                    scope: this\n\t\t\t\t\t}\n\t\t\t\t},{\n\t                xtype: 'checkbox',\n\t                boxLabel: this.localize('sound'),\n\t                listeners: {\n\t                \trender: function(cmp) {\n\t                \t\tcmp.setValue(this.getApiParam(\"audio\")===true ||  this.getApiParam(\"audio\")==\"true\");\n\t                \t\tthis.setAudio(cmp.getValue());\n\t    \t\t        \tExt.tip.QuickTipManager.register({\n\t    \t\t        \t\ttarget: cmp.getEl(),\n\t   \t\t                 \ttext: this.localize('soundTip')\n\t    \t\t        \t});\n\t                \t\t\n\t                \t},\n\t                \tbeforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n\t                    change: function(cmp, val) {\n\t                    \tthis.setApiParam('audio', val);\n\t                    \tthis.setAudio(val);\n\t                    },\n\t                    scope: this\n\t                }\n\t            },{xtype: 'tbfill'}, {\n\t    \t\t\txtype: 'tbtext',\n\t    \t\t\thtml: this.localize('adaptation') //https://www.m-i-b.com.ar/letters/en/\n\t    \t\t}]\n    \t\t}]\n    \t});\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n\t\tthis.on('boxready', function() {\n\t\t\tthis.loadBubbles();\n\t\t})\n\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tthis.corpusLoaded = true;\n\t\t\tif (this.bubbles) {\n\t\t\t\tthis.loadDocument();\n\t\t\t} else {\n\t\t\t\tthis.loadBubbles();\n\t\t\t}\n    \t}, this);\n    \t\n    \tthis.on(\"resize\", function() {\n    \t\tif (this.bubbles) {\n    \t\t\tthis.bubbles.size(this.body.getWidth(),this.body.getHeight());\n    \t\t}\n    \t});\n    \t\n    \tthis.on(\"documentselected\", function(src, doc) {\n    \t\tthis.setApiParam('docIndex', this.getCorpus().getDocument(doc).getIndex());\n    \t\tthis.loadDocument();\n    \t})\n    },\n    \n    setAudio: function(val) {\n    \tif (this.gainNode) {this.gainNode.gain.value=val ? 1 : 0;}\n    \tthis.callParent(arguments)\n    },\n\n    handleCurrentTerm: function(term) {\n    \tif (this.oscillator) {this.oscillator.frequency.value = this.terms[term] ? parseInt((this.terms[term]-this.minFreq) * 2000 / (this.maxFreq-this.minFreq)) : 0;}\n    },\n    \n    handleDocFinished: function() {\n    \tif (this.gainNode) {this.gainNode.gain.value = 0;}\n    \tvar index = parseInt(this.getApiParam('docIndex'));\n    \tif (index+1<this.getCorpus().getDocumentsCount()) {\n    \t\tthis.setApiParam('docIndex', index+1);\n    \t\tthis.loadDocument();\n    \t}\n    },\n    \n    loadDocument: function() {\n    \tvar me = this, doc = this.getCorpus().getDocument(parseInt(this.getApiParam('docIndex')));\n    \t// if we're not in a tab panel, set the document title as part of the header\n    \tif (!this.up(\"tabpanel\")) {\n        \tthis.setTitle(this.localize('title') + \" <span class='subtitle'>\"+doc.getFullLabel()+\"</span>\");\n    \t}\n\n    \tdoc.loadDocumentTerms(Ext.apply(this.getApiParams([\"stopList\"]), {\n    \t\tlimit: 100\n    \t})).then(function(documentTerms) {\n    \t\tme.terms = {};\n    \t\tdocumentTerms.each(function(documentTerm) {\n    \t\t\tme.terms[documentTerm.getTerm()] = documentTerm.getRawFreq();\n    \t\t})\n    \t\tvar values = Object.keys(me.terms).map(function(k){return me.terms[k]});\n    \t\tme.minFreq = Ext.Array.min(values);\n    \t\tme.maxFreq = Ext.Array.max(values);\n    \t\tme.getCorpus().loadTokens({whiteList: Object.keys(me.terms), noOthers: true, limit: 0, docIndex: me.getApiParam('docIndex')}).then(function(tokens) {\n    \t\t\tvar words = [];\n        \t\ttokens.each(function(token) {\n    \t\t\t\twords.push(token.getTerm().toLowerCase());\n        \t\t})\n        \t\tme.bubbles.setLines([doc.getTitle(),words.join(\" \")]);\n        \t\tme.bubbles.loop();\n        \t\tme.oscillator.frequency.value = 150;\n        \t\tme.gainNode.gain.value = me.getAudio() ? 1 : 0;\n    \t\t})\n    \t})\n    },\n\n\tloadBubbles: function() {\n\t\tif (this.bubbles === undefined && this.processingLoaded && this.bubblesAppCode !== undefined && this.getTargetEl() !== undefined) {\n\t\t\tvar canvas = this.getTargetEl().dom.querySelector('canvas');\n\t\t\tthis.bubbles = new Processing(canvas, this.bubblesAppCode);\n\t\t\tthis.bubbles.size(this.getTargetEl().getWidth(),this.getTargetEl().getHeight());\n\t\t\tthis.bubbles.frameRate(this.getApiParam('speed'));\n\t\t\tthis.bubbles.bindJavascript(this);\n\t\t\tthis.bubbles.noLoop();\n\t\t\t\n\t\t\tthis.bubblesAppCode = undefined;\n\n\t\t\tif (this.corpusLoaded) {\n\t\t\t\tthis.loadDocument();\n\t\t\t}\n\t\t}\n\t},\n    \n    initComponent: function() {\n    \t// make sure to load script\n\t\tExt.Loader.loadScript({\n\t\t\turl: this.getBaseUrl()+\"resources/processingjs/processing.min.js\",\n\t\t\tonLoad: function() {\n\t\t\t\tthis.processingLoaded = true;\n\t\t\t\tthis.loadBubbles();\n\t\t\t},\n\t\t\tscope: this\n\t\t});\n\n\t\tExt.Ajax.request({\n\t\t\turl: this.getBaseUrl()+'resources/bubbles/bubbles.pjs',\n\t\t\tsuccess: function(data) {\n\t\t\t\tthis.bubblesAppCode = data.responseText;\n\t\t\t\tthis.loadBubbles();\n\t\t\t},\n\t\t\tscope: this\n\t\t})\n\t\t\n\t\tvar audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n\t\t\n\t\tthis.oscillator = audioCtx.createOscillator();\n\t\tthis.gainNode = audioCtx.createGain();\n\t\tthis.oscillator.connect(this.gainNode);\n\t\tthis.gainNode.connect(audioCtx.destination);\n\t\tthis.oscillator.frequency.value = 0;\n\t\tthis.oscillator.start();\n\t\tthis.gainNode.gain.value = 0;\n\n    \tthis.callParent(arguments);\n    }\n});","// assuming Bubblelines library is loaded by containing page (via voyant.jsp)\r\n/**\r\n * Bubblelines visualizes the frequency and distribution of terms in a corpus.\r\n *\r\n * @example\r\n *\r\n * let config = {\r\n * \tbins: 5, // number of bins to separate a document into\r\n * \tdocIndex: 1, //document index to restrict to (can be comma-separated list)\r\n * \tmaxDocs: 5, // maximum number of documents to show\r\n * \tquery: \"love\", // a query to search for in the corpus\r\n * \tstopList: null, // a named stopword list or comma-separated list of words\r\n * };\r\n *\r\n * loadCorpus(\"austen\").tool(\"bubblelines\", config);\r\n *\r\n * @class Bubblelines\r\n * @tutorial bubblelines\r\n * @memberof Tools\r\n */\r\nExt.define('Voyant.panel.Bubblelines', {\r\n\textend: 'Ext.panel.Panel',\r\n\tmixins: ['Voyant.panel.Panel'],\r\n\talias: 'widget.bubblelines',\r\n    statics: {\r\n    \ti18n: {\r\n    \t},\r\n    \tapi: {\r\n    \t\t/**\r\n\t\t\t * @memberof Tools.Bubblelines\r\n    \t\t * @instance\r\n    \t\t * @property {bins}\r\n\t\t\t * @default\r\n    \t\t */\r\n    \t\tbins: 50,\r\n\r\n        \t/**\r\n\t\t\t * @memberof Tools.Bubblelines\r\n        \t * @instance\r\n        \t * @property {query}\r\n        \t */\r\n    \t\tquery: null,\r\n    \t\t\r\n    \t\t/**\r\n\t\t\t * @memberof Tools.Bubblelines\r\n    \t\t * @instance\r\n    \t\t * @property {stopList}\r\n\t\t\t * @default\r\n    \t\t */\r\n    \t\tstopList: 'auto',\r\n\r\n    \t\t/**\r\n\t\t\t * @memberof Tools.Bubblelines\r\n    \t\t * @instance\r\n    \t\t * @property {docId}\r\n    \t\t */\r\n    \t\tdocId: undefined,\r\n\r\n    \t\t/**\r\n\t\t\t * @memberof Tools.Bubblelines\r\n    \t\t * @instance\r\n    \t\t * @property {docIndex}\r\n    \t\t */\r\n    \t\tdocIndex: undefined,\r\n\r\n    \t\t/**\r\n\t\t\t * @memberof Tools.Bubblelines\r\n    \t\t * @instance\r\n    \t\t * @property {Number} maxDocs The maximum number of documents to show.\r\n    \t\t * @default\r\n    \t\t */\r\n    \t\tmaxDocs: 50\r\n    \t},\r\n    \tglyph: 'xf06e@FontAwesome'\r\n\t},\r\n\tconfig: {\r\n\t\tbubblelines: undefined,\r\n\t\ttermStore: undefined,\r\n\t\tdocTermStore: undefined,\r\n\t\tselectedDocs: undefined,\r\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'},{xtype: 'colorpaletteoption'}]\r\n\t},\r\n\t\r\n\ttermTpl: new Ext.XTemplate(\r\n\t\t'<tpl for=\".\">',\r\n\t\t\t'<div class=\"term\" style=\"color: rgb({color});float: left;padding: 3px;margin: 2px;\">{term}</div>',\r\n\t\t'</tpl>'\r\n\t),\r\n    \r\n    constructor: function() {\r\n        this.callParent(arguments);\r\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\r\n    \t\r\n    \tthis.on('loadedCorpus', function(src, corpus) {\r\n    \t\tthis.setDocTermStore(corpus.getDocumentTerms({\r\n    \t\t\tproxy: {\r\n\t    \t\t\textraParams: {\r\n\t\t\t\t\t\twithDistributions: 'raw',\r\n\t\t\t\t\t\twithPositions: true\r\n\t\t\t\t\t}\r\n    \t\t\t},\r\n\t\t\t\tlisteners: {\r\n\t   \t\t    \t load: function(store, records, successful, options) {\r\n\t   \t\t    \t\trecords.forEach(function(record) {\r\n\t   \t\t    \t\t\tvar termData = this.processTerms(record);\r\n\t   \t\t    \t\t\tvar docId = record.get('docId');\r\n\t   \t\t    \t\t\tvar term = record.get('term');\r\n\t   \t\t    \t\t\tvar termObj = {};\r\n\t   \t\t    \t\t\ttermObj[term] = termData;\r\n\t   \t\t    \t\t\tthis.getBubblelines().addTermsToDoc(termObj, docId);\r\n\t   \t\t    \t\t}, this);\r\n\t   \t\t    \t\tthis.getBubblelines().doBubblelinesLayout();\r\n\t   \t\t\t\t},\r\n\t   \t\t\t\tscope: this\r\n\t   \t\t     }\r\n    \t\t}));\r\n    \t\t\r\n    \t\tif (this.isVisible() && this.getBubblelines()) {\r\n    \t\t\tthis.initLoad();\r\n    \t\t}\r\n    \t}, this);\r\n    \t\r\n        this.on('activate', function() { // load after tab activate (if we're in a tab panel)\r\n        \tif (this.getCorpus()) {\r\n\t\t\t\tExt.Function.defer(this.initLoad, 100, this);\r\n\t\t\t}\r\n    \t}, this);\r\n        \r\n        this.on('query', function(src, query) {\r\n    \t\tif (query !== undefined && query != '') {\r\n    \t\t\tthis.getDocTermsFromQuery(query);\r\n    \t\t}\r\n    \t}, this);\r\n        \r\n        this.on('documentsSelected', function(src, docIds) {\r\n        \tthis.setApiParam('docId', docIds);\r\n        \tthis.getBubblelines().cache.each(function(d) {\r\n        \t\td.hidden = docIds.indexOf(d.id) === -1;\r\n        \t});\r\n        \tthis.getBubblelines().drawGraph();\r\n        }, this);\r\n    \t\r\n    \tthis.on('termsClicked', function(src, terms) {\r\n    \t\tif (src !== this) {\r\n\t    \t\tvar queryTerms = [];\r\n\t    \t\tterms.forEach(function(term) {\r\n        \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\r\n        \t\t\telse if (term.term) {queryTerms.push(term.term);}\r\n        \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\r\n        \t\t});\r\n\t    \t\tthis.getDocTermsFromQuery(queryTerms);\r\n    \t\t}\r\n\t\t}, this);\r\n    \t\r\n    \tthis.on('documentTermsClicked', function(src, terms) {\r\n    \t\tvar queryTerms = [];\r\n    \t\tterms.forEach(function(term) {\r\n    \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\r\n    \t\t});\r\n    \t\tthis.getDocTermsFromQuery(queryTerms);\r\n    \t}, this);\r\n    \t\r\n    \tthis.down('#granularity').setValue(parseInt(this.getApiParam('bins')));\r\n    },\r\n    \r\n    initComponent: function() {\r\n    \tthis.setTermStore(Ext.create('Ext.data.ArrayStore', {\r\n            fields: ['term', 'color'],\r\n            listeners: {\r\n            \tload: function(store, records, successful, options) {\r\n            \t\tvar termsView = this.down('#termsView');\r\n            \t\tfor (var i = 0; i < records.length; i++) {\r\n            \t\t\tvar r = records[i];\r\n            \t\t\ttermsView.select(r, true);\r\n            \t\t}\r\n            \t},\r\n            \tscope: this\r\n            }\r\n        }));\r\n    \t\r\n    \tExt.apply(this, {\r\n    \t\ttitle: this.localize('title'),\r\n    \t\tdockedItems: [{\r\n                dock: 'bottom',\r\n                xtype: 'toolbar',\r\n                overflowHandler: 'scroller',\r\n                items: [{\r\n                \txtype: 'querysearchfield'\r\n                },{\r\n\t            \ttext: this.localize('clearTerms'),\r\n\t\t\t\t\tglyph: 'xf014@FontAwesome',\r\n\t            \thandler: function() {\r\n\t            \t\tthis.down('#termsView').getSelectionModel().deselectAll(true);\r\n\t            \t\tthis.getTermStore().removeAll();\r\n\t            \t\tthis.setApiParams({query: null});\r\n\t            \t\tthis.getBubblelines().removeAllTerms();\r\n\t            \t\tthis.getBubblelines().drawGraph();\r\n\t            \t},\r\n\t            \tscope: this                \t\t\t\r\n        \t\t},{\r\n\t            \txtype: 'documentselectorbutton'\r\n        \t\t},{\r\n\t            \txtype: 'slider',\r\n\t            \titemId: 'granularity',\r\n\t            \tfieldLabel: this.localize('granularity'),\r\n\t            \tlabelAlign: 'right',\r\n\t            \tlabelWidth: 70,\r\n\t            \twidth: 150,\r\n\t            \tincrement: 10,\r\n\t            \tminValue: 10,\r\n\t            \tmaxValue: 300,\r\n\t            \tlisteners: {\r\n\t            \t\tchangecomplete: function(slider, newvalue) {\r\n\t            \t\t\tthis.setApiParams({bins: newvalue});\r\n\t            \t\t\tthis.getBubblelines().bubbleSpacing = newvalue;\r\n\t            \t\t\tthis.reloadTermsData();\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n\t            },{\r\n\t            \txtype: 'checkbox',\r\n\t            \tboxLabel: this.localize('separateLines'),\r\n\t            \tboxLabelAlign: 'before',\r\n\t            \tchecked: false,\r\n\t            \thandler: function(checkbox, checked) {\r\n\t            \t\tthis.getBubblelines().SEPARATE_LINES_FOR_TERMS = checked;\r\n\t            \t\tthis.getBubblelines().lastClickedBubbles = {};\r\n\t            \t\tthis.getBubblelines().setCanvasHeight();\r\n\t    \t\t\t\tthis.getBubblelines().drawGraph();\r\n\t            \t},\r\n\t            \tscope: this\r\n\t            \t\r\n\t            }]\r\n    \t\t}],\r\n            border: false,\r\n            layout: 'fit',\r\n            items: {\r\n            \tlayout: {\r\n            \t\ttype: 'vbox',\r\n            \t\talign: 'stretch'\r\n            \t},\r\n            \tdefaults: {border: false},\r\n\t            items: [{\r\n\t            \theight: 30,\r\n\t            \titemId: 'termsView',\r\n\t            \txtype: 'dataview',\r\n\t            \tstore: this.getTermStore(),\r\n\t            \ttpl: this.termTpl,\r\n\t            \titemSelector: 'div.term',\r\n\t            \toverItemCls: 'over',\r\n\t            \tselectedItemCls: 'selected',\r\n\t            \tselectionModel: {\r\n\t            \t\tmode: 'SIMPLE'\r\n\t            \t},\r\n//\t            \tcls: 'selected', // default selected\r\n\t            \tfocusCls: '',\r\n\t            \tlisteners: {\r\n\t            \t\tbeforeitemclick: function(dv, record, item, index, event, opts) {\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\tdv.fireEvent('itemcontextmenu', dv, record, item, index, event, opts);\r\n\t            \t\t\treturn false;\r\n\t            \t\t},\r\n\t            \t\tbeforecontainerclick: function() {\r\n\t            \t\t\t// cancel deselect all\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\treturn false;\r\n\t            \t\t},\r\n\t            \t\tselectionchange: function(selModel, selections) {\r\n\t            \t\t\tvar dv = this.down('#termsView');\r\n\t            \t\t\tvar terms = [];\r\n\t            \t\t\t\r\n\t            \t\t\tdv.getStore().each(function(r) {\r\n\t            \t\t\t\tif (selections.indexOf(r) !== -1) {\r\n\t            \t\t\t\t\tterms.push(r.get('term'));\r\n\t            \t\t\t\t\tExt.fly(dv.getNodeByRecord(r)).removeCls('unselected').addCls('selected');\r\n\t            \t\t\t\t} else {\r\n\t            \t\t\t\t\tExt.fly(dv.getNodeByRecord(r)).removeCls('selected').addCls('unselected');\r\n\t            \t\t\t\t}\r\n\t            \t\t\t});\r\n\t            \t\t\t\r\n\t            \t\t\tfor (var index in this.getBubblelines().lastClickedBubbles) {\r\n\t            \t\t\t\tvar lcTerms = this.getBubblelines().lastClickedBubbles[index];\r\n\t            \t\t\t\tfor (var term in lcTerms) {\r\n\t            \t\t\t\t\tif (terms.indexOf(term) == -1) {\r\n\t            \t\t\t\t\t\tdelete this.getBubblelines().lastClickedBubbles[index][term];\r\n\t            \t\t\t\t\t}\r\n\t            \t\t\t\t}\r\n\t            \t\t\t\t\r\n\t            \t\t\t}\r\n\t            \t\t\tthis.getBubblelines().termsFilter = terms;\r\n\t            \t\t\tthis.getBubblelines().setCanvasHeight();\r\n\t            \t\t\tthis.getBubblelines().drawGraph();\r\n\t            \t\t},\r\n\t            \t\titemcontextmenu: function(dv, record, el, index, event) {\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\tvar isSelected = dv.isSelected(el);\r\n\t            \t\t\tvar menu = new Ext.menu.Menu({\r\n\t            \t\t\t\tfloating: true,\r\n\t            \t\t\t\titems: [{\r\n\t            \t\t\t\t\ttext: isSelected ? this.localize('hideTerm') : this.localize('showTerm'),\r\n\t            \t\t\t\t\thandler: function() {\r\n\t            \t\t\t\t\t\tif (isSelected) {\r\n\t            \t\t\t\t\t\t\tdv.deselect(index);\r\n\t            \t\t\t\t\t\t} else {\r\n\t            \t\t\t\t\t\t\tdv.select(index, true);\r\n\t            \t\t\t\t\t\t}\r\n\t            \t\t\t\t\t},\r\n\t            \t\t\t\t\tscope: this\r\n\t            \t\t\t\t},{\r\n\t            \t\t\t\t\ttext: this.localize('removeTerm'),\r\n\t            \t\t\t\t\thandler: function() {\r\n\t            \t\t\t\t\t\tdv.deselect(index);\r\n\t            \t\t\t\t\t\tvar term = this.getTermStore().getAt(index).get('term');\r\n\t            \t\t\t\t\t\tthis.getTermStore().removeAt(index);\r\n\t            \t\t\t\t\t\tdv.refresh();\r\n\t            \t\t\t\t\t\t\r\n\t            \t\t\t\t\t\tthis.getBubblelines().removeTerm(term);\r\n\t            \t\t\t\t\t\tthis.getBubblelines().setCanvasHeight();\r\n\t            \t\t\t\t\t\tthis.getBubblelines().drawGraph();\r\n\t            \t\t\t\t\t},\r\n\t            \t\t\t\t\tscope: this\r\n\t            \t\t\t\t}]\r\n\t            \t\t\t});\r\n\t            \t\t\tmenu.showAt(event.getXY());\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n\t            },{\r\n\t            \tflex: 1,\r\n\t            \txtype: 'container',\r\n\t            \tautoEl: 'div',\r\n\t            \titemId: 'canvasParent',\r\n\t            \tlayout: 'fit',\r\n\t            \toverflowY: 'auto',\r\n\t            \toverflowX: 'hidden'\r\n\t            }],\r\n\t            listeners: {\r\n\t            \trender: function(component) {\r\n\t            \t\tvar canvasParent = this.down('#canvasParent');\r\n\t                \tthis.setBubblelines(new Bubblelines({\r\n\t                \t\tcontainer: canvasParent,\r\n\t                \t\tclickHandler: this.bubbleClickHandler.bind(this)\r\n\t                \t}));\r\n\t                \tthis.getBubblelines().bubbleSpacing = parseInt(this.getApiParam('bins'));\r\n\t            \t},\r\n            \t\tafterlayout: function(container) {\r\n            \t\t\tif (this.getBubblelines().initialized === false) {\r\n            \t\t\t\tthis.getBubblelines().initializeCanvas();\r\n            \t\t\t}\r\n            \t\t},\r\n\t        \t\tresize: function(cnt, width, height) {\r\n\t        \t\t\tthis.getBubblelines().doBubblelinesLayout();\r\n\t        \t\t},\r\n            \t\tscope: this\r\n            \t}\r\n            }\r\n\t\t});\r\n    \t\r\n    \tthis.callParent(arguments);\r\n    },\r\n    \r\n    initLoad: function() {\r\n    \t// get doc info\r\n    \tvar docIds = [];\r\n\t\tthis.getCorpus().getDocuments().each(function(doc, index, total) {\r\n\t\t\tvar inLimit = index < this.getApiParam('maxDocs');\r\n\t\t\tthis.getBubblelines().addDocToCache({\r\n\t\t\t\tid: doc.getId(),\r\n\t\t\t\tindex: doc.getIndex(),\r\n\t\t\t\ttitle: doc.getShortTitle(),\r\n\t\t\t\ttotalTokens: doc.get('tokensCount-lexical'),\r\n\t\t\t\tterms: {},\r\n\t\t\t\thidden: !inLimit\r\n\t\t\t});\r\n\t\t\tif (inLimit) {\r\n\t\t\t\tdocIds.push(doc.getId());\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\tthis.setApiParam('docId', docIds);\r\n\t\t\r\n\t\t// get top terms in corpus\r\n\t\tthis.getCorpus().getCorpusTerms({autoload: false}).load({\r\n\t\t\tcallback: function(records, operation, success) {\r\n\t\t    \tvar query = [];\r\n\t\t    \trecords.forEach(function(record, index) {\r\n\t\t\t\t\tquery.push(record.get('term'));\r\n\t\t\t\t}, this);\r\n\t\t    \tthis.getDocTermsFromQuery(query);\r\n\t\t    },\r\n\t\t    scope: this,\r\n\t\t    params: {\r\n\t\t    \tlimit: this.getApiParam('query') ? undefined : 5,\r\n\t\t    \tstopList: this.getApiParams('stopList'),\r\n\t\t    \tquery: this.getApiParam('query')\r\n\t\t    }\r\n\t\t});\r\n    },\r\n    \r\n    /**\r\n     * Get the results for the query(s) for each of the corpus documents.\r\n     * @param query {String|Array}\r\n\t * @private\r\n     */\r\n    getDocTermsFromQuery: function(query) {\r\n    \tif (query) {this.setApiParam('query', query);} // make sure it's set for subsequent calls\r\n    \tif (this.getCorpus() && this.isVisible()) {\r\n\t\t\tthis.getDocTermStore().load({params: this.getApiParams()});\r\n    \t}\r\n\t},\r\n    \r\n\treloadTermsData: function() {\r\n\t\tvar terms = [];\r\n\t\tfor (var term in this.getBubblelines().currentTerms) {\r\n\t\t\tterms.push(term);\r\n\t\t}\r\n\t\tthis.getDocTermsFromQuery(terms);\r\n\t},\r\n\t\r\n    filterDocuments: function() {\r\n\t\tvar docIds = this.getApiParam('docId');\r\n\t\tif (docIds == '') {\r\n\t\t\tdocIds = [];\r\n\t\t\tthis.getCorpus().getDocuments().each(function(item, index) {\r\n\t\t\t\tdocIds.push(item.getId());\r\n\t\t\t});\r\n\t\t\tthis.setApiParams({docId: docIds});\r\n\t\t}\r\n\t\tif (typeof docIds == 'string') docIds = [docIds];\r\n\t\t\r\n\t\tif (docIds == null) {\r\n\t\t\tthis.setSelectedDocs(this.getCorpus().getDocuments().clone());\r\n\t\t\tvar count = this.getSelectedDocs().getCount();\r\n\t\t\tif (count > 10) {\r\n\t\t\t\tfor (var i = 10; i < count; i++) {\r\n\t\t\t\t\tthis.getSelectedDocs().removeAt(10);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdocIds = [];\r\n\t\t\tthis.getSelectedDocs().eachKey(function(docId, doc) {\r\n\t\t\t\tdocIds.push(docId);\r\n\t\t\t}, this);\r\n\t\t\tthis.setApiParams({docId: docIds});\r\n\t\t} else {\r\n\t\t\tthis.setSelectedDocs(this.getCorpus().getDocuments().filterBy(function(doc, docId) {\r\n\t\t\t\treturn docIds.indexOf(docId) != -1;\r\n\t\t\t}, this));\r\n\t\t}\r\n\t},\r\n\t\r\n\tprocessTerms: function(termRecord) {\r\n\t\tvar termObj;\r\n\t\tvar term = termRecord.get('term');\r\n\t\tvar rawFreq = termRecord.get('rawFreq');\r\n\t\tvar positions = termRecord.get('positions');\r\n\t\tif (rawFreq > 0) {\r\n\t\t\tvar color = this.getApplication().getColorForTerm(term);\r\n\t\t\tif (this.getTermStore().find('term', term) === -1) {\r\n\t\t\t\tthis.getTermStore().loadData([[term, color]], true);\r\n\t\t\t\tvar index = this.getTermStore().find('term', term);\r\n\t\t\t\tthis.down('#termsView').select(index, true); // manually select since the store's load listener isn't triggered\r\n\t\t\t}\r\n\t\t\tvar distributions = termRecord.get('distributions');\r\n\t\t\ttermObj = {positions: positions, distributions: distributions, rawFreq: rawFreq, color: color};\r\n\t\t} else {\r\n\t\t\ttermObj = false;\r\n\t\t}\r\n\t\t\r\n\t\treturn termObj;\r\n\t},\r\n\t\r\n\tbubbleClickHandler: function(data) {\r\n\t\tthis.getApplication().dispatchEvent('termsClicked', this, data);\r\n\t}\r\n});","Ext.define('Voyant.panel.Catalogue', {\n\textend: 'Ext.panel.Panel',\n\trequires: ['Voyant.widget.Facet'],\n\tmixins: ['Voyant.panel.Panel','Voyant.util.Downloadable'],\n\t\n\talias: 'widget.catalogue',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tconfig: undefined,\n    \t\tstopList: 'auto',\n    \t\tfacet: ['facet.title','facet.author','facet.language'],\n    \t\ttitle: undefined,\n    \t\tsplash: undefined,\n    \t\treader: \"reader\"\n    \t},\n\t\tglyph: 'xf1ea@FontAwesome'\n    },\n    config: {\n    \tfacets: {},\n    \tmatchingDocIds: [],\n    \tcustomResultsHtml: undefined\n    },\n    \n    constructor: function(config) {\n    \tconfig = config || {};\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // we need api\n\t\tExt.apply(this, {\n\t\t\ttitle: this.localize('title'),\n\t\t\tlayout: {\n\t\t\t\ttype: 'hbox',\n\t\t\t\talign: 'stretch'\n\t\t\t},\n\t\t\titems: [{\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\talign: 'stretch'\n\t\t\t\t},\n\t\t\t\titemId: 'facets',\n\t\t\t\tminWidth: 175,\n\t\t\t\twidth: 250,\n\t\t\t\tdefaults: {\n\t\t\t\t\twidth: 250,\n\t\t\t\t\tminHeight: 150,\n\t\t\t\t\tflex: 1,\n\t\t\t\t\txtype: 'facet',\n\t\t\t\t\tanimCollapse: false,\n\t\t\t\t\tcollapseFirst: false,\n\t\t\t\t\tincludeTools: {\n\t\t\t\t\t\tclose: {\n\t\t\t\t\t\t\ttype: 'close',\n\t\t\t\t\t\t\ttooltip: this.localize('closeFacetTip'),\n\t\t\t\t\t\t\tcallback: function(facetCmp) {\n\t\t\t\t\t\t\t\tdelete this.facets[facetCmp.facet]; // remove from facets map\n\t\t\t\t\t\t\t\tfacetCmp.destroy(); // remove this facet\n\t\t\t\t\t\t\t\tthis.updateResults();\n\t\t\t\t\t\t\t\tthis.adjustFacetHeights();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t},\n\t\t\t\t\t\tadd: {\n\t\t\t\t\t\t\ttype: 'plus',\n\t\t\t\t\t\t\ttooltip: this.localize('plusFacetTip'),\n\t\t\t\t\t\t\tcallback: function() {\n\t\t\t\t\t\t\t\tthis.addFacet();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\titems: []\n\t\t\t},{xtype: 'splitter'},{\n\t\t\t\thtml: config.customResultsHtml || '',\n\t\t\t\titemId: 'results',\n\t\t\t\tflex: 1,\n\t\t\t\tminWidth: 250,\n\t\t\t\tscrollable: true,\n\t\t\t\tmargin: 5,\n\t\t\t\tgetCorpus: function() { // for query search field\n\t\t\t\t\treturn this.findParentByType('panel').getCorpus();\n\t\t\t\t},\n\t\t\t\tlisteners: {\n\t\t\t\t\tquery: function(src, query) {\n\t\t\t\t\t\tthis.findParentByType('panel').updateResults(Ext.isString(query) ? [query] : query)\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdockedItems: [{\n\t\t\t\t\tdock: 'bottom',\n\t\t\t\t\txtype: 'toolbar',\n\t\t\t\t\toverflowHandler: 'scroller',\n\t\t\t\t\titems: [{\n\t\t\t\t\t\titemId: 'sendToVoyant',\n\t\t\t\t\t\ttext: this.localize('sendToVoyantButton'),\n\t\t\t\t\t\tdisabled: true,\n\t\t\t\t\t\thandler: function() {\n\t\t\t\t\t\t\tthis.mask(this.localize(\"exportInProgress\"));\n\t\t\t\t\t\t\tvar catalogue = this;\n\t\t\t\t\t\t\tExt.Ajax.request({\n\t\t\t\t\t\t\t\turl: this.getApplication().getTromboneUrl(),\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tcorpus: this.getCorpus().getId(),\n\t\t\t\t\t\t\t\t\ttool: 'corpus.CorpusManager',\n\t\t\t\t\t\t\t\t\tkeepDocuments: true,\n\t\t\t\t\t\t\t\t\tdocId: this.getMatchingDocIds()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsuccess: function(response, opts) {\n\t\t\t\t\t\t\t\t\tcatalogue.unmask();\n\t\t\t\t\t\t\t\t\tvar json = Ext.JSON.decode(response.responseText);\n\t\t\t\t\t\t\t\t\tvar url = catalogue.getBaseUrl()+\"?corpus=\"+json.corpus.id;\n\t\t\t\t\t\t\t\t\tcatalogue.openUrl(url);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfailure: function(response, opts) {\n\t\t\t\t\t\t\t\t\tcatalogue.unmask();\n\t\t\t\t\t\t\t\t\tcatalogue.showResponseError(\"Unable to export corpus: \"+catalogue.getCorpus().getId(), response);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t},{\n\t\t\t\t\t\titemId: 'export',\n\t\t\t\t\t\ttext: this.localize('downloadButton'),\n\t\t\t\t\t\tdisabled: true,\n\t\t\t\t\t\thandler: function() {\n\t\t\t\t\t\t\tthis.mask(this.localize(\"exportInProgress\"));\n\t\t\t\t\t\t\tvar catalogue = this;\n\t\t\t\t\t\t\tExt.Ajax.request({\n\t\t\t\t\t\t\t\turl: this.getApplication().getTromboneUrl(),\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tcorpus: this.getCorpus().getId(),\n\t\t\t\t\t\t\t\t\ttool: 'corpus.CorpusManager',\n\t\t\t\t\t\t\t\t\tkeepDocuments: true,\n\t\t\t\t\t\t\t\t\tdocId: this.getMatchingDocIds()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsuccess: function(response, opts) {\n\t\t\t\t\t\t\t\t\tcatalogue.unmask();\n\t\t\t\t\t\t\t\t\tvar json = Ext.JSON.decode(response.responseText);\n\t\t\t\t\t\t\t\t\tcatalogue.downloadFromCorpusId(json.corpus.id);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfailure: function(response, opts) {\n\t\t\t\t\t\t\t\t\tcatalogue.unmask();\n\t\t\t\t\t\t\t\t\tcatalogue.showResponseError(\"Unable to export corpus: \"+catalogue.getCorpus().getId(), response);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'querysearchfield',\n\t\t\t\t\t\twidth: 200,\n\t\t\t\t\t\tflex: 1\n\t\t\t\t\t},{\n\t\t\t\t\t\titemId: 'status',\n\t\t\t\t\t\txtype: 'tbtext'\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t},{xtype: 'splitter'},{\n\t\t\t\txtype: this.getApiParam(\"reader\"),\n\t\t\t\tflex: 1,\n\t\t\t\tminWidth: 250,\n\t\t\t\theader: false\n\t\t\t}]\n\t\t});\n\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n\t\t\tif (this.hasModifyCorpusAccess(corpus) === false) {\n\t\t\t\tthis.queryById('sendToVoyant').hide();\n\t\t\t\tthis.queryById('export').hide();\n\t\t\t}\n    \t\tthis.queryById('status').update(new Ext.XTemplate(this.localize('noMatches')).apply([corpus.getDocumentsCount()]))\n    \t\tif (!this.getCustomResultsHtml()) {\n    \t\t\tif (this.getApiParam(\"splash\")) {\n        \t\t\tthis.setCustomResultsHtml(this.getApiParam(\"splash\"));\n        \t\t\tthis.updateResults();\n        \t\t\treturn;\n    \t\t\t}\n    \t\t\tthis.setCustomResultsHtml(new Ext.XTemplate(this.localize('noMatches')).apply([corpus.getDocumentsCount()]));\n    \t\t\tthis.updateResults();\n    \t    \tExt.Ajax.request({\n    \t    \t    url: this.getTromboneUrl(),\n    \t    \t    params: {\n    \t        \t\ttool: 'resource.StoredResource',\n    \t        \t\tverifyResourceId: 'customhtml-'+corpus.getAliasOrId()\n    \t    \t    },\n    \t    \t    success: function(response, req) {\n    \t    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t    \t    \tif (json && json.storedResource && json.storedResource.id) {\n    \t        \t    \tExt.Ajax.request({\n    \t        \t    \t    url: this.getTromboneUrl(),\n    \t        \t    \t    params: {\n    \t        \t        \t\ttool: 'resource.StoredResource',\n    \t        \t        \t\tretrieveResourceId: 'customhtml-'+corpus.getAliasOrId()\n    \t        \t    \t    },\n    \t        \t    \t    success: function(response, req) {\n    \t        \t    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t        \t    \t    \tif (json && json.storedResource && json.storedResource.resource) {\n    \t        \t    \t    \t\tthis.setCustomResultsHtml(json.storedResource.resource);\n    \t        \t    \t    \t\tthis.updateResults()\n    \t        \t    \t    \t}\n    \t        \t    \t    },\n    \t        \t    \t    scope: this\n    \t        \t    \t})\n    \t    \t    \t}\n    \t    \t    },\n    \t    \t    scope: this\n    \t    \t})\n\n    \t\t}\n    \t});\n    \t\n    \tthis.on('afterrender', function(panel) {\n    \t\tvar facetsCmp = this.queryById('facets');\n\t\t\tthis.addFacet({\n\t\t\t\tfacet: 'lexical',\n    \t\t\tincludeTools: {add: {\n        \t\t\ttype: 'plus',\n            \t\ttooltip: this.localize('plusFacetTip'),\n            \t\tcallback: function() {\n            \t\t\tthis.addFacet();\n            \t\t},\n            \t\tscope: this\n        \t\t}},\n\t\t\t\tstore: new Voyant.data.store.CorpusTerms({\n\t\t\t\t\tparentPanel: this,\n    \t\t\t\tproxy: {\n    \t\t\t\t\textraParams: {\n    \t    \t\t\t\tstopList: this.getApiParam(\"stopList\")\n    \t\t\t\t\t}\n    \t\t\t\t}\n\t\t\t\t})\n\t\t\t}, facetsCmp)\n    \t\t\n    \t\tvar facets = this.getApiParam('facet');\n    \t\tif (Ext.isString(facets)) {facets = facets.split(\",\")}\n    \t\tfacets.forEach(function(facet) {\n    \t\t\tthis.addFacet({facet: facet}, facetsCmp);\n    \t\t}, this);\n    \t\t\n        \tvar title = this.getApiParam(\"title\");\n        \tif (title) {this.setTitle(title)}\n    \t});\n    },\n    \n    addFacet: function(config, facetsCmp) {\n    \tif (!config) {\n    \t\t// select first, then add\n    \t\treturn this.selectFacet(function(facet) {\n    \t\t\tthis.addFacet({facet: facet})\n    \t\t})\n    \t}\n\t\tfacetsCmp = facetsCmp || this.queryById('facets');\n    \tvar facet = config.facet,\n    \t\titemTpl = '<span style=\"font-size: smaller;\">(<span class=\"info-tip\" data-qtip=\"'+this.localize('matchingDocuments')+'\">{inDocumentsCount}</span>)</span> {term}'+'<span style=\"font-size: smaller;\"> (<span class=\"info-tip\" data-qtip=\"'+this.localize('rawFreqs')+'\">{rawFreq}</span>)</span>'\n\n\t\tvar title = this.localize(facet+\"Title\");\n\t\tif (title==\"[\"+facet+\"Title]\") {\n\t\t\ttitle = facet.replace(/^facet\\./,\"\").replace(/^extra./,\"\");\n\t\t}\n\t\t\n\t\tExt.applyIf(config, {\n\t\t\ttitle: title,\n\t\t\tcollapsible: true,\n\t\t\tfacet: facet,\n\t\t\tcolumns: [{\n\t\t\t\trenderer: function(value, metaData, record) {\n\t\t\t\t\treturn '<span style=\"font-size: smaller;\">(<span class=\"info-tip\" data-qtip=\"'+this.localize('matchingDocuments')+'\">'+record.getInDocumentsCount()+\"</span>) </span>\"+\n\t\t\t\t\t\t(record.getLabel ? record.getLabel() : record.getTerm()+'<span style=\"font-size: smaller;\"> (<span class=\"info-tip\" data-qtip=\"'+this.localize('rawFreqs')+'\">'+record.getRawFreq()+\"</span>)</span>\")\n\t\t\t\t},\n\t\t\t\tflex: 1\n\t\t\t}],\n\t\t\tbbar: [{\n\t\t\t\txtype: 'querysearchfield',\n\t\t\t\twidth: '100%',\n\t\t\t\ttokenType: facet.replace(\"facet.\", \"\"),\n\t\t\t\titemTpl: itemTpl\n\t\t\t}],\n\t\t\tcorpus: this.getCorpus()\n\t\t});\n\t\t\n\t\tvar facetCmp = facetsCmp.add(config);\n\n\t\tfacetCmp.getStore().on('load', function() {\n\t\t\tthis.adjustFacetHeights();\n\t\t}, this);\n\t\t\n\t\tfacetCmp.getSelectionModel().on('selectionchange', function(model, selected) {\n\t\t\tvar labels = [];\n\t\t\tselected.forEach(function(model) {\n\t\t\t\tlabels.push({facet: facetCmp.facet, label: model.getLabel ? model.getLabel() : model.getTerm()})\n\t\t\t})\n\t\t\tthis.getFacets()[facet] = labels;\n\t\t\tthis.updateResults();\n\t\t}, this);\n\t\tfacetCmp.on('query', function(model, selected) {\n\t\t\tthis.getFacets()[facetCmp.facet] = [];\n\t\t\tthis.updateResults();\n\t\t}, this);\n\n    \treturn facetCmp;\n    },\n    \n\tadjustFacetHeights: function() {\n\t\tvar facetsCmp = this.queryById('facets');\n\t\tvar counts = {};\n\t\tvar maxCount = -1;\n\t\tvar facets = facetsCmp.query('facet');\n\t\tfacets.forEach(function(facet) {\n\t\t\tvar count = facet.getStore().count();\n\t\t\tif (count > maxCount) {\n\t\t\t\tmaxCount = count;\n\t\t\t}\n\t\t\tcounts[facet.getId()] = count;\n\t\t});\n\n\t\tvar mapVal = function(value, istart, istop, ostart, ostop) {\n\t\t\treturn ostart + (ostop - ostart) * ((value - istart) / (istop - istart));\n\t\t};\n\n\t\tfacets.forEach(function(facet) {\n\t\t\tvar flexAmt = counts[facet.getId()] / maxCount;\n\t\t\tflexAmt = mapVal(flexAmt, 0, 1, 0.3, 1);\n\t\t\tfacet.setFlex(flexAmt);\n\t\t}, this);\n\t\tfacetsCmp.updateLayout();\n\t},\n\n    updateResults: function(queries) {\n    \tvar facets = this.getFacets();\n    \tif (!queries) {\n\t    \tvar queries = [];\n\t    \tfor (facet in facets) {\n\t    \t\tfacets[facet].forEach(function(label) {\n\t        \t\tqueries.push(label.facet+\":\"+label.label);\n\t    \t\t})\n\t    \t}\n\t    \tif (queries) {\n\t\t    \treturn this.updateResults(queries)\n\t    \t}\n    \t}\n\t\tvar results = this.queryById(\"results\").getTargetEl();\n\t\tresults.update(this.getCustomResultsHtml() ? this.getCustomResultsHtml() : new Ext.XTemplate(this.localize('noMatches')).apply([this.getCorpus().getDocumentsCount()]));\n\t\tthis.queryById('status').update(new Ext.XTemplate(this.localize('noMatches')).apply([this.getCorpus().getDocumentsCount()]))\n\t\tthis.queryById('sendToVoyant').setDisabled(true);\n\t\tthis.queryById('export').setDisabled(true);\n    \tif (queries && queries.length>0) {\n    \t\tthis.mask(this.localize(\"loading\"));\n    \t\tvar documentQueryMatches = this.getCorpus().getDocumentQueryMatches();\n    \t\tdocumentQueryMatches.load({\n    \t\t\tparams: {query: queries, includeDocIds: true},\n    \t\t\tcallback: function(records, operation, success) {\n    \t\t\t\tthis.unmask();\n    \t\t\t\tif (records && records.length>0) {\n    \t\t\t\t\tthis.queryById('status').setHtml(records.length)\n    \t\t\t\t\tvar list = \"<ul>\";\n    \t\t\t\t\tvar matchingDocIds = [];\n    \t\t\t\t\trecords.forEach(function(record) {\n    \t\t\t\t\t\trecord.getDocIds().forEach(function(docId) {\n    \t\t\t\t\t\t\tmatchingDocIds.push(docId);\n    \t\t\t\t\t\t\tvar doc = documentQueryMatches.getCorpus().getDocument(docId);\n    \t\t\t\t\t\t\tvar item = \"<li id='\"+results.getId()+'_'+docId+\"' class='cataloguedoc'>\";\n    \t\t\t\t\t\t\titem += \"<a href='#' class='cataloguedoctitle' data='\"+docId+\"'>\"+doc.getTitle()+\"</a>\";\n    \t\t\t\t\t\t\tfor (facet in facets) {\n    \t\t\t\t\t\t\t\tif (facets[facet].length==0) {continue;}\n    \t\t\t\t\t\t\t\tvar labelItems = \"\";\n    \t\t\t\t\t\t\t\tif (facet!='facet.title') {\n    \t\t\t\t\t\t\t\t\tvar suffix = facet.replace(/^.+?\\./,\"\");\n    \t\t\t\t\t\t\t\t\tvar label = doc.get(suffix);\n    \t\t\t\t\t\t\t\t\tif (label) {\n    \t\t\t\t\t\t\t\t\t\tvar isArray = Ext.isArray(label);\n    \t\t\t\t\t\t\t\t\t\tif (isArray) {\n    \t\t\t\t\t\t\t\t\t\t\tlabelItems+=\"<li>\"+suffix+\"<ul>\"\n    \t\t\t\t\t\t\t\t\t\t} else {\n    \t\t\t\t\t\t\t\t\t\t\tlabel = [label];\n    \t\t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t\t\tlabel.forEach(function(l) {\n    \t\t\t\t\t\t\t\t\t\t\tvar isMatch = false;\n    \t\t\t\t\t\t\t\t\t\t\tfacets[facet].forEach(function(f) {\n    \t\t\t\t\t\t\t\t\t\t\t\tif (f.label==l) {isMatch=true}\n    \t\t\t\t\t\t\t\t\t\t\t\telse if (f.facet.indexOf('facet')==-1) {\n    \t\t\t\t\t\t\t\t\t\t\t\t\tf.label.split(/\\W+/).forEach(function(part) {\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\tif (part.trim().length>0 && l.toLowerCase().indexOf(part.toLowerCase())>-1) {\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisMatch=true;\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t\t\t\t\t\t})\n    \t\t\t\t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t\t\t\t})\n    \t\t\t\t\t\t\t\t\t\t\tlabelItems+=\"<li>\"+(isArray ? '' : suffix.replace('extra.','')+\": \")+(isMatch ? '<span class=\"keyword\">'+l+'</span>' : l)+\"</li>\"\n    \t\t\t\t\t\t\t\t\t\t})\n    \t\t\t\t\t\t\t\t\t\tif (isArray) {\n    \t\t\t\t\t\t\t\t\t\t\tlabelItems+=\"</ul></li>\";\n    \t\t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\tif (labelItems) {\n    \t\t\t\t\t\t\t\t\titem+=\"<ul>\"+labelItems+\"</ul>\";\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\titem += \"</li>\";\n    \t\t\t\t\t\t\tlist += item;\n    \t\t\t\t\t\t})\n    \t\t\t\t\t})\n    \t\t\t\t\tlist += \"</ul>\";\n    \t\t\t\t\tresults.update(list);\n    \t\t\t\t\tvar me = this;\n    \t\t\t\t\tvar lnks = results.query(\".cataloguedoctitle\");\n    \t\t\t\t\tlnks.forEach(function(lnk) {\n    \t\t\t\t\t\tExt.get(lnk).on(\"click\", function(e,el) {\n    \t\t\t\t\t\t\tthis.dispatchEvent(\"documentSelected\", me, el.getAttribute(\"data\"));\n    \t\t\t\t\t\t}, me)\n    \t\t\t\t\t});\n    \t\t\t\t\tif (lnks.length==1) {\n    \t\t\t\t\t\tthis.dispatchEvent(\"documentSelected\", me, lnks[0].getAttribute(\"data\"));\n    \t\t\t\t\t}\n    \t\t\t\t\tthis.queryById('status').update(new Ext.XTemplate(this.localize('queryMatches')).apply([matchingDocIds.length,this.getCorpus().getDocumentsCount()]))\n    \t\t\t\t\tthis.setMatchingDocIds(Ext.Array.clone(matchingDocIds));\n    \t\t\t\t\tif (matchingDocIds.length>0) {\n    \t\t\t\t\t\tthis.queryById('export').setDisabled(false);\n    \t\t\t\t\t\tthis.queryById('sendToVoyant').setDisabled(false);\n    \t\t\t\t\t}\n    \t\t\t\t\t\n    \t\t\t\t\t// now try to load some snippets, if need be\n    \t\t\t\t\tif (facets['lexical']) {\n    \t\t\t\t\t\tvar firstDocIds = matchingDocIds.splice(0,5);\n    \t\t\t\t\t\tthis.loadSnippets(firstDocIds, results.first().first());\n    \t\t\t\t\t\tif (matchingDocIds && matchingDocIds.length>0) {\n        \t\t\t\t\t\tthis.loadSnippets(matchingDocIds); // load the rest\n    \t\t\t\t\t\t}\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t},\n    \t\t\tscope: this\n    \t\t})    \t\t\n    \t}\n    },\n    \n    loadSnippets: function(docIds, elToMask) {\n\t\tvar results = this.queryById(\"results\").getTargetEl();\n    \tvar facets = this.getFacets();\n    \tif (facets['lexical']) {\n    \t\tvar queries = facets['lexical'].map(function(label) {return label.facet+\":\"+label.label});\n    \t\tvar contexts = this.getCorpus().getContexts({buffered: false});\n    \t\tif (elToMask) {\n    \t\t\telToMask.mask(this.localize(\"loadingSnippets\"));\n    \t\t}\n    \t\tcontexts.load({\n    \t\t\tmethod: 'POST',\n    \t\t\tparams: {\n                \tstripTags: \"all\",\n    \t\t\t\tquery: queries,\n    \t\t\t\tdocId: docIds,\n    \t\t\t\tperDocLimit: 3,\n    \t\t\t\tlimit: 100,\n    \t\t\t\taccurateTotalNotNeeded: true\n    \t\t\t},\n    \t\t\tscope: this,\n    \t\t\tcallback: function(records, operation, success) {\n    \t\t\t\tif (elToMask) {\n    \t\t\t\t\telToMask.unmask();\n    \t\t\t\t}\n    \t\t\t\tif (success && Ext.isArray(records) && records.length>0) {\n    \t\t\t\t\tvar snippets = {};\n    \t\t\t\t\trecords.forEach(function(record) {\n    \t\t\t\t\t\tif (!snippets[record.getDocIndex()]) {snippets[record.getDocIndex()]=[]}\n    \t\t\t\t\t\tsnippets[record.getDocIndex()].push(record);\n    \t\t\t\t\t})\n    \t\t\t\t\tfor (docIndex in snippets) {\n    \t\t\t\t\t\tvar id = this.getCorpus().getDocument(docIndex).getId();\n    \t\t\t\t\t\tvar html = '<li style=\"list-style-type: none; font-size: smaller;\">'+snippets[docIndex].map(function(snippet) {\n    \t\t\t\t\t\t\treturn snippet.getHighlightedContext();\n    \t\t\t\t\t\t}).join(\" \u2026 \")+'</li>'\n    \t\t\t\t\t\tvar docItem = results.down(\"#\"+results.getId()+\"_\"+id);\n\t\t\t\t\t\t\tif (docItem) {\n\t\t\t\t\t\t\t\tif (docItem.query(\"ul\")) {\n\t\t\t\t\t\t\t\t\thtml=\"<ul>\"+html+\"</ul>\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdocItem.insertHtml('beforeEnd', html)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconsole.log('Catalogue: no docItem', results);\n\t\t\t\t\t\t\t}\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t}\n        \t})        \t\t\n    \t}\n\t\n    },\n    \n    selectFacet: function(callback) {\n    \tif (!this.facetsSelectionStore) {\n    \t\tvar keys = {};\n    \t\tthis.getCorpus().getDocuments().each(function(doc) {\n    \t\t\tfor (var key in doc.getData()) {\n    \t\t\t\tif (key !== \"corpus\" && key.indexOf(\"parent\") !== 0 && key.indexOf(\"-lexical\") === -1) {\n        \t\t\t\tkeys[key] = true\n    \t\t\t\t}\n    \t\t\t}\n    \t\t});\n    \t\tkeys = Object.keys(keys);\n\t\t\tvar priority = ['title', 'location', 'publisher', 'pubDate', 'pubPlace', 'language', 'keyword', 'author', 'collection'];\n    \t\tkeys.sort(function(a, b) {\n\t\t\t\treturn priority.indexOf(b) - priority.indexOf(a);\n\t\t\t});\n    \t\tthis.facetsSelectionStore = Ext.create('Ext.data.ArrayStore', {\n    \t\t    fields: ['text'],\n    \t\t    data: keys.map(function(key) {return [key]})\n    \t\t});\n    \t}\n    \t\n    \tvar existingFacets = {};\n    \tthis.queryById('facets').items.each(function(cmp) {\n    \t\texistingFacets[cmp.facet]=true;\n    \t});\n\n\t\tif (this.facetsSelectionStore.isFiltered) this.facetsSelectionStore.clearFilter();\n    \tthis.facetsSelectionStore.filterBy(function(record) {\n    \t\treturn !(\"facet.\"+record.get('text') in existingFacets);\n    \t});\n    \t\n\t\tExt.create('Ext.window.Window', {\n\t\t\ttitle: this.localize(\"selectFacet\"),\n\t\t\tmodal: true,\n\t\t\titems: {\n\t\t\t\txtype: 'form',\n\t\t\t\twidth: 300,\n\t\t\t\titems: {\n\t\t\t\t\txtype: 'combo',\n\t\t\t\t\tstore: this.facetsSelectionStore,\n\t\t\t\t\tforceSelection: true,\n\t\t\t\t\twidth: 300\n\t\t\t\t},\n\t\t\t\tbuttons: [{\n\t            \ttext: this.localize(\"cancel\"),\n\t\t            ui: 'default-toolbar',\n\t                glyph: 'xf00d@FontAwesome',\n\t        \t\tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t}\n\t\t\t\t},{\n\t            \ttext: this.localize(\"select\"),\n\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t            \tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar facet = btn.up('window').down('combo').getValue();\n\t        \t\t\tif (!facet) {\n\t        \t\t\t\treturn this.showError(this.localize('selectValidFacet'));\n\t        \t\t\t} else {\n\t        \t\t\t\tcallback.call(this, \"facet.\"+facet);\n\t\t        \t\t\tbtn.up('window').close();\n\t        \t\t\t}\n\t        \t\t},\n\t        \t\tscope: this\n\t            }]\n\t\t\t},\n\t\t\tbodyPadding: 5\n\t\t}).show()\n    }\n    \n});\n","// assuming Cirrus library is loaded by containing page (via voyant.jsp)\n/**\n * Cirrus tool, a wordcloud-like visualization.\n *\n * @example\n *\n * let config = {\n * \tbackground: null,\n * \tcategories: null,\n * \tdocIndex: null,\n * \tfontFamily: null,\n * \tinlineData: null,\n * \tlimit: null,\n * \tstopList: null,\n * \tvisible: null,\n * \twhiteList: null,\n * };\n *\n * loadCorpus(\"austen\").tool(\"cirrus\", config);\n *\n * @class Cirrus\n * @tutorial cirrus\n * @memberof Tools\n */\nExt.define('Voyant.panel.Cirrus', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.cirrus',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t/**\n\t\t\t * @memberof Tools.Cirrus\n    \t\t * @instance\n    \t\t * @property {stopList}\n\t\t\t * @default\n    \t\t */\n    \t\tstopList: 'auto',\n\t\t\t/**\n\t\t\t * @memberof Tools.Cirrus\n\t\t\t * @instance\n\t\t\t * @property {categories}\n\t\t\t */\n    \t\tcategories: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Cirrus\n\t\t\t * @instance\n\t\t\t * @property {String|String[]} whiteList a list of words to always include\n\t\t\t */\n    \t\twhiteList: undefined,\n    \t\t\n    \t\t/**\n\t\t\t * @memberof Tools.Cirrus\n    \t\t * @instance\n    \t\t * @property {Number} limit Specify the number of terms to load (which is separate from the number of {@link Cirrus.visible} terms to show) at a time).\n    \t\t * @default 500\n    \t\t */\n    \t\tlimit: 500,\n    \t\t\n    \t\t/**\n\t\t\t * @memberof Tools.Cirrus\n    \t\t * @instance\n    \t\t * @property {Number} visible Specify the number of terms that are visible at a time.\n    \t\t * @default 50\n    \t\t */\n    \t\tvisible: 50,\n\n\t\t\t// TODO unused??\n    \t\tterms: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Cirrus\n    \t\t * @instance\n    \t\t * @property {docId}\n\t\t\t */\n    \t\tdocId: undefined,\n\t\t\t/**\n\t\t\t * @memberof Tools.Cirrus\n    \t\t * @instance\n    \t\t * @property {docIndex}\n\t\t\t */\n    \t\tdocIndex: undefined,\n    \t\t\n\t\t\t/**\n\t\t\t * @memberof Tools.Cirrus\n\t\t\t * @instance\n\t\t\t * @property {String} inlineData Directly specify the terms and their relative sizes.\n\t\t\t * There data format is a comma-separated list of colon-separated term/size pairs.\n\t\t\t * For example: love:20,like:15,dear:10,child:6\n\t\t\t */\n    \t\tinlineData: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Cirrus\n\t\t\t * @instance\n\t\t\t * @property {String} fontFamily The CSS font-family to use for the terms\n\t\t\t * @default\n\t\t\t */\n    \t\tfontFamily: '\"Palatino Linotype\", \"Book Antiqua\", Palatino, serif',\n    \t\t\n\t\t\t// TODO remove these flash specific params\n\t\t\tcirrusForceFlash: false,\n    \t\tbackground: '0xffffff',\n    \t\tfade: true,\n    \t\tsmoothness: 2,\n    \t\tdiagonals: 'none' // all, bigrams, none\n    \t},\n\t\tglyph: 'xf06e@FontAwesome'\n    },\n    \n    config: {\n    \t/**\n    \t * @private\n    \t */\n    \tmode: undefined,\n    \t/**\n    \t * @private\n    \t */\n    \toptions: [\n    \t\t{xtype: 'stoplistoption'},\n    \t\t{\n\t    \t\txtype: 'listeditor',\n\t    \t\tname: 'whiteList'\n    \t    },\n    \t    {xtype: 'categoriesoption'},\n//    \t    {\n//    \t    \t// TODO this field does nothing\n//    \t        xtype: 'numberfield',\n//    \t        name: 'label',\n//    \t        fieldLabel: 'Max words',\n//    \t        labelAlign: 'right',\n//    \t        value: 500,\n//    \t        minValue: 50,\n//    \t        step: 50,\n//    \t        listeners: {\n//        \t        afterrender: function(field) {\n//        \t        \tvar win = field.up(\"window\");\n//        \t        \tif (win && win.panel) {field.setFieldLabel(win.panel.localize(\"maxTerms\"))}\n//        \t        }\n//    \t        }\n//    \t    },\n    \t    {xtype: 'fontfamilyoption'},\n    \t    {xtype: 'colorpaletteoption'}\n\n    \t],\n    \t/**\n    \t * @private\n    \t */\n    \trecords: undefined,\n    \t/**\n    \t * @private\n    \t */\n    \tterms: undefined,\n    \t/**\n    \t * @private\n    \t */\n    \tcirrusId: undefined,\n    \t/**\n    \t * @private\n    \t */\n    \tvisLayout: undefined, // cloud layout algorithm\n    \t/**\n    \t * @private\n    \t */\n    \tvis: undefined, // actual vis\n    \t/**\n    \t * @private\n    \t */\n    \ttip: undefined,\n    \t/**\n    \t * @private\n    \t */\n    \tsizeAdjustment: 100, // amount to multiply a word's relative size by\n    \t/**\n    \t * @private\n    \t */\n    \tminFontSize: 12,\n    \t/**\n    \t * @private\n    \t */\n    \tlargestWordSize: 0,\n    \t/**\n    \t * @private\n    \t */\n    \tsmallestWordSize: 1000000\n    },\n    \n    MODE_CORPUS: 'corpus',\n    MODE_DOCUMENT: 'mode_document',\n    \n    layout: 'fit',\n    \n\t/**\n\t * @private\n\t */\n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.getApplication().getCategoriesManager().addFeature('orientation', function() { return ~~(Math.random() * 2) * 90; });\n    \t\n    \tthis.setCirrusId(Ext.id(null, 'cirrus_'));\n    },\n    \n    initComponent: function (config) {\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n        \t\t\txtype: 'corpusdocumentselector',\n        \t\t\tsingleSelect: true\n        \t\t},{\n        \t\t\tfieldLabel: this.localize('visibleTerms'),\n        \t\t\tlabelWidth: 40,\n        \t\t\twidth: 120,\n        \t\t\txtype: 'slider',\n\t            \tincrement: 25,\n\t            \tminValue: 25,\n\t            \tmaxValue: 500,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t\t\t\t\t\t\tslider.maxValue = this.getApiParam(\"limit\")\n\t\t\t\t\t\t\tslider.minValue = Math.round(Math.max(5, parseInt(slider.maxValue/20)));\n\t\t\t\t\t\t\tif (slider.maxValue % 25 === 0 && slider.minValue % 25 === 0) {\n\t\t\t\t\t\t\t\tslider.increment = 25; // default values handling\n\t\t\t\t\t\t\t} else {\n\t            \t\t\t\tslider.increment = Math.round((slider.maxValue - slider.minValue)/10); // 10 steps across entire range\n\t\t\t\t\t\t\t}\n\t            \t\t\tslider.setValue(this.getApiParam(\"visible\"));\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({visible: newvalue});\n\t            \t\t\tthis.loadFromTermsRecords();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                }]\n    \t\t}]\n    \t});\n\n    \tthis.callParent(arguments);\n    \t\n    \t\n    },\n    \n    listeners: {\n    \tboxready: function() {\n\t\t\tthis.initVisLayout(); // force in case we've changed fontFamily from options\n\n\t\t\tvar dataString = this.getApiParam('inlineData');\n        \tif (dataString !== undefined) {\n        \t\tif (dataString.charAt(0)==\"[\") {\n            \t\tvar jsonData = Ext.decode(dataString, true);\n        \t\t} else {\n        \t\t\tif (dataString.indexOf(\":\")>-1) {\n        \t\t\t\tjsonData = [];\n        \t\t\t\tdataString.split(\",\").forEach(function(term) {\n        \t\t\t\t\tparts = term.split(\":\");\n        \t\t\t\t\tjsonData.push({\n        \t\t\t\t\t\ttext: parts[0],\n        \t\t\t\t\t\trawFreq: parseInt(parts[1])\n        \t\t\t\t\t})\n        \t\t\t\t})\n        \t\t\t} else {\n        \t\t\t\tvar terms = {}\n        \t\t\t\tjsonData = [];\n        \t\t\t\tdataString.split(\",\").forEach(function(term) {\n        \t\t\t\t\tif (term in terms) {\n        \t\t\t\t\t\tterms[term]++;\n        \t\t\t\t\t} else {\n        \t\t\t\t\t\tterms[term] = 1;\n        \t\t\t\t\t}\n        \t\t\t\t});\n        \t\t\t\tfor (term in terms) {\n        \t\t\t\t\tjsonData.push({\n        \t\t\t\t\t\ttext: term,\n        \t\t\t\t\t\trawFreq: terms[term]\n        \t\t\t\t\t})\n        \t\t\t\t}\n        \t\t\t}\n        \t\t}\n        \t\tif (jsonData !== null && jsonData.length>0) {\n        \t\t\tthis.setApiParam('inlineData', jsonData);\n\t        \t    this.setTerms(jsonData);\n\t        \t    this.buildFromTerms();\n        \t\t}\n        \t}\n    \t},\n    \tresize: function(panel, width, height) {\n    \t\tif (this.getVisLayout() && this.getCorpus()) {\n    \t\t\tthis.setAdjustedSizes();\n    \t\t\t\n    \t\t\tvar el = this.getLayout().getRenderTarget();\n    \t    \twidth = el.getWidth();\n    \t\t\theight = el.getHeight();\n    \t\t\t\n    \t\t\tel.down('svg').set({width: width, height: height});\n    \t\t\tif (this.getTerms()) {\n        \t\t\tthis.getVisLayout().size([width, height]).stop().words(this.getTerms()).start();\n    \t\t\t}\n    \t\t}\n    \t},\n    \t\n    \tloadedCorpus: function(src, corpus) {\n\t\t\tthis.getApplication().getCategoriesManager().addFeature('font', this.getApiParam('fontFamily')); // make sure the default for font is set from the api\n    \t\tthis.initVisLayout(); // force in case we've changed fontFamily from options\n    \t\tif (this.getApiParam(\"docIndex\")) {\n    \t\t\tthis.fireEvent(\"documentSelected\", this, corpus.getDocument(this.getApiParam(\"docIndex\")));\n    \t\t} else if (this.getApiParam(\"docId\")) {\n    \t\t\tthis.fireEvent(\"documentSelected\", this, corpus.getDocument(this.getApiParam(\"docId\")));\n    \t\t} else {\n        \t\tthis.loadFromCorpus(corpus);\n\t\t\t}\n    \t},\n    \t\n    \tcorpusSelected: function(src, corpus) {\n    \t\tthis.loadFromCorpus(corpus);\n    \t\t\n    \t},\n    \t\n    \tdocumentSelected: function(src, document) {\n    \t\tif (document) {\n        \t\tvar corpus = this.getCorpus();\n        \t\tvar document = corpus.getDocument(document);\n        \t\tthis.setApiParam('docId', document.getId());\n        \t\tvar documentTerms = document.getDocumentTerms({autoload: false, corpus: corpus, pageSize: this.getApiParam(\"maxVisible\"), parentPanel: this});\n        \t\tthis.loadFromDocumentTerms(documentTerms);\n    \t\t}\n    \t},\n    \t\n    \tensureCorpusView: function(src, corpus) {\n    \t\tif (this.getMode() != this.MODE_CORPUS) {this.loadFromCorpus(corpus);}\n    \t}\n    },\n    \n    loadFromCorpus: function(corpus) {\n    \tvar jsonData = this.getApiParam('inlineData');\n    \tif (jsonData === undefined) {\n\t\t\tthis.setApiParams({docId: undefined, docIndex: undefined});\n\t\t\tthis.loadFromCorpusTerms(corpus.getCorpusTerms({autoload: false, pageSize: this.getApiParam(\"maxVisible\"), parentPanel: this}));\n    \t} else {\n    \t\t// if (jsonData !== undefined) {\n    \t\t// \tvar records = [];\n    \t\t// \tfor (var i = 0; i < jsonData.length; i++) {\n\t\t\t// \t\tvar wordData = jsonData[i];\n\t\t\t// \t\twordData.term = wordData.text; // inlineData/CorpusTerm format mismatch\n    \t\t// \t\tvar record = Ext.create('Voyant.data.model.CorpusTerm', wordData);\n    \t\t// \t\trecords.push(record);\n    \t\t// \t}\n    \t\t// \tthis.setRecords(records);\n    \t\t// \tthis.setMode(this.MODE_CORPUS);\n    \t\t// \tthis.loadFromTermsRecords();\n    \t\t// }\n    \t}\n    },\n    \n    loadFromDocumentTerms: function(documentTerms) {\n    \tdocumentTerms.load({\n\t\t    callback: function(records, operation, success) {\n\t\t    \tthis.setMode(this.MODE_DOCUMENT);\n\t\t    \tthis.setRecords(operation.getRecords()); // not sure why operation.records is different from records\n\t\t    \tthis.loadFromTermsRecords();\n\t\t    },\n\t\t    scope: this,\n\t\t    params: this.getApiParams()\n    \t});\n    },\n    \n    loadFromCorpusTerms: function(corpusTerms) {\n\t\tcorpusTerms.load({\n\t\t    callback: function(records, operation, success) {\n\t\t    \tthis.setMode(this.MODE_CORPUS);\n\t\t    \tthis.setRecords(operation.getRecords()); // not sure why operation.records is different from records\n\t\t\t\tthis.loadFromTermsRecords();\n\t\t    },\n\t\t    scope: this,\n\t\t    params: this.getApiParams()\n    \t});\n    },\n    \n    loadFromTermsRecords: function() {\n    \tvar records = this.getRecords();\n    \tvar visible = this.getApiParam(\"visible\");\n    \tif (visible>records.length) {visible=records.length;}\n    \tvar terms = [];\n    \tfor (var i=0; i<visible; i++) {\n    \t\tif (records[i].get('rawFreq')>0) {\n        \t\tterms.push({text: records[i].get('term').replace(/\"/g,''), rawFreq: records[i].get('rawFreq')});\n    \t\t}\n    \t}\n    \tthis.setTerms(terms);\n    \tthis.buildFromTerms();\n    },\n    \n    initVisLayout: function(forceLayout) {\n    \tif (forceLayout || this.getVisLayout() == undefined) {\n    \t\tvar cirrusForceFlash = this.getApiParam('cirrusForceFlash');\n    \t\tif (cirrusForceFlash == 'true' || cirrusForceFlash === true) {\n    \t\t\tthis.setApiParam('cirrusForceFlash', true);\n    \t\t\tvar id = this.getCirrusId();\n    \t\t\tvar appVars = {\n    \t\t\t\tid: id\n    \t\t\t};\n    \t\t\tvar keys = ['background','fade','smoothness','diagonals'];\n    \t\t\tfor (var i = 0; i < keys.length; i++) {\n    \t\t\t\tappVars[keys[i]] = this.getApiParam(keys[i]);\n    \t\t\t}\n    \t\t\t\n    \t\t\tvar swfscript = '<script type=\"text/javascript\" src=\"'+this.getApplication().getBaseUrl()+'resources/swfobject/swfobject.js'+'\">\u003c/script>';\n    \t\t\tvar cirrusLinks = '<script type=\"text/javascript\">'+\n\t\t\t\t'cirrusClickHandler'+id+' = function(word, value) {\\n'+\n\t\t\t\t'\\tif (window.console && console.info) console.info(word, value);\\n'+\n\t\t\t\t'\\tvar cirrusTool = Ext.getCmp(\"'+this.id+'\");\\n'+\n\t\t\t\t'\\tcirrusTool.dispatchEvent(\"termsClicked\", cirrusTool, [word]);\\n'+\n\t\t\t\t'}\\n'+\n\t\t\t\t'cirrusLoaded'+id+' = function() {\\n'+\n\t\t\t\t'\\tif (window.console && console.info) console.info(\"cirrus flash loaded\");\\n'+\n\t\t\t\t'}\\n'+\n\t\t\t\t'cirrusPNGHandler'+id+' = function(base64String) {\\n'+\n\t\t\t\t'\\tvar cirrusTool = Ext.getCmp(\"'+this.id+'\");\\n'+\n\t\t\t\t'\\tcirrusTool.cirrusPNGHandler(base64String);\\n'+\n\t\t\t\t'}'+\n\t\t\t\t'\u003c/script>';\n    \t\t\t\n    \t\t\tthis.update(swfscript+cirrusLinks, true, function() {\n    \t\t\t\tfunction loadFlash(component) {\n    \t\t\t\t\tif (typeof swfobject !== 'undefined') {\n    \t\t\t\t\t\tvar el = component.getLayout().getRenderTarget();\n    \t\t\t\t\t\tvar width = el.getWidth();\n    \t\t\t\t\t\tvar height = el.getHeight();\n    \t\t    \t\t\t\n\t        \t\t\t\tvar cirrusFlash = component.getApplication().getBaseUrl()+'resources/cirrus/flash/Cirrus.swf';\n\t        \t\t\t\tcomponent.add({\n\t        \t\t\t\t\txtype: 'flash',\n\t        \t\t\t\t\tid: appVars.id,\n\t        \t\t\t\t\turl: cirrusFlash,\n\t        \t\t\t\t\twidth: width,\n\t        \t\t\t\t\theight: height,\n\t        \t\t\t\t\tflashVars: appVars,\n\t        \t\t\t\t\tflashParams: {\n\t\t\t\t\t\t\t\t\tmenu: 'false',\n\t\t\t\t\t\t\t\t\tscale: 'showall',\n\t\t\t\t\t\t\t\t\tallowScriptAccess: 'always',\n\t\t\t\t\t\t\t\t\tbgcolor: '#222222',\n\t\t\t\t\t\t\t\t\twmode: 'opaque'\n\t        \t\t            }\n\t        \t\t\t\t});\n\t        \t\t\t\t\n\t        \t\t\t\tcomponent.cirrusFlashApp = Ext.get(appVars.id).first().dom;\n    \t\t\t\t\t} else {\n    \t\t\t\t\t\tsetTimeout(loadFlash, 50, component);\n    \t\t\t\t\t}\n        \t\t\t}\n    \t\t\t\tloadFlash(this);\n    \t\t\t\t\n    \t\t\t}, this);\n    \t\t} else {\n    \t\t\tvar el = this.getLayout().getRenderTarget();\n    \t\t\tel.update(\"\"); // make sure to clear existing contents (especially for re-layout)\n    \t    \tvar width = el.getWidth();\n\t\t\t\tvar height = el.getHeight();\n\t\t\t\tthis.setVisLayout(\n\t\t\t\t\td3.layoutCloud()\n\t\t\t\t\t\t.size([width, height])\n\t\t\t\t\t\t.overflow(true)\n\t\t\t\t\t\t.padding(1)\n\t\t\t\t\t\t.rotate(function(d) {\n\t\t\t\t\t\t\tvar orientation = this.getApplication().getCategoriesManager().getFeatureForTerm('orientation', d.text);\n\t\t\t\t\t\t\tif (orientation === undefined) {\n\t\t\t\t\t\t\t\torientation = ~~(Math.random() * 2) * 90;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn orientation;\n\t\t\t\t\t\t}.bind(this))\n\t\t\t\t\t\t.spiral('archimedean')\n\t\t\t\t\t\t.font(function(d) { return this.getApplication().getCategoriesManager().getFeatureForTerm('font', d.text); }.bind(this))\n\t\t\t\t\t\t.fontSize(function(d) {return d.fontSize; }.bind(this))\n\t\t\t\t\t\t.text(function(d) { return d.text; })\n\t\t\t\t\t\t.on('end', this.draw.bind(this))\n\t\t\t\t);\n\t\t\t\t\n\t\t\t\tvar svg = d3.select(el.dom).append('svg').attr('id',this.getCirrusId()).attr('class', 'cirrusGraph').attr('width', width).attr('height', height);\n\t\t\t\tthis.setVis(svg.append('g').attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')'));\n\t\t\t\t\n\t\t\t\tif (this.getTip() === undefined) {\n\t\t\t\t\tthis.setTip(Ext.create('Ext.tip.Tip', {}));\n\t\t\t\t}\n    \t\t}\n    \t}\n    },\n    \n    buildFromTerms: function() {\n\t\tvar terms = this.getTerms();\n    \tif (this.rendered && terms) {\n    \t\tif (this.getApiParam('cirrusForceFlash') === true) {\n    \t\t\tif (this.cirrusFlashApp !== undefined && this.cirrusFlashApp.clearAll !== undefined) {\n\t    \t\t\tvar words = [];\n\t    \t\t\tfor (var i = 0; i < terms.length; i++) {\n\t    \t\t\t\tvar t = terms[i];\n\t    \t\t\t\tif (!t.text && t.term) {t.text=t.term;}\n\t    \t\t\t\twords.push({word: t.text, size: t.rawFreq, label: t.rawFreq});\n\t    \t\t\t}\n\t    \t\t\tthis.cirrusFlashApp.clearAll();\n\t    \t\t\tthis.cirrusFlashApp.addWords(words);\n\t    \t\t\tthis.cirrusFlashApp.arrangeWords();\n    \t\t\t} else {\n    \t\t\t\tExt.defer(this.buildFromTerms, 50, this);\n    \t\t\t}\n    \t\t} else {\n\t    \t\tvar minSize = 1000;\n\t    \t\tvar maxSize = -1;\n\t    \t\tfor (var i = 0; i < terms.length; i++) {\n\t    \t\t\tvar size = terms[i].rawFreq;\n\t    \t\t\tif (size < minSize) minSize = size;\n\t    \t\t\tif (size > maxSize) maxSize = size;\n\t    \t\t}\n\t    \t\tthis.setSmallestWordSize(minSize);\n\t    \t\tthis.setLargestWordSize(maxSize);\n\t    \t\t\n\t    \t\t// set the relative sizes for each word (0.0 to 1.0), then adjust based on available area\n\t    \t\tthis.setRelativeSizes();\n\t    \t\tthis.setAdjustedSizes();\n\n\t//    \t\tvar fontSizer = d3.scalePow().range([10, 100]).domain([minSize, maxSize]);\n\n\t    \t\tthis.getVisLayout().words(terms).start();\n    \t\t}\n    \t} else {\n    \t\tExt.defer(this.buildFromTerms, 50, this);\n    \t}\n    },\n    \n    draw: function(words, bounds) {\n    \tvar panel = this;\n    \tvar el = this.getLayout().getRenderTarget();\n    \tvar width = this.getVisLayout().size()[0];\n    \tvar height = this.getVisLayout().size()[1];\n    \t\n    \tvar scale = bounds ? Math.min(\n\t\t\twidth / Math.abs(bounds[1].x - width / 2),\n\t\t\twidth / Math.abs(bounds[0].x - width / 2),\n\t\t\theight / Math.abs(bounds[1].y - height / 2),\n\t\t\theight / Math.abs(bounds[0].y - height / 2)\n    \t) / 2 : 1;\n    \t\n\t\tvar t = d3.transition().duration(1000);\n\t\t\t\n\t\tvar nodes = this.getVis().selectAll('text').data(words, function(d) {return d.text;});\n\t\t\n\t\tnodes.exit().transition(t)\n\t\t\t.style('font-size', '1px')\n\t\t\t.remove();\n\n\t\tvar nodesEnter = nodes.enter().append('text')\n\t\t\t.text(function(d) { return d.text; })\n\t\t\t.attr('text-anchor', 'middle')\n\t\t\t.attr('data-freq', function(d) { return d.rawFreq; })\n\t\t\t.attr('transform', function(d) { return 'translate(' + [d.x, d.y] + ')rotate(' + d.rotate + ')'; })\n\t\t\t.style('font-family', function(d) { return panel.getApplication().getCategoriesManager().getFeatureForTerm('font', d.text); })\n\t\t\t.style('fill', function(d) { return panel.getApplication().getColorForTerm(d.text, true); })\n\t\t\t.style('font-size', '1px')\n\t\t\t.on('click', function(event, obj) {panel.dispatchEvent('termsClicked', panel, [obj.text]);})\n\t\t\t.on('mouseover', function(event, obj) {\n\t\t\t\tthis.getTip().show();\n\t\t\t}.bind(this))\n\t\t\t.on('mousemove', function(event, obj) {\n\t\t\t\tvar tip = this.getTip();\n\t\t\t\ttip.update(obj.text+': '+obj.rawFreq);\n\t\t\t\tvar container = Ext.get(this.getCirrusId()).dom;\n\t\t\t\tvar coords = d3.pointer(event, container);\n\t\t\t\tcoords[1] += 30;\n\t\t\t\ttip.setPosition(coords);\n\t\t\t}.bind(this))\n\t\t\t.on('mouseout', function(event, obj) {\n\t\t\t\tthis.getTip().hide();\n\t\t\t}.bind(this));\n\t\t\n\t\tvar nodesUpdate = nodes.merge(nodesEnter);\n\t\t\n\t\tnodesUpdate.transition(t)\n\t\t\t.style('font-family', function(d) { return panel.getApplication().getCategoriesManager().getFeatureForTerm('font', d.text); })\n\t\t\t.style('fill', function(d) { return panel.getApplication().getColorForTerm(d.text, true); })\n\t\t\t.attr('transform', function(d) { return 'translate(' + [d.x, d.y] + ')rotate(' + d.rotate + ')'; })\n\t\t\t.style('font-size', function(d) { return d.fontSize + 'px'; });\n\t\t\n\t\tthis.getVis().transition(t).attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')scale(' + scale + ')');\n    },\n    \n    map: function(value, istart, istop, ostart, ostop) {\n\t\treturn ostart + (ostop - ostart) * ((value - istart) / (istop - istart));\n\t},\n\t\n\tcalculateSizeAdjustment: function() {\n\t\tvar terms = this.getTerms();\n        if (terms !== undefined) {\n\t\t\tvar el = this.getLayout().getRenderTarget();\n\t\t\t\n\t        var stageArea = el.getWidth() * el.getHeight();\n\t        if (stageArea < 100000) this.setMinFontSize(8);\n\t        else this.setMinFontSize(12);\n        \n\t        var pixelsPerWord = stageArea / terms.length;\n\t        var totalWordsSize = 0;\n\t        for (var i = 0; i < terms.length; i++) {\n\t            var word = terms[i];\n\t            var wordArea = this.calculateWordArea(word);\n\t            totalWordsSize += wordArea;\n\t        }\n\n\t        this.setSizeAdjustment(stageArea / totalWordsSize);\n        }\n    },\n    \n    calculateWordArea: function(word) {\n        var baseSize = Math.log(word.relativeSize * 10) * Math.LOG10E; // take the relativeSize (0.1 to 1.0), multiply by 10, then get the base-10 log of it\n        var height = (baseSize + word.relativeSize) / 2; // find the average between relativeSize and the log\n        var width = 0; //(baseSize / 1.5) * word.text.length;\n        for (var i = 0; i < word.text.length; i++ ) {\n            var letter = word.text.charAt(i);\n            if (letter == 'f' || letter == 'i' || letter == 'j' || letter == 'l' || letter == 'r' || letter == 't') width += baseSize / 3;\n            else if (letter == 'm' || letter == 'w') width += baseSize / (4 / 3);\n            else width += baseSize / 1.9;\n        }\n        var wordArea = height * width;\n        return wordArea;\n    },\n    \n    setAdjustedSizes: function() {\n    \tthis.calculateSizeAdjustment();\n    \tvar terms = this.getTerms();\n    \tif (terms !== undefined) {\n\t\t\tfor (var i = 0; i < terms.length; i++) {\n\t\t\t\tvar term = terms[i];\n\t\t\t\tvar adjustedSize = this.findNewRelativeSize(term);\n\t\t\t\tterm.fontSize = adjustedSize > this.getMinFontSize() ? adjustedSize : this.getMinFontSize();\n\t\t\t}\n    \t}\n    },\n    \n    setRelativeSizes: function() {\n    \tvar terms = this.getTerms();\n    \tif (terms !== undefined) {\n\t    \tfor (var i = 0; i < terms.length; i++) {\n\t            var word = terms[i];\n\t            word.relativeSize = this.map(word.rawFreq, this.getSmallestWordSize(), this.getLargestWordSize(), 0.1, 1);\n\t        }\n    \t}\n    },\n    \n    findNewRelativeSize: function(word) {\n    \tvar areaMultiplier = this.getSizeAdjustment();\n        var area = this.calculateWordArea(word) * areaMultiplier;\n        // given the area = (x+6)*(2*x/3*y), solve for x\n        var newRelativeSize = (Math.sqrt(6) * Math.sqrt(6 * Math.pow(word.text.length, 2) + area * word.text.length) - 6 * word.text.length) / (2 * word.text.length);\n        return newRelativeSize;\n    }\n});","/**\n * Links represents keywords and terms that occur in close proximity (i.e. collocated) as a force directed network graph.\n * You can work with collocates programmatically using {@link Spyral.Corpus#collocates}.\n *\n * @example\n *\n * let config = {\n * \tcentralize: null,\n * \tcontext: 5,\n * \tlimit: 5,\n * \tquery: null,\n * \tstopList: \"auto\",\n * };\n *\n * loadCorpus(\"austen\").tool(\"links\", config);\n *\n * @class Links\n * @tutorial links\n * @memberof Tools\n */\nExt.define('Voyant.panel.Links', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.links',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.Links\n\t\t\t * @instance\n\t\t\t * @property {query}\n\t\t\t */\n    \t\tquery: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Links\n\t\t\t * @instance\n\t\t\t * @property {limit}\n\t\t\t * @default\n\t\t\t */\n    \t\tlimit: 5,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Links\n\t\t\t * @instance\n\t\t\t * @property {stopList}\n\t\t\t * @default\n\t\t\t */\n    \t\tstopList: 'auto',\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Links\n\t\t\t * @instance\n\t\t\t * @property {context}\n\t\t\t * @default\n\t\t\t */\n    \t\tcontext: 5,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Links\n\t\t\t * @instance\n\t\t\t * @property {String} centralize If specified, will \"centralize\" on this keyword\n\t\t\t */\n    \t\tcentralize: undefined\n    \t},\n\t\tglyph: 'xf1e0@FontAwesome'\n    },\n    \n    config: {\n    \toptions: [{xtype: 'stoplistoption'},{\n    \t\txtype: 'categoriesoption'\n    \t}],\n    \t\n    \tnodeData: undefined,\n    \tlinkData: undefined,\n    \t\n    \tvisId: undefined,\n    \tvis: undefined,\n    \tvisLayout: undefined,\n    \tnodes: undefined,\n    \tlinks: undefined,\n    \tzoom: undefined,\n    \t\n    \tdragging: false,\n    \t\n    \tcontextMenu: undefined,\n    \t\n    \tcurrentNode: undefined,\n    \t\n    \tnetworkMode: undefined,\n    \t\n    \tgraphStyle: {\n    \t\tkeywordNode: {\n    \t\t\tnormal: {\n    \t\t\t\tfill: '#c6dbef',\n    \t\t\t\tstroke: '#6baed6'\n    \t\t\t},\n    \t\t\thighlight: {\n    \t\t\t\tfill: '#9ecae1',\n    \t\t\t\tstroke: '#3182bd'\n    \t\t\t}\n    \t\t},\n    \t\tcontextNode: {\n    \t\t\tnormal: {\n    \t\t\t\tfill: '#fdd0a2',\n    \t\t\t\tstroke: '#fdae6b'\n    \t\t\t},\n    \t\t\thighlight: {\n    \t\t\t\tfill: '#fd9a53',\n    \t\t\t\tstroke: '#e6550d'\n    \t\t\t}\n    \t\t},\n    \t\tlink: {\n    \t\t\tnormal: {\n    \t\t\t\tstroke: '#000000',\n    \t\t\t\tstrokeOpacity: 0.1\n    \t\t\t},\n    \t\t\thighlight: {\n    \t\t\t\tstroke: '#000000',\n    \t\t\t\tstrokeOpacity: 0.5\n    \t\t\t}\n    \t\t}\n    \t},\n    \t\n    \tgraphPhysics: {\n    \t\tdefaultMode: {\n\t    \t\tdamping: 0.4, // 0 = no damping, 1 = full damping\n\t    \t\tcentralGravity: 0.1, // 0 = no grav, 1 = high grav\n\t    \t\tnodeGravity: -50,  // negative = repel, positive = attract\n\t\t\t\tspringLength: 100,\n\t\t\t\tspringStrength: 0.25, // 0 = not strong, >1 = probably too strong\n\t\t\t\tcollisionScale: 1.25 // 1 = default, 0 = no collision \n    \t\t},\n    \t\tcentralizedMode: {\n    \t\t\tdamping: 0.4, // 0 = no damping, 1 = full damping\n    \t\t\tcentralGravity: 0.1, // 0 = no grav, 1 = high grav\n\t    \t\tnodeGravity: -1,  // negative = repel, positive = attract\n\t\t\t\tspringLength: 200,\n\t\t\t\tspringStrength: 1, // 0 = not strong, >1 = probably too strong\n\t\t\t\tcollisionScale: 1 // 1 = default, 0 = no collision \n    \t\t}\n    \t}\n    },\n\n    DEFAULT_MODE: 0,\n    CENTRALIZED_MODE: 1,\n    \n    constructor: function(config) {\n    \tthis.setNodeData([]);\n    \tthis.setLinkData([]);\n    \t\n    \tthis.setVisId(Ext.id(null, 'links_'));\n\n    \tthis.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n        var me = this;\n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                   xtype: 'querysearchfield'\n                },{\n                \ttext: me.localize('clearTerms'),\n\t\t\t\t\tglyph: 'xf014@FontAwesome',\n                \thandler: this.resetGraph,\n                \tscope: me\n                },this.localize('context'),{\n                \txtype: 'slider',\n                \titemId: 'contextSlider',\n                \tminValue: 3,\n                \tvalue: 5,\n                \tmaxValue: 30,\n                \tincrement: 2,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(this.getApiParam('context'));\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tthis.setApiParam('context', slider.getValue());\n                \t\t\tif (this.getNetworkMode() === this.DEFAULT_MODE) {\n                    \t\t\tvar terms = this.getNodeData().map(function(node) { return node.term; });\n                \t\t\t\tif (terms.length > 0) {\n                \t\t\t\t\tthis.setNodeData([]);\n                \t\t\t\t\tthis.setLinkData([]);\n                \t\t\t\t\tthis.refresh();\n                \t\t\t\t\t\n                \t\t\t\t\tthis.loadFromQuery(terms);\n                \t\t\t\t}\n                \t\t\t}\n                \t\t},\n                \t\tscope: me\n                \t}\n                }]\n            }]\n        });\n        \n        this.setContextMenu(Ext.create('Ext.menu.Menu', {\n\t\t\trenderTo: Ext.getBody(),\n\t\t\titems: [{\n\t\t\t\txtype: 'box',\n\t\t\t\titemId: 'label',\n\t\t\t\tmargin: '5px 0px 5px 5px',\n\t\t\t\thtml: ''\n\t\t\t},{\n\t\t        xtype: 'menuseparator'\n\t\t\t},{\n\t\t\t\txtype: 'menucheckitem',\n\t\t\t\ttext: 'Fixed',\n\t\t\t\titemId: 'fixed',\n\t\t\t\tlisteners: {\n\t\t\t\t\tcheckchange: function(c, checked, e) {\n\t\t\t\t\t\tvar node = this.getCurrentNode();\n\t\t\t\t\t\tif (node !== undefined) {\n\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\tfixed: checked\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (checked) {\n\t\t\t\t\t\t\t\tdata.fx = node.x;\n\t\t\t\t\t\t\t\tdata.fy = node.y;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdata.fx = null;\n\t\t\t\t\t\t\t\tdata.fy = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.updateDataForNode(node.id, data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t},{\n\t\t\t\txtype: 'button',\n\t\t\t\ttext: 'Fetch Collocates',\n\t\t\t\tstyle: 'margin: 5px;',\n\t\t\t\thandler: function(b, e) {\n\t\t\t\t\tvar node = this.getCurrentNode();\n\t\t\t\t\tif (node !== undefined) {\n\t\t\t\t\t\tif (this.getNetworkMode() === this.CENTRALIZED_MODE) {\n\t\t\t\t\t\t\tthis.resetGraph();\n\t\t\t\t\t\t\tthis.setNetworkMode(this.DEFAULT_MODE);\n\t\t\t\t\t\t\tthis.setApiParam('centralize', undefined);\n\t\t\t\t\t\t\tnode.start = 0;\n\t\t\t\t\t\t\tnode.limit = this.getApiParam('limit');\n\t\t\t\t\t\t}\n\t\t    \t\t\tthis.fetchCollocatesForNode(node);\n\t\t    \t\t}\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\txtype: 'button',\n\t\t\t\ttext: 'Centralize',\n\t\t\t\tstyle: 'margin: 5px;',\n\t\t\t\thandler: function(b, e) {\n\t\t\t\t\tvar node = this.getCurrentNode();\n\t\t\t\t\tif (node !== undefined) {\n\t\t    \t\t\tthis.doCentralize(node.term);\n\t\t    \t\t}\n\t\t\t\t\tthis.getContextMenu().hide();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\txtype: 'button',\n\t\t\t\ttext: 'Remove',\n\t\t\t\tstyle: 'margin: 5px;',\n\t\t\t\thandler: function(b, e) {\n\t\t\t\t\tvar node = this.getCurrentNode();\n\t\t\t\t\tif (node !== undefined) {\n\t\t\t\t\t\tthis.removeNode(node.id);\n\t\t\t\t\t}\n\t\t\t\t\tb.up('menu').hide();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t}));\n        \n        this.on('loadedCorpus', function(src, corpus) {\n\t\t\tif (this.isVisible()) {\n\t\t\t\tthis.initLoad();\n\t\t\t}\n        }, this);\n        \n        this.on('activate', function() { // load after tab activate (if we're in a tab panel)\n\t\t\tif (this.getCorpus()) {\n\t\t\t    if (this.getNodeData().length === 0) { // only initLoad if there isn't already data\n\t\t\t        Ext.Function.defer(this.initLoad, 100, this);\n\t\t\t    }\n\t\t\t}\n    \t}, this);\n        \n        this.on('query', function(src, query) {this.loadFromQuery(query);}, this);\n        \n        this.on('resize', function(panel, width, height) {\n        \tvar vis = Ext.get(this.getVisId());\n        \tif (vis) {\n        \t\tvar el = this.body;//this.getLayout().getRenderTarget();\n            \tvar elHeight = el.getHeight();\n            \tvar elWidth = el.getWidth();\n            \t\n        \t\tvis.el.dom.setAttribute('width', elWidth);\n        \t\tvis.el.dom.setAttribute('height', elHeight);\n        \t\tthis.getVisLayout()\n        \t\t\t.force('x', d3.forceX(elWidth/2))\n\t    \t\t\t.force('y', d3.forceY(elHeight/2));\n//        \t\t\t.alpha(0.5).restart(); // restarting physics messes up zoomToFit\n        \t\t\n        \t\tExt.Function.defer(this.zoomToFit, 100, this);\n //       \t\tthis.zoomToFit();\n        \t}\n\t\t}, this);\n\n\t\tthis.on('beforedestroy', function(panel) {\n\t\t\tif (this.getVisLayout()) {\n\t\t\t\tthis.getVisLayout().stop(); // make sure force simulation isn't running when removed\n\t\t\t}\n\t\t}, this);\n        \n        me.callParent(arguments);\n\n    },\n    \n    initLoad: function() {\n\t\tthis.initGraph();\n\t\tthis.setNetworkMode(this.DEFAULT_MODE);\n\t\t\n\t\tif (this.getApiParam('centralize')) {\n\t\t\tthis.setNetworkMode(this.CENTRALIZED_MODE);\n\t\t\tvar term = this.getApiParam('centralize');\n\t\t\tthis.doCentralize(term);\n\t\t} else {\n\t\t\tvar limit = 3;\n\t\t\tvar query = this.getApiParam('query');\n\t\t\tif (query !== undefined) {\n\t\t\t\tif (query.indexOf('^@') === 0) {\n\t\t\t\t\t// it's a category so increase limit so that we get most/all of the terms\n\t\t\t\t\tlimit = 20;\n\t\t\t\t} else {\n\t\t\t\t\tlimit = Ext.isArray(query) ? query.length : query.split(',').length;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.getCorpus().getCorpusTerms({autoLoad: false}).load({\n\t\t\t\tparams: {\n\t\t\t\t\tlimit: limit,\n\t\t\t\t\tquery: query,\n\t\t\t\t\tstopList: this.getApiParam('stopList'),\n\t\t\t\t\tcategories: this.getApiParam(\"categories\")\n\t\t\t\t},\n\t\t\t    callback: function(records, operation, success) {\n\t\t\t    \tif (success) {\n\t\t\t    \t\tthis.loadFromCorpusTermRecords(records);\n\t\t\t    \t}\n\t\t\t    },\n\t\t\t    scope: this\n\t    \t});\n\t\t}\n    },\n    \n    loadFromQuery: function(query) {\n    \tif (Ext.isArray(query) && query.length==0) {\n    \t\tthis.setApiParam(\"query\", undefined);\n    \t\tthis.resetGraph();\n    \t\treturn;\n    \t}\n    \tthis.setApiParams({ query: query });\n    \tvar params = this.getApiParams();\n    \tparams.noCache=true;\n    \t(Ext.isString(query) ? [query] : query).forEach(function(q) {\n        \tthis.getCorpus().getCorpusCollocates({autoLoad: false}).load({\n        \t\tparams: Ext.apply(Ext.clone(params), {query: q}),\n        \t\tcallback: function(records, operations, success) {\n        \t\t\tif (success) {\n        \t\t\t\tthis.loadFromCorpusCollocateRecords(records);\n        \t\t\t}\n        \t\t},\n        \t\tscope: this\n        \t});\n    \t}, this);\n    },\n    \n    loadFromCorpusTermRecords: function(corpusTerms) {\n    \tif (Ext.isArray(corpusTerms) && corpusTerms.length>0) {\n    \t\tvar terms = [];\n    \t\tcorpusTerms.forEach(function(corpusTerm) {\n    \t\t\tterms.push(corpusTerm.getTerm());\n    \t\t});\n    \t\tthis.loadFromQuery(terms);\n    \t}\n    },\n    \n    loadFromCorpusCollocateRecords: function(records, keywordId) {\n    \tif (Ext.isArray(records)) {\n    \t\tvar start = this.getApiParam('limit');\n    \t\t\n    \t\tvar el = this.getLayout().getRenderTarget();\n    \t\tvar cX = el.getWidth()/2;\n    \t\tvar cY = el.getHeight()/2;\n    \t\t\n    \t\tvar existingKeys = {};\n    \t\tthis.getNodeData().forEach(function(item) {\n    \t\t\texistingKeys[item.id] = true;\n    \t\t}, this);\n    \t\t\n    \t\tvar newNodes = [];\n    \t\tvar newLinks = [];\n    \t\t\n    \t\trecords.forEach(function(corpusCollocate, index) {\n    \t\t\tvar term = corpusCollocate.getTerm();\n    \t\t\tvar contextTerm = corpusCollocate.getContextTerm();\n    \t\t\tvar termFreq = corpusCollocate.getKeywordRawFreq();\n    \t\t\tvar contextFreq = corpusCollocate.getContextTermRawFreq();\n    \t\t\t\n    \t\t\tvar termValue = termFreq;\n    \t\t\tvar contextValue = contextFreq;\n    \t\t\tif (this.getNetworkMode() === this.CENTRALIZED_MODE) {\n    \t\t\t\ttermValue = 0;\n    \t\t\t\tcontextValue = Math.log(contextFreq);\n    \t\t\t}\n    \t\t\t\n    \t\t\tvar termEntry = undefined;\n    \t\t\tvar contextTermEntry = undefined;\n    \t\t\t\n    \t\t\tif (index == 0) { // only process keyword once\n    \t\t\t\tif (keywordId === undefined) keywordId = this.idGet(term);\n\t    \t\t\tif (existingKeys[keywordId] !== undefined) {\n\t    \t\t\t\tthis.updateDataForNode(keywordId, {\n\t    \t\t\t\t\ttitle: term+' ('+termFreq+')',\n\t    \t\t\t\t\ttype: 'keyword',\n\t    \t\t\t\t\tvalue: termValue\n\t    \t\t\t\t});\n\t    \t\t\t} else {\n\t    \t\t\t\texistingKeys[keywordId] = true;\n\t    \t\t\t\t\n\t    \t\t\t\ttermEntry = {\n\t\t    \t\t\t\tid: keywordId,\n\t    \t\t\t\t\tterm: term,\n\t    \t\t\t\t\ttitle: term+' ('+termFreq+')',\n\t    \t\t\t\t\ttype: 'keyword',\n\t    \t\t\t\t\tvalue: termValue,\n\t    \t\t\t\t\tstart: start,\n\t    \t\t\t\t\tfixed: false,\n\t    \t\t\t\t\tx: cX,\n\t    \t\t\t\t\ty: cY\n\t\t\t\t\t\t};\n\t    \t\t\t\tnewNodes.push(termEntry);\n\t    \t\t\t}\n\t\t\t\t}\n    \t\t\t\n    \t\t\tif (term != contextTerm) {\n\t    \t\t\tvar contextId = this.idGet(contextTerm);\n\t    \t\t\tif (existingKeys[contextId] !== undefined) {\n\t    \t\t\t} else {\n\t    \t\t\t\texistingKeys[contextId] = true;\n\t    \t\t\t\t\n\t    \t\t\t\tcontextTermEntry = {\n    \t    \t\t\t\tid: contextId,\n    \t    \t\t\t\tterm: contextTerm,\n        \t\t\t\t\ttitle: contextTerm+' ('+contextFreq+')',\n        \t\t\t\t\ttype: 'context',\n        \t\t\t\t\tvalue: contextValue,\n        \t\t\t\t\tstart: 0,\n        \t\t\t\t\tfixed: false,\n\t    \t\t\t\t\tx: cX,\n\t    \t\t\t\t\ty: cY\n    \t\t\t\t\t};\n\t    \t\t\t\tnewNodes.push(contextTermEntry);\n\t    \t\t\t}\n\t    \t\t\t\n\t    \t\t\tvar existingLink = null;\n\t    \t\t\tvar linkData = this.getLinkData();\n\t    \t\t\tfor (var i = 0; i < linkData.length; i++) {\n\t    \t\t\t\tvar link = linkData[i];\n\t    \t\t\t\tif ((link.source.id == keywordId && link.target.id == contextId) || (link.source.id == contextId && link.target.id == keywordId)) {\n\t    \t\t\t\t\texistingLink = link;\n\t    \t\t\t\t\tbreak;\n\t    \t\t\t\t}\n\t    \t\t\t}\n\n\t    \t\t\tvar linkValue = corpusCollocate.getContextTermRawFreq();\n\t    \t\t\tif (existingLink === null) {\n\t    \t\t\t\tnewLinks.push({source: keywordId, target: contextId, value: linkValue, id: keywordId+'-'+contextId});\n\t    \t\t\t} else if (existingLink.value < linkValue) {\n//\t    \t\t\t\texistingLink.value = linkValue;\n\t    \t\t\t}\n    \t\t\t}\n    \t\t}, this);\n    \t\t\n    \t\tthis.setNodeData(this.getNodeData().concat(newNodes));\n    \t\tthis.setLinkData(this.getLinkData().concat(newLinks));\n    \t\t\n    \t\tthis.refresh();\t\t\n    \t}\n    },\n    \n    idGet: function(term) {\n    \treturn 'links_'+term.replace(/\\W/g, '_');\n    },\n    \n    updateDataForNode: function(nodeId, dataObj) {\n    \tvar data = this.getNodeData();\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tif (data[i].id === nodeId) {\n\t\t\t\tExt.apply(data[i], dataObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n    },\n    \n    removeNode: function(nodeId, removeOrphans) {\n    \tvar data = this.getNodeData();\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tif (data[i].id === nodeId) {\n\t\t\t\tdata.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tdata = this.getLinkData();\n\t\tfor (var i = data.length-1; i >= 0; i--) {\n\t\t\tif (data[i].source.id === nodeId || data[i].target.id === nodeId) {\n\t\t\t\tdata.splice(i, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tthis.setApiParam(\"query\", Ext.Array.remove(Ext.Array.from(this.getApiParam(\"query\")), nodeId));\n\t\t\n\t\tif (removeOrphans) {\n\t\t\t// TODO\n\t\t}\n\t\t\n\t\tthis.refresh();\n    },\n    \n    doCentralize: function(term) {\n    \tthis.setApiParam(\"centralize\",term);\n    \tthis.resetGraph();\n    \t\n    \tthis.setNetworkMode(this.CENTRALIZED_MODE);\n    \t\n    \tvar data = {\n\t\t\tid: this.idGet(term),\n\t\t\tterm: term,\n\t\t\ttitle: term+' ('+1+')',\n\t\t\ttype: 'keyword',\n\t\t\tvalue: 1000,\n\t\t\tstart: 0\n\t\t};\n\t\tthis.setNodeData([data]);\n\t\tthis.refresh();\n\t\t\n\t\tvar centralizeLimit = 150;\n\t\tvar limit = this.getApiParam('limit');\n\t\tthis.setApiParam('limit', centralizeLimit);\n\t\tthis.fetchCollocatesForNode(data);\n\t\tthis.setApiParam('limit', limit);\n    },\n    \n    // called by setNetworkMode\n    applyNetworkMode: function(mode) {\n    \tif (this.getVisLayout()) {\n\t    \tif (mode === this.DEFAULT_MODE) {\n\t    \t\tvar physics = this.getGraphPhysics().defaultMode;\n\t    \t\tthis.getVisLayout()\n\t    \t\t\t.velocityDecay(physics.damping)\n\t\t    \t\t.force('link', d3.forceLink().id(function(d) { return d.id; }).distance(physics.springLength).strength(physics.springStrength))\n\t\t\t\t\t.force('charge', d3.forceManyBody().strength(physics.nodeGravity))\n\t\t\t\t\t.force('collide', d3.forceCollide(function(d) { return Math.sqrt(d.bbox.width * d.bbox.height) * physics.collisionScale; }));\n\t    \t\tthis.getVisLayout().force('x').strength(physics.centralGravity);\n\t    \t\tthis.getVisLayout().force('y').strength(physics.centralGravity);\n\t    \t} else {\n\t    \t\tvar physics = this.getGraphPhysics().centralizedMode;\n\t    \t\tthis.getVisLayout()\n\t    \t\t\t.velocityDecay(physics.damping)\n\t\t    \t\t.force('link', d3.forceLink().id(function(d) { return d.id; }).distance(physics.springLength).strength(physics.springStrength))\n\t\t\t\t\t.force('charge', d3.forceManyBody().strength(function(d) {\n\t\t\t\t\t\tif (d.type === 'keyword') {\n\t\t\t\t\t\t\treturn -10000;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}))\n\t\t\t\t\t.force('collide', d3.forceCollide(function(d) {\n\t\t\t\t\t\tif (d.type === 'keyword') {\n\t\t\t\t\t\t\treturn d.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn Math.sqrt(d.bbox.width * d.bbox.height) * physics.collisionScale;\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t    \t\tthis.getVisLayout().force('x').strength(physics.centralGravity);\n\t    \t\tthis.getVisLayout().force('y').strength(physics.centralGravity);\n\t    \t}\n    \t}\n    \t\n    \treturn mode; // need to return mode for it to actually be set\n    },\n    \n    initGraph: function() {\n    \tvar el = this.getLayout().getRenderTarget();\n    \tel.update('');\n    \tvar width = el.getWidth();\n    \tvar height = el.getHeight();\n    \t\n    \tthis.setVisLayout(d3.forceSimulation()\n    \t\t.force('x', d3.forceX(width/2))\n    \t\t.force('y', d3.forceY(height/2))\n\t\t\t.on('tick', function() {\n\t    \t\tthis.getLinks()\n\t    \t\t\t.attr('x1', function(d) { return d.source.x; })\n\t    \t\t\t.attr('y1', function(d) { return d.source.y; })\n\t    \t\t\t.attr('x2', function(d) { return d.target.x; })\n\t    \t\t\t.attr('y2', function(d) { return d.target.y; });\n\t//    \t\tthis.getLinks().attr('d', function(d) {\n\t//\t\t\t\treturn 'M' + d[0].x + ',' + d[0].y\n\t//\t\t\t\t\t\t+ 'S' + d[1].x + ',' + d[1].y\n\t//\t\t\t\t\t\t+ ' ' + d[2].x + ',' + d[2].y;\n\t//\t\t\t});\n\t    \t\tthis.getNodes().attr('transform', function(d) {\n\t    \t\t\tvar x = d.x;\n\t    \t\t\tvar y = d.y;\n\t    \t\t\tif (this.getNetworkMode() === this.DEFAULT_MODE || d.type !== 'keyword') {\n\t\t    \t\t\tx -= d.bbox.width*0.5;\n\t\t    \t\t\ty -= d.bbox.height*0.5;\n\t    \t\t\t} else {\n\t    \t\t\t\t\n\t    \t\t\t}\n\t    \t\t\treturn 'translate('+x+','+y+')';\n\t    \t\t}.bind(this));\n\t    \t\t\n\t    \t\tif (!this.getDragging() && this.getVisLayout().alpha() < 0.075) {\n\t    \t\t\tthis.getVisLayout().alpha(-1); // trigger end event\n\t    \t\t}\n\t    \t}.bind(this))\n\t    \t.on('end', function() {\n        \t\tExt.Function.defer(this.zoomToFit, 100, this);\n\t    \t}.bind(this))\n\t\t);\n    \t\n    \tvar svg = d3.select(el.dom).append('svg').attr('id',this.getVisId()).attr('class', 'linksGraph').attr('width', width).attr('height', height);\n    \tvar g = svg.append('g');\n    \t\n    \tvar zoom = d3.zoom()\n    \t\t.scaleExtent([1/4, 4])\n    \t\t.on('zoom', function(event) {\n\t\t\t\tg.attr('transform', event.transform);\n\t\t\t});\n    \tthis.setZoom(zoom);\n\t\tsvg.call(zoom);\n\t\t\n\t\tsvg.on('click', function() {\n    \t\tthis.getContextMenu().hide();\n    \t}.bind(this));\n    \t\n    \tthis.setLinks(g.append('g').attr('class', 'links').selectAll('.link'));\n    \tthis.setNodes(g.append('g').attr('class', 'nodes').selectAll('.node'));\n\t\tthis.setVis(g);\n    },\n    \n    resetGraph: function() {\n\t\tthis.setNodeData([]);\n    \tthis.setLinkData([]);\n\t\tthis.setNetworkMode(this.DEFAULT_MODE); // ? there was another version of this function without this\n\t\tthis.refresh();\n    },\n    \n    refresh: function() {\n    \tvar me = this;\n    \t\n    \tvar nodeData = this.getNodeData();\n    \tvar linkData = this.getLinkData();\n    \t\n//    \tvar nodeMap = d3.map(nodeData, function(d) { return d.id; });\n//    \tvar bilinks = [];\n//    \tlinkData.forEach(function(link) {\n//    \t\tvar s = link.source = nodeMap.get(link.source);\n//    \t\tvar t = link.target = nodeMap.get(link.target);\n//    \t\tvar i = {};\n//    \t\tnodeData.push(i);\n//    \t\tlinkData.push({source: s, target: i}, {source: i, target: t});\n//    \t\tbilinks.push([s,i,t]);\n//    \t});\n    \t\n    \tvar link = this.getLinks().data(linkData, function(d) { return d.id; });\n    \tlink.exit().remove();\n\t\tvar linkEnter = link.enter().append('line')\n\t\t\t.attr('class', 'link')\n\t\t\t.attr('id', function(d) { return d.id; })\n\t\t\t.on('mouseover', me.linkMouseOver.bind(me))\n\t\t\t.on('mouseout', me.linkMouseOut.bind(me))\n\t\t\t.on('click', function(event, data) {\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.dispatchEvent('termsClicked', this, ['\"'+data.source.term+' '+data.target.term+'\"~'+this.getApiParam('context')]);\n\t\t\t}.bind(me))\n//\t\t\t.style('fill', 'none')\n\t\t\t.style('cursor', 'pointer')\n\t\t\t.style('stroke-width', function(d) {\n\t\t\t\tif (me.getNetworkMode() === me.DEFAULT_MODE) {\n\t\t\t\t\treturn Math.max(1, Math.min(15, Math.sqrt(d.value)));\n\t\t\t\t} else {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\tthis.setLinks(linkEnter.merge(link));\n\n    \tvar node = this.getNodes().data(nodeData, function(d) { return d.id; });\n    \tnode.exit().remove();\n    \tvar nodeEnter = node.enter().append('g')\n\t\t\t.attr('class', function(d) { return 'node '+d.type; })\n\t\t\t.attr('id', function(d) { return d.id; })\n\t\t\t.on('mouseover', me.nodeMouseOver.bind(me))\n\t\t\t.on('mouseout', me.nodeMouseOut.bind(me))\n\t\t\t.on('click', function(event, data) {\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.dispatchEvent('termsClicked', this, [data.term]);\n\t\t\t}.bind(me))\n\t\t\t.on('dblclick', function(event, data) {\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.fetchCollocatesForNode(data);\n\t\t\t}.bind(me))\n\t\t\t.on('contextmenu', function(event, d, i) {\n\t\t\t\tevent.preventDefault();\n//\t\t\t\tme.getTip().hide();\n\t\t\t\tvar menu = me.getContextMenu();\n\t\t\t\tmenu.queryById('label').setHtml(d.term);\n    \t\t\tmenu.queryById('fixed').setChecked(d.fixed);\n\t\t\t\tmenu.showAt(event.pageX+10, event.pageY-50);\n\t\t\t})\n\t\t\t.call(d3.drag()\n\t\t\t\t.on('start', function(event, d) {\n\t\t\t\t\tme.setDragging(true);\n\t\t\t\t\tif (!event.active) me.getVisLayout().alpha(0.3).restart();\n\t\t\t\t\td.fx = d.x;\n\t\t\t\t\td.fy = d.y;\n\t\t\t\t\td.fixed = true;\n\t\t\t\t})\n\t\t\t\t.on('drag', function(event, d) {\n\t\t\t\t\tme.getVisLayout().alpha(0.3); // don't let simulation end while the user is dragging\n\t\t\t\t\td.fx = event.x;\n\t\t\t\t\td.fy = event.y;\n\t\t\t\t\tif (me.isMasked()) {\n\t\t\t    \t\tif (!me.isOffCanvas(event.x, event.y)) {\n\t\t\t    \t\t\tme.unmask();\n\t\t\t    \t\t}\n\t\t\t    \t} else if (me.isOffCanvas(event.x, event.y)) {\n\t\t\t    \t\tme.mask(me.localize('releaseToRemove'));\n\t\t\t    \t}\n\t\t\t\t})\n\t\t\t\t.on('end', function(event, d) {\n\t\t\t\t\tme.setDragging(false);\n//\t\t\t\t\tif (!event.active) me.getVisLayout().alpha(0);\n\t\t\t\t\tif (d.fixed != true) {\n\t\t\t\t\t\td.fx = null;\n\t\t\t\t\t\td.fy = null;\n\t\t\t\t\t}\n\t\t\t\t\tif (me.isOffCanvas(event.x, event.y)) {\n\t    \t    \t\tme.unmask();\n\t    \t    \t\tme.mask(me.localize('cleaning'));\n\t    \t    \t\tme.removeNode(d.id);\n\t    \t    \t\tme.unmask();\n\t    \t    \t}\n\t\t\t\t})\n\t\t\t);\n    \t\n    \tnodeEnter.append('title');\n    \t\n    \tif (this.getNetworkMode() === this.DEFAULT_MODE) {\n    \t\tnodeEnter.append('rect')\n\t\t\t\t.style('stroke-width', 1)\n\t\t\t\t.style('stroke-opacity', 1);\n    \t} else {\n    \t\tnodeEnter.filter(function(d) { return d.type === 'keyword'; }).append('circle')\n    \t\t\t.style('stroke-width', 1)\n    \t\t\t.style('stroke-opacity', 1);\n    \t}\n    \t\n    \tnodeEnter.append('text')\n\t\t\t.attr('font-family', function(d) { return me.getApplication().getCategoriesManager().getFeatureForTerm('font', d.term); })\n\t\t\t.text(function(d) { return d.term; })\n\t\t\t.style('cursor', 'pointer')\n\t\t\t.style('user-select', 'none')\n\t\t\t.attr('dominant-baseline', 'middle');\n\n\t\tvar allNodes = nodeEnter.merge(node);\n\t\tallNodes.selectAll('title').text(function(d) { return d.title; });\n\t\tallNodes.selectAll('text')\n\t\t\t.attr('font-size', function(d) { return Math.max(10, Math.sqrt(d.value)); })\n\t\t\t.each(function(d) { d.bbox = this.getBBox(); }) // set bounding box for later use\n\n    \tthis.setNodes(allNodes);\n    \t\n    \tif (this.getNetworkMode() === this.DEFAULT_MODE) {\n\t    \tthis.getVis().selectAll('rect')\n\t    \t\t.attr('width', function(d) { return d.bbox.width+16; })\n\t\t\t\t.attr('height', function(d) { return d.bbox.height+8; })\n\t\t\t\t.attr('rx', function(d) { return Math.max(2, d.bbox.height * 0.2); })\n\t\t\t\t.attr('ry', function(d) { return Math.max(2, d.bbox.height * 0.2); })\n\t\t\t\t.call(this.applyNodeStyle.bind(this));\n\t    \tthis.getVis().selectAll('text')\n\t\t    \t.attr('dx', 8)\n\t\t\t\t.attr('dy', function(d) { return d.bbox.height*0.5+4; });\n    \t} else {\n    \t\tthis.getVis().selectAll('circle')\n    \t\t\t.attr('r', function(d) { return Math.min(150, d.bbox.width); })\n    \t\t\t.call(this.applyNodeStyle.bind(this));\n    \t\tthis.getVis().selectAll('text')\n\t\t    \t.attr('dx', function(d) {\n\t\t    \t\tif (d.type === 'keyword') {\n\t\t    \t\t\treturn -d.bbox.width*0.5;\n\t\t\t    \t} else {\n\t\t\t    \t\treturn 8;\n\t\t\t    \t}\n\t    \t\t})\n\t\t\t\t.attr('dy', function(d) {\n\t\t\t\t\tif (d.type === 'keyword') {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn d.bbox.height*0.5+4;\n\t\t\t\t\t}\n\t\t\t\t});\n    \t}\n    \tthis.getVis().selectAll('line').call(this.applyLinkStyle.bind(this));\n    \t\n    \t\n    \tthis.getVisLayout().nodes(nodeData);\n    \tthis.getVisLayout().force('link').links(linkData);\n    \tthis.getVisLayout().alpha(1).restart();\n    },\n    \n    isOffCanvas: function(x, y) {\n    \tvar vis = Ext.get(this.getVisId());\n    \treturn x < 0 || y < 0 || x > vis.getWidth() || y > vis.getHeight();\n    },\n    \n    zoomToFit: function(paddingPercent, transitionDuration) {\n    \tvar bounds = this.getVis().node().getBBox();\n    \tvar width = bounds.width;\n    \tvar height = bounds.height;\n    \tvar midX = bounds.x + width/2;\n    \tvar midY = bounds.y + height/2;\n    \tvar svg = this.getVis().node().parentElement;\n    \tvar svgRect = svg.getBoundingClientRect();\n    \tvar fullWidth = svgRect.width;\n    \tvar fullHeight = svgRect.height;\n    \tvar scale = (paddingPercent || 0.8) / Math.max(width/fullWidth, height/fullHeight);\n    \tvar translate = [fullWidth/2 - scale*midX, fullHeight/2 - scale*midY];\n    \tif (width<1) {return} // FIXME: something strange with spyral\n     \t\n    \td3.select(svg)\n    \t\t.transition()\n    \t\t.duration(transitionDuration || 500)\n    \t\t.call(this.getZoom().transform, d3.zoomIdentity.translate(translate[0],translate[1]).scale(scale));\n    },\n \n    applyNodeStyle: function(sel, nodeState) {\n\t\tvar state = nodeState === undefined ? 'normal' : nodeState;\n    \tsel.style('fill', function(d) { var type = d.type+'Node'; return this.getGraphStyle()[type][state].fill; }.bind(this));\n    \tsel.style('stroke', function(d) { var type = d.type+'Node'; return this.getGraphStyle()[type][state].stroke; }.bind(this));\n    },\n    \n    applyLinkStyle: function(sel, linkState) {\n    \tvar state = linkState === undefined ? 'normal' : linkState;\n    \tsel.style('stroke', function(d) { return this.getGraphStyle().link[state].stroke; }.bind(this));\n    \tsel.style('stroke-opacity', function(d) { return this.getGraphStyle().link[state].strokeOpacity; }.bind(this));\n    },\n    \n    linkMouseOver: function(e, d) {\n    \tthis.getVis().selectAll('line').call(this.applyLinkStyle.bind(this));\n    \tthis.getVis().select('#'+d.id).call(this.applyLinkStyle.bind(this), 'highlight');\n    },\n    \n    linkMouseOut: function(e, d) {\n    \tthis.getVis().selectAll('line').call(this.applyLinkStyle.bind(this));\n    },\n    \n    nodeMouseOver: function(e, d) {\n    \tthis.setCurrentNode(d);\n\t\t\n\t\tthis.getVis().selectAll('rect').call(this.applyNodeStyle.bind(this));\n\t\t\n\t\tthis.getLinks().each(function(link) {\n\t\t\tvar id;\n\t\t\tif (link.source.id == d.id) {\n\t\t\t\tid = link.target.id;\n\t\t\t} else if (link.target.id == d.id) {\n\t\t\t\tid = link.source.id;\n\t\t\t}\n\t\t\tif (id !== undefined) {\n\t\t\t\tthis.getVis().select('#'+id+' rect').call(this.applyNodeStyle.bind(this), 'highlight');\n\t\t\t\tthis.getVis().select('#'+link.id).call(this.applyLinkStyle.bind(this), 'highlight');\n\t\t\t}\n\t\t}.bind(this));\n\t\t\n\t\tthis.getVis().select('#'+d.id+' rect')\n\t\t\t.style('stroke-width', 3)\n\t\t\t.call(this.applyNodeStyle.bind(this), 'highlight');\n    },\n    \n    nodeMouseOut: function(e, d) {\n    \tif (!this.getContextMenu().isVisible()) {\n\t\t\tthis.setCurrentNode(undefined);\n\t\t}\n\t\t\n\t\tthis.getVis().selectAll('rect')\n\t\t\t.style('stroke-width', 1)\n\t\t\t.call(this.applyNodeStyle.bind(this));\n\t\t\n\t\tthis.getVis().selectAll('line')\n\t\t\t.call(this.applyLinkStyle.bind(this));\n    },\n    \n    fetchCollocatesForNode: function(d) {\n    \tvar limit = this.getApiParam('limit');\n    \tvar query = this.getApiParam(\"query\");\n    \t\n    \tvar query = Ext.Array.from(this.getApiParam(\"query\"));\n    \tExt.Array.include(query, d.term)\n\t\tthis.setApiParam(\"query\", query);\n\n    \tvar corpusCollocates = this.getCorpus().getCorpusCollocates({autoLoad: false});\n    \tcorpusCollocates.load({\n    \t\tparams: Ext.apply(this.getApiParams(), {query: d.term, start: d.start, limit: limit}),\n    \t\tcallback: function(records, operation, success) {\n    \t\t\tif (success) {\n    \t\t\t\tthis.updateDataForNode(d.id, {\n    \t\t\t\t\tstart: d.start+limit\n    \t\t\t\t});\n    \t    \t\t\n    \t    \t\tthis.loadFromCorpusCollocateRecords(records, d.id);\n    \t\t\t}\n    \t\t},\n    \t\tscope: this\n    \t});\n    }\n    \n});","/**\n * Constellations\n * TODO add word2vec\n * @class Constellations\n * @memberof Tools\n */\nExt.define('Voyant.panel.Constellations', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.constellations',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttitle: 'Constellations',\n\t\t\toptions: 'Options',\n\t\t\ttermSearch: 'Term Search',\n\t\t\tcutoff: 'Similarity Threshold',\n\t\t\tnumTerms: 'Terms',\n\t\t\tanalysis: 'Analysis',\n\t\t\tca: 'Correspondence Analysis',\n\t\t\tpca: 'Principal Component Analysis',\n\t\t\ttsne: 't-SNE',\n\t\t\thelp: 'Constellations produces a specialized network graph of high frequency terms that are connected by similar word vectors.',\n\t\t\thelpTip: 'Constellations produces a specialized network graph of high frequency terms that are connected by similar word vectors.'\n\t\t},\n\t\tapi: {\n\t\t\tanalysis: 'ca',\n\t\t\tdocId: undefined,\n\t\t\tlimit: 50,\n\t\t\tdimensions: 3,\n\t\t\tstopList: 'auto'\n\t\t},\n\t\tglyph: 'xf1e0@FontAwesome'\n\t},\n\t\n\tconfig: {\n\t\tcaStore: undefined,\n\t\tpcaStore: undefined,\n\t\ttsneStore: undefined,\n\n\t\tallNodeData: undefined,\n\t\tallEdgeData: undefined,\n\t\t\n\t\tsimCutoff: 25, // percent\n\t\tsimMin: 0,\n\t\tsimMax: 1,\n\t\tallSims: [],\n\t\tsimWin: undefined,\n\n\t\tvis: undefined,\n\t\tsimulation: undefined,\n\t\tphysics: {\n\t\t\tnodeGravity: -500,  // negative = repel, positive = attract\n\t\t\tspringLength: 50\n\t\t},\n\t\tzoom: undefined, // d3 zoom\n\t\tzoomExtent: [0.25, 8],\n\n\t\ttermSearchTimeout: null,\n\n\t\toptions: [{xtype: 'stoplistoption'}]\n\t},\n\t\n\tconstructor: function(config) {\n\t\tthis.callParent(arguments);\n\t\tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\t\n\tinitComponent: function() {\n\t\tthis.setCaStore(Ext.create('Voyant.data.store.CAAnalysis', {\n\t\t\tlisteners: { load: this.handleData, scope: this }\n\t\t}));\n\t\tthis.setPcaStore(Ext.create('Voyant.data.store.PCAAnalysis', {\n\t\t\tlisteners: { load: this.handleData, scope: this }\n\t\t}));\n\t\tthis.setTsneStore(Ext.create('Voyant.data.store.TSNEAnalysis', {\n\t\t\tlisteners: { load: this.handleData, scope: this }\n\t\t}));\n\n\t\tExt.apply(this, {\n\t\t\ttitle: this.localize('title'),\n\t\t\tlayout: 'border',\n\t\t\titems: [{\n\t\t\t\txtype: 'container',\n\t\t\t\tregion: 'center',\n\t\t\t\tlayout: 'fit',\n\t\t\t\tstyle: 'backgroundColor: #fff',\n\t\t\t\titems: {\n\t\t\t\t\txtype: 'component',\n\t\t\t\t\titemId: 'visParent'\n\t\t\t\t}\n\t\t\t},{\n\t\t\t\ttitle: this.localize('options'),\n\t\t\t\txtype: 'panel',\n\t\t\t\twidth: 200,\n\t\t\t\tregion: 'west',\n\t\t\t\tsplit: true,\n\t\t\t\tcollapsible: true,\n\t\t\t\tscrollable: 'y',\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\talign: 'stretch'\n\t\t\t\t},\n\t\t\t\tdefaults: {\n\t\t\t\t\txtype: 'button',\n\t\t\t\t\tmargin: '5',\n\t\t\t\t\tlabelAlign: 'top'\n\t\t\t\t},\n\t\t\t\titems: [{\n\t\t\t\t\txtype: 'documentselectorbutton'\n\t\t\t\t},{\n\t\t\t\t\ttext: this.localize('analysis'),\n\t\t\t\t\titemId: 'analysis',\n\t\t\t\t\tglyph: 'xf1ec@FontAwesome',\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t{text: this.localize('ca'), itemId: 'analysis_ca', group:'analysis', xtype: 'menucheckitem'},\n\t\t\t\t\t\t\t{text: this.localize('pca'), itemId: 'analysis_pca', group:'analysis', xtype: 'menucheckitem'},\n\t\t\t\t\t\t\t{text: this.localize('tsne'), itemId: 'analysis_tsne', group:'analysis', xtype: 'menucheckitem'}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\trender: function(field) {\n\t\t\t\t\t\t\t\tfield.child('#analysis_'+this.getApiParam('analysis')).setChecked(true);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tclick: function(menu, item) {\n\t\t\t\t\t\t\t\tif (item !== undefined) {\n\t\t\t\t\t\t\t\t\tvar analysis = item.getItemId().split('_')[1];\n\t\t\t\t\t\t\t\t\tif (analysis !== this.getApiParam('analysis')) {\n\t\t\t\t\t\t\t\t\t\tthis.setApiParam('analysis', analysis);\n\t\t\t\t\t\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: 'slider',\n\t\t\t\t\tfieldLabel: this.localize('numTerms'),\n\t\t\t\t\tminValue: 10,\n\t\t\t\t\tmaxValue: 250,\n\t\t\t\t\tincrement: 5,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\trender: function(field) {\n\t\t\t\t\t\t\tfield.setValue(this.getApiParam('limit'));\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchangecomplete: function(field, newVal) {\n\t\t\t\t\t\t\tthis.setApiParam('limit', newVal);\n\t\t\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\tfieldLabel: this.localize('termSearch'),\n\t\t\t\t\titemId: 'termSearch',\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tchange: function(field, term) {\n\t\t\t\t\t\t\tif (this.getTermSearchTimeout() !== null) {\n\t\t\t\t\t\t\t\tclearTimeout(this.getTermSearchTimeout());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.setTermSearchTimeout(setTimeout(this.updateGraph.bind(this), 500));\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: 'slider',\n\t\t\t\t\tfieldLabel: this.localize('cutoff'),\n\t\t\t\t\tminValue: 1,\n\t\t\t\t\tmaxValue: 100,\n\t\t\t\t\tincrement: 1,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\trender: function(field) {\n\t\t\t\t\t\t\tfield.setValue(this.getSimCutoff());\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchangecomplete: function(field, newVal) {\n\t\t\t\t\t\t\tthis.setSimCutoff(newVal);\n\t\t\t\t\t\t\tthis.updateGraph();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: 'container',\n\t\t\t\t\tlayout: 'fit',\n\t\t\t\t\titems: {\n\t\t\t\t\t\titemId: 'simGraph',\n\t\t\t\t\t\txtype: 'sparklineline',\n\t\t\t\t\t\tminSpotColor: '',\n\t\t\t\t\t\tmaxSpotColor: '',\n\t\t\t\t\t\tspotColor: '',\n\t\t\t\t\t\tdisableTooltips: true,\n\t\t\t\t\t\twidth: 200,\n\t\t\t\t\t\theight: 50\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}]\n\t\t});\n\n\t\tthis.on('boxready', function(src, corpus) {\n\t\t\t// this.initGraph();\n\t\t}, this);\n\t\t\n\t\tthis.on('loadedCorpus', function(src, corpus) {\n\t\t\tif (this.isVisible()) {\n\t\t\t\tthis.getCaStore().setCorpus(corpus);\n\t\t\t\tthis.getPcaStore().setCorpus(corpus);\n\t\t\t\tthis.getTsneStore().setCorpus(corpus);\n\t\t\t\tthis.loadFromApis();\n\t\t\t}\n\t\t}, this);\n\n\t\tthis.on('corpusSelected', function(src, corpus) {\n\t\t\tthis.setApiParam('docId', undefined);\n\t\t\tthis.loadFromApis();\n\t\t}, this);\n\t\tthis.on('documentsSelected', function(src, docIds) {\n\t\t\tthis.setApiParam('docId', docIds);\n\t\t\tthis.loadFromApis();\n\t\t}, this);\n\t\t\n\t\tthis.on('activate', function() { // load after tab activate (if we're in a tab panel)\n\t\t\tif (this.getCorpus()) {\n\t\t\t\t// only preloadEntities if there isn't already data\n\t\t\t\t// if (this.down('voyantnetworkgraph').getNodeData().length === 0) {\n\t\t\t\t// \tExt.Function.defer(this.preloadEntities, 100, this);\n\t\t\t\t// }\n\t\t\t}\n\t\t}, this);\n\t\t\n\t\tthis.on('query', function(src, query) {this.loadFromQuery(query);}, this);\n\t\t\n\t\tthis.callParent(arguments);\n\t},\n\n\tinitGraph: function(nodes, edges) {\n\t\tvar el = this.down('#visParent').getEl();\n\t\tel.update('');\n\t\tvar width = el.getWidth();\n\t\tvar height = el.getHeight();\n\t\t\n\t\tvar svg = d3.select(el.dom).append('svg').attr('width', width).attr('height', height);\n\t\tvar group = svg.append('g');\n\t\tgroup.append('g').attr('class', 'edges');\n\t\tgroup.append('g').attr('class', 'nodes');\n\t\tgroup.append('g').attr('class', 'labels');\n\t\tthis.setVis(group);\n\t\t\n\t\tvar zoom = d3.zoom()\n\t\t\t.scaleExtent(this.getZoomExtent())\n\t\t\t.on('zoom', function(event) {\n\t\t\t\tgroup.attr('transform', event.transform);\n\t\t\t});\n\t\tthis.setZoom(zoom);\n\t\tsvg.call(zoom);\n\n\t\tvar physics = this.getPhysics();\n\n\t\tthis.setSimulation(d3.forceSimulation(nodes)\n\t\t\t.force('x', d3.forceX(width/2))\n\t\t\t.force('y', d3.forceY(height/2))\n\t\t\t.force('link', d3.forceLink(edges).id(function(d) { return d.id; }).distance(physics.springLength))\n\t\t\t.force('charge', d3.forceManyBody().strength(physics.nodeGravity))\n\t\t\t.force('center', d3.forceCenter(width/2, height/2))\n\t\t\t.on('tick', function() {\n\t\t\t\tsvg.select('.edges').selectAll('line')\n\t\t\t\t\t.attr('x1', function(d) { return d.source.x; })\n\t\t\t\t\t.attr('y1', function(d) { return d.source.y; })\n\t\t\t\t\t.attr('x2', function(d) { return d.target.x; })\n\t\t\t\t\t.attr('y2', function(d) { return d.target.y; });\n\t\t\n\t\t\t\tsvg.select('.nodes').selectAll('circle')\n\t\t\t\t\t.attr('cx', function(d) { return d.x})\n\t\t\t\t\t.attr('cy', function(d) { return d.y});\n\n\t\t\t\tsvg.select('.labels').selectAll('text')\n\t\t\t\t\t.attr('x', function(d) { return d.x +15 })\n\t\t\t\t\t.attr('y', function(d) { return d.y +5 })\n\t\t\t\t\n\t\t\t\tif (this.getSimulation().alpha() < 0.075) {\n \t\t\t\t\tthis.stopSimulation();\n \t\t\t\t}\n\t\t\t}.bind(this))\n\t\t\t.on('end', function() {\n\t\t\t\tExt.Function.defer(this.zoomToFit, 100, this);\n\t\t\t}.bind(this))\n\t\t);\n\n\t\tthis.getSimulation().stop();\n\t},\n\n\tupdateGraph: function() {\n\t\tthis.stopSimulation();\n\n\t\tvar selectedTerm = this.down('#termSearch').getValue();\n\t\tconsole.log(selectedTerm);\n\t\t[nodes, edges] = this.doFilter(this.getAllNodeData(), this.getAllEdgeData(), selectedTerm);\n\n\t\tthis.getVis().select('.labels')\n\t\t\t.selectAll('text')\n\t\t\t.data(nodes)\n\t\t\t.join('text')\n\t\t\t\t.classed('hidden', false)\n\t\t\t\t.classed('label', true)\n\t\t\t\t.style('cursor', 'pointer')\n\t\t\t\t.attr('font-size', '16px')\n\t\t\t\t.attr('font-family', '\"Palatino Linotype\", \"Book Antiqua\", Palatino, serif')\n\t\t\t\t.text(function(d) { return d.id })\n\t\t\t\t.on('click', this.handleNodeClick.bind(this))\n\t\t\t\t.call(d3.drag()\n\t\t\t\t\t.on('start', this.handleDragStart.bind(this))\n\t\t\t\t\t.on('drag', this.handleDrag.bind(this))\n\t\t\t\t\t.on('end', this.handleDragEnd.bind(this))\n\t\t\t\t)\n\n\t\tthis.getVis().select('.nodes')\n\t\t\t.selectAll('circle')\n\t\t\t.data(nodes, function(d) { return d.id })\n\t\t\t.join('circle')\n\t\t\t\t.classed('node', true)\n\t\t\t\t.classed('selected', function(node) { return node.selected === true })\n\t\t\t\t.style('cursor', 'pointer')\n\t\t\t\t.style('stroke', function(node) { return node.selected ? '#ff8800' : '#6baed6' })\n\t\t\t\t.style('stroke-width', 1)\n\t\t\t\t.style('fill', function(node) { return node.selected ? '#ffcd93ff' : '#c6dbef' })\n\t\t\t\t.attr('r', function(node) {\n\t\t\t\t\tif (node.selected === true) {\n\t\t\t\t\t\treturn 20;\n\t\t\t\t\t}\n\t\t\t\t\treturn 10;\n\t\t\t\t})\n\t\t\t\t.on('click', this.handleNodeClick.bind(this))\n\t\t\t\t.call(d3.drag()\n\t\t\t\t\t.on('start', this.handleDragStart.bind(this))\n\t\t\t\t\t.on('drag', this.handleDrag.bind(this))\n\t\t\t\t\t.on('end', this.handleDragEnd.bind(this))\n\t\t\t\t)\n\t\t\n\t\tthis.getVis().select('.edges')\n\t\t\t.selectAll('line')\n\t\t\t.data(edges)\n\t\t\t.join('line')\n\t\t\t\t.classed('edge', true)\n\t\t\t\t.style('stroke', '#000')\n\t\t\t\t.style('stroke-opacity', 0.1)\n\n\t\tthis.getSimulation()\n\t\t\t.nodes(nodes)\n\t\t\t.force('link')\n\t\t\t\t.links(edges)\n\n\t\tthis.getSimulation().alpha(1).restart();\n\t},\n\n\tstopSimulation: function() {\n\t\tif (this.getSimulation()) {\n\t\t\tthis.getSimulation().alpha(-1);\n\t\t}\n\t},\n\n\thandleNodeClick: function(event, data) {\n\t\tevent.stopImmediatePropagation();\n\t\tevent.preventDefault();\n\t\tthis.dispatchEvent('termsClicked', this, [data.id]);\n\t},\n\n\thandleDragStart: function(event) {\n\t\tthis.getSimulation().alpha(0.3).restart();\n\t\tevent.subject.fx = event.subject.x;\n\t\tevent.subject.fy = event.subject.y;\n\t},\n\n\thandleDrag: function(event) {\n\t\tthis.getSimulation().alpha(0.3);\n\t\tevent.subject.fx = event.x;\n\t\tevent.subject.fy = event.y;\n\t},\n\n\thandleDragEnd: function(event) {\n\t\tevent.subject.fx = null;\n\t\tevent.subject.fy = null;\n\t},\n\n\tloadFromApis: function() {\n\t\tthis.stopSimulation();\n\n\t\tvar params = {};\n\t\tExt.apply(params, this.getApiParams());\n\t\tdelete params.analysis;\n\t\tif (this.getApiParam('analysis') === 'tsne') {\n\t\t\tthis.getTsneStore().load({\n\t\t\t\tparams: params\n\t\t\t});\n\t\t} else if (this.getApiParam('analysis') === 'pca') {\n\t\t\tthis.getPcaStore().load({\n\t\t\t\tparams: params\n\t\t\t});\n\t\t} else {\n\t\t\tthis.getCaStore().load({\n\t\t\t\tparams: params\n\t\t\t});\n\t\t}\n\t},\n\n\thandleData: function(store) {\n\t\tvar rec = store.getAt(0);\n\t\tvar tokens = rec.getTokens();\n\t\tvar data = tokens.map(function(token) { return token.getData(); });\n\t\tif (this.getApiParam('analysis') === 'ca') {\n\t\t\tdata = data.filter(function(d) { return d.category === 'term'; });\n\t\t}\n\t\n\t\tlet all_node_data = data.map(x => { return {id: x[\"term\"] }})\n\t\tlet all_edge_data = []\n\n\t\tvar sims = [];\n\t\t// Populate edge data with distances\n\t\tfor (let pairs of this.combinations(data)) {\n\t\t\tlet sim = this.distance(pairs[0][\"vector\"], pairs[1][\"vector\"]);\n\t\t\tall_edge_data.push({\n\t\t\t\t\"source\": pairs[0][\"term\"],\n\t\t\t\t\"target\": pairs[1][\"term\"],\n\t\t\t\t\"sim\": sim\n\t\t\t});\n\t\t\tsims.push(sim);\n\t\t}\n\t\t\n\t\tthis.setAllSims(sims.sort(function(a, b) { return a - b }));\n\n\t\tthis.setSimMin(this.arrayMin(sims));\n\t\tthis.setSimMax(this.arrayMax(sims));\n\t\tconsole.log(this.getSimMin(), this.getSimMax())\n\n\t\tthis.setAllNodeData(all_node_data);\n\t\tthis.setAllEdgeData(all_edge_data);\n\t\t\n\t\tthis.initGraph(all_node_data, all_edge_data);\n\t\tthis.updateGraph();\n\n\t\tthis.down('#simGraph').setValues(this.getAllSims());\n\t},\n\n\tdoFilter: function(nodes, edges, selection) {\n\t\tvar cutoffPercent = this.getSimCutoff() / 100;\n\t\tvar easedCutoff = this.easeIn(cutoffPercent);\n\t\tvar cutoff = this.map(easedCutoff, 0, 1, this.getSimMin(), this.getSimMax());\n\t\tconsole.log(cutoffPercent, easedCutoff, cutoff)\n\n\t\tvar valueSpot = {};\n\t\tvalueSpot[\"0:\"+cutoff] = \"#ff8800\";\n\t\tthis.down('#simGraph').setValueSpots(valueSpot);\n\n\t\tif (nodes === undefined || edges === undefined) return [[],[]];\n\n\t\tlet nodes_temp = new Set()\n\n\t\t// Filter out edges\n\t\tlet edges_filtered = edges.filter(edge => {\n\t\t\tif (edge.sim <= cutoff) {\n\t\t\t\tnodes_temp.add(edge.source.id)\n\t\t\t\tnodes_temp.add(edge.target.id)\n\t\t\t\treturn true\n\t\t\t}\n\t\t})\n\n\t\t// Filter out nodes\n\t\tlet nodes_filtered = nodes.filter(x => {\n\t\t\tx.selected = false\n\t\t\tif (x.id === selection) {\n\t\t\t\tx.selected = true\n\t\t\t\treturn true\n\t\t\t}\n\n\t\t\treturn nodes_temp.has(x[\"id\"])\n\t\t});\n\n\t\tif (nodes_filtered.length === 0) {\n\t\t\tconsole.warn('no nodes!')\n\t\t}\n\n\t\tconsole.log('num edges', edges_filtered.length);\n\n\t\treturn [nodes_filtered, edges_filtered];\n\t},\n\n\tdistance: function(source, target) {\n\t\t// This function returns the Euclidean distance between two arrays.\n\t\treturn Math.sqrt(source.reduce((sum, current, index) => {\n\t\t\tconst x = Math.pow(current - target[index], 2)\n\t\t\treturn sum + x\n\t\t}, 0));\n\t},\n\n\tcombinations: function*(items) {\n\t\t// This function will return all pairs of values in an iterable.\n\t\tfor (let row of items.entries()) {\n\t\t\tconst index = row[0];\n\t\t\tconst x = row[1];\n\n\t\t\tfor (let y of items.slice(index + 1)) {\n\t\t\t\tyield [x, y]\n\t\t\t}\n\t\t}\n\t},\n\n\tarrayMin: function(arr) {\n\t\tvar len = arr.length, min = Infinity;\n\t\twhile (len--) {\n\t\t\tif (arr[len] < min) {\n\t\t\t\tmin = arr[len];\n\t\t\t}\n\t\t}\n\t\treturn min;\n\t},\n\n\tarrayMax: function(arr) {\n\t\tvar len = arr.length, max = -Infinity;\n\t\twhile (len--) {\n\t\t\tif (arr[len] > max) {\n\t\t\t\tmax = arr[len];\n\t\t\t}\n\t\t}\n\t\treturn max;\n\t},\n\n\teaseIn: function(x) {\n\t\treturn x*x*x;\n\t},\n\n\tmap: function(value, istart, istop, ostart, ostop) {\n\t\treturn ostart + (ostop - ostart) * ((value - istart) / (istop - istart));\n\t},\n\n\tzoomToFit: function(paddingPercent, transitionDuration) {\n\t\tvar bounds = this.getVis().node().getBBox();\n\t\tvar width = bounds.width;\n\t\tvar height = bounds.height;\n\t\tvar midX = bounds.x + width/2;\n\t\tvar midY = bounds.y + height/2;\n\t\tvar svg = this.getVis().node().parentElement;\n\t\tvar svgRect = svg.getBoundingClientRect();\n\t\tvar fullWidth = svgRect.width;\n\t\tvar fullHeight = svgRect.height;\n\t\tvar scale = (paddingPercent || 0.8) / Math.max(width/fullWidth, height/fullHeight);\n\t\tvar translate = [fullWidth/2 - scale*midX, fullHeight/2 - scale*midY];\n\t\tif (width<1) {return} // FIXME: something strange with spyral\n\t\t\n\t\td3.select(svg)\n\t\t\t.transition()\n\t\t\t.duration(transitionDuration || 500)\n\t\t\t.call(this.getZoom().transform, d3.zoomIdentity.translate(translate[0],translate[1]).scale(scale));\n\t}\n\t\n});\n","/**\n * The Contexts (or Keywords in Context) tool shows each occurrence of a keyword with a bit of surrounding text (the context).\n * You can work with contexts programmatically using {@link Spyral.Corpus#contexts}.\n *\n * @example\n *\n * let config = {\n * \tcolumns: null,\n * \tcontext: 5,\n * \tdir: null,\n * \tdocId: null,\n * \tdocIndex: null,\n * \texpand: null,\n * \tquery: null,\n * \tsort: null,\n * \tstopList: null,\n * \ttermColors: null\n * };\n *\n * loadCorpus(\"austen\").tool(\"Contexts\", config);\n *\n * @class Contexts\n * @tutorial contexts\n * @memberof Tools\n */\nExt.define('Voyant.panel.Contexts', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\trequires: ['Voyant.data.store.Contexts'],\n\talias: 'widget.contexts',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.Contexts\n\t\t\t * @instance\n\t\t\t * @property {query}\n\t\t\t */\n    \t\tquery: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Contexts\n\t\t\t * @instance\n\t\t\t * @property {docId}\n\t\t\t */\n    \t\tdocId: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Contexts\n\t\t\t * @instance\n\t\t\t * @property {docIndex}\n\t\t\t */\n    \t\tdocIndex: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Contexts\n\t\t\t * @instance\n\t\t\t * @property {stopList}\n\t\t\t * @default\n\t\t\t */\n    \t\tstopList: 'auto',\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Contexts\n\t\t\t * @instance\n\t\t\t * @property {context}\n\t\t\t * @default\n\t\t\t */\n    \t\tcontext: 5,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Contexts\n\t\t\t * @instance\n\t\t\t * @property {Number} expand  How many terms to show when you expand any given row\n\t\t\t * @default\n\t\t\t */\n    \t\texpand: 50,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Contexts\n\t\t\t * @instance\n\t\t\t * @property {columns} columns 'docIndex', 'left', 'term', 'right', 'position'\n\t\t\t */\n\t\t\tcolumns: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Contexts\n\t\t\t * @instance\n\t\t\t * @property {sort}\n\t\t\t */\n\t\t\tsort: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Contexts\n\t\t\t * @instance\n\t\t\t * @property {dir}\n\t\t\t */\n\t\t\tdir: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Contexts\n\t\t\t * @instance\n\t\t\t * @property {termColors}\n\t\t\t * @default\n\t\t\t */\n\t\t\ttermColors: 'categories'\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'},{xtype: 'termcolorsoption'}]\n    },\n    constructor: function() {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        Ext.apply(me, { \n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n            store : Ext.create(\"Voyant.data.store.ContextsBuffered\", {\n            \tparentPanel: this,\n            \tproxy: {\n            \t\textraParams: {\n                    \tstripTags: \"all\"            \t\t\t\n            \t\t}\n            \t}\n//            \tsortOnLoad: true,\n//            \tsorters: {\n//                    property: 'position',\n//                    direction: 'ASC'\n//            \t}\n            }),\n    \t\tselModel: {\n    \t\t\ttype: 'rowmodel',\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n                    \t\tthis.getApplication().dispatchEvent('termLocationClicked', this, selections);\n                    \t},\n                    \tscope: this\n                    }\n                }\n            },\n            plugins: [{ // the expander slider assumes there's only one plugin, needs to be updated if changed\n                ptype: 'rowexpander',\n                rowBodyTpl : new Ext.XTemplate('')\n            }],\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                }, {\n                    xtype: 'totalpropertystatus'\n                }, this.localize('context'), {\n                \txtype: 'slider',\n                \tminValue: 5,\n                \tvalue: 5,\n                \tmaxValue: 50,\n                \tincrement: 5,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(me.getApiParam('context'));\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tme.setApiParam(\"context\", slider.getValue());\n           \t\t        \tme.getStore().clearAndLoad({params: me.getApiParams()});\n                \t\t}\n                \t}\n                }, this.localize('expand'), {\n                \txtype: 'slider',\n                \tminValue: 5,\n                \tvalue: 5,\n                \tmaxValue: 500,\n                \tincrement: 10,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(me.getApiParam('expand'));\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tme.setApiParam('expand', newValue);\n                \t\t\tvar view = me.getView();\n                \t\t\tvar recordsExpanded = me.plugins[0].recordsExpanded;\n                \t\t\tvar store = view.getStore();\n                \t\t\tfor (var id in recordsExpanded) {\n                \t\t\t\tvar record = store.getByInternalId(id);\n            \t\t\t\t\tvar row = view.getRow(record);\n            \t\t\t\t\tvar expandRow = row.parentNode.childNodes[1];\n                \t\t\t\tif (recordsExpanded[id]) {\n                \t\t\t\t\tview.fireEvent(\"expandbody\", row, record, expandRow, {force: true});\n                \t\t\t\t} else {\n                \t\t\t\t\tExt.fly(expandRow).down('.x-grid-rowbody').setHtml('');\n                \t\t\t\t}\n                \t\t\t}\n                \t\t}\n                \t}\n                },{\n        \t\t\txtype: 'corpusdocumentselector'\n        \t\t}]\n            }],\n    \t\tcolumns: [{\n    \t\t\ttext: this.localize(\"document\"),\n    \t\t\ttooltip: this.localize(\"documentTip\"),\n                width: 'autoSize',\n        \t\tdataIndex: 'docIndex',\n                sortable: true,\n                renderer: function (value, metaData, record, rowIndex, colIndex, store) {\n                \treturn store.getCorpus().getDocument(value).getTitle();\n                }\n            },{\n    \t\t\ttext: this.localize(\"left\"),\n    \t\t\ttooltip: this.localize(\"leftTip\"),\n    \t\t\talign: 'right',\n        \t\tdataIndex: 'left',\n                sortable: true,\n                flex: 1\n            },{\n    \t\t\ttext: this.localize(\"term\"),\n    \t\t\ttooltip: this.localize(\"termTip\"),\n        \t\tdataIndex: 'term',\n                sortable: true,\n                width: 'autoSize',\n\t\t\t\txtype: 'coloredtermfield'\n            },{\n    \t\t\ttext: this.localize(\"right\"),\n    \t\t\ttooltip: this.localize(\"rightTip\"),\n        \t\tdataIndex: 'right',\n                sortable: true,\n                flex: 1\n            },{\n    \t\t\ttext: this.localize(\"position\"),\n    \t\t\ttooltip: this.localize(\"positionTip\"),\n        \t\tdataIndex: 'position',\n                sortable: true,\n                hidden: true,\n                flex: 1\n            }],\n            listeners: {\n            \tscope: this,\n\t\t\t\tcorpusSelected: function() {\n\t\t\t\t\tif (this.getStore().getCorpus()) {\n\t\t\t\t\t\tthis.setApiParams({docId: undefined, docIndex: undefined})\n\t\t\t\t\t\tthis.getStore().clearAndLoad()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\tdocumentsSelected: function(src, docs) {\n\t\t\t\t\tvar docIds = [];\n\t\t\t\t\tvar corpus = this.getStore().getCorpus();\n\t\t\t\t\tdocs.forEach(function(doc) {\n\t\t\t\t\t\tdocIds.push(corpus.getDocument(doc).getId())\n\t\t\t\t\t}, this);\n\t\t\t\t\tthis.setApiParams({docId: docIds, docIndex: undefined})\n\t\t\t\t\tthis.getStore().clearAndLoad()\n\t\t\t\t},\n\n            \tdocumentSegmentTermClicked: {\n\t           \t\t fn: function(src, documentSegmentTerm) {\n\t           \t\t\t if (!documentSegmentTerm.term) {return;}\n\t           \t\t\t params = {query: documentSegmentTerm.term};\n\t           \t\t\t if (documentSegmentTerm.docId) {\n\t           \t\t\t\t params.docId = documentSegmentTerm.docId;\n\t           \t\t\t }\n\t           \t\t\t else {\n\t           \t\t\t\t // default to first document\n\t           \t\t\t\t params.docIndex = documentSegmentTerm.docIndex ?  documentSegmentTerm.docIndex : 0;\n\t           \t\t\t }\n\t           \t\t\t this.setApiParams(params);\n\t       \t        \tif (this.isVisible()) {\n\t       \t\t        \tthis.getStore().clearAndLoad()\n\t       \t        \t}\n\t           \t\t },\n\t           \t\t scope: this\n            \t},\n\t           \t documentIndexTermsClicked: {\n\t           \t\t fn: function(src, documentIndexTerms) {\n\t           \t\t\t// this isn't quite right, since we want every term associated with a docIndex, but for now it will do\n\t           \t\t\tvar queriesHash = {};\n\t           \t\t\tvar queries = [];\n\t           \t\t\tvar docIndexHash = {};\n\t           \t\t\tvar docIndex = [];\n\t           \t\t\tdocumentIndexTerms.forEach(function(item) {\n\t           \t\t\t\tif (!queriesHash[item.term]) {\n\t           \t\t\t\t\tqueries.push(item.term);\n\t           \t\t\t\t\tqueriesHash[item.term]=true;\n\t           \t\t\t\t}\n\t           \t\t\t\tif (!docIndexHash[item.docIndex]) {\n\t           \t\t\t\t\tdocIndex.push(item.docIndex);\n\t           \t\t\t\t\tdocIndexHash[item.docIndex]=true;\n\t           \t\t\t\t}\n\t           \t\t\t});\n\t       \t        \tthis.setApiParams({\n\t       \t        \t\tdocId: undefined,\n\t       \t        \t\tdocIndex: docIndex,\n\t       \t        \t\tquery: queries\n\t       \t        \t});\n\t       \t        \tif (this.isVisible()) {\n\t       \t\t        \tthis.getStore().clearAndLoad({params: this.getApiParams()});\n\t       \t        \t}\n\t           \t\t },\n\t           \t\t scope: this\n\t           \t },\n                 afterrender: function(me) {\n                \t me.getView().on('expandbody', function( rowNode, record, expandRow, eOpts ) {\n                \t\t if (expandRow.textContent===\"\" || (eOpts && eOpts.force)) {\n                \t            var store = Ext.create(\"Voyant.data.store.Contexts\", {\n                \t            \tstripTags: \"all\",\n                \t            \tcorpus: me.getStore().getCorpus()\n                \t            });\n                \t            var data = record.getData();\n\t\t\t\t\t\t\t\tvar query = data.query;\n\t\t\t\t\t\t\t\tif (query.match(/^[\\^@]/) !== null) {\n\t\t\t\t\t\t\t\t\tquery = data.term; // if it's a category query then use term instead\n\t\t\t\t\t\t\t\t}\n                \t            store.load({\n                \t            \tparams: {\n                    \t            \tquery: query,\n                    \t            \tdocIndex: data.docIndex,\n                    \t            \tposition: data.position,\n                    \t            \tlimit: 1,\n                    \t            \tcontext: me.getApiParam('expand')\n                \t            \t},\n                \t                callback: function(records, operation, success) {\n                \t                \tif (success && records.length==1) {\n                \t                \t\tdata = records[0].getData();\n                \t                \t\tExt.fly(operation.expandRow).down('.x-grid-rowbody').setHtml(data.left + \" <span class='word keyword'>\" + data.middle + \"</span> \" + data.right);\n                \t                \t}\n                \t                },\n                \t                expandRow: expandRow\n                \t            });\n                \t            \n                \t\t }\n                \t });\n                 }\n\n            }\n        });\n        \n        me.on(\"loadedCorpus\", function(src, corpus) {\n        \tif (this.hasCorpusAccess(corpus)==false) {\n        \t\tthis.mask(this.localize('limitedAccess'), 'mask-no-spinner');\n        \t}\n        \telse {\n\t\t\t\tvar query = Ext.Array.from(this.getApiParam(\"query\"));\n\t\t\t\tif (query.length > 0 && query[0].match(/^[\\^@]/) !== null) {\n\t\t\t\t\t// query is a category so just load\n\t\t\t\t\tthis.getStore().clearAndLoad({params: this.getApiParams()});\n\t\t\t\t} else {\n\t\t\t\t\tvar corpusTerms = corpus.getCorpusTerms({autoLoad: false});\n\t\t\t\t\tcorpusTerms.load({\n\t\t\t\t\t\tcallback: function(records, operation, success) {\n\t\t\t\t\t\t\tif (success && records.length>0) {\n\t\t\t\t\t\t\t\tthis.setApiParam(\"query\", [records[0].getTerm()]);\n\t\t\t\t\t\t\t\tthis.getStore().clearAndLoad({params: this.getApiParams()});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: me,\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tlimit: 1,\n\t\t\t\t\t\t\tquery: query,\n\t\t\t\t\t\t\tstopList: this.getApiParam(\"stopList\"),\n\t\t\t\t\t\t\tforTool: 'contexts'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n        \t}\n        });\n        \n        me.on(\"query\", function(src, query) {\n        \tthis.setApiParam('query', query);\n        \tthis.getStore().clearAndLoad({params: this.getApiParams()});\n        }, me);\n        \n        me.on(\"documentTermsClicked\", function(src, documentTerms) {\n        \tvar documentIndexTerms = [];\n        \tdocumentTerms.forEach(function(documentTerm) {\n        \t\tdocumentIndexTerms.push({\n        \t\t\tterm: documentTerm.getTerm(),\n        \t\t\tdocIndex: documentTerm.getDocIndex()\n        \t\t});\n        \t});\n        \tthis.fireEvent(\"documentIndexTermsClicked\", this, documentIndexTerms);\n        });\n        \n        me.on(\"termsClicked\", function(src, terms) {\n        \tvar documentIndexTerms = [];\n        \tif (Ext.isString(terms)) {terms = [terms];}\n        \tterms.forEach(function(term) {\n        \t\tif (term.docIndex !== undefined) {\n            \t\tdocumentIndexTerms.push({\n            \t\t\tterm: term.term,\n            \t\t\tdocIndex: term.docIndex\n            \t\t});\n        \t\t}\n        \t});\n        \tif (documentIndexTerms.length > 0) {\n        \t\tthis.fireEvent(\"documentIndexTermsClicked\", this, documentIndexTerms);\n        \t}\n        });\n\n    \tme.callParent(arguments);\n     }\n     \n});","/**\n * Corpus Collocates is a table view of which terms appear more frequently in proximity to keywords across the entire corpus.\n * You can work with collocates programmatically using {@link Spyral.Corpus#collocates}.\n *\n * @example\n *\n * let config = {\n * \tcolumns: null,\n * \tcontext: null,\n * \tdir: null,\n * \tdocId: null,\n * \tdocIndex: null,\n * \tquery: null,\n * \tsort: null,\n * \tstopList: null,\n * \ttermColors: null\n * };\n *\n * loadCorpus(\"austen\").tool(\"CorpusCollocates\", config);\n *\n *\n * @class CorpusCollocates\n * @tutorial corpuscollocates\n * @memberof Tools\n */\nExt.define('Voyant.panel.CorpusCollocates', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.corpuscollocates',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.CorpusCollocates\n\t\t\t * @instance\n\t\t\t * @property {stopList}\n\t\t\t * @default\n\t\t\t */\n    \t\tstopList: 'auto',\n\n\t\t\t/**\n\t\t\t * @memberof Tools.CorpusCollocates\n\t\t\t * @instance\n\t\t\t * @property {context}\n\t\t\t * @default\n\t\t\t */\n    \t\tcontext: 5,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.CorpusCollocates\n\t\t\t * @instance\n\t\t\t * @property {query}\n\t\t\t */\n    \t\tquery: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.CorpusCollocates\n\t\t\t * @instance\n\t\t\t * @property {docId}\n\t\t\t */\n    \t\tdocId: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.CorpusCollocates\n\t\t\t * @instance\n\t\t\t * @property {docIndex}\n\t\t\t */\n    \t\tdocIndex: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.CorpusCollocates\n\t\t\t * @instance\n\t\t\t * @property {columns} columns 'term', 'rawFreq', 'contextTerm', 'contextTermRawFreq'\n\t\t\t */\n\t\t\tcolumns: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.CorpusCollocates\n\t\t\t * @instance\n\t\t\t * @property {sort}\n\t\t\t */\n\t\t\tsort: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.CorpusCollocates\n\t\t\t * @instance\n\t\t\t * @property {dir}\n\t\t\t */\n\t\t\tdir: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.CorpusCollocates\n\t\t\t * @instance\n\t\t\t * @property {termColors}\n\t\t\t * @default\n\t\t\t */\n\t\t\ttermColors: 'categories'\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'},{xtype: 'termcolorsoption'}]\n    },\n    constructor: function(config) {\n    \t\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tif (this.isVisible()) {\n    \t\t\tthis.loadFromApis();\n    \t\t}\n    \t});\n    \t\n    \tif (config.embedded) {\n//    \t\tvar cls = Ext.getClass(config.embedded).getName();\n//    \t\tif (cls==\"Voyant.data.store.DocumentTerms\" || cls==\"Voyant.data.model.Document\") {\n//    \t\t\tthis.fireEvent('loadedCorpus', this, config.embedded.getCorpus())\n//    \t\t}\n    \t}\n    \telse if (config.corpus) {\n    \t\tthis.fireEvent('loadedCorpus', this, config.corpus)\n    \t}\n    \t\n    \tthis.on(\"corpusTermsClicked\", function(src, terms) {\n    \t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n        \t\tvar query = [];\n        \t\tterms.forEach(function(term) {\n        \t\t\tquery.push(term.get(\"term\"));\n        \t\t})\n        \t\tthis.setApiParams({\n        \t\t\tquery: query,\n        \t\t\tdocId: undefined,\n        \t\t\tdocIndex: undefined\n        \t\t});\n        \t\tif (this.isVisible()) {\n            \t\tthis.loadFromApis();\n        \t\t}\n    \t\t}\n    \t});\n    \t\n    \tthis.on(\"documentsClicked\", function(src, documents) {\n    \t\tvar docIds = [];\n    \t\tdocuments.forEach(function(doc) {docIds.push(doc.get('id'))});\n    \t\tthis.setApiParams({\n    \t\t\tdocId: docIds,\n    \t\t\tdocid: undefined,\n    \t\t\tquery: undefined\n    \t\t})\n    \t\tif (this.isVisible()) {\n        \t\tthis.loadFromApis();\n    \t\t}\n    \t});\n    \t\n    \tthis.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (this.getStore().getCorpus()) {this.loadFromApis()}\n    \t}, this)\n    \t\n    \tthis.on(\"query\", function(src, query) {\n\t\t\tif (query.length === 0) query = undefined;\n    \t\tthis.setApiParam(\"query\", query);\n    \t\tthis.getStore().getProxy().setExtraParam(\"query\", query);\n    \t\tthis.loadFromApis();\n    \t}, this)\n    },\n    \n    loadFromApis: function() {\n    \tif (this.getStore().getCorpus()) {\n    \t\tif (this.getApiParam('query')) {\n    \t\t\tthis.getStore().clearAndLoad({params: this.getApiParams()});\n    \t\t}\n    \t\telse {\n\t\t\t\tvar corpusTerms = this.getStore().getCorpus().getCorpusTerms({\n\t\t\t\t\tleadingBufferZone: 0,\n\t\t\t\t\tautoLoad: false\n\t\t\t\t});\n        \t\tcorpusTerms.load({\n        \t\t    callback: function(records, operation, success) {\n        \t\t    \tif (success) {\n        \t\t    \t\tvar terms = [];\n        \t\t    \t\trecords.forEach(function(term) {\n        \t\t    \t\t\tterms.push(term.getTerm());\n        \t\t    \t\t})\n        \t\t    \t\tthis.getStore().getProxy().setExtraParam(\"query\", terms);\n        \t\t    \t\tthis.setApiParam('query', terms);\n        \t\t    \t\tthis.loadFromApis();\n        \t\t    \t}\n        \t\t    },\n        \t\t    scope: this,\n        \t\t    params: {\n        \t\t\t\tlimit: 10,\n        \t\t\t\tstopList: this.getApiParam(\"stopList\")\n        \t\t\t}\n            \t});\n\n    \t\t}\n    \t}\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        var store = Ext.create(\"Voyant.data.store.CorpusCollocatesBuffered\", {parentPanel: this});\n        \n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n            store : store,\n    \t\tselModel: Ext.create('Ext.selection.CheckboxModel', {\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n\t\t\t\t\t\t\tif (selections.length > 0) {\n\t\t\t\t\t\t\t\tvar terms = [];\n\t\t\t\t\t\t\t\tvar context = this.getApiParam(\"context\")\n\t\t\t\t\t\t\t\tselections.forEach(function(selection) {\n\t\t\t\t\t\t\t\t\tterms.push('\"'+selection.getKeyword()+\" \"+selection.getContextTerm()+'\"~'+context)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tthis.getApplication().dispatchEvent('termsClicked', this, terms);\n\t\t\t\t\t\t\t}\n                    \t},\n                    \tscope: this\n                    }\n                }\n            }),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                }, {\n                    xtype: 'totalpropertystatus'\n                }, this.localize('context'), {\n                \txtype: 'slider',\n                \tminValue: 1,\n                \tvalue: 5,\n                \tmaxValue: 30,\n                \tincrement: 2,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(me.getApiParam('context'))\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tme.setApiParam(\"context\", slider.getValue());\n\t\t\t\t\t\t\tme.loadFromApis();\n                \t\t}\n                \t}\n                },{\n        \t\t\txtype: 'corpusdocumentselector'\n        \t\t}]\n            }],\n    \t\tcolumns: [{\n    \t\t\ttext: this.localize(\"term\"),\n        \t\tdataIndex: 'term',\n            \ttooltip: this.localize(\"termTip\"),\n                sortable: true,\n                flex: 1,\n\t\t\t\txtype: 'coloredtermfield',\n\t\t\t\tuseCategoriesMenu: true\n            },{\n    \t\t\ttext: this.localize(\"rawFreq\"),\n        \t\tdataIndex: 'rawFreq',\n            \ttooltip: this.localize(\"termRawFreqTip\"),\n                sortable: true,\n                width: 'autoSize',\n                hidden: true\n            },{\n            \ttext: this.localize(\"contextTerm\"),\n            \tdataIndex: 'contextTerm',\n            \ttooltip: this.localize(\"contextTermTip\"),\n            \tflex: 1,\n            \tsortable: true,\n\t\t\t\txtype: 'coloredtermfield'\n            },{\n            \ttext: this.localize(\"contextTermRawFreq\"),\n            \ttooltip: this.localize(\"contextTermRawFreqTip\"),\n            \tdataIndex: 'contextTermRawFreq',\n            \twidth: 'autoSize',\n            \tsortable: true\n            }/*,{\n                xtype: 'widgetcolumn',\n                text: this.localize(\"trend\"),\n                tooltip: this.localize('trendTip'),\n                width: 120,\n                dataIndex: 'distributions',\n                widget: {\n                    xtype: 'sparklineline'\n                }\n            }*/],\n            \n            listeners: {\n\t\t\t\tscope: this,\n            \ttermsClicked: function(src, terms) {\n\t\t\t\t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n\t\t\t\t\t\tvar queryTerms = [];\n\t\t\t\t\t\tterms.forEach(function(term) {\n\t\t\t\t\t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n\t\t\t\t\t\t\telse if (term.term) {queryTerms.push(term.term);}\n\t\t\t\t\t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (queryTerms.length > 0) {\n\t\t\t\t\t\t\tthis.setApiParams({\n\t\t\t\t\t\t\t\tdocIndex: undefined,\n\t\t\t\t\t\t\t\tdocId: undefined,\n\t\t\t\t\t\t\t\tquery: queryTerms\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (this.isVisible()) {\n\t\t\t\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tcorpusSelected: function() {\n\t\t\t\t\tif (this.getStore().getCorpus()) {\n\t\t\t\t\t\tthis.setApiParams({docId: undefined, docIndex: undefined})\n\t\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\tdocumentsSelected: function(src, docs) {\n\t\t\t\t\tvar docIds = [];\n\t\t\t\t\tvar corpus = this.getStore().getCorpus();\n\t\t\t\t\tdocs.forEach(function(doc) {\n\t\t\t\t\t\tdocIds.push(corpus.getDocument(doc).getId())\n\t\t\t\t\t}, this);\n\t\t\t\t\tthis.setApiParams({docId: docIds, docIndex: undefined});\n\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t}\n            }\n        });\n\n        me.callParent(arguments);\n        \n        me.getStore().getProxy().setExtraParam(\"withDistributions\", true);\n        \n    }\n    \n})","Ext.define('Voyant.widget.CorpusTermSummary', {\n    extend: 'Ext.panel.Panel',\n    mixins: ['Voyant.panel.Panel'],\n    alias: 'widget.corpustermsummary',\n    statics: {\n        i18n: {\n        },\n        api: {\n            stopList: 'auto',\n            query: undefined,\n            limit: 5\n        }\n    },\n    config: {\n        corpus: undefined,\n        record: undefined, // Voyant.data.model.CorpusTerm\n        collocatesStore: undefined,\n        correlationsStore: undefined,\n        phrasesStore: undefined,\n        documentTermsStore: undefined\n    },\n    cls: 'corpus-term-summary',\n\n    constructor: function(config) {\n        if (config.record === undefined) {\n            console.warn('CorpusTermSummary: no config.record!');\n            return false;\n        }\n        \n        Ext.apply(this, {\n            items: {\n                itemId: 'main',\n                minHeight: 200,\n                scrollable: true,\n                margin: 5\n            },\n            dockedItems: {\n                dock: 'bottom',\n                xtype: 'toolbar',\n                items: {\n                    fieldLabel: this.localize('items'),\n                    labelWidth: 40,\n                    width: 120,\n                    xtype: 'slider',\n                    increment: 5,\n                    minValue: 5,\n                    maxValue: 59,\n                    listeners: {\n                        boxready: function(slider) {\n                            slider.setValue(this.getApiParam('limit'));\n                        },\n                        changecomplete: function(slider, newvalue) {\n                            this.setApiParam('limit', newvalue);\n                            this.loadStuff();\n                        },\n                        scope: this\n                    }\n                }\n            },\n            listeners: {\n                boxready: function() {\n                    this.body.on('click', function(e) {\n                        var target = e.getTarget(null, null, true);\n                        if (target && target.dom.tagName == 'A') {\n                            if (target.hasCls('corpus-type')) {\n                                this.dispatchEvent('termsClicked', this, [target.getHtml()]);\n                            }\n                        }\n                    }, this, {stopPropagation: true});\n                    \n                    this.getDockedItems().forEach(function(i) {\n                       i.getEl().on('click', null, this, {stopPropagation: true}); // stop owner container from receiving clicks\n                    });\n                    \n                    this.loadStuff();\n                },\n                scope: this\n            }\n        });\n        \n        Ext.applyIf(config, {\n            title: this.localize('title')+config.record.getTerm()\n        });\n\n        this.callParent(arguments);\n        this.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n        \n        var corpus = this.getRecord().store.getCorpus();\n        this.setCorpus(corpus);\n\n        this.setApiParam('query', this.getRecord().getTerm());\n        \n        this.setCollocatesStore(Ext.create('Voyant.data.store.CorpusCollocates', { corpus: corpus }));\n        this.setCorrelationsStore(Ext.create('Voyant.data.store.TermCorrelations', {\n            corpus: corpus,\n            listeners: {\n                beforeload: function(store) {\n                    if (corpus.getDocumentsCount() === 1) {\n                        store.getProxy().setExtraParam('tool', 'corpus.DocumentTermCorrelations');\n                    } else {\n                        store.getProxy().setExtraParam('tool', 'corpus.CorpusTermCorrelations');\n                    }\n                }\n            }\n        }));\n        this.setPhrasesStore(Ext.create('Voyant.data.store.CorpusNgrams', { corpus: corpus }));\n        this.setDocumentTermsStore(Ext.create('Voyant.data.store.DocumentTerms', { corpus: corpus }));\n        \n    },\n\n    loadStuff: function() {\n        this.getComponent('main').removeAll();\n        \n        var docIndexes = [];\n        for (var i = 0; i < this.getCorpus().getDocumentsCount(); i++) {\n            docIndexes[i] = i;\n        }\n        this.getComponent('main').add({\n            xtype: 'container',\n            cls: 'section',\n            layout: 'hbox',\n            align: 'bottom',\n            items: [{\n                xtype: 'container',\n                html: '<div class=\"header\">'+this.localize('distribution')+'</div>'\n            },{\n                itemId: 'distLine',\n                xtype: 'sparklineline',\n                values: [],\n                height: 20,\n                width: 200\n            }],\n            listeners: {\n                afterrender: function(container) {\n                    container.mask(this.localize('loading'));\n                    this.getDocumentTermsStore().load({\n                        params: {\n                            query: this.getApiParam('query'),\n                            docIndex: docIndexes,\n                            withDistributions: true,\n                            bins: parseInt(this.getApiParam('limit'))*2\n                        },\n                        callback: function(records, op, success) {\n                            if (success && records && records.length>0) {\n                                // sort by docIndex\n                                records.sort(function(a, b) { return a.getDocIndex() - b.getDocIndex(); });\n                                var arrays = records.map(function(r) { return r.getDistributions(); });\n                                var values = arrays.reduce(function(a,b) { return a.concat(b); });\n                                values = values.map(function(val) { return Math.floor(val*1000000); });\n                                this.down('#distLine').setValues(values);\n                                container.unmask();\n                            }\n                        },\n                        scope: this\n                    });\n                },\n                scope: this\n            }\n        });\n        \n        this.addSection(\n            this.localize('collocates'), this.getCollocatesStore(), this.getApiParams(),\n            '<tpl for=\".\" between=\"; \"><a href=\"#\" onclick=\"return false\" class=\"corpus-type keyword\" voyant:recordId=\"{term}\">{term}</a><span style=\"font-size: smaller\"> ({val})</span></tpl>',\n            function(r) {\n                return {term: r.getContextTerm(), val: r.getContextTermRawFreq()}\n            }\n        );\n        \n        this.addSection(\n            this.localize('correlations'), this.getCorrelationsStore(), this.getApiParams(),\n            '<tpl for=\".\" between=\"; \"><a href=\"#\" onclick=\"return false\" class=\"corpus-type keyword\" voyant:recordId=\"{term}\">{term}</a><span style=\"font-size: smaller\"> ({val})</span></tpl>',\n            function(r) {\n                return {term: r.get('sourceTerm'), val: r.get('source').rawFreq}\n            }\n        );\n        \n        this.addSection(\n            this.localize('phrases'), this.getPhrasesStore(), Ext.apply({minLength: 3, sort: 'length'}, this.getApiParams()),\n            '<tpl for=\".\"><div>&ldquo;{phrase}&rdquo;</div></tpl>',\n            function(r) {\n                return {phrase: r.getTerm()}\n            }\n        );\n    },\n    \n    addSection: function(title, store, params, template, mapping) {\n        return this.getComponent('main').add({\n            xtype: 'container',\n            html: '<div class=\"header\">'+title+'</div>',\n            cls: 'section',\n            listeners: {\n                afterrender: function(container) {\n                    container.mask(this.localize('loading'));\n                    store.load({\n                        params: params,\n                        callback: function(records, op, success) {\n\t\t\t\t\t\t\tcontainer.unmask();\n                            if (success && records && records.length>0) {\n                                Ext.dom.Helper.append(container.getTargetEl().first().first(),\n                                    new Ext.XTemplate('<div class=\"contents\">'+template+'</div>').apply(records.map(mapping))\n                                );\n                            }\n                        }\n                    });\n                },\n                scope: this\n            }\n        });\n    }\n});\n","/**\n * The Correlations tool enables an exploration of the extent to which term frequencies vary in sync (terms whose frequencies rise and fall together or inversely).\n * You can work with correlations programmatically using {@link Spyral.Corpus#correlations}.\n *\n * @example\n *\n * let config = {\n * \tcolumns: null,\n * \tdir: null,\n * \tdocId: null,\n * \tdocIndex: null,\n * \tminInDocumentsCountRatio: null,\n * \tquery: null,\n * \tsort: null,\n * \tstopList: null,\n * \ttermColors: null,\n * \twithDistributions: null\n * };\n *\n * loadCorpus(\"austen\").tool(\"correlations\", config);\n *\n *\n * @class Correlations\n * @tutorial correlations\n * @memberof Tools\n */\nExt.define('Voyant.panel.Correlations', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.correlations',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.Correlations\n\t\t\t * @instance\n\t\t\t * @property {query}\n\t\t\t */\n    \t\tquery: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Correlations\n\t\t\t * @instance\n\t\t\t * @property {docId}\n\t\t\t */\n    \t\tdocId: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Correlations\n\t\t\t * @instance\n\t\t\t * @property {docIndex}\n\t\t\t */\n    \t\tdocIndex: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Correlations\n\t\t\t * @instance\n\t\t\t * @property {stopList}\n\t\t\t * @default\n\t\t\t */\n    \t\tstopList: 'auto',\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Correlations\n\t\t\t * @instance\n\t\t\t * @property {Number} minInDocumentsCountRatio The minimum coverage (as a percentage) for terms. For instance, if a corpus has 10 documents and the minimum coverage is 20%, at least two of the documents must contain the term or it will be ignored.\n\t\t\t * @default\n\t\t\t */\n    \t\tminInDocumentsCountRatio: 100,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Correlations\n\t\t\t * @instance\n\t\t\t * @property {withDistributions}\n\t\t\t * @default\n\t\t\t */\n\t\t\twithDistributions: 'relative',\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Correlations\n\t\t\t * @instance\n\t\t\t * @property {columns} columns 'sourceTerm', 'source-distributions', 'target-distributions', 'targetTerm', 'correlation', 'significance'\n\t\t\t */\n\t\t\tcolumns: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Correlations\n\t\t\t * @instance\n\t\t\t * @property {sort}\n\t\t\t */\n\t\t\tsort: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Correlations\n\t\t\t * @instance\n\t\t\t * @property {dir}\n\t\t\t */\n\t\t\tdir: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Correlations\n\t\t\t * @instance\n\t\t\t * @property {termColors}\n\t\t\t * @default\n\t\t\t */\n\t\t\ttermColors: 'categories'\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \toptions: [{xtype: 'stoplistoption'}, {xtype: 'categoriesoption'}, {xtype: 'termcolorsoption'}]\n    },\n    constructor: function() {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        Ext.apply(me, { \n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n    \t\tstore: Ext.create(\"Voyant.data.store.TermCorrelationsBuffered\", {\n            \tparentPanel: this,\n\t\t\t\tleadingBufferZone: 100 // since these calls are expensive reduce buffer to 1 page\n\t        }),\n\n    \t\tcolumns: [{\n    \t\t\ttext: this.localize(\"source\"),\n    \t\t\ttooltip: this.localize(\"sourceTip\"),\n        \t\tdataIndex: 'sourceTerm',\n        \t\tsortable: false,\n\t\t\t\txtype: 'coloredtermfield'\n    \t\t},{\n                xtype: 'widgetcolumn',\n                tooltip: this.localize(\"trendTip\"),\n                width: 100,\n                dataIndex: 'source-distributions',\n                widget: {\n                    xtype: 'sparklineline'\n                },\n                text: '\u2190'\n            },{\n                xtype: 'widgetcolumn',\n                tooltip: this.localize(\"trendTip\"),\n                width: 100,\n                dataIndex: 'target-distributions',\n                widget: {\n                    xtype: 'sparklineline'\n                },\n                text: '\u2192',\n                align: 'right'\n            },{\n    \t\t\ttext: this.localize(\"target\"),\n    \t\t\ttooltip: this.localize(\"targetTip\"),\n        \t\tdataIndex: 'targetTerm',\n        \t\tsortable: false,\n\t\t\t\txtype: 'coloredtermfield'\n    \t\t},{\n    \t\t\ttext: this.localize(\"correlation\"),\n    \t\t\ttooltip: this.localize(\"correlationTip\"),\n        \t\tdataIndex: 'correlation'\n    \t\t},{\n    \t\t\ttext: this.localize(\"significance\"),\n    \t\t\ttooltip: this.localize(\"significanceTip\"),\n        \t\tdataIndex: 'significance'\n    \t\t}],\n    \t\t\n\n            listeners: {\n            \tscope: this,\n\t\t\t\tcorpusSelected: function() {\n\t\t\t\t\tthis.setApiParams({docIndex: undefined, docId: undefined});\n\t        \t\tthis.getStore().getProxy().setExtraParam('tool', 'corpus.CorpusTermCorrelations');\n\t        \t\tthis.getStore().load();\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\tdocumentsSelected: function(src, docs) {\n\t\t\t\t\tvar docIds = [];\n\t\t\t\t\tvar corpus = this.getStore().getCorpus();\n\t\t\t\t\tdocs.forEach(function(doc) {\n\t\t\t\t\t\tdocIds.push(corpus.getDocument(doc).getId())\n\t\t\t\t\t}, this);\n\t\t\t\t\tthis.setApiParams({docId: docIds, docIndex: undefined})\n\t        \t\tthis.getStore().getProxy().setExtraParam('tool', 'corpus.DocumentTermCorrelations');\n\t        \t\tthis.getStore().load();\n\t\t\t\t}\n\n            },\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                },{\n                    xtype: 'totalpropertystatus'\n                }, {\n                \txtype: 'tbspacer'\n                }, {\n                \txtype: 'tbtext',\n                \titemId: 'minInDocumentsCountRatioLabel',\n                \ttext: me.localize('minInDocumentsCountRatioLabel')\n                }, {\n        \t\t\txtype: 'slider',\n\t            \tincrement: 5,\n\t            \tminValue: 0,\n\t            \tmaxValue: 100,\n\t            \twidth: 75,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(this.getApiParam(\"minInDocumentsCountRatio\"))\n\t            \t\t\tslider.up('toolbar').getComponent(\"minInDocumentsCountRatioLabel\").setText(new Ext.XTemplate(me.localize(\"minInDocumentsCountRatioLabel\")).apply([this.getApiParam(\"minInDocumentsCountRatio\")]));\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({minInDocumentsCountRatio: newvalue});\n\t            \t\t\tslider.up('toolbar').getComponent(\"minInDocumentsCountRatioLabel\").setText(new Ext.XTemplate(me.localize(\"minInDocumentsCountRatioLabel\")).apply([newvalue]));\n\t            \t\t\tthis.getStore().load();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                },{\n        \t\t\txtype: 'corpusdocumentselector'\n        \t\t}]\n            }]\n        });\n        \n        me.on(\"loadedCorpus\", function(src, corpus) {\n        \tif (corpus.getDocumentsCount()==1) { // switch to documents mode\n        \t\tthis.getStore().getProxy().setExtraParam('tool', 'corpus.DocumentTermCorrelations');\n        \t}\n        \tif (this.isVisible()) {\n        \t\tthis.getStore().load();\n        \t}\n        });\n        \n    \tme.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (this.getStore().getCorpus()) {this.getStore().load();}\n    \t}, this)\n\n    \tme.on(\"query\", function(src, query) {\n        \tthis.setApiParam(\"query\", query);\n        \tthis.getStore().load();\n        }, me);\n        \n        me.callParent(arguments);\n     }\n     \n});","Ext.define('Voyant.panel.CorpusCreator', {\n\textend: 'Ext.form.Panel',\n\trequires: ['Ext.form.field.File'],\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.corpuscreator',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n\t\t\tcorpusSortInitialOrder: 'initial order',\n\t\t\tdtocIndexDoc: 'DToC Index Document',\n\t\t\ttextEncoding: 'Text Encoding',\n\t\t\tgroupByColumn: 'Group By Column',\n\t\t\tgroupByColumnText: 'Specify a column (or columns) by which to group documents. Only applicable when extracting documents from cells in each row.'\n    \t},\n    \tapi: {\n    \t\tinputFormat: undefined,\n    \t\tlanguage: undefined,\n    \t\txmlDocumentsXpath: undefined,\n    \t\txmlGroupByXpath: undefined,\n    \t\txmlContentXpath: undefined,\n    \t\txmlTitleXpath: undefined,\n    \t\txmlAuthorXpath: undefined,\n    \t\txmlPubDateXpath: undefined,\n    \t\txmlPublisherXpath: undefined,\n    \t\txmlPubPlaceXpath: undefined,\n    \t\txmlKeywordXpath: undefined,\n    \t\txmlCollectionXpath: undefined,\n    \t\txmlExtraMetadataXpath: undefined,\n    \t\thtmlGroupByQuery: undefined,\n    \t\thtmlDocumentsQuery: undefined,\n    \t\thtmlContentQuery: undefined,\n    \t\thtmlTitleQuery: undefined,\n    \t\thtmlAuthorQuery: undefined,\n    \t\thtmlPubDateQuery: undefined,\n    \t\thtmlPublisherQuery: undefined,\n    \t\thtmlPubPlaceQuery: undefined,\n    \t\thtmlKeywordsQuery: undefined,\n    \t\thtmlCollectionQuery: undefined,\n    \t\thtmlExtraMetadataQuery: undefined,\n    \t\t//jsonGroupByPointer: undefined,\n    \t\tjsonDocumentsPointer: undefined,\n    \t\tjsonContentPointer: undefined,\n    \t\tjsonTitlePointer: undefined,\n    \t\tjsonAuthorPointer: undefined,\n    \t\tjsonPubDatePointer: undefined,\n    \t\tjsonPublisherPointer: undefined,\n    \t\tjsonPubPlacePointer: undefined,\n    \t\tjsonKeywordsPointer: undefined,\n    \t\tjsonCollectionPointer: undefined,\n    \t\tjsonExtraMetadataPointer: undefined,\n\t\t\tencoding: undefined,\n    \t\ttokenization: undefined,\n    \t\tadminPassword: undefined,\n    \t\taccessPassword: undefined,\n    \t\tnoPasswordAccess: undefined,\n    \t\ttableDocuments: undefined,\n\t\t\ttableGroupBy: undefined,\n    \t\ttableContent: undefined,\n    \t\ttableTitle: undefined,\n    \t\ttableAuthor: undefined,\n\t\t\ttablePubDate: undefined,\n\t\t\ttablePublisher: undefined,\n\t\t\ttablePubPlace: undefined,\n\t\t\ttableKeywords: undefined,\n\t\t\ttableCollection: undefined,\n\t\t\ttableExtraMetadata: undefined,\n    \t\ttitle: undefined,\n    \t\tsubTitle: undefined,\n    \t\tinputRemoveFrom: undefined,\n    \t\tinputRemoveFromAfter: undefined,\n    \t\tinputRemoveUntil: undefined,\n    \t\tinputRemoveUntilAfter: undefined,\n    \t\tsort: undefined,\n\t\t\tdtocIndexDoc: -1\n    \t}\n    },\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n        config = config || {};\n        var me = this;\n    \tthis.mixins['Voyant.panel.Panel'].constructor.call(this, \n\t\t\tExt.apply(config, {\n\t\t\t\tincludeTools: {\n\t\t\t\t\tgear: true,\n\t\t\t\t\thelp: true,\n\t\t\t\t\tlanguage: this.getLanguageToolMenu()\n\t\t\t\t}\n\t\t\t})\n    \t);\n    \t\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\twidth: 800,\n    \t\tframe: true,\n    \t\tpadding: 10,\n    \t\tstyle: {\n    \t\t    borderColor: '#aaa',\n    \t\t    borderStyle: 'solid'\n    \t\t},\n    \t\tframeHeader: true,\n    \t\tlayout: {\n    \t\t\ttype: 'vbox',\n    \t\t\talign: 'stretch'\n    \t\t},\n\t    \tdockedItems: [{\n\t    \t\txtype: 'toolbar',\n                overflowHandler: 'scroller',\n                dock: 'bottom',\n    \t    \tbuttonAlign: 'right',\n\t    \t\titems: [{\n\t    \t\t\ttext: me.localize('Open'),\n                    glyph: 'xf115@FontAwesome', // not visible\n\t    \t\t\ttooltip: me.localize('SelectExisting'),\n\t    \t\t\thidden: this.getCorpus()!=undefined,\n\t    \t\t\thandler: function() {\n\t    \t\t\t\tExt.create('Ext.window.Window', {\n\t    \t\t\t\t    title: me.localize('Open'),\n\t    \t\t\t\t    layout: 'fit',\n\t    \t\t\t\t    modal: true,\n\t    \t\t\t\t    items: {\n\t    \t\t\t\t        xtype: 'form',\n\t    \t\t\t\t        submitEmptyText: false,\n\t    \t\t\t\t        items: {\n\t    \t\t\t\t        \txtype: 'corpusselector',\n\t\t\t\t\t\t\t\t\tmargin: 10\n\t    \t\t\t\t        },\n\t    \t\t\t\t        buttons: [\n\t    \t\t\t\t        \t{\n\t    \t\t\t\t        \t\ttext: me.localize('Open'),\n\t    \t\t\t                    glyph: 'xf00c@FontAwesome',\n\t    \t\t\t\t        \t\thandler: function(btn) {\n\t    \t\t\t\t        \t\t\tvar form = btn.up('form').getForm();\n\t    \t\t\t\t        \t\t\tvar corpus = btn.up('form').getForm().getValues().corpus;\n\t    \t\t\t\t        \t\t\tif (corpus!='') {\n\t    \t\t\t\t        \t\t\t\tme.loadCorpus({corpus: corpus});\n\t\t    \t\t\t\t        \t\t\tbtn.up('window').close();\n\t    \t\t\t\t        \t\t\t}\n\t    \t\t\t\t        \t\t\telse {\n\t    \t\t\t\t    \t        \t\tExt.Msg.show({\n\t    \t\t\t\t    \t        \t\t    title: me.localize('SelectExisting'),\n\t    \t\t\t\t    \t        \t\t    message: me.localize('PleaseSelectExisting'),\n\t    \t\t\t\t    \t        \t\t    buttons: Ext.Msg.OK,\n\t    \t\t\t\t    \t        \t\t    icon: Ext.Msg.ERROR\n\t    \t\t\t\t    \t        \t\t});\n\t    \t\t\t\t        \t\t\t}\n\t    \t\t\t\t        \t\t},\n\t    \t\t\t\t        \t\tflex: 1\n\t    \t\t\t\t            },{\n\t    \t\t\t\t        \t\ttext: me.localize('cancel'),\n\t    \t\t\t                    glyph: 'xf00d@FontAwesome',\n\t    \t\t\t\t        \t\tflex: 1,\n\t    \t\t\t\t        \t\thandler: function(btn) {\n\t    \t\t\t\t        \t\t\tbtn.up('window').close();\n\t    \t\t\t\t        \t\t}\n\t    \t\t\t\t        \t}\n\t    \t\t\t\t        ]\n\t    \t\t\t\t    }\n\t    \t\t\t\t}).show();\n\t    \t\t\t}\n\t    \t\t},{\n    \t        \txtype: 'fileuploadfield',\n                    glyph: 'xf093@FontAwesome',\n    \t        \tname: 'upload',\n        \t    \tbuttonOnly: true,\n        \t    \thideLabel: true,\n\t\t            ui: 'default-toolbar',\n        \t    \tbuttonText: me.localize('Upload'),\n        \t    \tlisteners: {\n        \t    \t\trender: function(filefield) {\n        \t    \t\t\tfilefield.fileInputEl.dom.setAttribute('multiple', true);\n        \t\t        \tExt.tip.QuickTipManager.register({\n       \t\t                 target: filefield.getEl(),\n       \t\t                 text: me.localize('UploadLocal')\n       \t\t             \t});\n        \t            },\n        \t            beforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n        \t            change: function(filefield, value) {\n        \t            \tif (value) {\n            \t            \tvar form = filefield.up('form').getForm();\n            \t            \tif (form.isValid()) {\n            \t            \t\tvar files = filefield.fileInputEl.dom.files;\n            \t            \t\tvar badFilesRe = /\\.(png|gif|jpe?g|mp[234a]|mpeg|exe|wmv|avi|ppt|mpg|tif|wav|mov|psd|wma|ai|bmp|pps|aif|pub|dwg|indd|swf|asf|mbd|dmg|flv)$/i;\n            \t            \t\tvar goodFilesRe = /\\.(txt|pdf|html?|xml|docx?|rtf|pages|epub|odt|zip|jar|tar|gz|ar|cpio|bzip2|bz2|gzip|csv|tsv|xlsx?)$/i;\n            \t            \t\tvar badFiles = [];\n            \t            \t\tvar unknownFiles = [];\n            \t            \t\tfor (var i = 0, len = files.length; i<len; i++) {\n            \t            \t\t\tvar filename = files[i].name;\n            \t            \t\t\tif (badFilesRe.test(filename)) {\n            \t            \t\t\t\tbadFiles.push(filename.split(\"/\").pop());\n            \t            \t\t\t}\n            \t            \t\t\telse if (!goodFilesRe.test(filename)) {\n            \t            \t\t\t\tunknownFiles.push(filename.split(\"/\").pop());\n            \t            \t\t\t}\n            \t            \t\t}\n            \t            \t\tif (badFiles.length>0 || unknownFiles.length>0) {\n            \t            \t\t\tvar file = filefield;\n            \t            \t\t\tExt.Msg.show({\n            \t            \t\t\t\ttitle: me.localize(\"fileTypesWarning\"),\n            \t            \t\t\t\ticon: Ext.MessageBox.ERROR,\n            \t            \t\t\t\tmessage: me.localize('fileTypesMessage')+'<ul>' +\n            \t            \t\t\t\t\t(badFiles.length > 0 ? ('<li>'+me.localize(\"badFiles\") + badFiles.slice(0, 5).join(\", \") + (badFiles.length>5 ? '\u2026' : '') + '</li>') : '') +\n            \t            \t\t\t\t\t(unknownFiles.length>0 ? ('<li>' +me.localize(\"unknownFiles\") + unknownFiles.slice(0, 5).join(\", \") + (unknownFiles.length>5 ? '\u2026' : '') +'</li>') : '')+\n            \t            \t\t\t\t\t'</ul>'+me.localize('sureContinue'),\n            \t            \t\t\t\tbuttons: Ext.Msg.YESNO,\n            \t            \t\t\t\tfn: function(btn) {\n            \t            \t\t\t        if (btn === 'yes') {\n            \t            \t\t\t        \tme.loadForm(form);\n            \t            \t\t\t        }\n            \t            \t\t\t        else {\n            \t            \t\t\t        \tfile.reset(); // make sure we can trigger a change next time\n            \t            \t\t\t        \tfile.fileInputEl.dom.setAttribute('multiple', true);\n            \t            \t\t\t        }\n            \t            \t\t\t    },\n            \t            \t\t\t\tscope: form\n            \t            \t\t\t});\n            \t            \t\t}\n            \t            \t\telse {\n            \t            \t\t\tme.loadForm(form);\n            \t            \t\t}\n            \t            \t}\n        \t            \t}\n        \t            }\n        \t    \t}\n\t    \t\t},'->', {\n\t    \t    \txtype: 'button',\n\t\t\t\t\tscale: 'small',\n        \t\t\tglyph: 'xf00d@FontAwesome',\n\t    \t    \ttext: this.localize('cancel'),\n\t    \t    \thidden: this.getCorpus()==undefined,\n\t    \t    \thandler: function(btn) {\n\t    \t        \tvar win = this.up(\"window\");\n\t    \t        \tif (win && win.isFloating()) {\n\t    \t        \t\twin.close();\n\t    \t        \t}\n\t    \t    \t}\n\t    \t    }, {\n\t    \t    \txtype: 'button',\n\t    \t    \tscale: this.getCorpus()==undefined ? 'large' : 'small',\n                    glyph: 'xf00c@FontAwesome',\n\t    \t    \ttext: this.localize('reveal'),\n\t    \t    \tui: 'default',\n\t    \t    \twidth: 200,\n\t    \t    \thandler: function(btn) {\n\t    \t        \tvar input = btn.up('form').down('#input').getValue();\n\t    \t        \tif (input !== '') {\n\t    \t        \t\tvar api = me.getApiParams();\n\t\t\t\t\t\t\tdelete api.corpus;\n\t    \t            \tdelete api.view;\n\t    \t            \tdelete api.stopList;\n\t    \t        \t\tif (api.inputFormat && input.trim().indexOf(\"<\")!==0) {\n\t    \t        \t\t\tExt.Msg.confirm(me.localize('error'), me.localize('errorNotXmlContinue'), function(buttonId) {\n\t    \t        \t\t\t\tif (buttonId=='yes') {\n\t\t\t\t    \t        \t\tme.loadCorpus(Ext.apply(api, {input: input}));\n\t    \t        \t\t\t\t}\n\t    \t        \t\t\t}, me);\n\t    \t        \t\t}\n\t    \t        \t\telse {\n\t\t    \t        \t\tme.loadCorpus(Ext.apply(api, {input: input}));\n\t    \t        \t\t}\n\t    \t        \t}\n\t    \t        \telse {\n\t    \t        \t\tExt.Msg.show({\n\t    \t        \t\t    title: me.localize('noTextProvided'),\n\t    \t        \t\t    message: me.localize('pleaseProvideText'),\n\t    \t        \t\t    buttons: Ext.Msg.OK,\n\t    \t        \t\t    icon: Ext.Msg.ERROR\n\t    \t        \t\t});\n\t    \t        \t}\n\t    \t    \t}\n\t    \t    }]\n\t    \t}],\n\t    \titems: [{\n\t    \t\thtml: this.getInitialConfig().addTextLabel,\n\t    \t\thidden: this.getInitialConfig().addTextLabel==undefined\n\t    \t},{\n//\t    \t\tlayout: 'fit',\n\t    \t\theight: 100,\n    \t    \txtype: 'textareafield',\n    \t    \titemId: 'input',\n    \t    \temptyText: this.localize('emptyInput')\n\t    \t}]\n        });\n        \n        me.on(\"boxready\", function(panel) {\n        \tvar app = this.getApplication();\n        \tif (app.getAllowInput() === false) {\n\t\t\t\tpanel.getDockedItems().forEach(function(docked) {\n\t\t\t\t\tpanel.removeDocked(docked);\n\t\t\t\t})\n        \t\tpanel.removeAll();\n\t\t\t\tpanel.add({\n\t\t\t\t\txtype: 'container',\n\t\t\t\t\thtml: \"<p>\"+panel.localize('noAllowInputMessage')+\"</p>\"\n\t\t\t\t});\n        \t}\n        });\n\n        me.callParent(arguments);\n        \n    },\n    \n    loadForm: function(form) {\n    \tvar params = {tool: this.getCorpus() ? 'corpus.CorpusMetadata' : 'corpus.CorpusCreator'};\n\t\tvar apiParams = this.getApiParams();\n    \tif (this.getCorpus()) {\n    \t\tExt.apply(params, {\n    \t\t\tcorpus: this.getCorpus().getId(),\n    \t\t\taddDocuments: true\n    \t\t})\n    \t} else {\n\t\t\tdelete apiParams.corpus;\n\t\t}\n    \tdelete apiParams.view;\n    \tdelete apiParams.stopList;\n    \tExt.apply(params, apiParams);\n    \tvar view = this.getApplication().getViewport();\n\t\tview.mask(this.localize('uploadingCorpus'));\n\t\t// hide win so we can see uploading mask\n\t\tvar win = this.up(\"window\");\n    \tif (win && win.isFloating()) {\n    \t\twin.hide();\n    \t}\n\t\tform.submit({\n\t\t\turl: this.getTromboneUrl(),\n\t\t\tparams: params,\n\t\t\tfailure: function(form, action) { // we always fail because of content-type\n            \tview.unmask();\n\t\t\t\tif (action.result && (action.result.corpus || action.result.stepEnabledCorpusCreator)) {\n\t\t\t\t\tvar corpusParams = {corpus: action.result.corpus ? action.result.corpus.metadata.id : action.result.stepEnabledCorpusCreator.storedId};\n\t\t\t\t\tExt.applyIf(corpusParams, apiParams); // adding title & subTitle here\n\t\t\t\t\tthis.setCorpus(undefined)\n\t\t\t\t\tthis.loadCorpus(corpusParams);\n\t\t\t\t} else {\n\t\t\t\t\tthis.showResponseError(\"Unable to load corpus.\", action.response)\n\t\t\t\t}\n\t\t\t},\n\t\t\tscope: this\n\t\t});\n    },\n   \n    loadCorpus: function(params) {\n    \tif (this.getCorpus()) {\n    \t\tExt.apply(params, {\n    \t\t\tcorpus: this.getCorpus().getId(),\n    \t\t\taddDocuments: true\n    \t\t})\n    \t};\n    \t\n    \tvar win = this.up(\"window\");\n    \tif (win && win.isFloating()) {\n    \t\twin.close();\n    \t}\n    \t\n\t\tthis.getApplication().loadCorpusFromParams(params);\n    },\n    \n    showOptionsClick: function(panel) {\n    \tvar me = panel;\n    \tif (me.optionsWin === undefined) {\n\t\t\tvar langCodes = ['bo'].concat(Object.keys(Voyant.widget.StopListOption.stoplists).filter(function(code) { return code !== 'mu'; })).sort();\n\t\t\tvar langArray = langCodes.map(function(code) { return [code, me._localizeClass(Voyant.widget.StopListOption, code)] });\n\t\t\tlangArray.unshift(['', me._localizeClass(Voyant.widget.StopListOption, 'auto')]);\n    \t\tme.optionsWin = Ext.create('Ext.window.Window', {\n    \t\t\ttitle: me.localize('gearWinTitle'),\n    \t\t\tcloseAction: 'hide',\n//    \t\t\twidth: 500,\n    \t\t\tlayout: 'fit',\n    \t\t\tbodyPadding: 10,\n    \t\t\tanchor: '100% 100%',\n//    \t\t\tshrinkWrap: 3,\n    \t\t\titems: [{\n    \t\t\t\txtype: 'form',\n    \t\t\t\tdefaultType: 'textfield',\n        \t\t\tmaxHeight: me.getApplication().getViewport().getHeight()-120,\n        \t\t\tscrollable: true,\n    \t\t\t\tfieldDefaults: {\n    \t\t\t\t\tlabelAlign: 'right',\n    \t\t\t\t\tlabelWidth: 110,\n    \t\t\t\t\twidth: 350\n    \t\t\t\t},\n    \t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t    fieldLabel: me.localize('inputFormat'),\n\t\t\t\t\t\t    labelWidth: 90, // try to align with fieldset\n\t\t\t\t\t\t    name: 'inputFormat',\n\t\t\t\t\t\t    queryMode:'local',\n\t\t\t\t\t\t    store:[['',me.localize('inputFormatAuto')],['dtoc','DToC: Dynamic Table of Contexts'],['TEI',\"TEI: Text Encoding Initative\"],['TEI',\"TEI Corpus\"],['RSS',\"Really Simple Syndication: RSS\"]],\n\t\t\t\t\t\t    value: '',\n\t\t\t\t\t\t    listeners: {\n\t\t\t\t\t\t    \tafterrender: {\n\t\t\t\t\t\t    \t\tfn: function(combo) {\n\t\t\t\t\t\t    \t\t\tvar inputFormat = this.getApiParam('inputFormat');\n\t\t\t\t\t\t    \t\t\tif (inputFormat) {\n\t\t\t\t\t\t    \t\t\t\tcombo.setValue(inputFormat);\n\t\t\t\t\t\t    \t\t\t}\n\t\t\t\t\t\t    \t\t},\n\t\t\t\t\t\t    \t\tscope: me\n\t\t\t\t\t\t    \t},\n\t\t\t\t\t\t\t\tchange: {\n\t\t\t\t\t\t\t\t\tfn: function(combo, newval, oldval) {\n\t\t\t\t\t\t\t\t\t\tvar dtocIndexDocField = combo.up('form').down('[name=dtocIndexDoc]');\n\t\t\t\t\t\t\t\t\t\tif (newval === 'dtoc') {\n\t\t\t\t\t\t\t\t\t\t\tdtocIndexDocField.show();\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tdtocIndexDocField.hide();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tscope: me\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t    }\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\txtype: 'container',\n\t\t\t\t\t\t\thtml: '<p><i>'+new Ext.Template(me.localize('advancedOptionsText')).applyTemplate([me.getBaseUrl()+'docs/tutorial-corpuscreator.html'])+'</i></p>',\n\t\t\t\t\t\t\twidth: 375\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/tutorial-corpuscreator.html#titles' target='voyantdocs'>\"+me.localize('corpusOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('corpusTitle'),\n\t\t\t\t\t\t\t\t\tname: 'title'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('corpusSubTitle'),\n\t\t\t\t\t\t\t\t\tname: 'subTitle'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize(\"corpusSort\"),\n\t\t\t\t\t\t\t\t\tname: 'sort',\n\t\t\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t\t\t    queryMode:'local',\n\t\t\t\t\t\t\t\t    store:[['',me.localize('corpusSortAuto')],['TITLEASC',me.localize('corpusSortTitle')],['AUTHORASC',me.localize('corpusSortAuthor')],['PUBDATEASC',me.localize('corpusSortPubDate')],['NOCHANGE', me.localize('corpusSortInitialOrder')]],\n\t\t\t\t\t\t\t\t    value: '',\n\t\t\t\t\t\t\t\t    listeners: {\n\t\t\t\t\t\t\t\t    \tafterrender: {\n\t\t\t\t\t\t\t\t    \t\tfn: function(combo) {\n\t\t\t\t\t\t\t\t    \t\t\tvar inputFormat = this.getApiParam('sort');\n\t\t\t\t\t\t\t\t    \t\t\tif (inputFormat) {\n\t\t\t\t\t\t\t\t    \t\t\t\tcombo.setValue(inputFormat);\n\t\t\t\t\t\t\t\t    \t\t\t}\n\t\t\t\t\t\t\t\t    \t\t},\n\t\t\t\t\t\t\t\t    \t\tscope: me\n\t\t\t\t\t\t\t\t    \t}\n\t\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('dtocIndexDoc'),\n\t\t\t\t\t\t\t\t\tname: 'dtocIndexDoc',\n\t\t\t\t\t\t\t\t\txtype: 'numberfield',\n\t\t\t\t\t\t\t\t\tvalue: -1,\n\t\t\t\t\t\t\t\t\tminValue: -1,\n\t\t\t\t\t\t\t\t\tmaxValue: 99,\n\t\t\t\t\t\t\t\t\twidth: 180,\n\t\t\t\t\t\t\t\t\thidden: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/tutorial-corpuscreator.html#text' target='voyantdocs'>\"+me.localize('textOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"textOptionsText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('inputRemoveUntil'),\n\t\t\t\t\t\t\t\t\tname: 'inputRemoveUntil'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('inputRemoveUntilAfter'),\n\t\t\t\t\t\t\t\t\tname: 'inputRemoveUntilAfter'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('inputRemoveFrom'),\n\t\t\t\t\t\t\t\t\tname: 'inputRemoveFrom'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('inputRemoveFromAfter'),\n\t\t\t\t\t\t\t\t\tname: 'inputRemoveFromAfter'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/tutorial-corpuscreator.html#xml' target='voyantdocs'>\"+me.localize('xmlOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"xmlOptionsText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathContent'),\n\t\t\t\t\t\t\t\t\tname: 'xmlContentXpath'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathTitle'),\n\t\t\t\t\t\t\t\t\tname: 'xmlTitleXpath'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathAuthor'),\n\t\t\t\t\t\t\t\t\tname: 'xmlAuthorXpath'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathDocuments'),\n\t\t\t\t\t\t\t\t\tname: 'xmlDocumentsXpath'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathGroupBy'),\n\t\t\t\t\t\t\t\t\tname: 'xmlGroupByXpath'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\txtype: 'fieldset',\n\t\t\t                        title: me.localize('xmlAdditionalOptions'),\n\t\t\t                        collapsible: true,\n\t\t\t                        collapsed: true,\n\t\t\t                        defaultType: 'textfield',\n\t\t\t                        items: [{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubDate'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlPubDateXpath'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPublisher'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlPublisherXpath'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubPlace'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlPubPlaceXpath'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathKeywords'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlKeywordXpath'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathCollection'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlCollectionXpath'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\txtype: 'textareafield',\n\t\t\t\t\t\t\t\t\t\tgrow: true,\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathExtra'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlExtraMetadataXpath'\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/tutorial-corpuscreator.html#html' target='voyantdocs'>\"+me.localize('htmlOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+new Ext.Template(me.localize('htmlOptionsText')).applyTemplate([me.getBaseUrl()+'docs/tutorial-corpuscreator.html#html'])+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathContent'),\n\t\t\t\t\t\t\t\t\tname: 'htmlContentQuery'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathTitle'),\n\t\t\t\t\t\t\t\t\tname: 'htmlTitleQuery'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathAuthor'),\n\t\t\t\t\t\t\t\t\tname: 'htmlAuthorQuery'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathDocuments'),\n\t\t\t\t\t\t\t\t\tname: 'htmlDocumentsQuery'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathGroupBy'),\n\t\t\t\t\t\t\t\t\tname: 'htmlGroupByQuery'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\txtype: 'fieldset',\n\t\t\t                        title: me.localize('xmlAdditionalOptions'),\n\t\t\t                        collapsible: true,\n\t\t\t                        collapsed: true,\n\t\t\t                        defaultType: 'textfield',\n\t\t\t                        items: [{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubDate'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlPubDateQuery'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPublisher'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlPublisherQuery'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubPlace'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlPubPlaceQuery'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathKeywords'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlKeywordsQuery'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathCollection'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlCollectionQuery'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\txtype: 'textareafield',\n\t\t\t\t\t\t\t\t\t\tgrow: true,\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathExtra'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlExtraMetadataQuery'\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/tutorial-corpuscreator.html#json' target='voyantdocs'>\"+me.localize('jsonOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+new Ext.Template(me.localize('jsonOptionsText')).applyTemplate([me.getBaseUrl()+'docs/tutorial-corpuscreator.html#json'])+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathContent'),\n\t\t\t\t\t\t\t\t\tname: 'jsonContentPointer'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathTitle'),\n\t\t\t\t\t\t\t\t\tname: 'jsonTitlePointer'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathAuthor'),\n\t\t\t\t\t\t\t\t\tname: 'jsonAuthorPointer'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathDocuments'),\n\t\t\t\t\t\t\t\t\tname: 'jsonDocumentsPointer'\n\t\t\t\t\t\t\t\t},/*{ \n\t\t\t\t\t\t\t\t\t// groupBy is tricky because documents are combined in ways that may conflict \n\t\t\t\t\t\t\t\t\t// with the other extraction options (especially since Pointer expects absolute\n\t\t \t\t\t\t\t\t\t// addresses from root). So for now we'll skip.\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathGroupBy'),\n\t\t\t\t\t\t\t\t\tname: 'jsonGroupByPointer'\n\t\t\t\t\t\t\t\t},*/{\n\t\t\t\t\t\t\t\t\txtype: 'fieldset',\n\t\t\t                        title: me.localize('xmlAdditionalOptions'),\n\t\t\t                        collapsible: true,\n\t\t\t                        collapsed: true,\n\t\t\t                        defaultType: 'textfield',\n\t\t\t                        items: [{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubDate'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonPubDatePointer'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPublisher'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonPublisherPointer'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubPlace'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonPubPlacePointer'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathKeywords'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonKeywordsPointer'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathCollection'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonCollectionPointer'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\txtype: 'textareafield',\n\t\t\t\t\t\t\t\t\t\tgrow: true,\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathExtra'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonExtraMetadataPointer'\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/tutorial-corpuscreator.html#tables' target='voyantdocs'>\"+me.localize('tableOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [{\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+new Ext.Template(me.localize('tableOptionsText')).applyTemplate([me.getBaseUrl()+'docs/tutorial-corpuscreator.html#tables'])+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                        \t},{\n\t\t\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('tableDocuments'),\n\t\t\t\t\t\t\t\t    name: 'tableDocuments',\n\t\t\t\t\t\t\t\t    queryMode:'local',\n\t\t\t\t\t\t\t\t    store:[['',me.localize('tableDocumentsTable')],['rows',me.localize('tableDocumentsRows')],['columns',me.localize(\"tableDocumentsColumns\")]],\n\t\t\t\t\t\t\t\t    forceSelection:true,\n\t\t\t\t\t\t\t\t    value: ''\n\t\t\t\t\t\t\t\t},{\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"tableNoHeadersRowText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize(\"tableNoHeadersRow\"),\n\t\t\t\t\t\t\t\t\txtype: 'checkboxfield',\n\t\t\t\t\t\t\t\t\tname: 'tableNoHeadersRow',\n\t\t\t\t\t\t\t\t\tinputValue: \"true\"\n\t\t\t\t\t\t\t\t},{\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"tableContentText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('tableContent'),\n\t\t\t\t\t\t\t\t\tvalidator: function(val) {return me.validatePositiveNumbersCsv.call(me, val)},\n\t\t\t\t\t\t\t\t\tname: 'tableContent'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\txtype: 'container',\n\t\t\t\t\t\t\t\t\thtml: '<p><i>'+me.localize('groupByColumnText')+'</i></p>',\n\t\t\t\t\t\t\t\t\twidth: 375\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('groupByColumn'),\n\t\t\t\t\t\t\t\t\tvalidator: function(val) {return me.validatePositiveNumbersCsv.call(me, val)},\n\t\t\t\t\t\t\t\t\tname: 'tableGroupBy'\n\t\t\t\t\t\t\t\t},{\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"tableMetadataText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('tableAuthor'),\n\t\t\t\t\t\t\t\t\tvalidator: function(val) {return me.validatePositiveNumbersCsv.call(me, val)},\n\t\t\t\t\t\t\t\t\tname: 'tableAuthor'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('tableTitle'),\n\t\t\t\t\t\t\t\t\tvalidator: function(val) {return me.validatePositiveNumbersCsv.call(me, val)},\n\t\t\t\t\t\t\t\t\tname: 'tableTitle'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\txtype: 'fieldset',\n\t\t\t                        title: me.localize('xmlAdditionalOptions'),\n\t\t\t                        collapsible: true,\n\t\t\t                        collapsed: true,\n\t\t\t                        defaultType: 'textfield',\n\t\t\t                        items: [{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubDate'),\n\t\t\t\t\t\t\t\t\t\tname: 'tablePubDate'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPublisher'),\n\t\t\t\t\t\t\t\t\t\tname: 'tablePublisher'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubPlace'),\n\t\t\t\t\t\t\t\t\t\tname: 'tablePubPlace'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathKeywords'),\n\t\t\t\t\t\t\t\t\t\tname: 'tableKeywords'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathCollection'),\n\t\t\t\t\t\t\t\t\t\tname: 'tableCollection'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\txtype: 'textareafield',\n\t\t\t\t\t\t\t\t\t\tgrow: true,\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathExtra'),\n\t\t\t\t\t\t\t\t\t\tname: 'tableExtraMetadata'\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/tutorial-corpuscreator.html#processing' target='voyantdocs'>\"+me.localize('processingOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        items: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t\t\t    fieldLabel: me.localize(\"language\"),\n\t\t\t\t\t\t\t\t    name: 'language',\n\t\t\t\t\t\t\t\t    queryMode:'local',\n\t\t\t\t\t\t\t\t    store: langArray,\n\t\t\t\t\t\t\t\t    forceSelection:true,\n\t\t\t\t\t\t\t\t    value: ''\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t\t\t    fieldLabel: me.localize('tokenization'),\n\t\t\t\t\t\t\t\t    name: 'tokenization',\n\t\t\t\t\t\t\t\t    queryMode:'local',\n\t\t\t\t\t\t\t\t    store:[['',me.localize('tokenizationAuto')],['wordBoundaries',me.localize(\"tokenizationWordBoundaries\")],['whitespace',me.localize(\"tokenizationWhitespace\")]],\n\t\t\t\t\t\t\t\t    forceSelection:true,\n\t\t\t\t\t\t\t\t    value: ''\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\txtype:'combo',\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('textEncoding'),\n\t\t\t\t\t\t\t\t\tname: 'encoding',\n\t\t\t\t\t\t\t\t\tqueryMode:'local',\n\t\t\t\t\t\t\t\t\tstore:[['','Auto'],['ISO-8859-1', 'ISO-8859-1 (Latin 1)'],['UTF-8', 'UTF-8'],['UTF-16BE', 'UTF-16BE'],['UTF-16LE', 'UTF-16LE'],['windows-1252', 'Windows-1252 (ANSI)']],\n\t\t\t\t\t\t\t\t\tforceSelection:false,\n\t\t\t\t\t\t\t\t\tvalue: ''\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/tutorial-corpuscreator.html#access-management' target='voyantdocs'>\"+me.localize('accessOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"accessOptionsText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('adminPassword'),\n\t\t\t\t\t\t\t\t\tname: 'adminPassword'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('accessPassword'),\n\t\t\t\t\t\t\t\t\tname: 'accessPassword'\n\t\t\t\t\t\t\t\t},{\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"accessModeWithoutPasswordText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('accessModeWithoutPassword'),\n\t\t\t\t\t\t\t\t    name: 'noPasswordAccess',\n\t\t\t\t\t\t\t\t    queryMode:'local',\n\t\t\t\t\t\t\t\t    store:[['',me.localize('accessModeNonConsumptive')],['none',me.localize(\"accessModeNone\")]],\n\t\t\t\t\t\t\t\t    forceSelection:true,\n\t\t\t\t\t\t\t\t    value: ''\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t]\n    \t\t\t}],\n    \t\t\tbuttons: [{\n    \t\t\t\ttext: me.localize('ok'),\n    \t\t\t\thandler: function(button, event) {\n    \t\t\t\t\tvar win = button.findParentByType('window');\n    \t\t\t\t\tvar form = win.down('form');\n    \t\t\t\t\tif (form.isValid()) {\n        \t\t\t\t\tvar params = form.getValues();\n        \t\t\t\t\tme.setApiParams(params);\n        \t\t\t\t\twin.hide();\n    \t\t\t\t\t}\n    \t\t\t\t\telse {\n    \t\t\t\t\t\tme.showError({\n    \t\t\t\t\t\t\tmessage: me.localize(\"invalidForm\")\n    \t\t\t\t\t\t})\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t},{\n    \t\t\t\ttext: me.localize('cancel'),\n    \t\t\t\thandler: function(button, event) {\n    \t\t\t\t\tbutton.findParentByType('window').hide();\n    \t\t\t\t}\n    \t\t\t}]\n    \t\t});\n    \t}\n    \tme.optionsWin.showAt((me.getApplication().getViewport().getWidth()/2)-200,10);\n    },\n    \n    validatePositiveNumbersCsv: function(val) {\n    \tval = val.trim();\n    \tif (val.length>0) {\n        \tif (/[^\\d,+ ]/.test(val)) {\n        \t\treturn this.localize(\"numbersCommasOnly\");\n        \t}\n        \tif (/\\d\\s+\\d/.test(val)) {\n        \t\treturn this.localize(\"numbersNeedCommas\");\n        \t}\n        \tvar numbers = val.split(/\\s*[,+]\\s*/), number;\n        \tfor (var i=0, len=numbers.length; i<len; i++) {\n        \t\tnumber = numbers[i];\n        \t\tif (number.length==0) {\n        \t\t\treturn this.localize(\"numberEmpty\")\n        \t\t}\n        \t\tif (parseInt(number)==0) {\n        \t\t\treturn this.localize(\"numberZero\")\n        \t\t}\n        \t}\n    \t}\n    \treturn true;\n\t}\n    \n});","Ext.define('Voyant.panel.DreamScape', {\n    extend: 'Ext.Panel',\n    xtype: 'dreamscape',\n    mixins: ['Voyant.panel.Panel'],\n    statics: {\n        i18n: {\n        },\n        api: {\n            stopList: 'auto',\n            hide: [],\n            author: undefined,\n            title: undefined,\n            keyword: undefined,\n            pubDate: undefined,\n            citiesMaxCount: 500,\n            minPopulation: 10000,\n            citiesMinFreq: 1,\n            connectionsMaxCount: 2500,\n            connectionsMinFreq: 1,\n            millisPerAnimation: 2000,\n            annotationsId: undefined,\n            source: undefined,\n            overridesId: undefined,\n            filterHasLowerCaseForm: true,\n            filterIsPersonName: true,\n            preferredCoordinates: undefined\n        },\n        glyph: 'xf124@FontAwesome'\n    },\n    config: {\n        map: undefined, // OL object, should be set during init\n        overlay: undefined, // OL object, should be set during init\n        contentEl: undefined, // EXTJS Element, where info is shown\n        isOpenLayersLoaded: false,\n        isArcLoaded: false,\n        animationDelay: 25, // determines the delay between animation calls\n        isProj4Loaded: false,\n        projection: undefined,\n        filterWidgets: new Ext.util.MixedCollection(),\n        drawInteraction: undefined,\n        drawMode: false,\n        //currentAnnotation: undefined,\n        baseLayers: {},\n        annotations: undefined, // set during init if any values are stored, shouldn't be looked up (getAnnotations) after init\n        annotationsLoadedIfAvailable: false, // check api and local storage,\n        overrides: {}\n    },\n\n    html: '<div class=\"map\"></div><div class=\"ticker\"></div>',\n\n    cls: 'dreamscape',\n\n    constructor: function(config) {\n        this.callParent(arguments);\n        this.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n        Ext.Loader.loadScript({\n            url: this.getBaseUrl()+\"resources/openlayers/ol.js\",\n            onLoad: function() {\n                // Utility function to get layer by id\n                if (ol.Map.prototype.getLayer === undefined) {\n                    ol.Map.prototype.getLayer = function (id) {\n                        var layer = undefined;\n                        this.getLayers().forEach(function(lyr) {\n                            if (id === lyr.get('id')) {\n                                layer = lyr;\n                            }\n                        });\n                        return layer;\n                    }\n                }\n                this.setIsOpenLayersLoaded(true);\n            },\n            scope: this\n        });\n        Ext.Loader.loadScript({\n            url: this.getBaseUrl()+\"resources/dreamscape/arc.js\",\n            onLoad: function() {\n                this.setIsArcLoaded(true);\n            },\n            scope: this\n        });\n        Ext.Loader.loadScript({\n            url: \"https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.4.4/proj4.js\",\n            onLoad: function() {\n                this.setIsProj4Loaded(true);\n            },\n            scope: this\n        });\n        var annotationsId = this.getApiParam(\"annotationsId\");\n        if (annotationsId) {\n            var me = this;\n            Ext.Ajax.request({\n                url: this.getTromboneUrl(),\n                params: {\n                    tool: 'resource.StoredResource',\n                    retrieveResourceId: annotationsId\n                },\n                scope: this\n            }).then(function(response) {\n                var data = Ext.JSON.decode(response.responseText);\n                if (data.storedResource.resource) {\n                    var annotations = Ext.JSON.decode(data.storedResource.resource)\n                    if (Ext.isString(annotations)) {\n                        annotations = Ext.JSON.decode(annotations);\n                        me.setAnnotations(annotations)\n                    }\n                }\n                if (!me.getAnnotations()) {\n                    me.showError(me.localize(\"annotationsLoadFailed\"));\n                }\n                me.setAnnotationsLoadedIfAvailable(true);\n            }, function(response) {\n                me.showResponseError(me.localize(\"annotationsLoadFailed\"), response);\n                me.setAnnotationsLoadedIfAvailable(true);\n            });\n        } else {\n            this.setAnnotationsLoadedIfAvailable(true);\n        }\n    },\n    initComponent: function() {\n        var me = this;\n        this.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // we need api\n        var hide = this.getApiParam(\"hide\");\n        if (Ext.isString(hide)) {\n            hide = hide.split(',');\n            this.setApiParam('hide');\n        }\n        var iconBase = this.getApplication().getBaseUrl()+\"resources/dreamscape/\";\n        Ext.apply(this, {\n            title: this.localize('title'),\n            bodyBorder: true,\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                itemId: 'bottomToolbar',\n                overflowHandler: 'scroller',\n                items: [\n                    {\n                        text: this.localize('display'),\n                        tooltip: this.localize('displayTip'),\n                        glyph: 'xf013@FontAwesome',\n                        menu: {\n                            defaults: { // these are intended for the radiogroups after the separator (and should be ignored by the menu items above the separator)\n                                xtype: 'menucheckitem',\n                                checkHandler: function(item, checked) {\n                                    var map = this.getMap(), id = item.getItemId();\n                                    this.getFilterWidgets().each(function(filter) {\n                                        map.getLayer(filter.getId()+\"-\"+id).setVisible(checked);\n                                    })\n                                    var hide = Ext.Array.from(this.getApiParam('hide'));\n                                    if (checked) {\n                                        hide = Ext.Array.remove(hide, id);\n                                    } else {\n                                        hide.push(id);\n                                        hide = Ext.Array.unique(hide);\n                                    }\n                                    this.setApiParam(\"hide\", hide);\n                                    item.getMenu().setDisabled(checked==false);\n                                },\n                                scope: this,\n                                checked: true\n                            },\n                            items: [{\n                                xtype: 'menuitem',\n                                text: this.localize('baseLayer'),\n                                tooltip: this.localize('baseLayerTip'),\n                                glyph: 'xf279@FontAwesome',\n                                menu: {\n                                    items: [{\n                                        xtype: 'radiogroup',\n                                        columns: 1,\n                                        vertical: true,\n                                        defaults: {\n                                            cls: 'map-menu-item',\n                                            handler: function(item, checked) {\n                                                if(checked){\n                                                    var panel = this;\n                                                    id = item.getItemId();\n                                                    var layer = this.getBaseLayers()[id];\n                                                    if (layer) {\n                                                        layer.setOpacity(1);\n                                                        this.getMap().getLayers().setAt(0, layer);\n                                                    }\n                                                    if(id == 'osm' || id == 'arcGIS') {\n                                                        this.getMap().getLayer(\"overlayLayer\").setVisible(false);\n                                                    } else {\n                                                        this.getMap().getLayer(\"overlayLayer\").setVisible(true);\n                                                    }\n                                                }\n                                            },\n                                            listeners: {\n                                                afterrender: function(item) {\n                                                    Ext.create('Ext.tip.ToolTip', {\n                                                        target: item,\n                                                        html: '<div class=\"map-menu-item-tooltip '+item.getItemId()+'\"></div>',\n                                                        anchor: 'right'\n                                                    });\n                                                }\n                                            },\n                                            scope: this\n                                        },\n                                        items: [\n                                            // {\n                                            //     boxLabel: this.localize('watercolor'),\n                                            //     itemId: 'watercolor',\n                                            //     cls: ['map-menu-item','watercolor'],\n                                            //     checked: true\n                                            // },\n                                            {\n                                                boxLabel: this.localize('wms4326'),\n                                                cls: ['map-menu-item','wms4326'],\n                                                itemId: 'wms4326'\n                                            },{\n                                                boxLabel: this.localize('osm'),\n                                                cls: ['map-menu-item','osm'],\n                                                itemId: 'osm',\n                                                checked: true\n                                            },{\n                                                boxLabel: this.localize('arcGIS'),\n                                                cls: ['map-menu-item','arcGIS'],\n                                                itemId: 'arcGIS'\n                                            }\n                                        ]\n                                    }]\n                                }\n                            },{\n                                xtype: 'menuitem',\n                                text: this.localize('projection'),\n                                tooltip: this.localize('projectionTip'),\n                                glyph: 'xf0ac@FontAwesome',\n                                menu: {\n                                    items: [{\n                                        xtype: 'radiogroup',\n                                        columns: 1,\n                                        vertical: true,\n                                        defaults: {\n                                            handler: function(item, checked) {\n                                                if(checked){\n                                                    var panel = this;\n                                                    id = item.getItemId();\n                                                    var view = undefined\n                                                    if (id === \"webMercatorProjection\") {\n                                                        this.setProjection(ol.proj.get('EPSG:3857'));\n                                                    } else if (id === \"mercatorProjection\") {\n                                                        this.setProjection(ol.proj.get('EPSG:4326'));\n                                                    } else if (id === \"gallPetersProjection\") {\n                                                        proj4.defs('cea',\"+proj=cea +lon_0=0 +lat_ts=45 +x_0=0 +y_0=0 +ellps=WGS84 +units=m +no_defs\");\n                                                        var gallPetersProjection = ol.proj.get('cea');\n                                                        this.setProjection(gallPetersProjection);\n                                                    } else if (id === \"sphereMollweideProjection\") {\n                                                        proj4.defs('ESRI:54009', '+proj=moll +lon_0=0 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs');\n                                                        var sphereMollweideProjection = ol.proj.get('ESRI:54009');\n                                                        sphereMollweideProjection.setExtent([-18e6, -9e6, 18e6, 9e6]);\n                                                        this.setProjection(sphereMollweideProjection);\n                                                    }\n                                                    var newProjExtent = this.getProjection().getExtent();\n                                                    // If using Mercator projection, earth with is measured in degrees, otherwise it's in meters\n                                                    var earthWidth = this.getProjection() == ol.proj.get(\"EPSG:4326\") ? 360 : 40075016.68557849;\n                                                    var newView = new ol.View({\n                                                        projection: this.getProjection(),\n                                                        center: ol.extent.getCenter(newProjExtent || [0, 0, 0, 0]),\n                                                        maxResolution: earthWidth / panel.body.dom.offsetWidth,\n                                                        zoom: 0\n                                                    });\n                                                    var map = this.getMap();\n                                                    var layers = map.getLayers();\n                                                    layers.forEach(function(layer) {\n                                                        if(layer.getSource().getFeatures){\n                                                            var features = layer.getSource().getFeatures();\n                                                            features.forEach(function(feature){\n                                                                var newGeometry = feature.getGeometry().transform(map.getView().getProjection(), panel.getProjection());\n                                                                feature.setGeometry(newGeometry);\n                                                            })\n                                                        }\n                                                    });\n\n                                                    map.setView(newView);\n                                                }\n                                            },\n                                            listeners: {\n                                                afterrender: function(item) {\n                                                    Ext.create('Ext.tip.ToolTip', {\n                                                        target: item,\n                                                        html: '<div class=\"map-menu-item-tooltip '+item.getItemId()+'\"></div>',\n                                                        anchor: 'right'\n                                                    });\n                                                }\n                                            },\n                                            scope: this\n                                        },\n                                        items: [\n                                            {\n                                                boxLabel: this.localize('webMercatorProjection'),\n                                                itemId: 'webMercatorProjection',\n                                                cls: ['map-menu-item','webMercatorProjection'],\n                                                checked: true\n                                            },{\n                                                boxLabel: this.localize('mercatorProjection'),\n                                                cls: ['map-menu-item','mercatorProjection'],\n                                                itemId: 'mercatorProjection'\n                                            },{\n                                                boxLabel: this.localize('gallPetersProjection'),\n                                                cls: ['map-menu-item','gallPetersProjection'],\n                                                itemId: 'gallPetersProjection'\n                                            },{\n                                                boxLabel: this.localize('sphereMollweideProjection'),\n                                                cls: ['map-menu-item','sphereMollweideProjection'],\n                                                itemId: 'sphereMollweideProjection'\n                                            }\n                                        ]\n                                    }]\n\n                                }\n                            },'-',{\n                                text: this.localize('cities'),\n                                checked: Ext.Array.contains(hide, \"cities\")==false,\n                                itemId: 'cities',\n                                menu: {\n                                    defaults: {\n                                        labelAlign: 'right',\n                                        labelWidth: 140\n                                    },\n                                    items: [{\n                                        xtype: 'numberfield',\n                                        fieldLabel: this.localize('citiesMaxCount'),\n                                        minValue: 1,\n                                        value: parseInt(this.getApiParam('citiesMaxCount')),\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    this.setApiParam('citiesMaxCount', newVal);\n                                                    var currentCitiesCount = filter.getGeonames().getCitiesCount();\n                                                    if (newVal<oldVal || newVal<=currentCitiesCount) {\n                                                        this.filterUpdate(filter);\n                                                    } else if (filter.getGeonames().hasMoreCities()) {\n                                                        filter.loadGeonames()\n                                                    } else {\n                                                        cmp.setValue(currentCitiesCount); // will call change\n                                                        this.toastInfo(new Ext.XTemplate(this.localize(\"allNCitiesShown\")).apply([currentCitiesCount]))\n                                                    }\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    },{\n                                        xtype: 'numberfield',\n                                        fieldLabel: this.localize('citiesMinPopulation'),\n                                        minValue: 1,\n                                        value: parseInt(this.getApiParam('minPopulation')),\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.setApiParam('minPopulation', newVal);\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    if (newVal>oldVal) {\n                                                        this.filterUpdate(filter);\n                                                    } else {\n                                                        filter.loadGeonames()\n                                                    }\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    },{\n                                        xtype: 'numberfield',\n                                        fieldLabel: this.localize('citiesMinFreq'),\n                                        minValue: 1,\n                                        value: parseInt(this.getApiParam('citiesMinFreq')),\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    this.setApiParam('citiesMinFreq', newVal);\n                                                    if (newVal>oldVal) {\n                                                        this.filterUpdate(filter);\n                                                    } else {\n                                                        filter.loadGeonames()\n                                                    }\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    }]\n                                }\n                            },{\n                                text: this.localize('connections'),\n                                checked: Ext.Array.contains(hide, \"connections\")==false,\n                                itemId: 'connections',\n                                menu: {\n                                    defaults: {\n                                        labelWidth: 140,\n                                        labelAlign: 'right'\n                                    },\n                                    items: [{\n                                        xtype: 'numberfield',\n                                        fieldLabel: this.localize('connectionsMaxCount'),\n                                        minValue: 1,\n                                        value: parseInt(this.getApiParam('connectionsMaxCount')),\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    this.setApiParam('connectionsMaxCount', newVal);\n                                                    if (newVal>oldVal) {\n                                                        this.filterUpdate(filter);\n                                                    } else {\n                                                        filter.loadGeonames()\n                                                    }\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    },{\n                                        xtype: 'numberfield',\n                                        fieldLabel: this.localize('connectionsMinFreq'),\n                                        minValue: 1,\n                                        value: parseInt(this.getApiParam('connectionsMinFreq')),\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    this.setApiParam('connectionsMinFreq', newVal);\n                                                    if (newVal>oldVal) {\n                                                        this.filterUpdate(filter);\n                                                    } else {\n                                                        filter.loadGeonames()\n                                                    }\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    }]\n                                }\n\n                            },{\n                                xtype: 'menucheckitem',\n                                checked: Ext.Array.contains(hide, \"animation\")==false,\n                                text: this.localize('animations'),\n                                itemId: 'animation',\n                                menu: {\n                                    defaults: {\n                                        labelWidth: 170,\n                                        labelAlign: 'right',\n                                        width: 280\n                                    },\n                                    items: [{\n                                        xtype: 'sliderfield',\n                                        fieldLabel: this.localize('millisPerAnimation'),\n                                        value: parseInt(this.getApiParam('millisPerAnimation')),\n                                        minValue: this.getAnimationDelay(),\n                                        maxValue: 10000,\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    filter.setMillisPerAnimation(newVal);\n                                                    filter.animate();\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    }]\n                                }\n                            }]\n                        }\n                    }, '-', {\n                        text: this.localize('add'),\n                        itemId: 'addFilter',\n                        glyph: 'xf067@FontAwesome',\n                        handler: function(cmp) {\n                            var colors = this.getApplication().getColorPalette(this.getApiParam('palette'), true),\n                                color = colors[0]; // default to first\n\n                            // find an available color\n                            for (var i=0, len=colors.length; i<len; i++) {\n                                var hasMatch = false;\n                                this.getFilterWidgets().each(function(filter) {\n                                    if (filter.getColor()==colors[i]) {\n                                        hasMatch = true;\n                                        return false;\n                                    }\n                                })\n                                if (hasMatch==false) {\n                                    color = colors[i];\n                                    break;\n                                }\n                            }\n                            var filter = cmp.ownerCt.add({\n                                xtype: 'geonamesfilter',\n                                corpus: this.getCorpus(),\n                                color: color,\n                                listeners: {\n                                    removeFilterWidget: function(filter) {\n                                        var map = this.getMap(), id = filter.getItemId(), filters = this.getFilterWidgets();\n                                        [\"connections\",\"cities\",\"animation\"].forEach(function(layer) {\n                                            map.removeLayer(map.getLayer(id+\"-\"+layer));\n                                        })\n                                        filters.remove(filter);\n                                        if (filters.getCount()==0) { // we always want at least one filter\n                                            // simulate adding a filter\n                                            this.getDockedComponent('bottomToolbar').getComponent('addFilter').click();\n                                        }\n                                    },\n                                    filterUpdate: this.filterUpdate,\n                                    scope: this\n                                }\n                            })\n                            this.getFilterWidgets().add(filter.getId(), filter);\n\n                            var map = this.getMap();\n\n                            var connectionsLayer = new ol.layer.Vector({\n                                source: new ol.source.Vector({\n                                    wrapX: false,\n                                    useSpatialIndex: true // needed to call getExtent()\n                                }),\n                                id: filter.getId()+\"-connections\",\n                                visible: true,\n                                opacity: 0.2,\n                                style: this.travelStyleFunction.bind(this),\n                                updateWhileAnimating: true, // optional, for instant visual feedback\n                                updateWhileInteracting: true // optional, for instant visual feedback\n                            });\n                            map.addLayer(connectionsLayer);\n\n                            var citiesLayer = new ol.layer.Vector({\n                                source: new ol.source.Vector({\n                                    wrapX: false,\n                                    useSpatialIndex: true // needed to call getExtent()\n                                }),\n                                id: filter.getId()+\"-cities\",\n                                opacity: 0.5,\n                                style: this.cityStyleFunction.bind(this)\n                            });\n                            map.addLayer(citiesLayer);\n\n                            var animationLayer = new ol.layer.Vector({\n                                source: new ol.source.Vector({\n                                    wrapX: false,\n                                    useSpatialIndex: true // needed to call getExtent()\n                                }),\n                                id: filter.getId()+\"-animation\",\n                                style:  this.animationStyleFunction.bind(this)\n                            });\n                            map.addLayer(animationLayer);\n                        },\n                        scope: this\n                    }]\n            }]\n        });\n\n        this.on(\"loadedCorpus\", function(src, corpus) {\n            this.tryInit();\n        }, this);\n\n        this.callParent();\n    },\n\n    tryInit: function() {\n        if (this.getIsOpenLayersLoaded() && this.getIsArcLoaded() && this.getIsProj4Loaded() && this.getAnnotationsLoadedIfAvailable()) {\n            var el = this.body.down('.map').setId(Ext.id());\n            /*\n            var overlayEl = this.body.down('.ol-popup');\n            var overlay = new ol.Overlay({\n                element: overlayEl.dom,\n                autoPan: true,\n                autoPanAnimation: {\n                    duration: 250\n                }\n            });\n            this.setOverlay(overlay);\n            */\n            var panel = this;\n            // Add a click handler to hide the popup\n            /*\n            var closer = overlayEl.down(\".ol-popup-closer\").dom;\n            closer.onclick = function() {\n                overlay.setPosition(undefined);\n                closer.blur();\n                panel.getMap().getLayer(\"preview\").getSource().clear();\n\n//                if(panel.getDrawMode()) {\n//                    panel.getDockedComponent('bottomToolbar').getComponent('annotate').click();\n//                }\n                return false;\n            };\n            */\n\n            var baseLayers = this.getBaseLayers();\n            baseLayers['osm'] = new ol.layer.Tile({\n                preload: Infinity,\n                source: new ol.source.OSM({\n                    projection: \"EPSG:3857\"\n                })\n            });\n\n            baseLayers['wms4326'] = new ol.layer.Tile({\n                preload: Infinity,\n                source: new ol.source.TileWMS({\n                    url: 'https://ahocevar.com/geoserver/wms',\n                    crossOrigin: '',\n                    params: {\n                        'LAYERS': 'ne:NE1_HR_LC_SR_W_DR',\n                        'TILED': true\n                    },\n                    projection: 'EPSG:4326'\n                })\n            });\n\n            // baseLayers['watercolor'] =  new ol.layer.Tile({\n            //     preload: Infinity,\n            //     source: new ol.source.Stamen({\n            //         //cacheSize: 2048,\n            //         layer: 'watercolor',\n            //         projection: \"EPSG:3857\"\n            //     })\n            // });\n\n            baseLayers['arcGIS'] = new ol.layer.Tile({\n                preload: Infinity,\n                source: new ol.source.TileArcGISRest({\n                    url: \"https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer\",\n                    projection: \"EPSG:3857\"\n                })\n            });\n\n//            this.setContentEl(overlayEl.down('.popup-content'));\n            var map = new ol.Map({\n                layers: [\n                    baseLayers['osm'],\n\n                    // new ol.layer.Tile({\n                    //     preload: Infinity,\n                    //     source: new ol.source.Stamen({\n                    //         cacheize: 2048,\n                    //         layer: 'toner-hybrid',\n                    //         projection: \"EPSG:3857\"\n                    //     }),\n                    //     id: 'overlayLayer'\n                    // })\n                ],\n//                overlays: [overlay],\n                target: el.getId(),\n                loadTilesWhileInteracting: true,\n                view: new ol.View({\n                    center: [0, 0],\n                    maxResolution: 40075016.68557849 / panel.body.dom.offsetWidth,\n                    zoom: 0\n                })\n            });\n\n            map.on('singleclick', this.handleSingleClick, this);\n            // Add a click handler to the map to render the popup\n            map.on('singleclicking', function(event) {\n                var pixel = event.pixel;\n                var features = map.getFeaturesAtPixel(pixel);\n                if (features) {\n                \t\tfor (var i=0; i<features.length; i++) {\n                \t\t\tvar feature = features[i];\n                \t\t\tif (feature.get(\"type\")=='city') {\n                \t\t\t\tthis.handleLocationClick(feature);\n                \t\t\t}\n                \t\t}\n                \t\tvar feature = features[0];\n                \t\tdebugger\n                }\n                \n                if(features) {\n                    var foundFeature = false;\n                    features.forEach( function(feature) {\n                        if( feature.get(\"type\") === \"city\" && feature.get(\"selected\")) { // city\n                            panel.dispatchEvent(\"termsClicked\", panel, [feature.get(\"forms\").join(\"|\")])\n                            foundFeature = true;\n                        } else if (feature.get(\"type\") === \"connection\" && feature.get(\"selected\") && !foundFeature) { // connection\n                            panel.getFilterWidgets().each(function (filter) {\n                                var geonames = filter.getGeonames();\n                                if (geonames != null) {\n                                    var occurrences = geonames.getAllConnectionOccurrences(feature.get(\"source\"), feature.get(\"target\"));\n                                    var infos = \"<ul>\";\n                                    var docIndex = -1;\n                                    occurrences.forEach(function(occ) {\n                                        if(occ.docIndex != docIndex) {\n                                            docIndex = occ.docIndex;\n                                            infos += '<h4>' + panel.getCorpus().getDocument(docIndex).getFullLabel() + ':</h4>';\n                                        }\n                                        infos += '<li>'+ occ.source.left+'<a href=\"http://www.geonames.org/' + occ.source.id + '\" target=\"_blank\" docIndex='+occ.docIndex +' offset='+occ.source.position+\n                                            ' location='+occ.source.form + ' cityId=' + occ.source.id + ' coordinates=' + JSON.stringify(sourceCoordinates) + ' class=\"termLocationLink\">' + occ.source.form + '</a> '+occ.source.right + ' [...] ' +\n                                            occ.target.left+'<a href=\"http://www.geonames.org/' + occ.target.id + '\" target=\"_blank\" docIndex='+occ.docIndex+' offset='+occ.target.position+\n                                            ' location='+occ.target.form+ ' cityId=' + occ.target.id + ' coordinates=' + JSON.stringify(targetCoordinates) + ' class=\"termLocationLink\">' + occ.target.form + '</a> '+occ.target.right + '</li>';\n                                    });\n                                    var header = feature.get(\"text\");\n                                    infos += \"</ul>\";\n                                    panel.getContentEl().setHtml('<h3>' + header + '</h3>' + infos);\n                                    panel.getOverlay().setPosition(event.coordinate);\n                                    var links = Ext.select('.termLocationLink');\n\n//                                    function contextMenuListener(el) {\n//                                        el.addEventListener( \"contextmenu\", function(e) {\n//                                            e.preventDefault();\n//                                            panel.openContextMenu(e.layerX, e.layerY, el);\n//                                            return false;\n//                                        }, false);\n//                                    }\n\n                                    links.elements.forEach(function(link) {\n//                                        contextMenuListener(link);\n                                        link.onmouseover = function(){panel.showTermInCorpus(link.getAttribute(\"docIndex\"), link.getAttribute(\"offset\"), link.getAttribute('location'))};\n                                    });\n                                }\n                            });\n                            foundFeature = true\n                        } /*else if (feature.get(\"type\") === \"annotation\" && !foundFeature) { //annotation\n                            panel.setCurrentAnnotation(feature);\n                            panel.getContentEl().setHtml('<textarea class=\"annotation-text\" rows=\"5\" cols=\"60\">'+(feature.get(\"text\")?feature.get(\"text\"):\"\")+'</textarea>' +\n                                '<button class=\"saveAnnotation\">Save</button><button class=\"deleteAnnotation\">Delete</button>');\n                            panel.getOverlay().setPosition(event.coordinate);\n                            panel.getContentEl().down('.deleteAnnotation').dom.onclick = function() {panel.deleteAnnotation()};\n                            panel.getContentEl().down('.saveAnnotation').dom.onclick = function() {panel.saveAnnotation()};\n                            panel.getContentEl().down('.annotation-text').dom.focus();\n                        } */\n                    }, this);\n                }\n            });\n\n            // Layer for selected vector\n            var selectedLayer = new ol.layer.Vector({\n                map: map,\n                source: new ol.source.Vector({\n                    wrapX: false,\n                    useSpatialIndex: false // optional, might improve performance\n                }),\n                zIndex: 10,\n                selected: true,\n                style: function(feature) {\n                    if(feature.get(\"type\") === \"city\")\n                    {\n                        return panel.cityStyleFunction(feature, map.getView().getResolution());\n                    } else if(feature.get(\"type\") === \"connection\") {\n                        return panel.travelStyleFunction(feature, map.getView().getResolution());\n                    }\n                },\n                updateWhileAnimating: true, // optional, for instant visual feedback\n                updateWhileInteracting: true // optional, for instant visual feedback\n            });\n\n            // Layer for edit preview\n            var previewLayer = new ol.layer.Vector({\n                map: map,\n                source: new ol.source.Vector({\n                    wrapX: false,\n                    useSpatialIndex: false // optional, might improve performance\n                }),\n                preview: true,\n                zIndex: 15,\n                id: \"preview\",\n                style: function(feature) {\n                    if(feature.get(\"type\") === \"city\")\n                    {\n                        return panel.cityStyleFunction(feature, map.getView().getResolution());\n                    } else if(feature.get(\"type\") === \"connection\") {\n                        return panel.travelStyleFunction(feature, map.getView().getResolution());\n                    }\n                },\n                updateWhileAnimating: true, // optional, for instant visual feedback\n                updateWhileInteracting: true // optional, for instant visual feedback\n            });\n            map.addLayer(previewLayer);\n\n            // Add handler to update selected vector when mouse is moved\n            map.on('pointermove', function(event) {\n            \t\n            \t// set cursoe to pointer if we have a feature\n            \t  var pixel = map.getEventPixel(event.originalEvent);\n            \t  var hit = map.hasFeatureAtPixel(pixel);\n            \t  map.getViewport().style.cursor = hit ? 'pointer' : '';\n            \t  \n                if(!panel.getDrawMode()) {\n                    selectedLayer.getSource().clear();\n                    var coordinate = event.coordinate;\n                    var pixel = event.pixel;\n                    var features = map.getFeaturesAtPixel(pixel);\n                    if(features) {\n                        var i = 0;\n                        while(features[i].get(\"selected\")){\n                            i++;\n                            if (i === features.length) break;\n                        }\n                        if (i < features.length) {\n                            var feature = features[i];\n\n                            var baseTextStyle = {\n                                font: '12px Calibri,sans-serif',\n                                textAlign: 'center',\n                                offsetY: -15,\n                                fill: new ol.style.Fill({\n                                    color: [0,0,0,1]\n                                }),\n                                stroke: new ol.style.Stroke({\n                                    color: [255,255,255,0.5],\n                                    width: 4\n                                })\n                            };\n\n                            baseTextStyle.text = feature.get(\"text\");\n\n                            var textOverlayStyle = new ol.style.Style({\n                                text: new ol.style.Text(baseTextStyle),\n                                zIndex: 1\n                            });\n\n                            if (!(feature.get(\"type\") === \"annotation\")) {\n                                var selectedFeature = new ol.Feature({\n                                    text: feature.get(\"text\"),\n                                    geometry: feature.getGeometry(),\n                                    forms: feature.get(\"forms\"),\n                                    selected: true,\n                                    coordinates: feature.get(\"coordinates\"),\n                                    width: feature.get(\"width\"),\n                                    visible: feature.get(\"visible\"),\n                                    color: feature.get(\"color\"),\n                                    type: feature.get(\"type\"),\n                                    confidence: feature.get(\"confidence\"),\n                                    source: feature.get(\"source\"),\n                                    target: feature.get(\"target\"),\n                                    cityId: feature.get(\"cityId\")\n                                });\n                                selectedLayer.getSource().addFeature(selectedFeature);\n                            }\n                            var geometry = feature.getGeometry();\n                            var point = event.coordinate;\n                            var textFeature = new ol.Feature({\n                                geometry: new ol.geom.Point(point),\n                                selected: true\n                            });\n                            textFeature.setStyle(textOverlayStyle);\n                            selectedLayer.getSource().addFeature(textFeature);\n\n                            // Highlight all connection where selected city is source or target\n\n                            if(feature.get(\"type\") === \"city\") {\n                                var layers = panel.getMap().getLayers();\n                                layers.forEach(function (layer) {\n                                    var layerId = layer.get(\"id\");\n                                    if (layerId && layerId.indexOf(\"connections\") !== -1) {\n                                        connections = layer.getSource().getFeatures();\n                                        connections.forEach(function (connection) {\n                                            if(connection.get(\"target\") === feature.get(\"cityId\") || connection.get(\"source\") === feature.get(\"cityId\")) {\n                                                selectedLayer.getSource().addFeature(new ol.Feature({\n                                                    geometry: connection.getGeometry(),\n                                                    selected: true,\n                                                    coordinates: connection.get(\"coordinates\"),\n                                                    width: connection.get(\"width\"),\n                                                    visible: connection.get(\"visible\"),\n                                                    color: connection.get(\"color\"),\n                                                    type: connection.get(\"type\")\n                                                }));\n                                            }\n                                        })\n                                    }\n                                })\n                            }\n                        }\n                    }\n                }\n            });\n            var source = new ol.source.Vector({wrapX: false});\n\n            var annotations = new ol.layer.Vector({\n                source: source,\n                id: \"annotations\"\n            });\n\n            var annotationsObj = this.getAnnotations();\n            if (annotationsObj) {\n                var geojson = new ol.format.GeoJSON();\n                var features = geojson.readFeatures(annotationsObj);\n                source.addFeatures(features);\n            }\n\n            map.addLayer(annotations);\n\n            this.setDrawInteraction(\n                new ol.interaction.Draw({\n                    source: source,\n                    type: \"Polygon\",\n                    freehand: true,\n                    alias: \"draw\"\n                })\n            );\n            this.getDrawInteraction().on('drawend', function (evt) {\n                evt.feature.set('type', 'annotation');\n//                panel.setCurrentAnnotation(evt.feature);\n                panel.editAnnotation(evt.feature);\n//                panel.getContentEl().setHtml('<textarea class=\"annotation-text\" rows=\"5\" cols=\"60\"></textarea>'+\n//                    '<button class=\"saveAnnotation\">Save</button><button class=\"deleteAnnotation\">Cancel</button>');\n//                panel.getContentEl().down('.deleteAnnotation').dom.onclick = function() {panel.deleteAnnotation()};\n//                panel.getContentEl().down('.saveAnnotation').dom.onclick = function() {panel.saveAnnotation()};\n//                panel.getOverlay().setPosition(evt.feature.getGeometry().getLastCoordinate());\n//                panel.getContentEl().down('.annotation-text').dom.focus();\n            });\n\n            /*\n            map.getViewport().addEventListener('contextmenu', function (e) {\n                e.preventDefault();\n                panel.openContextMenu(e.layerX, e.layerY);\n                return false;\n            }, false);\n            */\n\n            this.setMap(map);\n\n            var zoom = this.getTargetEl().down(\".ol-zoom\");\n            Ext.create('Ext.Button', {\n                glyph:'xf075@FontAwesome',\n                cls: 'annotate',\n                renderTo: this.getTargetEl().down(\".ticker\").parent(),\n                tooltip: this.localize('annotateTip'),\n                enableToggle: true,\n                toggleHandler: function(cmp, state) {\n                    if (state) {\n                        this.getMap().addInteraction(this.getDrawInteraction());\n                    } else {\n                        this.getMap().removeInteraction(this.getDrawInteraction());\n                    }\n                },\n                scope: this\n            })\n\n            // simulate adding a filter\n            this.getDockedComponent('bottomToolbar').getComponent('addFilter').click();\n        } else {\n            Ext.defer(this.tryInit, 500, this); // try again in a half second\n        }\n    },\n    \n    editAnnotation: function(feature) {\n    \t\tvar text = feature.get(\"text\"), buttons = [];\n    \t\tExt.Msg.show({\n    \t\t\ttitle: this.localize(\"editAnnotation\"),\n    \t\t\tmessage: this.localize(\"editAnnotationMessage\"),\n    \t\t\tbuttons: Ext.Msg.OKCANCEL,\n            multiline: true,\n            value: text,\n            scope: this,\n            callback: function(btn, val) {\n            \t\tif (btn=='ok') {\n            \t\t\tif (val==\"\") {\n            \t\t\t\tthis.getMap().getLayer(\"annotations\").getSource().removeFeature(feature);\n            \t\t\t} else {\n            \t\t\t\tfeature.set(\"text\", val);\n            \t\t\t}\n            \t        var geojson  = new ol.format.GeoJSON;\n            \t        var features = this.getMap().getLayer(\"annotations\").getSource().getFeatures();\n            \t        var transformedFeatures = [];\n            \t        var projection = this.getProjection();\n            \t        features.forEach(function (feature) {\n            \t            transformedFeature = feature.clone();\n            \t            transformedFeature.getGeometry().transform(projection?projection:'EPSG:3857', 'EPSG:3857');\n            \t            transformedFeatures.push(transformedFeature);\n            \t        })\n            \t        var json = geojson.writeFeatures(transformedFeatures);\n            \t        this.storeAnnotations(json);\n            \t\t}\n            }\n    \t\t})\n\n    },\n\n    /*\n    deleteAnnotation: function() {\n        this.body.down('.ol-popup').down(\".ol-popup-closer\").dom.click();\n        this.getMap().getLayer(\"annotations\").getSource().removeFeature(this.getCurrentAnnotation());\n        var geojson  = new ol.format.GeoJSON;\n        var features = this.getMap().getLayer(\"annotations\").getSource().getFeatures();\n        var transformedFeatures = [];\n        var projection = this.getProjection();\n        features.forEach(function (feature) {\n            transformedFeature = feature.clone();\n            transformedFeature.getGeometry().transform(projection?projection:'EPSG:3857', 'EPSG:3857');\n            transformedFeatures.push(transformedFeature);\n        })\n        var json = geojson.writeFeatures(transformedFeatures);\n        this.storeAnnotations(json);\n//        localStorage['annotations'] = JSON.stringify(json);\n    },\n    */\n\n    storeAnnotations: function(json) {\n        this.mask(\"storingAnnotations\");\n        var me = this;\n        Ext.Ajax.request({\n            url: this.getTromboneUrl(),\n            params: {\n                tool: 'resource.StoredResource',\n                storeResource: JSON.stringify(json)\n            },\n            scope: this\n        }).then(function(response) {\n            me.unmask();\n            var data = Ext.JSON.decode(response.responseText);\n            me.setApiParam(\"annotationsId\", data.storedResource.id);\n            me.toastInfo(me.localize('annotationsUpdated'));\n        }, function(response) {\n            me.unmask();\n            me.showResponseError(me.localize(\"annotationsUpdateFailed\"), response);\n        });\n    },\n\n    /*\n    saveAnnotation: function() {\n        this.getCurrentAnnotation().set(\"text\", this.getContentEl().down('.annotation-text').dom.value);\n        this.getOverlay().setPosition(undefined);\n//        if(this.getDrawMode()) {\n//            this.getDockedComponent('bottomToolbar').getComponent('annotate').click();\n//        }\n        var geojson  = new ol.format.GeoJSON;\n        var features = this.getMap().getLayer(\"annotations\").getSource().getFeatures();\n        var transformedFeatures = [];\n        var projection = this.getProjection();\n        features.forEach(function (feature) {\n            transformedFeature = feature.clone();\n            transformedFeature.getGeometry().transform(projection?projection:'EPSG:3857', 'EPSG:3857');\n            transformedFeatures.push(transformedFeature);\n        })\n        var json = geojson.writeFeatures(transformedFeatures);\n        this.storeAnnotations(json);\n//        localStorage['annotations'] = JSON.stringify(json);\n    },\n    */\n\n    // Style for vector after animation\n    travelStyleFunction: function(feature, resolution) {\n\n        var stroke = new ol.style.Stroke({\n            color: feature.get('color'),\n            width: feature.get('width')\n        });\n\n        var styles = [\n            new ol.style.Style({\n                stroke: stroke\n            })];\n\n        // Add arrow at the end of vectors\n        var geometry = feature.getGeometry();\n        var end = geometry.getLastCoordinate();\n        var beforeEnd = geometry.getCoordinateAt(0.9);\n        var dx = end[0] - beforeEnd[0];\n        var dy = end[1] - beforeEnd[1];\n        var rotation = Math.atan2(dy, dx);\n\n        var lineStr1 = new ol.geom.LineString([end, [end[0] - 10 * resolution, end[1] + 10 * resolution]]);\n        lineStr1.rotate(rotation, end);\n        var lineStr2 = new ol.geom.LineString([end, [end[0] - 10 * resolution, end[1] - 10 * resolution]]);\n        lineStr2.rotate(rotation, end);\n\n        styles.push(new ol.style.Style({\n            geometry: lineStr1,\n            stroke: stroke\n        }));\n        styles.push(new ol.style.Style({\n            geometry: lineStr2,\n            stroke: stroke\n        }));\n\n        return styles;\n    },\n\n    // Style for cities\n    cityStyleFunction: function(feature, resolution) {\n        if(feature.get(\"visible\")) {\n            var diameter = Math.PI * 2 * feature.get(\"width\");\n            var confArc = feature.get(\"confidence\") ? diameter * feature.get(\"confidence\") : diameter;\n            return (new ol.style.Style({\n                image: new ol.style.Circle({\n                    radius: feature.get(\"width\"),\n                    fill: new ol.style.Fill({\n                        color: feature.get(\"color\")\n                    }),\n                    stroke: new ol.style.Stroke({\n                        lineDash: [confArc, diameter - confArc],\n                        color: 'rgb(255, 255, 255)',\n                        width: 2\n                    })\n                })\n            }));\n        } else {\n            return false;\n        }\n    },\n\n    // Style for vector during animation\n    animationStyleFunction: function (feature) {\n        return [new ol.style.Style({\n            stroke: new ol.style.Stroke({\n                color: feature.get(\"color\"),\n                width: 5\n            })\n        }), new ol.style.Style({\n            geometry: new ol.geom.Circle(feature.getGeometry().getFirstCoordinate()),\n            stroke: new ol.style.Stroke({\n                color: \"white\",\n                width: 10\n            })\n        }), new ol.style.Style({\n            geometry: new ol.geom.Circle(feature.getGeometry().getLastCoordinate()),\n            stroke: new ol.style.Stroke({\n                color: \"white\",\n                width: 10\n            })\n        })];\n    },\n\n    showTermInCorpus: function(docIndex, position, location) {\n        var term = Ext.create(\"Voyant.data.model.Context\", {\n            docIndex: docIndex,\n            position: position,\n            term: location\n        });\n        this.getApplication().dispatchEvent('termLocationClicked', this, [term]);\n    },\n   \n    /**\n     * Update all filters\n     * @private\n     */\n    reloadFilters: function() {\n        this.getFilterWidgets().each(function(filter) {\n        \t\tfilter.loadGeonames();\n        }, this);\n    },\n\n    filterUpdate: function(filter) {\n        var panel = this;\n        filter.clearAnimation();\n\n        var map = this.getMap(), color = filter.getColor();\n\n        var citiesMaxCount = parseInt(this.getApiParam(\"citiesMaxCount\"));\n\n        // determine max rawFreq for sizing\n        var max = 0;\n        filter.getGeonames().eachCity(function(city) {if (city.rawFreq>max) {max=city.rawFreq;}}, this, citiesMaxCount);\n\n        // generate cities\n        var layerSource = map.getLayer(filter.getId()+\"-cities\").getSource();\n\n        var hide = Ext.Array.from(this.getApiParam(\"hide\"));\n\n        layerSource.clear();\n        var minPopulation = parseInt(this.getApiParam(\"minPopulation\"));\n        var citiesMinFreq = parseInt(this.getApiParam(\"citiesMinFreq\"));\n        var validCitiesHash = {};\n\n        filter.getGeonames().eachCity(function(city) {\n\n            if ((!minPopulation || city.population>=minPopulation) && (!citiesMinFreq || city.rawFreq>=citiesMinFreq)) {\n                validCitiesHash[city.id]=true;\n                var coordinates = [parseFloat(city.lng), parseFloat(city.lat)]\n                var feature = new ol.Feature({\n\n                    geometry: new ol.geom.Point(coordinates).transform(ol.proj.get('EPSG:4326'), panel.getProjection()?panel.getProjection():ol.proj.get('EPSG:3857')),\n                    text: city.label + \" (\"+city.rawFreq+\")\",\n                    description: city.label,\n                    color: color,\n                    selected: false,\n                    width: 3+ (Math.sqrt(city.rawFreq/max)*20),\n                    visible: true,\n                    coordinates: coordinates,\n                    forms: city.forms,\n                    cityId: city.id,\n                    type: \"city\",\n                    confidence: city.confidence ? city.confidence*100 : undefined\n                });\n                layerSource.addFeature(feature);\n            }\n        }, this, citiesMaxCount);\n\n        if (layerSource.getFeatures().length>0) {\n            map.getView().fit(layerSource.getExtent());\n        }\n\n        map.getLayer(filter.getId()+\"-cities\").setVisible(Ext.Array.contains(hide, \"cities\")==false);\n\n        layerSource = map.getLayer(filter.getId()+\"-connections\").getSource();\n        layerSource.clear();\n\n        if (Object.keys(validCitiesHash).length==0) {\n            this.toastInfo(\"No cities available for current criteria.\");\n        }\n\n        max = 0;\n        filter.getGeonames().eachConnection(function(connection) {\n            if (connection.rawFreq>max) {max=connection.rawFreq;}\n        }, this);\n\n        // we'll go through all collections to see if we have valid cities\n        var counter = 0,\n            maxConnectionsCount = parseInt(this.getApiParam('connectionsMaxCount')),\n            connectionsMinFreq = parseInt(this.getApiParam('connectionsMinFreq'));\n        filter.getGeonames().eachConnection(function(connection) {\n            if ((!connectionsMinFreq || connection.rawFreq>=connectionsMinFreq) && (!maxConnectionsCount || counter<maxConnectionsCount) && connection.source.id in validCitiesHash && connection.target.id in validCitiesHash && (!minPopulation || (connection.source.population>=minPopulation && connection.target.population>=minPopulation))) {\n                var arcGenerator = new arc.GreatCircle(\n                    {x: connection.source.lng, y: connection.source.lat},\n                    {x: connection.target.lng, y: connection.target.lat});\n                var arcLine = arcGenerator.Arc(100, {offset: 100});\n                var label = connection.source.label+\" -> \"+connection.target.label + \" (\"+connection.rawFreq+\")\"\n                arcLine.geometries.forEach(function(geometry) {\n                    var line = new ol.geom.LineString(geometry.coords);\n                    line.transform(ol.proj.get('EPSG:4326'), panel.getProjection()?panel.getProjection():ol.proj.get('EPSG:3857'));\n                    var feature = new ol.Feature({\n                        geometry: line,\n                        text: label,\n                        color: color,\n                        width: 3+ (Math.sqrt(connection.rawFreq/max)*10),\n                        source: connection.source.id,\n                        target: connection.target.id,\n                        type: \"connection\"\n                    });\n                    layerSource.addFeature(feature);\n                }, this);\n                counter++;\n            }\n        }, this);\n\n        map.getLayer(filter.getId()+\"-connections\").setVisible(Ext.Array.contains(hide, \"connections\")==false)\n\n        filter.animate();\n\n    },\n    \n    handleSingleClick: function(event) {\n        var features = this.getMap().getFeaturesAtPixel(event.pixel);\n        if (features) {\n        \t\tfor (var i=0; i<features.length; i++) {\n        \t\t\tvar feature = features[i];\n        \t\t\tvar featureType = feature.get(\"type\")\n        \t\t\tif (featureType=='city') {\n        \t\t\t\tthis.handleLocationClick(event, feature);\n        \t\t\t\tbreak;\n        \t\t\t} else if (featureType==\"connection\") {\n        \t\t\t\tthis.handleConnectionClick(feature, event.pixel[0], event.pixel[1]);\n        \t\t\t\tbreak;\n        \t\t\t}else if (featureType==\"annotation\") {\n        \t\t\t\tthis.editAnnotation(feature);\n        \t\t\t\tbreak;\n        \t\t\t}\n        \t\t}\n        }\n\n    },\n    \n    handleConnectionClick: function(feature, x, y) {\n\t\tExt.create('Ext.menu.Menu', {\n\t\t\titems: [{\n    \t\t\t\ttext: this.localize(\"viewConnections\"),\n    \t\t\t\ttooltip: this.localize(\"viewConnectionsTip\"),\n    \t\t\t\tglyph: 'xf02d@FontAwesome',\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tthis.mask(\"loadingConnections\");\n    \t\t\t\t\tvar me = this;\n    \t\t            Ext.Ajax.request({\n    \t\t                url: this.getTromboneUrl(),\n    \t\t                params: {\n    \t\t                    tool: 'corpus.Dreamscape',\n    \t\t                    corpus: this.getCorpus().getId(),\n    \t\t                    suppressLocations: true,\n    \t\t                    suppressConnections: true,\n    \t\t                    sourceId: feature.get(\"source\"),\n    \t\t                    targetId: feature.get(\"target\"),\n    \t\t                    context: 2,\n    \t\t                    limit: 25\n    \t\t                },\n    \t\t                scope: this\n    \t\t            }).then(function(response) {\n\t                \t\tme.unmask();\n    \t\t                var data = Ext.JSON.decode(response.responseText);\n    \t\t                if (data && data.dreamscape && data.dreamscape.connectionOccurrences) {\n    \t\t                \t\tvar out = \"<table style='font-size:smaller'>\";\n    \t\t                \t\tdata.dreamscape.connectionOccurrences.connectionOccurrences.forEach(function(occurrence) {\n    \t\t                \t\t\tout+=\"<tr><td style='text-align: right'>\"+occurrence.source.left+\"</td><td class='keyword' style='text-align: center'>\"+\n    \t\t                \t\t\t\toccurrence.source.term+\"</td><td>\"+occurrence.source.right+\"</td><td>\u2026</td><td style='text-align: right'>\"+occurrence.target.left+\"</td><td class='keyword' style='text-align: center'>\"+\n    \t\t                \t\t\t\toccurrence.target.term+\"</td><td>\"+occurrence.target.right+\"</td></tr>\";\n    \t\t                \t\t})\n    \t\t                \t\tout += \"</table>\";\n    \t\t                \t\tExt.Msg.alert(me.localize(\"occurrences\"), out);\n    \t\t                }\n    \t\t            }, function(response) {\n\t                \t\tme.unmask();\n                \t\t\treturn me.showError(me.localize(\"occurrencesNotLoaded\"))\t    \t\t                \t\t\t\n    \t\t            });\n    \t\t\t\t},\n    \t\t\t\tscope: this\n\t\t\t\t}]\n\t\t}).showAt(x, y)\n    },\n    \n    \n    handleLocationClick: function(event, feature) {\n\t\tvar currentGeonameId = feature.get(\"cityId\");\n\t\tvar e = Ext.create('Ext.menu.Menu', {\n\t\t\titems: [{\n    \t\t\t\ttext: this.localize(\"viewOccurrences\"),\n    \t\t\t\ttooltip: this.localize(\"viewOccurrencesTip\"),\n    \t\t\t\tglyph: 'xf02d@FontAwesome',\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tthis.mask(\"loadingOccurrences\");\n    \t\t\t\t\tvar me = this;\n    \t\t            Ext.Ajax.request({\n    \t\t                url: this.getTromboneUrl(),\n    \t\t                params: {\n    \t\t                    tool: 'corpus.Dreamscape',\n    \t\t                    corpus: this.getCorpus().getId(),\n    \t\t                    suppressLocations: true,\n    \t\t                    suppressConnections: true,\n    \t\t                    suppressConnectionOccurrences: true,\n    \t\t                    locationId: currentGeonameId,\n    \t\t                    limit: 25\n    \t\t                },\n    \t\t                scope: this\n    \t\t            }).then(function(response) {\n\t                \t\tme.unmask();\n    \t\t                var data = Ext.JSON.decode(response.responseText);\n    \t\t                if (data && data.dreamscape && data.dreamscape.occurrences) {\n    \t\t                \t\tvar out = \"<table style='font-size:smaller'>\";\n    \t\t                \t\tdata.dreamscape.occurrences.occurrences.forEach(function(occurrence) {\n    \t\t                \t\t\tout+=\"<tr><td style='text-align: right'>\"+occurrence.left+\"</td><td class='keyword' style='text-align: center'>\"+occurrence.term+\"</td><td>\"+occurrence.right+\"</td></tr>\";\n    \t\t                \t\t})\n    \t\t                \t\tout += \"</table>\";\n    \t\t                \t\tExt.Msg.alert(me.localize(\"occurrences\"), out);\n    \t\t                }\n    \t\t            }, function(response) {\n\t                \t\tme.unmask();\n                \t\t\treturn me.showError(me.localize(\"occurrencesNotLoaded\"))\t    \t\t                \t\t\t\n    \t\t            });\n    \t\t\t\t},\n    \t\t\t\tscope: this\n\t\t\t\t},{\n    \t\t\t\ttext: this.localize(\"openInVoyant\"),\n    \t\t\t\ttooltip: this.localize(\"openInVoyantTip\"),\n    \t\t\t\tglyph: 'xf08e@FontAwesome',\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tthis.dispatchEvent('termsClicked', this, feature.get(\"forms\"));\n    \t\t\t\t},\n    \t\t\t\tscope: this\n\t\t\t\t},{\n    \t\t\t\ttext: this.localize(\"editLocation\"),\n    \t\t\t\ttooltip: this.localize(\"editLocationTip\"),\n    \t\t\t\tglyph: 'xf124@FontAwesome',\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tthis.mask(\"loadingAlternatives\");\n    \t\t\t\t\tvar me = this;\n    \t\t            Ext.Ajax.request({\n    \t\t                url: this.getTromboneUrl(),\n    \t\t                params: {\n    \t\t                    tool: 'util.Geonames',\n    \t\t                    query: feature.get(\"forms\")\n    \t\t                },\n    \t\t                scope: this\n    \t\t            }).then(function(response) {\n\t                \t\tme.unmask();\n    \t\t                var data = Ext.JSON.decode(response.responseText);\n    \t\t                if (data && data.geonames && data.geonames.locations) {\n    \t\t                \t\tvar items = []; \t\t \n    \t\t                \t\tObject.values(data.geonames.locations.locations).forEach(function(location) {\n    \t\t                \t\t\titems.push({\n    \t\t                \t\t\t\tboxLabel: location.label+\" (\"+location.population+\")\",\n    \t\t                \t\t\t\tname: 'id',\n    \t\t                \t\t\t\tinputValue: location.id,\n    \t\t                \t\t\t\tchecked: location.id==currentGeonameId\n    \t\t                \t\t\t})\n    \t\t                \t\t})\n    \t\t                \t\tif (items.length==0) {\n    \t\t                \t\t\treturn me.showError(me.localize(\"editLocationNoLocationsFound\"))\n    \t\t                \t\t} else if (items.length==1 && items[0].inputValue==currentGeonameId) {\n    \t\t                \t\t\treturn me.showError(me.localize(\"editLocationNoAlternativesFound\"))\t    \t\t                \t\t\t\n    \t\t                \t\t}\n\t    \t\t                \tExt.create('Ext.window.Window', {\n\t\t\t\t\t\t\t\ttitle: me.localize(\"editLocation\"),\n\t\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\txtype: 'form',\n\t\t\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\t        xtype: 'radiogroup',\n\t\t\t\t\t\t\t\t        columns: 1,\n\t\t\t\t\t\t\t\t        vertical: true,\n\t\t\t\t\t\t\t\t        items: items\n\t\t\t\t\t\t\t\t    }],\n\t\t\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\t\t\tafterrender: function(form) {\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tbuttons: [{\n\t\t\t\t\t\t\t\t\t\ttext: me.localize(\"cancel\"),\n\t\t\t\t\t\t\t            ui: 'default-toolbar',\n\t\t\t\t\t\t                glyph: 'xf00d@FontAwesome',\n\t\t\t\t\t\t        \t\t\tflex: 1,\n\t\t\t\t\t\t        \t\t\thandler: function(btn) {\n\t\t\t\t\t\t        \t\t\t\tbtn.up('window').destroy();\n\t\t\t\t\t\t        \t\t\t}\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\ttext: me.localize(\"confirmTitle\"),\n\t\t\t\t\t\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t\t\t\t\t            \t\t\tflex: 1,\n\t\t\t\t\t            \t\t\thandler: function(btn) {\n\t\t\t\t\t            \t\t\t\tvar newId = btn.up(\"form\").getValues().id;\n\t\t\t\t\t            \t\t\t\tif (newId && newId!=currentGeonameId) {\n\t\t\t\t\t    \t\t\t\t\t\t\tvar config = {};\n\t\t\t\t\t    \t\t\t\t\t\t\tconfig[currentGeonameId] = newId;\n\t\t\t\t\t    \t\t\t\t\t\t\tme.appendOverrides(config);\n\t\t\t\t\t            \t\t\t\t}\n\t\t\t\t\t\t        \t\t\t\tbtn.up('window').destroy();\n\t\t\t\t\t            \t\t\t}\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).show();\n    \t\t                }\n    \t\t            }, function(response) {\n\t                \t\tme.unmask();\n    \t\t                me.showResponseError(me.localize(\"editLocationServerError\"), response);\n\n    \t\t            });\n    \t\t\t\t},\n    \t\t\t\tscope: this\n\t\t\t},{\n    \t\t\t\ttext: this.localize(\"removeLocation\"),\n    \t\t\t\ttooltip: this.localize(\"removeLocationTip\"),\n    \t\t\t\tglyph: 'xf00d@FontAwesome',\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tExt.Msg.confirm(\n\t    \t\t\t\t\tthis.localize(\"removeLocationConfirmTitle\"),\n\t    \t\t\t\t\tthis.localize(\"removeLocationConfirm\"),\n\t    \t\t\t\t\tfunction(btn) {\n\t    \t\t\t\t\t\tif (btn==\"yes\") {\n\t    \t\t\t\t\t\t\tvar config = {};\n\t    \t\t\t\t\t\t\tconfig[currentGeonameId] = \"\";\n\t    \t\t\t\t\t\t\tthis.appendOverrides(config);\n\t    \t\t\t\t\t\t}\n\t    \t\t\t\t\t},\n\t    \t\t\t\t\tthis\n    \t\t\t\t\t)\n    \t\t\t\t},\n    \t\t\t\tscope: this\n\t\t\t}    \t\t\t\t\n\n\t\t\t],\n\t\t\tlisteners: {\n\t\t\t\tfocusleave : function(menu) {\n\t\t\t\t\tmenu.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t}).showAt(event.pixel[0], event.pixel[1])    \t\t\n    },\n    \n    appendOverrides: function(config, isAll) {\n    \t\t// if we have overridesId defined but we haven't loaded all IDs yet\n    \t\tif (this.getApiParam(\"overridesId\") && !isAll) {\n    \t\t\tvar me = this;\n    \t\t\tExt.Ajax.request({\n                url: this.getTromboneUrl(),\n                params: {\n                    tool: 'resource.StoredResource',\n                    retrieveResourceId: this.getApiParam(\"overridesId\")\n                },\n                scope: this\n            }).then(function(response) {\n                var data = Ext.JSON.decode(response.responseText);\n                if (data && data.storedResource && data.storedResource.resource) {\n                \t\tvar newConfig = Ext.decode(data.storedResource.resource);\n                \t\tExt.apply(newConfig, config);\n                \t\t// call again, this time specifying that we have all\n                \t\tme.appendOverrides(newConfig, true);\n                } else {\n                    me.showResponseError(me.localize(\"overidesRetrieveError\"), response);\n                }\n            \t\n            }, function(response) {\n                me.showResponseError(me.localize(\"overidesRetrieveError\"), response);\n            });\n    \t\t} else {\n    \t\t\tvar me = this;\n    \t\t\tExt.Ajax.request({\n                url: this.getTromboneUrl(),\n                params: {\n                    tool: 'resource.StoredResource',\n                    storeResource: Ext.encode(config)\n                },\n                scope: this\n            }).then(function(response) {\n                var data = Ext.JSON.decode(response.responseText);\n                if (data && data.storedResource && data.storedResource.id) {\n                    me.setApiParam(\"overridesId\", data.storedResource.id);\n                    me.reloadFilters();\n                } else {\n                    me.showResponseError(me.localize(\"overidesRetrieveError\"), response);\n                }\n            }, function(response) {\n                me.showResponseError(me.localize(\"overidesStorageError\"), response);\n            });\n    \t\t}\n    }    \n\n});\n\nExt.define('Voyant.widget.GeonamesFilter', {\n    extend: 'Ext.Button',\n    xtype: 'geonamesfilter',\n    mixins: ['Voyant.util.Localization'],\n    statics: {\n        i18n: {\n            filter: 'Filter',\n            authorLabel: 'authors',\n            titleLabel: 'titles',\n            keywordLabel: 'full text',\n            pubDateLabel: \"dates\",\n            loading: \"Loading geographical information\u2026\",\n//            loadedAll: \"All available cities and connections have been loaded (see options under the <i>Show</i> menu in the toolbar).\",\n//            loadedSome: \"Loaded {currentCitiesCount} of {totalCitiesCount} available locations and {currentConnectionsCount} of {totalConnectionsCount} available connections (see options under the <b>Show</b> menu in the toolbar).\",\n//            disclaimer: \"Please note that geographical information is generated automatically and may be inaccurate (<a href='{url}' target='_blank'>more information</a>).</p>\",\n            disclaimer: \"This is an experimental tool and the accuracy of the data is variable (<a href='{url}' target='_blank'>see help</a>).\",\n            noDataForField: \"No data seems to be available for this field so it will be disabled.\",\n            close: \"Close\"\n        }\n    },\n    config: {\n        corpus: undefined, // used by querysearchfields among other things\n        geonames: undefined,\n        color: \"#f00\",\n        timeout: undefined,\n        currentConnectionOccurrence: undefined,\n        animationLayer: undefined,\n        millisPerAnimation: 2000,\n        stepByStepMode: false,\n        keepAnimationInFrame: false\n    },\n    constructor: function(config) {\n        config = config || {};\n        var geonames = new Voyant.data.util.Geonames({\n            corpus: config.corpus\n        });\n        this.setGeonames(geonames);\n        var me = this;\n        Ext.applyIf(config,\n            {\n                tooltip: this.localize('filterTip'),\n                style: \"background-color: white; color: \"+config.color,\n                glyph: 'xf0b0@FontAwesome',\n                menu: {\n                    defaults: {\n                        xtype: 'querysearchfield',\n                        labelWidth: 60,\n                        labelAlign: 'right',\n                        width: 250,\n                        maxWidth: 250,\n                        padding: 2,\n                        listeners: { // don't set scope to this so that load keeps the widget scope\n                            change: function(cmp, vals) {\n                                me.loadGeonames();\n                            },\n                            load: function(store, records, success, operation) {\n                                if (records.length==0 && operation.getParams().query==\"\") {\n                                    Ext.Msg.show({\n                                        buttonText: {ok: me.localize('close')},\n                                        icon: Ext.MessageBox.INFO,\n                                        message: me.localize(\"noDataForField\"),\n                                        buttons: Ext.Msg.OK\n                                    });\n                                    this.disable();\n                                }\n                            }\n                        }\n\n                    },\n                    items: [{\n                        fieldLabel: this.localize('authorLabel'),\n                        tokenType: 'author',\n                        itemId: 'author'\n                    },{\n                        fieldLabel: this.localize('titleLabel'),\n                        itemId: 'title',\n                        tokenType: 'title'\n                    },{\n                        fieldLabel: this.localize('keywordLabel')\n                    },{\n                        xtype: 'multislider',\n                        fieldLabel: this.localize('pubDateLabel'),\n                        itemId: 'pubDate',\n                        tokenType: 'pubDate',\n                        values: [0,1],\n                        hidden: true,\n                        listeners: {\n                            afterrender: function(cmp) {\n                                this.getCorpus().getCorpusTerms().load({\n                                    params: {\n                                        tokenType: 'pubDate',\n                                        limit: 1,\n                                        sort: \"TERMASC\"\n                                    },\n                                    callback: function(records) {\n                                        if (records.length==0) {\n                                            // no pubDate, see if we can parse from titles\n                                            var vals = [];\n                                            this.getCorpus().each(function(doc) {\n                                                var val = parseInt(doc.getTitle());\n                                                if (isNaN(val)==false) {\n                                                    vals.push(parseInt(doc.getTitle()))\n                                                }\n                                            }, this);\n                                            if (vals.length>1) {\n                                                cmp.setMinValue(vals[0]);\n                                                cmp.setMaxValue(vals[vals.length-1]);\n                                                cmp.tokenType = 'title';\n                                                cmp.suspendEvent('changecomplete');\n                                                cmp.setValue([vals[0], vals[vals.length-1]]);\n                                                cmp.resumeEvent('changecomplete');\n                                                cmp.setVisible(true);\n                                            }\n                                        } else {\n                                            cmp.setMinValue(parseInt(records[0].getTerm()))\n                                            this.getCorpus().getCorpusTerms().load({\n                                                params: {\n                                                    tokenType: 'pubDate',\n                                                    limit: 1,\n                                                    sort: \"TERMDESC\"\n                                                },\n                                                callback: function(records) {\n                                                    cmp.setMaxValue(parseInt(records[0].getTerm())),\n                                                        cmp.setVisible(true);\n                                                },\n                                                scope: this\n                                            });\n                                        }\n                                    },\n                                    scope: this\n                                })\n                            },\n                            changecomplete: function(cmp, newVal) {\n                                this.loadGeonames();\n                            },\n                            scope: this\n                        }\n                    }, {\n                        xtype: 'fieldset',\n                        title: \"Animation\",\n                        items: [{\n                            xtype: 'container',\n                            layout: 'hbox',\n                            defaults: {\n                                xtype: 'button',\n                                text: \"\",\n                                ui: 'default-toolbar'\n                            },\n                            items: [{\n                                glyph: 'xf048@FontAwesome', // step back\n                                handler: function() {\n                                    this.getAnimationLayer().getSource().clear();\n                                    this.clearAnimation();\n                                    var currentConnectionOccurrence = this.getCurrentConnectionOccurrence();\n                                    currentConnectionOccurrence = this.getGeonames().getConnectionOccurrence(currentConnectionOccurrence ? currentConnectionOccurrence.index-1 : 0);\n                                    this.setCurrentConnectionOccurrence(currentConnectionOccurrence);\n                                    this.animate();\n                                },\n                                scope: this\n                            },{\n                                glyph: 'xf04c@FontAwesome', // play\n                                handler: function(cmp) {\n                                    if (cmp.getGlyph().glyphConfig==\"xf04b@FontAwesome\") {\n                                        this.clearAnimation();\n                                        cmp.setGlyph(new Ext.Glyph('xf04c@FontAwesome'));\n                                        this.setStepByStepMode(false);\n                                        this.animate();\n                                    } else {\n                                        cmp.setGlyph(new Ext.Glyph('xf04b@FontAwesome'));\n//                                         this.clearAnimation();\n//                                         this.getAnimationLayer().getSource().clear();\n                                        this.setStepByStepMode(true);\n                                    }\n//                                     this.setCurrentConnectionOccurrence(this.getGeonames().getConnectionOccurrence(0));\n                                },\n                                scope: this\n\n                            },{\n                                glyph: 'xf051@FontAwesome', // step forward\n                                handler: function() {\n                                    this.getAnimationLayer().getSource().clear();\n                                    this.clearAnimation();\n                                    var currentConnectionOccurrence = this.getCurrentConnectionOccurrence();\n                                    currentConnectionOccurrence = this.getGeonames().getConnectionOccurrence(currentConnectionOccurrence ? currentConnectionOccurrence.index+1 : 0);\n                                    this.setCurrentConnectionOccurrence(currentConnectionOccurrence);\n                                    this.animate();\n                                },\n                                scope: this\n                            }, {\n                                xtype: 'tbtext',\n                                text: \"&nbsp;&nbsp;\"\n                            }, {\n                                glyph: 'xf01e@FontAwesome', // reset\n                                handler: function() {\n                                    this.getAnimationLayer().getSource().clear();\n                                    this.clearAnimation();\n                                    this.setCurrentConnectionOccurrence(this.getGeonames().getConnectionOccurrence(0));\n                                    this.animate();\n                                },\n                                scope: this\n                            }]\n                        }, {\n                            xtype: 'checkbox',\n                            checked: false,\n                            handler: function(item, checked) {\n                                me.setKeepAnimationInFrame(checked);\n                            },\n                            boxLabel: \"Keep animation in frame\"\n                        }]\n\n                    },{\n                        xtype: \"container\",\n                        text: \"&nbsp;\"\n                    },{\n                        xtype: 'button',\n                        text: 'remove',\n                        scope:this,\n                        //margin: 3,\n                        handler: function(cmp) {\n                            // assumes coupling with dreamscape\n                            this.fireEvent(\"removeFilterWidget\", this);\n                            cmp.ownerCt.ownerCmp.destroy();\n                        }\n                    }]\n                }\n            });\n        this.callParent([config]);\n        this.on(\"afterrender\", function(cmp) {\n            cmp.getTargetEl().down('.x-btn-glyph').setStyle('color', this.getColor());\n            var panel = cmp.up(\"panel\")\n            panel.mask(cmp.localize(\"loading\"));\n            cmp.loadGeonames().then(function(geonames) {\n                panel.unmask();\n                if (panel.getFilterWidgets().getCount()==1) {\n                    var currentCitiesCount = geonames.getCitiesCount(),\n                        totalCitiesCount = geonames.getTotalCitiesCount(),\n                        currentConnectionsCount = geonames.getConnectionsCount(),\n                        totalConnectionsCount = geonames.getTotalConnectionsCount();\n                    message = cmp.localize(currentCitiesCount==totalCitiesCount && currentConnectionsCount==totalConnectionsCount ? \"loadedAll\" : \"loadedSome\") +\n                        \"<br><br>\"+cmp.localize(\"disclaimer\");\n                    panel.toastInfo({\n                        autoCloseDelay: 5000,\n\n                        closable: true,\n                        maxWidth: '90%',\n                        html: new Ext.Template(cmp.localize(\"disclaimer\")).apply({\n                            currentCitiesCount: currentCitiesCount,\n                            totalCitiesCount: totalCitiesCount,\n                            currentConnectionsCount: currentConnectionsCount,\n                            totalConnectionsCount: totalConnectionsCount,\n                            url: panel.getBaseUrl()+\"docs/tutorial-dreamscape.html\"\n                        })\n\n                    });\n                }\n            })\n        }, this);\n    },\n    loadGeonames: function(params) {\n        var me = this;\n        params = params || {};\n\n        // add queries\n        var queries  = [];\n        this.query('querysearchfield').forEach(function(querysearchfield) {\n            var id = querysearchfield.getItemId();\n            querysearchfield.getValue().forEach(function(query) {\n                queries.push(id+\":\"+query);\n            })\n        });\n        var pubDateSlider = this.down(\"multislider\");\n        if (pubDateSlider && pubDateSlider.isVisible()) {\n            var vals = pubDateSlider.getValue();\n            queries.push(pubDateSlider.tokenType+\":[\"+vals[0]+\"-\"+vals[1]+\"]\")\n        }\n        if (queries.length>0 && !(\"query\" in params)) {params.query=queries;}\n\n        // add params from tool\n        var panel  = this.up('panel');\n        if (panel && panel.getApiParams) {\n            Ext.applyIf(params, panel.getApiParams([\"minPopulation\",\"connectionsMaxCount\",\"connectionsMinFreq\",\"source\",\"overridesId\",\"filterHasLowerCaseForm\",\"filterIsPersonName\",\"preferredCoordinates\"]))\n        }\n\n        this.mask(\"\u2026\");\n        var geonames = this.getGeonames();\n        return geonames.load(params).then(function() {\n            me.unmask();\n            me.fireEvent(\"filterUpdate\", me, geonames);\n            return geonames;\n        }, function() {\n            me.unmask();\n        });\n    },\n\n    clearAnimation: function() {\n        if (this.getTimeout()) {clearTimeout(this.getTimeout());}\n    },\n\n    animate: function() {\n        var panel = this.up('panel');\n        if (!panel) {return;}\n        this.clearAnimation();\n        var currentConnectionOccurrence = this.getCurrentConnectionOccurrence();\n        if (currentConnectionOccurrence) {\n            var animationLayer = this.getAnimationLayer();\n            if (!animationLayer) {\n                animationLayer = this.up('panel').getMap().getLayer(this.getId()+\"-animation\");\n                this.setAnimationLayer(animationLayer);\n            }\n            if (animationLayer) {\n                var features = animationLayer.getSource().getFeatures();\n                if (features.length==0) {\n                    if (!panel) {return;}\n                    var connectionsLayerSource = panel.getMap().getLayer(this.getId()+\"-connections\").getSource();\n                    var connectionsFeatures = connectionsLayerSource.getFeatures();\n                    var hasMatch = false;\n                    for (var i=0, len=connectionsFeatures.length; i<len; i++) {\n                        if (currentConnectionOccurrence.source.id==connectionsFeatures[i].get(\"source\") && currentConnectionOccurrence.target.id==connectionsFeatures[i].get(\"target\")) {\n                            hasMatch = connectionsFeatures[i];\n                            break;\n                        }\n                    }\n                    if (hasMatch) {\n                        // check to see if we need to reposition the map, use displayed feature as basis for extent\n                        if(this.getKeepAnimationInFrame()) {\n                            var map = panel.getMap();\n                            var extent = panel.getMap().getView().calculateExtent(map.getSize());\n                            var isVisible = ol.extent.containsExtent(extent, hasMatch.getGeometry().getExtent());\n                            if(!isVisible) {\n                                newExtent = ol.extent.extend(extent, hasMatch.getGeometry().getExtent());\n                                map.getView().fit(newExtent);\n                            }\n                        }\n\n                        var arcGenerator = new arc.GreatCircle(\n                            {x: currentConnectionOccurrence.source.lng, y: currentConnectionOccurrence.source.lat},\n                            {x: currentConnectionOccurrence.target.lng, y: currentConnectionOccurrence.target.lat});\n                        var arcLine = arcGenerator.Arc(100, {offset: 100});\n                        var label = currentConnectionOccurrence.source.label+\" -> \"+currentConnectionOccurrence.target.label;\n                        arcLine.geometries.forEach(function(geometry) {\n                            var line = new ol.geom.LineString([]); // can be empty since we generate a line during next animate call\n                            line.transform(ol.proj.get('EPSG:4326'), panel.getProjection()?panel.getProjection():ol.proj.get('EPSG:3857'));\n                            var feature = new ol.Feature({\n                                geometry: line,\n                                allcoords: geometry.coords ,\n                                text: label,\n                                color: this.getColor(),\n                                width: 5,\n                                start: new Date().getTime()\n                            });\n                            animationLayer.getSource().addFeature(feature);\n                        }, this);\n\n                        var ticker = panel.body.down(\".ticker\");\n\n                        panel.body.down(\".ticker\").setHtml(\n                            currentConnectionOccurrence.source.left+\" <span class='keyword'>\"+currentConnectionOccurrence.source.term+\"</span> \"+currentConnectionOccurrence.source.right+\" \u2026 \"+\n                            currentConnectionOccurrence.target.left+\" <span class='keyword'>\"+currentConnectionOccurrence.target.term+\"</span> \"+currentConnectionOccurrence.target.right\n                        );\n                        return this.setTimeout(setTimeout(this.animate.bind(this), 1));\n\n                    } else {\n                        if (!this.getGeonames()) {return;}\n                        currentConnectionOccurrence = this.getGeonames().getConnectionOccurrence(currentConnectionOccurrence.index+1);\n                        this.setCurrentConnectionOccurrence(currentConnectionOccurrence);\n                        animationLayer.getSource().clear();\n                        return this.setTimeout(setTimeout(this.animate.bind(this), 1));\n\n                    }\n                } else if (features.length>0) {\n\n                    var coords = features[0].getGeometry().getCoordinates(),\n                        allcoords = features[0].get(\"allcoords\");\n                    if (coords.length<allcoords.length) {\n                        var elapsed = new Date().getTime()-features[0].get('start'),\n                            len = elapsed*allcoords.length/this.getMillisPerAnimation()\n                        line = new ol.geom.LineString(allcoords.slice(0,len));\n                        line.transform(ol.proj.get('EPSG:4326'), panel.getProjection()?panel.getProjection():ol.proj.get('EPSG:3857'));\n                        features[0].set(\"geometry\", line);\n                        return this.setTimeout(setTimeout(this.animate.bind(this), 25));\n\n                    }\n                    // if we get here, all features should have been changed\n                    currentConnectionOccurrence = this.getGeonames().getConnectionOccurrence(currentConnectionOccurrence.index+1);\n                    if(!this.getStepByStepMode()) {\n                        this.setCurrentConnectionOccurrence(currentConnectionOccurrence);\n                        animationLayer.getSource().clear();\n                        return this.setTimeout(setTimeout(this.animate.bind(this), 1));\n                    }\n                }\n            }\n        } else {\n            if (!this.getGeonames()) {return;}\n            currentConnectionOccurrence = this.getGeonames().getConnectionOccurrence(0);\n            if (currentConnectionOccurrence) {\n                this.setCurrentConnectionOccurrence(currentConnectionOccurrence);\n                return this.setTimeout(setTimeout(this.animate.bind(this), 1));\n            }\n        }\n    }\n});\n","Ext.define('Voyant.panel.Entities', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.entities',\n\n\tstatics: {\n\t\ti18n: {\n\t\t\ttitle: 'Named Entity Recognition',\n\t\t\tentity: 'Entity',\n\t\t\tlemma: 'Lemma',\n\t\t\tclassification: 'Classification',\n\t\t\tdocument: 'Document',\n\t\t\tstart: 'Start',\n\t\t\tend: 'End',\n\t\t\tentityType: 'entity type',\n\t\t\tnerVoyant: 'Entity Identification with Voyant',\n\t\t\tnerNssi: 'Entity Identification with NSSI',\n\t\t\tnerSpacy: 'Entity Identification with SpaCy',\n\t\t},\n\t\tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.Entities\n\t\t\t * @instance\n\t\t\t * @property {docId}\n\t\t\t */\n    \t\tdocId: undefined,\n\t\t}\n\t},\n\n\tconstructor: function(config) {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n\t\tthis.callParent(arguments);\n\t\tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\n\tinitComponent: function() {\n\t\tvar me = this;\n\n\t\tExt.apply(me, {\n\t\t\ttitle: this.localize('title'),\n\t\t\tlayout: 'fit',\n\t\t\titems: [{\n\t\t\t\txtype: 'entitieslist',\n\t\t\t\tlisteners: {\n\t\t\t\t\tboxready: function(cmp) {\n\t\t\t\t\t\tcmp.getColumns().forEach(function(col) {\n\t\t\t\t\t\t\tcol.show();\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t}],\n\t\t\tdockedItems: [{\n\t\t\t\tdock: 'bottom', \n\t\t\t\txtype: 'toolbar',\n\t\t\t\titems: [{\n\t\t\t\t\txtype: 'corpusdocumentselector'\n\t\t\t\t},{\n\t\t\t\t\titemId: 'annotatorType',\n\t\t\t\t\txtype: 'combo',\n\t\t\t\t\tqueryMode: 'local',\n\t\t\t\t\ttriggerAction: 'all',\n\t\t\t\t\tfieldLabel: 'NER Annotator',\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tvalue: 'spacy',\n\t\t\t\t\tforceSelection: true,\n\t\t\t\t\tallowBlank: false,\n\t\t\t\t\teditable: false,\n\t\t\t\t\tvalueField: 'value',\n\t\t\t\t\tdisplayField: 'name',\n\t\t\t\t\tstore: new Ext.data.ArrayStore({\n\t\t\t\t\t\tfields: ['name', 'value'],\n\t\t\t\t\t\tdata: [['Spacy', 'spacy'], ['NSSI', 'nssi'], ['Voyant', 'stanford']]\n\t\t\t\t\t})\n\t\t\t\t},{\n\t\t\t\t\txtype: 'button',\n\t\t\t\t\ttext: 'Find Entities',\n\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\tvar annotator = btn.up().queryById('annotatorType').getValue();\n\t\t\t\t\t\tif (annotator !== null) {\n\t\t\t\t\t\t\tthis.nerServiceHandler(annotator);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t},'->',{\n\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\titemId: 'entitySearch',\n\t\t\t\t\tfieldLabel: 'Filter Entities',\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tenableKeyEvents: true,\n\t\t\t\t\ttriggers: {\n\t\t\t\t\t\tsearch: {\n\t\t\t\t\t\t\tcls: 'fa-trigger form-fa-search-trigger',\n\t\t\t\t\t\t\thandler: function(cmp) {\n\t\t\t\t\t\t\t\tthis.searchEntities(cmp.getValue());\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tkeyup: function(cmp, e) {\n\t\t\t\t\t\t\tif (e.getCharCode() === 13) {\n\t\t\t\t\t\t\t\tthis.searchEntities(cmp.getValue());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tcorpusSelected: function(src, corpus) {\n\t\t\t\t\tthis.setApiParam('docId', undefined);\n\t\t\t\t},\n\n\t\t\t\tdocumentsSelected: function(src, docIds) {\n\t\t\t\t\tthis.setApiParam('docId', docIds);\n\t\t\t\t},\n\n\t\t\t\tentitiesClicked: function(src, ents) {\n\t\t\t\t},\n\n\t\t\t\tentityLocationClicked: function(src, ent) {\n\t\t\t\t},\n\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\n\t\tme.callParent(arguments);\n\t},\n\n\tnerServiceHandler: function(annotator) {\n\t\tvar entitiesList = this.down('entitieslist');\n\t\tentitiesList.clearEntities();\n\t\tentitiesList.getEntities(annotator, this.getApiParam('docId'));\n\t},\n\n\tsearchEntities: function(query) {\n\t\tquery = query.trim().toLowerCase();\n\t\tvar entitiesList = this.down('entitieslist');\n\t\tif (query.length > 0) {\n\t\t\tentitiesList.getStore().filterBy(function(record) {\n\t\t\t\treturn record.getTerm().toLowerCase().indexOf(query) !== -1;\n\t\t\t});\n\t\t\tentitiesList.getView().findFeature('grouping').expandAll();\n\t\t} else {\n\t\t\tentitiesList.getStore().clearFilter();\n\t\t\tentitiesList.getView().findFeature('grouping').collapseAll();\n\t\t}\n\t}\n});\n\n","// assuming Knots library is loaded by containing page (via voyant.jsp)\r\n/**\r\n * Knots is a creative visualization that represents terms in a single document as a series of twisted lines.\r\n *\r\n * @example\r\n *\r\n * let config = {\r\n * \t\"audio\": false,\r\n * \t\"docId\": null,\r\n * \t\"query\": null,\r\n * \t\"stopList\": \"auto\"\r\n * };\r\n *\r\n * loadCorpus(\"austen\").tool(\"knots\", config);\r\n *\r\n * @class Knots\r\n * @tutorial knots\r\n * @memberof Tools\r\n */\r\nExt.define('Voyant.panel.Knots', {\r\n\textend: 'Ext.panel.Panel',\r\n\tmixins: ['Voyant.panel.Panel'],\r\n\talias: 'widget.knots',\r\n    statics: {\r\n    \ti18n: {\r\n    \t},\r\n    \tapi: {\r\n    \t\t/**\r\n        \t * @memberof Tools.Knots\r\n\t\t\t * @instance\r\n\t\t\t * @property {query}\r\n        \t */\r\n    \t\tquery: undefined,\r\n    \t\t/**\r\n\t\t\t * @memberof Tools.Knots\r\n    \t\t * @instance\r\n    \t\t * @property {stopList}\r\n\t\t\t * @default\r\n    \t\t */\r\n    \t\tstopList: 'auto',\r\n\r\n    \t\t/**\r\n\t\t\t * @memberof Tools.Knots\r\n    \t\t * @instance\r\n    \t\t * @property {docId}\r\n    \t\t */\r\n    \t\tdocId: undefined,\r\n    \t\t\r\n\t\t\t/**\r\n\t\t\t * @memberof Tools.Knots\r\n\t\t\t * @instance\r\n\t\t\t * @property {Boolean} audio Whether or not to play audio during the visualization.\r\n\t\t\t * @default\r\n\t\t\t */\r\n    \t\taudio: false\r\n    \t},\r\n    \tglyph: 'xf06e@FontAwesome'\r\n\t},\r\n\tconfig: {\r\n\t\tknots: undefined,\r\n\t\ttermStore: undefined,\r\n\t\tdocTermStore: undefined,\r\n\t\ttokensStore: undefined,\r\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'},{xtype: 'colorpaletteoption'}],\r\n    \trefreshInterval: 100,\r\n    \tstartAngle: 315,\r\n    \tangleIncrement: 15,\r\n    \tcurrentTerm: undefined\r\n\t},\r\n\t\r\n\ttermTpl: new Ext.XTemplate(\r\n\t\t'<tpl for=\".\">',\r\n\t\t\t'<div class=\"term\" style=\"color: rgb({color});float: left;padding: 3px;margin: 2px;\">{term}</div>',\r\n\t\t'</tpl>'\r\n\t),\r\n\t\r\n    constructor: function() {\r\n        this.callParent(arguments);\r\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\r\n    \t\r\n    \tthis.on('loadedCorpus', function(src, corpus) {\r\n\t\t\tvar docId = this.getApiParam('docId');\r\n\t\t\tif (docId === undefined) {\r\n\t\t\t\tdocId = corpus.getDocument(0).getId();\r\n\t\t\t\tthis.setApiParam('docId', docId);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar pDoc = this.processDocument(corpus.getDocument(docId));\r\n\t\t\tthis.getKnots().setCurrentDoc(pDoc);\r\n\t\t\t\r\n\t\t\tthis.getDocTermStore().getProxy().setExtraParam('corpus', corpus.getId());\r\n\t\t\tthis.getTokensStore().setCorpus(corpus);\r\n\r\n\t\t\tvar termsLimit = 5;\r\n\t\t\tvar query = this.getApiParam('query');\r\n\t\t\tif (query != undefined && query != '') {\r\n\t\t\t\ttermsLimit = Array.isArray(query) ? query.length : query.split(',').length\r\n\t\t\t}\r\n\t\t\tthis.getDocTermStore().load({params: {\r\n\t\t\t\tquery: query,\r\n\t\t\t\tlimit: termsLimit,\r\n\t\t\t\tstopList: this.getApiParams('stopList')\r\n\t\t\t}});\r\n    \t}, this);\r\n    \t\r\n        this.on('activate', function() { // load after tab activate (if we're in a tab panel)\r\n\t\t\tif (this.getCorpus()) {\t\t\t\t\r\n\t\t\t\tExt.Function.defer(function() {\r\n\t\t\t\t\tthis.getDocTermStore().load({params: {\r\n\t\t\t\t    \tlimit: 5,\r\n\t\t\t\t    \tstopList: this.getApiParams('stopList')\r\n\t\t\t\t    }});\r\n\t\t\t\t}, 100, this);\r\n\t\t\t}\r\n    \t}, this);\r\n        \r\n        this.on('query', function(src, query) {\r\n    \t\tif (query !== undefined && query != '') {\r\n    \t\t\tthis.getDocTermsFromQuery(query);\r\n    \t\t}\r\n    \t}, this);\r\n        \r\n        this.on('documentSelected', function(src, doc) {\r\n        \t\r\n        \tvar document = this.getCorpus().getDocument(doc)\r\n        \tthis.setApiParam('docId', document.getId());\r\n        \t\r\n        \tvar terms = this.getKnots().currentDoc.terms;\r\n        \tvar termsToKeep = [];\r\n        \tfor (var t in terms) {\r\n        \t\ttermsToKeep.push(t);\r\n        \t}\r\n        \t\r\n//        \tthis.getTermStore().removeAll();\r\n    \t\tthis.setApiParams({query: termsToKeep});\r\n    \t\t\r\n    \t\tvar limit = termsToKeep.length;\r\n    \t\tif (limit === 0) {\r\n    \t\t\tlimit = 5;\r\n    \t\t}\r\n        \t\r\n        \tthis.getKnots().setCurrentDoc(this.processDocument(document));\r\n        \t\r\n        \tthis.getDocTermStore().load({params: {\r\n\t\t    \tquery: termsToKeep,\r\n\t\t    \tlimit: limit,\r\n\t\t    \tstopList: this.getApiParams('stopList')\r\n\t\t    }});\r\n        }, this);\r\n        \r\n        this.on('termsClicked', function(src, terms) {\r\n    \t\tvar queryTerms = [];\r\n    \t\tterms.forEach(function(term) {\r\n    \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\r\n    \t\t\telse if (term.term) {queryTerms.push(term.term);}\r\n    \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\r\n    \t\t});\r\n    \t\tif (queryTerms.length > 0) {\r\n    \t\t\tthis.getDocTermsFromQuery(queryTerms);\r\n    \t\t}\r\n\t\t}, this);\r\n        \r\n\t\tthis.on('corpusTermsClicked', function(src, terms) {\r\n\t\t\tvar queryTerms = [];\r\n    \t\tterms.forEach(function(term) {\r\n    \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\r\n    \t\t});\r\n    \t\tthis.getDocTermsFromQuery(queryTerms);\r\n\t\t}, this);\r\n\t\t\r\n\t\tthis.on('documentTermsClicked', function(src, terms) {\r\n\t\t\tvar queryTerms = [];\r\n    \t\tterms.forEach(function(term) {\r\n    \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\r\n    \t\t});\r\n    \t\tthis.getDocTermsFromQuery(queryTerms);\r\n\t\t}, this);\r\n    },\r\n    \r\n    initComponent: function() {\r\n    \tthis.setTermStore(Ext.create('Ext.data.ArrayStore', {\r\n\t        fields: ['term', 'color']\r\n\t    }));\r\n    \t\r\n    \tthis.setDocTermStore(Ext.create(\"Ext.data.Store\", {\r\n\t\t\tmodel: \"Voyant.data.model.DocumentTerm\",\r\n    \t\tautoLoad: false,\r\n    \t\tremoteSort: false,\r\n    \t\tproxy: {\r\n\t\t\t\ttype: 'ajax',\r\n\t\t\t\turl: Voyant.application.getTromboneUrl(),\r\n\t\t\t\textraParams: {\r\n\t\t\t\t\ttool: 'corpus.DocumentTerms',\r\n\t\t\t\t\twithDistributions: 'raw',\r\n\t\t\t\t\twithPositions: true\r\n\t\t\t\t},\r\n\t\t\t\treader: {\r\n\t\t\t\t\ttype: 'json',\r\n\t\t            rootProperty: 'documentTerms.terms',\r\n\t\t            totalProperty: 'documentTerms.total'\r\n\t\t\t\t},\r\n\t\t\t\tsimpleSortMode: true\r\n   \t\t     },\r\n   \t\t     listeners: {\r\n   \t\t    \t beforeload: function(store) {\r\n   \t\t    \t\t store.getProxy().setExtraParam('docId', this.getApiParam('docId'));\r\n   \t\t    \t },\r\n   \t\t    \t load: function(store, records, successful, options) {\r\n   \t\t    \t\tvar termObj = {};\r\n   \t\t    \t\tif (records && records.length>0) {\r\n   \t   \t\t    \t\trecords.forEach(function(record) {\r\n   \t   \t\t    \t\t\tvar termData = this.processTerms(record);\r\n   \t   \t\t    \t\t\tvar docId = record.get('docId');\r\n   \t   \t\t    \t\t\tvar term = record.get('term');\r\n   \t   \t\t    \t\t\ttermObj[term] = termData;\r\n   \t   \t\t    \t\t}, this);\r\n   \t   \t\t    \t\tthis.getKnots().addTerms(termObj);\r\n   \t   \t\t    \t\tthis.getKnots().buildGraph();\r\n   \t\t    \t\t}\r\n   \t\t    \t\telse {\r\n   \t\t    \t\t\tthis.toastInfo({\r\n   \t\t    \t\t\t\thtml: this.localize(\"noTermsFound\"),\r\n   \t\t    \t\t\t\talign: 'bl'\r\n   \t\t    \t\t\t})\r\n   \t\t    \t\t}\r\n   \t\t\t\t},\r\n   \t\t\t\tscope: this\r\n   \t\t     }\r\n    \t}));\r\n    \t\r\n    \tthis.setTokensStore(Ext.create(\"Voyant.data.store.Tokens\", {\r\n        \tstripTags: \"all\",\r\n        \tlisteners: {\r\n        \t\tbeforeload: function(store) {\r\n  \t\t    \t\t store.getProxy().setExtraParam('docId', this.getApiParam('docId'));\r\n  \t\t    \t},\r\n        \t\tload: function(store, records, successful, options) {\r\n        \t\t\tvar context = '';\r\n        \t\t\tvar currTerm = this.getCurrentTerm();\r\n        \t\t\trecords.forEach(function(record) {\r\n        \t\t\t\tif (record.getPosition() == currTerm.tokenId) {\r\n        \t\t\t\t\tcontext += '<strong>'+record.getTerm()+'</strong>';\r\n        \t\t\t\t} else {\r\n        \t\t\t\t\tcontext += record.getTerm();\r\n        \t\t\t\t}\r\n        \t\t\t});\r\n        \t\t\t\r\n        \t\t\tExt.Msg.show({\r\n        \t\t\t\ttitle: this.localize('context'),\r\n        \t\t\t\tmessage: context,\r\n        \t\t\t\tbuttons: Ext.Msg.OK,\r\n        \t\t\t    icon: Ext.Msg.INFO\r\n        \t\t\t});\r\n        \t\t},\r\n   \t\t\t\tscope: this\r\n        \t}\r\n        }));\r\n    \t\r\n    \tExt.apply(this, {\r\n    \t\ttitle: this.localize('title'),\r\n    \t\tdockedItems: [{\r\n                dock: 'bottom',\r\n                xtype: 'toolbar',\r\n                overflowHandler: 'scroller',\r\n                items: [{\r\n                \txtype: 'querysearchfield'\r\n                },{\r\n\t            \ttext: this.localize('clearTerms'),\r\n\t            \tglyph: 'xf00d@FontAwesome',\r\n\t            \thandler: function() {\r\n\t            \t\tthis.down('#termsView').getSelectionModel().deselectAll(true);\r\n\t            \t\tthis.getTermStore().removeAll();\r\n\t            \t\tthis.setApiParams({query: null});\r\n\t            \t\tthis.getKnots().removeAllTerms();\r\n\t            \t\tthis.getKnots().drawGraph();\r\n\t            \t},\r\n\t            \tscope: this\r\n\t            },{\r\n\t            \txtype: 'documentselectorbutton',\r\n\t            \tsingleSelect: true\r\n\t            },{\r\n\t\t\t\t\txtype: 'slider',\r\n\t\t\t\t\titemId: 'speed',\r\n\t\t\t\t\tfieldLabel: this.localize(\"speed\"),\r\n\t\t\t\t\tlabelAlign: 'right',\r\n\t\t\t\t\tlabelWidth: 50,\r\n\t\t\t\t\twidth: 100,\r\n\t\t\t\t\tincrement: 50,\r\n\t\t\t\t\tminValue: 0,\r\n\t\t\t\t\tmaxValue: 500,\r\n\t\t\t\t\tvalue: 500-this.getRefreshInterval(),\r\n\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\tchangecomplete: function(slider, newvalue) {\r\n\t\t\t\t\t\t\tthis.setRefreshInterval(500-newvalue);\r\n\t\t\t\t\t\t\tif (this.getKnots()) {this.getKnots().buildGraph();}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t}\r\n\t\t\t\t},{\r\n\t\t\t\t\txtype: 'slider',\r\n\t\t\t\t\titemId: 'startAngle',\r\n\t\t\t\t\tfieldLabel: this.localize('startAngle'),\r\n\t\t\t\t\tlabelAlign: 'right',\r\n\t\t\t\t\tlabelWidth: 35,\r\n\t\t\t\t\twidth: 85,\r\n\t\t\t\t\tincrement: 15,\r\n\t\t\t\t\tminValue: 0,\r\n\t\t\t\t\tmaxValue: 360,\r\n\t\t\t\t\tvalue: this.getStartAngle(),\r\n\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\tchangecomplete: function(slider, newvalue) {\r\n\t\t\t\t\t\t\tthis.setStartAngle(newvalue);\r\n\t\t\t\t\t\t\tif (this.getKnots()) {this.getKnots().buildGraph();}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t}\r\n\t\t\t\t},{\r\n\t\t\t\t\txtype: 'slider',\r\n\t\t\t\t\titemId: 'tangles',\r\n\t\t\t\t\tfieldLabel: this.localize('tangles'),\r\n\t\t\t\t\tlabelAlign: 'right',\r\n\t\t\t\t\tlabelWidth: 30,\r\n\t\t\t\t\twidth: 80,\r\n\t\t\t\t\tincrement: 5,\r\n\t\t\t\t\tminValue: 5,\r\n\t\t\t\t\tmaxValue: 90,\r\n\t\t\t\t\tvalue: this.getAngleIncrement(),\r\n\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\tchangecomplete: function(slider, newvalue) {\r\n\t\t\t\t\t\t\tthis.setAngleIncrement(newvalue);\r\n\t\t\t\t\t\t\tif (this.getKnots()) {this.getKnots().buildGraph();}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t}\r\n\t\t\t\t},{\r\n\t                xtype: 'checkbox',\r\n\t                boxLabel: this.localize('sound'),\r\n\t                listeners: {\r\n\t                \trender: function(cmp) {\r\n\t                \t\tcmp.setValue(this.getApiParam(\"audio\")===true ||  this.getApiParam(\"audio\")==\"true\")\r\n\t    \t\t        \tExt.tip.QuickTipManager.register({\r\n\t    \t\t        \t\ttarget: cmp.getEl(),\r\n\t   \t\t                 \ttext: this.localize('soundTip')\r\n\t    \t\t        \t});\r\n\t                \t\t\r\n\t                \t},\r\n\t                \tbeforedestroy: function(cmp) {\r\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\r\n\t                \t},\r\n\t                    change: function(cmp, val) {\r\n\t                    \tif (this.getKnots()) {\r\n\t\t                    \tthis.getKnots().setAudio(val);\r\n\t                    \t}\r\n\t                    },\r\n\t                    scope: this\r\n\t                }\r\n\t            }]\r\n    \t\t}],\r\n            border: false,\r\n            layout: 'fit',\r\n            items: {\r\n            \tlayout: {\r\n            \t\ttype: 'vbox',\r\n            \t\talign: 'stretch'\r\n            \t},\r\n            \tdefaults: {border: false},\r\n\t            items: [{\r\n\t            \theight: 30,\r\n\t            \titemId: 'termsView',\r\n\t            \txtype: 'dataview',\r\n\t            \tstore: this.getTermStore(),\r\n\t            \ttpl: this.termTpl,\r\n\t            \titemSelector: 'div.term',\r\n\t            \toverItemCls: 'over',\r\n\t            \tselectedItemCls: 'selected',\r\n\t            \tselectionModel: {\r\n\t            \t\tmode: 'SIMPLE'\r\n\t            \t},\r\n//\t            \tcls: 'selected', // default selected\r\n\t            \tfocusCls: '',\r\n\t            \tlisteners: {\r\n\t            \t\tbeforeitemclick: function(dv, record, item, index, event, opts) {\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\tdv.fireEvent('itemcontextmenu', dv, record, item, index, event, opts);\r\n\t            \t\t\treturn false;\r\n\t            \t\t},\r\n\t            \t\tbeforecontainerclick: function() {\r\n\t            \t\t\t// cancel deselect all\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\treturn false;\r\n\t            \t\t},\r\n\t            \t\tselectionchange: function(selModel, selections) {\r\n\t            \t\t\tvar dv = this.down('#termsView');\r\n\t            \t\t\tvar terms = [];\r\n\t            \t\t\t\r\n\t            \t\t\tdv.getStore().each(function(r) {\r\n\t            \t\t\t\tif (selections.indexOf(r) !== -1) {\r\n\t            \t\t\t\t\tterms.push(r.get('term'));\r\n\t            \t\t\t\t\tExt.fly(dv.getNodeByRecord(r)).removeCls('unselected').addCls('selected');\r\n\t            \t\t\t\t} else {\r\n\t            \t\t\t\t\tExt.fly(dv.getNodeByRecord(r)).removeCls('selected').addCls('unselected');\r\n\t            \t\t\t\t}\r\n\t            \t\t\t});\r\n\t            \t\t\t\r\n\t            \t\t\tthis.getKnots().termsFilter = terms;\r\n\t            \t\t\tthis.getKnots().drawGraph();\r\n\t            \t\t},\r\n\t            \t\titemcontextmenu: function(dv, record, el, index, event) {\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\tvar isSelected = dv.isSelected(el);\r\n\t            \t\t\tvar menu = new Ext.menu.Menu({\r\n\t            \t\t\t\tfloating: true,\r\n\t            \t\t\t\titems: [{\r\n\t            \t\t\t\t\ttext: isSelected ? this.localize('hideTerm') : this.localize('showTerm'),\r\n\t            \t\t\t\t\thandler: function() {\r\n\t            \t\t\t\t\t\tif (isSelected) {\r\n\t            \t\t\t\t\t\t\tdv.deselect(index);\r\n\t            \t\t\t\t\t\t} else {\r\n\t            \t\t\t\t\t\t\tdv.select(index, true);\r\n\t            \t\t\t\t\t\t}\r\n\t            \t\t\t\t\t},\r\n\t            \t\t\t\t\tscope: this\r\n\t            \t\t\t\t},{\r\n\t            \t\t\t\t\ttext: this.localize('removeTerm'),\r\n\t            \t\t\t\t\thandler: function() {\r\n\t            \t\t\t\t\t\tdv.deselect(index);\r\n\t            \t\t\t\t\t\tvar term = this.getTermStore().getAt(index).get('term');\r\n\t            \t\t\t\t\t\tthis.getTermStore().removeAt(index);\r\n\t            \t\t\t\t\t\tdv.refresh();\r\n\t            \t\t\t\t\t\t\r\n\t            \t\t\t\t\t\tthis.getKnots().removeTerm(term);\r\n\t            \t\t\t\t\t\tthis.getKnots().drawGraph();\r\n\t            \t\t\t\t\t},\r\n\t            \t\t\t\t\tscope: this\r\n\t            \t\t\t\t}]\r\n\t            \t\t\t});\r\n\t            \t\t\tmenu.showAt(event.getXY());\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n\t            },{\r\n\t            \tflex: 1,\r\n\t            \txtype: 'container',\r\n\t            \tautoEl: 'div',\r\n\t            \titemId: 'canvasParent',\r\n\t            \tlayout: 'fit',\r\n\t            \toverflowY: 'auto',\r\n\t            \toverflowX: 'hidden'\r\n\t            }],\r\n\t            listeners: {\r\n\t            \trender: function(component) {\r\n\t            \t\tvar canvasParent = this.down('#canvasParent');\r\n\t                \tthis.setKnots(new Knots({\r\n\t                \t\tcontainer: canvasParent,\r\n\t                \t\tclickHandler: this.knotClickHandler.bind(this),\r\n\t                \t\taudio: this.getApiParam(\"audio\")===true ||  this.getApiParam(\"audio\")==\"true\"\r\n\t                \t}));\r\n\t            \t},\r\n            \t\tafterlayout: function(container) {\r\n            \t\t\tif (this.getKnots().initialized === false) {\r\n            \t\t\t\tthis.getKnots().initializeCanvas();\r\n            \t\t\t}\r\n            \t\t},\r\n\t        \t\tresize: function(cnt, width, height) {\r\n\t        \t\t\tthis.getKnots().doLayout();\r\n\t        \t\t},\r\n            \t\tscope: this\r\n            \t}\r\n            }\r\n\t\t});\r\n    \t\r\n    \tthis.callParent(arguments);\r\n    },\r\n    \r\n    updateRefreshInterval: function(value) {\r\n    \tif (this.getKnots()) {\r\n    \t\tif (value < 50) {\r\n    \t\t\tvalue = 50;\r\n    \t\t\tthis.getKnots().progressiveDraw = false;\r\n    \t\t} else {\r\n    \t\t\tthis.getKnots().progressiveDraw = true;\r\n    \t\t}\r\n    \t\tthis.getKnots().refreshInterval = value;\r\n\t\t\tthis.getKnots().buildGraph(this.getKnots().drawStep);\r\n    \t}\r\n    },\r\n    \r\n    updateStartAngle: function(value) {\r\n    \tif (this.getKnots()) {\r\n\t\t\tthis.getKnots().startAngle = value;\r\n\t\t\tthis.getKnots().recache();\r\n\t\t\tthis.getKnots().buildGraph();\r\n    \t}\r\n    },\r\n    \r\n    updateAngleIncrement: function(value) {\r\n    \tif (this.getKnots()) {\r\n\t    \tthis.getKnots().angleIncrement = value;\r\n\t\t\tthis.getKnots().recache();\r\n\t\t\tthis.getKnots().buildGraph();\r\n    \t}\r\n    },\r\n    \r\n    loadFromCorpusTerms: function(corpusTerms) {\r\n    \tif (this.getKnots()) { // get rid of existing terms\r\n    \t\tthis.getKnots().removeAllTerms();\r\n    \t\tthis.getTermStore().removeAll(true);\r\n    \t}\r\n\t\tcorpusTerms.load({\r\n\t\t    callback: function(records, operation, success) {\r\n\t\t    \tvar query = []; //this.getApiParam('query') || [];\r\n\t\t\t\tif (typeof query == 'string') query = [query];\r\n\t\t    \trecords.forEach(function(record, index) {\r\n\t\t\t\t\tquery.push(record.get('term'));\r\n\t\t\t\t}, this);\r\n\t\t    \tthis.getDocTermsFromQuery(query);\r\n\t\t    },\r\n\t\t    scope: this,\r\n\t\t    params: {\r\n\t\t    \tlimit: 5,\r\n\t\t    \tstopList: this.getApiParams('stopList')\r\n\t\t    }\r\n    \t});\r\n    },\r\n    \r\n    /**\r\n     * Get the results for the query(s) for each of the corpus documents.\r\n     * @param query {String|Array}\r\n     * @private\r\n     */\r\n    getDocTermsFromQuery: function(query) {\r\n    \tif (query) {this.setApiParam(\"query\", query);} // make sure it's set for subsequent calls\r\n    \tvar corpus = this.getCorpus();\r\n    \tif (corpus && this.isVisible()) {\r\n    \t\tthis.setApiParams({query: query}); // assumes docId already set\r\n\t\t\tthis.getDocTermStore().load({params: this.getApiParams()});\r\n    \t}\r\n\t},\r\n\t\r\n    filterDocuments: function() {\r\n\t\tvar docIds = this.getApiParam('docId');\r\n\t\tif (docIds == '') {\r\n\t\t\tdocIds = [];\r\n\t\t\tthis.getCorpus().getDocuments().each(function(item, index) {\r\n\t\t\t\tdocIds.push(item.getId());\r\n\t\t\t});\r\n\t\t\tthis.setApiParams({docId: docIds});\r\n\t\t}\r\n\t\tif (typeof docIds == 'string') docIds = [docIds];\r\n\t\t\r\n\t\tif (docIds == null) {\r\n\t\t\tthis.selectedDocs = this.getCorpus().getDocuments().clone();\r\n\t\t\tvar count = this.selectedDocs.getCount();\r\n\t\t\tif (count > 10) {\r\n\t\t\t\tfor (var i = 10; i < count; i++) {\r\n\t\t\t\t\tthis.selectedDocs.removeAt(10);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdocIds = [];\r\n\t\t\tthis.selectedDocs.eachKey(function(docId, doc) {\r\n\t\t\t\tdocIds.push(docId);\r\n\t\t\t}, this);\r\n\t\t\tthis.setApiParams({docId: docIds});\r\n\t\t} else {\r\n\t\t\tthis.selectedDocs = this.getCorpus().getDocuments().filterBy(function(doc, docId) {\r\n\t\t\t\treturn docIds.indexOf(docId) != -1;\r\n\t\t\t}, this);\r\n\t\t}\r\n\t},\r\n\t\r\n\t// produce format that knots can use\r\n\tprocessDocument: function(doc) {\r\n\t\tvar title = doc.getShortTitle();\r\n\t\ttitle = title.replace('&hellip;', '...');\r\n\t\r\n\t\treturn {\r\n\t\t\tid: doc.getId(),\r\n\t\t\tindex: doc.get('index'),\r\n\t\t\ttitle: title,\r\n\t\t\ttotalTokens: doc.get('tokensCount-lexical'),\r\n\t\t\tterms: {},\r\n\t\t\tlineLength: undefined\r\n\t\t};\r\n\t},\r\n\t\r\n\tprocessTerms: function(termRecord) {\r\n\t\tvar termObj;\r\n\t\tvar term = termRecord.get('term');\r\n\t\tvar rawFreq = termRecord.get('rawFreq');\r\n\t\tvar positions = termRecord.get('positions');\r\n\t\tif (rawFreq > 0) {\r\n\t\t\tvar color = this.getApplication().getColorForTerm(term);\r\n\t\t\tif (this.getTermStore().find('term', term) === -1) {\r\n\t\t\t\tthis.getTermStore().loadData([[term, color]], true);\r\n\t\t\t\tvar index = this.getTermStore().find('term', term);\r\n\t\t\t\tthis.down('#termsView').select(index, true); // manually select since the store's load listener isn't triggered\r\n\t\t\t}\r\n\t\t\tvar distributions = termRecord.get('distributions');\r\n\t\t\ttermObj = {term: term, positions: positions, distributions: distributions, rawFreq: rawFreq, color: color};\r\n\t\t} else {\r\n\t\t\ttermObj = false;\r\n\t\t}\r\n\t\t\r\n\t\treturn termObj;\r\n\t},\r\n\t\r\n\tknotClickHandler: function(data) {\r\n\t\tthis.setCurrentTerm(data);\r\n\t\tvar start = data.tokenId - 10;\r\n\t\tif (start < 0) start = 0;\r\n\t\tthis.getTokensStore().load({\r\n\t\t\tstart: start,\r\n\t\t\tlimit: 21\r\n\t\t});\r\n\t\t\r\n\t\tdata = [data].map(function(item) {return item.term}); // make an array for the event dispatch\r\n\t\tthis.getApplication().dispatchEvent('termsClicked', this, data);\r\n\t}\r\n});","/**\n * The Phrases tool shows repeating sequences of words organized by frequency of repetition or number of words in each repeated phrase.\n * You can work with phrases programmatically using {@link Spyral.Corpus#phrases}.\n *\n * @example\n *\n * let config = {\n * \t\"columns\": null,\n * \t\"dir\": null,\n * \t\"docId\": null,\n * \t\"docIndex\": null,\n * \t\"maxLength\": null,\n * \t\"minLength\": null,\n * \t\"overlapFilter\": null,\n * \t\"query\": null,\n * \t\"sort\": null\n * };\n *\n * loadCorpus(\"austen\").tool(\"phrases\", config);\n *\n * @class Phrases\n * @tutorial phrases\n * @memberof Tools\n */\nExt.define('Voyant.panel.Phrases', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.phrases',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.Phrases\n\t\t\t * @instance\n\t\t\t * @property {query}\n\t\t\t */\n    \t\tquery: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Phrases\n\t\t\t * @instance\n\t\t\t * @property {docId}\n\t\t\t */\n    \t\tdocId: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Phrases\n\t\t\t * @instance\n\t\t\t * @property {docIndex}\n\t\t\t */\n    \t\tdocIndex: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Phrases\n\t\t\t * @instance\n\t\t\t * @property {Number} minLength The minimum length (number of words) of the phrase to consider.\n\t\t\t * @default\n\t\t\t */\n    \t\tminLength: 2,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Phrases\n\t\t\t * @instance\n\t\t\t * @property {Number} maxLength The maximum length (number of words) of the phrase to consider.\n\t\t\t * @default\n\t\t\t */\n    \t\tmaxLength: 50,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Phrases\n\t\t\t * @instance\n\t\t\t * @property {String} overlapFilter Specifies the strategory for prioritizing and filtering out phrases. Options are: 'none' (no filtering), 'length' (prioritize phrase length), or 'rawFreq' (prioritize phrase frequency). See [Phrases options](tutorial-phrases.html#options) for more info.\n\t\t\t * @default\n\t\t\t */\n    \t\toverlapFilter: 'length',\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Phrases\n\t\t\t * @instance\n\t\t\t * @property {columns} columns 'term', 'rawFreq', 'length', 'distributions'\n\t\t\t */\n\t\t\tcolumns: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Phrases\n\t\t\t * @instance\n\t\t\t * @property {sort}\n\t\t\t * @default\n\t\t\t */\n\t\t\tsort: 'length',\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Phrases\n\t\t\t * @instance\n\t\t\t * @property {dir}\n\t\t\t * @default\n\t\t\t */\n\t\t\tdir: 'desc'\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \t/**\n    \t * @private\n    \t */\n    \toptions: [{xtype: 'categoriesoption'}],\n    },\n    constructor: function(config) {\n    \t\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tif (this.isVisible()) {\n            \tif (this.hasCorpusAccess(corpus)==false) {\n            \t\tthis.mask(this.localize('limitedAccess'), 'mask-no-spinner');\n            \t} else {\n        \t\t\tthis.loadFromApis();\n            \t}\n    \t\t}\n    \t\t\n    \t});\n    \t\n    \tif (config.embedded) {\n//    \t\tvar cls = Ext.getClass(config.embedded).getName();\n//    \t\tif (cls==\"Voyant.data.store.DocumentTerms\" || cls==\"Voyant.data.model.Document\") {\n//    \t\t\tthis.fireEvent('loadedCorpus', this, config.embedded.getCorpus())\n//    \t\t}\n    \t}\n    \telse if (config.corpus) {\n    \t\tthis.fireEvent('loadedCorpus', this, config.corpus)\n    \t}\n    \t\n    \tthis.on(\"corpusTermsClicked\", function(src, terms) {\n    \t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n        \t\tvar query = [];\n        \t\tterms.forEach(function(term) {\n        \t\t\tquery.push(term.get(\"term\"));\n        \t\t})\n        \t\tthis.setApiParams({\n        \t\t\tquery: query,\n        \t\t\tdocId: undefined,\n        \t\t\tdocIndex: undefined\n        \t\t});\n        \t\tif (this.isVisible()) {\n            \t\tthis.getStore().load({params: this.getApiParams()});\n        \t\t}\n    \t\t}\n    \t});\n    \t\n    \tthis.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (this.getStore().getCorpus()) {this.loadFromApis()}\n    \t}, this)\n    \t\n    \tthis.on(\"query\", function(src, query) {\n    \t\tthis.setApiParam(\"query\", query);\n    \t\tthis.getStore().getProxy().setExtraParam(\"query\", query);\n    \t\tthis.loadFromApis();\n    \t}, this)\n    },\n    \n    loadFromApis: function() {\n    \tif (this.getStore().getCorpus()) {\n\t\t\tthis.getStore().load({params: this.getApiParams()});\n    \t}\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        var store = Ext.create(\"Voyant.data.store.CorpusNgramsBuffered\", {\n        \tparentPanel: me,\n\t\t\tleadingBufferZone: 100 // since these calls are expensive reduce buffer to 1 page\n        });\n        \n        store.on(\"beforeload\", function(store) {\n    \t\treturn me.hasCorpusAccess(store.getCorpus());\n        });\n        me.on(\"sortchange\", function( ct, column, direction, eOpts ) {\n        \tthis.setApiParam('sort', column.dataIndex);\n        \tthis.setApiParam('dir', direction);\n        \tvar api = this.getApiParams([\"query\", \"docId\", \"docIndex\", \"sort\", \"dir\", \"minLength\", \"maxLength\", \"overlapFilter\"]);\n        \tvar proxy = this.getStore().getProxy();\n        \tfor (var key in api) {proxy.setExtraParam(key, api[key]);}\n        }, me)\n\n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n            store : store,\n    \t\tselModel: Ext.create('Ext.selection.CheckboxModel', {\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n\t\t\t\t\t\t\tif (selections.length > 0) {\n\t\t\t\t\t\t\t\tvar terms = [];\n\t\t\t\t\t\t\t\tselections.forEach(function(selection) {\n\t\t\t\t\t\t\t\t\tterms.push('\"'+selection.getTerm()+'\"')\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tthis.getApplication().dispatchEvent('termsClicked', this, terms);\n\t\t\t\t\t\t\t}\n                    \t},\n                    \tscope: this\n                    }\n                }\n            }),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                }, {\n                    xtype: 'totalpropertystatus'\n                }, '-', {\n                \ttext: me.localize('length'),\n                \ttooltip: 'test',\n                \txtype: 'label'\n                }, {\n                \txtype: 'slider',\n                \tminValue: 2,\n                \tvalues: [2, 50],\n                \tmaxValue: 50,\n                \tincrement: 1,\n                \twidth: 75,\n                \ttooltip: this.localize(\"lengthTip\"),\n                \tlisteners: {\n                \t\trender: {\n                \t\t\tfn: function(slider) {\n                \t\t\t\tvar values = slider.getValues();\n                \t\t\t\tslider.setValue(0, parseInt(this.getApiParam(\"minLength\", values[0])))\n                \t\t\t\tslider.setValue(1, parseInt(this.getApiParam(\"maxLength\", values[1])))\n\t                \t\t},\n\t                \t\tscope: me\n                \t\t},\n                \t\tchangecomplete: {\n                \t\t\tfn: function(slider, newValue) {\n                \t\t\t\tvar values = slider.getValues();\n                \t\t\t\tthis.setApiParam(\"minLength\", parseInt(values[0]));\n                \t\t\t\tthis.setApiParam(\"maxLength\", parseInt(values[1]));\n                        \t\tthis.getStore().load({params: this.getApiParams()});\n                    \t\t},\n                    \t\tscope: me\n                \t\t}\n                \t}\n                }, {\n        \t\t\txtype: 'corpusdocumentselector'\n        \t\t}, '-', {\n                    xtype: 'button',\n                    text: this.localize('overlap'),\n                    tooltip: this.localize('overlapTip'),\n                    menu: {\n                    \titems: [\n                           {\n                        \t   xtype: 'menucheckitem',\n                               text: this.localize(\"overlapNone\"),\n                               group: 'overlap',\n                               inputValue: 'none',\n                               checkHandler: function() {\n                            \t   this.setApiParam('overlapFilter', 'none')\n                            \t   this.getStore().load({params: this.getApiParams()})\n                               },\n                               scope: this\n                           }, {\n                        \t   xtype: 'menucheckitem',\n                               text: this.localize(\"overlapLength\"),\n                               group: 'overlap',\n                               inputValue: 'length',\n                               checkHandler: function() {\n                            \t   this.setApiParam('overlapFilter', 'length')\n                            \t   this.getStore().load({params: this.getApiParams()})\n                               },\n                               scope: this\n                           }, {\n                        \t   xtype: 'menucheckitem',\n                               text: this.localize(\"overlapFreq\"),\n                               group: 'overlap',\n                               inputValue: 'rawFreq',\n                               checkHandler: function() {\n                            \t   this.setApiParam('overlapFilter', 'rawFreq')\n                            \t   this.getStore().load({params: this.getApiParams()})\n                               },\n                               scope: this\n                           }\n\t                   ],\n\t                   listeners: {\n\t                \t   afterrender: {\n\t                \t\t   fn: function(menu) {\n\t                \t\t\t   var overlapFilter = this.getApiParam('overlapFilter');\n\t                \t\t\t   menu.items.each(function(item) {\n\t                \t\t\t\t   if (item.group) {\n\t                \t\t\t\t\t   item.setChecked(item.inputValue==overlapFilter);\n\t                \t\t\t\t   }\n\t                \t\t\t   }, this)\n\t                \t\t   },\n\t                \t\t   scope: this\n\t                \t   }\n                \n\t                   }\n                    }\n                }]\n            }],\n    \t\tcolumns: [{\n    \t\t\ttext: this.localize(\"term\"),\n        \t\tdataIndex: 'term',\n            \ttooltip: this.localize(\"termTip\"),\n                sortable: true,\n                flex: 1\n            },{\n    \t\t\ttext: this.localize(\"rawFreq\"),\n        \t\tdataIndex: 'rawFreq',\n            \ttooltip: this.localize(\"termRawFreqTip\"),\n                sortable: true,\n                width: 'autoSize'\n            },{\n            \ttext: this.localize(\"length\"),\n            \tdataIndex: 'length',\n            \ttooltip: this.localize(\"lengthTip\"),\n            \tsortable: true,\n                width: 'autoSize'\n            },{\n                xtype: 'widgetcolumn',\n                text: this.localize(\"trend\"),\n                tooltip: this.localize('trendTip'),\n                width: 120,\n                dataIndex: 'distributions',\n                widget: {\n                    xtype: 'sparklineline'\n                }\n            }],\n            \n            listeners: {\n\t\t\t\tcorpusSelected: function() {\n\t\t\t\t\tthis.setApiParams({docIndex: undefined, docId: undefined});\n\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t},\n\t\t\t\tdocumentsSelected: function(src, docs) {\n\t\t\t\t\tvar docIds = [];\n\t\t\t\t\tvar corpus = this.getStore().getCorpus();\n\t\t\t\t\tdocs.forEach(function(doc) {\n\t\t\t\t\t\tdocIds.push(corpus.getDocument(doc).getId())\n\t\t\t\t\t}, this);\n\t\t\t\t\tthis.setApiParams({docId: docIds, docIndex: undefined})\n\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t},\n            \ttermsClicked: {\n            \t\tfn: function(src, terms) {\n                \t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n                    \t\tvar queryTerms = [];\n                    \t\tterms.forEach(function(term) {\n                    \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n                    \t\t\telse if (term.term) {queryTerms.push(term.term);}\n                    \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n                    \t\t});\n                    \t\tif (queryTerms.length > 0) {\n                    \t\t\tthis.setApiParams({\n                    \t\t\t\tdocIndex: undefined,\n                    \t\t\t\tdocId: undefined,\n                    \t\t\t\tquery: queryTerms\n                    \t\t\t});\n                        \t\tif (this.isVisible()) {\n                            \t\tif (this.isVisible()) {\n                                \t\tthis.getStore().clearAndLoad({params: this.getApiParams()});\n                            \t\t}\n                        \t\t}\n                    \t\t}\n                \t\t}\n                \t},\n                \tscope: this\n            \t}\n            }\n        });\n\n        me.callParent(arguments);\n        \n        me.getStore().getProxy().setExtraParam(\"withDistributions\", true);\n        \n    }\n    \n})","/**\n * Corpus Terms tool, a grid that shows the terms in the corpus.\n * You can work with corpus terms programmatically using {@link Spyral.Corpus#terms}.\n *\n * @example\n *\n * let config = {\n * \tcolumns: null,\n * \tcomparisonCorpus: null,\n * \tdir: null,\n * \tmaxBins: null,\n * \tquery: null,\n * \tsort: null,\n * \tstopList: null,\n * \ttermColors: null\n * };\n *\n * loadCorpus(\"austen\").tool(\"corpusterms\", config);\n *\n *\n * @class CorpusTerms\n * @tutorial corpusterms\n * @memberof Tools\n */\nExt.define('Voyant.panel.CorpusTerms', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.corpusterms',\n    statics: {\n    \ti18n: {\n\t\t\tcomparisonCorpus: 'Comparison Corpus'\n    \t},\n    \tapi: {\n    \t\t\n    \t\t/**\n\t\t\t * @memberof Tools.CorpusTerms\n    \t\t * @instance\n    \t\t * @property {stopList}\n\t\t\t * @default\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\t/**\n    \t\t * @memberof Tools.CorpusTerms\n\t\t\t * @instance\n\t\t\t * @property {query}\n    \t\t */\n    \t\tquery: undefined,\n    \t\t\n    \t\t/**\n\t\t\t * @memberof Tools.CorpusTerms\n    \t\t * @instance\n    \t\t * @property {Number} maxBins The maximum number of bins to use for distributions in Trend.\n    \t\t * \n    \t\t * By default this is set to 100 (in other words, if there are more than 100 documents in the corpus, they will be forced into 100 bins).\n    \t\t * Higher values are possible but it can cause performance issues and necessitate more data transfer (values for each one of the bins for each one of the terms).\n\t\t\t * @default\n    \t\t */\n    \t\tmaxBins: 100,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.CorpusTerms\n\t\t\t * @instance\n\t\t\t * @property {termColors}\n\t\t\t * @default\n\t\t\t */\n\t\t\ttermColors: 'categories',\n\n    \t\t/**\n\t\t\t * @memberof Tools.CorpusTerms\n    \t\t * @instance\n    \t\t * @property {String} comparisonCorpus An existing corpus to be used for comparison purposes.\n    \t\t * \n    \t\t * None of the columns visible by default use comparisonCorpus so this is an advanced parameter used when the \"Comparison\" column is shown.\n    \t\t * The comparison column shows the relative frequency of the term in the corpus compared to the relative frequency of the same term in a comparison corpus.\n    \t\t */\n    \t\tcomparisonCorpus: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.CorpusTerms\n\t\t\t * @instance\n\t\t\t * @property {columns} columns 'term', 'rawFreq', 'relativeFreq', 'relativePeakedness', 'relativeSkewness', 'comparisonRelativeFreqDifference', 'distributions'\n\t\t\t */\n\t\t\tcolumns: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.CorpusTerms\n\t\t\t * @instance\n\t\t\t * @property {sort}\n\t\t\t */\n\t\t\tsort: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.CorpusTerms\n\t\t\t * @instance\n\t\t\t * @property {dir}\n\t\t\t */\n\t\t\tdir: undefined,\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \t/**\n    \t * @private\n    \t */\n    \toptions: [{\n    \t\txtype: 'stoplistoption'\n    \t},{\n\t\t\txtype: 'categoriesoption'\n\t\t},{\n\t\t\txtype: 'termcolorsoption'\n\t\t},{\n    \t\txtype: 'corpusselector',\n    \t\tname: 'comparisonCorpus'\n    \t}]\n    },\n\n\t/**\n\t * @private\n\t */\n    constructor: function(config) {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n        this.callParent(arguments);\n\t\tthis.getOptions().filter(function(option) { return option.xtype === 'corpusselector'})[0].fieldLabel = this.localize('comparisonCorpus');\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    \n    initComponent: function() {\n        var me = this;\n\n        var store = Ext.create(\"Voyant.data.store.CorpusTermsBuffered\", {\n        \tparentPanel: this,\n        \tproxy: {\n        \t\textraParams: {\n        \t\t\twithDistributions: 'relative',\n        \t\t\tforTool: 'corpusterms'\n        \t\t}\n        \t}\n        });\n        \n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n            store : store,\n    \t\tselModel: Ext.create('Ext.selection.CheckboxModel', {\n                pruneRemoved: false,\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n                    \t\tif (selections && selections.length>0) {\n                        \t\tthis.getApplication().dispatchEvent('corpusTermsClicked', this, selections);\n                    \t\t}\n                    \t},\n                    \tscope: this\n                    }\n                },\n                mode: 'SIMPLE'\n            }),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                }, {\n                    xtype: 'totalpropertystatus'\n                }]\n            }],\n            \n            plugins: [{\n                ptype: 'rowexpander',\n                rowBodyTpl: new Ext.XTemplate('')\n            }],\n            viewConfig: {\n                listeners: {\n                    // TODO widget disappears when scrolled off screen\n                    expandbody: function(rowNode, record, expandRow, eOpts) {\n                        if (expandRow.textContent==='' || (eOpts && eOpts.force)) {\n                            Ext.create('Voyant.widget.CorpusTermSummary', {\n                                record: record,\n                                header: false,\n                                renderTo: expandRow.querySelector('div')\n                            });\n                        }\n                    },\n                    scope: this\n                }\n            },\n    \t\tcolumns: [{\n                xtype: 'rownumberer',\n                width: 'autoSize',\n                sortable: false\n            },{\n    \t\t\ttext: this.localize(\"term\"),\n            \ttooltip: this.localize(\"termTip\"),\n        \t\tdataIndex: 'term',\n        \t\tflex: 1,\n                sortable: true,\n\t\t\t\txtype: 'coloredtermfield',\n\t\t\t\tuseCategoriesMenu: true\n            },{\n            \ttext: this.localize(\"rawFreq\"),\n            \ttooltip: this.localize(\"rawFreqTip\"),\n            \tdataIndex: 'rawFreq',\n                width: 'autoSize',\n            \tsortable: true\n            },{\n            \ttext: this.localize(\"relativeFreq\"),\n            \ttooltip: this.localize(\"relativeFreqTip\"),\n            \tdataIndex: 'relativeFreq',\n            \trenderer: function(val) {\n            \t\treturn Ext.util.Format.number(val*1000000, \"0,000\")\n            \t},\n                width: 'autoSize',\n                hidden: true,\n            \tsortable: true\n            },{\n            \ttext: this.localize(\"relativePeakedness\"),\n            \ttooltip: this.localize(\"relativePeakednessTip\"),\n            \tdataIndex: 'relativePeakedness',\n            \trenderer: Ext.util.Format.numberRenderer(\"0,000.0\"),\n                width: 'autoSize',\n                hidden: true,\n            \tsortable: true\n            },{\n            \ttext: this.localize(\"relativeSkewness\"),\n            \ttooltip: this.localize(\"relativeSkewnessTip\"),\n            \tdataIndex: 'relativeSkewness',\n            \trenderer: Ext.util.Format.numberRenderer(\"0,000.0\"),\n                width: 'autoSize',\n                hidden: true,\n            \tsortable: true\n            },{\n            \ttext: this.localize(\"corpusComparisonDifference\"),\n            \ttooltip: this.localize(\"corpusComparisonDifferenceTip\"),\n            \tdataIndex: 'comparisonRelativeFreqDifference',\n            \trenderer: Ext.util.Format.numberRenderer(\"0,000.00000\"),\n                width: 'autoSize',\n                hidden: !this.getApiParam('comparisonCorpus'),\n            \tsortable: true,\n            \tlisteners: {\n            \t\tshow: function(ct, column, eopts) {\n            \t\t\tif (!me.getApiParam('comparisonCorpus')) {\n            \t\t\t\tme.showError(me.localize('noCorpusComparison'))\n            \t\t\t}\n            \t\t}\n            \t}\n            },{\n                xtype: 'widgetcolumn',\n                text: this.localize(\"trend\"),\n                tooltip: this.localize(\"trendTip\"),\n                flex: 1,\n                dataIndex: 'distributions',\n                widget: {\n                    xtype: 'sparklineline',\n                    tipTpl: new Ext.XTemplate('{[this.getDocumentTitle(values.x,values.y)]}', {\n                    \tgetDocumentTitle: function(docIndex, relativeFreq) {\n                    \t\treturn this.panel.store.getCorpus().getDocument(docIndex).getTitle()+\"<br>\"+this.panel.localize(\"relativeFreqLabel\")+\" \"+Ext.util.Format.number(relativeFreq*1000000, \"0,000\")\n                    \t},\n                    \tpanel: me \n                    })\n                }\n            }]\n        });\n        \n    \tme.on('loadedCorpus', function(src, corpus) {\n    \t\tif (corpus.getDocumentsCount()>100) {\n    \t\t\tthis.getStore().getProxy().setExtraParam('bins', this.getApiParam('maxBins'));\n    \t\t}\n    \t\tif (this.isVisible()) {\n\t\t\t\tif (corpus.getDocumentsCount() === 1) {\n\t\t\t\t\tthis.getColumns().filter(function(col) { return col.dataIndex === 'distributions'})[0].hide();\n\t\t\t\t}\n        \t\tthis.getStore().load();\n    \t\t}\n    \t}, me);\n    \t\n    \tme.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (me.getStore().getCorpus()) {\n\t\t\t\tif (me.getStore().getCorpus().getDocumentsCount() === 1) {\n\t\t\t\t\tthis.getColumns().filter(function(col) { return col.dataIndex === 'distributions'})[0].hide();\n\t\t\t\t}\n    \t\t\tme.getStore().load({params: this.getApiParams()});\n    \t\t}\n    \t}, me);\n\n    \t\n    \tme.on(\"query\", function(src, query) {\n    \t\tthis.setApiParam('query', query);\n    \t\tthis.getStore().removeAll();\n    \t\tthis.getStore().load();\n    \t}, me);\n\n\n        me.callParent(arguments);\n        \n    }\n})\n","/**\n * Document Terms is a table view of term frequencies for each document.\n * You can work with document terms programmatically using {@link Spyral.Corpus#terms}.\n *\n * @example\n *\n * let config = {\n * \t\"bins\": null,\n * \t\"columns\": null,\n * \t\"dir\": null,\n * \t\"docId\": null,\n * \t\"docIndex\": null,\n * \t\"query\": null,\n * \t\"sort\": null,\n * \t\"stopList\": null,\n * \t\"termColors\": null,\n * };\n *\n * loadCorpus(\"austen\").tool(\"documentterms\", config);\n *\n * @class DocumentTerms\n * @tutorial documentterms\n * @memberof Tools\n */\nExt.define('Voyant.panel.DocumentTerms', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\trequires: ['Voyant.data.store.DocumentTerms'],\n\talias: 'widget.documentterms',\n\tconfig: {\n\t\toptions: [{\n    \t\txtype: 'stoplistoption'\n    \t},{\n\t\t\txtype: 'categoriesoption'\n\t\t},{\n\t\t\txtype: 'termcolorsoption'\n\t\t}]\n    },\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.DocumentTerms\n\t\t\t * @instance\n\t\t\t * @property {stopList}\n\t\t\t * @default\n\t\t\t */\n    \t\tstopList: 'auto',\n\t\t\t/**\n\t\t\t * @memberof Tools.DocumentTerms\n\t\t\t * @instance\n\t\t\t * @property {query}\n\t\t\t */\n    \t\tquery: undefined,\n\t\t\t/**\n\t\t\t * @memberof Tools.DocumentTerms\n\t\t\t * @instance\n\t\t\t * @property {docId}\n\t\t\t */\n    \t\tdocId: undefined,\n\t\t\t/**\n\t\t\t * @memberof Tools.DocumentTerms\n\t\t\t * @instance\n\t\t\t * @property {docIndex}\n\t\t\t */\n    \t\tdocIndex: undefined,\n\t\t\t/**\n\t\t\t * @memberof Tools.DocumentTerms\n\t\t\t * @instance\n\t\t\t * @property {bins}\n\t\t\t * @default\n\t\t\t */\n    \t\tbins: 10,\n\t\t\t/**\n\t\t\t * @memberof Tools.DocumentTerms\n\t\t\t * @instance\n\t\t\t * @property {columns} columns 'docIndex', 'term', 'rawFreq', 'relativeFreq', 'tfidf', 'zscore', 'distributions'\n\t\t\t */\n\t\t\tcolumns: undefined,\n\t\t\t/**\n\t\t\t * @memberof Tools.DocumentTerms\n\t\t\t * @instance\n\t\t\t * @property {sort}\n\t\t\t */\n\t\t\tsort: undefined,\n\t\t\t/**\n\t\t\t * @memberof Tools.DocumentTerms\n\t\t\t * @instance\n\t\t\t * @property {dir}\n\t\t\t */\n\t\t\tdir: undefined,\n\t\t\t/**\n\t\t\t * @memberof Tools.DocumentTerms\n\t\t\t * @instance\n\t\t\t * @property {termColors}\n\t\t\t * @default\n\t\t\t */\n\t\t\ttermColors: 'categories'\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    constructor: function(config) {\n    \t\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tvar store = this.getStore();\n    \t\tstore.setCorpus(corpus);\n    \t\tif (this.isVisible()) {\n        \t\tstore.load();\n    \t\t}\n    \t});\n    \t\n    \tif (config.embedded) {\n    \t\tif (window.console) {\n    \t\t\tconsole.warn(config.embedded.then);\n    \t\t}\n    \t\tvar cls = Ext.getClass(config.embedded).getName();\n    \t\tif (cls==\"Voyant.data.store.DocumentTerms\" || cls==\"Voyant.data.model.Document\") {\n    \t\t\tthis.fireEvent('loadedCorpus', this, config.embedded.getCorpus());\n    \t\t}\n    \t}\n    \telse if (config.corpus) {\n    \t\tthis.fireEvent('loadedCorpus', this, config.corpus);\n    \t}\n    \t\n    \tthis.on(\"query\", function(src, query) {\n    \t\tthis.fireEvent(\"corpusTermsClicked\", src, query);\n    \t}, this);\n    \t\n    \tthis.on(\"corpusTermsClicked\", function(src, terms) {\n    \t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n        \t\tvar query = [];\n        \t\tterms.forEach(function(term) {\n        \t\t\tquery.push(Ext.isString(term) ? term : term.get(\"term\"));\n        \t\t});\n        \t\tthis.setApiParams({\n        \t\t\tquery: query,\n        \t\t\tdocId: undefined,\n        \t\t\tdocIndex: undefined\n        \t\t});\n        \t\tif (this.isVisible()) {\n            \t\tthis.getStore().load({params: this.getApiParams()});\n        \t\t}\n    \t\t}\n    \t});\n    \t\n    \tthis.on(\"documentsClicked\", function(src, documents) {\n    \t\tvar docIds = [];\n    \t\tdocuments.forEach(function(doc) {docIds.push(doc.get('id'));});\n    \t\tthis.setApiParams({\n    \t\t\tdocId: docIds,\n    \t\t\tquery: undefined\n    \t\t});\n    \t\tif (this.isVisible()) {\n        \t\tthis.getStore().load({params: this.getApiParams()});\n    \t\t}\n    \t});\n\n\t\tthis.on(\"documentsSelected\", function(src, docIds) {\n    \t\tthis.setApiParams({\n    \t\t\tdocId: docIds,\n    \t\t\tquery: undefined\n    \t\t});\n    \t\tif (this.isVisible()) {\n        \t\tthis.getStore().load({params: this.getApiParams()});\n    \t\t}\n\t\t});\n\n\t\tthis.on(\"corpusSelected\", function(src, corpus) {\n\t\t\tthis.setApiParams({\n\t\t\t\tdocId: undefined,\n\t\t\t\tdocIndex: undefined\n\t\t\t});\n\t\t\tif (this.isVisible()) {\n\t\t\t\tthis.getStore().load({params: this.getApiParams()});\n\t\t\t}\n\t\t});\n    \t\n    \tthis.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (this.getStore().getCorpus()) {\n    \t\t\tthis.getStore().load({params: this.getApiParams()});\n    \t\t}\n    \t}, this);\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        var store = Ext.create(\"Voyant.data.store.DocumentTermsBuffered\", {parentPanel: this});\n        \n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n            store : store,\n    \t\tselModel: Ext.create('Ext.selection.CheckboxModel', {\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n                    \t\tthis.getApplication().dispatchEvent('documentTermsClicked', this, selections);\n                    \t},\n                    \tscope: this\n                    }\n                },\n                pruneRemoved: false,\n    \t\t\tmode: 'SIMPLE'\n            }),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                }, {\n                    xtype: 'totalpropertystatus'\n                },{\n        \t\t\txtype: 'corpusdocumentselector'\n        \t\t}]\n            }],\n    \t\tcolumns: [{\n    \t\t\ttext: '#',\n    \t\t\twidth: 30,\n        \t\tdataIndex: 'docIndex',\n                sortable: true,\n                renderer: function(v) {return v+1;} // 0-based to 1-based\n            },{\n    \t\t\ttext: this.localize(\"term\"),\n        \t\tdataIndex: 'term',\n            \ttooltip: this.localize(\"termTip\"),\n                sortable: true,\n                flex: 1,\n\t\t\t\txtype: 'coloredtermfield',\n\t\t\t\tuseCategoriesMenu: true\n            },{\n            \ttext: this.localize(\"rawFreq\"),\n            \tdataIndex: 'rawFreq',\n            \ttooltip: this.localize(\"rawFreqTip\"),\n            \twidth: 'autoSize',\n            \tsortable: true\n            },{\n            \ttext: this.localize(\"relativeFreq\"),\n            \ttooltip: this.localize(\"relativeFreqTip\"),\n            \tdataIndex: 'relativeFreq',\n            \twidth: 'autoSize',\n            \tsortable: true,\n            \trenderer: function(val) {\n            \t\treturn Ext.util.Format.number(val*1000000, \"0,000\")\n            \t}\n            },{\n            \ttext: this.localize(\"tfidf\"),\n            \ttooltip: this.localize(\"tfidfTip\"),\n            \tdataIndex: 'tfidf',\n            \twidth: 'autoSize',\n            \tsortable: true,\n            \thidden: true,\n            \trenderer: Ext.util.Format.numberRenderer('0,000.000')\n            },{\n            \ttext: this.localize(\"zscore\"),\n            \ttooltip: this.localize(\"zscoreTip\"),\n            \tdataIndex: 'zscore',\n            \twidth: 'autoSize',\n            \tsortable: true,\n            \thidden: true,\n            \trenderer: Ext.util.Format.numberRenderer('0,000.000')\n            },{\n                xtype: 'widgetcolumn',\n                text: this.localize(\"trend\"),\n                tooltip: this.localize('trendTip'),\n                flex: 1,\n                dataIndex: 'distributions',\n                widget: {\n                    xtype: 'sparklineline'\n                }\n            }],\n            \n            listeners: {\n            \ttermsClicked: {\n            \t\tfn: function(src, terms) {\n                \t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n                    \t\tvar queryTerms = [];\n                    \t\tterms.forEach(function(term) {\n                    \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n                    \t\t\telse if (term.term) {queryTerms.push(term.term);}\n                    \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n                    \t\t});\n                    \t\tif (queryTerms.length > 0) {\n                    \t\t\tthis.setApiParams({\n                    \t\t\t\tdocIndex: undefined,\n                    \t\t\t\tdocId: undefined,\n                    \t\t\t\tquery: queryTerms\n                    \t\t\t});\n                        \t\tif (this.isVisible()) {\n                            \t\tif (this.isVisible()) {\n                                \t\tthis.getStore().load({params: this.getApiParams()});\n                            \t\t}\n                        \t\t}\n                    \t\t}\n                \t\t}\n                \t},\n                \tscope: this\n            \t}\n            }\n        });\n\n        me.callParent(arguments);\n        \n        me.getStore().getProxy().setExtraParam(\"withDistributions\", true);\n        \n    }\n    \n});\n","/**\n * The Documents tool shows a table of the documents in the corpus and includes functionality for modifying the corpus.\n * You can work with documents programmatically using {@link Spyral.Corpus#documents}.\n *\n * @example\n *\n * let config = {\n * \t\"columns\": null,\n * \t\"dir\": null,\n * \t\"docId\": null,\n * \t\"docIndex\": null,\n * \t\"query\": null,\n * \t\"sort\": null,\n * };\n *\n * loadCorpus(\"austen\").tool(\"documents\", config);\n *\n * @class Documents\n * @tutorial documents\n * @memberof Tools\n */\nExt.define('Voyant.panel.Documents', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel','Voyant.util.Downloadable'],\n\talias: 'widget.documents',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n\t\t\tnewCorpusError: 'There was an error creating the new the corpus. You may not have permission to do this.'\n    \t},\n    \tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.Documents\n\t\t\t * @instance\n\t\t\t * @property {query}\n\t\t\t */\n    \t\tquery: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Documents\n\t\t\t * @instance\n\t\t\t * @property {docIndex}\n\t\t\t */\n    \t\tdocIndex: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Documents\n\t\t\t * @instance\n\t\t\t * @property {docId}\n\t\t\t */\n    \t\tdocId: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Documents\n\t\t\t * @instance\n\t\t\t * @property {columns} columns 'title', 'author', 'pubDate', 'publisher', 'pubPlace', 'keyword', 'collection', 'tokensCount-lexical', 'typesCount-lexical', 'typeTokenRatio-lexical', 'averageWordsPerSentence', 'language'\n\t\t\t */\n\t\t\tcolumns: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Documents\n\t\t\t * @instance\n\t\t\t * @property {sort}\n\t\t\t */\n\t\t\tsort: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Documents\n\t\t\t * @instance\n\t\t\t * @property {dir}\n\t\t\t */\n\t\t\tdir: undefined\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    \n    MODE_EDITING: 'editing',\n    MODE_NORMAL: 'normal',\n    config: {\n    \toptions: [{\n    \t\txtype: 'stoplistoption'\n    \t},\n        \t{xtype: 'categoriesoption'}\n        ],\n    \tmode: this.MODE_NORMAL\n    },\n\n    constructor: function(config) {\n    \t\n    \tvar store = Ext.create(\"Voyant.data.store.Documents\", {\n    \t    selModel: {pruneRemoved: false},\n    \t    proxy: {\n    \t    \textraParams: {\n    \t    \t\tforTool: 'documents'\n    \t    \t}\n    \t    }\n    \t});\n    \t\n    \tvar dockedItemsItems = [{\n            xtype: 'querysearchfield'\n        }, {\n            xtype: 'totalpropertystatus'\n        }]\n    \t\n    \tvar me = this;\n    \t\n    \tif (!config || config.mode!=this.MODE_EDITING) {\n    \t\tdockedItemsItems.push({\n            \ttext: this.localize(\"modify\"),\n            \ttooltip: this.localize(\"modifyTip\"),\n    \t\t\tglyph: 'xf044@FontAwesome',\n    \t\t\tscope: this,\n    \t\t\titemId: 'modifyButton',\n            \thandler: function(btn) {\n            \t\tvar win = Ext.create('Ext.window.Window', {\n            \t\t    title: this.localize(\"title\"),\n            \t\t    modal: true,\n            \t\t    width: \"80%\",\n            \t\t    minWidth: 300,\n            \t\t    minHeight: 200,\n            \t\t    height: \"80%\",\n            \t\t    layout: 'fit',\n            \t\t    frame: true,\n            \t\t    border: true,\n            \t\t    items: {\n            \t\t    \txtype: 'documents',\n            \t\t    \tmode: this.MODE_EDITING,\n            \t\t    \tcorpus: this.getStore().getCorpus(),\n            \t\t    \theader: false,\n            \t\t    \tviewConfig: {\n            \t\t            plugins:{\n            \t\t                ptype:'gridviewdragdrop'\n            \t\t            },\n            \t\t            listeners: {\n            \t\t            \tbeforedrop: function(node, data, overModel, dropPosition, dropHandlers) {\n            \t\t            \t\tif (this.getStore().getCount()<this.getStore().getCorpus().getDocumentsCount()) {\n            \t\t            \t\t\tvar panel = this.up(\"panel\");\n            \t\t        \t\t\t\tExt.Msg.show({\n            \t\t        \t\t\t\t    title: panel.localize('error'),\n            \t\t        \t\t\t\t    message: panel.localize('reorderFilteredError'),\n            \t\t        \t\t\t\t    buttons: Ext.Msg.OK,\n            \t\t        \t\t\t\t    icon: Ext.Msg.ERROR\n            \t\t        \t\t\t\t});\n            \t\t            \t\t\treturn false;\n            \t\t            \t\t}\n            \t\t            \t\treturn true;\n            \t\t            \t}\n            \t\t            }\n            \t\t    \t}\n            \t\t    },\n            \t\t    buttons: [{\n                \t\t\ttext: this.localize('add'),\n                \t\t\ttooltip: this.localize(\"addTip\"),\n                \t\t\tglyph: 'xf067@FontAwesome',\n                \t\t\thandler: function(btn) {\n                \t\t\t\tbtn.up(\"window\").close();\n                \t\t\t\tExt.create('Ext.window.Window', {\n                \t\t\t\t\theader: false,\n                        \t\t    modal: true,\n                        \t\t    layout: 'fit',\n                        \t\t    items: {\n                        \t\t    \txtype: 'corpuscreator',\n                        \t\t    \tcorpus: this.getStore().getCorpus(),\n\t\t\t\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\t\t\t\tboxready: function(cmp) {\n\t\t\t\t\t\t\t\t\t\t\t\tcmp.setStyle({borderColor: '#f5f5f5'});\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n                        \t\t    }\n                        \t\t}).show();\n                \t\t\t},\n                \t\t\tscope: this\n                \t\t}, {\n                \t\t\ttext: this.localize('remove'),\n                \t\t\ttooltip: this.localize(\"removeTip\"),\n                \t\t\tglyph: 'xf05e@FontAwesome',\n                \t\t\thidden: this.getStore().getCorpus().getDocumentsCount()==1,\n                \t\t\thandler: this.keepRemoveReorderHandler,\n                \t\t\titemId: 'remove',\n                \t\t\tscope: this\n                \t\t}, {\n                \t\t\ttext: this.localize('keep'),\n                \t\t\ttooltip: this.localize(\"keepTip\"),\n                \t\t\tglyph: 'xf00c@FontAwesome',\n                \t\t\thidden: this.getStore().getCorpus().getDocumentsCount()==1,\n                \t\t\thandler: this.keepRemoveReorderHandler,\n                \t\t\titemId: 'keep',\n                \t\t\tscope: this\n                \t\t}, {\n                \t\t\ttext: this.localize('reorder'),\n                \t\t\ttooltip: this.localize(\"reorderTip\"),\n                \t\t\tglyph: 'xf0dc@FontAwesome',\n                \t\t\thidden: this.getStore().getCorpus().getDocumentsCount()==1,\n                \t\t\thandler: this.keepRemoveReorderHandler,\n                \t\t\titemId: 'reorder',\n                \t\t\tscope: this\n                \t\t},{\n            \t\t        text: 'Cancel',\n                \t\t\tglyph: 'xf00d@FontAwesome',\n            \t\t        handler: function(btn) {\n            \t\t        \tbtn.up(\"window\").close();\n            \t\t        }\n            \t\t    }]\n            \t\t}).show();\n\n            \t}\n    \t\t}, {\n    \t\t\ttext: this.localize('downloadButton'),\n\t\t    \tglyph: 'xf019@FontAwesome',\n    \t\t\titemId: 'downloadButton',\n    \t\t\thandler: function() {\n    \t\t\t\tme.downloadFromCorpusId(me.getStore().getCorpus().getId())\n    \t\t\t}\n    \t\t})\n    \t}\n    \t\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n\t    \tcolumns:[\n\t    \t   {\n\t    \t\t   xtype: 'rownumberer',\n\t    \t        renderer: function(value, metaData, record) {return record.getIndex()+1},\n\t    \t        sortable: false\n\t    \t    },{\n\t    \t        text: this.localize('documentTitle'),\n\t    \t        dataIndex: 'title',\n\t    \t        sortable: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getTitle();},\n\t    \t        flex: 3\n\t    \t    },{\n\t    \t        text: this.localize('documentAuthor'),\n\t    \t        dataIndex: 'author',\n\t    \t        sortable: true,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getAuthor();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('documentPubDate'),\n\t    \t        dataIndex: 'pubDate',\n\t    \t        sortable: true,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getPubDate();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('documentPublisher'),\n\t    \t        dataIndex: 'publisher',\n\t    \t        sortable: false,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getPublisher();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('documentPubPlace'),\n\t    \t        dataIndex: 'pubPlace',\n\t    \t        sortable: false,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getPubPlace();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('documentKeyword'),\n\t    \t        dataIndex: 'keyword',\n\t    \t        sortable: false,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getKeyword();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('documentCollection'),\n\t    \t        dataIndex: 'collection',\n\t    \t        sortable: false,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getCollection();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('tokensCountLexical'),\n\t    \t        dataIndex: 'tokensCount-lexical',\n\t    \t        renderer: Ext.util.Format.numberRenderer('0,000'),\n\t    \t        sortable: true,\n\t    \t        width: 'autoSize'\n\t    \t    },{\n\t    \t        text: this.localize('typesCountLexical'),\n\t    \t        dataIndex: 'typesCount-lexical',\n\t    \t        renderer: Ext.util.Format.numberRenderer('0,000'),\n\t    \t        width: 'autoSize'\n\t    \t    },{\n\t    \t        text: this.localize('typeTokenRatioLexical'),\n\t    \t        dataIndex: 'typeTokenRatio-lexical',\n\t    \t        renderer: function(val) {return Ext.util.Format.percent(val)},\n\t    \t        width: 'autoSize'\n\t    \t    },{\n\t    \t        text: this.localize('averageWordsPerSentence'),\n\t    \t        dataIndex: 'averageWordsPerSentence',\n\t    \t        renderer: Ext.util.Format.numberRenderer('0,000.0'),\n\t            \ttooltip: this.localize(\"averageWordsPerSentenceTip\"),\n\t    \t        width: 'autoSize'\n\t    \t    },{\n\t    \t        text: this.localize('language'),\n\t    \t        dataIndex: 'language',\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metaData, record, rowIndex, colIndex, store, view) {return view.ownerCt.getLanguage(val);},\n\t    \t        width: 'autoSize'\n\t    \t    }\n\t    \t],\n\t    \t\n\t        store: store,\n\t    \t\n\t    \tselModel: {\n\t    \t\ttype: 'rowmodel',\n\t    \t\tmode: 'MULTI',\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n                    \t\tthis.getApplication().dispatchEvent('documentsClicked', this, selections, this.getStore().getCorpus());\n                    \t},\n                    \tscope: this\n                    }\n                }\n            },\n            \n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: dockedItemsItems\n            }]\n    \t});\n    \t\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n        \n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n\n    \t\tthis.store.setCorpus(corpus);\n\n    \t\tif (this.isVisible()) {\n        \t\tthis.store.load({params: this.getApiParams()});\n    \t\t} else {\n    \t\t\tthis.on('afterrender', function() {\n            \t\tthis.store.load({params: this.getApiParams()});\n    \t\t\t}, this);\n    \t\t}\n\n    \t\tif (this.hasModifyCorpusAccess(corpus) === false) {\n    \t\t\tthis.queryById('modifyButton').hide();\n    \t\t\tthis.queryById('downloadButton').hide();\n    \t\t}\n    \t});\n    \t\n    \tthis.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (this.getStore().getCorpus()) {\n    \t\t\tthis.getStore().load({params: this.getApiParams()});\n    \t\t}\n    \t}, this);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('query', function(src, query) {\n    \t\tthis.setApiParam('query', query);\n    \t\tthis.store.load({params: this.getApiParams()});\n    \t})\n    \t\n    \tif (config.embedded) {\n        \tif (Ext.getClass(config.embedded).getName() == \"Voyant.data.model.Corpus\") {\n        \t\tconfig.corpus = config.embedded\n        \t}\n        \telse if (Ext.getClass(config.embedded).getName() == \"Voyant.data.store.Documents\") {\n        \t\tthis.store.setRecords(config.embedded.getData())\n        \t\tconfig.corpus = config.embedded.getCorpus()\n        \t}\n    \t\t\n    \t}\n    \t\n    \t// if we have a corpus, load it\n    \tif (config.corpus) {\n    \t\tthis.fireEvent('loadedCorpus', this, config.corpus)\n    \t}\n    },\n    \n    keepRemoveReorderHandler: function(btn) {\n    \t// we're not sure which scope we're in, so ensure we're talking about this buttons panel\n\t\tvar panel = btn.up(\"window\").down(\"documents\");\n\t\tvar selection = panel.getSelection();\n\t\tvar docs = panel.getStore().getCorpus().getDocumentsCount();\n\t\tvar btnMode = btn.getItemId();\n\t\t// if reordering, check to make sure that we're not looking at a subset\n\t\tif (btnMode=='reorder') {\n\t\t\tif (panel.getStore().getCount()<docs) {\n\t\t\t\treturn Ext.Msg.show({\n\t\t\t\t    title: this.localize('error'),\n\t\t\t\t    message: this.localize('reorderFilteredError'),\n\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdocIndex = [];\n\t\t\t\tpanel.getStore().each(function(doc) {\n\t\t\t\t\tdocIndex.push(doc.getIndex())\n\t\t\t    }, this);\n\t\t\t\tfor (var i=1; i<docIndex.length; i++) {\n\t\t\t\t\tif (docIndex[i-1]>docIndex[i]) {\n\t\t\t\t\t\treturn Ext.Msg.confirm(panel.localize('newCorpus'), new Ext.Template(panel.localize(btnMode+'Documents')).applyTemplate([selection.length]), function(confirmBtn){\n\t\t\t\t\t\t\tif (confirmBtn==='yes') {\n\t\t\t\t\t\t\t\tdocIndex = [];\n\t\t\t\t\t\t\t\tthis.getStore().each(function(doc) {\n\t\t\t\t\t\t\t\t\tdocIndex.push(doc.getIndex())\n\t\t\t\t\t\t\t    }, this);\n\t\t\t\t\t\t\t\tvar params = {docIndex: docIndex};\n\t\t\t\t\t\t\t\tparams[btnMode+\"Documents\"] = true;\n\t\t\t\t\t\t\t\tthis.editCorpus(params)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, panel);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// if we get here it's because nothing's been reordered\n\t\t\t\treturn Ext.Msg.show({\n\t\t\t\t    title: this.localize('error'),\n\t\t\t\t    message: this.localize('reorderOriginalError'),\n\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tif (selection.length>0) {\n\t\t\tif (selection.length==docs) {\n\t\t\t\tif (docs==1) {\n\t\t\t\t\treturn Ext.Msg.show({\n\t\t\t\t\t    title: this.localize('error'),\n\t\t\t\t\t    message: this.localize('onlyOneError'),\n\t\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn Ext.Msg.show({\n\t\t\t\t\t    title: this.localize('error'),\n\t\t\t\t\t    message: this.localize('allSelectedError'),\n\t\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn Ext.Msg.confirm(this.localize('newCorpus'), new Ext.Template(this.localize(btnMode+'SelectedDocuments')).applyTemplate([selection.length]), function(confirmBtn){\n\t\t\t\t\tif (confirmBtn==='yes') {\n\t\t\t\t\t\tdocIndex = [];\n\t\t\t\t\t\tselection.forEach(function(doc){\n\t\t\t\t\t\t\tdocIndex.push(doc.getIndex())\n\t\t\t\t\t\t})\n\t\t\t\t\t\tvar params = {docIndex: docIndex};\n\t\t\t\t\t\tparams[btnMode+\"Documents\"] = true;\n\t\t\t\t\t\tthis.editCorpus(params)\n\t\t\t\t\t}\n\t\t\t\t}, panel);\n\t\t\t}\n\t\t}\n\t\telse if (panel.getApiParam(\"query\") && panel.getStore().getCount()<docs) {\n\t\t\treturn Ext.Msg.confirm(this.localize('newCorpus'), new Ext.Template(this.localize(btnMode+'FilteredDocuments')).applyTemplate([selection.length]), function(confirmBtn){\n\t\t\t\tif (confirmBtn==='yes') {\n\t\t\t\t\tdocIndex = [];\n\t\t\t\t\tthis.getStore().each(function(doc) {\n\t\t\t\t\t\tdocIndex.push(doc.getIndex())\n\t\t\t\t    }, this);\n\t\t\t\t\tvar params = {docIndex: docIndex};\n\t\t\t\t\tparams[btnMode+\"Documents\"] = true;\n\t\t\t\t\tthis.editCorpus(params)\n\t\t\t\t}\n\t\t\t}, panel);\n\t\t}\n\t\telse {\n\t\t\treturn Ext.Msg.show({\n\t\t\t    title: this.localize('error'),\n\t\t\t    message: this.localize('selectOrFilterError'),\n\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t});\n\t\t}    \t\n    },\n    \n    editCorpus: function(params) {\n    \t\n    \tExt.apply(params, {\n    \t\ttool: 'corpus.CorpusManager',\n    \t\tcorpus: this.getStore().getCorpus().getId()\n    \t})\n\n    \t// mask main viewport while we create a new corpus\n    \tvar app = this.getApplication();\n    \tvar view = app.getViewport();\n\t\tview.mask(this.localize(\"Creating new corpus\u2026\"));\n    \tExt.Ajax.request({\n    \t\turl: this.getApplication().getTromboneUrl(),\n    \t\tmethod: 'POST',\n    \t\tparams: params,\n    \t\tsuccess: function(response) {\n    \t\t\tview.unmask();\n    \t\t\tvar obj = Ext.decode(response.responseText);\n\t\t\t\tapp.openUrl(app.getBaseUrl()+\"?corpus=\"+obj.corpus.id);\n//    \t\t\tview.mask(\"Loading new corpus\u2026\")\n//    \t\t\tnew Voyant.data.model.Corpus({corpus: obj.corpus.id}).then(function(corpus) {\n//    \t\t\t\tview.unmask();\n//    \t\t\t\tapp.openUrl(app.getBaseUrl()+\"/?corpus=\"+obj.corpus.id)\n//    \t\t\t\tapp.dispatchEvent('loadedCorpus', app, corpus);\n//    \t\t\t}).fail(function(message, response) {\n//    \t\t\t\tview.unmask();\n//    \t\t\t\tapp.showErrorResponse({message: message}, response);\n//    \t\t\t});\n    \t\t},\n\t\t\tfailure: function(response) {\n\t\t\t\tview.unmask();\n\t\t\t\tExt.Msg.show({\n\t\t\t\t\ttitle: this.localize('error'),\n\t\t\t\t\tmessage: this.localize('newCorpusError'),\n\t\t\t\t\tbuttons: Ext.Msg.OK,\n\t\t\t\t\ticon: Ext.Msg.ERROR\n\t\t\t\t});\n\t\t\t},\n\t\t\tscope: this\n    \t});\n    \t\n    \t// close editing window if we're in modal mode, should happen asynchronously while new corpus is created\n    \tvar win = this.up(\"window\");\n    \tif (win && win.isFloating()) {win.close()}\n    }\n})","Ext.define('Voyant.panel.DocumentsFinder', {\n\textend: 'Ext.grid.Panel',\n\trequire: ['Voyant.data.store.DocumentQueryMatches','Ext.grid.plugin.CellEditing'],\n\tmixins: ['Voyant.panel.Panel'/*,'Voyant.util.Localization'*/],\n\talias: 'widget.documentsfinder',\n    statics: {\n    \ti18n: {\n    \t}\n    },\n    config: {\n    \texportGridAll: false // prevents export all options from grid\n    },\n\n    constructor: function(config) {\n    \t\n        this.cellEditing = Ext.create(\"Ext.grid.plugin.CellEditing\", {\n            clicksToEdit: 1\n        });\n\n        this.cellEditing.on('edit', this.onEditComplete, this);\n    \t\n    \tvar me = this;\n    \t\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n    \t\tplugins: [this.cellEditing],\n    \t\tbbar: [\n    \t\t       {\n                       text: this.localize('addRow'),\n                       glyph: 'xf055@FontAwesome',\n                       handler: this.addRow,\n                       scope: this\n    \t\t       },{\n                       text: this.localize('exportNewCorpus'),\n                       disabled: true,\n                       glyph: 'xf08e@FontAwesome',\n                       tooltip: this.localize('exportNewCorpusTip'),\n                       handler: function() {\n                    \t   var query = this.getQueryFromStore();\n                    \t   if (query) {\n                    \t\t   this.setLoading(true);\n\t   \t               \t\t\tvar documentQueryMatches = this.getCorpus().getDocumentQueryMatches();\n\t\t            \t\t\tdocumentQueryMatches.load({\n\t\t            \t\t\t\tparams: {query: query, createNewCorpus: true},\n\t\t            \t\t\t\tcallback: function(records, operation, success) {\n\t\t                     \t\t   this.setLoading(false);\n\t\t            \t\t\t\t\tif (success) {\n\t\t            \t\t\t\t\t\tvar corpus = operation.getProxy().getReader().rawData.documentsFinder.corpus;\n\t\t            \t\t\t\t\t\tvar url = this.getBaseUrl()+'?corpus='+corpus;\n\t\t                         \t\t   Ext.Msg.alert({\n\t\t                        \t\t\t   title: this.localize('title'),\n\t\t                        \t\t\t   message: \"<a href='\"+url+\"' target='_blank'>New Corpus</a>\"\n\t\t                        \t\t   })\n\t\t            \t\t\t\t\t}\n\t\t            \t\t\t\t\telse {\n\t\t            \t\t\t\t\t\tExt.create(\"Voyant.util.ResponseError\", {\n\t\t            \t\t\t\t\t\t\tmsg: this.localize(\"unsuccessfulQuery\"),\n\t\t            \t\t\t\t\t\t\tresponse: operation.getError().response\n\t\t            \t\t\t\t\t\t}).show();\n\t\t            \t\t\t\t\t}\n\t\t            \t\t\t\t},\n\t\t            \t\t\t\tscope: this\n\t\t            \t\t\t})\n                    \t\t   \n                    \t   }\n                    \t   else {\n                    \t\t   Ext.Msg.alert({\n                    \t\t\t   title: this.localize('title'),\n                    \t\t\t   message: this.localize('noMatches')\n                    \t\t   })\n                    \t   }\n                       },\n                       scope: this,\n                       cls: 'exportBtn'\n    \t\t       },{\n    \t\t    \t   xtype: 'tbtext',\n    \t\t    \t   name: 'status',\n    \t\t    \t   cls: 'status'\n    \t\t       }\n    \t\t],\n\t    \tcolumns:[\n \t    \t    {\n\t    \t        text: this.localize('query'),\n\t    \t        dataIndex: 'query',\n\t    \t        renderer: function(value) {\n\t    \t        \treturn Ext.isEmpty(value) ? '<span class=\"placeholder\">'+me.localize('emptyQuery') + '</span>' : value;\n\t    \t        },\n\t    \t        editor: true,\n\t    \t        minWidth: 150,\n\t    \t        maxWidth: 300\n\t    \t    },{\n\t    \t        text: this.localize('field'),\n\t    \t        dataIndex: 'field',\n\t    \t        editor: {\n\t    \t        \txtype: 'combo',\n\t                    typeAhead: true,\n\t                    triggerAction: 'all',\n\t                    forceSelection: true,\n\t                    value: '',\n\t                    valueField: 'value',\n\t                    listeners: {\n\t                    \tchange:function() {\n\t                    \t  if (Ext.isEmpty(this.getValue())) {\n\t\t                    \t    this.reset();\n\t\t                    \t  }\n\t\t                    \t}\n\t                    },\n\t                    store: new Ext.data.Store({\n\t                        fields: ['text','value'],\n\t                \t\tdata: [[this.localize('textField'),'text'],[this.localize('advancedField'),'advanced']]\n\t                    })\n\t    \t        },\n\t    \t        width: 150,\n                    renderer: function(v) {return Ext.isEmpty(v) ? '' : me.localize(v+\"Field\")}\n\t    \t    },{\n\t    \t        text: this.localize('operator'),\n\t    \t        dataIndex: 'operator',\n\t    \t        editor: {\n\t    \t        \txtype: 'combo',\n\t                    forceSelection: true,\n\t                    store: new Ext.data.Store({\n\t                        autoDestroy: true,\n\t                        fields: ['text','value'],\n\t                        displayField:  'text',\n\t                        valueField: 'value',\n\t                \t\tdata: [{text:'AND',value:'+'},{text:'OR',value:''}]\n\t                    })\n\t    \t        },\n\t    \t        minWidth: 75,\n\t    \t        maxWidth: 75\n\t    \t    },{\n\t    \t        text: this.localize('count'),\n\t    \t        dataIndex: 'count',\n\t    \t        renderer: function(value, metadata, record) {\n\t    \t        \treturn Ext.isEmpty(record.get('query')) ? '' : Ext.util.Format.number(value, '0,000')\n\t    \t        },\n\t    \t        minWidth: 100,\n\t    \t        maxWidth: 100\n\t    \t    },{\n\t    \t    \txtype: 'actioncolumn',\n\t                width: 25,\n\t                getGlyph: 'xf014@FontAwesome',\n\t                tooltip: this.localize('deleteQueryTip'),\n\t                menuDisabled: true,\n\t                sortable: false,\n\t                handler: this.removeRow,\n\t                scope: this\n\t    \t    }\n\t    \t],\n\t    \t\n\t    \tstore: new Ext.data.Store({\n                // destroy the store if the grid is destroyed\n                autoDestroy: true,\n                fields: ['id','operator','field','query','count'],\n\t    \t\tdata: [['','','','',0]]\n            })\n      \t});\n    \t\t\t\n        this.callParent(arguments);\n        \n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n        \n  \n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tvar docs = corpus.getDocuments();\n    \t\tif (docs && docs.getCount()>0) {\n    \t\t\tvar doc = docs.getDocument(0);\n    \t\t\tvar records = [];\n    \t\t\t[\"title\",\"author\",\"pubDate\",\"publisher\",\"pubPlace\"].forEach(function(field) {\n    \t\t\t\tif (!Ext.isEmpty(doc.get(field))) {\n    \t\t\t\t\trecords.push([this.localize(field+'Field'),field])\n    \t\t\t\t}\n    \t\t\t}, this);\n    \t\t\tif (records) {\n    \t\t\t\tvar editor = this.getColumnManager().getHeaderByDataIndex(\"field\").getEditor();\n    \t\t\t\tvar store = editor.getStore();\n    \t\t\t\tstore.each(function(record) {\n    \t\t\t\t\trecords.push([record.get('text'), record.get('value')]);\n    \t\t\t\t}, this);\n    \t\t\t\teditor.setStore(Ext.create(\"Ext.data.Store\",{\n    \t\t\t\t\tfields: ['text','value'],\n    \t\t\t\t\tdata: records\n    \t\t\t\t}))\n    \t\t\t}\n    \t\t\tthis.updateStatus(0);\n    \t\t\tthis.setLoading(false);\n    \t\t}\n    \t})\n    \t\n    },\n    \n    removeRow:function(grid, rowIndex) {\n    \tthis.getStore().removeAt(rowIndex);\n    \tif (this.getStore().getCount()==0) {this.addRow();}\n    \tthis.updateAggregate();\n    },\n    \n    addRow: function() {\n    \tthis.store.loadData([['','','','',0]], true);\n    },\n    \n    onEditComplete: function(editor, context) {\n    \t\n    \t\n    \tvar query = this.getQueryFromRecord(context.record);\n\t\tif (Ext.isEmpty(query)) {\n\t\t\tcontext.record.set('count','');\n\t\t\tthis.updateAggregate();\n\t\t}\n\t\telse {\n\t\t\tvar cell = context.view.getCell(context.record, this.getColumnManager().getHeaderByDataIndex(\"count\"));\n\t\t\tcell.mask(\"loading\");\n\t\t\tvar documentQueryMatches = this.getCorpus().getDocumentQueryMatches();\n\t\t\tdocumentQueryMatches.load({\n\t\t\t\tparams: {\n\t\t\t\t\tquery: query\n\t\t\t\t},\n\t\t\t\tcallback: function(records, operation, success) {\n\t\t\t\t\tcell.unmask();\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tcontext.record.set('count', records.length==0 ? 0 : records[0].get('count'))\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tExt.create(\"Voyant.util.ResponseError\", {\n\t\t\t\t\t\t\tmsg: this.localize(\"unsuccessfulQuery\"),\n\t\t\t\t\t\t\tresponse: operation.getError().response\n\t\t\t\t\t\t}).show();\n\t\t\t\t\t\tcontext.record.set('count',0);\n\t\t\t\t\t}\n\t\t\t\t\tthis.updateAggregate();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t})\n\t\t}\n\n    },\n    \n    getQueryFromRecord: function(record) {\n\t\tif (Ext.isEmpty(record) || Ext.isEmpty(record.get('query'))) {return \"\"}\n\t\tvar query = record.get('query').trim();\n\t\tif (Ext.isEmpty(query)) {return \"\"}\n\t\tvar field = record.get('field');\n\t\treturn Ext.isEmpty(field ? field.trim() : field) ? query : field+\":\"+query\n    },\n    \n    getQueryFromStore: function() {\n    \tvar query = \"\";\n \t\tthis.getStore().each(function(record) {\n \t\t\tvar q = this.getQueryFromRecord(record);\n \t\t\tif (!Ext.isEmpty(q)) {\n \t\t\t\tif (!Ext.isEmpty(query)) {\n \t\t\t\t\tvar op = record.get('operator');\n \t\t\t\t\tquery += op== 'AND' ? ' + ' : ' | '\n \t\t\t\t}\n \t\t\t\tquery+=q\n \t\t\t}\n \t\t}, this)\n \t\tconsole.warn(query)\n \t\treturn query;\n    },\n    \n    updateAggregate: function() {\n    \tvar count = this.getStore().sum('count');\n    \tif (!count || typeof count == 'string') {\n    \t\tthis.updateStatus(0);\n    \t}\n    \telse if (count==1) {\n    \t\tvar count = this.getStore().getAt(0).get('count');\n    \t\tthis.updateStatus(this.getStore().getAt(0).get('count'))\n    \t}\n    \telse {\n    \t\t\n    \t\tvar query = this.getQueryFromStore();\n    \t\tif (!Ext.isEmpty(query)) {\n            \tif (!this.status) {this.status=this.down(\"[cls~=status]\")} // make sure we have status for masking\n    \t\t\tthis.status.mask(this.localize(\"loading\"));\n    \t\t\tvar documentQueryMatches = this.getCorpus().getDocumentQueryMatches();\n    \t\t\tdocumentQueryMatches.load({\n    \t\t\t\tparams: {query: query},\n    \t\t\t\tcallback: function(records, operation, success) {\n    \t\t\t\t\t\n    \t\t\t\t\tthis.status.unmask();\n    \t\t\t\t\tif (success) {\n    \t\t\t\t\t\tthis.updateStatus(records[0].get('count'));\n    \t\t\t\t\t}\n    \t\t\t\t\telse {\n    \t\t\t\t\t\tExt.create(\"Voyant.util.ResponseError\", {\n    \t\t\t\t\t\t\tmsg: this.localize(\"unsuccessfulQuery\"),\n    \t\t\t\t\t\t\tresponse: operation.getError().response\n    \t\t\t\t\t\t}).show();\n    \t\t\t\t\t\tthis.updateStatus(0);\n    \t\t\t\t\t}\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t})\n    \t\t}\n    \t}\n    },\n    \n    updateStatus: function(count) {\n    \tif (!this.status) {this.status=this.down(\"[cls~=status]\")}\n    \tif (!this.exportBtn) {this.exportBtn=this.down(\"[cls~=exportBtn]\")}\n    \tif (count==0) {\n        \tthis.status.update(new Ext.XTemplate(this.localize('noMatches')).apply([this.getCorpus().getDocumentsCount()]))\n    \t}\n    \telse {\n    \t\tthis.status.update(new Ext.XTemplate(this.localize('queryMatches')).apply([count,this.getCorpus().getDocumentsCount()]))\n    \t}\n    \tthis.exportBtn.setDisabled(count==0);\n    \t\n    }\n    \n})","/**\n * Embedder provides a way to embed a web page into your Voyant Tools experience.\n * \n * @class Embedder\n * @memberof Tools\n */\nExt.define('Voyant.panel.Embedder', {\n\textend: 'Ext.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.embedder',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttitle: 'Embedder',\n\t\t\turl: 'URL',\n\t\t\tgo: 'Go',\n\t\t\thelp: 'Embedder provides a way to embed a web page into your Voyant Tools experience.<br>NB: modern security practices will prevent many URLs from being embedded.',\n\t\t\thelpTip: 'Embedder provides a way to embed a web page into your Voyant Tools experience.'\n\t\t},\n\t\tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.Embedder\n\t\t\t * @instance\n\t\t\t * @property {String} url The URL of the web page to embed.\n\t\t\t */\n\t\t\turl: undefined\n\t\t},\n\t\tglyph: 'xf0c1@FontAwesome'\n\t},\n\tconstructor: function(config) {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n\t\t\n\t\tif (config.url) {\n\t\t\tthis.setApiParam('url', config.url);\n\t\t}\n\n        this.callParent(arguments);\n\t\t\n\t\tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n\tinitComponent: function() {\n\t\tExt.apply(this, {\n\t\t\ttitle: this.localize('title'),\n\t\t\tlayout: {\n\t\t\t\ttype: 'fit'\n\t\t\t},\n\t\t\titems: {\n\t\t\t\txtype: 'uxiframe',\n\t\t\t\tsrc: this.getApiParam('url')\n\t\t\t},\n\t\t\ttbar: [{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tvalue: this.getApiParam('url'),\n\t\t\t\temptyText: this.localize('url'),\n\t\t\t\tlisteners: {\n\t\t\t\t\tspecialkey: function(field, e){\n\t\t\t\t\t\tif (e.getKey() == e.ENTER) {\n\t\t\t\t\t\t\tfield.up('panel').loadUrl(field.getValue());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},{\n\t\t\t\txtype: 'button',\n\t\t\t\ttext: this.localize('go'),\n\t\t\t\thandler: function(btn) {\n\t\t\t\t\tvar url = btn.prev('textfield').getValue();\n\t\t\t\t\tbtn.up('panel').loadUrl(url);\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\t\t\n\t\tthis.callParent();\n\t},\n\tloadUrl: function(url) {\n\t\tthis.down('uxiframe').load(url);\n\t}\n});","/**\n * @ignore\n */\nExt.define('Voyant.panel.Fountain', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.fountain',\n    statics: {\n    \ti18n: {\n    \t\ttitle: \"FountainMeter\"\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\t\n    \t\tdocIndex: 0,\n    \t\t\n    \t\tspeed: 30,\n    \t\t\n    \t\tgroups: undefined\n    \t\t\t\n    \t},\n    \tglyph: 'xf06e@FontAwesome'\n\t},\n\tconfig: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\n    \taudio: false,\n    \twords: [],\n    \tgroups: {},\n    \tmoveWordsTimeout: undefined\n\t},\n\t\n\t\n    constructor: function() {\n\n    \tthis.mixins['Voyant.util.Localization'].constructor.apply(this, arguments);\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tlayout: {\n    \t\t\ttype: 'hbox',\n    \t\t\talign: 'stretch'\n    \t\t},\n    \t\titems: [{\n        \t\thtml: '<svg></svg>',\n        \t\titemId: 'fountain',\n        \t\tflex: 2\n    \t\t},{\n    \t\t\tflex: 1,\n    \t\t\tlayout:  'vbox',\n    \t\t\titems: [{\n    \t\t\t\t   xtype: 'polar',\n    \t\t\t\t   itemId: 'gauge',\n    \t\t\t\t   width: 300,\n    \t\t\t\t   flex: 1,\n    \t\t\t\t   store: {\n    \t\t\t\t       fields: ['mph', 'fuel', 'temp', 'rpm'],\n    \t\t\t\t       data: [{val: 10}]\n    \t\t\t\t   },\n    \t\t\t\t   series: {\n    \t\t\t\t       type: 'gauge',\n    \t\t\t\t       colors: this.getApplication().getColorPalette(this.getApplication().getApiParam('palette'), true),\n    \t\t\t\t       angleField: 'val',\n    \t\t\t\t       donut: 20\n    \t\t\t\t   }\n    \t\t\t\t},{\n\t\t    \t\t\twidth: 300,\n\t\t    \t\t\theight: 16,\n    \t\t\t\t\titems: {\n    \t\t    \t\t\txtype: 'sparklineline',\n        \t\t\t\t    itemId: 'gaugsparkline',\n    \t\t    \t\t\tvalues: [0,1,2,34],\n    \t\t    \t\t\theight: 16,\n    \t\t    \t\t\twidth: 300\n    \t\t\t\t\t},\n\t\t    \t\t\tlisteners: {\n\t\t    \t\t\t\tafterrender: function(cmp) {\n\t\t    \t\t\t\t\tcmp.getTargetEl().setStyle(\"cursor\", \"pointer\");\n\t\t\t    \t\t\t\tcmp.getTargetEl().on(\"click\", function(e, t, eOpts) {\n\t    \t\t\t\t\t    \tclearTimeout(this.getMoveWordsTimeout());\n\t\t    \t\t\t\t\t\tthis.getWords().forEach(function(word) {\n\n\t\t    \t\t\t\t\t\t\tif (word.svg) {\n\t\t    \t\t\t\t\t\t\t\tword.svg.remove();\n\t\t    \t\t\t\t\t\t\t\tdelete word.svg;\n\t\t    \t\t\t\t\t\t\t}\n\t\t    \t\t\t\t\t\t\tword.direction = -1; // reset\n\t\t    \t\t\t\t\t\t})\n\t\t    \t\t\t\t\t\tvar pos = Math.floor(e.event.offsetX * this.getWords().length / t.offsetWidth)\n\t\t    \t\t\t\t\t\tthis.moveWords(pos);\n\t\t    \t\t\t\t\t}, this);\n\t\t    \t\t\t\t},\n\t\t    \t\t\t\tscope: this\n\t\t    \t\t\t}\n    \t\t\t\t}]\n    \t\t}],\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n\t            \txtype: 'documentselectorbutton',\n\t            \tsingleSelect: true\n\t            },{\n\t\t\t\t\txtype: 'slider',\n\t\t\t\t\tfieldLabel: this.localize('speed'),\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tlabelWidth: 40,\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tincrement: 1,\n\t\t\t\t\tminValue: 1,\n\t\t\t\t\tmaxValue: 60,\n\t\t\t\t\tvalue: 30,\n\t\t\t\t\tlisteners: {\n\t                \trender: function(cmp) {\n\t                \t\tcmp.setValue(parseInt(this.getApiParam(\"speed\")));\n\t                \t\tif (this.bubbles) {this.bubbles.frameRate(cmp.getValue())}\n\t                \t\tthis.setAudio(cmp.getValue());\n\t    \t\t        \tExt.tip.QuickTipManager.register({\n\t    \t\t        \t\ttarget: cmp.getEl(),\n\t   \t\t                 \ttext: this.localize('speedTip')\n\t    \t\t        \t});\n\t                \t\t\n\t                \t},\n\t                \tbeforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n\t                    changecomplete: function(cmp, val) {\n\t                    \tthis.setApiParam('speed', val);\n\t                \t\tif (this.bubbles) {this.bubbles.frameRate(val)}\n\t                    },\n\t                    scope: this\n\t\t\t\t\t}\n\t\t\t\t}]\n    \t\t}]\n    \t});\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tthis.loadDocument();\n    \t}, this);\n    \t\n    },\n    \n    loadDocument: function() {\n    \tvar me = this;\n    \tvar docIndex = parseInt(this.getApiParam('docIndex')) || 0;\n    \tthis.getCorpus().getWordsArray({docIndex: docIndex, stopList: 'auto'}).then(function(words) {\n\n    \t\t// fold to lower case\n    \t\tvar lcwords = words.map(function(w) {return w.toLowerCase()});\n    \t\t\n    \t\t// if we don't have any groups of words, form them based on words that are longer than four letters\n    \t\tif (me.getApiParam(\"groups\")==undefined) {\n    \t\t\tvar group = {};\n    \t\t\tlcwords.forEach(function(w) {\n    \t\t\t\tif (w.length>5 && !(w in group)) {\n    \t\t\t\t\tgroup[w] = w.length;\n    \t\t\t\t} \n    \t\t\t});\n    \t\t\tvar maxLen = Math.max.apply(this, Object.values(group))\n    \t\t\tvar lenVal = d3.scaleLinear().domain([4,maxLen]).range([.5,1])\n    \t\t\tfor (var w in group) {\n    \t\t\t\tgroup[w] = lenVal(group[w]); // convert length to val between 0 and 1\n    \t\t\t}\n    \t\t\tme.setGroups({length: {\n    \t\t\t\tcolor: me.getApplication().getColorForTerm(\"length\"),\n    \t\t\t\tterms: group\n    \t\t\t}})\n    \t\t}\n\n    \t\tvar el = me.getComponent('fountain').getTargetEl();\n\t\t\tvar svgEl = el.down(\"svg\");\n    \t\tsvgEl.set({width: el.getWidth(), height: el.getHeight()});\n    \t\tvar svgDom = svgEl.dom\n    \t\tvar svg = d3.select(svgDom);\n    \t\tsvg.selectAll(\"*\").remove(); // clear\n    \t\t\n    \t\t// create words and set min height (highest point)\n    \t\tvar types = {};\n    \t\tvar groups = me.getGroups();\n\n    \t\tme.setWords(words.slice(0,1000).map(function(w) {\n    \t\t\tvar word = new me.FountainWord(w.toLowerCase());\n    \t\t\tif (word.word in types) {types[word.word]++}\n    \t\t\telse {types[word.word]=1;}\n    \t\t\tword.min = parseInt(Math.random()*svgDom.clientHeight*.05);\n    \t\t\tvar yshift = Math.sqrt(Math.random()*10)\n    \t\t\tword.yshift = Math.random()*2<1 ? - yshift : yshift;\n    \t\t\tword.jump = svgDom.clientHeight/10\n    \t\t\tword.groupVals = {};\n    \t\t\tfor (var g in groups) {\n    \t\t\t\tif (word.word in groups[g].terms) {\n    \t\t\t\t\tword.groupVals[g] = groups[g].terms[word.word]\n    \t\t\t\t}\n    \t\t\t}\n    \t\t\treturn word;\n    \t\t}));\n    \t\tvar max = Math.max.apply(this, Object.values(types));\n    \t\tvar fontSize = d3.scaleLog().domain([1,Math.max.apply(this, Object.values(types))]).range([4,12]);\n    \t\tme.getWords().forEach(function(word) {\n    \t\t\tword.fontSize = fontSize(types[word.word])\n    \t\t})\n    \t\tme.moveWords();\n    \t})\n    },\n    \n    FountainWord: function(word) {\n    \tthis.word = word;\n    \tthis.direction = -1;\n    },\n    \n    moveWords: function(until) {\n\n    \tvar words = this.getWords(),\n    \t\tsvg = this.getComponent('fountain').getTargetEl().down(\"svg\").dom,\n\t\t\theight = svg.clientHeight,\n\t\t\twidth = svg.clientWidth,\n\t\t\tgroups = this.getGroups();\n\t\tvar opacity = d3.scaleLinear().domain([0,height]).range([1,0]);\n\n\t\tvar gaugeVals = [];\n\t\tvar seen = 0;\n    \tfor (var i=0; i<words.length; i++) {\n    \t\tseen++;\n    \t\t\n\t\t\t// make sure to count group hits for all words since start to current point\n\t\t\tif (Object.keys(words[i].groupVals).length==0) {\n\t\t\t\tgaugeVals.push(0)\n\t\t\t} else {\n\t\t\t\tObject.values(words[i].groupVals).forEach(function(val) {\n\t\t\t\t\tgaugeVals.push(val);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n    \t\tif (words[i].direction<0) { // going up\n    \t\t\t\n\t\t\t\t\n    \t\t\tif (!words[i].svg) {\n    \t    \t\tvar word = d3.select(svg)\n    \t    \t\t\t.append(\"text\")\n    \t    \t\t\t.text(words[i].word)\n    \t    \t\t\t.attr(\"font-size\", words[i].fontSize)\n    \t    \t\t\t.attr(\"text-anchor\", \"middle\")\n    \t    \t\t\t.attr(\"x\", width/2)\n    \t    \t\t\t.attr(\"y\", height-(Math.random()*height)/5)\n    \t    \t\t\t.attr(\"fill\", Object.keys(words[i].groupVals).length==0 ? \"black\" : this.getApplication().getColorForTerm(Object.keys(words[i].groupVals).shift(), true));\n    \t    \t\twords[i].ys = [height];\n    \t    \t\twords[i].svg = word;\n    \t    \t\tif (!until || i>until) {\n    \t    \t\t\tbreak;\n    \t    \t\t}\n    \t\t\t} else {\n    \t\t\t\tvar y = parseInt(words[i].svg.attr(\"y\"));\n        \t\t\tvar delta = y-words[i].min;\n        \t\t\tvar change = delta/5\n        \t\t\twords[i].svg.attr(\"y\", y-change);\n        \t\t\twords[i].svg.attr(\"x\", parseInt(words[i].svg.attr(\"x\"))+words[i].yshift);\n        \t\t\ty = parseInt(words[i].svg.attr(\"y\"))\n        \t\t\twords[i].ys.push(y);\n        \t\t\tif (y<=words[i].min) {\n        \t\t\t\twords[i].direction = 1;\n        \t\t\t}\n    \t\t\t}\n    \t\t\t\n    \t\t} else if (words[i].direction>0) { // going down\n    \t\t\tif (words[i].svg && words[i].ys.length>0) {\n        \t\t\twords[i].svg.attr(\"y\", words[i].ys.pop());\n        \t\t\twords[i].svg.attr(\"x\", parseInt(words[i].svg.attr(\"x\"))+words[i].yshift);\n        \t\t\twords[i].svg.attr(\"opacity\", opacity(parseInt(words[i].svg.attr(\"y\"))));\n    \t\t\t\t\n    \t\t\t} else {\n    \t\t\t\twords[i].direction = 0;\n    \t\t\t}\n    \t\t} else {\n    \t\t\tif (\"svg\" in words[i]) {\n    \t\t\t\twords[i].svg.remove()\n    \t\t\t\tdelete words[i].svg\n    \t\t\t}\n    \t\t}\n    \t\t\n    \t}\n\n    \tvar avg = gaugeVals.length==0 ? 0 : Ext.mean(gaugeVals)*100;\n    \tvar polar = this.down(\"polar\")\n    \tpolar.getStore().getAt(0).set(\"val\", avg)\n    \tpolar.setSprites({\n            type: 'text',\n            text: Ext.util.Format.number(avg, '%0.0'),\n            x: 145,\n            y: 240\n        });\n    \tvar sparkline = this.down(\"sparklineline\");\n    \tsparkline.setValues(gaugeVals.length>100 ? this.chunkify(gaugeVals, 100, true).map(function(vals) {return Ext.mean(vals)}) : gaugeVals);\n    \tsparkline.setWidth(seen*sparkline.ownerCt.getWidth()/words.length)\n    \t\n    \tthis.setMoveWordsTimeout(Ext.defer(this.moveWords, 100, this));\n    },\n    \n    // https://stackoverflow.com/questions/8188548/splitting-a-js-array-into-n-arrays\n    chunkify: function(a, n, balanced) {\n        if (n < 2)\n            return [a];\n\n        var len = a.length,\n                out = [],\n                i = 0,\n                size;\n\n        if (len % n === 0) {\n            size = Math.floor(len / n);\n            while (i < len) {\n                out.push(a.slice(i, i += size));\n            }\n        }\n\n        else if (balanced) {\n            while (i < len) {\n                size = Math.ceil((len - i) / n--);\n                out.push(a.slice(i, i += size));\n            }\n        }\n\n        else {\n\n            n--;\n            size = Math.floor(len / n);\n            if (len % size === 0)\n                size--;\n            while (i < size * n) {\n                out.push(a.slice(i, i += size));\n            }\n            out.push(a.slice(size * n));\n\n        }\n\n        return out;    \t\n    },\n    \n    initComponent: function() {\n    \tthis.callParent(arguments);\n    }\n});","/**\n * RezoViz represents connections between people, places and organizations that co-occur in multiple documents.\n *\n * @example\n *\n * let config = {\n * \t\"docId\": null,\n * \t\"limit\": null,\n * \t\"minEdgeCount\": null,\n * \t\"nerService\": null,\n * \t\"type\": null,\n * };\n *\n * loadCorpus(\"austen\").tool(\"rezoviz\", config);\n *\n * @class RezoViz\n * @tutorial rezoviz\n * @memberof Tools\n */\nExt.define('Voyant.panel.RezoViz', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.rezoviz',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttimedOut: 'The entities call took too long and has timed out. Retry?',\n\t\t\tmaxLinks: 'Max. Links',\n\t\t\tnerService: 'Entity Identification Service'\n\t\t},\n\t\tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.RezoViz\n\t\t\t * @instance\n\t\t\t * @property {limit}\n\t\t\t * @default\n\t\t\t */\n\t\t\tlimit: 50,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.RezoViz\n\t\t\t * @instance\n\t\t\t * @property {String[]} type The entity types to include in the results. One or more of: 'location', 'organization', 'person'.\n\t\t\t */\n\t\t\ttype: ['organization','location','person'],\n\n\t\t\t/**\n\t\t\t * @memberof Tools.RezoViz\n\t\t\t * @instance\n\t\t\t * @property {Number} minEdgeCount\n\t\t\t */\n\t\t\tminEdgeCount: 2,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.RezoViz\n\t\t\t * @instance\n\t\t\t * @property {docId}\n\t\t\t */\n\t\t\tdocId: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.RezoViz\n\t\t\t * @instance\n\t\t\t * @property {String} nerService Which NER service to use: 'spacy', 'nssi', or 'voyant'.\n\t\t\t * @default\n\t\t\t */\n\t\t\tnerService: 'spacy'\n\t\t},\n\t\tglyph: 'xf1e0@FontAwesome'\n\t},\n\t\n\tconfig: {\n\t\tgraphStyle: {\n\t\t\tlink: {\n\t\t\t\tnormal: {\n\t\t\t\t\tstroke: '#000000',\n\t\t\t\t\tstrokeOpacity: 0.1\n\t\t\t\t},\n\t\t\t\thighlight: {\n\t\t\t\t\tstroke: '#000000',\n\t\t\t\t\tstrokeOpacity: 0.5\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t\n\tconstructor: function(config) {\n\t\tthis.callParent(arguments);\n\t\tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\t\n\tinitComponent: function() {\n\t\tvar me = this;\n\n\t\tvar graphStyle = {};\n\t\tvar entityTypes = ['person', 'location', 'organization'];\n\t\tentityTypes.forEach(function(entityType) {\n\t\t\tvar baseColor = me.getApplication().getColorForEntityType(entityType, true);\n\t\t\tvar nFill = d3.hsl(baseColor);\n\t\t\tnFill.s *= .85;\n\t\t\tnFill.l *= 1.15;\n\t\t\tvar nStroke = d3.hsl(baseColor);\n\t\t\tnStroke.s *= .85;\n\t\t\tvar hFill = d3.hsl(baseColor);\n\t\t\tvar hStroke = d3.hsl(baseColor);\n\t\t\thStroke.l *= .75;\n\t\t\tgraphStyle[entityType+'Node'] = {\n\t\t\t\tnormal: {\n\t\t\t\t\tfill: nFill.toString(),\n\t\t\t\t\tstroke: nStroke.toString()\n\t\t\t\t},\n\t\t\t\thighlight: {\n\t\t\t\t\tfill: hFill.toString(),\n\t\t\t\t\tstroke: hStroke.toString()\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.setGraphStyle(Ext.apply(this.getGraphStyle(), graphStyle));\n\n\t\tExt.apply(me, {\n\t\t\ttitle: this.localize('title'),\n\t\t\tlayout: 'fit',\n\t\t\titems: {\n\t\t\t\txtype: 'voyantnetworkgraph',\n\t\t\t\tapplyNodeStyle: function(sel, nodeState) {\n\t\t\t\t\tvar state = nodeState === undefined ? 'normal' : nodeState;\n\t\t\t\t\tvar style = this.getGraphStyle().node[state];\n\t\t\t\t\tsel.selectAll('rect')\n\t\t\t\t\t\t.style('fill', function(d) { var type = d.type+'Node'; return me.getGraphStyle()[type][state].fill; })\n\t\t\t\t\t\t.style('stroke', function(d) { var type = d.type+'Node'; return me.getGraphStyle()[type][state].stroke; });\n\t\t\t\t},\n\t\t\t\tlisteners: {\n\t\t\t\t\tnodeclicked: function(graph, node) {\n\t\t\t\t\t\tme.dispatchEvent('termsClicked', me, [node.term]);\n\t\t\t\t\t},\n\t\t\t\t\tedgeclicked: function(graph, edge) {\n\t\t\t\t\t\tme.dispatchEvent('termsClicked', me, ['\"'+edge.source.term+' '+edge.target.term+'\"~'+me.getApiParam('context')]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdockedItems: [{\n\t\t\t\tdock: 'bottom',\n\t\t\t\txtype: 'toolbar',\n\t\t\t\toverflowHandler: 'scroller',\n\t\t\t\titems: [{\n\t\t\t\t\txtype: 'corpusdocumentselector'\n\t\t\t\t},{\n\t\t\t\t\txtype: 'button',\n\t\t\t\t\ttext: this.localize('categories'),\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\txtype: 'menucheckitem',\n\t\t\t\t\t\t\ttext: this.localize('people'),\n\t\t\t\t\t\t\titemId: 'person',\n\t\t\t\t\t\t\tchecked: true\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\txtype: 'menucheckitem',\n\t\t\t\t\t\t\ttext: this.localize('locations'),\n\t\t\t\t\t\t\titemId: 'location',\n\t\t\t\t\t\t\tchecked: true\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\txtype: 'menucheckitem',\n\t\t\t\t\t\t\ttext: this.localize('organizations'),\n\t\t\t\t\t\t\titemId: 'organization',\n\t\t\t\t\t\t\tchecked: true\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\t\ttext: this.localize('reload'),\n\t\t\t\t\t\t\tstyle: 'margin: 5px;',\n\t\t\t\t\t\t\thandler: this.categoriesHandler,\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: 'button',\n\t\t\t\t\ttext: this.localize('nerService'),\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\txtype: 'menucheckitem',\n\t\t\t\t\t\t\tgroup: 'nerService',\n\t\t\t\t\t\t\ttext: 'SpaCy',\n\t\t\t\t\t\t\titemId: 'spacy',\n\t\t\t\t\t\t\tchecked: true,\n\t\t\t\t\t\t\thandler: this.serviceHandler,\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\txtype: 'menucheckitem',\n\t\t\t\t\t\t\tgroup: 'nerService',\n\t\t\t\t\t\t\ttext: 'NSSI',\n\t\t\t\t\t\t\titemId: 'nssi',\n\t\t\t\t\t\t\tchecked: true,\n\t\t\t\t\t\t\thandler: this.serviceHandler,\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\txtype: 'menucheckitem',\n\t\t\t\t\t\t\tgroup: 'nerService',\n\t\t\t\t\t\t\ttext: 'Voyant',\n\t\t\t\t\t\t\titemId: 'voyant',\n\t\t\t\t\t\t\tchecked: false,\n\t\t\t\t\t\t\thandler: this.serviceHandler,\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: 'numberfield',\n\t\t\t\t\titemId: 'minEdgeCount',\n\t\t\t\t\tfieldLabel: this.localize('minEdgeCount'),\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tlabelWidth: 120,\n\t\t\t\t\twidth: 170,\n\t\t\t\t\tmaxValue: 10,\n\t\t\t\t\tminValue: 1,\n\t\t\t\t\tallowDecimals: false,\n\t\t\t\t\tallowExponential: false,\n\t\t\t\t\tallowOnlyWhitespace: false,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\trender: function(field) {\n\t\t\t\t\t\t\tfield.setRawValue(this.getApiParam('minEdgeCount'));\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchange: function(field, newVal) {\n\t\t\t\t\t\t\tif (field.isValid()) {\n\t\t\t\t\t\t\t\tthis.setApiParam('minEdgeCount', newVal);\n\t\t\t\t\t\t\t\tthis.preloadEntities();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: 'slider',\n\t\t\t\t\tfieldLabel: this.localize('maxLinks'),\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\twidth: 170,\n\t\t\t\t\tminValue: 10,\n\t\t\t\t\tmaxValue: 1000,\n\t\t\t\t\tincrement: 10,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\trender: function(field) {\n\t\t\t\t\t\t\tfield.setValue(this.getApiParam('limit'));\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchangecomplete: function(field, newVal) {\n\t\t\t\t\t\t\tthis.setApiParam('limit', newVal);\n\t\t\t\t\t\t\tthis.preloadEntities();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tentityResults: function(src, entities) {\n\t\t\t\t\tthis.getEntities();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.on('loadedCorpus', function(src, corpus) {\n\t\t\tif (this.isVisible()) {\n\t\t\t\tthis.preloadEntities();\n\t\t\t}\n\t\t}, this);\n\n\t\tthis.on('corpusSelected', function(src, corpus) {\n\t\t\tthis.setApiParam('docId', undefined);\n\t\t\tthis.preloadEntities();\n\t\t}, this);\n\t\tthis.on('documentsSelected', function(src, docIds) {\n\t\t\tthis.setApiParam('docId', docIds);\n\t\t\tthis.preloadEntities();\n\t\t}, this);\n\t\t\n\t\tthis.on('activate', function() { // load after tab activate (if we're in a tab panel)\n\t\t\tif (this.getCorpus()) {\n\t\t\t\t// only preloadEntities if there isn't already data\n\t\t\t\tif (this.down('voyantnetworkgraph').getNodeData().length === 0) {\n\t\t\t\t\tExt.Function.defer(this.preloadEntities, 100, this);\n\t\t\t\t}\n\t\t\t}\n\t\t}, this);\n\t\t\n\t\tme.callParent(arguments);\n\n\t},\n\n\tcategoriesHandler: function(item) {\n\t\tvar categories = [];\n\t\titem.up('menu').items.each(function(checkitem) {\n\t\t\tif (checkitem.checked) {\n\t\t\t\tcategories.push(checkitem.itemId);\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.setApiParam('type', categories);\n\t\tthis.preloadEntities();\n\t},\n\n\tserviceHandler: function(menuitem) {\n\t\tthis.setApiParam('nerService', menuitem.itemId);\n\t\tthis.preloadEntities();\n\t},\n\n\tpreloadEntities: function() {\n\t\tvar types = this.getApiParam('type');\n\t\tif (this.getApiParam('nerService') === 'spacy') {\n\t\t\ttypes = types.map(function(type) {\n\t\t\t\treturn Voyant.data.util.DocumentEntities.getSpacyTypesFromStanfordType(type);\n\t\t\t}, this).flat();\n\t\t\tthis.setApiParam('type', types);\n\t\t}\n\t\tnew Voyant.data.util.DocumentEntities({annotator: this.getApiParam('nerService')});\n\t},\n\n\tgetEntities: function() {\n\t\tthis.down('voyantnetworkgraph').resetGraph();\n\n\t\tvar el = this.getLayout().getRenderTarget();\n\t\tel.mask(this.localize('loadingEntities'));\n\n\t\tExt.Ajax.request({\n\t\t\turl: this.getApplication().getTromboneUrl(),\n\t\t\tmethod: 'POST',\n\t\t\tparams: {\n\t\t\t\ttool: 'corpus.EntityCollocationsGraph',\n\t\t\t\tannotator: this.getApiParam('nerService'),\n\t\t\t\ttype: this.getApiParam('type'),\n\t\t\t\tlimit: this.getApiParam('limit'),\n\t\t\t\tminEdgeCount: this.getApiParam('minEdgeCount'),\n\t\t\t\tcorpus: this.getCorpus().getId(),\n\t\t\t\tdocId: this.getApiParam('docId'),\n\t\t\t\tnoCache: true\n\t\t\t},\n\t\t\ttimeout: 120000,\n\t\t\tsuccess: function(response) {\n\t\t\t\tel.unmask();\n\t\t\t\tvar obj = Ext.decode(response.responseText);\n\t\t\t\tif (obj.entityCollocationsGraph.edges.length==0) {\n\t\t\t\t\tthis.showError({msg: this.localize('noEntities')});\n\t\t\t\t\tvar currMinEdgeCount = this.getApiParam('minEdgeCount');\n\t\t\t\t\tif (currMinEdgeCount > 1) {\n\t\t\t\t\t\tExt.Msg.confirm(this.localize('error'), this.localize('noEntitiesForEdgeCount'), function(button) {\n\t\t\t\t\t\t\tif (button === 'yes') {\n\t\t\t\t\t\t\t\tvar newEdgeCount = Math.max(1, currMinEdgeCount-1);\n\t\t\t\t\t\t\t\tthis.queryById('minEdgeCount').setRawValue(newEdgeCount);\n\t\t\t\t\t\t\t\tthis.setApiParam('minEdgeCount', newEdgeCount);\n\t\t\t\t\t\t\t\tthis.preloadEntities();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.processEntities(obj.entityCollocationsGraph);\n\t\t\t\t}\n\t\t\t},\n\t\t\tfailure: function(response) {\n\t\t\t\tel.unmask();\n\t\t\t\tExt.Msg.confirm(this.localize('error'), this.localize('timedOut'), function(button) {\n\t\t\t\t\tif (button === 'yes') {\n\t\t\t\t\t\tthis.preloadEntities();\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t},\n\t\t\tscope: this\n\t\t});\n\t},\n\n\tprocessEntities: function(entityParent) {\n\t\tvar nodes = entityParent.nodes;\n\t\tvar edges = entityParent.edges;\n\t\t\n\t\tvar el = this.getLayout().getRenderTarget();\n\t\tvar cX = el.getWidth()/2;\n\t\tvar cY = el.getHeight()/2;\n\n\t\tvar visNodes = [];\n\t\tfor (var i = 0; i < nodes.length; i++) {\n\t\t\tvar n = nodes[i];\n\n\t\t\tvar type = n.type;\n\t\t\tif (this.getApiParam('nerService') === 'spacy') {\n\t\t\t\ttype = Voyant.data.util.DocumentEntities.getStanfordTypeFromSpacyType(n.type);\n\t\t\t}\n\t\t\tvisNodes.push({\n\t\t\t\tterm: n.term,\n\t\t\t\ttitle: n.term + ' ('+n.rawFreq+')',\n\t\t\t\ttype: type,\n\t\t\t\tvalue: n.rawFreq,\n\t\t\t\tfixed: false,\n\t\t\t\tx: cX,\n\t\t\t\ty: cY\n\t\t\t});\n\t\t}\n\t\t\n\t\tvar visEdges = [];\n\t\tfor (var i = 0; i < edges.length; i++) {\n\t\t\tvar link = edges[i].nodes;\n\n\t\t\tvar sourceId = nodes[link[0]].term;\n\t\t\tvar targetId = nodes[link[1]].term;\n\t\t\tvisEdges.push({\n\t\t\t\tsource: sourceId,\n\t\t\t\ttarget: targetId,\n\t\t\t\trawFreq: nodes[link[1]].rawFreq // TODO\n\t\t\t});\n\t\t}\n\n\t\tthis.down('voyantnetworkgraph').loadJson({nodes: visNodes, edges: visEdges});\n\t}\n\t\n});\n","Ext.define('Voyant.panel.Loom', {\n    extend: 'Ext.panel.Panel',\n    mixins: ['Voyant.panel.Panel'],\n    alias: 'widget.loom',\n    statics: {\n        i18n: {\n        \ttitle: \"Loom\",\n        \tcontrols: \"Controls\",\n        \tfrequenciesGroup: \"Frequencies\",\n        \tcoverageGroup: \"Coverage\",\n        \tdistributionsGroup: \"Distribution\",\n        \ttermsGroup: \"Terms\",\n        \tinDocumentsLabel: \"in documents\",\n        \tinDocumentsLabelTip: \"each term must be present in the number of documents defined by this range\",\n        \tspanSomeLabel: \"some documents\",\n        \tspanSomeLabelTip: \"each term must be present in at least one document defined by this range\",\n        \tspanAllLabel: \"all documents\",\n        \tspanAllLabelTip: \"each term must be present in all documents defined by this range\",\n        \tspanOnlyLabel: \"only documents\",\n        \tspanOnlyLabelTip: \"each term must be present in only the documents defined by this range\",\n        \trawFreqLabel: \"raw frequency\",\n        \trawFreqLabelTip: \"raw term frequencies for the term must be between these values (inclusively)\",\n        \trawFreqPercentileLabel: \"raw frequency percentile\",\n        \trawFreqPercentileLabelTip: \"raw term frequencies for the term must be between these percentile values (inclusively), this is useful for saying something like terms in the top 90th percentile which will provide 10% of words regardless of the variation in values.\",\n        \tdistributionsStdDevLabel: \"standard deviation of distributions\",\n        \tdistributionsStdDevLabelTip: \"the standard deviation of term distribution scores must be between the defined range of values (lower will be for values that are more consistent, higher will be for values that have greater variability)\",\n        \tdistributionsStdDevPercentileLabel: \"percentile of standard deviations of distributions\",\n        \tdistributionsStdDevPercentileLabelTip: \"the percentile of standard deviations of distributions must be between the defined range of values (lower will be for values that are more consistent, higher will be for values that have greater variability)\",\n        \ttermsLengthLabel: \"term length\",\n        \ttermsLengthLabelTip: \"the length (number of characters) of the term (word)\",\n        \ttermsLengthPercentileLabel: \"term length percentile\",\n        \ttermsLengthPercentileLabelTip: \"the percentile of the length (number of characters) of the term (word)\",\n        \tdistributionIncreasesLabel: \"increases in distribution values\",\n        \tdistributionIncreasesLabelTip: \"the number of increases of the distribution values must be between the defined range (inclusively)\",\n        \tdistributionConsecutiveIncreasesLabel: \"consecutive decreases in distribution values\",\n        \tdistributionConsecutiveIncreasesLabelTip: \"the number of consecutive decreases of the distribution values must be between the defined range (inclusively)\",\n        \tdistributionDecreasesLabel: \"decreases in distribution values\",\n        \tdistributionDecreasesLabelTip: \"the number of decreases of the distribution values must be between the defined range (inclusively)\",\n        \tdistributionConsecutiveDecreasesLabel: \"consecutive decreases in distribution values\",\n        \tdistributionConsecutiveDecreasesLabelTip: \"the number of consecutive decreases of the distribution values must be between the defined range (inclusively)\",\n        \tdistributionMaxLabel: \"distribution maximum\",\n        \tdistributionMaxLabelTip: \"the maximum of the distribution values must be between the defined range (inclusively)\",\n        \tdistributionMinLabel: \"distribution minimum\",\n        \tdistributionMinLabelTip: \"the minimum of the distribution values must be between the defined range (inclusively)\",\n        \tpresetsGroup: \"pre-sets\",\n        \tpresetHighFreq: \"terms that are high frequency\",\n        \tpresetHighFreqLonger: \"terms that are longer and high frequency\",\n        \tpresetSingleDoc: \"higher frequency terms that only occur once\",\n        \tpresetIncreaseDistributions: \"terms that generally increase in frequency\",\n        \tpresetDecreaseDistributions: \"terms that generally decrease in frequency \",\n        \tpresetNearStartDistributions: \"terms that peak in distribution toward the beginning \",\n        \tpresetNearEndDistributions: \"terms that peak in distribution toward the end \",\n        \tpresetSporadicDistributions: \"terms whose distributions vary the most\",\n        \tvisibleTerms: \"max terms\",\n        \tscaling: \"scaling\",\n        \tscaleLinear: \"linear\",\n        \tscaleLog: \"logarithmic\",\n        \tscaleSqrt: \"square root\"\n        \t\n        },\n        api: {\n            limit: 500,\n            stopList: 'auto',\n            inDocuments: undefined,\n            spanSome: undefined,\n            spanAll: undefined,\n            spanOnly: undefined,\n            termLength: undefined,\n            termsLengthPercentile: undefined,\n            rawFreq: undefined,\n            rawFreqPercentile: undefined,\n            distributionsStdDev: undefined,\n            distributionsStdDevPercentile: undefined,\n            distributionIncreases: undefined,\n            distributionDecreases: undefined,\n            distributionConsecutiveIncreases: undefined,\n            distributionConsecutiveDecreases: undefined,\n            distributionMax: undefined,\n            distributionMin: undefined,\n            scaling: 'linear'\n        },\n        glyph: 'xf1e0@FontAwesome'\n    },\n    \n    config: {\n    \tstore: undefined,\n    \tterms: undefined,\n    \toptions: [\n    \t\t{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}\n    \t],\n    \tcontrols: undefined\n    },\n\n\n    constructor: function(config) {\n        this.callParent(arguments);\n        this.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n        \n    initComponent: function() {\n    \t\n        this.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // we need api\n        \n    \tvar controls = new Ext.util.MixedCollection({\n    \t\tallowFunctions: true\n    \t});\n    \tcontrols.addAll({\n    \t\tinDocuments: new Voyant.util.LoomControl({\n\t    \t\tgroup: 'coverage',\n\t    \t\tname: 'inDocuments',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMin(1);\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar count = record.getDistributions().filter(function(val) {return val>0}).length;\n\t        \t\treturn count >= this.getLow() && count <= this.getHigh();\n\t        \t}\n    \t\t}),\n    \t\tspanSome :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'coverage',\n\t    \t\tname: 'spanSome',\n\t    \t\toffsetTipText: true,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length-1);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tfor (var i=low; i<high+1; i++) {\n\t        \t\t\tif (vals[i]>0) {return true}\n\t        \t\t}\n\t        \t\treturn false;\n\t        \t}\n    \t\t}),\n    \t\tspanAll :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'coverage',\n\t    \t\tname: 'spanAll',\n\t    \t\toffsetTipText: true,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length-1);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tfor (var i=low; i<high+1; i++) {\n\t        \t\t\tif (vals[i]==0) {return false}\n\t        \t\t}\n\t        \t\treturn true;\n\t        \t}\n    \t\t}),\n    \t\tspanOnly :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'coverage',\n\t    \t\tname: 'spanOnly',\n\t    \t\toffsetTipText: true,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length-1);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tfor (var i=0; i<vals.length; i++) {\n\t        \t\t\tif (i<low || i>high) {\n\t        \t\t\t\tif (vals[i]>0) {return false}\n\t        \t\t\t} else {\n\t        \t\t\t\tif (vals[i]==0) {return false}\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\treturn true;\n\t        \t}\n    \t\t}),\n    \t\trawFreq :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'frequencies',\n\t    \t\tname: 'rawFreq',\n\t    \t\toffsetTipText: true,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tvar vals = store.getRange().map(function(r) {return r.get('rawFreq')});\n\t    \t\t\tthis.setMin(Ext.Array.min(vals))\n\t    \t\t\tthis.setMax(Ext.Array.max(vals))\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), val = record.get(\"rawFreq\");\n\t        \t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\trawFreqPercentile :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'frequencies',\n\t    \t\tname: 'rawFreqPercentile',\n\t    \t\tmin: 0,\n\t    \t\tmax: 100,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.vals = store.getRange().map(function(r) {return r.get('rawFreq')});\n\t    \t\t\tthis.vals.sort(function (a, b) {  return a - b;  });\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(),\n\t        \t\t\tind = Ext.Array.indexOf(this.vals, record.get(\"rawFreq\")),\n\t        \t\t\tval = Math.round(ind*100/this.vals.length)\n\t        \t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\tdistributionsStdDev :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'frequencies',\n\t    \t\tname: 'distributionsStdDev',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tvar allvals = Ext.Array.flatten(store.getRange().map(function(r) {return r.getDistributions()}));\n\t    \t\t\t// we'll scale to all available distributions, otherwise we're not making similar comparisons\n\t    \t\t\tvar scale = d3.scaleLinear().domain([d3.min(allvals),d3.max(allvals)]).range([0,100]);\n\t    \t\t\tstore.each(function(record) {\n\t    \t\t\t\tif (record.get(\"distributionsStdDev\")===undefined) {\n\t    \t\t\t\t\t// https://derickbailey.com/2014/09/21/calculating-standard-deviation-with-array-map-and-array-reduce-in-javascript/\n\t    \t\t\t\t\t// https://gist.github.com/Daniel-Hug/7273430\n\t\t    \t\t\t\tvar vals = record.getDistributions();\n\t\t    \t\t\t\tvar scaledVals = vals.map(function(v) {return scale(v)});\n\t\t    \t\t\t\tvar avg = Ext.Array.mean(scaledVals);\n\t\t\t\t\t\t\tvar squareDiffs = vals.map(function(value){\n\t\t\t\t\t\t\t\t    var diff = value - avg;\n\t\t\t\t\t\t\t\t    var sqrDiff = diff * diff;\n\t\t\t\t\t\t\t\t    return sqrDiff;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar avgSquareDiff = Ext.Array.mean(squareDiffs);\n\t\t\t\t\t\t\tvar stdDev = Math.sqrt(avgSquareDiff);\n\t\t\t\t\t\t\trecord.set(\"distributionsStdDev\", stdDev);\n\t    \t\t\t\t}\n\t    \t\t\t})\n\t    \t\t\tvar vals = store.getRange().map(function(r) {return r.get('distributionsStdDev')});\n\t    \t\t\tthis.setMin(Ext.Array.min(vals))\n\t    \t\t\tthis.setMax(Ext.Array.max(vals))\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(),\n\t        \t\t\tval = record.get(\"distributionsStdDev\");\n\t        \t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\tdistributionsStdDevPercentile :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'frequencies',\n\t    \t\tname: 'distributionsStdDevPercentile',\n\t    \t\tmin: 0,\n\t    \t\tmax: 100,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.vals = store.getRange().map(function(r) {return r.get('distributionsStdDev')});\n\t    \t\t\tthis.vals.sort(function (a, b) {  return a - b;  });\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(),\n        \t\t\t\tind = Ext.Array.indexOf(this.vals, record.get(\"distributionsStdDev\")),\n        \t\t\t\tval = Math.round(ind*100/this.vals.length)\n        \t\t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\ttermsLength :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'terms',\n\t    \t\tname: 'termsLength',\n\t    \t\toffsetTipText: true,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tvar vals = store.getRange().map(function(r) {return r.get('term').length});\n\t    \t\t\tthis.setMin(Ext.Array.min(vals))\n\t    \t\t\tthis.setMax(Ext.Array.max(vals))\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), val = record.get(\"term\").length;\n\t        \t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\ttermsLengthPercentile :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'terms',\n\t    \t\tname: 'termsLengthPercentile',\n\t    \t\tmin: 0,\n\t    \t\tmax: 100,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.vals = store.getRange().map(function(r) {return r.get('term').length});\n\t    \t\t\tthis.vals.sort(function (a, b) {  return a - b;  });\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(),\n        \t\t\t\tind = Ext.Array.indexOf(this.vals, record.get(\"term\").length),\n        \t\t\t\tval = Math.round(ind*100/this.vals.length)\n        \t\t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\tdistributionIncreases :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionIncreases',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tvar increases = 0;\n\t        \t\tfor (var i=1;i<vals.length;i++) {\n\t        \t\t\tif (vals[i]>vals[i-1]) {\n\t        \t\t\t\tincreases++;\n\t        \t\t\t\tif (increases>high) {return false}\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\treturn increases>=low;\n\t        \t}\n    \t\t}),\n    \t\tdistributionConsecutiveIncreases :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionConsecutiveIncreases',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tvar increases = 0;\n\t        \t\tfor (var i=1;i<vals.length;i++) {\n\t        \t\t\tif (vals[i]>vals[i-1]) {\n\t        \t\t\t\tincreases++;\n\t        \t\t\t\tif (increases>high) {return false}\n\t        \t\t\t} else {\n\t        \t\t\t\tincreases=0;\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\treturn increases>=low;\n\t        \t}\n    \t\t}),\n    \t\tdistributionDecreases :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionDecreases',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tvar decreases = 0;\n\t        \t\tfor (var i=1;i<vals.length;i++) {\n\t        \t\t\tif (vals[i]<vals[i-1]) {\n\t        \t\t\t\tdecreases++;\n\t        \t\t\t\tif (decreases>high) {return false}\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\treturn decreases>=low;\n\t        \t}\n    \t\t}),\n    \t\tdistributionConsecutiveDecreases :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionConsecutiveDecreases',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tvar decreases = 0;\n\t        \t\tfor (var i=1;i<vals.length;i++) {\n\t        \t\t\tif (vals[i]<vals[i-1]) {\n\t        \t\t\t\tdecreases++;\n\t        \t\t\t\tif (decreases>high) {return false}\n\t        \t\t\t} else {\n\t        \t\t\t\tdecreases = 0;\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\treturn decreases>=low;\n\t        \t}\n    \t\t}),\n    \t\tdistributionMax :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionMax',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions(), val = Ext.Array.max(vals);\n\t        \t\tfor (var i=low;i<high;i++) { // look at every value in case there are duplicate values\n\t        \t\t\tif (vals[i]==val) {return true}\n\t        \t\t}\n\t        \t\treturn false;\n\t        \t}\n    \t\t}),\n    \t\tdistributionMin :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionMin',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions(), val = Ext.Array.min(vals);\n\t        \t\tfor (var i=low;i<high;i++) { // look at every value in case there are duplicate values\n\t        \t\t\tif (vals[i]==val) {return true}\n\t        \t\t}\n\t        \t\treturn false;\n\t        \t}\n    \t\t})\n    \t});\n\n    \tcontrols.each(function(control) {\n    \t\tvar val = this.getApiParam(control.getName()), vals = (val || \"\").split(\",\");\n    \t\tcontrol.setEnabled(val!==undefined);\n    \t\tif (vals.length==2) {\n    \t\t\tcontrol.setLow(parseInt(vals[0]))\n    \t\t\tcontrol.setHigh(parseInt(vals[1]))\n    \t\t}\n    \t\tcontrol.on(\"change\", function(control) {\n    \t\t\tif (control.getEnabled()) {\n    \t\t\t\tthis.setApiParam(control.getName(), control.getLow()+\",\"+control.getHigh());\n    \t\t\t} else {\n    \t\t\t\tthis.setApiParam(control.getName(), undefined);\n    \t\t\t}\n    \t\t\tthis.filterRecords();\n    \t\t}, this);\n    \t}, this);\n\n    \tthis.setControls(controls);\n    \t\n    \t// used below in preset handlers\n    \tvar me = this;\n    \tvar clearApiParamsForControls = function() {\n    \t\tvar currentParams = me.getApiParams();\n    \t\tvar params = {};\n    \t\tme.controls.each(function(control) {\n    \t\t\tcontrol.setEnabled(false, true);\n    \t\t\tvar name = control.getName();\n    \t\t\tif (name in currentParams) {\n    \t\t\t\tme.setApiParam(name, undefined)\n    \t\t\t}\n    \t\t})\n    \t}\n\n    \t\n    \tvar tbitems = [{\n    \t\ttext: this.localize(\"presetsGroup\"),\n    \t\tmenu: {\n    \t\t\titems: [{\n    \t\t\t\ttext: this.localize('presetHighFreq'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t    \tthis.filterRecords();\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetHighFreqLonger'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tthis.controls.getByKey(\"termsLengthPercentile\").setEnabled(true, true).setValues(50,100, true);\n    \t\t\t\t\tthis.controls.getByKey(\"rawFreqPercentile\").setEnabled(true, true).setValues(50,100);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetSingleDoc'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tthis.controls.getByKey(\"inDocuments\").setEnabled(true, true).setValues(1,1);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetIncreaseDistributions'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tvar control = this.controls.getByKey(\"distributionIncreases\");\n    \t\t\t\t\tvar max = control.getMax();\n    \t\t\t\t\tcontrol.setEnabled(true, true).setValues(Math.round(max*.75),max);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetDecreaseDistributions'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tvar control = this.controls.getByKey(\"distributionDecreases\");\n    \t\t\t\t\tvar max = control.getMax();\n    \t\t\t\t\tcontrol.setEnabled(true, true).setValues(Math.round(max*.75),max);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetNearStartDistributions'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tvar control = this.controls.getByKey(\"distributionMax\");\n    \t\t\t\t\tvar max = control.getMax();\n    \t\t\t\t\tcontrol.setEnabled(true, true).setValues(0, Math.round(max*.2));\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetNearEndDistributions'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tvar control = this.controls.getByKey(\"distributionMax\");\n    \t\t\t\t\tvar max = control.getMax();\n    \t\t\t\t\tcontrol.setEnabled(true, true).setValues(Math.round(max*.8), max);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetSporadicDistributions'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tthis.controls.getByKey(\"distributionsStdDevPercentile\").setEnabled(true, true).setValues(80, 100);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t}]\n    \t\t}\n    \t}, {\n    \t\txtype: 'tbspacer'\n    \t}];\n    \t[\"frequencies\",\"coverage\",\"distributions\",\"terms\"].map(function(group) {\n    \t\ttbitems.push({\n    \t\t\ttext: this.localize(group+\"Group\"),\n    \t\t\tmenu: {\n    \t\t\t\titems: controls.filterBy(function(control) {return control.getGroup()==group}).getRange().map(function(control) {\n    \t\t\t\t\treturn {\n    \t\t\t\t\t\txtype: 'menucheckitem',\n    \t\t\t\t\t\tchecked: control.getEnabled(),\n\t\t\t\t\t\t\ttext: this.localize(control.getName()+\"Label\"),\n\t\t\t\t\t\t\ttooltip: this.localize(control.getName()+\"LabelTip\"),\n\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\tbeforerender: function(cmp) {\n\t\t\t\t\t\t\t\t\tcmp.setChecked(control.getEnabled());\n\t\t\t\t\t\t\t\t\tcontrol.on(\"change\", function() {\n\t\t\t\t\t\t\t\t\t\tcmp.setChecked(control.getEnabled());\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tclick: function(cmp) {\n\t\t\t\t\t\t\t\t\tcontrol.setEnabled(cmp.checked)\n\t\t\t\t\t\t\t\t\tcmp.getMenu().setDisabled(!cmp.checked)\n\t\t\t\t\t\t\t\t\tif (cmp.checked) {cmp.getMenu().show();}\n\t\t\t\t\t\t\t\t\telse {cmp.getMenu().hide()}\n\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t},\n\t\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\t\tdisabled: !control.getEnabled(),\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\txtype: 'multislider',\n\t\t\t\t\t\t\t\t\twidth: 100,\n\t\t\t\t\t\t\t\t\tminValue: control.getMin() || 0,\n\t\t\t\t\t\t\t\t\tmaxValue: control.getMax() || 0,\n\t\t\t\t\t\t\t\t\tvalues: [(control.getLow() || 0), (control.getHigh() || 0)],\n\t\t\t\t\t\t\t\t\ttipText: function(t) {\n\t\t\t\t\t\t\t\t\t\treturn control.getOffsetTipText() ? t.value+1 : t.value;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tlisteners: {\n    \t\t\t\t\t\t\t\t\tbeforerender: function(slider) {\n    \t\t\t\t\t\t\t\t\t\tslider.updateFromControl(control);\n    \t\t\t\t\t\t\t\t\t\tcontrol.on(\"change\", function() {\n    \t\t\t\t\t\t\t\t\t\t\tslider.updateFromControl(control);\n    \t\t\t\t\t\t\t\t\t\t})\n    \t\t\t\t\t\t\t\t\t},\n    \t\t\t\t\t\t\t\t\tchangecomplete: function(slider) {\n    \t\t\t\t\t\t\t\t\t\tcontrol.setValues(slider.getValues());\n    \t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tupdateFromControl: function(control) {\n\t\t\t\t\t\t\t\t\t\tthis.setMinValue(control.getMin() || 0);\n\t\t\t\t\t\t\t\t\t\tthis.setMaxValue(control.getMax());\n\t\t\t\t\t\t\t\t\t\tthis.setValue(0, control.getLow() || 0)\n\t\t\t\t\t\t\t\t\t\tthis.setValue(1, control.getHigh()===undefined ? (control.getMax() || 0) : control.getHigh())\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n    \t\t\t\t\t}\n    \t\t\t\t}, this)\n    \t\t\t}\n    \t\t});\n    \t}, this);\n    \t\n        Ext.apply(this, {\n            title: this.localize('title'),\n            layout: {\n            \ttype: 'hbox',\n            \talign: 'stretch'\n            },\n            listeners: {\n            \tafterrender: function() {\n            \t\tvar terms = this.getComponent(\"terms\"), threads = this.getComponent(\"threads\");\n            \t\t\n            \t\t// this is a quick and dirty implementation to mirror actions in the terms panel to the threads panel,\n            \t\t// but it should probably redone locally to the threads logic and using the tips\n            \t\tterms.on(\"termHovered\", function(src, term) {\n            \t\t\tvar thick = threads.getTargetEl().dom.querySelector(\"path[term=\"+term+\"]\");\n            \t\t\tif (thick) {\n                \t\t\tvar fadeIt = function(node, time) {\n                \t\t\t\topacity = node.getAttribute(\"opacity\");\n                \t\t\t\tif (opacity>0) {\n                \t\t\t\t\topacity-=.01;\n                \t\t\t\t\tnode.setAttribute(\"opacity\", opacity)\n                \t\t\t\t\ttime=time/2\n                \t\t\t\t\tExt.defer(fadeIt, time, this, [node, time]);\n                \t\t\t\t}\n                \t\t\t}   \n                \t\t\tthick.setAttribute(\"opacity\", 1);\n                \t\t\tfadeIt(thick, 1000);\n            \t\t\t}\n            \t\t})\n            \t}\n            },\n            items: [{\n            \titemId: 'terms',\n            \twidth: 100,\n            \tlayout: 'fit',\n            \tlisteners: {\n            \t\tfilterchange: function(store) {\n            \t\t\tvar el = this.getTargetEl(), width = el.getWidth(), height = el.getHeight(), len = store.getCount();\n            \t\t\tel.setHtml(\" \")\n            \t\t\tterms = store.getRange().map(function(r,i) {\n            \t\t\t\treturn {\n            \t\t\t\t\tterm: r.getTerm(),\n            \t\t\t\t\tcol: Voyant.application.getColorForTerm(r.getTerm(), true),\n            \t\t\t\t\tx: width/2,\n            \t\t\t\t\ty: i*height/len\n            \t\t\t\t}\n            \t\t\t});\n            \t\t\tterms.sort(function(a, b) {return a.term.localeCompare(b.term)});\n            \t\t\t\n            \t\t\t// attempts to use fisheye code failed with larger number or words http://bl.ocks.org/jczaplew/8603055\n\n            \t\t\t\n            \t\t\t\n          \t\t\t  var svg = d3.select(el.dom).append(\"svg\")\n      \t\t\t    .attr(\"width\", width)\n      \t\t\t    .attr(\"height\", height)\n      \t\t\t  .append(\"g\")\n      \t\t\t    .attr(\"transform\", \"translate(-.5,-.5)\");\n          \t\t\t  \n          \t\t\tvar textHeight = Math.ceil(height/terms.length);\n        \t\t\t  var text = svg.selectAll(\"ytext\")\n      \t\t\t    .data(terms)\n      \t\t\t  .enter().append(\"text\")\n      \t\t\t    .text(function(d,i){return d.term})\n      \t\t\t    .attr(\"class\", \"ytext\") \n      \t\t\t    .attr(\"text-anchor\", \"middle\")\n    \t\t\t  \t.attr(\"x\", width/2)\n    \t\t\t  \t.attr(\"y\", function(t, i) {return textHeight*i})\n      \t\t\t    .attr(\"fill\", function(d) {return Voyant.application.getColorForTerm(d.term, true)})\n\n            \t\t\tvar textHeight = Math.ceil(height/terms.length);\n\n            \t\t\t\n            \t\t\tvar fisheye = d3.fisheye.circular()\n\t            \t\t    .radius(50)\n\t            \t\t    .distortion(2);\n            \t\t\t\n            \t\t\tyFisheye = d3.fisheye.scale(d3.scaleIdentity).domain([0, height]);\n            \t\t\t\n            \t\t\tvar me = this;\n            \t\t\tsvg.on(\"mousemove\", function(event) {\n            \t\t\t\tvar mouse = d3.pointer(event);\n            \t\t\t\t\tcurrentItem = Math.round(mouse[1]*terms.length/height),\n            \t\t\t\t\tcurrentItem = Math.min(currentItem, terms.length-1);\n            \t\t\t\tfisheye.focus(mouse[1]);\n            \t\t\t\tyFisheye.focus(mouse[1]);\n            \t\t\t\t\n            \t\t\tvar nodes = text.nodes();\n            \t\t\tif (nodes[currentItem]) {\n                \t\t\tme.fireEvent(\"termHovered\", me, nodes[currentItem].textContent)\n            \t\t\t}\n            \t\t\t\n            \t\t\tvar fs = 14, y=Math.max(mouse[1],fs), fo=1;\n            \t\t\td3.select(nodes[currentItem])\n            \t\t\t\t.attr(\"y\", function(d) { return y })\n            \t\t\t\t.attr(\"font-size\", fs)\n            \t\t\t\t.attr(\"fill-opacity\", fo)\n            \t\t\t\t\n            \t\t\tvar yin = undefined;\n            \t\t\tfor (var i=currentItem-1;i>-1;i--) {\n            \t\t\t\tif (fs>=8) {\n            \t\t\t\t\ty-=fs\n            \t\t\t\t\tfs-=.5\n            \t\t\t\t} else {\n            \t\t\t\t\tif (yin==undefined) {\n            \t\t\t\t\t\tyin = y/i\n            \t\t\t\t\t}\n            \t\t\t\t\ty-=yin;\n            \t\t\t\t}\n            \t\t\t\tif (fo>.1) {fo-=.05}\n                \t\t\td3.select(nodes[i])\n            \t\t\t\t.attr(\"y\", function(d) { return y })\n            \t\t\t\t.attr(\"font-size\", fs)\n            \t\t\t\t.attr(\"fill-opacity\", fo)\n            \t\t\t}\n            \t\t\t\n            \t\t\tfs = 14, y=Math.max(mouse[1],fs), fo=1, yin=undefined;\n            \t\t\t\n\n            \t\t\tfor (var i=currentItem+1,len=terms.length;i<len;i++) {\n            \t\t\t\tif (fs>=8) {\n            \t\t\t\t\ty+=fs\n            \t\t\t\t\tfs-=.5\n            \t\t\t\t} else {\n            \t\t\t\t\tif (yin==undefined) {\n            \t\t\t\t\t\tyin = (height-y)/(len-i)\n            \t\t\t\t\t}\n            \t\t\t\t\ty+=yin;\n            \t\t\t\t}\n            \t\t\t\tif (fo>.1) {fo-=.05}\n                \t\t\td3.select(nodes[i])\n            \t\t\t\t.attr(\"y\", function(d) { return y })\n            \t\t\t\t.attr(\"font-size\", fs)\n            \t\t\t\t.attr(\"fill-opacity\", fo)\n            \t\t\t}\n\n            \t\t\t})\n\n            \t\t}\n            \t}\n            },{\n            \titemId: 'threads',\n//                html: '<canvas></canvas>',\n                layout: 'fit',\n                flex: 1,\n                listeners: {\n//                \tboxready: function() {\n//                \t\tthis.body.down(\"canvas\").dom.width=this.getTargetEl().getWidth();\n//                \t\tthis.body.down(\"canvas\").dom.height=this.getTargetEl().getHeight();\n//                \t},\n            \t\tfilterchange: function(store) {\n            \t\t\tvar el = this.getTargetEl(), width = el.getWidth(), height = el.getHeight();\n            \t\t\tel.setHtml(\" \"); // empty\n            \t\t\tterms = store.getRange().map(function(r) {return {\n            \t\t\t\tterm: r.getTerm(),\n            \t\t\t\tvals: r.getDistributions()\n            \t\t\t}})\n            \t\t\tvar svg = d3.select(el.dom).append(\"svg\")\n            \t\t      .attr(\"width\", el.getWidth())\n            \t\t      .attr(\"height\", el.getHeight());\n            \t\t\t\n            \t\t\tif (terms.length==0) {\n            \t\t\t\treturn this.up(\"panel\").toastInfo(\"No hits\")\n            \t\t\t}\n            \t\t\t\n            \t\t\tvar xincrement = width/terms[0].vals.length;\n            \t\t\t\n            \t\t\tvar scale, scaleApi = this.up('loom').getApiParam(\"scaling\");\n            \t\t\tif (scaleApi==\"sqrt\") {scale = d3.scaleSqrt()}\n            \t\t\telse if (scaleApi==\"log\") {scale = d3.scaleLog();}\n            \t\t\telse {scale = d3.scaleLinear();}\n            \t\t\t\n            \t\t\tvar yscale = scale\n            \t\t\t\t.domain([\n            \t\t\t\t\tMath.max(1e-6, Ext.Array.min(terms.map(function(t) {return Ext.Array.min(t.vals)}))),\n            \t\t\t\t\tMath.max(1e-6, Ext.Array.max(terms.map(function(t) {return Ext.Array.max(t.vals)})))\n            \t\t\t\t\t]).range([1e-6, height-2]);\n            \t\t\t\n//            \t\t\tconsole.warn(\n//            \t\t\t\t\tMath.max(1e-6, Ext.Array.min(terms.map(function(t) {return Ext.Array.min(t.vals)}))),\n//            \t\t\t\t\tMath.max(1e-6, Ext.Array.max(terms.map(function(t) {return Ext.Array.max(t.vals)})))\n//            \t\t\t\t\t);\n            \t\t\t\n            \t\t\tvar valueline = d3.line()\n            \t\t\t\t.curve(d3.curveCardinal)\n\t            \t\t    .x(function(d, i) { return (xincrement/2)+(xincrement*i)})\n\t            \t\t    .y(function(d) { return height-1-yscale(d)});\n            \t\t\t\n        \t\t\t    var tooltip = svg.append(\"g\")\n        \t\t\t    \t.attr(\"opacity\", 0);\n        \t\t\t    \n        \t\t\t    var tooltipbox = tooltip.append(\"rect\")\n        \t\t\t    \t.attr(\"fill\", \"white\")\n        \t\t\t    \t.attr(\"text-anchor\", \"middle\")\n        \t\t\t    \t.attr(\"alignment-baseline\", \"middle\")\n        \t\t\t    \t.attr(\"stroke\", \"rgba(0,0,0,.05)\")\n        \t\t\t    \t.attr(\"class\", \"rect\")\n        \t\t\t    \t.attr(\"x\", 100)\n        \t\t\t    \t.attr(\"y\", 100)\n        \t\t\t    \t.attr(\"width\", 70)\n        \t\t\t    \t.attr(\"height\", 16)\n        \t\t\t    \t.attr(\"opacity\", 1)\n        \t\t\t    \t\n        \t\t\t    var tooltiptext = tooltip\n        \t\t\t    \t.append(\"text\")\n        \t\t\t    \t.attr(\"text-anchor\", \"middle\")\n        \t\t\t    \t.attr(\"alignment-baseline\", \"middle\")\n        \t\t\t    \t.attr(\"x\", 100)\n        \t\t\t    \t.attr(\"y\", 100)\n//        \t\t\t    \t.attr(\"width\", 100)\n//        \t\t\t    \t.attr(\"height\", 12)\n        \t\t\t    \t.text(\"testing\")\n\n            \t\t\tterms.forEach(function(term) {\n            \t\t\t\tvar color = Voyant.application.getColorForTerm(term.term, true)\n            \t\t\t\t\n            \t\t\t\t// draw a first line, always visible\n            \t\t\t\tsvg.append(\"path\")\n            \t\t\t      .datum(term.vals)\n\t\t\t\t\t\t      .attr(\"fill\", \"none\")\n\t\t\t\t\t\t      .attr(\"stroke\", color)\n\t\t\t\t\t\t      .attr(\"opacity\", .5)\n\t\t\t\t\t\t      .attr(\"stroke-linejoin\", \"round\")\n\t\t\t\t\t\t      .attr(\"stroke-linecap\", \"round\")\n\t\t\t\t\t\t      .attr(\"stroke-width\", 1)\n\t\t\t\t\t\t      .attr(\"class\", \"line\")\n            \t\t\t      .attr(\"d\", valueline)\n\n            \t\t\t\t\n            \t\t\t    // draw a second line to make it easier to hover (line width 1 is harder to find)\n            \t\t\t\tsvg.append(\"path\")\n            \t\t\t      .datum(term.vals)\n\t\t\t\t\t\t      .attr(\"fill\", \"none\")\n\t\t\t\t\t\t      .attr(\"stroke\", color)\n\t\t\t\t\t\t      .attr(\"opacity\", 0)\n\t\t\t\t\t\t      .attr(\"stroke-width\", 3)\n\t\t\t\t\t\t      .attr(\"class\", \"line\")\n            \t\t\t      .attr(\"term\", term.term)\n            \t\t\t      .attr(\"d\", valueline)\n\t\t\t\t\t\t      .on('mouseover', function(event) { // on mouse out hide line, circles and text\n\t\t\t\t\t\t    \t  d3.select(this)\n\t\t\t\t\t\t    \t  \t.attr(\"opacity\", 1);\n\t\t\t\t\t\t    \t  \n\t\t\t\t\t\t    \t  var coords = d3.pointer(event);\n\t\t\t\t\t\t    \t  \n\t\t\t\t\t\t    \t  tooltip\n\t\t\t\t\t\t    \t  \t.attr(\"opacity\", 1)\n\t\t\t\t\t\t    \t  \t\n\t\t\t\t\t\t    \t  tooltipbox\n\t\t\t\t\t\t    \t  \t.attr(\"x\", coords[0]-35)\n\t\t\t\t\t\t    \t  \t.attr(\"y\", coords[1] -8+ (coords[1]>height/2 ? -18 : 18))\n\t\t\t\t\t\t\t    \t \n\t\t\t\t\t\t    \t  tooltiptext\n\t\t\t\t\t\t\t    \t  \t.text(term.term)\n\t\t\t\t\t\t\t    \t  \t.attr(\"fill\", color)\n\t\t\t\t\t\t\t    \t  \t.attr(\"x\", coords[0])\n\t\t\t\t\t\t\t    \t  \t.attr(\"y\", coords[1] + (coords[1]>height/2 ? -18 : 18))\n\n\t\t\t\t\t\t      })\n\t\t\t\t\t\t      .on('mouseout', function() { // on mouse out hide line, circles and text\n\t\t\t\t\t\t    \t  d3.select(this)\n\t\t\t\t\t\t    \t  \t.attr(\"opacity\", 0);\n\t\t\t\t\t\t    \t  tooltip.attr(\"opacity\", 0)\n\t\t\t\t\t\t      })\n\t\t\t\t\t\t      \n\t\t\t\t\t\t      tooltip.raise(); // make sure this is at top level for legibility\n\n            \t\t\t}, this)\n            \t\t}\n\n                }\n            }],\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [tbitems[0], tbitems[2], tbitems[3], tbitems[4], tbitems[5]/*, {\n                \ttext: this.localize(\"controls\"),\n                \ttooltip: this.localize(\"controlsTip\"),\n                \tmenu: {\n                    \titems: tbitems\n                \t}\n                }*/,{\n        \t\t\tfieldLabel: this.localize('visibleTerms'),\n        \t\t\tlabelWidth: 70,\n        \t\t\twidth: 120,\n        \t\t\txtype: 'slider',\n\t            \tincrement: 25,\n\t            \tminValue: 25,\n\t            \tmaxValue: 5000,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"limit\")));\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({limit: newvalue});\n\t            \t\t\t// maybe not necessary when value is smaller\n\t            \t\t\tthis.fireEvent(\"loadedCorpus\", this, this.getCorpus())\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                },{\n                \ttext: this.localize(\"scaling\"),\n                \tmenu: {\n                \t\tdefaults: {\n                \t\t\txtype: 'menucheckitem',\n                \t\t\thandler: function(cmp) {\n                \t\t\t\tthis.setApiParam(\"scaling\", cmp.getItemId());\n                        \t\tthis.getComponent(\"threads\").fireEventArgs(\"filterchange\", [this.getStore()]);\n                \t\t\t},\n                \t\t\tscope: this,\n                \t\t\tlisteners: {\n                \t\t\t\tafterrender: function(cmp) {\n                \t\t\t\t\tcmp.setChecked(cmp.getItemId()==this.getApiParam(\"scaling\"))\n                \t\t\t\t},\n                \t\t\t\tscope: this\n                \t\t\t},\n                \t\t\tgroup: 'scaling'\n                \t\t},\n                \t\titems: [{\n                \t\t\ttext: this.localize(\"scaleLinear\"),\n                \t\t\titemId: 'linear'\n                \t\t},{\n                \t\t\ttext: this.localize(\"scaleLog\"),\n                \t\t\titemId: 'log'\n                \t\t},{\n                \t\t\ttext: this.localize(\"scaleSqrt\"),\n                \t\t\titemId: 'sqrt'\n                \t\t}]\n                \n                \t}\n                }]\n              }]\n        });\n        \n        this.on('loadedCorpus', function(src, corpus) {\n        \tvar store = corpus.getDocumentsCount()==1 ? corpus.getDocumentTerms() : corpus.getCorpusTerms();\n        \tstore.on(\"load\", function() {\n        \t    this.updateControlsFromStore();\n\t\t    \tthis.filterRecords();\n        \t}, this);\n        \tstore.on(\"filterchange\", function() {\n        \t\tthis.getComponent(\"terms\").fireEventArgs(\"filterchange\", arguments);\n        \t\tthis.getComponent(\"threads\").fireEventArgs(\"filterchange\", arguments);\n        \t\t\n        \t}, this);\n        \tthis.setStore(store);\n        \tparams = this.getApiParams();\n        \tExt.apply(params, {\n        \t\twithDistributions: true\n        \t});\n        \tstore.load({\n    \t\t    callback: function(records, operation, success) {\n    \t\t    \tthis.filterRecords();\n    \t\t    },\n    \t\t    scope: this,\n    \t\t    params: params\n        \t});\n\n        }, this);\n        \n        this.callParent(arguments);\n    },\n\n    filterRecords: function() {\n    \tvar store = this.getStore();\n    \tstore.clearFilter();\n    \tvar limit = parseInt(this.getApiParam(\"limit\")), hit = 0;\n    \tstore.filterBy(function(record) {\n    \t\tvar keep = Ext.Array.every(this.getControls().getRange(), function(control) {\n    \t\t\treturn control.getEnabled()==false || control.getValidateRecord().call(control, record);\n    \t\t}, this);\n    \t\treturn keep && hit++<limit;\n    \t}, this)\n    },\n    \n    updateControlsFromStore: function() {\n    \tvar store = this.getStore();\n    \tthis.getControls().each(function(control) {\n    \t\tcontrol.suspendEvent(\"change\");\n    \t\tcontrol.initControl.call(this, store);\n    \t\tif (control.getMin()===undefined) {control.setMin(0);}\n    \t\tif (control.getLow()==undefined) {control.setLow(control.getMin())}\n    \t\tif (control.getMax()===undefined) {control.setMax(1);} // shouldn't happen\n    \t\tif (control.getHigh()==undefined) {control.setHigh(control.getMax())}\n    \t\tcontrol.resumeEvent(\"change\");\n    \t})\n    },\n    \n    revalidate: function() {\n    \tvar canvas = this.body.down('canvas').dom, ctx = canvas.getContext(\"2d\");\n    \tctx.clearRect(0,0,canvas.width,canvas.height);\n\n    \tvar controls = this.query('loomcontrol');\n    \t\n    \tvar loomTermRecords = new Voyant.panel.LoomTermRecords();\n    \tthis.getStore().each(function(record) {\n    \t\tvar vals = record.getDistributions().map(function(v) {return true;})\n    \t\tExt.Array.each(controls, function(control) {\n    \t\t\tif (control.getChecked()) {\n    \t\t\t\tif (control.validateRecord) {\n    \t\t\t\t\tvar newvals = control.validateRecord.call(this, control.getField(), record, record.getDistributions());\n//    \t\t\t\t\tconsole.warn(control.getName(), newvals)\n    \t\t\t\t\tif (Ext.isBoolean(newvals) && !newvals) {\n    \t\t\t\t\t\tvals = false;\n    \t\t\t\t\t\treturn false;\n    \t\t\t\t\t} else if (Ext.isArray(newvals)) {\n        \t\t\t\t\tfor (var i=0; i<vals.length; i++) {\n        \t\t\t\t\t\tvals[i] = vals[i] && newvals[i];\n        \t\t\t\t\t}\n        \t\t\t\t\treturn Ext.Array.some(vals, function(v) {return v})\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t}\n    \t\t});\n    \t\tif (Ext.isArray(vals) && Ext.Array.some(vals, function(v) {return v})) {\n    \t\t\tloomTermRecords.add(record);\n    \t\t}\n    \t})\n    \t\n    \tloomTermRecords.update(canvas, ctx);\n    }\n    \n});\n\nExt.define('Voyant.panel.LoomTermRecords', {\n\tconfig: {\n\t\ttermRecords: []\n\t},\n\tconstructor: function(config) {\n\t\tthis.setTermRecords([])\n\t    this.callParent(arguments);\n\t},\n\tadd: function(record) {\n\t\tthis.getTermRecords().push(new Voyant.panel.LoomTermRecord(record));\n\t},\n\tupdate: function(canvas, ctx) {\n\t\tvar min = Ext.Array.min(this.getTermRecords().map(function(r) {return Ext.Array.min(r.getValues())}))\n\t\tvar max = Ext.Array.max(this.getTermRecords().map(function(r) {return Ext.Array.max(r.getValues())}))\n\t\tthis.getTermRecords().forEach(function(r) {\n\t\t\tr.update(canvas, ctx, min, max)\n\t\t})\n\t}\n})\n\nExt.define('Voyant.panel.LoomTermRecord', {\n\tconfig: {\n\t\trecord: undefined,\n\t\tvalues: undefined,\n\t\tterm: undefined,\n\t\ttexts: undefined\n\t},\n\tconstructor: function(config) {\n\t\tthis.setRecord(config);\n\t\tthis.setValues(config.getDistributions());\n\t\tvar term = config.getTerm();\n\t\tthis.setTerm(term);\n\t\tthis.setTexts(config.getDistributions().map(function(v) {\n\t\t\treturn new Ext.draw.sprite.Text({\n\t\t\t\ttype: 'text',\n\t\t\t\ttext: term\n\t\t\t})\n\t\t}))\n\t    this.callParent(arguments);\n\t},\n\tupdate: function(canvas, ctx, min, max) {\n\t\tvar values = this.getValues(), columnWidth = canvas.offsetWidth/(values.length),\n\t\t\theight = canvas.offsetHeight, term = this.getTerm();\n\t\tthis.getTexts().forEach(function(text, i) {\n\t\t\tvar y = values[i]*height/max;\n\t\t    ctx.fillText(term, (columnWidth/2)+(i*columnWidth), height-y);\n\t\t})\n\t}\n})\n\nExt.define('Voyant.util.LoomControl', {\n    extend: 'Ext.Base',\n    mixins: ['Ext.mixin.Observable'],\n    constructor: function(config) {\n    \tthis.mixins.observable.constructor.call(this, config);\n        this.callParent(arguments);\n    },\n    config: {\n    \tgroup: undefined,\n    \tname: undefined,\n    \tenabled: false,\n    \tmin: undefined,\n    \tmax: undefined,\n    \tlow: undefined,\n    \thigh: undefined,\n    \tinitControls: Ext.emptyFn,\n    \tvalidateRecord: Ext.emptyFn,\n\t\toffsetTipText: false\n    },\n    setMin: function() {\n    \tthis.callParent(arguments);\n    \tthis.fireEvent(\"change\", this);\n    \treturn this;\n    },\n    setMax: function() {\n    \tthis.callParent(arguments);\n    \tthis.fireEvent(\"change\", this);\n    \treturn this;\n    },\n    setLow: function() {\n    \tthis.callParent(arguments);\n    \tthis.fireEvent(\"change\", this);\n    \treturn this;\n    },\n    setHigh: function() {\n    \tthis.callParent(arguments);\n    \tthis.fireEvent(\"change\", this);\n    \treturn this;\n    },\n    setValues: function(low, high) {\n    \tthis.suspendEvent(\"change\");\n    \tif (Ext.isArray(low)) {\n        \tthis.setLow(low[0]);\n        \tthis.setHigh(low[1]);\n    \t} else {\n        \tthis.setLow(low);\n        \tthis.setHigh(high);\n    \t}\n    \tthis.resumeEvent(\"change\");\n    \tif (arguments.length < 3 || !arguments[2]) {this.fireEvent(\"change\", this);}\n    \treturn this;\n    },\n    setEnabled: function() {\n    \tthis.callParent(arguments);\n    \tif (arguments.length < 2 || !arguments[1]) {this.fireEvent(\"change\", this);}\n    \treturn this;\n    }\n    \n})","/**\n * Microsearch visualizes the frequency and distribution of terms in a corpus.\n *\n * @example\n *\n * let config = {\n * \t\"query\": null,\n * \t\"stopList\": \"auto\"\n * };\n *\n * loadCorpus(\"austen\").tool(\"microsearch\", config);\n *\n * @class MicroSearch\n * @tutorial microsearch\n * @memberof Tools\n */\nExt.define('Voyant.panel.MicroSearch', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.microsearch',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.MicroSearch\n\t\t\t * @instance\n\t\t\t * @property {stopList}\n\t\t\t * @default\n\t\t\t */\n    \t\tstopList: 'auto',\n\n\t\t\t/**\n\t\t\t * @memberof Tools.MicroSearch\n\t\t\t * @instance\n\t\t\t * @property {query}\n\t\t\t */\n    \t\tquery: undefined\n    \t},\n\t\tglyph: 'xf1ea@FontAwesome'\n    },\n    config: {\n    \t/**\n    \t * @private\n    \t */\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\n    \t\n    \t/**\n    \t * @private\n    \t */\n    \tmaxTokens: 0,\n    \t\n    \t/**\n    \t * @private\n    \t */\n    \ttokensPerSegment: 0,\n    \t\n    \t/**\n    \t * @private\n    \t */\n    \tmaxVerticalLines: 0,\n    \t\n    \t/**\n    \t * @private\n    \t */\n    \tmaxSegments: 0\n    },\n    constructor: function(config ) {\n\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \txtype: 'querysearchfield'\n                }]\n    \t\t}]\n    \t});\n\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tif (this.rendered) {\n    \t\t\tthis.initialize();\n    \t\t}\n    \t\telse {\n    \t\t\tthis.on(\"afterrender\", function() {\n    \t\t\t\tthis.initialize();\n    \t\t\t}, this)\n    \t\t}\n\n    \t});\n    \t\n    \tthis.on('query', function(src, query) {\n    \t\tthis.setApiParam('query', query);\n    \t\tthis.updateSearchResults();\n    \t});\n\n\t\tthis.on('resize', function(panel, width, height) {\n\t\t\tif (this.getCorpus()) {\n\t\t\t\tthis.initialize();\n\t\t\t}\n\t\t});\n    \t\n    },\n    \n    initialize: function() {\n\n    \tvar el = this.getTargetEl(), corpus = this.getCorpus();\n    \t\n\t\tvar lineSize = 5; // pixels, including margins below and above\n\t\tthis.setMaxVerticalLines(Math.floor((el.getHeight() - 10 /* margin of 5px */) / lineSize));\n\t\t\n\t\t// max segments\n\t\tvar gutterSize = 10;\n\t\tvar corpusSize = corpus.getDocumentsCount();\n\t\tvar gutter = corpusSize * gutterSize;\n\t\tvar columnSize = Math.floor((el.getWidth() - gutter - 10 /* margin of 5px */) / corpusSize);\n\t\tif (columnSize>200) {columnSize=200;}\n\t\tvar segmentWidth = 3; // each segment is 3 pixels\n\t\tvar maxSegmentsPerLine = Math.floor(columnSize / segmentWidth);\n\t\tif (maxSegmentsPerLine<1) {maxSegmentsPerLine=1;}\n\t\t\n\t\t// and the answer is...\n\t\tthis.setMaxSegments(maxSegmentsPerLine * this.getMaxVerticalLines());\n\t\t\n\t\tvar documentsStore = corpus.getDocuments();\n\t\tthis.setMaxTokens(documentsStore.max('tokensCount-lexical'));\n\n\t\tthis.setTokensPerSegment(this.getMaxTokens() < this.getMaxSegments() ? 1 : Math.ceil(this.getMaxTokens()/this.getMaxSegments()));\n\t\t\n\n\t\tvar canvas = \"<table cellpadding='0' cellspacing='0' style='height: 100%'><tr>\";\n\t\tthis.segments = [];\n\t\tdocumentsStore.each(function(document) {\n\t\t\tdocIndex = document.getIndex();\n\t\t\tcanvas+='<td style=\"overflow: hidden; vertical-align: top; width: '+columnSize+'px;\">'+\n\t\t\t\t'<div class=\"docLabel\" style=\"white-space: nowrap; width: '+columnSize+'px;\" data-qtip=\"'+document.getFullLabel()+'\">'+document.getFullLabel()+\"</div>\"+\n\t\t\t\t'<canvas style=\"display: block;\" width=\"'+columnSize+'\" height=\"'+el.getHeight()+'\" id=\"'+this.body.id+'-'+docIndex+'\">'+\n\t\t\t\t'</td>';\n\t\t\tif (docIndex+1<corpusSize) {canvas+='<td style=\"width: '+gutterSize+'px;\">&nbsp;</td>';}\n\t\t}, this);\n\t\tcanvas+='</tr></table>';\n\t\tel.update(canvas);\n\t\t\n\t\tthis.updateSearchResults();\n\t\t\n    \tif (!this.getApiParam('query')) {\n    \t\tvar me = this;\n    \t\treturn this.getCorpus().loadCorpusTerms({limit: 1, stopList: this.getApiParam('stopList'), categories: this.getApiParam(\"categories\")}).then(function(corpusTerms) {\n    \t\t\tvar term = corpusTerms.getAt(0).getTerm();\n    \t\t\tvar q = me.down('querysearchfield');\n    \t\t\tq.addValue(new Voyant.data.model.CorpusTerm({term: term}));\n    \t\t\tme.fireEvent(\"query\", me, [term])\n    \t\t});\n    \t}\n\n    },\n    \n    updateSearchResults: function() {\n    \tquery = this.getApiParam('query');\n    \t\n\t\t// draw background\n\t\tthis.getCorpus().getDocuments().each(function(document) {\n\t\t\tvar distributions = this.redistributeDistributions(document, new Array(this.getMaxSegments()));\n\t\t\tthis.drawDocumentDistributions(document, null, distributions);\n\t\t}, this);\n\n    \tif (Ext.Array.from(query).length > 0) {\n    \t\tthis.mask(this.localize('loading'))\n    \t\tthis.getCorpus().getDocumentTerms().load({\n    \t\t\tparams: {\n    \t\t\t\tquery: Ext.Array.from(query),\n        \t\t\twithDistributions: 'relative',\n        \t\t\tbins: this.getMaxSegments(),\n        \t\t\tcategories: this.getApiParam('categories')\n    \t\t\t},\n    \t\t\tcallback: function(records, operation, success) {\n    \t\t\t\tthis.unmask();\n    \t\t\t\tvar max = 0;\n\t\t\t\t\tvar min = Number.MAX_VALUE;\n\t\t\t\t\tvar docs = [];\n    \t\t\t\trecords.forEach(function(record) {\n    \t\t\t\t\tvar doc = this.getCorpus().getDocument(record.getDocIndex());\n    \t\t\t\t\tvar distributions = this.redistributeDistributions(doc, record.getDistributions());\n    \t\t\t\t\tvar m = Ext.Array.max(distributions);\n    \t\t\t\t\tif (m>max) {max=m;}\n    \t\t\t\t\tdistributions.forEach(function(d) {\n    \t\t\t\t\t\tif (d && d<min) {\n    \t\t\t\t\t\t\tmin = d;\n    \t\t\t\t\t\t}\n    \t\t\t\t\t})\n\t\t\t\t\t\tif (docs[record.getDocIndex()] === undefined) {\n\t\t\t\t\t\t\tdocs[record.getDocIndex()] = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdocs[record.getDocIndex()][record.getTerm()] = this.redistributeDistributions(doc, record.getDistributions());\n    \t\t\t\t}, this);\n    \t\t\t\tdocs.forEach(function(termDistributions, i) {\n\t\t\t\t\t\tfor (var term in termDistributions) {\n\t\t\t\t\t\t\tvar distributions = termDistributions[term];\n                    \t\tthis.drawDocumentDistributions(this.getCorpus().getDocument(i), term, distributions, min || Ext.Array.min(distributions), max || Ext.Array.max(distributions));\n\t\t\t\t\t\t}\n    \t\t\t\t}, this)\n    \t\t\t},\n    \t\t\tscope: this\n    \t\t})\n    \t}\n    },\n    \n    redistributeDistributions: function(doc, distributions) {\n\t\tvar segments = Math.ceil(doc.getLexicalTokensCount() / this.getTokensPerSegment());\n\n\t\t// redistribute if needed, we'll take the mean of the distribution values to maintain comparison across segments\n    \tif (distributions.length>segments) {\n    \t\tvar newdistributions = [];\n    \t\tfor (var i=0; i<distributions.length; i++) {\n    \t\t\tvar a = parseInt(i*segments/distributions.length);\n    \t\t\tif (newdistributions[a]) {newdistributions[a].push(distributions[i])}\n    \t\t\telse {newdistributions[a]=[distributions[i]];}\n    \t\t}\n\t\t\tdistributions = newdistributions\n    \t\tfor (var i=0; i<distributions.length; i++) {\n    \t\t\tdistributions[i] = Ext.Array.mean(distributions[i]);\n    \t\t}\n    \t}\n    \treturn distributions;\n    },\n    \n    drawDocumentDistributions: function(doc, term, distributions, min, max) {\n    \tvar canvas = this.getTargetEl().dom.querySelector(\"#\"+this.body.id+\"-\"+doc.getIndex());\n    \tvar c = canvas.getContext('2d');\n    \tvar x = 0, w = canvas.clientWidth, y = 0;\n\t\t\n\t\tvar isBlank = term === null;\n\t\tvar color = [230, 230, 230];\n\t\tif (!isBlank) {\n\t\t\tcolor = this.getApplication().getColorForTerm(term);\n\t\t}\n\n    \tfor (var j=0; j<distributions.length;j++) {\n\t\t\tif (isBlank) {\n\t\t\t\tc.fillStyle = \"rgb(230,230,230)\";\n\t\t\t\tc.fillRect(x,y,3,3);\n\t\t\t} else if (distributions[j]) {\n\t\t\t\tvar alpha = ((distributions[j]-min)*.7/(max-min))+.3;\n\t\t\t\tc.fillStyle = \"rgba(\"+color[0]+\",\"+color[1]+\",\"+color[2]+\",\"+alpha+\")\";\n\t\t\t\tc.fillRect(x,y,3,3);\n\t\t\t}\n    \t\tx+=3;\n    \t\tif (x>=w) {x=0; y+=5}\n    \t}\n    \t\n    }\n});","/**\n * Mandala is a conceptual visualization that shows the relationships between terms and documents.\n *\n * @example\n *\n * let config = {\n * \t\"labels\": true,\n * \t\"query\": null,\n * \t\"stopList\": \"auto\",\n * };\n *\n * loadCorpus(\"austen\").tool(\"Mandala\", config);\n *\n * @class Mandala\n * @tutorial mandala\n * @memberof Tools\n */\nExt.define('Voyant.panel.Mandala', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.mandala',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t/**\n\t\t\t * @memberof Tools.Mandala\n\t\t\t * @instance\n\t\t\t * @property {stopList}\n\t\t\t * @default\n\t\t\t */\n    \t\tstopList: 'auto',\n    \t\t\n\t\t\t/**\n\t\t\t * @memberof Tools.Mandala\n\t\t\t * @instance\n\t\t\t * @property {query}\n\t\t\t */\n    \t\tquery: undefined,\n    \t\t\n\t\t\t/**\n\t\t\t * @memberof Tools.Mandala\n\t\t\t * @instance\n\t\t\t * @property {Boolean} labels Whether or not labels should be shown.\n\t\t\t * @default\n\t\t\t */\n    \t\tlabels: true\n    \t\t\n    \t},\n    \tglyph: 'xf1db@FontAwesome'\n\t},\n\t\n\tgutter: 5,\n\t\n\ttextFont: '12px sans-serif',\n\t\n\tconfig: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n\t},\n\t\n    constructor: function() {\n\n    \tthis.mixins['Voyant.util.Localization'].constructor.apply(this, arguments);\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n\t\t\thtml: '<div style=\"text-align: center\"><canvas width=\"800\" height=\"600\"></canvas></div>',\n\t\t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \ttext: this.localize('add'),\n        \t\t\tglyph: 'xf067@FontAwesome',\n                \thandler: function() {\n                \t\tthis.editMagnet();\n                \t},\n                \tscope: this\n                },{\n                \ttext: this.localize('clear'),\n\t\t\t\t\tglyph: 'xf014@FontAwesome',\n                \thandler: function() {\n                \t\tthis.setApiParam('query', undefined);\n                \t\tthis.updateFromQueries(true);\n                \t\tthis.editMagnet();\n                \t},\n                \tscope: this\n\t            },{\n\t                xtype: 'checkbox',\n\t                boxLabel: this.localize('labels'),\n\t                listeners: {\n\t                \trender: function(cmp) {\n\t                \t\tcmp.setValue(this.getApiParam(\"labels\")===true || this.getApiParam(\"labels\")==\"true\");\n\t    \t\t        \tExt.tip.QuickTipManager.register({\n\t    \t\t        \t\ttarget: cmp.getEl(),\n\t   \t\t                 \ttext: this.localize('labelsTip')\n\t    \t\t        \t});\n\t                \t\t\n\t                \t},\n\t                \tbeforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n\t                    change: function(cmp, val) {\n\t                    \tthis.setApiParam('labels', val);\n\t                    \tthis.draw();\n\t                    },\n\t                    scope: this\n\t                }\n\t            }]\n    \t\t}]\t\t\t\n    \t});\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.on('boxready', function(cmp) {\n\t\t\tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\");\n\t\t\tvar me = this;\n    \t\tcanvas.addEventListener('mousemove', function(evt) {\n    \t\t\tvar rect = canvas.getBoundingClientRect(), x =  evt.clientX - rect.left, y = evt.clientY - rect.top,\n\t\t\t\tchange = false, docRadius = parseInt(me.textFont)/2;\n    \t\t\tif (me.documents) {\n    \t\t\t\tme.documents.forEach(function(doc) {\n    \t\t\t\t\tvar isHovering = x > doc.x-docRadius && x < doc.x+docRadius && y > doc.y-docRadius && y < doc.y+docRadius;    \t\t\t\t\t\n    \t\t\t\t\tif (isHovering!=doc.isHovering) {change = true;}\n    \t\t\t\t\tdoc.isHovering = isHovering;\n    \t\t\t\t})\n    \t\t\t}\n\t\t\t\tradius = parseInt(me.textFont)/2;\n\t\t\t\tfor (term in me.magnets) {\n\t\t\t\t\tvar isHovering = x > me.magnets[term].x-radius && x < me.magnets[term].x+radius && y > me.magnets[term].y-radius && y < me.magnets[term].y+radius;    \t\t\t\t\t\n\t\t\t\t\tif (isHovering!=me.magnets[term].isHovering) {change = true;}\n\t\t\t\t\tme.magnets[term].isHovering = isHovering;\n\t\t\t\t}\n\t\t\t\tif (change) {\n\t\t\t\t\tme.draw();\n\t\t\t\t}\n    \t    }, false);\n    \t\tcanvas.addEventListener('click', function(evt) {\n    \t\t\tvar rect = canvas.getBoundingClientRect(), x =  evt.clientX - rect.left, y = evt.clientY - rect.top,\n\t\t\t\t\tdocRadius = parseInt(me.textFont)/2;\n\t\t\t\tfor (term in me.magnets) {\n\t\t\t\t\tif (x > me.magnets[term].x-radius && x < me.magnets[term].x+radius && y > me.magnets[term].y-radius && y < me.magnets[term].y+radius) {\n\t\t\t\t\t\tme.editMagnet(term);\n\t\t\t\t\t}\n\t\t\t\t}\n    \t    }, false);\n    \t})\n    \t\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tthis.documents = [];\n    \t\tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\"), ctx = canvas.getContext(\"2d\"), radius = canvas.width/2;\n    \t\tctx.font = this.textFont;\n    \t\tcorpus.getDocuments().each(function(document) {\n    \t\t\tvar label = document.getTinyTitle();\n    \t\t\tthis.documents.push({\n    \t\t\t\tdoc: document,\n    \t\t\t\tlabel: label,\n    \t\t\t\twidth: ctx.measureText(label).width,\n    \t\t\t\tx: radius,\n    \t\t\t\ty: radius,\n    \t\t\t\tmatches: [],\n    \t\t\t\tisHovering: false\n    \t\t\t});\n    \t\t}, this);\n    \t\tthis.updateDocs(canvas);\n    \t\tthis.draw();\n    \t\tthis.updateFromQueries();\n    \t}, this);\n    \t\n    \tthis.on(\"resize\", function() {\n    \t\tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\"),\n    \t\t\tdiam = Math.min(this.getTargetEl().getWidth(), this.getTargetEl().getHeight());\n    \t\tcanvas.width = diam;\n    \t\tcanvas.height = diam;\n\t    \tthis.updateMagnets();\n\t    \tthis.updateDocs();\n    \t\tthis.draw(canvas)\n    \t})\n    },\n    \n    editMagnet: function(term) {\n    \tvar me = this, currentTerms = Ext.Array.from(me.getApiParam('query'));\n\t\tExt.create('Ext.window.Window', {\n\t\t\ttitle: this.localize(\"EditMagnet\"),\n\t\t\tmodal: true,\n\t\t\titems: {\n\t\t\t\txtype: 'form',\n\t\t\t\twidth: 300,\n\t\t\t\titems: [{\n\t\t\t\t\txtype: 'querysearchfield',\n\t\t\t\t\tcorpus: this.getCorpus(),\n\t\t\t\t\tstore: this.getCorpus().getCorpusTerms({\n\t\t\t\t\t\tproxy: {\n\t\t\t\t\t\t\textraParams: {\n\t\t\t\t\t\t\t\tstopList: this.getApiParam('stopList')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tstopList: this.getApiParam('stopList'),\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tafterrender: function(field) {\n\t\t\t\t\t\t\tif (term) {\n\t\t\t\t\t\t\t\tvar termObj = new Ext.create(\"Voyant.data.model.CorpusTerm\", {\n\t\t\t\t\t\t\t\t\tterm: term\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tfield.getStore().loadData(termObj, true)\n\t\t\t\t\t\t\t\tfield.setValue(termObj);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: \"numberfield\",\n\t\t\t\t    fieldLabel: me.localize('rotateClockwise'),\n\t\t\t\t    minValue: 0,\n\t\t\t\t    maxValue: currentTerms.length-1,\n\t\t\t\t    value: 0,\n\t\t\t\t    stepValue: 1,\n\t\t\t\t    width: 200,\n\t\t\t\t    name: \"rotate\"\n\t\t\t\t}],\n\t\t\t\tbuttons: [{\n\t            \ttext: this.localize(\"remove\"),\n\t\t\t\t\tglyph: 'xf0e2@FontAwesome',\n\t            \tflex: 1,\n\t\t            ui: 'default-toolbar',\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar queries = Ext.Array.filter(Ext.Array.from(me.getApiParam('query')), function(query) {\n\t        \t\t\t\treturn query!=term\n\t        \t\t\t});\n\t        \t\t\tme.setApiParam('query', queries);\n\t        \t\t\tme.updateFromQueries(queries.length==0);\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t},\n\t        \t\tscope: this\n\t\t\t\t},{xtype: 'tbfill'}, {\n\t            \ttext: this.localize(\"cancel\"),\n\t\t            ui: 'default-toolbar',\n\t                glyph: 'xf00d@FontAwesome',\n\t        \t\tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t}\n\t\t\t\t},{\n\t            \ttext: this.localize(\"update\"),\n\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t            \tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar val = btn.up('window').down('querysearchfield').getValue().join(\"|\")\n\t        \t\t\tif (val) {\n\n\t        \t\t\t\t// start by updating the term in place\n\t\t        \t\t\tvar position = -1;\n\t\t        \t\t\tfor (var i=0; i<currentTerms.length; i++) {\n\t\t        \t\t\t\tif (term==currentTerms[i]) {\n\t\t        \t\t\t\t\tposition=i;\n\t\t        \t\t\t\t\tcurrentTerms[i]=val;\n\t\t        \t\t\t\t\t\n\t\t\t\t        \t\t\t// see if we need to shift\n\t\t\t\t        \t\t\tvar rotate = btn.up('window').down('numberfield').getValue();\n\t\t\t\t        \t\t\tif (rotate) {\n\t\t\t\t        \t\t\t\tcurrentTerms.splice(i, 1);\n\t\t\t\t        \t\t\t\tvar newpos = i+rotate;\n\t\t\t\t        \t\t\t\tif (newpos>currentTerms.length) {newpos-=currentTerms.length+1;}\n\t\t\t\t        \t\t\t\tcurrentTerms.splice(newpos, 0, val);\n\t\t\t\t        \t\t\t}\n\t\t\t\t        \t\t\tbreak\n\t\t\t\t        \t\t\t\n\t\t        \t\t\t\t}\n\t\t        \t\t\t}\n\t\t        \t\t\tif (position==-1) { // not sure why it couldn't be found\n\t\t        \t\t\t\tcurrentTerms.push(val);\n\t\t        \t\t\t}\t\t        \t\t\t\n\t        \t\t\t}\n\t        \t\t\t\n\t        \t\t\tme.setApiParam('query', currentTerms);\n\t        \t\t\tme.updateFromQueries(currentTerms.length==0);\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t},\n\t        \t\tscope: this\n\t            }]\n\t\t\t},\n\t\t\tbodyPadding: 5\n\t\t}).show()\n    },\n    \n    updateFromQueries: function(allowEmpty) {\n\t\tthis.magnets = undefined;\n\t\tthis.documents.forEach(function(doc) {doc.matches=[]})\n\t\tthis.updateDocs();\n\t\tthis.draw();\n    \tif (this.documents) {\n    \t\tvar params = this.getApiParams();\n    \t\tif (!params.query) {params.limit=10;}\n        \tvar queries = Ext.Array.from(this.getApiParam('query'));\n        \tif (!allowEmpty || queries.length>0) {\n        \t\tthis.getCorpus().getCorpusTerms().load({\n        \t\t\tparams: Ext.apply(params, {withDistributions: true}),\n        \t\t\tcallback: function(records) {\n        \t\t    \tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\"), ctx = canvas.getContext(\"2d\");\n        \t\t    \t\tdiam = canvas.width, rad = diam /2;\n        \t\t    \tctx.font = this.textFont;\n        \t\t    \tvar magnets = {};\n        \t\t    \tfor (var i=0, len=records.length; i<len; i++) {\n        \t\t    \t\tvar term = records[i].getTerm();\n        \t\t    \t\trecords[i].getDistributions().forEach(function(val, i) {\n        \t\t    \t\t\tif (val>0) {\n        \t\t    \t\t\t\tthis.documents[i].matches.push(term)\n        \t\t    \t\t\t}\n        \t\t    \t\t}, this);\n        \t\t    \t\tmagnets[term] = {\n        \t\t    \t\t\trecord: records[i],\n        \t\t    \t\t\tcolour: this.getApplication().getColor(i),\n        \t\t    \t\t\twidth: ctx.measureText(term).width,\n        \t\t    \t\t\tisHovering: false\n        \t\t    \t\t}\n        \t\t    \t}\n\n        \t\t    \tthis.magnets = {};\n        \t\t    \t\n        \t\t    \t// try ordering by queries\n        \t\t    \tqueries.forEach(function(query) {\n        \t\t    \t\tif (magnets[query]) {\n            \t\t    \t\tthis.magnets[query] = magnets[query]\n            \t\t    \t\tdelete magnets[query]\n        \t\t    \t\t}\n        \t\t    \t}, this);\n        \t\t    \t\n        \t\t    \t// now for any leftovers\n        \t\t    \tfor (term in magnets) {\n        \t\t    \t\tthis.magnets[term] = magnets[term]\n        \t\t    \t}\n        \t\t    \t\n        \t\t    \tthis.setApiParam('query', Object.keys(this.magnets))\n        \t\t    \tthis.updateMagnets();\n        \t\t    \tthis.updateDocs();\n        \t\t    \tthis.draw();\n        \t\t\t},\n        \t\t\tscope: this\n        \t\t})\n        \t}\n    \t}\n    },\n    \n    updateMagnets: function(canvas) {\n    \tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\"), diam = canvas.width, rad = diam /2;\n    \tvar len = Object.keys(this.magnets || {}).length;\n    \tvar i = 0;\n    \tfor (var term in this.magnets) {\n    \t\tExt.apply(this.magnets[term], {\n\t\t\t\tx:  rad+((rad-this.gutter-50) * Math.cos(2 * Math.PI * i / len)),\n\t\t\t\ty:  rad+((rad-this.gutter-50) * Math.sin(2 * Math.PI * i / len))\n    \t\t})\n    \t\ti++;\n    \t}\n    },\n    \n    updateDocs: function(canvas) {\n    \tcanvas = canvas ||  this.getTargetEl().dom.querySelector(\"canvas\"), diam = canvas.width, rad = diam /2;\n    \tvar notMatching = [];\n    \tif (this.documents) {\n        \tthis.documents.forEach(function(doc, i) {\n        \t\tif (Ext.Array.from(doc.matches).length==0) {notMatching.push(i);} // will be set around perimeter below\n        \t\telse if (Ext.Array.from(doc.matches).length==1) { // try to set it away from magnet\n        \t\t\tvar x = (Math.random()*15)+15, y = (Math.random()*15)+15;\n        \t\t\tdoc.targetX = this.magnets[doc.matches[0]].x + (Math.round(Math.random())==0 ? x : -x);\n        \t\t\tdoc.targetY = this.magnets[doc.matches[0]].y + (Math.round(Math.random())==0 ? y : -y);\n        \t\t} else {\n        \t\t\t// determine the weighted position\n        \t\t\tvar x = 0, y = 0,\n        \t\t\t\tvals = doc.matches.map(function(term) {return this.magnets[term].record.getDistributions()[i]}, this),\n        \t\t\t\tmin = Ext.Array.min(vals), max = Ext.Array.max(vals);\n        \t\t\tvar weights = 0;\n        \t\t\tdoc.matches.forEach(function(term, j) {\n        \t\t\t\tweight = max==min ? 1 : ((vals[j]-min)+min)/((max-min)+min);\n        \t\t\t\tweights += weight;\n        \t\t\t\tx += this.magnets[term].x*weight;\n        \t\t\t\ty += this.magnets[term].y*weight;\n        \t\t\t\t\n        \t\t\t}, this)\n        \t\t\tdoc.targetX = x/weights\n        \t\t\tdoc.targetY = y/weights\n        \t\t}\n        \t}, this);\n        \t\n        \t// set around perimeter\n        \tfor (var i=0, len=notMatching.length; i<len; i++) {\n        \t\tExt.apply(this.documents[i], {\n    \t\t\t\ttargetX:  rad+((rad-this.gutter) * Math.cos(2 * Math.PI * i / len)),\n    \t\t\t\ttargetY:  rad+((rad-this.gutter) * Math.sin(2 * Math.PI * i / len))\n        \t\t})\n        \t}\n    \t}\n    },\n    \n    draw: function(canvas, ctx) {\n    \tcanvas = canvas ||  this.getTargetEl().dom.querySelector(\"canvas\");\n    \tctx = ctx || canvas.getContext(\"2d\");\n    \tctx.font = this.textFont;\n    \tvar radius = canvas.width/2;\n    \tctx.clearRect(0,0,canvas.width,canvas.height);\n    \tvar labels = this.getApiParam(\"labels\")===true || this.getApiParam(\"labels\")==\"true\";\n    \t\n    \t// draw circle\n    \tctx.beginPath();\n    \tctx.strokeStyle = \"rgba(0,0,0,.1)\"\n        ctx.fillStyle = \"rgba(0,0,0,.02)\"\n    \tctx.arc(radius, radius, radius-this.gutter, 0, 2 * Math.PI, false);\n    \tctx.fill();\n    \tctx.lineWidth = 2;\n    \tctx.stroke();\n    \t\n    \t// determine if we're animating a move and need to come back\n    \tvar needRedraw = false;\n    \t\n    \t// draw documents\n    \t\n    \tif (this.documents && this.documents.length>0) {\n    \t\tvar needMove = false;\n    \t\t\n    \t\tvar noHovering = Ext.Array.each(this.documents, function(doc) {\n    \t\t\treturn !doc.isHovering\n    \t\t}, this);\n    \t\t\n    \t\tif (noHovering===true) {\n    \t\t\tnoHovering = Ext.Array.each(Object.keys(this.magnets || {}), function(term) {\n        \t\t\treturn !this.magnets[term].isHovering\n        \t\t}, this);\n    \t\t}\n\t\t\t// go through a first time to draw connecting lines underneath\n    \t\tvar hoveringTerms = {}; hoveringDocs = [];\n    \t\tthis.documents.forEach(function(document, j) {\n\t        \tdocument.matches.forEach(function(term, i) {\n\t        \t\tctx.beginPath();\n\t        \t\tctx.moveTo(document.x, document.y);\n\t        \t\tctx.lineTo(this.magnets[term].x, this.magnets[term].y);\n\t        \t\tif (noHovering===true) {\n\t\t        \t\tctx.strokeStyle = \"rgba(\"+this.magnets[term].colour.join(\",\")+\",.1)\";\n\t        \t\t} else {\n\t        \t\t\tif (document.isHovering || this.magnets[term].isHovering) {\n\t        \t\t\t\thoveringDocs[j]=true;\n\t        \t\t\t\thoveringTerms[term]=true;\n\t\t\t        \t\tctx.strokeStyle = \"rgba(\"+this.magnets[term].colour.join(\",\")+\",.5)\";\n\t        \t\t\t} else {\n\t\t        \t\t\tctx.strokeStyle = \"rgba(0,0,0,.02)\";\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\tctx.stroke();\n\t        \t}, this);\n    \t\t}, this);\n    \t\t\t\n\t\t\t// now a second time for labels/markers\n    \t\tvar halfSize = parseInt(this.textFont)/2, height = parseInt(this.textFont)+4;\n    \t\tthis.documents.forEach(function(document, i) {\n    \t\t\t\n    \t\t\t// draw marker/label\n    \t\t\tif (labels || document.isHovering || hoveringDocs[i]==true) {\n\t    \t\t    var width = document.width+4;\n\t\t\t        ctx.fillStyle = document.isHovering || hoveringDocs[i]==true || noHovering===true ? \"white\" : \"rgba(255,255,255,.05)\"\n\t    \t\t    ctx.fillRect(document.x-(width/2), document.y-(height/2), width, height);\n\t\t\t        ctx.strokeStyle = document.isHovering || hoveringDocs[i]==true || noHovering===true ? \"rgba(0,0,0,.2)\" : \"rgba(0,0,0,.05)\"\n\t    \t\t    ctx.strokeRect(document.x-(width/2), document.y-(height/2), width, height);\n\t\t\t        ctx.textAlign = \"center\";\n\t\t\t        ctx.fillStyle = document.isHovering || hoveringDocs[i]==true || noHovering===true ? \"rgba(0,0,0,.8)\" : \"rgba(0,0,0,.05)\";\n\t    \t\t    ctx.fillText(document.label, document.x, document.y);\n    \t\t\t} else {\n    \t\t    \tctx.beginPath();\n    \t\t        ctx.fillStyle = \"rgba(0,0,0,.8)\"\n    \t\t    \tctx.arc(document.x, document.y, halfSize, 0, 2 * Math.PI);\n    \t        \tctx.fill();\n    \t\t    \tctx.stroke();\n    \t\t\t}\n\t        \t\n\t        \t// determine if we need to move\n\t\t    \tvar dx = Math.abs(document.x - document.targetX), dy = Math.abs(document.y- document.targetY)\n\t\t    \tif (dx!=0 || dy!=0) {\n\t\t    \t\tif (dx<1) {document.x = document.targetX}\n\t\t    \t\telse {\n\t\t    \t\t\tdx/=2;\n\t\t    \t\t\tdocument.x = document.x > document.targetX ? document.x-dx : document.x+dx;\n\t\t    \t\t}\n\t\t    \t\tif (dy<1) {document.y = document.targetY}\n\t\t    \t\telse {\n\t\t    \t\t\tdy/=2;\n\t\t    \t\t\tdocument.y = document.y > document.targetY ? document.y-dy : document.y+dy;\n\t\t    \t\t}\n\t\t    \t\tneedRedraw = true;\n\t\t    \t}\n    \t\t}, this);\n    \t\t\n    \t\t// now magnets\n    \t\tvar i = 0, height = parseInt(this.textFont)+4;\n\t        ctx.textAlign = \"center\";\n\t        ctx.textBaseline=\"middle\";\n\t        for (var term in this.magnets) {\n\t        \tif (labels || term in hoveringTerms || this.magnets[term].isHovering) {\n\t    \t\t    var width = this.magnets[term].width+4;\n\t\t\t        ctx.fillStyle = term in hoveringTerms || this.magnets[term].isHovering || noHovering===true ? \"white\" : \"rgba(255,255,255,.05)\";\n\t    \t\t    ctx.fillRect(this.magnets[term].x-(width/2), this.magnets[term].y-(height/2), width, height);\n\t\t\t        ctx.strokeStyle = term in hoveringTerms || this.magnets[term].isHovering || noHovering===true ? \"rgb(\"+this.magnets[term].colour.join(\",\")+\")\" : \"rgba(0,0,0,.05)\";\n\t    \t\t    ctx.strokeRect(this.magnets[term].x-(width/2), this.magnets[term].y-(height/2), width, height);\n\t\t\t        ctx.textAlign = \"center\";\n\t\t\t        ctx.fillStyle = term in hoveringTerms || this.magnets[term].isHovering || noHovering===true ?\"rgba(0,0,0,.8)\" : \"rgba(0,0,0,.05)\";\n\t    \t\t    ctx.fillText(term, this.magnets[term].x, this.magnets[term].y);\n\t        \t} else {\n\t\t\t    \tctx.beginPath();\n\t\t\t        ctx.fillStyle = \"rgb(\"+this.magnets[term].colour.join(\",\")+\")\"\n\t\t\t        ctx.strokeStyle = \"rgb(\"+this.magnets[term].colour.join(\",\")+\")\"\n\t\t\t    \tctx.arc(this.magnets[term].x, this.magnets[term].y, 12, 0, 2 * Math.PI);\n\t\t        \tctx.fill();\n\t\t\t    \tctx.stroke();\n\t        \t}\n    \t\t}\n    \t}\n    \t\n\t\tif (needRedraw) {\n\t\t\tvar me = this;\n\t\t\tsetTimeout(function() {\n\t\t\t\tme.draw();\n\t\t\t}, 100);\n\t\t} else if (this.documents) {\n\t\t\tvar minDist = Math.max(radius/this.documents.length, 50), spring = .1\n\t\t\tfor (var i=0, len=this.documents.length; i<len; i++) {\n\t\t\t\tfor (var j=0; j<len; j++) {\n\t\t\t\t\tif (i<j) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar dx = this.documents[i].x  - this.documents[j].x,\n\t\t\t\t\t\t\tdy = this.documents[i].y - this.documents[j].y,\n\t\t\t\t\t\t\tdist = Math.sqrt(dx * dx + dy * dy);\n\t\t\t\t\t\tif (dist < minDist) {\n\t\t\t\t\t\t\tvar ax = dx * spring, ay = dy * spring;\n\t\t\t\t\t\t\tthis.documents[i].targetX += ax;\n\t\t\t\t\t\t\tthis.documents[j].targetX -= ax;\n\t\t\t\t\t\t\tthis.documents[i].targetY += ay;\n\t\t\t\t\t\t\tthis.documents[j].targetY -= ay;\n\t\t\t\t\t\t\tneedRedraw = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (needRedraw) {\n\t\t\t\tvar me = this;\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tme.draw();\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t}\n    }\n    \n});","Ext.define('Voyant.panel.MicroOcp', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.microocp',\n    statics: {\n    \ti18n: {\n    \t\ttitle: \"MicroOCP\"\n    \t},\n    \tapi: {\n    \t\tconfig: undefined,\n    \t\tstopList: 'auto',\n    \t\turi: undefined\n    \t},\n\t\tglyph: 'xf1ea@FontAwesome'\n    },\n    config: {\n    \teditor: undefined\n    },\n    \n    constructor: function(config) {\n    \tconfig = config || {};\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // we need api\n\t\t\n\t\t\n\t    var store = Ext.create('Ext.data.Store', {\n\t        fields: [{\n\t            name: 'cocoa',\n\t            type: 'string'\n\t        }]});\n\t    \n\t    var microocp = this;\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tlayout: 'border',\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                groupId: 'tbar',\n                items: [{\n                \ttext: \"Create New Voyant Corpus\",\n                \thandler: function() {\n                \t\tvar items = this.down('grid').getSelectionModel().getSelection().map(function(item) {return item.get(\"cocoa\")});\n              // items = [\"one\",\"one two\",\"two\"]\n                \t\tif (items.length==0) {\n                \t\t\treturn this.showError({title: \"Error\", msg: \"No items are selected in the grid (on the right).\"})\n                \t\t}\n                \t\t// convert to map for faster lookup\n                \t\titemsMap = {};\n                \t\titems.forEach(function(item) {itemsMap[item]=true})\n                \t\t\n                \t\t\n\t\t\t\t\t\tvar str = this.getEditor().getValue();\n               // str = \"<one>this<one two>is<two>a</one>sentence<two> <one>another\"\n\t\t\t\t\t\tvar tags = /<(\\/)?(\\w+)(\\s(\\w+))?>/g;\n\t\t\t\t\t\tvar matches;\n\t\t\t\t\t\tvar tagsMap = {}\n\t\t\t\t\t\twhile ((matches = tags.exec(str)) != null) {\n\t\t\t\t\t\t\tvar isClose = matches[1]==\"/\", tag = matches[2], attr = matches[4],\n\t\t\t\t\t\t\t\titem = (matches[4] ? matches[2]+\" \"+matches[4] : matches[2]);\n\t\t\t\t\t\t\tif (isClose || item in itemsMap) {\n\t\t\t\t\t\t\t\tif (tag in tagsMap) {\n\t\t\t\t\t\t\t\t\ttagsMap[tag][tagsMap[tag].length-1].end = matches.index\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!isClose) {\n\t\t\t\t\t\t\t\t\tif (!(tag in tagsMap)) {tagsMap[tag] = []}\n\t\t\t\t\t\t\t\t\ttagsMap[tag].push({\n\t\t\t\t\t\t\t\t\t\tstart: matches.index+matches[0].length,\n\t\t\t\t\t\t\t\t\t\ttag: tag,\n\t\t\t\t\t\t\t\t\t\tattr: attr\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (item in itemsMap) {\n\t\t\t\t\t\t\t\tif (tag in tagsMap) {\n\t\t\t\t\t\t\t\t\ttagsMap[tag][tagsMap[tag].length-1].end = matches.index\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n                \t\t// this should be more robust\n                \t\tisGroupItems = this.getDockedComponent(1).down('checkbox').checked;\n\n                \t\tvar documents = [];\n                \t\tif (isGroupItems) {\n                \t\t\tvar docs = {};\n    \t\t\t\t\t\tfor (var tag in tagsMap) {\n    \t\t\t\t\t\t\ttagsMap[tag].forEach(function(entry,i) {\n    \t\t\t\t\t\t\t\tvar text = str.substring(entry.start, entry.end).replace(/<\\/?\\w+(\\s+\\w)*>/g, \"\").trim();\n    \t\t\t\t\t\t\t\tif (text) {\n    \t\t\t\t\t\t\t\t\tvar item = entry.tag+(entry.attr ? \" \"+entry.attr : \"\");\n    \t\t\t\t\t\t\t\t\tif (item in docs) {\n    \t\t\t\t\t\t\t\t\t\tdocs[item]+= text;\n    \t\t\t\t\t\t\t\t\t} else {\n    \t\t\t\t\t\t\t\t\t\tdocs[item] = text;\n    \t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t})\n    \t\t\t\t\t\t}\n    \t\t\t\t\t\tfor (var item in docs) {\n    \t\t\t\t\t\t\tdocuments.push({\n    \t\t\t\t\t\t\t\ttitle: item,\n    \t\t\t\t\t\t\t\ttext: docs[item]\n    \t\t\t\t\t\t\t})\n    \t\t\t\t\t\t}\n                \t\t} else {\n    \t\t\t\t\t\tfor (var tag in tagsMap) {\n    \t\t\t\t\t\t\ttagsMap[tag].forEach(function(entry,i) {\n    \t\t\t\t\t\t\t\tvar text = str.substring(entry.start, entry.end).replace(/<\\/?\\w+(\\s+\\w)*>/g, \"\").trim();\n    \t\t\t\t\t\t\t\tif (text) {\n    \t\t\t\t\t\t\t\t\tdocuments.push({\n    \t\t\t\t\t\t\t\t\t\ttitle: entry.tag+(entry.attr ? \" \"+entry.attr : \"\")+\" \"+(i+1),\n    \t\t\t\t\t\t\t\t\t\ttext: text\n    \t\t\t\t\t\t\t\t\t})\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t})\n    \t\t\t\t\t\t}\n                \t\t}\n\n                \t\tif (documents.length==0) {\n                \t\t\treturn this.showError({title: \"Error\", msg: \"No documents found.\"})\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.mask();\n\t\t\t\t\t\tvar progress = Ext.Msg.progress(\"Creating\", \"Creating new corpus.\");\n\t\t\t\t\t\t// create new corpus\n\t\t\t\t\t\tvar me = this;\n\t\t\t\t\t\tnew Corpus({\n\t\t\t\t\t\t\tinputFormat: 'json',\n\t\t\t\t\t\t\tinput: Ext.JSON.encode({documents: documents}),\n\t\t\t\t\t\t\tjsonDocumentsPointer: \"/documents\",\n\t\t\t\t\t\t\tjsonTitlePointer: \"/title\",\n\t\t\t\t\t\t\tjsonContentPointer: \"/text\"\n\t\t\t\t\t\t}).then(function (corpus) {\n\t\t\t\t\t\t\tprogress.close();\n\t\t\t\t\t\t\tme.unmask();\n\t\t\t\t\t\t\tvar app = me.getApplication();\n\t\t\t\t\t\t\tme.openUrl(app.getBaseUrl()+\"?corpus=\"+corpus.getAliasOrId())\n\t\t\t\t\t\t});\n\n                \t\t\n                \t},\n                \tscope: this\n                },{\n                \txtype: 'checkbox',\n                \tboxLabel: \"Combine documents with the same tag attribute.\",\n                \tchecked: true\n                }]\n            }],\n    \t\titems: [{\n\t\t        \txtype: 'panel',\n    \t\t    \tautoScroll: true,\n\t\t        \tflex: 1,\n\t\t        \theight: '100%',\n\t\t        \talign: 'stretch',\n\t\t        \theader: false,\n\t\t        \tregion: 'center',\n\t\t        \tlisteners: {\n\t\t        \t\tboxready: function() {\n\t\t        \t\t\tvar me = this;\n\t\t\t\t\t\t\t/* TODO swap out ace for codemirror\n\t\t        \t\t\tvar editor = ace.edit(Ext.getDom(this.getEl()));\n\t\t        \t\t\tmicroocp.setEditor(editor); // set to the containing panel\n//\t\t        \t\t\teditor.setOptions({enableBasicAutocompletion: false, enableLiveAutocompletion: false});\n//\t\t        \t\t\teditor.setTheme(\"ace/theme/monokai\");\n\t\t        \t\t\teditor.getSession().setMode(\"ace/mode/xml\")\n//\t\t        \t\t\teditor.$blockScrolling = Infinity;\n//\t\t        \t\t\teditor.getSession().setUseWorker(true);\n//\t\t        \t\t\teditor.setTheme(this.getTheme());\n//\t\t        \t\t\teditor.getSession().setMode(this.getMode());\n//\t\t        \t\t\teditor.setOptions({minLines: 6, maxLines: this.getMode().indexOf(\"javascript\")>-1 ? Infinity : 10, autoScrollEditorIntoView: true, scrollPastEnd: true});\n//\t\t        \t\t\teditor.setHighlightActiveLine(false);\n\t\t        \t\t\teditor.renderer.setShowPrintMargin(false);\n\t\t        \t\t\teditor.renderer.setShowGutter(false);\n//\t\t        \t\t\teditor.setValue(this.getContent() ? this.getContent() : this.localize('emptyText'));\n//\t\t        \t\t\teditor.clearSelection();\n//\t\t        \t\t    editor.on(\"focus\", function() {\n//\t\t        \t\t    \tme.getEditor().renderer.setShowGutter(true);\n//\t\t        \t\t    }, this);\n\t\t        \t\t\teditor.$blockScrolling = Infinity\n\t\t        \t\t\teditor.setOptions({autoScrollEditorIntoView: true});\n\t\t        \t\t\teditor.setBehavioursEnabled(false); // disable auto-complete\n\t\t        \t\t\teditor.on(\"change\", function(delta) {\n\t\t        \t\t\t\treparse = false;\n\t\t        \t\t\t\tif (delta.action==\"insert\") {\n\t\t        \t\t\t\t\tif (delta.lines[0].indexOf(\">\")==0) { // close tag\n\t\t        \t\t\t\t\t\treparse = true\n\t\t        \t\t\t\t\t}\n\t\t        \t\t\t\t} else if (delta.action==\"remove\") {\n\t\t        \t\t\t\t\tfor (var i=0; i<delta.lines.length; i++) {\n\t\t        \t\t\t\t\t\tif (delta.lines[i].indexOf(\">\")>-1) {\n\t\t        \t\t\t\t\t\t\treparse = true;\n\t\t        \t\t\t\t\t\t\tbreak;\n\t\t        \t\t\t\t\t\t}\n\t\t        \t\t\t\t\t}\n\t\t        \t\t\t\t}\n\t\t        \t\t\t\tif (reparse) {\n\t\t        \t\t\t\t\tExt.defer(function() {\n\t\t        \t\t\t\t\t\tvar str = editor.getValue();\n\t\t        \t\t\t\t\t\tvar tags = /<(\\w+)(\\s(\\w+))?>/g;\n\t\t        \t\t\t\t\t\tvar matches;\n\t\t        \t\t\t\t\t\tvar expressions = {}\n\t\t        \t\t\t\t\t\twhile ((matches = tags.exec(str)) != null) {\n\t\t        \t\t\t\t\t\t\tif (matches[3]) {expressions[matches[1]+\" \"+matches[3]]=true}\n\t\t        \t\t\t\t\t\t\telse {expressions[matches[1]]=true}\n\t\t        \t\t\t\t\t\t}\n\t\t        \t\t\t\t\t\t\n\t\t        \t\t\t\t\t\tvar store = this.up(\"panel\").down(\"grid\").getStore();\n\t\t        \t\t\t\t\t\tvar inStoreItems = {};\n\t\t        \t\t\t\t\t\tstore.getRange().forEach(function(item) {inStoreItems[item.get(\"cocoa\")]=true;});\n\t\t        \t\t\t\t\t\t\n\t\t        \t\t\t\t\t\tfor (item in expressions) {\n\t\t        \t\t\t\t\t\t\tif (!(item in inStoreItems)) {\n\t\t        \t\t\t\t\t\t\t\tstore.add({cocoa: item});\n\t\t        \t\t\t\t\t\t\t}\n\t\t        \t\t\t\t\t\t}\n\t\t        \t\t\t\t\t\tfor (inStoreItem in inStoreItems) {\n\t\t        \t\t\t\t\t\t\tif (!(inStoreItem in expressions)) {\n\t\t        \t\t\t\t\t\t\t\tvar rec = store.findRecord(\"cocoa\", inStoreItem)\n\t\t        \t\t\t\t\t\t\t\tstore.remove(rec);\n\t\t        \t\t\t\t\t\t\t}\n\t\t        \t\t\t\t\t\t}\n\t\t        \t\t\t\t\t\t\n\t\t        \t\t\t\t\t\t\n\t\t        \t\t\t\t\t}, 100, me)\n\t\t        \t\t\t\t}\n\t\t        \t\t\t})\n\t\t            \t\tif (microocp.getApiParam(\"uri\")) {\n\t\t            \t\t\tNotebook.loadDataFromUrl(microocp.getApiParam(\"uri\")).then(function(data) {\n\t\t            \t\t\t\tmicroocp.getEditor().setValue(data);\n\t\t            \t\t\t})\n\t\t            \t\t}\n\t\t\t\t\t\t\t*/\n\n\t\t        \t\t}\n\n\t\t        \t}\n\t\t        }, {\n\t\t        \txtype: 'grid',\n\t\t        \tregion: 'east',\n\t\t        \theight: '100%',\n\t\t        \talign: 'stretch',\n//    \t\t    \tautoScroll: true,\n    \t\t    \tscrollable: true,\n    \t\t    \theader: false,\n\n\t\t        \twidth: 200,\n\t\t    \t\tselModel: Ext.create('Ext.selection.CheckboxModel', {\n\t\t    \t\t\tmode: 'SIMPLE'\n\t\t            }),\n\t\t            store: store,\n\t\t            columns: [ {\n\t\t                text: 'COCOA',\n\t\t                flex: 1,\n\t\t                dataIndex: 'cocoa'\n\t\t            }]\n\t\t        }]\n    \t});\n\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tif (this.getApiParam('uri')) {return;}\n    \t\tvar me = this;\n    \t\tcorpus.getPlainText().then(function(text) {\n    \t\t\ttext = text.replace(/(\\r\\n|\\r|\\n)(\\r\\n|\\r|\\n)(\\r\\n|\\r|\\n)+/g,\"\\n\\n\")\n\t\t\t\t// TODO swap out ace for codemirror\n    \t\t\t// var editor = me.getEditor();\n    \t\t\t// editor.setValue(text).trim();\n    \t\t\t// editor.scrollToLine(1, true, true, function () {});\n    \t\t})\n    \t}, this);\n    \t\n    \tthis.on('afterrender', function(panel) {\n    \t\tExt.Msg.alert(\"MicroOCP\", \"MicroOCP is an experimental prototype that is intended to give a taste of working with the COCOA markup format (COunt and COncordance on the Atlas). Cocoa tags are like switches, you can place one and that tag remains in effect until the next instance of the tag, which can have an optional attribute (single word). As an enhancement to COCOA, you can also close a tag.<pre>&lt;speaker jack&gt;I'm falling &lt;speaker jill&gt;down the hill.&lt;/speaker&gt;</pre>\")\n    \t});\n    \t\n    \t\n    }\n        \n});\n","/**\n * The Reader tool provides a way of reading documents in the corpus, text is fetched as needed.\n * You can work with corpus text programmatically using {@link Spyral.Corpus#texts}.\n *\n * @example\n * let config = {\n * \t\"limit\": null,\n * \t\"query\": null,\n * \t\"skipTodocId\": null,\n * \t\"start\": null\n * };\n * \n * loadCorpus(\"austen\").tool(\"Reader\", config);\n *\n * @class Reader\n * @tutorial reader\n * @memberof Tools\n */\nExt.define('Voyant.panel.Reader', {\n\textend: 'Ext.panel.Panel',\n\trequires: ['Voyant.data.store.Tokens'],\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.reader',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n\t\t\thighlightEntities: 'Highlight Entities',\n\t\t\tentityType: 'entity type',\n\t\t\tnerVoyant: 'Entity Identification with Voyant',\n\t\t\tnerNssi: 'Entity Identification with NSSI',\n\t\t\tnerSpacy: 'Entity Identification with SpaCy'\n    \t},\n    \tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.Reader\n\t\t\t * @instance\n\t\t\t * @property {start}\n\t\t\t * @default\n\t\t\t */\n    \t\tstart: 0,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Reader\n\t\t\t * @instance\n\t\t\t * @property {limit}\n\t\t\t * @default\n\t\t\t */\n    \t\tlimit: 1000,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Reader\n\t\t\t * @instance\n\t\t\t * @property {String} skipToDocId The document ID to start reading from, defaults to the first document in the corpus.\n\t\t\t */\n    \t\tskipToDocId: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Reader\n\t\t\t * @instance\n\t\t\t * @property {query}\n\t\t\t */\n    \t\tquery: undefined\n    \t},\n    \tglyph: 'xf0f6@FontAwesome'\n\t},\n    config: {\n    \tinnerContainer: undefined,\n    \ttokensStore: undefined, // for loading the tokens to display in the reader\n    \tdocumentsStore: undefined, // for storing a copy of the corpus document models\n    \tdocumentTermsStore: undefined, // for getting document term positions for highlighting\n\t\tdocumentEntitiesStore: undefined, // for storing the results of an entities call\n\t\tenableEntitiesList: true, // set to false when using reader as part of entitiesset\n    \texportVisualization: false,\n    \tlastScrollTop: 0,\n\t\tscrollIntoView: false,\n\t\tinsertWhere: 'beforeEnd',\n    \tlastLocationUpdate: new Date(),\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n    },\n    \n    SCROLL_UP: -1,\n    SCROLL_EQ: 0,\n    SCROLL_DOWN: 1,\n    \n\tLOCATION_UPDATE_FREQ: 100,\n\t\n\tINITIAL_LIMIT: 1000, // need to keep track since limit can be changed when scrolling,\n\n\tMAX_TOKENS_FOR_NER: 100000, // upper limit on document size for ner submission\n\n    constructor: function(config) {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function(config) {\n    \tvar tokensStore = Ext.create(\"Voyant.data.store.Tokens\", {\n    \t\tparentTool: this,\n    \t\tproxy: {\n    \t\t\textraParams: {\n    \t\t\t\tforTool: 'reader'\n    \t\t\t}\n    \t\t}\n    \t})\n    \tvar me = this;\n    \ttokensStore.on(\"beforeload\", function(store) {\n    \t\treturn me.hasCorpusAccess(store.getCorpus());\n    \t})\n    \ttokensStore.on(\"load\", function(s, records, success) {\n    \t\tif (success) {\n\t    \t\tvar contents = \"\";\n\t    \t\tvar documentFrequency = this.localize(\"documentFrequency\");\n\t    \t\tvar isPlainText = false;\n\t    \t\tvar docIndex = -1;\n\t    \t\tvar isLastNewLine = false;\n\t    \t\trecords.forEach(function(record) {\n\t    \t\t\tif (record.getPosition()==0) {\n\t    \t\t\t\tcontents+=\"<h3>\"+this.getDocumentsStore().getById(record.getDocId()).getFullLabel()+\"</h3>\";\n\t    \t\t\t}\n\t    \t\t\tif (record.getDocIndex()!=docIndex) {\n\t    \t\t\t\tisPlainText = this.getDocumentsStore().getById(record.getDocId()).isPlainText();\n\t    \t\t\t\tdocIndex = record.getDocIndex();\n\t    \t\t\t}\n\t    \t\t\tif (record.isWord()) {\n\t    \t\t\t\tisLastNewLine = false;\n\t    \t\t\t\tcontents += \"<span class='word' id='\"+ record.getId() + \"' data-qtip='<div class=\\\"freq\\\">\"+documentFrequency+\" \"+record.getDocumentRawFreq()+\"</div>'>\"+ record.getTerm() + \"</span>\";\n\t    \t\t\t}\n\t    \t\t\telse {\n\t    \t\t\t\tvar newContents = record.getTermWithLineSpacing(isPlainText);\n\t    \t\t\t\tvar isNewLine = newContents.indexOf(\"<br />\")==0;\n\t    \t\t\t\tif (isLastNewLine && (isNewLine || newContents.trim().length==0)) {}\n\t    \t\t\t\telse {\n\t    \t\t\t\t\tcontents += newContents;\n\t    \t\t\t\t\tisLastNewLine = isNewLine;\n\t    \t\t\t\t}\n\t    \t\t\t}\n\t    \t\t}, this);\n\t    \t\tthis.updateText(contents);\n\t    \t\t\n\t    \t\tthis.highlightKeywords();\n\n\t\t\t\tif (this.getDocumentEntitiesStore() !== undefined) {\n\t\t\t\t\tthis.highlightEntities();\n\t\t\t\t}\n    \t\t}\n    \t}, this);\n    \tthis.setTokensStore(tokensStore);\n    \t\n    \tthis.on(\"query\", function(src, queries) {\n    \t\tthis.loadQueryTerms(queries);\n    \t}, this);\n    \t\n    \tthis.setDocumentTermsStore(Ext.create(\"Ext.data.Store\", {\n\t\t\tmodel: \"Voyant.data.model.DocumentTerm\",\n    \t\tautoLoad: false,\n    \t\tremoteSort: false,\n    \t\tproxy: {\n\t\t\t\ttype: 'ajax',\n\t\t\t\turl: Voyant.application.getTromboneUrl(),\n\t\t\t\textraParams: {\n\t\t\t\t\ttool: 'corpus.DocumentTerms',\n\t\t\t\t\twithPositions: true,\n\t\t\t\t\tbins: 25,\n\t\t\t\t\tforTool: 'reader'\n\t\t\t\t},\n\t\t\t\treader: {\n\t\t\t\t\ttype: 'json',\n\t\t            rootProperty: 'documentTerms.terms',\n\t\t            totalProperty: 'documentTerms.total'\n\t\t\t\t},\n\t\t\t\tsimpleSortMode: true\n   \t\t    },\n   \t\t    listeners: {\n   \t\t    load: function(store, records, successful, opts) {\n   \t\t    \t\tthis.highlightKeywords(records);\n   \t\t    \t},\n   \t\t    \tscope: this\n   \t\t    }\n    \t}));\n    \t\n    \tthis.on(\"afterrender\", function() {\n    \t\tvar centerPanel = this.down('panel[region=\"center\"]');\n    \t\tthis.setInnerContainer(centerPanel.getLayout().getRenderTarget());\n    \t\t\n    \t\t// scroll listener\n    \t\tcenterPanel.body.on(\"scroll\", function(event, target) {\n    \t\t\tvar scrollDir = this.getLastScrollTop() < target.scrollTop ? this.SCROLL_DOWN\n    \t\t\t\t\t\t\t\t: this.getLastScrollTop() > target.scrollTop ? this.SCROLL_UP\n\t\t\t\t\t\t\t\t\t: this.SCROLL_EQ;\n    \t\t\t\n    \t\t\t// scroll up\n    \t\t\tif (scrollDir == this.SCROLL_UP && target.scrollTop < 1) {\n    \t\t\t\tthis.fetchPrevious(true);\n    \t\t\t// scroll down\n    \t\t\t} else if (scrollDir == this.SCROLL_DOWN && target.scrollHeight - target.scrollTop < target.offsetHeight*1.5) {//target.scrollTop+target.offsetHeight>target.scrollHeight/2) { // more than half-way down\n    \t\t\t\tthis.fetchNext(false);\n    \t\t\t} else {\n    \t\t\t\tvar amount;\n    \t\t\t\tif (target.scrollTop == 0) {\n    \t\t\t\t\tamount = 0;\n    \t\t\t\t} else if (target.scrollHeight - target.scrollTop == target.clientHeight) {\n    \t\t\t\t\tamount = 1;\n    \t\t\t\t} else {\n    \t\t\t\t\tamount = (target.scrollTop + target.clientHeight * 0.5) / target.scrollHeight;\n    \t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar now = new Date();\n        \t\t\tif (now - this.getLastLocationUpdate() > this.LOCATION_UPDATE_FREQ || amount == 0 || amount == 1) {\n        \t\t\t\tthis.updateLocationMarker(amount, scrollDir);\n        \t\t\t}\n    \t\t\t}\n    \t\t\tthis.setLastScrollTop(target.scrollTop);\n    \t\t}, this);\n    \t\t\n    \t\t// click listener\n    \t\tcenterPanel.body.on(\"click\", function(event, target) {\n    \t\t\ttarget = Ext.get(target);\n\t\t\t\t// if (target.hasCls('entity')) {} TODO\n    \t\t\tif (target.hasCls('word')) {\n    \t\t\t\tvar info = Voyant.data.model.Token.getInfoFromElement(target);\n    \t\t\t\tvar term = target.getHtml();\n    \t\t\t\tvar data = [{\n    \t\t\t\t\tterm: term,\n    \t\t\t\t\tdocIndex: info.docIndex\n    \t\t\t\t}];\n    \t\t\t\tthis.loadQueryTerms([term]);\n    \t\t\t\tthis.getApplication().dispatchEvent('termsClicked', this, data);\n    \t\t\t}\n    \t\t}, this);\n    \t\t\n    \t\tif (this.getCorpus()) {\n\t\t\t\tif (this.getApiParam('skipToDocId') === undefined) {\n\t\t\t\t\tthis.setApiParam('skipToDocId', this.getCorpus().getDocument(0).getId());\n\t\t\t\t}\n    \t\t\tthis.load();\n\t    \t\tvar query = this.getApiParam('query');\n\t    \t\tif (query) {\n\t    \t\t\tthis.loadQueryTerms(Ext.isString(query) ? [query] : query);\n\t    \t\t}\n    \t\t}\n\t\t\tthis.on(\"loadedCorpus\", function() {\n\t\t\t\tif (this.getApiParam('skipToDocId') === undefined) {\n\t\t\t\t\tthis.setApiParam('skipToDocId', this.getCorpus().getDocument(0).getId());\n\t\t\t\t}\n    \t\t\tthis.load(true); // make sure to clear in case we're replacing the corpus\n\t    \t\tvar query = this.getApiParam('query');\n\t    \t\tif (query) {\n\t    \t\t\tthis.loadQueryTerms(Ext.isString(query) ? [query] : query);\n\t    \t\t}\n\t\t\t}, this);\n    \t}, this);\n    \t\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tcls: 'voyant-reader',\n    \t    layout: 'fit',\n    \t    items: {\n    \t    \tlayout: 'border',\n    \t    \titems: [{\n    \t\t    \tbodyPadding: 10,\n    \t\t    \tregion: 'center',\n    \t\t    \tborder: false,\n    \t\t    \tautoScroll: true,\n    \t\t    \thtml: '<div class=\"readerContainer\"></div>'\n    \t\t    },{\n\t\t\t\t\txtype: 'readergraph',\n    \t\t    \tregion: 'south',\n\t\t\t\t\tweight: 0,\n    \t\t    \theight: 30,\n    \t\t    \tsplit: {\n    \t\t    \t\tsize: 2\n    \t\t    \t},\n    \t\t    \tsplitterResize: true,\n\t\t\t\t\tborder: false,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tdocumentRelativePositionSelected: function(src, data) {\n\t\t\t\t\t\t\tvar doc = this.getDocumentsStore().getAt(data.docIndex);\n\t\t\t\t\t\t\tvar totalTokens = doc.get('tokensCount-lexical');\n\t\t\t\t\t\t\tvar position = Math.floor(totalTokens * data.fraction);\n\t\t\t\t\t\t\tvar bufferPosition = position - (this.getApiParam('limit')/2);\n\t\t\t\t\t\t\tthis.setApiParams({'skipToDocId': doc.getId(), start: bufferPosition < 0 ? 0 : bufferPosition});\n\t\t\t\t\t\t\tthis.load(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n    \t\t    },{\n\t\t\t\t\txtype: 'entitieslist',\n\t\t\t\t\tregion: 'east',\n\t\t\t\t\tweight: 10,\n\t\t\t\t\twidth: '40%',\n\t\t\t\t\tsplit: {\n\t\t\t\t\t\tsize: 2\n\t\t\t\t\t},\n\t\t\t\t\tsplitterResize: true,\n\t\t\t\t\tborder: false,\n\t\t\t\t\thidden: true,\n\t\t\t\t\tcollapsible: true,\n\t\t\t\t\tanimCollapse: false\n\t\t\t\t}]\n    \t    },\n\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \tglyph: 'xf060@FontAwesome',\n            \t\thandler: function() {\n            \t\t\tthis.fetchPrevious(true);\n            \t\t},\n            \t\tscope: this\n            \t},{\n            \t\tglyph: 'xf061@FontAwesome',\n            \t\thandler: function() {\n            \t\t\tthis.fetchNext(true);\n            \t\t},\n            \t\tscope: this\n            \t},{xtype: 'tbseparator'},{\n                    xtype: 'querysearchfield'\n                },'->',{\n\t\t\t\t\tglyph: 'xf0eb@FontAwesome',\n\t\t\t\t\ttooltip: this.localize('highlightEntities'),\n\t\t\t\t\titemId: 'nerServiceParent',\n\t\t\t\t\thidden: true,\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\txtype: 'menucheckitem',\n\t\t\t\t\t\t\tgroup: 'nerService',\n\t\t\t\t\t\t\ttext: this.localize('nerSpacy'),\n\t\t\t\t\t\t\titemId: 'spacy',\n\t\t\t\t\t\t\tchecked: true,\n\t\t\t\t\t\t\thandler: this.nerServiceHandler,\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\txtype: 'menucheckitem',\n\t\t\t\t\t\t\tgroup: 'nerService',\n\t\t\t\t\t\t\ttext: this.localize('nerNssi'),\n\t\t\t\t\t\t\titemId: 'nssi',\n\t\t\t\t\t\t\tchecked: false,\n\t\t\t\t\t\t\thandler: this.nerServiceHandler,\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\txtype: 'menucheckitem',\n\t\t\t\t\t\t\tgroup: 'nerService',\n\t\t\t\t\t\t\ttext: this.localize('nerVoyant'),\n\t\t\t\t\t\t\titemId: 'stanford',\n\t\t\t\t\t\t\tchecked: false,\n\t\t\t\t\t\t\thandler: this.nerServiceHandler,\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// ,{\n\t\t\t\t\t\t// \txtype: 'menucheckitem',\n\t\t\t\t\t\t// \tgroup: 'nerService',\n\t\t\t\t\t\t// \ttext: 'NER with Voyant (OpenNLP)',\n\t\t\t\t\t\t// \titemId: 'opennlp',\n\t\t\t\t\t\t// \tchecked: false,\n\t\t\t\t\t\t// \thandler: this.nerServiceHandler,\n\t\t\t\t\t\t// \tscope: this\n\t\t\t\t\t\t// }\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}]\n    \t\t}],\n    \t\tlisteners: {\n    \t\t\tloadedCorpus: function(src, corpus) {\n    \t    \t\tthis.getTokensStore().setCorpus(corpus);\n    \t    \t\tthis.getDocumentTermsStore().getProxy().setExtraParam('corpus', corpus.getId());\n    \t    \t\t\n    \t    \t\tvar docs = corpus.getDocuments();\n    \t    \t\tthis.setDocumentsStore(docs);\n\t\t\t\t\t\n    \t    \t\tif (this.rendered) {\n    \t    \t\t\tthis.load();\n        \t    \t\tif (this.hasCorpusAccess(corpus)==false) {\n        \t    \t\t\tthis.mask(this.localize(\"limitedAccess\"), 'mask-no-spinner')\n        \t    \t\t}\n        \t    \t\tvar query = this.getApiParam('query');\n        \t    \t\tif (query) {\n        \t    \t\t\tthis.loadQueryTerms(Ext.isString(query) ? [query] : query);\n        \t    \t\t}\n    \t    \t\t}\n    \t    \t\t\n    \t\t\t},\n            \ttermsClicked: function(src, terms) {\n            \t\tvar queryTerms = [];\n            \t\tterms.forEach(function(term) {\n            \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n            \t\t\telse if (term.term) {queryTerms.push(term.term);}\n            \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n            \t\t});\n            \t\tif (queryTerms.length > 0) {\n            \t\t\tthis.loadQueryTerms(queryTerms);\n            \t\t}\n        \t\t},\n        \t\tcorpusTermsClicked: function(src, terms) {\n        \t\t\tvar queryTerms = [];\n            \t\tterms.forEach(function(term) {\n            \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\n            \t\t});\n            \t\tthis.loadQueryTerms(queryTerms);\n        \t\t},\n        \t\tdocumentTermsClicked: function(src, terms) {\n        \t\t\tvar queryTerms = [];\n            \t\tterms.forEach(function(term) {\n            \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\n            \t\t});\n            \t\tthis.loadQueryTerms(queryTerms);\n        \t\t},\n        \t\tdocumentSelected: function(src, document) {\n        \t\t\tvar corpus = this.getTokensStore().getCorpus();\n        \t\t\tvar doc = corpus.getDocument(document);\n        \t\t\tthis.setApiParams({'skipToDocId': doc.getId(), start: 0});\n\t\t\t\t\tthis.load(true);\n        \t\t},\n        \t\tdocumentsClicked: function(src, documents, corpus) {\n        \t\t\tif (documents.length > 0) {\n            \t\t\tvar doc = documents[0];\n            \t\t\tthis.setApiParams({'skipToDocId': doc.getId(), start: 0});\n\t\t\t\t\t\tthis.load(true);\n            \t\t}\n        \t\t},\n        \t\ttermLocationClicked: function(src, terms) {\n    \t\t\t\tif (terms[0] !== undefined) {\n    \t\t\t\t\tvar term = terms[0];\n    \t\t\t\t\tvar docIndex = term.get('docIndex');\n    \t\t\t\t\tvar position = term.get('position');\n    \t\t\t\t\tthis.showTermLocation(docIndex, position, term);\n    \t\t\t\t};\n        \t\t},\n        \t\tdocumentIndexTermsClicked: function(src, terms) {\n        \t\t\tif (terms[0] !== undefined) {\n    \t\t\t\t\tvar term = terms[0];\n    \t\t\t\t\tvar termRec = Ext.create('Voyant.data.model.Token', term);\n    \t\t\t\t\tthis.fireEvent('termLocationClicked', this, [termRec]);\n        \t\t\t}\n        \t\t},\n\t\t\t\tentityResults: function(src, entities) {\n\t\t\t\t\tif (entities !== null) {\n\t\t\t\t\t\tthis.clearEntityHighlights(); // clear again in case failed documents were rerun\n\t\t\t\t\t\tthis.setDocumentEntitiesStore(entities);\n\t\t\t\t\t\tthis.highlightEntities();\n\t\t\t\t\t\tif (this.getEnableEntitiesList()) {\n\t\t\t\t\t\t\tthis.down('entitieslist').expand().show();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tentitiesClicked: function(src, entities) {\n\t\t\t\t\tif (entities[0] !== undefined) {\n\t\t\t\t\t\tvar entity = entities[0];\n\t\t\t\t\t\tvar docIndex = entity.get('docIndex');\n\t\t\t\t\t\tvar position = entity.get('positions')[0];\n\t\t\t\t\t\tif (Array.isArray(position)) position = position[0];\n\t\t\t\t\t\tthis.showTermLocation(docIndex, position, entity);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tentityLocationClicked: function(src, entity, positionIndex) {\n\t\t\t\t\tvar docIndex = entity.get('docIndex');\n\t\t\t\t\tvar position = entity.get('positions')[positionIndex];\n\t\t\t\t\tif (Array.isArray(position)) position = position[0];\n\t\t\t\t\tthis.showTermLocation(docIndex, position, entity);\n\t\t\t\t},\n\t\t\t\tscope: this\n    \t\t}\n    \t});\n    \t\n        this.callParent(arguments);\n    },\n    \n    loadQueryTerms: function(queryTerms) {\n    \tif (queryTerms && queryTerms.length > 0) {\n\t\t\tvar docId = this.getApiParam('skipToDocId');\n\t\t\tif (docId === undefined) {\n\t\t\t\tvar docIndex = 0;\n\t\t\t\tvar locationInfo = this.getLocationInfo();\n\t\t\t\tif (locationInfo) {\n\t\t\t\t\tdocIndex = locationInfo[0].docIndex;\n\t\t\t\t}\n\t\t\t\tdocId = this.getCorpus().getDocument(docIndex).getId();\n\t\t\t}\n\t\t\tthis.getDocumentTermsStore().load({\n\t\t\t\tparams: {\n\t\t\t\t\tquery: queryTerms,\n\t\t\t\t\tdocId: docId,\n\t\t\t\t\tcategories: this.getApiParam('categories'),\n\t\t\t\t\tlimit: -1\n    \t\t\t}\n\t\t\t});\n\t\t\tthis.down('readergraph').loadQueryTerms(queryTerms);\n\t\t}\n    },\n\n\tshowTermLocation: function(docIndex, position, term) {\n\t\tvar bufferPosition = position - (this.getApiParam('limit')/2);\n\t\tvar doc = this.getCorpus().getDocument(docIndex);\n\t\tthis.setApiParams({'skipToDocId': doc.getId(), start: bufferPosition < 0 ? 0 : bufferPosition});\n\t\tthis.load(true, {\n\t\t\tcallback: function() {\n\t\t\t\tvar el = this.body.dom.querySelector(\"#_\" + docIndex + \"_\" + position);\n\t\t\t\tif (el) {\n\t\t\t\t\tel.scrollIntoView({\n\t\t\t\t\t\tblock: 'center'\n\t\t\t\t\t});\n\t\t\t\t\tExt.fly(el).frame('#f80');\n\t\t\t\t}\n\t\t\t\tif (term.get('type')) {\n\t\t\t\t\tthis.highlightEntities();\n\t\t\t\t} else {\n\t\t\t\t\tthis.highlightKeywords(term, false);\n\t\t\t\t}\n\t\t\t},\n\t\t\tscope: this\n\t\t});\n\t},\n    \n    highlightKeywords: function(termRecords, doScroll) {\n\t\tvar container = this.getInnerContainer().first();\n\t\tcontainer.select('span[class*=keyword]').removeCls('keyword').applyStyles({backgroundColor: 'transparent', color: 'black'});\n\n\t\tif (termRecords === undefined && this.getDocumentTermsStore().getCount() > 0) {\n\t\t\ttermRecords = this.getDocumentTermsStore().getData().items;\n\t\t}\n\t\tif (termRecords === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Ext.isArray(termRecords)) termRecords = [termRecords];\n\n\t\ttermRecords.forEach(function(r) {\n\t\t\tvar term = r.get('term');\n\t\t\tvar bgColor = this.getApplication().getColorForTerm(term);\n\t\t\tvar textColor = this.getApplication().getTextColorForBackground(bgColor);\n\t\t\tbgColor = 'rgb('+bgColor.join(',')+') !important';\n\t\t\ttextColor = 'rgb('+textColor.join(',')+') !important';\n\t\t\tvar styles = 'background-color:'+bgColor+';color:'+textColor+';';\n\t\t\t\n\t\t\t// might be slightly faster to use positions so do that if they're available\n\t\t\tif (r.get('positions')) {\n\t\t\t\tvar positions = r.get('positions');\n\t\t\t\tvar docIndex = r.get('docIndex');\n\t\t\t\t\n\t\t\t\tpositions.forEach(function(pos) {\n\t\t\t\t\tvar match = container.dom.querySelector('#_'+docIndex+'_'+pos);\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tExt.fly(match).addCls('keyword').dom.setAttribute('style', styles);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tvar caseInsensitiveQuery = new RegExp('^'+term+'$', 'i');\n\t\t\t\tvar nodes = container.select('span.word');\n\t\t\t\tnodes.each(function(el, compEl, index) {\n\t\t\t\t\tif (el.dom.firstChild && el.dom.firstChild.nodeValue.match(caseInsensitiveQuery)) {\n\t\t\t\t\t\tel.addCls('keyword').dom.setAttribute('style', styles);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}, this);\n\t},\n\n\tnerServiceHandler: function(menuitem) {\n\t\tvar annotator = menuitem.itemId;\n\n\t\tvar docIndex = [];\n\t\tvar locationInfo = this.getLocationInfo();\n\t\tif (locationInfo) {\n\t\t\tfor (var i = locationInfo[0].docIndex; i <= locationInfo[1].docIndex; i++) {\n\t\t\t\tdocIndex.push(i);\n\t\t\t}\n\t\t} else {\n\t\t\tdocIndex.push(0);\n\t\t}\n\n\t\tthis.clearEntityHighlights();\n\n\t\tvar entitiesList = this.down('entitieslist');\n\t\tentitiesList.clearEntities();\n\t\tentitiesList.getEntities(annotator, docIndex);\n\t},\n\n\tclearEntityHighlights: function() {\n\t\tvar container = this.getInnerContainer().first();\n\t\tcontainer.select('.entity').each(function(el) {\n\t\t\tel.removeCls('entity start middle end location person organization misc money time percent date duration set unknown');\n\t\t\tel.dom.setAttribute('data-qtip', el.dom.getAttribute('data-qtip').replace(/<div class=\"entity\">.*?<\\/div>/g, ''));\n\t\t});\n\t},\n\n\thighlightEntities: function() {\n\t\tvar container = this.getInnerContainer().first();\n\t\tvar entities = this.getDocumentEntitiesStore();\n\t\tvar entityTypeStr = this.localize('entityType');\n\t\tentities.forEach(function(entity) {\n\t\t\tvar positionInstances = entity.positions;\n\t\t\tif (positionInstances) {\n\t\t\t\tpositionInstances.forEach(function(positions) {\n\t\t\t\t\tvar multiTermEntity = positions.length > 1;\n\t\t\t\t\tif (multiTermEntity) {\n\t\t\t\t\t\t// find the difference between start and end positions\n\t\t\t\t\t\tif (positions.length === 2 && positions[1]-positions[0] > 1) {\n\t\t\t\t\t\t\t// more than two terms, so fill in the middle positions\n\t\t\t\t\t\t\tvar endPos = positions[1];\n\t\t\t\t\t\t\tvar curPos = positions[0]+1;\n\t\t\t\t\t\t\tvar curIndex = 1;\n\t\t\t\t\t\t\twhile (curPos < endPos) {\n\t\t\t\t\t\t\t\tpositions.splice(curIndex, 0, curPos);\n\t\t\t\t\t\t\t\tcurPos++;\n\t\t\t\t\t\t\t\tcurIndex++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var i = 0, len = positions.length; i < len; i++) {\n\t\t\t\t\t\tvar position = positions[i];\n\t\t\t\t\t\tif (position === -1) {\n\t\t\t\t\t\t\tconsole.warn('missing position for: '+entity.term);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar match = container.selectNode('#_'+entity.docIndex+'_'+position, false);\n\t\t\t\t\t\t\tif (match) {\n\t\t\t\t\t\t\t\tvar termEntityPosition = '';\n\t\t\t\t\t\t\t\tif (multiTermEntity) {\n\t\t\t\t\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\t\t\t\t\ttermEntityPosition = 'start ';\n\t\t\t\t\t\t\t\t\t} else if (i === len-1) {\n\t\t\t\t\t\t\t\t\t\ttermEntityPosition = 'end ';\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\ttermEntityPosition = 'middle ';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tmatch.addCls('entity '+termEntityPosition+entity.type);\n\t\t\t\t\t\t\t\tvar prevQTip = match.dom.getAttribute('data-qtip');\n\t\t\t\t\t\t\t\tif (prevQTip.indexOf('class=\"entity\"') === -1) {\n\t\t\t\t\t\t\t\t\tmatch.dom.setAttribute('data-qtip', prevQTip+'<div class=\"entity\">'+entityTypeStr+': '+entity.type+'</div>');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.warn('no positions for: '+entity.term);\n\t\t\t}\n\t\t});\n\t},\n    \n\tfetchPrevious: function(scroll) {\n\t\tvar readerContainer = this.getInnerContainer().first();\n\t\tvar first = readerContainer.first('.word');\n\t\tif (first != null && first.hasCls(\"loading\")===false) {\n\t\t\twhile(first) {\n\t\t\t\tif (first.hasCls(\"word\")) {\n\t\t\t\t\tvar info = Voyant.data.model.Token.getInfoFromElement(first);\n\t\t\t\t\tvar docIndex = info.docIndex;\n\t\t\t\t\tvar start = info.position;\n\t\t\t\t\tvar doc = this.getDocumentsStore().getAt(docIndex);    \t\t\t\t\t\t\n\t\t\t\t\tvar limit = this.getApiParam('limit');\n\t\t\t\t\tvar getPrevDoc = false;\n\t\t\t\t\tif (docIndex === 0 && start === 0) {\n\t\t\t\t\t\tvar scrollContainer = this.down('panel[region=\"center\"]').body;\n\t\t\t\t\t\tvar scrollNeeded = first.getScrollIntoViewXY(scrollContainer, scrollContainer.dom.scrollTop, scrollContainer.dom.scrollLeft);\n\t\t\t\t\t\tif (scrollNeeded.y != 0) {\n\t\t\t\t\t\t\tfirst.dom.scrollIntoView();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfirst.frame(\"red\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (docIndex > 0 && start === 0) {\n\t\t\t\t\t\tgetPrevDoc = true;\n\t\t\t\t\t\tdocIndex--;\n\t\t\t\t\t\tdoc = this.getDocumentsStore().getAt(docIndex);\n\t\t\t\t\t\tvar totalTokens = doc.get('tokensCount-lexical');\n\t\t\t\t\t\tstart = totalTokens-limit;\n\t\t\t\t\t\tif (start < 0) {\n\t\t\t\t\t\t\tstart = 0;\n\t\t\t\t\t\t\tthis.setApiParam('limit', totalTokens);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlimit--; // subtract one to limit for the word we're removing. need to do this to account for non-lexical tokens before/after first word.\n\t\t\t\t\t\tstart -= limit;\n\t\t\t\t\t}\n\t\t\t\t\tif (start < 0) start = 0;\n\t\t\t\t\t\n\t\t\t\t\tvar mask = first.insertSibling(\"<div class='loading'>\"+this.localize('loading')+\"</div>\", 'before', false).mask();\n\t\t\t\t\tif (!getPrevDoc) {\n\t\t\t\t\t\tfirst.destroy();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar id = doc.getId();\n\t\t\t\t\tthis.setApiParams({'skipToDocId': id, start: start});\n\t\t\t\t\tthis.setInsertWhere('afterBegin')\n\t\t\t\t\tthis.setScrollIntoView(scroll);\n\t\t\t\t\tthis.load();\n\t\t\t\t\tthis.setApiParam('limit', this.INITIAL_LIMIT);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tfirst.destroy(); // remove non word\n\t\t\t\tfirst = readerContainer.first();\n\t\t\t}\n\t\t}\n\t},\n\t\n\tfetchNext: function(scroll) {\n\t\tvar readerContainer = this.getInnerContainer().first();\n\t\tvar last = readerContainer.last();\n\t\tif (last.hasCls(\"loading\")===false) {\n\t\t\twhile(last) {\n\t\t\t\tif (last.hasCls(\"word\")) {\n\t\t\t\t\tvar info = Voyant.data.model.Token.getInfoFromElement(last);\n\t\t\t\t\tvar docIndex = info.docIndex;\n\t\t\t\t\tvar start = info.position;\n\t\t\t\t\tvar doc = this.getDocumentsStore().getAt(info.docIndex);\n\t\t\t\t\tvar id = doc.getId();\n\t\t\t\t\t\n\t\t\t\t\tvar totalTokens = doc.get('tokensCount-lexical');\n\t\t\t\t\tif (start + this.getApiParam('limit') >= totalTokens && docIndex == this.getCorpus().getDocumentsCount()-1) {\n\t\t\t\t\t\tvar limit = totalTokens - start;\n\t\t\t\t\t\tif (limit <= 1) {\n\t\t\t\t\t\t\tlast.dom.scrollIntoView();\n\t\t\t\t\t\t\tlast.frame(\"red\")\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.setApiParam('limit', limit);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// remove any text after the last word\n\t\t\t\t\tvar nextSib = last.dom.nextSibling;\n\t\t\t\t\twhile(nextSib) {\n\t\t\t\t\t\tvar oldNext = nextSib;\n\t\t\t\t\t\tnextSib = nextSib.nextSibling;\n\t\t\t\t\t\toldNext.parentNode.removeChild(oldNext);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar mask = last.insertSibling(\"<div class='loading'>\"+this.localize('loading')+\"</div>\", 'after', false).mask();\n\t\t\t\t\tlast.destroy();\n\t\t\t\t\tthis.setApiParams({'skipToDocId': id, start: info.position});\n\t\t\t\t\tthis.setInsertWhere('beforeEnd');\n\t\t\t\t\tthis.setScrollIntoView(scroll);\n\t\t\t\t\tthis.load(); // callback not working on buffered store\n\t\t\t\t\tthis.setApiParam('limit', this.INITIAL_LIMIT);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlast.destroy(); // remove non word\n\t\t\t\tlast = readerContainer.last();\n\t\t\t}\n\t\t}\n\t},\n\t\n    load: function(doClear, config) {\n    \tif (doClear) {\n    \t\tthis.getInnerContainer().first().destroy(); // clear everything\n    \t\tthis.getInnerContainer().setHtml('<div class=\"readerContainer\"><div class=\"loading\">'+this.localize('loading')+'</div></div>');\n\t\t\tthis.getInnerContainer().first().first().mask();\n\t\t}\n\n\t\t// check if we're loading a different doc and update terms store if so\n\t\tvar tokensStore = this.getTokensStore();\n\t\tif (tokensStore.lastOptions && tokensStore.lastOptions.params.skipToDocId && tokensStore.lastOptions.params.skipToDocId !== this.getApiParam('skipToDocId')) {\n\t\t\tvar dts = this.getDocumentTermsStore();\n\t\t\tif (dts.lastOptions) {\n\t\t\t\tvar query = dts.lastOptions.params.query;\n\t\t\t\tthis.loadQueryTerms(query);\n\t\t\t}\n\t\t}\n\n    \tthis.getTokensStore().load(Ext.apply(config || {}, {\n    \t\tparams: Ext.apply(this.getApiParams(), {\n    \t\t\tstripTags: 'blocksOnly',\n    \t\t\tstopList: '' // token requests shouldn't have stopList\n    \t\t})\n    \t}));\n    },\n    \n    updateText: function(contents) {\n    \tvar loadingMask = this.getInnerContainer().down('.loading');\n    \tif (loadingMask) loadingMask.destroy();\n    \t// FIXME: something is weird here in tool/Reader mode, this.getInnerContainer() seems empty but this.getInnerContainer().first() gets the canvas?!?\n    \tvar inserted = this.getInnerContainer().first().insertHtml(this.getInsertWhere()/* where is this defined? */, contents, true); // return Element, not dom\n    \tif (inserted && this.getScrollIntoView()) {\n    \t\tinserted.dom.scrollIntoView(); // use dom\n    \t\t// we can't rely on the returned element because it can be a transient fly element, but the id is right in a deferred call\n    \t\tExt.Function.defer(function() {\n    \t\t\tvar el = Ext.get(inserted.id); // re-get el\n    \t\t\tif (el) {el.frame(\"red\")}\n    \t\t}, 100);\n    \t}\n    \tvar target = this.down('panel[region=\"center\"]').body.dom;\n    \tvar amount;\n\t\tif (target.scrollTop == 0) {\n\t\t\tamount = 0;\n\t\t} else if (target.scrollHeight - target.scrollTop == target.clientHeight) {\n\t\t\tamount = 1;\n\t\t} else {\n\t\t\tamount = (target.scrollTop + target.clientHeight * 0.5) / target.scrollHeight;\n\t\t}\n    \tthis.updateLocationMarker(amount);\n\t},\n\t\n\tupdateLocationMarker: function(amount, scrollDir) {\n\t\tvar locationInfo = this.getLocationInfo();\n\t\tif (locationInfo) {\n\t\t\tvar info1 = locationInfo[0];\n\t\t\tvar info2 = locationInfo[1];\n\n\t\t\tvar corpus = this.getCorpus();\n\t\t\tvar partialFirstDoc = false;\n\n\t\t\tif (info1.position !== 0) {\n\t\t\t\tpartialFirstDoc = true;\n\t\t\t}\n\n\t\t\tvar docTokens = {};\n\t\t\tvar totalTokens = 0;\n\t\t\tvar showNerButton = this.getEnableEntitiesList() && this.getApplication().getEntitiesEnabled ? this.getApplication().getEntitiesEnabled() : false;\n\t\t\tvar currIndex = info1.docIndex;\n\t\t\twhile (currIndex <= info2.docIndex) {\n\t\t\t\tvar tokens = corpus.getDocument(currIndex).get('tokensCount-lexical');\n\t\t\t\tif (tokens > this.MAX_TOKENS_FOR_NER) {\n\t\t\t\t\tshowNerButton = false;\n\t\t\t\t}\n\t\t\t\tif (currIndex === info2.docIndex) {\n\t\t\t\t\ttokens = info2.position; // only count tokens up until last displayed word\n\t\t\t\t}\n\t\t\t\tif (currIndex === info1.docIndex) {\n\t\t\t\t\ttokens -= info1.position; // subtract missing tokens, if any\n\t\t\t\t}\n\t\t\t\ttotalTokens += tokens;\n\t\t\t\tdocTokens[currIndex] = tokens;\n\t\t\t\tcurrIndex++;\n\t\t\t}\n\n\t\t\tvar nerParent = this.down('#nerServiceParent');\n\t\t\tif (showNerButton) {\n\t\t\t\tnerParent.show();\n\t\t\t} else {\n\t\t\t\tnerParent.hide();\n\t\t\t}\n\t\t\t\n\t\t\tvar tokenPos = Math.round(totalTokens * amount);\n\t\t\tvar docIndex = 0;\n\t\t\tvar currToken = 0;\n\t\t\tfor (var i = info1.docIndex; i <= info2.docIndex; i++) {\n\t\t\t\tdocIndex = i;\n\t\t\t\tcurrToken += docTokens[i];\n\t\t\t\tif (currToken >= tokenPos) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar remains = (currToken - tokenPos);\n\t\t\tvar tokenPosInDoc = docTokens[docIndex] - remains;\n\t\t\t\n\t\t\tif (partialFirstDoc && docIndex === info1.docIndex) {\n\t\t\t\ttokenPosInDoc += info1.position;\n\t\t\t}\n\t\t\t\t\n\t\t\tvar fraction = tokenPosInDoc / corpus.getDocument(docIndex).get('tokensCount-lexical');\n\n\t\t\tthis.down('readergraph').moveLocationMarker(docIndex, fraction, scrollDir);\n\t\t}\n\t},\n\n\tgetLocationInfo: function() {\n\t\tvar readerWords = Ext.DomQuery.select('.word', this.getInnerContainer().down('.readerContainer', true));\n\t\tvar firstWord = readerWords[0];\n\t\tvar lastWord = readerWords[readerWords.length-1];\n\t\tif (firstWord !== undefined && lastWord !== undefined) {\n\t\t\tvar info1 = Voyant.data.model.Token.getInfoFromElement(firstWord);\n\t\t\tvar info2 = Voyant.data.model.Token.getInfoFromElement(lastWord);\n\t\t\treturn [info1, info2];\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n});\n","Ext.define('Voyant.panel.SimpleDocReader', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.simpledocreader',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tdocIndex: undefined,\n    \t\tdocId: undefined\n    \t},\n    \tglyph: 'xf0f6@FontAwesome'\n\t},\n    config: {\n    },\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function(config) {\n    \tvar me = this;\n    \tExt.apply(this, {\n    \t\thtml: '<iframe style=\"width: 100%; height: 100%; border: none;\"></iframe>',\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \tglyph: 'xf060@FontAwesome',\n            \t\thandler: this.fetchPrevious,\n            \t\tscope: this\n            \t},{\n            \t\tglyph: 'xf061@FontAwesome',\n            \t\thandler: this.fetchNext,\n            \t\tscope: this\n                }]\n    \t\t}],\n    \t\tlisteners: {\n    \t\t\tloadedCorpus: function(src, corpus) {\n    \t\t\t\t\n    \t\t\t\t// we can keep the reader blank to begin\n    \t\t\t\tif (this.getApiParam(\"autoLoadOnLoadedCorpus\", \"false\")===\"true\") {return;}\n    \t\t\t\t\n    \t\t\t\tthis.fireEvent(\"documentSelected\", this, 0);\n    \t\t\t\t\n    \t\t\t},\n        \t\tdocumentSelected: function(src, document) {\n        \t\t\tthis.setApiParams({\n        \t\t\t\tdocIndex: this.getCorpus().getDocument(document).getIndex(),\n        \t\t\t\tdocId: undefined\n        \t\t\t});\n        \t\t\tthis.fetch();\n        \t\t},\n        \t\tscope: this\n    \t\t}\n    \t});\n    \t\n        this.callParent(arguments);\n    },\n    \n\tfetchPrevious: function() {\n\t\tvar doc;\n\t\tif (this.getApiParam(\"docIndex\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docIndex\"));}\n\t\telse if (this.getApiParam(\"docId\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docId\"));}\n\t\telse {doc = this.getCorpus().getDocument(1);}\n\t\tif (doc.getIndex()>0) {\n\t\t\tthis.setApiParams({docIndex: doc.getIndex()-1, docId: undefined});\n\t\t\tthis.fetch();\n\t\t} else {\n\t\t\tthis.toastInfo(this.localize('noPrevious'))\n\t\t}\n\t},\n\t\n\tfetchNext: function() {\n\t\tvar doc;\n\t\tif (this.getApiParam(\"docIndex\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docIndex\"));}\n\t\telse if (this.getApiParam(\"docId\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docId\"));}\n\t\telse {\n\t\t\tthis.setApiParams({docIndex: 0, docId: undefined});\n\t\t\treturn this.fetch();\n\t\t}\n\t\tif (doc.getIndex()<this.getCorpus().getDocumentsCount()-1) {\n\t\t\tthis.setApiParams({docIndex: doc.getIndex()+1, docId: undefined});\n\t\t\tthis.fetch();\n\t\t} else {\n\t\t\tthis.toastInfo(this.localize('noNext'))\n\t\t}\n\t},\n\t\n\tfetch: function() {\n\t\tvar doc;\n\t\tif (this.getApiParam(\"docIndex\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docIndex\"));}\n\t\telse if (this.getApiParam(\"docId\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docId\"));}\n\t\telse {doc = this.getCorpus().getDocument(0);}\n\t\tvar iframe = this.getTargetEl().down(\"iframe\", true);\n\t\tiframe.setAttribute(\"src\", \"about:blank\")\n\t\tif (this.getApiParam(\"originalUrlMetadataKey\")) {\n\t\t\tvar url = doc.get(this.getApiParam(\"originalUrlMetadataKey\"));\n\t\t\tif (url) {\n\t\t\t\tiframe.setAttribute(\"src\", url)\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar params = {\n\t\t\tcorpus: this.getCorpus().getId(),\n\t\t\tdocIndex: doc.getIndex(),\n\t\t\ttool: 'corpus.DocumentTokens',\n\t\t\ttemplate: 'docTokensPlusStructure2html',\n\t\t\toutputFormat: 'html',\n\t\t\tlimit: 0\n\t\t}\n\t\tvar url = this.getTromboneUrl() + \"?\" + Ext.Object.toQueryString(params);\n\t\tiframe.setAttribute(\"src\", url);\n\n\t}\n});\n","/**\n * ScatterPlot is a graph visualization of how words cluster in a corpus document similarity, correspondence analysis or principal component analysis.\n * You can work with the ScatterPlot algorithms programmatically using {@link Spyral.Corpus#analysis}.\n *\n * @example\n *\n * let config = {\n * \t\"analysis\": null,\n * \t\"bins\": null,\n * \t\"clusters\": null,\n * \t\"comparisonType\": null,\n * \t\"dimensions\": null,\n * \t\"docId\": null,\n * \t\"iterations\": null,\n * \t\"label\": null,\n * \t\"limit\": null,\n * \t\"perplexity\": null,\n * \t\"query\": null,\n * \t\"stopList\": null,\n * \t\"storeJson\": null,\n * \t\"target\": null,\n * \t\"term\": null,\n * \t\"whiteList\": null,\n * };\n *\n * loadCorpus(\"austen\").tool(\"scatterplot\", config);\n *\n * @class ScatterPlot\n * @tutorial scatterplot\n * @memberof Tools\n */\nExt.define('Voyant.panel.ScatterPlot', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\trequires: ['Ext.chart.CartesianChart'],\n\talias: 'widget.scatterplot',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.ScatterPlot\n\t\t\t * @instance\n\t\t\t * @property {docId}\n\t\t\t */\n    \t\tdocId: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.ScatterPlot\n\t\t\t * @instance\n\t\t\t * @property {String} analysis The type of analysis to perform. Options are: 'ca', 'pca', 'tsne', and 'docSim'.\n\t\t\t */\n    \t\tanalysis: 'ca',\n\n\t\t\t/**\n\t\t\t * @memberof Tools.ScatterPlot\n\t\t\t * @instance\n\t\t\t * @property {limit}\n\t\t\t * @default\n\t\t\t */\n    \t\tlimit: 50,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.ScatterPlot\n\t\t\t * @instance\n\t\t\t * @property {Number} dimensions The number of dimensions to render, either 2 or 3.\n\t\t\t * @default\n\t\t\t */\n    \t\tdimensions: 3,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.ScatterPlot\n\t\t\t * @instance\n\t\t\t * @property {bins}\n\t\t\t * @default\n\t\t\t */\n    \t\tbins: 10,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.ScatterPlot\n\t\t\t * @instance\n\t\t\t * @property {Number} clusters The number of clusters within which to group words.\n\t\t\t * @default\n\t\t\t */\n    \t\tclusters: 3,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.ScatterPlot\n\t\t\t * @instance\n\t\t\t * @property {Number} perplexity The TSNE perplexity value.\n\t\t\t * @default\n\t\t\t */\n    \t\tperplexity: 15,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.ScatterPlot\n\t\t\t * @instance\n\t\t\t * @property {Number} iterations The TSNE iterations value.\n\t\t\t * @default\n\t\t\t */\n    \t\titerations: 1500,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.ScatterPlot\n\t\t\t * @instance\n\t\t\t * @property {String} comparisonType The value to use for comparing terms. Options are: 'raw', 'relative', and 'tfidf'.\n\t\t\t * @default\n\t\t\t */\n    \t\tcomparisonType: 'relative',\n\n\t\t\t/**\n\t\t\t * @memberof Tools.ScatterPlot\n\t\t\t * @instance\n\t\t\t * @property {stopList}\n\t\t\t * @default\n\t\t\t */\n    \t\tstopList: 'auto',\n\n\t\t\t/**\n\t\t\t * @memberof Tools.ScatterPlot\n\t\t\t * @instance\n\t\t\t * @property {String} target The term to set as the target. This will filter results to terms that are near the target.\n\t\t\t */\n    \t\ttarget: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.ScatterPlot\n\t\t\t * @instance\n\t\t\t * @property {String[]} term Used in combination with \"target\" as a white list of terms to keep.\n\t\t\t */\n    \t\tterm: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.ScatterPlot\n\t\t\t * @instance\n\t\t\t * @property {query}\n\t\t\t */\n    \t\tquery: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.ScatterPlot\n\t\t\t * @instance\n\t\t\t * @property {String} whiteList A list of words to always include\n\t\t\t */\n    \t\twhiteList: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.ScatterPlot\n\t\t\t * @instance\n\t\t\t * @property {String[]} label The label types to show. One or more of: 'summary', 'docs', and 'terms'.\n\t\t\t */\n    \t\tlabel: ['summary', 'docs', 'terms'],\n\n\t\t\t/**\n\t\t\t * @memberof Tools.ScatterPlot\n\t\t\t * @instance\n\t\t\t * @property {String} storeJson TODO used in embed\n\t\t\t */\n    \t\tstoreJson: undefined\n    \t},\n\t\tglyph: 'xf06e@FontAwesome'\n    },\n\tconfig: {\n    \toptions: [\n\t\t\t{xtype: 'stoplistoption'},\n\t\t\t{xtype: 'listeditor', name: 'whiteList'},\n\t\t\t{xtype: 'categoriesoption'}\n\t\t],\n    \tcaStore: null,\n    \tpcaStore: null,\n    \ttsneStore: null,\n    \tdocSimStore: null,\n    \ttermStore: null,\n    \tchartMenu: null,\n    \tnewTerm: null,\n    \ttermsLimitTimeout: null,\n\t\tignoreTermsLimitChange: false,\n    \thighlightData: {x: 0, y: 0, r: 0},\n        highlightTask: null\n\t},\n    \n    tokenFreqTipTemplate: null,\n    docFreqTipTemplate: null,\n    \n    constructor: function(config) {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n\t\tif (\"storeJson\" in config) {\n    \t\tvar json = JSON.parse(config.storeJson);\n    \t\tExt.apply(config, json);\n    \t}\n\t\tthis.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n    \tthis.setCaStore(Ext.create('Voyant.data.store.CAAnalysis', {\n    \t\tlisteners: {load: this.maskAndBuildChart, scope: this}\n    \t}));\n    \tthis.setPcaStore(Ext.create('Voyant.data.store.PCAAnalysis', {\n    \t\tlisteners: {load: this.maskAndBuildChart, scope: this}\n    \t}));\n    \tthis.setTsneStore(Ext.create('Voyant.data.store.TSNEAnalysis', {\n    \t\tlisteners: {load: this.maskAndBuildChart, scope: this}\n    \t}));\n    \tthis.setDocSimStore(Ext.create('Voyant.data.store.DocSimAnalysis', {\n    \t\tlisteners: {load: this.maskAndBuildChart, scope: this}\n    \t}));\n    \t\n    \tthis.setTermStore(Ext.create('Ext.data.JsonStore', {\n\t\t\tfields: [\n\t\t\t\t{name: 'term'},\n\t\t\t\t{name: 'rawFreq', type: 'int'},\n\t\t\t\t{name: 'relativeFreq', type: 'number'},\n\t\t\t\t{name: 'coordinates', mapping : 'vector'},\n\t\t\t\t{name: 'category'}\n\t\t\t],\n\t\t\tsorters: [{property: 'rawFreq', direction: 'DESC'}],\n\t\t\tgroupField: 'category'\n\t\t}));\n    \t\n    \tthis.setChartMenu(Ext.create('Ext.menu.Menu', {\n    \t\titems: [\n    \t\t\t{text: this.localize('remove'), itemId: 'remove', glyph: 'xf068@FontAwesome'},\n    \t\t\t{text: this.localize('nearby'), itemId: 'nearby', glyph: 'xf0b2@FontAwesome'}\n    \t\t],\n    \t\tlisteners: {\n    \t\t\thide: function() {\n    \t\t\t\tvar series = this.down('#chart').getSeries();\n    \t\t\t\tseries[0].enableToolTips();\n    \t\t\t\tseries[1].enableToolTips();\n    \t\t\t},\n    \t\t\tscope: this\n    \t\t}\n    \t}));\n    \t\n    \tthis.tokenFreqTipTemplate = new Ext.Template(this.localize('tokenFreqTip'));\n    \tthis.docFreqTipTemplate = new Ext.Template(this.localize('docFreqTip'));\n    \t\n        Ext.apply(this, {\n        \ttitle: this.localize('title'),\n        \tlayout: 'border',\n        \tautoDestroy: true,\n        \titems: [{\n    \t\t\titemId: 'chartParent',\n    \t\t\tregion: 'center',\n    \t\t\tlayout: 'fit',\n        \t\ttbar: {\n        \t\t\toverflowHandler: 'scroller',\n        \t\t\titems: [{\n        \t\t\t\txtype: 'querysearchfield',\n        \t\t\t\titemId: 'filterTerms',\n        \t\t\t\twidth: 150\n        \t\t\t},{\n                \t\ttext: this.localize('labels'),\n                \t\titemId: 'labels',\n                \t\tglyph: 'xf02b@FontAwesome',\n                \t\tmenu: {\n                \t\t\titems: [\n                \t\t\t    {text: this.localize(\"summaryLabel\"), itemId: 'summary', xtype: 'menucheckitem'},\n                \t\t\t    {text: this.localize(\"docsLabel\"), itemId: 'docs', xtype: 'menucheckitem'},\n                \t\t\t    {text: this.localize(\"termsLabel\"), itemId: 'terms', xtype: 'menucheckitem'}\n                \t\t\t],\n        \t\t\t\t\tlisteners: {\n        \t\t\t\t\t\tafterrender: function(menu) {\n        \t\t\t\t\t\t\tvar labels = this.getApiParam('label');\n        \t\t\t\t\t\t\tmenu.items.each(function(item) {\n        \t\t\t\t\t\t\t\titem.setChecked(labels.indexOf(item.getItemId())>-1)\n        \t\t\t\t\t\t\t})\n        \t\t\t\t\t\t},\n        \t\t\t\t\t\tclick: function(menu, item) {\n        \t\t\t\t\t\t\tvar labels = this.getApiParam(\"label\");\n        \t\t\t\t\t\t\tvar label = item.getItemId();\n        \t\t\t\t\t\t\tif (Ext.isString(labels)) {labels = [labels]}\n        \t\t\t\t\t\t\tif (item.checked && labels.indexOf(label)==-1) {\n        \t\t\t\t\t\t\t\tlabels.push(label)\n        \t\t\t\t\t\t\t} else if (!item.checked && labels.indexOf(label)>-1) {\n        \t\t\t\t\t\t\t\tlabels = labels.filter(function(item) {return item!=label})\n        \t\t\t\t\t\t\t}\n        \t\t\t\t\t\t\tthis.setApiParam(\"label\", labels);\n        \t\t\t\t\t\t\tthis.doLabels();\n        \t\t\t\t\t\t\tthis.queryById('chart').redraw();\n        \t\t\t\t\t\t},\n        \t\t\t\t\t\tscope: this\n        \t\t\t\t\t}\n                \t\t}\n                \t}]\n        \t\t\t\n        \t\t},\n        \t\tlisteners: {\n        \t\t\tquery: function(component, value) {\n        \t\t\t\tthis.getTermStore().filter([{property: 'term', value: value, anyMatch: true}]);\n        \t\t\t\tthis.filterChart(value);\n        \t\t\t},\n        \t\t\tscope: this\n        \t\t}\n    \t\t},{\n    \t\t\titemId: 'optionsPanel',\n        \t\ttitle: this.localize('options'),\n        \t\tregion: 'west',\n        \t\tsplit: true,\n        \t\tcollapsible: true,\n        \t\tcollapseMode: 'header',\n        \t\twidth: 135,\n        \t\tscrollable: 'y',\n        \t\tlayout: {\n        \t\t\ttype: 'vbox',\n        \t\t\talign: 'stretch'\n        \t\t},\n        \t\tdefaults: {\n        \t\t\txtype: 'button',\n        \t\t\tmargin: '5',\n        \t\t\tlabelAlign: 'top'\n        \t\t},\n        \t\titems: [{\n        \t\t\txtype: 'label',\n        \t\t\ttext: this.localize('input')\n        \t\t},{\n    \t\t\t\txtype: 'documentselectorbutton'\n    \t\t\t},{\n\t            \ttext: this.localize('freqsMode'),\n\t            \titemId: 'comparisonType',\n\t\t\t\t\tglyph: 'xf201@FontAwesome',\n\t\t\t\t    tooltip: this.localize('freqsModeTip'),\n\t\t\t\t    menu: {\n\t\t\t\t    \titems: [\n\t\t\t               {text: this.localize(\"rawFrequencies\"), itemId: 'comparisonType_raw', group: 'freqsMode', xtype: 'menucheckitem'},\n\t\t\t               {text: this.localize(\"relativeFrequencies\"), itemId: 'comparisonType_relative', group: 'freqsMode', xtype: 'menucheckitem'},\n\t\t\t               {text: this.localize(\"tfidf\"), itemId: 'comparisonType_tfidf', group: 'freqsMode', xtype: 'menucheckitem'}\n\t\t\t            ],\n       \t\t\t\t\tlisteners: {\n    \t\t\t\t\t\tclick: function(menu, item) {\n    \t\t\t\t\t\t\tif (item !== undefined) {\n    \t\t\t\t\t\t\t\tvar type = item.getItemId().split('_')[1];\n    \t\t\t\t\t\t\t\tif (type !== this.getApiParam('comparisonType')) {\n\t    \t\t\t\t\t\t\t\tthis.setApiParam('comparisonType', type);\n\t    \t\t\t\t\t\t\t\tthis.loadFromApis(true);\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t},\n    \t\t\t\t\t\tscope: this\n    \t\t\t\t    }\n\t\t\t\t    }\n        \t\t},{\n        \t\t\tfieldLabel: this.localize('numTerms'),\n        \t\t\titemId: 'limit',\n        \t\t\txtype: 'numberfield',\n        \t\t\tminValue: 5,\n        \t\t\tlisteners: {\n        \t\t\t\tchange: function(cmp, newValue, oldValue) {\n        \t\t\t\t\tfunction doLoad() {\n        \t\t\t\t\t\tthis.setApiParam('limit', newValue);\n            \t\t\t\t\tthis.loadFromApis();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (this.getIgnoreTermsLimitChange() === false) {\n\t\t\t\t\t\t\t\tif (this.getTermsLimitTimeout() !== null) {\n\t\t\t\t\t\t\t\t\tclearTimeout(this.getTermsLimitTimeout());\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (cmp.isValid()) {\n\t\t\t\t\t\t\t\t\tthis.setTermsLimitTimeout(setTimeout(doLoad.bind(this), 500));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n        \t\t\t\t},\n        \t\t\t\tscope: this\n        \t\t\t}\n        \t\t},{\n        \t\t\txtype: 'container',\n        \t\t\thtml: '<hr style=\"border: none; border-top: 1px solid #cfcfcf;\"/>'\n        \t\t},{\n        \t\t\txtype: 'label',\n        \t\t\ttext: this.localize('output')\n        \t\t},{\n            \t\ttext: this.localize('analysis'),\n            \t\titemId: 'analysis',\n            \t\tglyph: 'xf1ec@FontAwesome',\n                    overflowHandler: 'scroller',\n        \t\t\tmenu: {\n    \t\t\t\t\titems: [\n    \t\t\t\t\t    {text: this.localize('pca'), itemId: 'analysis_pca', group:'analysis', xtype: 'menucheckitem'},\n    \t\t\t\t\t    {text: this.localize('ca'), itemId: 'analysis_ca', group:'analysis', xtype: 'menucheckitem'},\n    \t\t\t\t\t    {text: this.localize('tsne'), itemId: 'analysis_tsne', group:'analysis', xtype: 'menucheckitem'},\n    \t\t\t\t\t    {text: this.localize('docSim'), itemId: 'analysis_docSim', group:'analysis', xtype: 'menucheckitem'}\n    \t\t\t\t\t],\n    \t\t\t\t\tlisteners: {\n    \t\t\t\t\t\tclick: function(menu, item) {\n    \t\t\t\t\t\t\tif (item !== undefined) {\n    \t\t\t\t\t\t\t\tvar analysis = item.getItemId().split('_')[1];\n    \t\t\t\t\t\t\t\tif (analysis !== this.getApiParam('analysis')) {\n    \t\t\t\t\t\t\t\t\tthis.doAnalysisChange(analysis);\n    \t\t\t\t\t\t\t\t\tthis.loadFromApis(true);\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t},\n    \t\t\t\t\t\tscope: this\n    \t\t\t\t\t}\n        \t\t\t}\n\t            },{\n\t            \tfieldLabel: this.localize('perplexity'),\n\t            \titemId: 'perplexity',\n\t            \txtype: 'slider',\n\t            \tminValue: 5,\n\t            \tmaxValue: 100,\n\t            \tincrement: 1,\n\t            \tlisteners: {\n\t            \t\tchangecomplete: function(slider, newValue) {\n\t            \t\t\tthis.setApiParam('perplexity', newValue);\n\t            \t\t\tthis.loadFromApis(true);\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n\t            },{\n\t            \tfieldLabel: this.localize('iterations'),\n\t            \titemId: 'iterations',\n\t            \txtype: 'slider',\n\t            \tminValue: 100,\n\t            \tmaxValue: 5000,\n\t            \tincrement: 100,\n\t            \tlisteners: {\n\t            \t\tchangecomplete: function(slider, newValue) {\n\t            \t\t\tthis.setApiParam('iterations', newValue);\n\t            \t\t\tthis.loadFromApis(true);\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n\t            },{\n            \t\ttext: this.localize('clusters'),\n            \t\titemId: 'clusters',\n            \t\tglyph: 'xf192@FontAwesome',\n            \t\tmenu: {\n            \t\t\titems: [\n            \t\t\t    {text: '1', itemId: 'clusters_1', group: 'clusters', xtype: 'menucheckitem'},\n            \t\t\t    {text: '2', itemId: 'clusters_2', group: 'clusters', xtype: 'menucheckitem'},\n            \t\t\t    {text: '3', itemId: 'clusters_3', group: 'clusters', xtype: 'menucheckitem'},\n            \t\t\t    {text: '4', itemId: 'clusters_4', group: 'clusters', xtype: 'menucheckitem'},\n            \t\t\t    {text: '5', itemId: 'clusters_5', group: 'clusters', xtype: 'menucheckitem'}\n            \t\t\t],\n    \t\t\t\t\tlisteners: {\n    \t\t\t\t\t\tclick: function(menu, item) {\n    \t\t\t\t\t\t\tif (item !== undefined) {\n    \t\t\t\t\t\t\t\tvar clusters = parseInt(item.getItemId().split('_')[1]);\n    \t\t\t\t\t\t\t\tif (clusters !== this.getApiParam('clusters')) {\n        \t\t\t\t\t\t\t\tthis.setApiParam('clusters', clusters);\n        \t\t\t\t\t\t\t\tthis.loadFromApis(true);\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t},\n    \t\t\t\t\t\tscope: this\n    \t\t\t\t\t}\n            \t\t}\n            \t},{\n            \t\ttext: this.localize('dimensions'),\n            \t\titemId: 'dimensions',\n            \t\tglyph: 'xf1b2@FontAwesome',\n            \t\tmenu: {\n            \t\t\titems: [\n            \t\t\t    {text: '2', itemId: 'dimensions_2', group: 'dimensions', xtype: 'menucheckitem'},\n            \t\t\t    {text: '3', itemId: 'dimensions_3', group: 'dimensions', xtype: 'menucheckitem'}\n            \t\t\t],\n    \t\t\t\t\tlisteners: {\n    \t\t\t\t\t\tclick: function(menu, item) {\n    \t\t\t\t\t\t\tif (item !== undefined) {\n    \t\t\t\t\t\t\t\tvar dims = parseInt(item.getItemId().split('_')[1]);\n    \t\t\t\t\t\t\t\tif (dims !== this.getApiParam('dimensions')) {\n        \t\t\t\t\t\t\t\tif (dims == 3 && this.getApiParam('analysis') == 'ca' && this.getCorpus().getDocumentsCount() == 3) {\n        \t\t\t\t\t\t\t\t\tdims = 2;\n        \t\t\t\t\t\t\t\t\t// TODO add info message 'Because of the nature of Correspondence Analysis, you can only use 2 dimensions with 3 documents.'\n        \t\t\t\t\t\t\t\t\treturn false;\n        \t\t\t\t\t\t\t\t}\n        \t\t\t\t\t\t\t\t\n        \t\t\t\t\t\t\t\tthis.setApiParam('dimensions', dims);\n        \t\t\t\t\t\t\t\tthis.loadFromApis(true);\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t},\n    \t\t\t\t\t\tscope: this\n    \t\t\t\t\t}\n            \t\t}\n        \t\t},{\n        \t\t\titemId: 'reloadButton',\n        \t\t\ttext: this.localize('reload'),\n        \t\t\tglyph: 'xf021@FontAwesome',\n        \t\t\thandler: function() {\n        \t\t\t\tthis.loadFromApis();\n        \t\t\t},\n        \t\t\tscope: this\n        \t\t}]\n        \t},{\n        \t\titemId: 'termsGrid',\n        \t\txtype: 'grid',\n        \t\ttitle: this.localize('terms'),\n        \t\tregion: 'east',\n        \t\twidth: 250,\n        \t\tsplit: true,\n        \t\tcollapsible: true,\n        \t\tcollapseMode: 'header',\n        \t\tforceFit: true,\n        \t\tfeatures: [{\n        \t\t\tftype: 'grouping',\n        \t\t\thideGroupedHeader: true,\n                    enableGroupingMenu: false\n        \t\t}],\n        \t\tbbar: {\n                    overflowHandler: 'scroller',\n        \t\t\titems: [{\n        \t\t\t\titemId: 'nearbyButton',\n                        xtype: 'button',\n                        text: this.localize('nearby'),\n                        glyph: 'xf0b2@FontAwesome',\n                        flex: 1,\n                        handler: function(btn) {\n                        \tvar sel = btn.up('panel').getSelection()[0];\n                        \tif (sel === undefined) {\n                        \t\tthis.toastError({\n                        \t\t\thtml: this.localize(\"noTermSelected\"),\n                        \t\t     anchor: btn.up(\"panel\").getTargetEl()\n                        \t\t });\n                        \t}\n                        \telse {\n\t                        \tvar term = sel.get('term');\n\t                        \tthis.getNearbyForTerm(term);\n                        \t}\n                        },\n                        scope: this\n                    },{\n                    \titemId: 'removeButton',\n                        xtype: 'button',\n                        text: this.localize('remove'),\n                        glyph: 'xf068@FontAwesome',\n                        flex: 1,\n                        handler: function(btn) {\n                        \tvar sel = btn.up('panel').getSelection()[0];\n                        \tif (sel === undefined) {\n                        \t\tthis.toastError({\n                        \t\t\thtml: this.localize(\"noTermSelected\"),\n                        \t\t     anchor: btn.up(\"panel\").getTargetEl()\n                        \t\t });\n                        \t}\n                        \telse {\n\t                        \tvar term = sel.get('term');\n\t                        \tthis.removeTerm(term);\n                        \t}\n                        },\n                        scope: this\n                    }]\n        \t\t\t\n        \t\t},\n        \t\ttbar: {\n                    overflowHandler: 'scroller',\n                    items: [{\n                    \txtype: 'querysearchfield',\n                    \titemId: 'addTerms',\n\t\t\t\t\t\tmultiSelect: false,\n                    \tflex: 1\n                    },{\n\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\ttext: this.localize('addTerm'),\n\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\tvar queryField = this.queryById('addTerms');\n\t\t\t\t\t\t\tvar value = queryField.getValue();\n\t\t\t\t\t\t\tif (value !== null && this.getTermStore().findExact('term', value) === -1) {\n\t\t\t\t\t\t\t\tthis.setNewTerm(value);\n\t\t\t\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setNewTerm(null);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tqueryField.setValue('');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}]\n                },\n        \t\tcolumns: [{\n        \t\t\ttext: this.localize('term'),\n    \t\t\t\tdataIndex: 'term',\n    \t\t\t\tflex: 1,\n                    sortable: true\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('rawFreq'),\n    \t\t\t\tdataIndex: 'rawFreq',\n    \t\t\t\tflex: 0.75,\n    \t\t\t\tminWidth: 70,\n                    sortable: true\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('relFreq'),\n    \t\t\t\tdataIndex: 'relativeFreq',\n    \t\t\t\tflex: 0.75,\n    \t\t\t\tminWidth: 70,\n                    sortable: true,\n                    hidden: true\n    \t\t\t}],\n    \t\t\tselModel: {\n    \t\t\t\ttype: 'rowmodel',\n    \t\t\t\tmode: 'SINGLE',\n    \t\t\t\tallowDeselect: true,\n    \t\t\t\ttoggleOnClick: true,\n                    listeners: {\n                        selectionchange: {\n                        \tfn: function(sm, selections) {\n//                        \t\tthis.getApplication().dispatchEvent('corpusTermsClicked', this, selections);\n                        \t\tvar sel = selections[0];\n                        \t\tif (sel !== undefined) {\n\t                        \t\tvar term = sel.get('term');\n\t                        \t\tvar isDoc = sel.get('category') === 'document';\n\t                        \t\tthis.selectTerm(term, isDoc);\n\t                        \t\t\n\t                        \t\tif (isDoc) {\n\t                        \t\t\tthis.queryById('nearbyButton').disable();\n\t                        \t\t\tthis.queryById('removeButton').disable();\n\t                        \t\t} else {\n\t                        \t\t\tthis.queryById('nearbyButton').enable();\n\t                        \t\t\tthis.queryById('removeButton').enable();\n\t                        \t\t}\n                        \t\t} else {\n                        \t\t\tthis.selectTerm();\n                        \t\t}\n                        \t},\n                        \tscope: this\n                        }\n                    }\n                },\n        \t\tstore: this.getTermStore(),\n        \t\tlisteners: {\n        \t\t\texpand: function(panel) {\n        \t\t\t\tpanel.getView().refresh();\n        \t\t\t},\n        \t\t\tscope: this\n        \t\t}\n        \t}]\n        });\n        \n        this.on('boxready', function(component, width, height) {\n\t\t\tif (width < 400) {\n\t\t\t\tthis.queryById('optionsPanel').collapse();\n\t\t\t\tthis.queryById('termsGrid').collapse();\n\t\t\t}\n\t\t\tif (this.config.storeClass && this.config.storeData) {\n\t\t\t\tthis.loadStoreFromJson(this.config.storeClass, this.config.storeData);\n\t\t\t}\n\t\t}, this);\n        \n        this.on('beforedestroy', function(component) {\n        \tvar oldChart = this.queryById('chart');\n        \tif (oldChart !== null) {\n        \t\tthis.queryById('chartParent').remove(oldChart);\n        \t}\n        }, this);\n        \n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tfunction setCheckItemFromApi(apiParamName) {\n    \t\t\tvar value = this.getApiParam(apiParamName);\n    \t\t\tvar menu = this.queryById(apiParamName);\n    \t\t\tvar item = menu.down('#'+apiParamName+'_'+value);\n    \t\t\titem.setChecked(true);\n    \t\t}\n    \t\tvar setCheckBound = setCheckItemFromApi.bind(this);\n    \t\t\n    \t\tsetCheckBound('analysis');\n    \t\tthis.doAnalysisChange(this.getApiParam('analysis'));\n    \t\t\n    \t\tsetCheckBound('comparisonType');\n    \t\tsetCheckBound('clusters');\n\n    \t\tthis.queryById('perplexity').setValue(this.getApiParam('perplexity'));\n    \t\tthis.queryById('iterations').setValue(this.getApiParam('iterations'));\n    \t\t\n    \t\tif (corpus.getDocumentsCount() == 3) {\n    \t\t\tthis.setApiParam('dimensions', 2);\n    \t\t}\n    \t\tsetCheckBound('dimensions');\n\n    \t\tthis.getCaStore().setCorpus(corpus);\n    \t\tthis.getPcaStore().setCorpus(corpus);\n    \t\tthis.getDocSimStore().setCorpus(corpus);\n    \t\tthis.loadFromApis();\n    \t}, this);\n    \t\n    \tthis.on('documentsSelected', function(src, docIds) {\n    \t\tthis.setApiParam('docId', docIds);\n    \t\tthis.loadFromApis();\n    \t}, this);\n        \n    \tthis.callParent(arguments);\n    },\n    \n    doAnalysisChange: function(analysis) {\n    \tthis.setApiParam('analysis', analysis);\n\t\tthis.queryById('nearbyButton').setDisabled(analysis === 'tsne');\n\t\tthis.queryById('reloadButton').setVisible(analysis === 'tsne');\n\t\tthis.queryById('perplexity').setVisible(analysis === 'tsne');\n\t\tthis.queryById('iterations').setVisible(analysis === 'tsne');\n\t\tthis.queryById('limit').setDisabled(analysis === 'docSim');\n\t\tif (analysis === 'ca') {\n\t\t\t// TODO handling for when there's no corpus\n\t\t\tif (this.getCorpus().getDocumentsCount() == 3) {\n\t\t\t\tthis.setApiParam('dimensions', 2);\n\t\t\t\tthis.queryById('dimensions').menu.items.get(0).setChecked(true); // need 1-2 docs or 4+ docs for 3 dimensions\n\t\t\t}\n\t\t}\n    },\n    \n    loadStoreFromJson: function(storeClass, storeData) {\n\t\tif (storeClass == 'Voyant.data.store.CAAnalysis') {\n\t\t\tthis.getCaStore().loadRawData(storeData);\n\t\t\tthis.doAnalysisChange('ca');\n\t\t\tthis.maskAndBuildChart.call(this, this.getCaStore());\n\t\t} else if (storeClass == 'Voyant.data.store.PCAAnalysis') {\n\t\t\tthis.getPcaStore().loadRawData(storeData);\n\t\t\tthis.doAnalysisChange('pca');\n\t\t\tthis.maskAndBuildChart.call(this, this.getPcaStore());\n\t\t} else if (storeClass == 'Voyant.data.store.TSNEAnalysis') {\n\t\t\tthis.getTsneStore().loadRawData(storeData);\n\t\t\tthis.doAnalysisChange('tsne');\n\t\t\tthis.maskAndBuildChart.call(this, this.getTsneStore());\n\t\t} else if (storeClass == 'Voyant.data.store.DocSimAnalysis') {\n\t\t\tthis.getDocSimStore().loadRawData(storeData);\n\t\t\tthis.doAnalysisChange('docSim');\n\t\t\tthis.maskAndBuildChart.call(this, this.getDocSimStore());\n\t\t}\n    },\n    \n    maskAndBuildChart: function(store) {\n    \tthis.queryById('chartParent').mask(this.localize('plotting'));\n    \tExt.defer(this.buildChart, 50, this, [store]);\n    },\n\n    buildChart: function(store) {\n    \tvar that = this; // needed for tooltip renderer\n    \t\n    \tvar oldChart = this.queryById('chart');\n    \tif (oldChart !== null) {\n    \t\tthis.queryById('chartParent').remove(oldChart);\n    \t}\n    \t\n    \tthis.queryById('termsGrid').getSelectionModel().deselectAll();\n    \t\n    \tvar rec = store.getAt(0);\n        var numDims = this.getApiParam('dimensions');\n        \n    \tvar summary = '';    \t\n    \tif (this.getApiParam('analysis') === 'pca') {\n    \t\t// calculate the percentage of original data represented by the dominant principal components\n\t\t\tvar pcs = rec.getPrincipalComponents();\n\t\t\tvar eigenTotal = 0;\n\t\t\tfor (var i = 0; i < pcs.length; i++) {\n\t\t\t\tvar pc = pcs[i];\n\t\t\t\teigenTotal += parseFloat(pc.get('eigenValue'));\n\t\t\t}\n\t\t\tif (eigenTotal == 0) {\n\t\t\t\t// do nothing\n\t\t\t} else {\n\t\t\t\tsummary = this.localize('pcTitle')+'\\n';\n\t\t\t\tvar pcMapping = ['xAxis', 'yAxis', 'fill'];\n\t\t\t\tfor (var i = 0; i < pcs.length; i++) {\n\t\t\t\t\tif (i >= numDims) break;\n\t\t\t\t\t\n\t\t\t\t\tvar eigenValue = pcs[i].get('eigenValue');\n\t\t\t\t\tvar percentage = eigenValue / eigenTotal * 100;\n\t\t\t\t\tsummary += this.localize('pc')+' '+(i+1)+' ('+this.localize(pcMapping[i])+'): '+Math.round(percentage*100)/100+'%\\n';\n\t\t\t\t}\n\t\t\t}\n    \t} else if (this.getApiParam('analysis') === 'tsne') {\n    \t\t\n    \t} else {\n    \t\tsummary = this.localize('caTitle')+'\\n';\n    \t\tvar pcMapping = ['xAxis', 'yAxis', 'fill'];\n    \t\t\n    \t\tvar dimensions = rec.getDimensions();\n    \t\tfor (var i = 0; i < dimensions.length; i++) {\n    \t\t\tif (i >= numDims) break;\n    \t\t\t\n    \t\t\tvar percentage = dimensions[i].get('percentage');\n    \t\t\tsummary += this.localize('dimension')+' '+(i+1)+' ('+this.localize(pcMapping[i])+'): '+Math.round(percentage*100)/100+'%\\n';\n    \t\t}\n    \t}\n        \n        var maxFreq = 0;\n        var minFreq = Number.MAX_VALUE;\n        var maxFill = 0;\n        var minFill = Number.MAX_VALUE;\n        \n\t\tthis.getTermStore().removeAll();\n\t        \n        var tokens = rec.getTokens();\n        var termData = [];\n        var docData = [];\n        tokens.forEach(function(token) {\n        \tvar freq = token.get('rawFreq');\n        \tvar category = token.get('category');\n        \tif (category === undefined) {\n        \t\tcategory = 'term'; // some analyses don't define categories\n        \t\ttoken.set('category', 'term');\n        \t}\n        \tvar isTerm = category === 'term';\n        \tif (isTerm) {\n\t        \tif (freq > maxFreq) maxFreq = freq;\n\t        \tif (freq < minFreq) minFreq = freq;\n        \t}\n        \tif (this.getTermStore().findExact('term', token.get('term') === -1)) {\n        \t\tthis.getTermStore().addSorted(token);\n        \t}\n        \tif (numDims === 3) {\n\t\t\t\tvar z = token.get('vector')[2];\n\t\t\t\tif (z !== undefined) {\n\t\t\t\t\tif (z < minFill) minFill = z;\n\t\t\t\t\tif (z > maxFill) maxFill = z;\n\t\t\t\t}\n\t\t\t}\n        \tvar tokenData = {\n        \t\tx: token.get('vector')[0], y: token.get('vector')[1] || 0, z: token.get('vector')[2] || 0,\n    \t\t\tterm: token.get('term'), rawFreq: freq, relativeFreq: token.get('relativeFreq'), cluster: token.get('cluster'), category: category,\n    \t\t\tdisabled: false\n        \t};\n        \tif (!isTerm) {\n        \t\tif (token.get('category') === 'bin') {\n        \t\t\ttokenData.term = tokenData.title = \"Bin \"+token.get('docIndex');\n        \t\t} else {\n\t        \t\ttokenData.docIndex = token.get('docIndex');\n\t        \t\tvar doc = this.getCorpus().getDocument(tokenData.docIndex);\n\t        \t\tif (doc !== null) {\n\t\t        \t\ttokenData.term = doc.getShortTitle();\n\t\t        \t\ttokenData.title = doc.getTitle();\n\t        \t\t}\n        \t\t}\n        \t\tdocData.push(tokenData);\n        \t} else {\n        \t\ttermData.push(tokenData);\n        \t}\n        }, this);\n        \n        this.updateLimit();\n        \n    \tvar termSeriesStore = Ext.create('Ext.data.JsonStore', {\n    \t\tfields: ['term', 'x', 'y', 'z', 'rawFreq', 'relativeFreq', 'cluster', 'category', 'docIndex', 'disabled'],\n    \t\tdata: termData\n    \t});\n    \tvar docSeriesStore = Ext.create('Ext.data.JsonStore', {\n    \t\tfields: ['term', 'x', 'y', 'z', 'rawFreq', 'relativeFreq', 'cluster', 'category', 'docIndex', 'disabled'],\n    \t\tdata: docData\n    \t});\n    \t\n    \tvar config = {\n        \titemId: 'chart',\n        \txtype: 'cartesian',\n        \tinteractions: ['crosszoom','panzoom','itemhighlight'],\n        \tplugins: {\n                ptype: 'chartitemevents'\n            },\n        \taxes: [{\n        \t\ttype: 'numeric',\n        \t\tposition: 'bottom',\n        \t\tfields: ['x'],\n        \t\tlabel: {\n                    rotate:{degrees:-30}\n            \t}\n        \t},{\n        \t\ttype: 'numeric',\n        \t\tposition: 'left',\n        \t\tfields: ['y']\n        \t}],\n        \tsprites: [{\n        \t\ttype: 'text',\n        \t\ttext: summary,\n        \t\tx: 70,\n        \t\ty: 70\n        \t}],\n        \tinnerPadding: {top: 25, right: 25, bottom: 25, left: 25},\n        \tseries: [{\n        \t\ttype: 'customScatter',\n        \t\txField: 'x',\n        \t\tyField: 'y',\n        \t\tstore: termSeriesStore,\n        \t\tlabel: {\n        \t\t\tfont: '14px Helvetica',\n        \t\t\tfield: 'term',\n        \t\t\tdisplay: 'over'\n        \t\t},\n        \t\ttooltip: {\n        \t\t\ttrackMouse: true,\n        \t\t\tstyle: 'background: #fff',\n        \t\t\trenderer: function (toolTip, record, ctx) {\n        \t\t\t\ttoolTip.setHtml(that.tokenFreqTipTemplate.apply([record.get('term'),record.get('rawFreq'),record.get('relativeFreq')]));\n        \t\t\t}\n        \t\t},\n        \t\tmarker: {\n        \t\t    type: 'circle'\n        \t\t},\n        \t\thighlight: {\n        \t\t\tfillStyle: 'yellow',\n                    strokeStyle: 'black'\n        \t\t},\n        \t\trenderer: function (sprite, config, rendererData, index) {\n    \t\t\t\tvar store = rendererData.store;\n    \t\t\t\tvar item = store.getAt(index);\n    \t\t\t\tif (item !== null) {\n\t    \t\t\t\tvar clusterIndex = item.get('cluster');\n\t    \t\t\t\tvar scatterplot = that;\n\t    \t\t\t\t\n\t    \t\t\t\tif (clusterIndex === -1) {\n\t    \t\t\t\t\t// no clusters were specified in initial call\n\t    \t\t\t\t\tclusterIndex = 0;\n\t    \t\t\t\t}\n\t    \t\t\t\t\n\t    \t\t\t\tvar fillAlpha = 0.65;\n\t    \t\t\t\tvar strokeAlpha = 1;\n\t    \t\t\t\tif (item.get('disabled') === true) {\n\t    \t\t\t\t\tfillAlpha = 0.1;\n\t    \t\t\t\t\tstrokeAlpha = 0.1;\n\t    \t\t\t\t} else if (numDims === 3 && item.get('z')) {\n\t    \t\t\t\t\tfillAlpha = scatterplot.interpolate(item.get('z'), minFill, maxFill, 0, 1);\n\t    \t\t\t\t}\n\t    \t\t\t\tvar color = scatterplot.getApplication().getColor(clusterIndex);\n\t    \t\t\t\tconfig.fillStyle = 'rgba('+color.join(',')+','+fillAlpha+')';\n\t    \t\t\t\tconfig.strokeStyle = 'rgba('+color.join(',')+','+strokeAlpha+')';\n\t    \t\t\t\t\n\t    \t\t\t\tvar freq = item.get('rawFreq');\n\t    \t\t\t\tvar radius = scatterplot.interpolate(freq, minFreq, maxFreq, 2, 20);\n\t    \t\t\t\tconfig.radius = radius;\n    \t\t\t\t}\n    \t\t\t},\n    \t\t\tscope: this\n        \t},{\n        \t\ttype: 'customScatter',\n        \t\txField: 'x',\n        \t\tyField: 'y',\n        \t\tstore: docSeriesStore,\n        \t\tlabel: {\n        \t\t\tfont: '14px Helvetica',\n        \t\t\tfield: 'term',\n        \t\t\tdisplay: 'over',\n        \t\t\tcolor: this.getDefaultDocColor(true)\n        \t\t},\n        \t\ttooltip: {\n        \t\t\ttrackMouse: true,\n        \t\t\tstyle: 'background: #fff',\n        \t\t\trenderer: function (toolTip, record, ctx) {\n        \t\t\t\ttoolTip.setHtml(that.docFreqTipTemplate.apply([record.get('title'),record.get('rawFreq')]));\n        \t\t\t}\n        \t\t},\n        \t\tmarker: {\n        \t\t    type: 'diamond'\n        \t\t},\n        \t\thighlight: {\n        \t\t\tfillStyle: 'yellow',\n                    strokeStyle: 'black'\n        \t\t},\n        \t\trenderer: function (sprite, config, rendererData, index) {\n    \t\t\t\tvar store = rendererData.store;\n    \t\t\t\tvar item = store.getAt(index);\n    \t\t\t\tif (item !== null) {\n\t    \t\t\t\tvar clusterIndex = item.get('cluster');\n\t    \t\t\t\tvar scatterplot = that;\n\t    \t\t\t\t\n\t    \t\t\t\tvar color;\n\t    \t\t\t\tif (clusterIndex === -1 || scatterplot.getApiParam('analysis') !== 'docSim') {\n\t    \t\t\t\t\tcolor = scatterplot.getDefaultDocColor();\n\t    \t\t\t\t} else {\n\t    \t\t\t\t\tcolor = scatterplot.getApplication().getColor(clusterIndex);\t\n\t    \t\t\t\t}\n\t    \t\t\t\t\n\t    \t\t\t\tvar a = 0.65;\n\t    \t\t\t\tif (numDims === 3 && item.get('z')) {\n\t    \t\t\t\t\ta = scatterplot.interpolate(item.get('z'), minFill, maxFill, 0, 1);\n\t    \t\t\t\t}\n\t    \t\t\t\t\n\t    \t\t\t\tconfig.fillStyle = 'rgba('+color.join(',')+','+a+')';\n\t    \t\t\t\tconfig.strokeStyle = 'rgba('+color.join(',')+',1)';\n\t    \t\t\t\tconfig.radius = 5;\n    \t\t\t\t}\n    \t\t\t},\n    \t\t\tscope: this\n        \t\t\n        \t\t\n        \t}],\n        \tlisteners: {\n        \t\titemclick: function(chart, item, event) {\n        \t\t\tvar data = item.record.data;\n        \t\t\tif (data.category === 'doc') {\n        \t\t\t\tvar record = this.getCorpus().getDocument(data.docIndex);\n\t            \t\tthis.getApplication().dispatchEvent('documentsClicked', this, [record]);\n        \t\t\t} else if (data.category === 'term') {\n\t        \t\t\tvar record = Ext.create('Voyant.data.model.CorpusTerm', data);\n\t            \t\tthis.getApplication().dispatchEvent('corpusTermsClicked', this, [record]);\n        \t\t\t}\n        \t\t},\n        \t\trender: function(chart) {\n        \t\t\tchart.body.on('contextmenu', function(event, target) {\n\t        \t\t\tevent.preventDefault();\n\t        \t\t\t\n\t\t            \tvar xy = event.getXY();\n\t\t            \tvar parentXY = Ext.fly(target).getXY();\n\t\t            \tvar x = xy[0] - parentXY[0];\n\t\t            \tvar y = xy[1] - parentXY[1];\n\t\t            \tvar chartItem = this.down('#chart').getItemForPoint(x,y);\n\t\t            \tif (chartItem != null && chartItem.record.get('category') === 'term') {\n\t\t            \t\tvar series = this.down('#chart').getSeries();\n\t\t            \t\tseries[0].disableToolTips();\n\t\t            \t\tseries[1].disableToolTips();\n\t\t            \t\t\n\t\t            \t\tvar term = chartItem.record.get('term');\n\t\t            \t\t\n\t\t            \t\tvar text = (new Ext.Template(this.localize('removeTerm'))).apply([term]);\n\t\t            \t\tthis.getChartMenu().queryById('remove').setText(text);\n\t\t            \t\ttext = (new Ext.Template(this.localize('nearbyTerm'))).apply([term]);\n\t\t            \t\tvar nearby = this.getChartMenu().queryById('nearby');\n\t\t            \t\tnearby.setText(text);\n\t\t            \t\tnearby.setDisabled(this.getApiParam('analysis') === 'tsne');\n\t\t            \t\t\n\t\t            \t\tthis.getChartMenu().on('click', function(menu, item) {\n\t\t            \t\t\tif (item !== undefined) {\n\t\t            \t\t\t\tvar term = chartItem.record.get('term');\n\t\t\t            \t\t\tif (item.getItemId() === 'nearby') {\n\t\t\t            \t\t\t\tthis.getNearbyForTerm(term);\n\t\t\t            \t\t\t} else {\n\t\t\t            \t\t\t\tthis.removeTerm(term);\n\t\t\t            \t\t\t}\n\t\t            \t\t\t}\n\t\t            \t\t}, this, {single: true});\n\t\t            \t\tthis.getChartMenu().showAt(xy);\n\t\t            \t}\n\t\t            }, this);\n        \t\t},\n        \t\tscope: this\n        \t}\n        };\n    \t\n    \tvar chart = Ext.create('Ext.chart.CartesianChart', config);\n    \tthis.queryById('chartParent').insert(0, chart);\n    \t\n    \tthis.queryById('chartParent').unmask();\n    \t\n    \tthis.doLabels();\n    \t\n\t\tvar newTerm = this.getNewTerm();\n    \tif (newTerm !== null) {\n\t\t\tsetTimeout(function() {\n\t\t\t\tthis.selectTerm(newTerm);\n\t\t\t\tthis.setNewTerm(null);\n\t\t\t}.bind(this), 0);\n        }\n    },\n\n\tupdateLimit: function() {\n\t\tvar termCount = this.getCurrentTerms().length;\n\t\tthis.setIgnoreTermsLimitChange(true);\n        this.queryById('limit').setValue(termCount);\n\t\tthis.setIgnoreTermsLimitChange(false);\n        this.setApiParam('limit', termCount);\n\t},\n    \n    getDefaultDocColor: function(returnHex) {\n    \tvar color = this.getApplication().getColor(6, returnHex);\n    \treturn color;\n    },\n    \n    doLabels: function() {\n    \tvar chart = this.queryById('chart');\n    \tvar series = chart.getSeries();\n    \tvar summary = chart.getSurface('chart').getItems()[0];\n    \tvar labels = this.getApiParam(\"label\");\n    \tif (labels.indexOf(\"summary\")>-1) {summary.show();}\n    \telse {summary.hide();}\n    \tif (labels.indexOf(\"terms\")>-1) {series[0].getLabel().show();}\n    \telse {series[0].getLabel().hide();}\n    \tif (labels.indexOf(\"docs\")>-1) {series[1].getLabel().show();}\n    \telse {series[1].getLabel().hide();}\n    },\n    \n    selectTerm: function(term, isDoc) {\n    \tvar chart = this.down('#chart');\n    \tif (chart !== null) {\n\t    \tif (term === undefined) {\n\t\t\t\tchart.getSeries()[0].setHighlightItem(null);\n\t\t\t\tchart.getSeries()[1].setHighlightItem(null);\n\t    \t} else {\n\t\t    \tvar series, index;\n\t\t    \tif (isDoc === true) {\n\t\t    \t\tseries = chart.getSeries()[1];\n\t\t\t    \tindex = series.getStore().findExact('title', term);\n\t\t    \t} else {\n\t\t\t    \tseries = chart.getSeries()[0];\n\t\t\t    \tindex = series.getStore().findExact('term', term);\n\t\t    \t}\n\t\t    \tif (index !== -1) {\n\t\t    \t\tvar record = series.getStore().getAt(index);\n\t\t    \t\tvar sprite = series.getSprites()[0];\n\t\t    \t\t// constructing series item, like in the chart series source\n\t\t    \t\tvar item = {\n\t\t\t\t\t\tseries: series,\n\t\t                category: series.getItemInstancing() ? 'items' : 'markers',\n\t\t                index: index,\n\t\t                record: record,\n\t\t                field: series.getYField(),\n\t\t                sprite: sprite\n\t\t    \t\t};\n\t\t    \t\tseries.setHighlightItem(item);\n\t\t    \t\tif (isDoc) {\n\t\t    \t\t\tchart.getSeries()[0].setHighlightItem(null);\n\t\t    \t\t} else {\n\t\t    \t\t\tchart.getSeries()[1].setHighlightItem(null);\n\t\t    \t\t}\n\t\t    \t\t\n\t\t    \t\tvar point = this.getPointFromIndex(series, index);\n\t\t    \t\tthis.setHighlightData({x: point[0], y: point[1], r: 50});\n\t\t    \t\t\n\t\t    \t\tif (this.getHighlightTask() == null) {\n\t\t    \t\t\tthis.setHighlightTask(Ext.TaskManager.newTask({\n\t\t        \t\t\trun: this.doHighlight,\n\t\t        \t\t\tscope: this,\n\t\t        \t\t\tinterval: 25,\n\t\t        \t\t\trepeat: this.getHighlightData().r\n\t\t        \t\t}));\n\t\t    \t\t}\n\t\t    \t\tthis.getHighlightTask().restart();\n\t\t    \t}\n\t    \t}\n    \t}\n    },\n    \n    getPointFromIndex: function(series, index) {\n\t\tvar sprite = series.getSprites()[0];\n\t\tif (sprite.surfaceMatrix !== null) {\n\t\t\tvar matrix = sprite.attr.matrix.clone().prependMatrix(sprite.surfaceMatrix);\n\t\t\tvar dataX = sprite.attr.dataX[index];\n\t\t\tvar dataY = sprite.attr.dataY[index];\n\t\t\treturn matrix.transformPoint([dataX, dataY]);\n\t\t} else {\n\t\t\treturn [0,0];\n\t\t}\n    },\n    \n    doHighlight: function() {\n    \tvar chart = this.down('#chart');\n    \tif (this.getHighlightData().r > 0) {\n\t    \tvar surf = chart.getSurface();\n\t\t\tvar highlight = null;\n\t\t\tvar items = surf.getItems();\n\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\tvar item = items[i];\n\t\t\t\tif (item.id == 'customHighlight') {\n\t\t\t\t\thighlight = item;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (highlight == null) {\n\t\t\t\tsurf.add({\n\t\t\t\t\tid: 'customHighlight',\n\t\t\t\t\ttype: 'circle',\n\t\t\t\t\tstrokeStyle: 'red',\n\t\t\t\t\tfillStyle: 'none',\n\t\t\t\t\tradius: this.getHighlightData().r,\n\t\t\t\t\tx: this.getHighlightData().x,\n\t\t\t\t\ty: this.getHighlightData().y\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\thighlight.setAttributes({\n\t\t\t\t\tx: this.getHighlightData().x,\n\t\t\t\t\ty: this.getHighlightData().y,\n\t\t\t\t\tradius: this.getHighlightData().r\n\t\t\t\t});\n\t\t\t\tthis.getHighlightData().r -= 1.5;\n\t\t\t\tif (this.getHighlightData().r <= 0) {\n\t\t\t\t\tthis.getHighlightData().r = 0;\n\t\t\t\t\tsurf.remove(highlight, true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tchart.redraw();\n    \t}\n    },\n    \n    filterChart: function(query) {\n    \tif (Ext.isString(query)) query = [query];\n    \tvar reQueries = [];\n    \tfor (var i = 0; i < query.length; i++) {\n    \t\tvar re = new RegExp(query[i]);\n    \t\treQueries.push(re);\n    \t}\n    \t\n    \t// filter terms\n    \tvar chart = this.queryById('chart');\n    \tvar series0 = chart.getSeries()[0];\n    \tvar label0 = series0.getLabel();\n    \tseries0.getStore().each(function(item) {\n    \t\tvar match = false;\n    \t\tif (reQueries.length == 0) match = true;\n    \t\telse {\n\t    \t\tfor (var i = 0; i < reQueries.length; i++) {\n\t    \t\t\tmatch = match || reQueries[i].test(item.get('term'));\n\t    \t\t\tif (match) break;\n\t    \t\t}\n    \t\t}\n    \t\titem.set('disabled', !match);\n    \t\tvar index = item.store.indexOf(item);\n    \t\tlabel0.setAttributesFor(index, {hidden: !match});\n    \t}, this);\n\n\t\tchart.redraw();\n    },\n    \n    getCurrentTerms: function() {\n    \tvar terms = [];\n    \tthis.getTermStore().each(function(r) {\n    \t\tif (r.get('category') === 'term') {\n    \t\t\tterms.push(r.get('term'));\n    \t\t}\n    \t});\n    \treturn terms;\n    },\n    \n    getNearbyForTerm: function(term) {\n    \tvar limit = Math.max(2000, Math.round(this.getCorpus().getWordTokensCount() / 100));\n\t\tthis.setApiParams({limit: limit, target: term});\n\t\tthis.loadFromApis();\n\t\tthis.setApiParam('target', undefined);\n    },\n    \n    removeTerm: function(term) {\n    \tvar series = this.down('#chart').getSeries()[0];\n    \tvar index = series.getStore().findExact('term', term);\n    \tseries.getStore().removeAt(index);\n    \t\n    \tindex = this.getTermStore().findExact('term', term);\n    \tthis.getTermStore().removeAt(index);\n    \t\n    \tthis.updateLimit();\n    },\n    \n    loadFromApis: function(keepCurrentTerms) {\n    \tthis.queryById('chartParent').mask(this.localize('analyzing'));\n    \t\n    \tvar params = {};\n    \tvar terms = this.getCurrentTerms();\n    \tif (this.getNewTerm() !== null) {\n    \t\tterms = terms.concat(this.getNewTerm());\n    \t\tthis.setApiParam('limit', terms.length);\n    \t}\n    \tif (terms.length > 0) {\n    \t\tif (this.getNewTerm() !== null || keepCurrentTerms) {\n    \t\t\tparams.query = terms.join(',');\n    \t\t}\n    \t}\n    \tExt.apply(params, this.getApiParams());\n    \tif (params.target != null) {\n    \t\tparams.term = terms;\n    \t}\n    \tif (params.analysis === 'pca') {\n    \t\tthis.getPcaStore().load({\n\t    \t\tparams: params\n\t    \t});\n    \t} else if (params.analysis === 'tsne'){\n    \t\tthis.getTsneStore().load({\n\t    \t\tparams: params\n\t    \t});\n    \t} else if (params.analysis === 'docSim'){\n    \t\tthis.getDocSimStore().load({\n\t    \t\tparams: params\n\t    \t});\n    \t} else {\n    \t\tthis.getCaStore().load({\n\t    \t\tparams: params\n\t    \t});\n    \t}\n    },\n    \n    interpolate: function(lambda, minSrc, maxSrc, minDst, maxDst) {\n        return minDst + (maxDst - minDst) * Math.max(0, Math.min(1, (lambda - minSrc) / (maxSrc - minSrc)));\n    }\n});\n\n/*\n * Adds tool tip disabling.\n */\nExt.define('Ext.chart.series.CustomScatter', {\n\textend: 'Ext.chart.series.Scatter',\n\t\n\talias: 'series.customScatter',\n    type: 'customScatter',\n    seriesType: 'scatterSeries',\n\t\n\ttipsDisabled: false,\n\t\n\tenableToolTips: function() {\n\t\tthis.tipsDisabled = false;\n\t},\n\t\n\tdisableToolTips: function() {\n\t\tthis.tipsDisabled = true;\n\t},\n\t\n    showTip: function (item, xy) {\n    \tif (this.tipsDisabled) {\n    \t\treturn;\n    \t}\n    \t\n    \tthis.callParent(arguments);\n    }\n});","/**\n * StreamGraph is a visualization that depicts the change of the frequency of words in a corpus (or within a single document).\n *\n * @example\n *\n * let config = {\n * \t\"bins\": null,\n * \t\"docId\": null,\n * \t\"docIndex\": null,\n * \t\"limit\": null,\n * \t\"query\": null,\n * \t\"stopList\": null,\n * \t\"withDistributions\": null\n * };\n *\n * loadCorpus(\"austen\").tool(\"streamgraph\", config);\n *\n * @class StreamGraph\n * @tutorial streamgraph\n * @memberof Tools\n */\nExt.define('Voyant.panel.StreamGraph', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.streamgraph',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.StreamGraph\n\t\t\t * @instance\n\t\t\t * @property {limit}\n\t\t\t * @default\n\t\t\t */\n    \t\tlimit: 5,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.StreamGraph\n\t\t\t * @instance\n\t\t\t * @property {stopList}\n\t\t\t * @default\n\t\t\t */\n    \t\tstopList: 'auto',\n\n\t\t\t/**\n\t\t\t * @memberof Tools.StreamGraph\n\t\t\t * @instance\n\t\t\t * @property {query}\n\t\t\t */\n    \t\tquery: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.StreamGraph\n\t\t\t * @instance\n\t\t\t * @property {withDistributions}\n\t\t\t * @default\n\t\t\t */\n    \t\twithDistributions: 'relative',\n\n\t\t\t/**\n\t\t\t * @memberof Tools.StreamGraph\n\t\t\t * @instance\n\t\t\t * @property {bins}\n\t\t\t * @default\n\t\t\t */\n    \t\tbins: 50,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.StreamGraph\n\t\t\t * @instance\n\t\t\t * @property {docIndex}\n\t\t\t */\n    \t\tdocIndex: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.StreamGraph\n\t\t\t * @instance\n\t\t\t * @property {docId}\n\t\t\t */\n    \t\tdocId: undefined\n    \t},\n\t\tglyph: 'xf1fe@FontAwesome'\n    },\n    \n    config: {\n    \tvisLayout: undefined,\n    \tvis: undefined,\n    \tmode: 'corpus',\n    \t\n    \tlayerData: undefined,\n    \t\n    \tgraphId: undefined,\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n    },\n    \n    graphMargin: {top: 20, right: 60, bottom: 110, left: 80},\n    \n    MODE_CORPUS: 'corpus',\n    MODE_DOCUMENT: 'document',\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.setGraphId(Ext.id(null, 'streamgraph_'));\n    },\n    \n    initComponent: function() {\n        var me = this;\n        \n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\ttbar: new Ext.Toolbar({\n                overflowHandler: 'scroller',\n\t\t\t\titems: ['->',{\n\t\t\t\t\txtype: 'legend',\n\t\t\t\t\tstore: new Ext.data.JsonStore({\n\t\t\t\t\t\tfields: ['name', 'mark', 'active']\n\t\t\t\t\t}),\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\titemclick: function(view, record, el, index) {\n\t\t\t\t\t\t\tvar isActive = Ext.fly(el.firstElementChild).hasCls('x-legend-inactive');\n\t\t\t\t\t\t\trecord.set('active', isActive);\n\t\t\t\t\t\t\tvar terms = this.getCurrentTerms();\n\t\t\t\t\t\t\tthis.setApiParams({query: terms, limit: terms.length, stopList: undefined, categories: this.getApiParam(\"categories\")});\n\t\t\t\t\t\t\tthis.loadFromCorpus();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},'->']\n\t\t\t}),\n\t\t\tbbar: {\n                overflowHandler: 'scroller',\n\t\t\t\titems: [{\n                \txtype: 'querysearchfield'\n                },{\n\t            \txtype: 'button',\n\t            \ttext: this.localize('clearTerms'),\n\t            \thandler: function() {\n\t            \t\tthis.setApiParams({query: undefined});\n\t            \t\tthis.loadFromRecords([]);\n\t            \t},\n\t            \tscope: this\n\t            },{\n\t            \txtype: 'corpusdocumentselector',\n\t            \tsingleSelect: true\n\t            },{\n\t            \ttext: this.localize('freqsMode'),\n\t\t\t\t\tglyph: 'xf201@FontAwesome',\n\t\t\t\t    tooltip: this.localize('freqsModeTip'),\n\t\t\t\t    menu: {\n\t\t\t\t    \titems: [{\n\t\t\t\t               text: this.localize('relativeFrequencies'),\n\t\t\t\t               checked: true,\n\t\t\t\t               itemId: 'relative',\n\t\t\t\t               group: 'freqsMode',\n\t\t\t\t               checkHandler: function(item, checked) {\n\t\t\t\t            \t   if (checked) {\n\t\t\t\t                \t   this.setApiParam('withDistributions', 'relative');\n\t\t\t\t                \t   this.loadFromCorpus();\n\t\t\t\t            \t   }\n\t\t\t\t               },\n\t\t\t\t               scope: this\n\t\t\t\t           }, {\n\t\t\t\t               text: this.localize('rawFrequencies'),\n\t\t\t\t               checked: false,\n\t\t\t\t               itemId: 'raw',\n\t\t\t\t               group: 'freqsMode',\n\t\t\t\t               checkHandler: function(item, checked) {\n\t\t\t\t            \t   if (checked) {\n\t\t\t\t                \t   this.setApiParam('withDistributions', 'raw');\n\t\t\t\t                \t   this.loadFromCorpus();\n\t\t\t\t            \t   }\n\t\t\t\t               },\n\t\t\t\t               scope: this\n\t\t\t           }]\n\t\t\t\t    }\n\t            },{\n\t            \txtype: 'slider',\n\t            \titemId: 'segmentsSlider',\n\t            \tfieldLabel: this.localize('segments'),\n\t            \tlabelAlign: 'right',\n\t            \tlabelWidth: 70,\n\t            \twidth: 150,\n\t            \tincrement: 10,\n\t            \tminValue: 10,\n\t            \tmaxValue: 300,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(this.getApiParam('bins'));\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({bins: newvalue});\n\t            \t\t\tthis.loadFromCorpus();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n\t            }]\n\t\t\t}\n        });\n        \n        this.on('loadedCorpus', function(src, corpus) {\n        \tif (this.getCorpus().getDocumentsCount() == 1 && this.getMode() != this.MODE_DOCUMENT) {\n\t\t\t\tthis.setMode(this.MODE_DOCUMENT);\n\t\t\t}\n\t\t\tif (!('bins' in this.getModifiedApiParams())) {\n\t\t\t\tif (this.getMode() == this.MODE_CORPUS) {\n\t\t\t\t\tvar count = corpus.getDocumentsCount();\n\t\t\t\t\tvar binsMax = 100;\n\t\t\t\t\tthis.setApiParam('bins', count > binsMax ? binsMax : count);\n\t\t\t\t}\n\t\t\t}\n    \t\tif (this.isVisible()) {\n    \t\t\tthis.loadFromCorpus();\n    \t\t}\n        }, this);\n        \n        this.on('corpusSelected', function(src, corpus) {\n    \t\tif (src.isXType('corpusdocumentselector')) {\n    \t\t\tthis.setMode(this.MODE_CORPUS);\n    \t\t\tthis.setApiParams({docId: undefined, docIndex: undefined});\n    \t\t\tthis.setCorpus(corpus);\n        \t\tthis.loadFromCorpus();\n    \t\t}\n    \t});\n        \n        this.on('documentSelected', function(src, doc) {\n        \tvar docId = doc.getId();\n        \tthis.setApiParam('docId', docId);\n        \tthis.loadFromDocumentTerms();\n        }, this);\n        \n\t\tthis.on('query', function(src, query) {\n        \tvar terms = this.getCurrentTerms();\n        \tterms.push(query);\n        \tthis.setApiParams({query: terms, limit: terms.length, stopList: undefined});\n        \tif (this.getMode() === this.MODE_DOCUMENT) {\n        \t\tthis.loadFromDocumentTerms();\n        \t} else {\n        \t\tthis.loadFromCorpusTerms(this.getCorpus().getCorpusTerms());\n        \t}\n        }, this);\n\t\t\n        this.on('resize', this.resizeGraph, this);\n        \n        this.on('boxready', this.initGraph, this);\n        \n        me.callParent(arguments);\n    },\n    \n    loadFromCorpus: function() {\n    \tvar corpus = this.getCorpus();\n\t\tif (this.getApiParam('docId') || this.getApiParam('docIndex')) {\n\t\t\tthis.loadFromDocumentTerms();\n\t\t} else if (corpus.getDocumentsCount() == 1) {\n\t\t\tthis.loadFromDocument(corpus.getDocument(0));\n\t\t} else {\n\t\t\tthis.loadFromCorpusTerms(corpus.getCorpusTerms());\n\t\t}\n\t},\n\n    loadFromCorpusTerms: function(corpusTerms) {\n    \tvar params = this.getApiParams(['limit','stopList','query','withDistributions','bins','categories']);\n\t\t// ensure that we're not beyond the number of documents\n\t\tif (params.bins && params.bins > this.getCorpus().getDocumentsCount()) {\n\t\t\tparams.bins = this.getCorpus().getDocumentsCount();\n\t\t}\n\t\tcorpusTerms.load({\n\t\t    callback: function(records, operation, success) {\n\t\t    \tif (success) {\n\t\t    \t\tthis.setMode(this.MODE_CORPUS);\n\t\t\t    \tthis.loadFromRecords(records);\n\t\t    \t} else {\n\t\t\t\t\tVoyant.application.showResponseError(this.localize('failedGetCorpusTerms'), operation);\n\t\t    \t}\n\t\t    },\n\t\t    scope: this,\n\t\t    params: params\n    \t});\n    },\n    \n    loadFromDocument: function(document) {\n    \tif (document.then) {\n    \t\tvar me = this;\n    \t\tdocument.then(function(document) {me.loadFromDocument(document);});\n    \t} else {\n    \t\tvar ids = [];\n    \t\tif (Ext.getClassName(document)==\"Voyant.data.model.Document\") {\n        \t\tthis.setApiParams({\n        \t\t\tdocIndex: undefined,\n        \t\t\tquery: undefined,\n        \t\t\tdocId: document.getId()\n        \t\t});\n        \t\tif (this.isVisible()) {\n                \tthis.loadFromDocumentTerms();\n        \t\t}\n    \t\t}\n    \t}\n    },\n    \n    loadFromDocumentTerms: function(documentTerms) {\n    \tif (this.getCorpus()) {\n        \tdocumentTerms = documentTerms || this.getCorpus().getDocumentTerms({autoLoad: false});\n    \t\tdocumentTerms.load({\n    \t\t    callback: function(records, operation, success) {\n    \t\t    \tif (success) {\n    \t\t    \t\tthis.setMode(this.MODE_DOCUMENT);\n    \t\t    \t\tthis.loadFromRecords(records);\n    \t\t    \t}\n    \t\t    \telse {\n    \t\t\t\t\tVoyant.application.showResponseError(this.localize('failedGetDocumentTerms'), operation);\n    \t\t    \t}\n    \t\t    },\n    \t\t    scope: this,\n    \t\t    params: this.getApiParams(['docId','docIndex','limit','stopList','query','withDistributions','bins','categories'])\n        \t});\n    \t}\n    },\n    \n    loadFromRecords: function(records) {\n    \tvar legendData = [];\n    \tvar layers = [];\n    \trecords.forEach(function(record, index) {\n    \t\tvar key = record.getTerm();\n    \t\tvar values = record.get('distributions');\n    \t\tfor (var i = 0; i < values.length; i++) {\n    \t\t\tif (layers[i] === undefined) {\n    \t\t\t\tlayers[i] = {};\n    \t\t\t}\n    \t\t\tlayers[i][key] = values[i];\n    \t\t}\n    \t\tlegendData.push({id: key, name: key, mark: this.getApplication().getColorForTerm(key, true), active: true});\n    \t}, this);\n    \t\n    \tthis.setLayerData(layers);\n    \t\n    \tthis.down('[xtype=legend]').getStore().loadData(legendData);\n\n    \tthis.doLayout();\n    },\n    \n    doLayout: function(layers) {\n    \tvar layers = this.getLayerData();\n    \tif (layers !== undefined) {\n    \t\tvar me = this;\n    \t\t\n\t    \tvar keys = [];\n\t    \tthis.down('[xtype=legend]').getStore().each(function(r) { keys.push(r.getId()); });\n\t    \t\n\t    \tvar steps;\n\t    \tif (this.getMode() === this.MODE_DOCUMENT) {\n\t    \t\tsteps = this.getApiParam('bins');\n\t    \t} else {\n\t    \t\tvar bins = this.getApiParam('bins');\n\t    \t\tvar docsCount = this.getCorpus().getDocumentsCount();\n\t    \t\t\n\t    \t\tsteps = bins < docsCount ? bins : docsCount;\n\t    \t}\n\t    \t\n\t    \tthis.getVisLayout().keys(keys);\n\t    \tvar processedLayers = this.getVisLayout()(layers);\n\t    \t\n\t    \tvar width = this.body.down('svg').getWidth() - this.graphMargin.left - this.graphMargin.right;\n\t    \tvar x = d3.scaleLinear().domain([0, steps-1]).range([0, width]);\n\t    \t\n\t    \tvar min = d3.min(processedLayers, function(layer) {\n\t    \t\treturn d3.min(layer, function(d) { return d[0]; });\n\t    \t});\n\t    \tvar max = d3.max(processedLayers, function(layer) {\n\t    \t\treturn d3.max(layer, function(d) { return d[1]; });\n\t    \t});\n\t    \t\n\t    \tvar height = this.body.down('svg').getHeight() - this.graphMargin.top - this.graphMargin.bottom;\n\t    \tvar y = d3.scaleLinear().domain([min, max]).range([height, 0]);\n\t    \t\n\t    \tvar area = d3.area()\n\t\t    \t.x(function(d, i) { return x(i); })\n\t\t\t    .y0(function(d) { return y(d[0]); })\n\t\t\t    .y1(function(d) { return y(d[1]); })\n\t\t\t    .curve(d3.curveCatmullRom);\n\t    \t\n\t    \tvar xAxis;\n\t    \tif (this.getMode() === this.MODE_CORPUS) {\n\t    \t\tvar xAxisDomain = [];\n\t    \t\tthis.getCorpus().getDocuments().each(function(doc) {\n\t    \t\t\txAxisDomain.push(doc.getTinyLabel());\n\t    \t\t});\n\t    \t\tvar xAxisScale = d3.scalePoint().domain(xAxisDomain).range([0, width]);    \t\t\n\t    \t\txAxis = d3.axisBottom(xAxisScale);\n\t    \t} else {\n\t    \t\txAxis = d3.axisBottom(x);\n\t    \t}\n\t    \t\n\t    \tvar yAxis = d3.axisLeft(y);\n\t    \t\n\t    \tvar paths = this.getVis().selectAll('path').data(processedLayers, function(d) { return d; });\n\t    \t\n\t    \tpaths\n\t    \t\t.attr('d', function(d) { return area(d); })\n\t\t    \t.style('fill', function(d) { return me.getApplication().getColorForTerm(d.key, true); })\n\t\t\t\t.select('title').text(function (d) { return d.key; });\n\t    \t\n\t    \tpaths.enter().append('path')\n\t\t\t\t.attr('d', function(d) { return area(d); })\n\t\t\t\t.style('fill', function(d) { return me.getApplication().getColorForTerm(d.key, true); })\n\t\t\t\t.append('title').text(function (d) { return d.key; });\n\t    \t\n\t    \tpaths.exit().remove();\n\t    \t\n\t    \tthis.getVis().selectAll('g.axis').remove();\n\t    \t\n\t    \tthis.getVis().append('g')\n\t    \t\t.attr('class', 'axis x')\n\t    \t\t.attr('transform', 'translate(0,'+height+')')\n\t    \t\t.call(xAxis);\n\t    \t\n\t    \tvar xAxisText;\n\t    \tif (this.getMode() === this.MODE_CORPUS) {\n\t    \t\tthis.getVis().select('g.axis.x').selectAll('text').each(function() {\n\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t.attr('text-anchor', 'end')\n\t\t\t\t\t\t.attr('transform', 'rotate(-45)');\n\t    \t\t});\n\t    \t\t\n\t    \t\txAxisText = this.localize('documents');\n\t    \t} else {\n\t    \t\txAxisText = this.localize('documentSegments');\n\t    \t}\n\t    \tthis.getVis().select('g.axis.x').append(\"text\")\n\t\t\t\t.attr('text-anchor', 'middle')\n\t\t\t\t.attr('transform', 'translate('+width/2+', '+(this.graphMargin.bottom-30)+')')\n\t\t\t\t.attr('fill', '#000')\n\t\t\t\t.text(xAxisText);\n\t    \t\n\t    \tthis.getVis().append('g')\n\t\t\t\t.attr('class', 'axis y')\n\t\t\t\t.attr('transform', 'translate(0,0)')\n\t\t\t\t.call(yAxis);\n\t    \t\n\t    \tvar yAxisText;\n\t    \tif (this.getApiParam('withDistributions') === 'raw') {\n\t    \t\tyAxisText = this.localize('rawFrequencies');\n\t    \t} else {\n\t    \t\tyAxisText = this.localize('relativeFrequencies');\n\t    \t}\n\t    \tthis.getVis().select('g.axis.y').append(\"text\")\n\t\t\t\t.attr('text-anchor', 'middle')\n\t\t\t\t.attr('transform', 'translate(-'+(this.graphMargin.left-20)+', '+height/2+') rotate(-90)')\n\t\t\t\t.attr('fill', '#000')\n\t\t\t\t.text(yAxisText);\n    \t}\n    },\n    \n\tgetCurrentTerms: function() {\n    \tvar terms = [];\n    \tthis.down('[xtype=legend]').getStore().each(function(record) {\n    \t\tif (record.get('active')) {\n    \t\t\tterms.push(record.get('name'));\n    \t\t}\n    \t}, this);\n    \treturn terms;\n    },\n\t\n    initGraph: function() {\n    \tif (this.getVisLayout() === undefined) {\n\t    \tvar el = this.getLayout().getRenderTarget();\n\t    \t\n\t    \tthis.setVisLayout(d3.stack().offset(d3.stackOffsetWiggle).order(d3.stackOrderInsideOut));\n\t\t\tthis.setVis(d3.select(el.dom).append('svg').attr('id',this.getGraphId()).append('g').attr('transform', 'translate('+this.graphMargin.left+','+this.graphMargin.top+')'));\n\t\t\t\n\t\t\tthis.resizeGraph();\n    \t}\n    },\n    \n    resizeGraph: function() {\n    \tvar el = this.body;//getLayout().getRenderTarget();\n    \tvar width = el.getWidth();\n\t\tvar height = el.getHeight();\n\t\t\n\t\td3.select(el.dom).select('svg').attr('width', width).attr('height', height);\n\t\t\n\t\tthis.doLayout();\n    }\n});\n\n","/**\n * The Summary panel provides an overview of a corpus, and the content will depend on whether the corpus includes one document or many.\n * You can work with the summary programmatically using {@link Spyral.Corpus#summary}.\n *\n * @example\n *\n * let config = {\n * \t\"limit\": null,\n * \t\"numberOfDocumentsForDistinctiveWords\": null,\n * \t\"start\": null,\n * \t\"stopList\": null,\n * };\n *\n * loadCorpus(\"austen\").tool(\"Summary\", config);\n *\n * @class Summary\n * @tutorial summary\n * @memberof Tools\n */\nExt.define('Voyant.panel.Summary', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.summary',\n    statics: {\n    \ti18n: {\n\t\t\treadabilityIndex: 'Readability Index:',\n\t\t\tdocsDensityTip: 'ratio of unique words in this document',\n\t\t\tavgWordsPerSentenceTip: 'average words per sentence in this document',\n\t\t\treadabilityTip: 'the Coleman-Liau readability index for this document'\n    \t},\n    \tapi: {\n    \t\t\n    \t\t/**\n    \t\t * @memberof Tools.Summary\n\t\t\t * @instance\n\t\t\t * @property {stopList}\n\t\t\t * @default\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\t/**\n\t\t\t * @memberof Tools.Summary\n\t\t\t * @instance\n\t\t\t * @property {start}\n\t\t\t * @default\n\t\t\t */\n    \t\tstart: 0,\n    \t\t\n    \t\t\n    \t\t/**\n    \t\t * @memberof Tools.Summary\n\t\t\t * @instance\n\t\t\t * @property {limit}\n\t\t\t * @default\n    \t\t */\n    \t\tlimit: 5,\n    \t\t\n    \t\t/**\n\t\t\t * @memberof Tools.Summary\n    \t\t * @instance\n    \t\t * @property {Number} numberOfDocumentsForDistinctiveWords The number of items to include in the list of distinctive words (similar to the limit parameter but specific to distinctive words).\n    \t\t */\n    \t\tnumberOfDocumentsForDistinctiveWords: 10\n    \t},\n\t\tglyph: 'xf1ea@FontAwesome'\n    },\n    config: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n    },\n    autoScroll: true,\n    cls: 'corpus-summary',\n    \n    constructor: function(config ) {\n\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\titems: {\n    \t\t\titemId: 'main',\n    \t\t\tcls: 'main',\n    \t\t\tmargin: 10\n    \t\t},\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n        \t\t\tfieldLabel: this.localize('items'),\n        \t\t\tlabelWidth: 40,\n        \t\t\twidth: 120,\n        \t\t\txtype: 'slider',\n\t            \tincrement: 5,\n\t            \tminValue: 5,\n\t            \tmaxValue: 59,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(this.getApiParam(\"limit\"))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({limit: newvalue});\n\t            \t\t\tthis.loadSummary();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                }]\n    \t\t}]\n    \t});\n\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.on(\"afterrender\", function() {\n        \tthis.body.addListener('click', function(e) {\n    \t\t\tvar target = e.getTarget(null, null, true);\n    \t\t\tif (target && target.dom.tagName == 'A') {\n    \t\t\t\tif (target.hasCls('document-id')) {\n    \t\t\t\t\tvar docId = target.getAttribute('val', 'voyant');\n    \t\t\t\t\tvar doc = this.getCorpus().getDocuments().getById(docId);\n    \t\t\t\t\tthis.dispatchEvent('documentsClicked', this, [doc]);\n    \t\t\t\t} else if (target.hasCls('corpus-type')) {\n    \t\t\t\t\tthis.dispatchEvent('termsClicked', this, [target.getHtml()]);\n    \t\t\t\t} else if (target.hasCls('document-type')) {\n    \t\t\t\t\tthis.dispatchEvent('documentIndexTermsClicked', this, [{\n    \t\t\t\t\t\tterm: target.getHtml(),\n    \t\t\t\t\t\tdocIndex: target.getAttribute(\"docIndex\", 'voyant')\n    \t\t\t\t\t}]);\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}, this);\n    \t})\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tif (this.rendered) {\n    \t\t\tthis.loadSummary();\n    \t\t}\n    \t\telse {\n    \t\t\tthis.on(\"afterrender\", function() {\n    \t\t\t\tthis.loadSummary();\n    \t\t\t}, this)\n    \t\t}\n\n    \t});\n    \t\n    \t// if we have a corpus, load it\n    \tif (config && config.corpus) {\n    \t\tthis.fireEvent('loadedCorpus', this, config.corpus);\n    \t}\n    \t\n    \tthis.on(\"resize\", function() {\n    \t\tvar available = this.getWidth()-200;\n    \t\tthis.query(\"sparklineline\").forEach(function(spark) {\n    \t\t\tif (spark.getWidth()>available) {\n    \t\t\t\tspark.setWidth(available);\n    \t\t\t}\n    \t\t})\n    \t}, this)\n    },\n    \n    loadSummary: function() {\n    \t\n    \tvar me = this;\n    \t\n    \tvar main = this.queryById('main');\n    \t\n    \tmain.removeAll();\n    \tmain.add({\n\t\t\tcls: 'section',\n    \t\thtml: this.getCorpus().getString()\n    \t});\n    \t\n    \tvar docs = this.getCorpus().getDocuments().getRange();\n    \tvar limit = this.getApiParam('limit');\n    \t\n    \tif (docs.length>1) {\n    \t\t\n        \tvar docsLengthTpl = new Ext.XTemplate('<tpl for=\".\" between=\"; \"><a href=\"#\" onclick=\"return false\" class=\"document-id\" voyant:val=\"{id}\" data-qtip=\"{title}\">{shortTitle}</a><span style=\"font-size: smaller\"> (<span class=\"info-tip\" data-qtip=\"{valTip}\">{val}</span>)</span></a></tpl>')\n\n        \tvar sparkWidth;\n        \tif (docs.length<25) {sparkWidth=docs.length*4;}\n        \telse if (docs.length<50) {sparkWidth=docs.length*2;}\n        \telse if (docs.length>100) {\n        \t\tvar available  = main.getWidth()-200;\n        \t\tsparkWidth = available < docs.length ? docs.length : available;\n        \t}\n        \t\n        \tvar numberOfTerms = this.localize('numberOfTerms');\n\n\t\t\t// document length\n\t\t\tdocs.sort(function(d1, d2) {return d2.getLexicalTokensCount()-d1.getLexicalTokensCount()});\n\t\t\tmain.add(this.showSparklineSection(\n\t\t\t\tfunction(doc) { return doc.getLexicalTokensCount(); },\n\t\t\t\tthis.localize('docsLength'), this.localize('longest'), this.localize('shortest'),\n\t\t\t\tdocs, limit, docsLengthTpl, sparkWidth, this.localize('numberOfTerms')\n\t\t\t));\n        \t\n\t\t\t// vocabulary density\n    \t\tdocs.sort(function(d1, d2) {return d2.getLexicalTypeTokenRatio()-d1.getLexicalTypeTokenRatio()});\n\t\t\tmain.add(this.showSparklineSection(\n\t\t\t\tfunction(doc) { return Ext.util.Format.number(doc.getLexicalTypeTokenRatio(),'0.000'); },\n\t\t\t\tthis.localize('docsDensity'), this.localize('highest'), this.localize('lowest'),\n\t\t\t\tdocs, limit, docsLengthTpl, sparkWidth, this.localize('docsDensityTip')\n\t\t\t));\n \n        \t// words per sentence\n    \t\tdocs.sort(function(d1, d2) {return d2.getAverageWordsPerSentence()-d1.getAverageWordsPerSentence()});\n\t\t\tmain.add(this.showSparklineSection(\n\t\t\t\tfunction(doc) { return Ext.util.Format.number(doc.getAverageWordsPerSentence(),'0.0'); },\n\t\t\t\tthis.localize('averageWordsPerSentence'), this.localize('highest'), this.localize('lowest'),\n\t\t\t\tdocs, limit, docsLengthTpl, sparkWidth, this.localize('avgWordsPerSentenceTip')\n\t\t\t));\n\n    \t} else { // single document, we can still show word density and average words per sentence\n    \t\tvar doc = docs[0];\n    \t\tif (doc) {\n            \tmain.add({\n            \t\tcls: 'section',\n            \t\thtml:\"<b>\"+this.localize(\"docsDensity\")+\"</b> \"+Ext.util.Format.number(doc.getLexicalTypeTokenRatio(),'0.000')\n            \t});    \t\t\n            \tmain.add({\n            \t\tcls: 'section',\n            \t\thtml: \"<b>\"+this.localize(\"averageWordsPerSentence\")+\"</b> \"+Ext.util.Format.number(doc.getAverageWordsPerSentence(),'0.0')\n            \t});    \t\t\n    \t\t}\n    \t}\n\n\t\t// readability\n\t\tthis.getCorpus().getReadability().then(function(data) {\n\t\t\tdocs.forEach(function(doc) {\n\t\t\t\tvar readDoc = data.find(function(dataDoc) {\n\t\t\t\t\treturn dataDoc.docId === doc.getId();\n\t\t\t\t});\n\t\t\t\tif (readDoc) {\n\t\t\t\t\tdoc.set('readability', readDoc.readability);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar sectionIndex = main.items.length-2;\n\t\t\tif (docs.length>1) {\n\t\t\t\tdocs.sort(function(d1, d2) {return d2.get('readability')-d1.get('readability')});\n\t\t\t\tmain.insert(sectionIndex, me.showSparklineSection(function(doc) {\n\t\t\t\t\treturn Ext.util.Format.number(doc.get('readability'),'0.000');\n\t\t\t\t}, me.localize('readabilityIndex'), me.localize('highest'), me.localize('lowest'), docs, limit, docsLengthTpl, sparkWidth, me.localize('readabilityTip')));\n\t\t\t} else {\n\t\t\t\tmain.insert(sectionIndex, {\n\t\t\t\t\tcls: 'section',\n\t\t\t\t\thtml: '<b>'+me.localize('readabilityIndex')+'</b> '+ Ext.util.Format.number(docs[0].get('readability'),'0.000')\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t\t\n    \t\n    \tmain.add({\n    \t\tcls: 'section',\n\t\t\titems: [{\n\t\t\t\thtml: this.localize(\"mostFrequentWords\"),\n\t\t\t\tcls: 'header'\n\t\t\t},{\n\t\t\t\tcls: 'contents',\n\t\t\t\thtml: '<ul><li></li></ul>'\n\t\t\t}],\n    \t\tlisteners: {\n    \t\t\tafterrender: function(container) {\n    \t\t\t\tcontainer.mask(me.localize(\"loading\"));\n    \t\t\t\tme.getCorpus().getCorpusTerms().load({\n    \t\t\t\t\tparams: {\n    \t\t\t\t\t\tlimit: me.getApiParam('limit'),\n    \t\t\t\t\t\tstopList: me.getApiParam('stopList'),\n    \t\t\t\t\t\tforTool: 'summary'\n    \t\t\t\t\t},\n    \t\t\t\t\tcallback: function(records, operation, success) {\n    \t\t\t\t\t\tif (success && records && records.length>0) {\n    \t\t\t\t\t\t\tcontainer.unmask();\n\t\t\t\t\t\t\t\tvar contentsEl = container.down('panel[cls~=contents]').getTargetEl().selectNode('li');\n    \t\t\t\t\t\t\tExt.dom.Helper.append(contentsEl,\n\t\t\t   \t        \t\t\t new Ext.XTemplate('<tpl for=\".\" between=\"; \"><a href=\"#\" onclick=\"return false\" class=\"corpus-type keyword\" voyant:recordId=\"{id}\">{term}</a><span style=\"font-size: smaller\"> ({val})</span></tpl>')\n\t\t\t   \t        \t\t \t\t.apply(records.map(function(term) {\n\t\t\t   \t        \t\t \t\t\treturn {\n\t\t\t\t   \t        \t\t \t\t\tid: term.getId(),\n\t\t\t\t   \t        \t\t \t\t\tterm: term.getTerm(),\n\t\t\t\t   \t        \t\t \t\t\tval: term.getRawFreq()\n\t\t\t   \t        \t\t \t\t\t}\n\t\t   \t        \t\t \t\t}))\n\t\t   \t        \t\t \t)\n    \t\t\t\t\t\t}\n    \t\t\t\t\t}\n    \t\t\t\t})\n    \t\t\t}\n    \t\t}\n    \t})\n    \t\n    \tif (docs.length>1) {\n        \tmain.add({\n        \t\tcls: 'section',\n\t\t\t\titems: [{\n\t\t\t\t\thtml: this.localize(\"distinctiveWords\"),\n\t\t\t\t\tcls: 'header'\n\t\t\t\t},{\n\t\t\t\t\tcls: 'contents',\n\t\t\t\t\thtml: '<ol></ol>'\n\t\t\t\t}],\n        \t\titemId: 'distinctiveWords',\n        \t\tlisteners: {\n        \t\t\tafterrender: function(container) {\n        \t\t\t\tme.showMoreDistinctiveWords();\n        \t\t\t}\n        \t\t},\n        \t\tscope: this\n        \t})\n    \t}\n    \t\n    },\n\n\tshowSparklineSection: function(docDataFunc, headerText, topText, bottomText, docs, limit, docsLengthTpl, sparkWidth, valueTip) {\n\t\tvar me = this;\n\t\treturn {\n\t\t\tcls: 'section',\n\t\t\titems: [{\n\t\t\t\tlayout: 'hbox',\n\t\t\t\talign: 'bottom',\n\t\t\t\titems: [{\n\t\t\t\t\thtml: headerText,\n\t\t\t\t\tcls: 'header'\n\t\t\t\t}, {\n\t\t\t\t\txtype: 'sparklineline',\n\t\t\t\t\tvalues: this.getCorpus().getDocuments().getRange().map(function(doc) {return docDataFunc.call(me, doc)}),\n\t\t\t\t\ttipTpl: new Ext.XTemplate('{[this.getDocumentTitle(values.x,values.y)]}', {\n\t\t\t\t\t\tgetDocumentTitle: function(docIndex, len) {\n\t\t\t\t\t\t\treturn '('+len+') '+this.panel.getCorpus().getDocument(docIndex).getTitle()\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpanel: me \n\t\t\t\t\t}),\n\t\t\t\t\theight: 16,\n\t\t\t\t\twidth: sparkWidth\n\t\t\t\t}]\n\t\t\t},{\n\t\t\t\tcls: 'contents',\n\t\t\t\thtml: '<ul><li>'+topText+\" \"+docsLengthTpl.apply(docs.slice(0, docs.length>limit ? limit : parseInt(docs.length/2)).map(function(doc) {return {\n\t\t\t\t\tid: doc.getId(),\n\t\t\t\t\tshortTitle: doc.getShortTitle(),\n\t\t\t\t\ttitle: doc.getTitle(),\n\t\t\t\t\tval: docDataFunc.call(me, doc),\n\t\t\t\t\tvalTip: valueTip\n\t\t\t\t}}))+'</li>'+\n\t\t\t\t\t'<li>'+bottomText+\" \"+docsLengthTpl.apply(docs.slice(-(docs.length>limit ? limit : parseInt(docs.length/2))).reverse().map(function(doc) {return {\n\t\t\t\t\t\tid: doc.getId(),\n\t\t\t\t\t\tshortTitle: doc.getShortTitle(),\n\t\t\t\t\t\ttitle: doc.getTitle(),\n\t\t\t\t\t\tval: docDataFunc.call(me, doc),\n\t\t\t\t\t\tvalTip: valueTip\n\t\t\t\t\t}}))+'</li>'\n\t\t\t}]\n\t\t}\n\t},\n     \n    showMoreDistinctiveWords: function() {\n    \tvar distinctiveWordsContainer = this.queryById('distinctiveWords');\n    \tvar list = distinctiveWordsContainer.getTargetEl().selectNode(\"ol\");\n    \tvar count = Ext.dom.Query.select(\"li:not(.more)\", list).length;\n    \tvar numberOfDocumentsForDistinctiveWords = parseInt(this.getApiParam('numberOfDocumentsForDistinctiveWords'));\n    \tvar range = this.getCorpus().getDocuments().getRange(count, count+numberOfDocumentsForDistinctiveWords-1);\n    \tif (range && Ext.isArray(range)) {\n    \t\tvar docIndex = [];\n    \t\trange.forEach(function(doc) {\n    \t\t\tdocIndex.push(doc.getIndex())\n    \t\t})\n    \t\tif (docIndex.length>0) {\n    \t\t\tthis.getCorpus().getDocumentTerms().load({\n    \t\t\t\taddRecords: true,\n    \t\t\t\tparams: {\n    \t\t\t\t\tdocIndex: docIndex,\n    \t\t\t\t\tperDocLimit: parseInt(this.getApiParam(\"limit\")),\n    \t\t\t\t\tlimit: numberOfDocumentsForDistinctiveWords*parseInt(this.getApiParam(\"limit\")),\n\t\t\t\t\t\tstopList: this.getApiParam('stopList'),\n    \t\t\t\t\tsort: 'TFIDF',\n    \t\t\t\t\tdir: 'DESC',\n    \t\t\t\t\tforTool: 'summary'\n    \t\t\t\t},\n    \t\t\t\tscope: this,\n    \t\t\t\tcallback: function(records, operation, success) {\n    \t\t\t\t\tvar docs = {};\n    \t\t\t\t\tif (success && records && Ext.isArray(records)) { // TODO: why wouldn't we have records here?\n    \t\t\t\t\t\trecords.forEach(function(r, index, array) {\n    \t\t\t\t\t\t\tvar i = r.getDocIndex();\n    \t\t\t\t\t\t\tif (!(i in docs)) {docs[i]=[]};\n    \t\t\t\t\t\t\tdocs[i].push({\n    \t\t\t\t\t\t\t\tid: r.getId(),\n    \t\t\t\t\t\t\t\tdocIndex: r.getDocIndex(),\n    \t\t\t\t\t\t\t\ttype: r.getTerm(),\n    \t\t\t\t\t\t\t\tval: Ext.util.Format.number(r.get('rawFreq'),'0,000'),\n    \t\t\t\t\t\t\t\tdocId: r.get('docId')\n    \t\t\t\t\t\t\t});\n\n    \t\t\t\t\t\t});\n    \t\t\t\t\t\tvar len;\n    \t\t\t\t\t\tdocIndex.forEach(function(index) {\n    \t\t\t\t\t\t\tif (docs[index]) {\n        \t\t\t\t\t\t\tvar doc = this.getCorpus().getDocument(index);\n        \t\t\t\t\t\t\tlen = docs[index].length; // declare for template\n        \t\t    \t\t\t\tExt.dom.Helper.append(list, {tag: 'li', 'voyant:index': String(index), html: \n        \t\t    \t\t\t\t\t'<a href=\"#\" onclick=\"return false\" class=\"document-id document-id-distinctive\" voyant:val=\"'+doc.get('id')+'\">'+doc.getShortTitle()+'</a>'+\n        \t\t    \t\t\t\t\tthis.localize('colon')+ \" \"+new Ext.XTemplate(this.localize('documentType')).apply({types: docs[index]})+'.'\n        \t\t    \t\t\t\t});\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t}, this);\n    \t\t\t\t\t\tdistinctiveWordsContainer.updateLayout()\n    \t\t\t\t\t\tlen = numberOfDocumentsForDistinctiveWords;\n    \t\t\t\t\t\tremaining = this.getCorpus().getDocuments().getTotalCount() - count - docIndex.length;\n    \t\t\t\t\t\tif (remaining>0) {\n        \t    \t\t\t\tvar tpl = new Ext.Template(this.localize('moreDistinctiveWords'));\n        \t\t\t\t\t\tvar more = Ext.dom.Helper.append(list, {tag: 'li', cls: 'more', html: tpl.apply([len>remaining ? remaining : len,remaining])}, true);\n        \t\t\t\t\t\tmore.on(\"click\", function() {\n        \t\t\t\t\t\t\tmore.remove();\n        \t\t\t\t\t\t\tthis.showMoreDistinctiveWords();\n        \t\t\t\t\t\t}, this)\n    \t\t\t\t\t\t}\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t});\n    \t\t}\n    \t}\n    },\n\n\t// override because the doc sparklines are mostly useless as exports\n\tgetExportVisualization: function() {\n\t\treturn false;\n\t},\n\n\tgetExtraDataExportItems: function() {\n\t\treturn [{\n\t\t\tname: 'export',\n\t\t\tinputValue: 'dataAsTsv',\n\t\t\tboxLabel: this.localize('exportGridCurrentTsv')\n\t\t}];\n\t},\n\n\texportDataAsTsv: function(panel, form) {\n\t\tvar value = '';\n\t\tvar sections = panel.query('panel[cls~=section]');\n\t\tsections.forEach(function(sp) {\n\t\t\tvar sectionData = '';\n\t\t\tvar header = sp.down('panel[cls~=header]');\n\t\t\tvar contents = sp.down('panel[cls~=contents]');\n\t\t\tif (header) {\n\t\t\t\tsectionData += header.getEl().dom.textContent + \"\\n\";\n\t\t\t\tif (contents) {\n\t\t\t\t\tcontents.getEl().select('li').elements.forEach(function(li) {\n\t\t\t\t\t\tsectionData += li.textContent.replace(/:/, \":\\t\").replace(/\\)[,;]/g, \")\\t\") + \"\\n\";\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsectionData = sp.getEl().dom.textContent + \"\\n\";\n\t\t\t}\n\t\t\tvalue += sectionData + \"\\n\";\n\t\t});\n\t\tExt.Msg.show({\n\t\t\ttitle: panel.localize('exportDataTitle'),\n\t\t\tmessage: panel.localize('exportDataTsvMessage'),\n\t\t\tbuttons: Ext.Msg.OK,\n\t\t\ticon: Ext.Msg.INFO,\n\t\t\tprompt: true,\n\t\t\tmultiline: true,\n\t\t\tvalue: value\n\t\t});\n\t}\n});\n","/**\n * TextualArc is a visualization of the terms in a document that includes a weighted centroid of terms and an arc that follows the terms in document order.\n *\n * @example\n *\n * let config = {\n * \t\"docIndex\": null,\n * \t\"minRawFreq\": null,\n * \t\"speed\": null,\n * \t\"stopList\": null\n * };\n *\n * loadCorpus(\"austen\").tool(\"textualarc\", config);\n *\n * @class TextualArc\n * @tutorial textualarc\n * @memberof Tools\n */\nExt.define('Voyant.panel.TextualArc', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.textualarc',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t/**\n    \t\t * @memberof Tools.TextualArc\n\t\t\t * @instance\n\t\t\t * @property {stopList}\n\t\t\t * @default\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n\t\t\t/**\n    \t\t * @memberof Tools.TextualArc\n\t\t\t * @instance\n\t\t\t * @property {docIndex}\n\t\t\t * @default\n    \t\t */\n    \t\tdocIndex: 0,\n    \t\t\n\t\t\t/**\n    \t\t * @memberof Tools.TextualArc\n\t\t\t * @instance\n\t\t\t * @property {Number} speed How fast to animate the visualization.\n\t\t\t * @default\n    \t\t */\n    \t\tspeed: 50,\n    \t\t\n\t\t\t/**\n    \t\t * @memberof Tools.TextualArc\n\t\t\t * @instance\n\t\t\t * @property {Number} minRawFreq The minimum raw frequency of terms to be considered.\n\t\t\t * @default\n    \t\t */\n    \t\tminRawFreq: 2\n    \t\t\t\n    \t},\n    \tglyph: 'xf06e@FontAwesome'\n\t},\n\tconfig: {\n    \toptions: [{xtype: 'stoplistoption'},{\n    \t\txtype: 'container',\n    \t\titems: {\n    \t\t\txtype: 'numberfield',\n\t    \t\tname: 'minRawFreq',\n\t    \t\tminValue: 1,\n\t    \t\tmaxValue: 10,\n\t    \t\tvalue: 2,\n\t    \t\tlabelWidth: 150,\n\t    \t\tlabelAlign: 'right',\n\t    \t\tinitComponent: function() {\n\t    \t\t\tvar panel = this.up('window').panel;\n\t    \t\t\tthis.fieldLabel = panel.localize(this.fieldLabel);\n\t    \t\t\tthis.on(\"afterrender\", function(cmp) {\n\t\t\t        \tExt.tip.QuickTipManager.register({\n\t\t\t                 target: cmp.getEl(),\n\t\t\t                 text: panel.localize('minRawFreqTip')\n\t\t\t             });\n\t    \t\t\t});\n\t    \t\t\tthis.on('beforedestroy', function(cmp) {\n                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n                \t});\n\t    \t\t\tthis.callParent(arguments);\n\t    \t\t},\n\t    \t\tfieldLabel: 'minRawFreq'\n    \t\t}\n    \t}],\n    \tperim: [],\n    \tdiam: undefined\n\t},\n\t\n\ttokensFetch: 500,\n\t\n    constructor: function() {\n\n    \tthis.mixins['Voyant.util.Localization'].constructor.apply(this, arguments);\n    \tthis.config.options[1].fieldLabel = this.localize(this.config.options[1].fieldLabel);\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n\t\t\thtml: '<canvas width=\"800\" height=\"600\"></canvas>',\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \txtype: 'combo',\n                \titemId: 'search',\n                \tqueryMode: 'local',\n                \tdisplayField: 'term',\n                \tvalueField: 'term',\n                \twidth: 90,\n                \temptyText: this.localize('search'),\n                \tforceSelection: true,\n                \tdisabled: true\n                },{\n\t            \txtype: 'documentselectorbutton',\n\t            \tsingleSelect: true\n\t            },{\n\t\t\t\t\txtype: 'slider',\n\t\t\t\t\tfieldLabel: this.localize('speed'),\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tlabelWidth: 40,\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tincrement: 1,\n\t\t\t\t\tminValue: 0,\n\t\t\t\t\tmaxValue: 100,\n\t\t\t\t\tvalue: 30,\n\t\t\t\t\tlisteners: {\n\t                \trender: function(cmp) {\n\t                \t\tcmp.setValue(parseInt(this.getApiParam(\"speed\")));\n\t    \t\t        \tExt.tip.QuickTipManager.register({\n\t    \t\t        \t\ttarget: cmp.getEl(),\n\t   \t\t                 \ttext: this.localize('speedTip')\n\t    \t\t        \t});\n\t                \t\t\n\t                \t},\n\t                \tbeforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n\t                    changecomplete: function(cmp, val) {\n\t                    \tthis.setApiParam('speed', val);\n                    \t\tthis.isReading = val!==0\n                    \t\tthis.draw();\n\t                    },\n\t                    scope: this\n\t\t\t\t\t}\n\t\t\t\t},{xtype: 'tbfill'}, {\n\t    \t\t\txtype: 'tbtext',\n\t    \t\t\thtml: this.localize('adaptation')\n\t    \t\t}]\n    \t\t}]\n    \t});\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.on('boxready', function(cmp) {\n\t\t\tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\");\n\t    \tthis.draw(canvas);\n\n    \t\tcanvas.addEventListener('mousemove', function(evt) {\n    \t\t\tif (cmp.documentTerms) {\n        \t\t\tvar rect = canvas.getBoundingClientRect(), x =  evt.clientX - rect.left, y = evt.clientY - rect.top;\n        \t\t\t\n        \t\t\tvar currentTerms = {};\n        \t\t\tcmp.documentTerms.each(function(documentTerm) {\n        \t\t\t\tvar dx = documentTerm.get('x'), dy = documentTerm.get('y');\n        \t\t\t\tif (dx>x-15 && dx<x+15 && dy>y-15 && dy<y+15) {\n        \t\t\t\t\tcurrentTerms[documentTerm.getTerm()] = true;\n        \t\t\t\t\treturn false;\n        \t\t\t\t}\n        \t\t\t})\n        \t\t\t\n        \t\t\t// no need to do anything if there are no current terms and none found\n        \t\t\tif (Object.keys(cmp.currentTerms || {}).length==0 && Object.keys(currentTerms).length==0) {return;}\n\n        \t\t\tcmp.currentTerms = currentTerms;\n        \t\t\tcmp.draw(canvas); // otherwise redraw\n    \t\t\t}\n    \t\t\t\n    \t      }, false);\n    \t})\n    \t\n    \tthis.on('loadedCorpus', function(src, corpus) {\n\t\t\tthis.loadDocument();\n    \t}, this);\n    \t\n    \tthis.on(\"documentselected\", function(src, doc) {\n    \t\tthis.setApiParam('docIndex', this.getCorpus().getDocument(doc).getIndex());\n    \t\tthis.loadDocument();\n    \t});\n    \t\n    \tthis.on(\"resize\", function() {\n    \t\tvar gutter = 20,\n\t\t\tavailableWidth = this.getTargetEl().getWidth() - gutter - gutter,\n\t\t\tavailableHeight = this.getTargetEl().getHeight() - gutter - gutter,\n\t\t\tdiam = Math.max(availableWidth, availableHeight), rad = diam /2,\n\t\t\tratio = Math.min(availableWidth, availableHeight) / diam,\n\t\t\tcanvas = this.getTargetEl().dom.querySelector(\"canvas\");\n    \t\t\n\t\t\tcanvas.width = this.getTargetEl().getWidth();\n\t\t\tcanvas.height = this.getTargetEl().getHeight();\n\t\t\tthis.setDiam(diam);\n\t\t\tthis.setPerim([]);\n\t\t\tvar i = parseInt(diam*.75)\n\t\t\twhile (this.getPerim().length<diam) {\n\t    \t\tthis.getPerim().push({\n\t    \t\t\tx:  gutter+(availableWidth/2)+(rad * (availableWidth>availableHeight ? 1 : ratio) * Math.cos(2 * Math.PI * i / diam)),\n\t    \t\t\ty:  gutter+(availableHeight/2)+(rad * (availableHeight>availableWidth ? 1 : ratio) * Math.sin(2 * Math.PI * i / diam))\n\t    \t\t})\n\t    \t\tif (i++==diam) {i=0;}\n\t\t\t}\n\t\t\t\n\t\t\t// TODO clear previous/current drawing\n    \t})\n    },\n    \n    draw: function(canvas, ctx) {\n    \tcanvas = canvas ||  this.getTargetEl().dom.querySelector(\"canvas\");\n    \tctx = ctx || canvas.getContext(\"2d\");\n    \tctx.clearRect(0,0,canvas.width,canvas.height);\n\t\tctx.fillStyle = \"rgba(0,0,0,.1)\";\n    \tthis.getPerim().forEach(function(p,i) {\n    \t\tif (i%3==0) {\n        \t\tctx.fillRect(p.x-5,p.y,10,1)\n    \t\t}\n    \t})\n    \tif (this.documentTerms) {\n        \tthis.drawTerms(canvas, ctx);\n        \tthis.drawReading(canvas,ctx);\n        \tif (this.isReading) {\n        \t\tvar me = this;\n        \t\tsetTimeout(function() {\n        \t\t\tme.draw();\n        \t\t}, 10)\n        \t}\n    \t}\n    },\n    \n    drawReading: function(canvas, ctx) {\n    \tctx = ctx || this.getTargetEl().dom.querySelector(\"canvas\").getContext(\"2d\");\n    \tvar delay = 2000-(parseInt(this.getApiParam('speed'))*1999/100);\n    \tif (this.isReading && this.documentTerms) {\n    \t\tvar current = parseInt(this.readingIndex * this.getPerim().length / this.lastToken);\n    \t\tctx.fillStyle = \"purple\";\n    \t\tctx.fillRect(this.getPerim()[current].x,this.getPerim()[current].y, 5, 5)\n\t\t\tvar first = this.readingStartTime == undefined;\n\t\t\tthis.readingStartTime = this.readingStartTime || new Date().getTime();\n\t\t\tvar delta = this.readingStartTime+delay-new Date().getTime();\n    \t\tif (this.sourceTerm && this.targetTerm) {\n    \t\t\tvar maxTail = 10;\n    \t\t\tif (first || delta<=0) {\n    \t\t\t\tthis.previousBeziers = this.previousBeziers || []; // this should be reset by tokens reader during first read\n        \t\t\tvar sx = this.sourceTerm.get('x'), sy = this.sourceTerm.get('y'), tx = this.targetTerm.get('x'), ty = this.targetTerm.get('y'),\n    \t\t\t\t\tpx = this.previousTerm ? this.previousTerm.get('x') : sx, py = this.previousTerm ? this.previousTerm.get('y') : sy,\n    \t\t\t\t\tround = 100, multiplier = .3;\n    \t\t\t\t\n        \t\t\tvar ix, iy, xd = Math.max(round, Math.abs(sx-tx) * .5), yd = Math.max(round, Math.abs(sy-ty) * .5);\n        \t\t\tix = sx > tx ? sx - xd : sx + xd;\n        \t\t\tiy = ty > sy ? sy + yd : sy - yd;\n    \t\t\t\tthis.previousBeziers.unshift([sx,sy,ix,iy,tx,ty]);\n    \t\t\t\tif (this.previousBeziers.length>maxTail) {this.previousBeziers.pop()}\n    \t\t\t}\n    \t\t\t\n    \t\t\tfor (var i=0; i<this.previousBeziers.length; i++) {\n\t        \t\tctx.strokeStyle=\"rgba(0,0,255,\"+(1-(i*.1))+\")\";\n    \t\t\t\tvar start = i+1 == this.previousBeziers.length ? 1-(delta/delay) : 0;\n    \t\t\t\tvar end = i==0 ? 1-(delta/delay) : 1;\n            \t\tthis.drawBezierSplit.apply(this, Ext.Array.merge([ctx], this.previousBeziers[i], [start], [end]));\n    \t\t\t}\n    \t\t\tif (delta<=0) {\n        \t\t\tthis.readingStartTime = undefined;\n        \t\t\tthis.read();\n    \t\t\t}\n    \t\t}\n    \t\tvar nextReadingIndex = this.readingIndex+1;\n    \t\tfor (var len=this.tokens.getCount(); nextReadingIndex<len; nextReadingIndex++) {\n    \t\t\tif (this.tokens.getAt(nextReadingIndex).getTerm().toLowerCase()==this.targetTerm.getTerm()) {\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t}\n    \t\tvar startReadingIndex = nextReadingIndex-parseInt(delta*(nextReadingIndex-this.readingIndex)/delay), count = this.tokens.getCount();\n    \t\tfor (; startReadingIndex<nextReadingIndex; startReadingIndex++) {\n    \t\t\tif (startReadingIndex < count && this.tokens.getAt(startReadingIndex).isWord()) {\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t}\n    \t\tvar tokens = this.tokens.getRange(startReadingIndex, len=Math.min(this.readingIndex+50, this.tokens.getCount())).map(function(token) {\n    \t\t\treturn token.getTerm();\n    \t\t})\n\t    \tctx.font = \"14px sans-serif\";\n    \t\tctx.fillStyle = \"rgba(0,0,0,.5)\";\n        \tctx.textAlign = \"left\";\n    \t\tctx.fillText(tokens.join(\"\"), canvas.width/4, canvas.height-5);\n    \t\tctx.clearRect(canvas.width*.75, canvas.height-20, canvas.width, 30)\n    \t} else if (this.documentTerms && this.documentTerms.getCount()<this.documentTerms.getTotalCount()) {\n    \t\tvar x = canvas.width / 4;\n    \t\tctx.strokeStyle=\"rgba(0,0,0,.5)\";\n    \t\tctx.fillStyle = \"rgba(0,0,0,.2)\";\n    \t\tctx.strokeRect(x,canvas.height-12,x*2,10);\n    \t\tctx.fillRect(x,canvas.height-12,(this.documentTerms.getCount()*x*2)/this.documentTerms.getTotalCount(),10);\n    \t}\n    },\n    \n    drawTerms: function(canvas, ctx) {\n    \tcanvas = canvas || this.getTargetEl().dom.querySelector(\"canvas\");\n    \tctx = ctx || canvas.getContext(\"2d\");\n    \tctx.textAlign = \"center\";\n    \tif (this.documentTerms && this.getPerim().length > 0) {\n    \t\tthis.documentTerms.each(function(documentTerm) {\n    \t\t\tvar me = this, freq = documentTerm.getRawFreq(), term = documentTerm.getTerm(),\n    \t\t\t\tx = documentTerm.get('x'), y = documentTerm.get('y');\n    \t\t\tisCurrentTerm = me.currentTerms && (term in me.currentTerms);\n    \t\t\tisReadingTerm = this.sourceTerm && this.sourceTerm.getTerm() == term;\n    \t    \tctx.font = ((Math.log(freq)*(canvas.width*10/800)/Math.log(this.maxRawFreq))+(isCurrentTerm || isReadingTerm ? 10 : 5)) + \"px sans-serif\";\n    \t    \tif (isCurrentTerm) {\n    \t    \t\tctx.fillStyle = \"red\";\n    \t    \t} else if (isReadingTerm) {\n    \t    \t\tctx.fillStyle = \"blue\";\n    \t    \t} else {\n    \t    \t\tctx.fillStyle = \"rgba(0,0,0,\"+((freq*.9/this.maxRawFreq)+.1)+\")\";\n    \t    \t}\n    \t    \tif (isCurrentTerm || isReadingTerm) {\n    \t    \t\tctx.strokeStyle = isCurrentTerm ? \"rgba(255,0,0,.2)\" : \"rgba(0,255,0,.4)\";\n    \t    \t\tdocumentTerm.getDistributions().forEach(function(d, i) {\n    \t    \t\t\tif (d>0 && this.getPerim()[i]) {\n    \t    \t\t\t\tctx.beginPath();\n    \t    \t\t\t\tctx.moveTo(x, y);\n    \t    \t\t\t\tctx.lineTo(this.getPerim()[i].x,this.getPerim()[i].y);\n    \t    \t\t\t\tctx.stroke();\n    \t    \t\t\t}\n    \t    \t\t}, this)\n    \t    \t}\n    \t\t\tctx.fillText(term, x, y);\n    \t\t\t\n    \t\t}, this)    \t\t\n    \t}\n    },\n    \n    read: function(index) {\n    \tif (Ext.isNumber(index)) {this.readingIndex=index;}\n    \telse {this.readingIndex++;}\n    \tif (this.sourceTerm) {this.previousTerm=this.sourceTerm;}\n    \tfor (var i=this.readingIndex, len = this.tokens.getCount(); i<len; i++) {\n    \t\tvar token = this.tokens.getAt(i), term = token.getTerm().toLowerCase();\n    \t\tif (term in this.termsMap) {\n    \t\t\tthis.sourceTerm = this.termsMap[term];\n    \t\t\tif (this.sourceTerm.getRawFreq()>=1) {\n        \t\t\tthis.readingIndex = i;\n        \t\t\tbreak\n    \t\t\t}\n    \t\t}\n    \t}\n    \tfor (var i=this.readingIndex+1, len = this.tokens.getCount(); i<len; i++) {\n    \t\tvar token = this.tokens.getAt(i), term = token.getTerm().toLowerCase();\n    \t\tif (term in this.termsMap) {\n    \t\t\tthis.targetTerm = this.termsMap[term];\n    \t\t\tif (this.targetTerm.getRawFreq()>=1) {\n        \t\t\tbreak;\n    \t\t\t}\n    \t\t}\n    \t}\n    \tif (!this.tokensLoading && this.tokens.getCount()-this.readingIndex<this.tokensFetch) {\n    \t\tthis.fetchMoreTokens();\n    \t}\n    \tthis.draw();\n    },\n    \n    \n    loadDocument: function() {\n    \tif (this.documentTerms) {this.documentTerms.destroy();this.documentTerms=undefined;}\n    \tthis.termsMap = {};\n    \tthis.draw();\n    \tvar doc =  this.getCorpus().getDocument(parseInt(this.getApiParam('docIndex')));\n    \t// if we're not in a tab panel, set the document title as part of the header\n    \tif (!this.up(\"tabpanel\")) {\n        \tthis.setTitle(this.localize('title') + \" <span class='subtitle'>\"+doc.getFullLabel()+\"</span>\");\n    \t}\n    \tthis.lastToken = parseInt(doc.get('lastTokenStartOffset-lexical'));\n    \tthis.documentTerms = doc.getDocumentTerms({\n    \t\tproxy: {\n    \t\t\textraParams: {\n    \t\t\t\tstopList: this.getApiParam('stopList'),\n    \t\t\t\tbins: this.getDiam(),\n    \t\t\t\twithDistributions: 'raw',\n    \t\t\t\tminRawFreq: parseInt(this.getApiParam('minRawFreq'))\n    \t\t\t}\n    \t\t}\n    \t});\n    \tvar search = this.queryById('search');\n    \tsearch.setDisabled(true);\n    \tsearch.setStore(this.documentTerms);\n    \tthis.fetchMoreDocumentTerms();\n    },\n    \n    fetchMoreDocumentTerms: function() {\n    \tif (!this.documentTerms) {this.loadDocument(); return;}\n    \tthis.documentTerms.load({\n    \t\tparams: {\n    \t\t\tstart: this.documentTerms.getCount(),\n    \t\t\tlimit: this.documentTerms.getCount() == 0 ? 10 : 250\n    \t\t},\n    \t\tcallback: function(records) {\n    \t\t\tif (records.length>0) {\n            \t\tthis.maxRawFreq = this.documentTerms.max('rawFreq');\n            \t\trecords.forEach(function(documentTerm) {\n            \t\t\tvar x = y = 0;\n            \t\t\tdocumentTerm.get('distributions').forEach(function(d, i) {\n            \t\t\t\tx += (this.getPerim()[i].x*d);\n            \t\t\t\ty += (this.getPerim()[i].y*d);\n            \t\t\t}, this)\n            \t\t\tdocumentTerm.set('x', x/documentTerm.getRawFreq());\n            \t\t\tdocumentTerm.set('y', y/documentTerm.getRawFreq());\n            \t\t}, this);\n    \t\t\t\tExt.Function.defer(this.fetchMoreDocumentTerms, 0, this);\n    \t\t\t\tthis.draw();\n    \t\t\t} else {\n    \t\t\t\tthis.queryById('search').setDisabled(false);\n    \t\t\t\tthis.termsMap = {};\n    \t\t\t\tthis.documentTerms.each(function(documentTerm) {\n    \t\t\t\t\tthis.termsMap[documentTerm.getTerm()] = documentTerm;\n    \t\t\t\t}, this)\n    \t\t\t\tif (this.tokens) {this.tokens.removeAll(true)}\n    \t\t\t\tthis.fetchMoreTokens();\n    \t\t\t}\n    \t\t},\n    \t\taddRecords: true,\n    \t\tscope: this\n    \t})\n    },\n    \n    fetchMoreTokens: function() {\n\t\tif (!this.tokens) {\n\t\t\tthis.tokens = this.getCorpus().getDocument(parseInt(this.getApiParam('docIndex'))).getTokens({\n\t\t\t\tproxy: {\n\t\t\t\t\textraParams: {\n\t    \t\t\t\tstripTags: 'all'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.noMoreTokens = false;\n\t\t} else if (this.noMoreTokens) {return;}\n\t\t\n\t\tvar first = this.tokens.getCount() == 0;\n\t\tthis.tokensLoading = true;\n\t\tvar speed = parseInt(this.getApiParam('speed'));\n    \tthis.tokens.load({\n    \t\tparams: {\n    \t\t\tstart: this.tokens.getCount(),\n    \t\t\tlimit: speed==50 && first ? 200 : Math.pow(110-speed, 2)\n    \t\t},\n    \t\tcallback: function(records) {\n    \t\t\tthis.tokensLoading = false;\n    \t\t\tif (records.length>0) {\n    \t\t\t\trecords.forEach(function(token) {\n    \t\t\t\t\tif (token.getTokenType()=='other') {\n    \t\t\t\t\t\ttoken.set('term', token.getTerm().replace(/\\s+/g, \" \"))\n    \t\t\t\t\t}\n    \t\t\t\t})\n        \t\t\tif (first) {\n        \t\t\t\tthis.previousBeziers = [];\n        \t\t\t\t// TODO\n//        \t\t\t\tif (this.getApiParam('speed') > 0) {\n\t        \t\t\t\tthis.isReading = true;\n\t        \t\t\t\tthis.read(0);\n//        \t\t\t\t}\n        \t\t\t}\n    \t\t\t} else {\n    \t\t\t\tthis.noMoreTokens = true;\n    \t\t\t}\n    \t\t},\n    \t\taddRecords: true,\n    \t\tscope: this\n\n    \t});\n    },\n    \n    /* The functions below adapted from http://www.pjgalbraith.com/drawing-animated-curves-javascript/ */\n    \n    /**\n     * Animates bezier-curve\n     * \n     * @param ctx       The canvas context to draw to\n     * @param x0        The x-coord of the start point\n     * @param y0        The y-coord of the start point\n     * @param x1        The x-coord of the control point\n     * @param y1        The y-coord of the control point\n     * @param x2        The x-coord of the end point\n     * @param y2        The y-coord of the end point\n     * @param duration  The duration in milliseconds\n     * @private\n     */\n    animatePathDrawing: function(ctx, x0, y0, x1, y1, x2, y2, duration) {\n        var start = null;\n        \n        var step = function animatePathDrawingStep(timestamp) {\n            if (start === null)\n                start = timestamp;\n            \n            var delta = timestamp - start,\n                progress = Math.min(delta / duration, 1);\n            \n            // Clear canvas\n            ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n            \n            // Draw curve\n            drawBezierSplit(ctx, x0, y0, x1, y1, x2, y2, 0, progress);\n            \n            if (progress < 1) {\n                window.requestAnimationFrame(step);\n            }\n        };\n        \n        window.requestAnimationFrame(step);\n    },\n    \n    /**\n     * Draws a splitted bezier-curve\n     * \n     * @param ctx       The canvas context to draw to\n     * @param x0        The x-coord of the start point\n     * @param y0        The y-coord of the start point\n     * @param x1        The x-coord of the control point\n     * @param y1        The y-coord of the control point\n     * @param x2        The x-coord of the end point\n     * @param y2        The y-coord of the end point\n     * @param t0        The start ratio of the splitted bezier from 0.0 to 1.0\n     * @param t1        The start ratio of the splitted bezier from 0.0 to 1.0\n     * @private\n     */\n    drawBezierSplit: function(ctx, x0, y0, x1, y1, x2, y2, t0, t1) {\n        ctx.beginPath();\n        \n        if( 0.0 == t0 && t1 == 1.0 ) {\n            ctx.moveTo( x0, y0 );\n            ctx.quadraticCurveTo( x1, y1, x2, y2 );\n        } else if( t0 != t1 ) {\n            var t00 = t0 * t0,\n                t01 = 1.0 - t0,\n                t02 = t01 * t01,\n                t03 = 2.0 * t0 * t01;\n            \n            var nx0 = t02 * x0 + t03 * x1 + t00 * x2,\n                ny0 = t02 * y0 + t03 * y1 + t00 * y2;\n            \n            t00 = t1 * t1;\n            t01 = 1.0 - t1;\n            t02 = t01 * t01;\n            t03 = 2.0 * t1 * t01;\n            \n            var nx2 = t02 * x0 + t03 * x1 + t00 * x2,\n                ny2 = t02 * y0 + t03 * y1 + t00 * y2;\n            \n            var nx1 = this.lerp ( this.lerp ( x0 , x1 , t0 ) , this.lerp ( x1 , x2 , t0 ) , t1 ),\n                ny1 = this.lerp ( this.lerp ( y0 , y1 , t0 ) , this.lerp ( y1 , y2 , t0 ) , t1 );\n            \n            ctx.moveTo( nx0, ny0 );\n            ctx.quadraticCurveTo( nx1, ny1, nx2, ny2 );\n        }\n        \n        ctx.stroke();\n        ctx.closePath();\n    },\n    \n    /**\n     * Linearly interpolate between two numbers v0, v1 by t\n     * @private\n     */\n    lerp: function(v0, v1, t) {\n        return ( 1.0 - t ) * v0 + t * v1;\n    }\n    \n    \n    \n});","\n// for mysterious reasons, Ext.require loads the scripts but produces a blank page, so use loadScript instead\n/*\nvar twicPath = Ext.Loader.getPath(\"resources\")+\"/twic/current\"\nExt.Loader.loadScript(twicPath+\"/css/twic.css\")\nExt.Loader.loadScript(twicPath+\"/lib/queue.min.js\")\nExt.Loader.loadScript(twicPath+\"/lib/textFlow.js\")\nExt.Loader.loadScript(twicPath+\"/lib/svg_helper_functions.js\")\nExt.Loader.loadScript(twicPath+\"/lib/class_syntax.js\")\nExt.Loader.loadScript(twicPath+\"/js/twic_level.js\")\nExt.Loader.loadScript(twicPath+\"/js/twic_panel.js\")\nExt.Loader.loadScript(twicPath+\"/js/twic_datashape.js\")\n*/\n\n\nExt.define('Voyant.panel.TopicContexts', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.topiccontexts',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t},\n\t\tglyph: 'xf06e@FontAwesome'\n    },\n    \n    constructor: function(config) {\n\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tcls: 'twic_body'\n    \t});\n\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\n    },\n    \n    listeners: {\n    \tloadedCorpus: function(src, corpus) {\t\t\n    \t\tthis.loadFromCorpus(corpus);\n    \t}\n    \t\n    },\n    \n    loadFromCorpus: function(corpus) {\n    \tvar url = Ext.Loader.getPath(\"resources\")+\"/twic/current/data/input/json\"\n        var twicLevel = TWiC.Level.prototype.Instance();\n        twicLevel.LoadJSON(url+\"/twic_corpusinfo.json\", url+\"/twic_corpusmap.json\");\n        var panel = this;\n\n        // Once JSON has loaded, create and start the level\n        twicLevel.m_queue.await(function(){\n\n            // Create components\n            var graphViews = [];\n            var infoViews = [];\n            var divName = \"dickinson\"; // NOTE: This needs to be added to twic_corpusinfo.json from serverside\n\n            // Topic bar setup\n            var topicBar = new TWiC.TopicBar({x:0, y:635}, // Position\n                                             {width:1280, height:165}, // Size\n                                             divName, // Name\n                                             twicLevel, []); // Level and linked view(s)\n            infoViews.push(topicBar);\n\n            // Document info bar setup\n            var docBar = new TWiC.DocumentBar({\"x\":1055, \"y\":0}, // Position\n                                              {\"width\":225, \"height\":635}, // Size\n                                              divName,  // Name\n                                              twicLevel, []); // Level and linked view(s)\n            infoViews.push(docBar);\n\n            // Graph setup\n            var corpusClusterView = new TWiC.CorpusClusterView({ \"x\":0, \"y\":0 }, // Position\n                                                               { \"width\":1055, \"height\":635}, // Size\n                                                               divName, // Name\n                                                               twicLevel, [topicBar, docBar]); // Level and linked view(s)\n            graphViews.push(corpusClusterView);\n\n            // Link the corpus cluster view to the topic bar as well\n            topicBar.m_linkedViews.push(corpusClusterView);\n\n            var body = panel.getLayout().getRenderTarget();\n\n            // Initialize the level\n            twicLevel.Initialize([0,0], // Position\n                                 {width: body.getWidth(), height: body.getHeight()}, // Size\n                                 divName, // Name\n                                 graphViews, infoViews, // TWiC graph and information panels\n                                 '#'+body.getId()\n            );\n\n            // Startup the level\n            twicLevel.Start();\n        }.bind(twicLevel));\n\n    }\n    \n})","/**\r\n * The TermsBerry tool provides a way of exploring high frequency terms and their collocates (words that occur in proximity).\r\n *\r\n * @example\r\n *\r\n * let config = {\r\n * \tcategories: null, // a query for the keywords (can be comma-separated list)\r\n * \tcontext: null, // a named stopword list or comma-separated list of words\r\n * \tdocId: null, // document index to restrict to (can be comma-separated list)\r\n * \tdocIndex: null, // the size of the context (the number of words on each side of the keyword)\r\n * \tnumInitialTerms: null, // the initial number of terms to display\r\n * \tquery: null, // the initial number of terms to display\r\n * \tstopList: null, // the initial number of terms to display\r\n * };\r\n *\r\n * loadCorpus(\"austen\").tool(\"termsberry\", config);\r\n *\r\n * @class TermsBerry\r\n * @tutorial termsberry\r\n * @memberof Tools\r\n */\r\nExt.define('Voyant.panel.TermsBerry', {\r\n\textend: 'Ext.panel.Panel',\r\n\tmixins: ['Voyant.panel.Panel'],\r\n\talias: 'widget.termsberry',\r\n    statics: {\r\n    \ti18n: {\r\n    \t},\r\n    \tapi: {\r\n\t\t\t/**\r\n\t\t\t * @memberof Tools.TermsBerry\r\n\t\t\t * @instance\r\n\t\t\t * @property {stopList}\r\n\t\t\t * @default\r\n\t\t\t */\r\n    \t\tstopList: 'auto',\r\n\r\n\t\t\t/**\r\n\t\t\t * @memberof Tools.TermsBerry\r\n\t\t\t * @instance\r\n\t\t\t * @property {context}\r\n\t\t\t * @default\r\n\t\t\t */\r\n    \t\tcontext: 2,\r\n\r\n\t\t\t/**\r\n\t\t\t * @memberof Tools.TermsBerry\r\n\t\t\t * @instance\r\n\t\t\t * @property {Number} numInitialTerms The number of initial terms to display.\r\n\t\t\t */\r\n        \tnumInitialTerms: 75,\r\n\r\n\t\t\t/**\r\n\t\t\t * @memberof Tools.TermsBerry\r\n\t\t\t * @instance\r\n\t\t\t * @property {query}\r\n\t\t\t */\r\n    \t\tquery: undefined,\r\n\r\n\t\t\t/**\r\n\t\t\t * @memberof Tools.TermsBerry\r\n\t\t\t * @instance\r\n\t\t\t * @property {docIndex}\r\n\t\t\t */\r\n    \t\tdocIndex: undefined,\r\n\r\n\t\t\t/**\r\n\t\t\t * @memberof Tools.TermsBerry\r\n\t\t\t * @instance\r\n\t\t\t * @property {docId}\r\n\t\t\t */\r\n    \t\tdocId: undefined,\r\n\r\n\t\t\t/**\r\n\t\t\t * @memberof Tools.TermsBerry\r\n\t\t\t * @instance\r\n\t\t\t * @property {categories}\r\n\t\t\t */\r\n    \t\tcategories: undefined\r\n    \t},\r\n\t\tglyph: 'xf1db@FontAwesome'\r\n    },\r\n    config: {\r\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\r\n    \t\r\n    \tmode: undefined,\r\n    \t\r\n    \tscalingFactor: 3,\r\n    \t\r\n    \tminRawFreq: undefined,\r\n    \tmaxRawFreq: undefined,\r\n    \tmaxCollocateValue: undefined,\r\n    \tminFillValue: undefined,\r\n    \tmaxFillValue: undefined,\r\n    \t\r\n    \tcurrentData: {},\r\n    \tblacklist: {},\r\n    \t\r\n    \tvisLayout: undefined,\r\n    \tvis: undefined,\r\n    \tvisInfo: undefined,\r\n    \tvisId: undefined,\r\n    \t\r\n    \tcurrentNode: undefined,\r\n    \t\r\n    \ttip: undefined,\r\n    \tcontextMenu: undefined\r\n\t},\r\n    \r\n\tMODE_TOP: 'top',\r\n    MODE_DISTINCT: 'distinct',\r\n    \r\n    MIN_TERMS: 5,\r\n    MAX_TERMS: 500,\r\n    \r\n    COLLOCATES_LIMIT: 1000000, // a very large number so we get all of them\r\n    \r\n    MIN_SCALING: 1,\r\n    MAX_SCALING: 5,\r\n    \r\n    MIN_STROKE_OPACITY: 0.1,\r\n\tMAX_STROKE_OPACITY: 0.3,\r\n\t\r\n    layout: 'fit',\r\n    \r\n    constructor: function(config) {\r\n    \tthis.setMode(this.MODE_TOP);\r\n    \t\r\n    \tthis.callParent(arguments);\r\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\r\n    \t\r\n    \tthis.setVisId(Ext.id(null, 'termspack_'));\r\n    },\r\n    \r\n    initComponent: function() {\r\n    \tExt.apply(this, {\r\n    \t\ttitle: this.localize('title'),\r\n    \t\tdockedItems: [{\r\n                dock: 'bottom',\r\n                xtype: 'toolbar',\r\n                overflowHandler: 'scroller',\r\n                items: [{\r\n                   xtype: 'querysearchfield',\r\n                   clearOnQuery: true\r\n                },{\r\n                \txtype: 'button',\r\n                \ttext: this.localize('strategy'),\r\n                \tmenu: {\r\n\t                \titems: [{\r\n\t                \t\txtype: 'menucheckitem',\r\n\t                \t\tgroup: 'strategy',\r\n\t                \t\tchecked: this.getMode() === this.MODE_TOP,\r\n\t                \t\ttext: this.localize('topTerms'),\r\n\t                \t\tcheckHandler: function(item, checked) {\r\n\t                \t\t\tif (checked) {\r\n\t                \t\t\t\tthis.setMode(this.MODE_TOP);\r\n\t                \t\t\t\tthis.doLoad();\r\n\t                \t\t\t}\r\n\t                \t\t},\r\n\t                \t\tscope: this\r\n\t                \t},{\r\n\t                \t\txtype: 'menucheckitem',\r\n\t                \t\tgroup: 'strategy',\r\n\t                \t\tchecked: this.getMode() === this.MODE_DISTINCT,\r\n\t                \t\ttext: this.localize('distinctTerms'),\r\n\t                \t\tcheckHandler: function(item, checked) {\r\n\t                \t\t\tif (checked) {\r\n\t                \t\t\t\tthis.setMode(this.MODE_DISTINCT);\r\n\t                \t\t\t\tthis.doLoad();\r\n\t                \t\t\t}\r\n\t                \t\t},\r\n\t                \t\tscope: this\r\n\t                \t}]\r\n                \t}\r\n                },{\r\n\t                fieldLabel: this.localize('numTerms'),\r\n\t    \t\t\tlabelWidth: 50,\r\n\t    \t\t\tlabelAlign: 'right',\r\n\t    \t\t\twidth: 120,\r\n\t    \t\t\txtype: 'slider',\r\n\t            \tincrement: 1,\r\n\t            \tminValue: this.MIN_TERMS,\r\n\t            \tmaxValue: this.MAX_TERMS,\r\n\t            \tlisteners: {\r\n\t            \t\tafterrender: function(slider) {\r\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam('numInitialTerms')));\r\n\t            \t\t},\r\n\t            \t\tchangecomplete: function(slider, newvalue) {\r\n\t            \t\t\tthis.setApiParam(\"numInitialTerms\", newvalue);\r\n\t            \t\t\tthis.doLoad();\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n                },{\r\n\t                fieldLabel: this.localize('context'),\r\n\t    \t\t\tlabelWidth: 50,\r\n\t    \t\t\tlabelAlign: 'right',\r\n\t    \t\t\twidth: 120,\r\n\t    \t\t\txtype: 'slider',\r\n\t            \tincrement: 1,\r\n\t            \tminValue: 1,\r\n\t            \tmaxValue: 30,\r\n\t            \tlisteners: {\r\n\t            \t\tafterrender: function(slider) {\r\n\t            \t\t\tslider.setValue(this.getApiParam('context'));\r\n\t            \t\t},\r\n\t            \t\tchangecomplete: function(slider, newvalue) {\r\n\t            \t\t\tthis.setApiParams({context: newvalue});\r\n\t            \t\t\tthis.doLoad();\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n                },{\r\n\t                fieldLabel: this.localize('scaling'),\r\n\t    \t\t\tlabelWidth: 50,\r\n\t    \t\t\tlabelAlign: 'right',\r\n\t    \t\t\twidth: 120,\r\n\t    \t\t\txtype: 'slider',\r\n\t            \tincrement: 1,\r\n\t            \tminValue: this.MIN_SCALING,\r\n\t            \tmaxValue: this.MAX_SCALING,\r\n\t            \tlisteners: {\r\n\t            \t\tafterrender: function(slider) {\r\n\t            \t\t\tslider.setValue(this.getScalingFactor());\r\n\t            \t\t},\r\n\t            \t\tchangecomplete: function(slider, newvalue) {\r\n\t            \t\t\t// use the inverse of the value since it'll make more sense to the user\r\n\t            \t\t\tvar value = Math.abs(newvalue-(this.MAX_SCALING+1));\r\n\t            \t\t\tthis.setScalingFactor(value);\r\n\t            \t\t\tthis.reload();\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n                }\r\n                ]\r\n    \t\t}]\r\n    \t});\r\n    \t\r\n    \tthis.setContextMenu(Ext.create('Ext.menu.Menu', {\r\n\t\t\trenderTo: Ext.getBody(),\r\n\t\t\titems: [{\r\n\t\t\t\txtype: 'box',\r\n\t\t\t\titemId: 'label',\r\n\t\t\t\tmargin: '5px 0px 5px 5px',\r\n\t\t\t\thtml: ''\r\n\t\t\t},{\r\n\t\t        xtype: 'menuseparator'\r\n\t\t\t},{\r\n\t\t\t\txtype: 'button',\r\n\t\t\t\ttext: 'Remove',\r\n\t\t\t\tstyle: 'margin: 5px;',\r\n\t\t\t\thandler: function(b, e) {\r\n\t\t\t\t\tvar node = this.getCurrentNode();\r\n\t\t\t\t\tif (node !== undefined) {\r\n\t\t\t\t\t\tdelete this.getCurrentData()[node.data.term];\r\n\t\t\t\t\t\tthis.getBlacklist()[node.data.term] = true;\r\n\t\t\t\t\t\tthis.setCurrentNode(undefined);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.getContextMenu().hide();\r\n\t\t\t\t\tthis.reload();\r\n\t\t\t\t},\r\n\t\t\t\tscope: this\r\n\t\t\t}]\r\n\t\t}));\r\n    \t\r\n    \tthis.on('query', function(src, query) {\r\n    \t\tif (query.length > 0) {\r\n    \t\t\tthis.doLoad(query);\r\n    \t\t}\r\n\t\t}, this);\r\n    \t\r\n    \tthis.callParent(arguments);\r\n    },\r\n    \r\n    listeners: {\r\n    \tboxready: function() {\r\n\t\t\tthis.initVisLayout();\r\n    \t},\r\n    \t\r\n    \tresize: function(panel, width, height) {\r\n    \t\tif (this.getVisLayout() && this.getCorpus()) {\r\n    \t\t\tvar el = this.getLayout().getRenderTarget();\r\n    \t    \twidth = el.getWidth();\r\n    \t\t\theight = el.getHeight();\r\n    \t\t\t\r\n    \t\t\tel.down('svg').set({width: width, height: height});\r\n    \t\t\t\r\n    \t\t\tthis.getVisLayout().size([width, height]);\r\n    \t\t\t\r\n    \t\t\tthis.reload();\r\n    \t\t}\r\n    \t},\r\n    \t\r\n    \tloadedCorpus: function(src, corpus) {\r\n    \t\tif (this.isVisible()) {\r\n        \t\tthis.doLoad(this.getApiParam('query'));\r\n    \t\t}\r\n    \t},\r\n    \tactivate: function() {\r\n    \t\tif (this.getCorpus()) {\r\n    \t\t\tthis.doLoad(this.getApiParam('query'));\r\n    \t\t}\r\n    \t}\r\n    },\r\n    \r\n    doLoad: function(query) {\r\n\t\tthis.resetVis();\r\n\t\tif (query === undefined) {\r\n\t\t\tthis.resetMinMax();\r\n\t\t\tthis.setCurrentData({});\r\n\t\t}\r\n    \tif (this.getMode() === this.MODE_DISTINCT) {\r\n    \t\tthis.getDistinctTerms(query);\r\n    \t} else {\r\n    \t\tthis.getTopTerms(query);\r\n    \t}\r\n    },\r\n    \r\n    reload: function() {\r\n    \tvar data = this.processCollocates([]);\r\n\t\tif (data.length > 0) {\r\n\t\t\tthis.resetVis();\r\n\t\t\tthis.buildVisFromData(data);\r\n\t\t}\r\n    },\r\n    \r\n    resetMinMax: function() {\r\n    \tthis.setMinRawFreq(undefined);\r\n    \tthis.setMaxRawFreq(undefined);\r\n    \tthis.setMaxCollocateValue(undefined);\r\n    \tthis.setMinFillValue(undefined);\r\n    \tthis.setMaxFillValue(undefined);\r\n    },\r\n    \r\n    resetVis: function() {\r\n    \tvar vis = this.getVis();\r\n    \tif (vis) {\r\n        \tvis.selectAll('.node').remove();\r\n    \t}\r\n    },\r\n    \r\n    getTopTerms: function(query) {\r\n    \tvar limit = parseInt(this.getApiParam('numInitialTerms'));\r\n    \tvar stopList = this.getApiParam('stopList');\r\n\t\tvar categories = this.getApiParam('categories');\r\n    \tif (query !== undefined) {\r\n    \t\tlimit = undefined;\r\n    \t\tstopList = undefined;\r\n    \t}\r\n    \tthis.getCorpus().getCorpusTerms().load({\r\n    \t\tparams: {\r\n    \t\t\tquery: query,\r\n\t\t\t\tcategories: categories,\r\n \t\t\t\tlimit: limit,\r\n \t\t\t\tstopList: stopList\r\n \t\t\t},\r\n\t\t    callback: function(records, operation, success) {\r\n\t\t    \tif (success) {\r\n\t\t    \t\tthis.loadFromRecords(records);\r\n\t\t    \t}\r\n\t\t    },\r\n\t\t    scope: this\r\n    \t});\r\n    },\r\n    \r\n    getDistinctTerms: function(query) {\r\n    \tvar limit = parseInt(this.getApiParam('numInitialTerms'));\r\n    \tvar stopList = this.getApiParam('stopList');\r\n\t\tvar categories = this.getApiParam('categories');\r\n    \tif (query !== undefined) {\r\n    \t\tlimit = undefined;\r\n    \t\tstopList = undefined;\r\n    \t}\r\n    \tvar perDocLimit = Math.ceil(parseInt(this.getApiParam('numInitialTerms')) / this.getCorpus().getDocumentsCount()); // ceil ensures there's at least 1 per doc\r\n    \tthis.getCorpus().getDocumentTerms().load({\r\n\t\t\tparams: {\r\n\t\t\t\tquery: query,\r\n\t\t\t\tcategories: categories,\r\n\t\t\t\tlimit: limit,\r\n\t\t\t\tperDocLimit: perDocLimit,\r\n\t\t\t\tstopList: stopList,\r\n\t\t\t\tsort: 'TFIDF',\r\n\t\t\t\tdir: 'DESC'\r\n\t\t\t},\r\n\t\t\tcallback: function(records, operation, success) {\r\n\t\t\t\tif (success) {\r\n\t\t\t\t\tthis.loadFromRecords(records);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tscope: this\r\n    \t});\r\n    },\r\n    \r\n    loadFromQuery: function(query) {\r\n    \tthis.getCorpus().getCorpusTerms().load({\r\n    \t\tparams: {\r\n \t\t\t\tquery: query\r\n \t\t\t},\r\n\t\t    callback: function(records, operation, success) {\r\n\t\t    \tif (success) {\r\n\t\t    \t\tthis.loadFromRecords(records);\r\n\t\t    \t}\r\n\t\t    },\r\n\t\t    scope: this\r\n    \t});\r\n    },\r\n    \r\n    loadFromRecords: function(records) {\r\n    \tif (Ext.isArray(records) && records.length>0) {\r\n    \t\tvar maxFreq = this.getMaxRawFreq();\r\n    \t\tvar minFreq = this.getMinRawFreq();\r\n    \t\tvar minFillVal = this.getMinFillValue();\r\n    \t\tvar maxFillVal = this.getMaxFillValue();\r\n    \t\tvar terms = [];\r\n    \t\trecords.forEach(function(r) {\r\n    \t\t\tvar term = r.getTerm();\r\n    \t\t\tif (!this.getBlacklist()[term]) {\r\n\t    \t\t\tvar rawFreq = r.getRawFreq();\r\n\t    \t\t\tvar fillVal = this.getMode() === this.MODE_DISTINCT ? r.get('tfidf') : r.getInDocumentsCount();\r\n\t    \t\t\t\r\n\t    \t\t\tif (maxFreq === undefined || rawFreq > maxFreq) maxFreq = rawFreq;\r\n\t    \t\t\tif (minFreq === undefined || rawFreq < minFreq) minFreq = rawFreq;\r\n\t    \t\t\t\r\n\t    \t\t\tif (maxFillVal === undefined || fillVal > maxFillVal) maxFillVal = fillVal;\r\n\t    \t\t\tif (minFillVal === undefined || fillVal < minFillVal) minFillVal = fillVal;\r\n\t    \t\t\t\r\n\t    \t\t\tthis.getCurrentData()[term] = {\r\n\t    \t\t\t\tterm: term,\r\n\t    \t\t\t\trawFreq: rawFreq,\r\n\t    \t\t\t\trelativeFreq: r.get('relativeFreq'),//r.getRelativeFreq(),\r\n\t    \t\t\t\tfillValue: fillVal,\r\n\t    \t\t\t\tcollocates: []\r\n\t    \t\t\t};\r\n\t    \t\t\t\r\n\t    \t\t\tterms.push(term);\r\n    \t\t\t}\r\n    \t\t}, this);\r\n    \t\t\r\n    \t\tthis.setMaxRawFreq(maxFreq);\r\n    \t\tthis.setMinRawFreq(minFreq);\r\n    \t\tthis.setMinFillValue(minFillVal);\r\n    \t\tthis.setMaxFillValue(maxFillVal);\r\n    \t\t\r\n    \t\tthis.getCollocatesForQuery(terms);\r\n    \t}\r\n    },\r\n    \r\n    getCollocatesForQuery: function(query) {\r\n    \tvar whitelist = [];\r\n    \tfor (var term in this.getCurrentData()) {\r\n    \t\twhitelist.push(term);\r\n    \t}\r\n    \t \r\n    \tthis.setApiParams({\r\n    \t\tmode: 'corpus'\r\n    \t});\r\n    \tvar params = this.getApiParams();\r\n    \tthis.getCorpus().getCorpusCollocates().load({\r\n    \t\tparams: Ext.apply(Ext.clone(params), {query: query, collocatesWhitelist: whitelist, limit: this.COLLOCATES_LIMIT}),\r\n    \t\tcallback: function(records, op, success) {\r\n    \t\t\tif (success) {\r\n    \t\t\t\tthis.buildVisFromData(this.processCollocates(records));\r\n    \t\t\t}\r\n    \t\t},\r\n    \t\tscope: this\r\n    \t});\r\n    },\r\n    \r\n    processCollocates: function(records) {\r\n    \tvar currentTerms = this.getCurrentData();\r\n\r\n    \tvar maxCol = this.getMaxCollocateValue();\r\n    \t\r\n    \tfor (var i=0; i<records.length; i++) {\r\n    \t\tvar r = records[i];\r\n    \t\tvar term = r.getTerm();\r\n\t\t\tvar contextTerm = r.getContextTerm();\r\n\t\t\tvar contextFreq = r.getContextTermRawFreq();\r\n\t\t\t\r\n\t\t\tif (maxCol === undefined || contextFreq > maxCol) {\r\n\t\t\t\tmaxCol = contextFreq;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (currentTerms[term] === undefined) {\r\n\t\t\t\t// should not be here\r\n\t\t\t} else {\r\n\t    \t\tif (term != contextTerm) {\r\n\t    \t\t\tcurrentTerms[term].collocates.push({\r\n\t    \t\t\t\tterm: contextTerm, value: contextFreq\r\n\t    \t\t\t});\r\n\t    \t\t}\r\n\t\t\t}\r\n    \t}\r\n    \t\r\n    \tthis.setMaxCollocateValue(maxCol);\r\n    \t\r\n    \tvar data = [];\r\n    \tfor (var term in currentTerms) {\r\n//    \t\tif (currentTerms[term].collocates.length > 0) {\r\n    \t\t\tdata.push(currentTerms[term]);\r\n//    \t\t}\r\n    \t}\r\n    \treturn data;\r\n    },\r\n    \r\n    buildVisFromData: function(data) {\r\n    \tvar me = this;\r\n    \t\r\n    \tif (!this.getVis()) {return;} // not initialized\r\n    \t\r\n    \tvar rootId = '$$$root$$$';\r\n    \tdata.push({term: rootId, collocates:[], rawFreq:1});\r\n    \tvar root = d3.stratify()\r\n    \t\t.id(function(d) { return d.term; })\r\n    \t\t.parentId(function(d) {\r\n    \t\t\tif (d.term !== rootId) return rootId;\r\n\t\t\t\telse return '';\r\n\t\t\t})(data)\r\n\t\t\t.sort(function(a, b) { return a.rawFreq < b.rawFreq ? 1 : a.rawFreq > b.rawFreq ? -1 : 0; })\r\n\t\t\t.sum(function(d) { return Math.pow(d.rawFreq, 1/me.getScalingFactor()); });\r\n    \tthis.getVisLayout()(root);\r\n    \t\r\n    \t// join nodes with data\r\n    \tvar nodes = this.getVis().selectAll('.node').data(root.descendants());\r\n    \t\r\n    \t// update\r\n    \tnodes.attr('transform', function(d) { return 'translate(' + d.x + ',' + d.y + ')'; });\r\n    \tnodes.selectAll('circle').attr('r', function(d) { return d.r; });\r\n    \t\r\n    \tvar idGet = function(term) {\r\n    \t\treturn term.replace(/\\W/g, '_'); // remove non-word characters to create valid DOM ids\r\n    \t};\r\n    \t\r\n    \tvar collocateFill = d3.scalePow().exponent(1/3)\r\n\t\t\t.domain([0,this.getMaxCollocateValue()]).range(['#fff', '#bd3163']);\r\n    \t\r\n    \tvar defaultFill;\r\n    \tif (this.getMode() === this.MODE_DISTINCT) {\r\n    \t\tdefaultFill = d3.scalePow().exponent(1/5)\r\n    \t\t\t.domain([this.getMinFillValue(), this.getMaxFillValue()]).range(['#dedede', '#fff']);\r\n    \t} else {\r\n    \t\tdefaultFill = d3.scaleLinear()\r\n\t\t\t\t.domain([this.getMaxFillValue(), this.getMinFillValue()]).range(['#dedede', '#fff']);\r\n    \t}\r\n    \t\r\n    \t// roughly calculate font size based on available area and number of terms\r\n    \tvar size = this.getVisLayout().size();\r\n    \tvar layoutRadius = Math.min(size[0], size[1]) / 2;\r\n    \tvar layoutArea = Math.PI*(layoutRadius*layoutRadius);\r\n    \tvar totalTerms = data.length;\r\n    \tvar termArea = layoutArea / totalTerms;\r\n    \tvar termRadius = Math.sqrt(termArea / Math.PI);\r\n    \tvar minFontSize = termRadius / 3;\r\n    \tvar scalingInverse = Math.abs(this.getScalingFactor()-(this.MAX_SCALING+1));\r\n    \tscalingInverse = Math.max(1, scalingInverse-1); // substract one to avoid too large fonts\r\n    \tvar maxFontSize = minFontSize * scalingInverse;\r\n\r\n    \tvar textSizer = d3.scaleLinear()//pow().exponent(1/2)\r\n    \t\t.domain([this.getMinRawFreq(),this.getMaxRawFreq()]).range([minFontSize, maxFontSize]);\r\n    \t\r\n    \t// enter\r\n    \tvar node = nodes.enter().append('g')\r\n    \t\t.attr('class', 'node')\r\n    \t\t.style('visibility', function(d) { return d.depth > 0 ? 'visible' : 'hidden'; }) // hide root\r\n    \t\t.attr('transform', function(d) { return 'translate(' + d.x + ',' + d.y + ')'; })\r\n    \t\t.on('click', function(event, d) {\r\n    \t\t\tme.dispatchEvent('termsClicked', me, [d.data.term]);\r\n    \t\t})\r\n    \t\t.on('mouseover', function(event, d) {\r\n    \t\t\tme.setCurrentNode(d);\r\n    \t\t\t\r\n    \t\t\tme.getVis().selectAll('circle')\r\n    \t\t\t\t.style('stroke-width', 1)\r\n    \t\t\t\t.style('stroke', '#111')\r\n        \t\t\t.style('fill', function(d) { return defaultFill(d.data.fillValue); });\r\n    \t\t\t\r\n    \t\t\td3.select(this).select('circle')\r\n    \t\t\t\t.style('fill', '#89e1c2')\r\n    \t\t\t\t.style('stroke', '#26926c')\r\n    \t\t\t\t.style('stroke-opacity', me.MAX_STROKE_OPACITY);\r\n    \t\t\t\r\n    \t\t\tvar fillLabel;\r\n    \t\t\tif (me.getMode() === me.MODE_DISTINCT) {\r\n    \t\t\t\tfillLabel = me.localize('tfidf');\r\n    \t\t\t} else {\r\n    \t\t\t\tfillLabel = me.localize('inDocs');\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tif (!me.getContextMenu().isVisible()) {\r\n\t    \t\t\tvar info = '<b>'+d.data.term+'</b> ('+d.data.rawFreq+')<br/>'+fillLabel+': '+d.data.fillValue;\r\n\t\t\t\t\tvar tip = me.getTip();\r\n\t\t\t\t\ttip.update(info);\r\n\t\t\t\t\ttip.show();\r\n    \t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < d.data.collocates.length; i++) {\r\n\t\t\t\t\tvar collocate = d.data.collocates[i];\r\n\t\t\t\t\tvar match = me.getVis().selectAll('.node').filter(function(d) { return d.data.term === collocate.term; });\r\n\t\t\t\t\tmatch.select('circle')\r\n\t\t\t\t\t\t.style('fill', function(d) { return collocateFill(collocate.value); })\r\n\t\t\t\t\t\t.style('stroke', '#bd3163')\r\n\t\t\t\t\t\t.style('stroke-opacity', me.MAX_STROKE_OPACITY);\r\n\t\t\t\t\tmatch.select('tspan.value').text(function(d) { return collocate.value; });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.on('mousemove', function(event) {\r\n\t\t\t\tme.getTip().setPosition(event.pageX+5, event.pageY-50);\r\n\t\t\t})\r\n\t\t\t.on('mouseout', function(event) {\r\n\t\t\t\tif (!me.getContextMenu().isVisible()) {\r\n\t\t\t\t\tme.setCurrentNode(undefined);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tme.getVis().selectAll('circle').style('stroke-opacity', me.MIN_STROKE_OPACITY).style('stroke', '#111')\r\n\t    \t\t\t.style('fill', function(d) { return defaultFill(d.data.fillValue); });\r\n\t\t\t\tme.getVis().selectAll('tspan.value').text('');\r\n\t\t\t\tme.getTip().hide();\r\n//\t\t\t\tme.getVisInfo().text('');\r\n\t\t\t})\r\n\t\t\t.on('contextmenu', function(event, d) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tme.getTip().hide();\r\n\t\t\t\tvar menu = me.getContextMenu();\r\n\t\t\t\tmenu.queryById('label').setHtml(d.data.term);\r\n\t\t\t\tmenu.showAt(event.pageX+5, event.pageY-50);\r\n\t\t\t});\r\n    \t\r\n    \tnode.append('circle')\r\n    \t\t.attr('id', function(d) {\r\n    \t\t\treturn idGet(d.data.term);\r\n\t\t\t})\r\n\t\t\t.attr('r', function(d) { return d.r; })\r\n\t\t\t.style('fill', function(d) { return defaultFill(d.data.fillValue); })\r\n\t\t\t.style('stroke', '#111')\r\n\t\t\t.style('stroke-opacity', me.MIN_STROKE_OPACITY)\r\n\t\t\t.style('stroke-width', 1);\r\n    \t\r\n    \tnode.append('clipPath').attr('id', function(d) { return 'clip-' + idGet(d.data.term); })\r\n    \t\t.append('use').attr('xlink:href', function(d) { return '#' + idGet(d.data.term); });\r\n\t\t\r\n    \tvar text = node.append('text')\r\n    \t\t.attr('clip-path', function(d) { return 'url(#clip-' + idGet(d.data.term) + ')'; })\r\n    \t\t.style('font-family', function(d) { return me.getApplication().getCategoriesManager().getFeatureForTerm('font', d.data.term); })\r\n\t\t\t.style('text-anchor', 'middle')\r\n\t\t\t.style('cursor', 'default');\r\n\t\ttext.append('tspan')\r\n\t\t\t.attr('class', 'term')\r\n\t\t\t.attr('font-size', function(d) { return textSizer(d.data.rawFreq); })\r\n\t\t\t.attr('x', 0)\r\n\t\t\t.attr('y', function(d) { return textSizer(d.data.rawFreq)/4; })\r\n\t\t\t.text(function(d) { return d.data.term; });\r\n\t\ttext.append('tspan')\r\n\t\t\t.attr('class', 'value')\r\n\t\t\t.attr('font-size', function(d) { return textSizer(d.data.rawFreq)*0.75; })\r\n\t\t\t.attr('x', 0)\r\n\t\t\t.attr('y', function(d) { return textSizer(d.data.rawFreq)+1; });\r\n\t\t\r\n\t\t// exit\r\n    \tnodes.exit().remove();\r\n\t\t\r\n    },\r\n    \r\n    initVisLayout: function() {\r\n    \tvar el = this.getLayout().getRenderTarget();\r\n\t\tel.update(''); // make sure to clear existing contents (especially for re-layout)\r\n    \tvar width = el.getWidth();\r\n\t\tvar height = el.getHeight();\r\n\r\n\t\tvar me = this;\r\n\t\tthis.setVisLayout(\r\n\t\t\td3.pack().size([width, height]).padding(1.5)\r\n\t\t);\r\n\t\t\r\n\t\tvar svg = d3.select(el.dom).append('svg').attr('id',this.getVisId()).attr('width', width).attr('height', height);\r\n\t\tthis.setVis(svg.append('g'));\r\n\t\t\r\n\t\tthis.setVisInfo(svg.append('text').attr('x', 10).attr('y', 10));\r\n\t\t\r\n\t\tif (this.getTip() === undefined) {\r\n\t\t\tthis.setTip(Ext.create('Ext.tip.Tip', {}));\r\n\t\t}\r\n    }\r\n});","/**\n * TermsRadio is a visualization that depicts the change of the frequency of words in a corpus (or within a single document).\n *\n * @example\n *\n * let config = {\n * \t\"bins\": 5,\n * \t\"limit\": null,\n * \t\"query\": null,\n * \t\"slider\": null,\n * \t\"speed\": null,\n * \t\"stopList\": null,\n * \t\"visibleBins\": null,\n * \t\"yAxisScale\": null\n * };\n *\n * loadCorpus(\"austen\").tool(\"termsradio\", config);\n *\n *\n * @class TermsRadio\n * @tutorial termsradio\n * @memberof Tools\n * @author Mark Turcato\n * @author Andrew MacDonald\n */\nExt.define('Voyant.panel.TermsRadio', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.termsradio',\n\tconfig: {\n\t\t/**\n\t\t * @private\n\t\t */\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tspeed: 50,\n\t\t/**\n\t\t * @private\n\t\t */\n\t\ttermsRadio: undefined\n\t},\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t/**\n\t\t\t * @memberof Tools.TermsRadio\n\t\t\t * @instance\n\t\t\t * @property {bins}\n\t\t\t * @default\n    \t\t */\n    \t\tbins: 5,\n    \t\n    \t\t/**\n\t\t\t * @memberof Tools.TermsRadio\n\t\t\t * @instance\n\t\t\t * @property {Number} visibleBins How many segments or documents to show at once (default is 5).\n    \t\t * Note that this often works in parallel with the {@link #bins} value.\n\t\t\t * @default\n    \t\t */\n    \t\tvisibleBins: 5,\n    \t\t\n    \t\t/**\n\t\t\t * @memberof Tools.TermsRadio\n    \t\t * @instance\n    \t\t * @property {String[]} docIdType The document type(s) to restrict results to.\n    \t\t * @default null\n    \t\t * @private\n    \t\t */\n    \t\tdocIdType: null,\n    \t\t\n    \t\t/**\n    \t\t * @memberof Tools.TermsRadio\n\t\t\t * @instance\n\t\t\t * @property {limit}\n\t\t\t * @default\n    \t\t */\n    \t\tlimit: 50,\n    \t\n    \t\t/**\n        \t * @instance\n        \t * @property mode What mode to operate at, either document or corpus.\n        \t * @choices document, corpus\n    \t\t * @private\n        \t */\n    \t\tmode: null,\n    \t\t\n    \t\t/**\n\t\t\t * @memberof Tools.TermsRadio\n        \t * @instance\n        \t * @property {Number} position The current shifted position of the visualization.\n        \t * @default 0\n    \t\t * @private\n        \t */\n    \t\tposition: 0,\n    \t\t\n    \t\t/**\n\t\t\t * @memberof Tools.TermsRadio\n    \t\t * @instance\n    \t\t * @property {String[]} selectedWords The words that have been selected.\n    \t\t * @default null\n    \t\t * @private\n    \t\t */\n    \t\tselectedWords: [],\n    \t\t\n\t\t\t/**\n\t\t\t * @memberof Tools.TermsRadio\n\t\t\t * @instance\n\t\t\t * @property {stopList}\n\t\t\t * @default\n\t\t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\t/**\n    \t\t * @memberof Tools.TermsRadio\n\t\t\t * @instance\n\t\t\t * @property {query}\n    \t\t */\n    \t\tquery: null,\n    \t\t\n    \t\t/**\n\t\t\t * @memberof Tools.TermsRadio\n    \t\t * @instance\n    \t\t * @property {String} yAxisScale The scale for the y axis. Options are: 'log' or 'linear'.\n    \t\t * @default log\n    \t\t */\n    \t\tyAxisScale: 'log',\n    \t\t\t\n\t\t\t/**\n\t\t\t * @memberof Tools.TermsRadio\n\t\t\t * @instance\n\t\t\t * @property {Number} speed How fast to animate the visualization.\n\t\t\t * @default\n\t\t\t */\n    \t\tspeed: 50,\n    \t\t\n    \t\t/**\n\t\t\t * @memberof Tools.TermsRadio\n    \t\t * @instance\n    \t\t * @property {Boolean} slider Whether to show the slider.\n    \t\t * @default true\n    \t\t */\n    \t\tslider: undefined\n    \t},\n    \tglyph: 'xf201@FontAwesome'\n    }\n\t\n\t/**\n\t * @private\n\t */\n\t,constructor: function(config) {\n\t\t\n\t\tvar onLoadHandler = function(mode, store, records, success, operation) {\n\t\t\tthis.setApiParams({mode: mode});\n\n\t\t\tthis.getTermsRadio().loadRecords(records);\n\t\t\t\n\t\t\tvar query = this.getApiParam('query');\n\t\t\t// check for no results\n\t\t\tif (query) {\n\t\t\t\tif (records.length==0 || (records.length==1 && records[0].getRawFreq()==0)) {\n\t\t\t\t\tthis.toastInfo({\n\t\t\t\t\t\thtml: this.localize(\"termNotFound\"),\n\t\t\t\t\t\talign: 'bl'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.getTermsRadio().highlightQuery(query, true);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.corpusStore = Ext.create(\"Voyant.data.store.CorpusTerms\", {\n\t\t\tlisteners : {\n\t\t\t\tload: {\n\t\t\t\t\tfn : onLoadHandler.bind(this, 'corpus'),\n\t\t\t\t\tscope : this\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.documentStore = Ext.create(\"Voyant.data.store.DocumentTerms\", {\n\t\t\tlisteners : {\n\t\t\t\tload: {\n\t\t\t\t\tfn : onLoadHandler.bind(this, 'document'),\n\t\t\t\t\tscope : this\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tExt.apply(config, {\n\t\t\ttitle: this.localize('title'),\n\t\t\tlegendMenu: Ext.create('Ext.menu.Menu', {\n\t\t\t\titems: [\n        \t\t\t{text: '', itemId: 'remove', glyph: 'xf068@FontAwesome'}\n        \t\t]\n        \t}),\n\t\t\ttbar: new Ext.Toolbar({\n                overflowHandler: 'scroller',\n\t\t\t\titems: {\n\t\t\t\t\txtype: 'legend',\n\t\t\t\t\tstore: new Ext.data.JsonStore({\n\t\t\t\t\t\tfields : ['name', 'mark', 'selector']\n\t\t\t\t\t}),\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\titemclick: function(view, record, el, index) {\n\t\t\t\t\t\t\tvar term = record.get('name');\n\t\t\t\t\t\t\tif (this.getTermsRadio().isTermSelected(term)) {\n\t\t\t\t\t\t\t\tthis.getTermsRadio().doTermDeselect(term);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.getTermsRadio().doTermSelect(term);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\titemcontextmenu: function(view, record, el, index, event) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t            \tvar xy = event.getXY();\n\t\t\t            \t\n\t\t\t            \tvar term = record.get('name');\n\t\t\t            \tvar text = (new Ext.Template(this.localize('removeTerm'))).apply([term]);\n\t\t            \t\tthis.legendMenu.queryById('remove').setText(text);\n\t\t            \t\t\n\t\t            \t\tthis.legendMenu.on('click', function(menu, item) {\n\t\t            \t\t\tif (item !== undefined) {\n\t\t            \t\t\t\tthis.getTermsRadio().doTermDeselect(term, true);\n\t\t            \t\t\t}\n\t\t            \t\t}, this, {single: true});\n\t\t            \t\tthis.legendMenu.showAt(xy);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t\tbbar: {\n                overflowHandler: 'scroller',\n\t            items: [{\n\t            \txtype: 'querysearchfield'\n\t            },{\n\t    \t\t\tglyph: 'xf04b@FontAwesome', // start with play button, which means we're paused\n\t    \t\t\titemId: 'play',\n\t    \t\t\thandler: function(btn) {\n\t    \t\t\t\tvar playing = btn.glyph==\"xf04c@FontAwesome\";\n\t    \t\t\t\tif (playing) {\n\t    \t\t\t\t\tthis.getTermsRadio().continueTransition = false;\n\t    \t\t\t\t\tthis.mask(this.localize(\"completingTransition\"))\n\t    \t\t\t\t\tbtn.setPlaying(false)\n\t    \t\t\t\t}\n\t    \t\t\t\telse {\n\t    \t\t\t\t\tthis.getTermsRadio().toggleRightCheck();\n\t    \t\t\t\t\tbtn.setPlaying(true);\n\t    \t\t\t\t}\n\t    \t\t\t},\n\t    \t\t\tscope: this,\n\t    \t\t\tsetPlaying: function(bool) {\n\t    \t\t\t\tthis.setGlyph(bool ? \"xf04c@FontAwesome\" : \"xf04b@FontAwesome\")\n\t    \t\t\t}\n\t    \t\t},{\n\t    \t\t\tglyph: 'xf0e2@FontAwesome',\n//\t    \t\t\ttext: this.localize('reset')\n\t    \t\t\ttooltip : this.localize('resetTip'),\n\t    \t\t\tlisteners : {\n\t    \t\t\t\tclick : {fn : function() {\n\t    \t\t\t\t\tthis.queryById(\"play\").setPlaying(false);\n\t\t\t\t\t\t\tthis.getTermsRadio().shiftCount = 0;\n\t\t\t\t\t\t\tthis.getTermsRadio().prepareData();\n\t\t\t\t\t\t\tthis.getTermsRadio().redraw();\n    \t\t\t\t\t}\t\t\t\t\n\t    \t\t\t\t\t,scope : this\n\t    \t\t\t\t}\n\t    \t\t\t}\n\t    \t\t},{\n\t    \t\t\txtype: 'label',\n\t    \t\t\tforId: 'terms',\n\t    \t\t\ttext: this.localize('terms')\n\t    \t\t},{\n\t    \t\t\txtype: 'slider',\n\t    \t\t\titemId: 'terms',\n\t    \t\t\thideLabel: true,\n\t    \t\t\twidth : 60,\n\t    \t\t\tincrement : 5,\n\t    \t\t\tminValue : 5,\n\t    \t\t\tmaxValue : 100,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"limit\")))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({limit: newvalue});\n\t            \t\t\tthis.loadStore();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n\t    \t\t},{\n\t    \t\t\txtype: 'label',\n\t    \t\t\tforId: 'speed',\n\t    \t\t\ttext: this.localize('speed')\n\t    \t\t},{\n\t    \t\t\txtype: 'slider',\n\t    \t\t\titemId: 'speed',\n\t    \t\t\thideLabel: true,\n\t    \t\t\twidth : 60,\n\t    \t\t\tincrement : 5,\n\t    \t\t\tminValue : 5,\n\t    \t\t\tmaxValue : 100,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"speed\")))\n\t            \t\t\tthis.setSpeed(slider.getValue())\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({speed: newvalue});\n\t            \t\t\tthis.setSpeed(newvalue)\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n\t    \t\t},{\n\t    \t\t\txtype: 'label',\n\t    \t\t\titemId: 'visibleSegmentsLabel',\n\t    \t\t\tforId: 'visibleBins',\n\t    \t\t\ttext: this.localize('visibleSegments')\n\t    \t\t},{\n\t    \t\t\txtype: 'slider',\n\t    \t\t\titemId: 'visibleBins',\n\t    \t\t\thideLabel: true,\n\t    \t\t\twidth : 60,\n\t    \t\t\tincrement : 1,\n\t    \t\t\tminValue : 1,\n\t    \t\t\tmaxValue : 100,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"visibleBins\")))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({visibleBins: newvalue});\n\t\t\t\t\t\t\tthis.numVisPoints = newvalue;\n\t\t\t\t\t\t\tthis.loadStore();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (this.numVisPoints == this.getCorpus().getDocumentsCount()) {\n\t\t\t\t\t\t\t\tthis.getTermsRadio().hideSlider();\n\t\t\t\t\t\t\t} else if (this.getApiParam(\"slider\") != 'false'){\n\t\t\t\t\t\t\t\tthis.getTermsRadio().showSlider();\n\t\t\t\t\t\t\t}\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n\t    \t\t},{\n\t    \t\t\txtype: 'label',\n\t    \t\t\titemId: 'segmentsLabel',\n\t    \t\t\tforId: 'segments',\n\t    \t\t\ttext: this.localize('segments')\n\t    \t\t},{\n\t    \t\t\txtype: 'slider',\n\t    \t\t\titemId: 'segments',\n\t    \t\t\thideLabel: true,\n\t    \t\t\twidth : 60,\n\t    \t\t\tincrement : 1,\n\t    \t\t\tminValue : 1,\n\t    \t\t\tmaxValue : 100,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"bins\")))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({bins: newvalue});\n\t\t\t\t\t\t\tthis.numDataPoints = newvalue;\n\t\t\t\t\t\t\tthis.loadStore();\n\t\t\t\t\t\t\tvar visibleBins = this.queryById('visibleBins');\n\t\t\t\t\t\t\tvisibleBins.setMaxValue(newvalue) // only relevant for doc mode\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n\t    \t\t}]\n\t\t\t}\n\t\t});\n\t\t\n\t\t// need to add option here so we have access to localize\n\t\tthis.config.options.push({\n\t\t\txtype: 'combo',\n\t\t\tqueryMode : 'local',\n\t\t\ttriggerAction : 'all',\n\t\t\tforceSelection : true,\n\t\t\teditable : false,\n\t\t\tfieldLabel : this.localize('yScale'),\n\t\t\tlabelAlign : 'right',\n\t\t\tname : 'yAxisScale',\n\t\t\tvalueField : 'value',\n\t\t\tdisplayField : 'name',\n\t\t\tstore: new Ext.data.JsonStore({\n\t\t\t\tfields : ['name', 'value'],\n\t\t\t\tdata   : [{\n\t\t\t\t\tname : this.localize('linear'),   value: 'linear'\n\t\t\t\t},{\n\t\t\t\t\tname : this.localize('log'),  value: 'log'\n\t\t\t\t}]\n\t\t\t}),\n\t\t\tlisteners: {\n\t\t\t\tafterrender: function(combo) {\n\t\t\t\t\tcombo.setValue(this.getApiParam('yAxisScale'));\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.callParent(arguments);\n\t\tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t\t\n\t\tthis.on('boxready', function(component) {\n\t\t\tvar sliderParam = this.getApiParam('slider');\n\t\t\tvar showSlider = sliderParam === undefined ? true : sliderParam === 'true';\n\t\t\tvar config = {\n\t\t\t\tparent: this,\n\t\t\t\tcontainer: this.body,\n\t\t\t\tshowSlider: showSlider\n\t\t\t};\n\t\t\tthis.setTermsRadio(new TermsRadio(config));\n\t\t}, this);\n\t\t\n\t\t/**\n\t\t * @suppress {misplacedTypeAnnotation}\n\t\t * @event corpusTypesSelected\n\t\t * @type listener\n\t\t * @private\n\t\t */\n\t\tthis.addListener('corpusTermsClicked', function(src, terms){\n\t\t\tif (this.getCorpus().getDocumentsCount() > 1) {\n        \t\tterms.forEach(function(term) {\n        \t\t\tvar t = term.getTerm();\n        \t\t\tthis.setApiParams({query: t});\n        \t\t\tthis.loadStore();\n        \t\t}, this);\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.addListener('documentTermsClicked', function(src, terms){\n\t\t\tif(src && src.xtype==this.xtype) {return false;}\n\t\t\t\n\t\t\tterms.forEach(function(term) {\n    \t\t\tvar t = term.getTerm();\n    \t\t\tthis.setApiParams({query: t});\n    \t\t\tthis.loadStore();\n    \t\t}, this);\n\t\t});\n\t\t\n\t\tthis.on('query', function(src, query){\n\t\t\tthis.fireEvent(\"termsClicked\", src, query);\n\t    });\n\t\t\n\t\tthis.on(\"termsClicked\", function(src, terms) {\n\t\t\t// TODO load term distribution data\n\t\t\tterms.forEach(function(term) {\n\t\t\t\tvar queryTerm;\n    \t\t\tif (Ext.isString(term)) {queryTerm = term;}\n    \t\t\telse if (term.term) {queryTerm = term.term;}\n    \t\t\telse if (term.getTerm) {queryTerm = term.getTerm();}\n    \t\t\t\n    \t\t\t// TODO handling for multiple terms\n    \t\t\tthis.setApiParams({query: queryTerm});\n    \t\t\tthis.loadStore();\n    \t\t}, this);\n    \t});\n\t\t\n\t\tthis.on(\"loadedCorpus\", function(src, corpus) {\n    \t\tthis.documentStore.setCorpus(corpus);\n    \t\tthis.corpusStore.setCorpus(corpus);\n    \t\t\n    \t\tvar params = this.getApiParams();\n\t\t\tparams.withDistributions = true;\n\t\t\tif (params.type) {\n\t\t\t\tdelete params.limit;\n\t\t\t}\n\t\t\tvar store;\n\t\t\t\n\t\t\tvar docsCount = this.getCorpus().getDocumentsCount();\n\t\t\tvar segments = this.queryById(\"segments\");\n\t\t\tvar visibleBins = this.queryById(\"visibleBins\");\n\t\t\tif (params.mode=='document' || docsCount == 1) {\n\t\t\t\tthis.setApiParam(\"mode\", \"document\");\n\t\t\t\tstore = this.documentStore;\n\t\t\t\tvisibleBins.setMaxValue(segments.getValue())\n\t\t\t} else {\n\t\t\t\tthis.setApiParam(\"mode\", \"corpus\");\n\t\t\t\tdelete params.bins;\n\t\t\t\tstore = this.corpusStore;\n\t\t\t\tsegments.hide();\n\t\t\t\tthis.queryById(\"segmentsLabel\").hide();\n\t\t\t\tvar visibleBins = this.queryById(\"visibleBins\");\n\t\t\t\tvisibleBins.setMaxValue(docsCount);\n\t\t\t\tif (parseInt(this.getApiParam(\"visibleBins\")>docsCount)) {\n\t\t\t\t\tvisibleBins.setValue(docsCount);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// select top 3 words\n\t\t\tstore.on('load', function(store, records) {\n\t\t\t\tfor (var i = 0; i < 3; i++) {\n\t\t\t\t\tvar r = records[i];\n\t\t\t\t\tif (r) {\n\t\t\t\t\t\tthis.getTermsRadio().highlightRecord(r, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this, {single: true});\n\t\t\tstore.load({params: params});\n    \t}, this);\t\t\n\t}\n\t\n    ,loadStore: function () {\n    \tthis.queryById('play').setPlaying(false);\n\t\tvar params = this.getApiParams();\n\t\tparams.withDistributions = true;\n\t\tif(this.getApiParam('mode') === 'document') { \n\t\t\tthis.documentStore.load({params: params});\n\t\t}\n\t\tif(this.getApiParam('mode') === 'corpus') {\n\t\t\tdelete params.bins;\n\t\t\tthis.corpusStore.load({params: params});\n\t\t}\n\t}\n    \n});\n","/**\n * Trends shows a line graph depicting the distribution of a word's occurrence across a corpus or document.\n *\n * @example\n *\n * let config = {\n * \t\"chartType\": null,\n * \t\"docId\": null,\n * \t\"docIndex\": null,\n * \t\"labels\": null,\n * \t\"limit\": null,\n * \t\"mode\": null,\n * \t\"query\": null,\n * \t\"stopList\": null,\n * \t\"withDistributions\": null\n * };\n *\n * loadCorpus(\"austen\").tool(\"Trends\", config);\n *\n * @class Trends\n * @tutorial trends\n * @memberof Tools\n */\nExt.define('Voyant.panel.Trends', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\trequires: ['Voyant.data.store.Documents'],\n\talias: 'widget.trends',\n\tconfig: {\n\t    /**\n\t     * @private\n\t     */\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'},\n\n    \t\t{\n    \t\t\tname: 'bins',\n\t\t    \txtype: 'slider',\n\t\t    \tlabelAlign: 'right',\n\t\t    \twidth: 200,\n\t\t    \tminValue: 2,\n\t\t    \tmaxValue: 100,\n\t        \tlisteners: {\n\t        \t\tafterrender: function(slider) {\n\t        \t\t\tvar trends = slider.up(\"window\").panel;\n\t        \t\t\tslider.setFieldLabel(trends.localize(\"segmentsSlider\"));\n\t        \t\t}\n\t        \t}    \t\t\n    \t\t},{\n                xtype: 'radiogroup',\n\t\t    \tlabelAlign: 'right',\n                columns: 3,\n                vertical: true,\n                name: 'withDistributions',\n                items: [{\n                    boxLabel: 'raw',\n                    name: 'withDistributions',\n                    inputValue: 'raw'\n                },{\n                    boxLabel: 'relative',\n                    name: 'withDistributions',\n                    inputValue: 'relative',\n                    style: 'margin-left: 1em;'\n                }],\n\t        \tlisteners: {\n\t        \t\tafterrender: function(radiogroup) {\n\t        \t\t\tvar panel = this.up(\"window\").panel;\n\t        \t\t\tthis.setFieldLabel(panel.localize(\"freqsMode\"));\n\t        \t\t\tvar val = panel.getApiParam(\"withDistributions\");\n\t        \t\t\tradiogroup.getBoxes().forEach(function(item) {\n\t        \t\t\t\titem.setBoxLabel(panel.localize(item.inputValue));\n\t        \t\t\t\titem.checked = item.inputValue==val;\n\t        \t\t\t});\n\t        \t\t\tthis.setValue({withDistributions: val});\n\t        \t\t}\n\t        \t}\n    \t\t},{xtype: 'colorpaletteoption'}]\n\t},\n    statics: {\n    \ti18n: {},\n    \tapi: {\n    \t\t\n    \t\t/**\n    \t\t * @memberof Tools.Trends\n\t\t\t * @instance\n\t\t\t * @property {limit}\n\t\t\t * @default\n    \t\t */\n    \t\tlimit: 5,\n    \t\t\n    \t\t/**\n    \t\t * @memberof Tools.Trends\n\t\t\t * @instance\n\t\t\t * @property {stopList}\n\t\t\t * @default\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\t/**\n    \t\t * @memberof Tools.Trends\n\t\t\t * @instance\n\t\t\t * @property {query}\n    \t\t */\n    \t\tquery: undefined,\n    \t\t\n    \t\t/**\n    \t\t * @memberof Tools.Trends\n\t\t\t * @instance\n\t\t\t * @property {withDistributions}\n\t\t\t * @default\n    \t\t */\n    \t\twithDistributions: 'relative',\n    \t\t\n    \t\t/**\n    \t\t * @memberof Tools.Trends\n\t\t\t * @instance\n\t\t\t * @property {bins}\n    \t\t * \n\t\t\t * The default value will depend on the nature of the corpus:\n    \t\t * \n    \t\t * - corpus has one document: the default number of bins is 10\n    \t\t * - corpus has multiple documents:\n    \t\t *   - corpus has up to 100 documents: the default number is the size of the corpus\n    \t\t *   - corpus has more than 1000 documents: the default number is 100\n    \t\t */\n    \t\tbins: 10,\n    \t\t\n    \t\t/**\n    \t\t * @memberof Tools.Trends\n\t\t\t * @instance\n\t\t\t * @property {docIndex}\n    \t\t */\n    \t\tdocIndex: undefined,\n    \t\t\n    \t\t/**\n    \t\t * @memberof Tools.Trends\n\t\t\t * @instance\n\t\t\t * @property {docId}\n    \t\t */\n    \t\tdocId: undefined,\n    \t\t\n    \t\t/**\n    \t\t * @memberof Tools.Trends\n\t\t\t * @instance\n\t\t\t * @property {String} mode Force the mode to be either \"corpus\" (distribution of terms across documents) or \"document\" (distribution of terms within a document); usually this is correctly set by default according to whether the corpus has one document (\"document\") or more than one (\"corpus\").\n\t\t\t * @default\n    \t\t */\n    \t\tmode: \"corpus\",\n    \t\t\n\t\t\t/**\n    \t\t * @memberof Tools.Trends\n\t\t\t * @instance\n\t\t\t * @property {String} chartType The of chart to display: Options are: 'area', 'bar', 'line', 'stacked', and 'barline'.\n\t\t\t * @default\n    \t\t */\n    \t\tchartType: 'barline',\n    \t\t\n\t\t\t/**\n    \t\t * @memberof Tools.Trends\n\t\t\t * @instance\n\t\t\t * @property {Boolean} labels Whether to show term labels.\n\t\t\t * @default\n    \t\t */\n    \t\tlabels: false\n    \t},\n\t\tglyph: 'xf201@FontAwesome'\n    },\n    \n    layout: 'fit',\n    documentTermsStore: undefined,\n    //segments: undefined,\n    \n    /**\n     * @private\n     */\n    constructor: function(config) {\n    \tthis.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // we need api\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                },{\n                \titemId: 'reset',\n                \ttext: this.localize(\"reset\"),\n                \ttooltip: this.localize(\"resetTip\"),\n                \thandler: function(btn) {\n                \t\tthis.setApiParams({\n                \t\t\tdocIndex: undefined,\n                \t\t\tmode: undefined,\n                \t\t\tquery: undefined\n                \t\t});\n                \t\tthis.loadCorpusTerms();\n                \t},\n                \tscope: this\n\t\t\t\t},{\n\t\t\t\t\ttext: this.localize('display'),\n\t\t\t\t\ttooltip: this.localize('displayTip'),\n\t\t\t\t\tglyph: 'xf013@FontAwesome',\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\tafterrender: function(menu) {\n\t\t\t\t\t\t\t\tvar val = this.getApiParam(\"chartType\");\n\t\t\t\t\t\t\t\tmenu.items.each(function(item) {\n\t\t\t\t\t\t\t\t\tif (item.getItemId()==val) {\n\t\t\t\t\t\t\t\t\t\titem.addCls(item.activeCls);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t},\n\t                    defaults: {\n\t                        xtype: 'menuitem',\n\t                        handler: function(item, checked) {\n\t                        \tif (item.xtype==\"menucheckitem\") { // labels\n\t\t                        \tthis.setApiParam(\"labels\", item.checked);\n\t                        \t} else {\n\t\t                        \tthis.setApiParam(\"chartType\", item.getItemId());\n\t                        \t}\n\t                        \tthis.loadCorpusTerms();\n\t                        },\n\t                        scope: this\n\t                    },\n\t                    items: [{\n\t                    \txtype: 'menucheckitem',\n\t                    \ttext: this.localize('labels'),\n\t                        tooltip: this.localize('labelsTip'),\n\t                        checked: this.getApiParam(\"labels\")===true || this.getApiParam(\"labels\")==\"true\"\n\t                    },'-',{\n\t                        itemId: 'area',\n\t                        text: this.localize('area'),\n\t                        tooltip: this.localize('areaTip'),\n\t                        glyph: 'xe76b@Sencha-Examples'\n\t                    },{\n\t                        itemId: 'bar',\n\t                        text: this.localize('bar'),\n\t                        tooltip: this.localize('barTip'),\n\t                        glyph: 'xe768@Sencha-Examples'\n\t                    },{\n\t                        itemId: 'line',\n\t                        text: this.localize('line'),\n\t                        tooltip: this.localize('lineTip'),\n\t                        glyph: 'xe773@Sencha-Examples'\n\t                    },{\n\t                        itemId: 'stacked',\n\t                        text: this.localize('stacked'),\n\t                        tooltip: this.localize('stackedTip'),\n\t                        glyph: 'xe6c8@Sencha-Examples'\n\t                    },{\n\t                        itemId: 'barline',\n\t                        text: this.localize('barline'),\n\t                        tooltip: this.localize('barlineTip'),\n\t                        glyph: 'xe779@Sencha-Examples'\n\t                    }]\n\t\t\t\t\t}\n\t\t\t\t}]\n            }]\n    \t});\n        this.callParent(arguments);\n    },\n    \n    listeners: {\n    \tloadedCorpus: function(src, corpus) {\n    \t\tthis.loadCorpusTerms();\n    \t},\n    \ttermsClicked: function(src, terms) {\n    \t\tvar queryTerms = [];\n    \t\tterms.forEach(function(term) {\n    \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n    \t\t\telse if (term.term) {queryTerms.push(term.term);}\n    \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n\n    \t\t});\n    \t\tthis.setApiParam(\"query\", queryTerms && queryTerms.length>0 ? queryTerms : undefined);\n    \t\tthis.loadCorpusTerms();\n    \t},\n    \tcorpusTermsClicked: function(src, terms) {\n    \t\tthis.setApiParam(\"query\", terms.map(function(term) {return term.getTerm()}));\n    \t\tthis.loadCorpusTerms();\n    \t},\n    \tdocumentSelected: function(src, document) {\n\t\t\tthis.setApiParam(\"docIndex\", this.getCorpus().getDocument(document).getIndex());\n    \t\tthis.loadDocumentTerms();\n    \t},\n    \tdocumentsClicked: function(src, documents) {\n    \t\tif (documents.length==1) {\n    \t\t\tthis.fireEvent(\"documentSelected\", this, documents[0])\n    \t\t}\n    \t},\n    \tquery: function(src, query) {\n\t\t\tthis.fireEvent(\"termsClicked\", this, query)\n    \t},\n\t\tentitiesClicked: function(src, ents) {\n\t\t\tthis.fireEvent(\"termsClicked\", this, ents);\n\t\t}\n    },\n    \n    loadCorpusTerms: function(params) {\n    \t// if our corpus only has one document or if we have docIndex defined\n    \tif (\n    \t\tthis.getCorpus().getDocumentsCount()<2 || // only one document\n    \t\tthis.getApiParam(\"mode\")==\"document\" || // in document mode\n    \t\tArray.from(this.getApiParam(\"docIndex\") || \"\").length>0 // we have a docIndex defined\n    \t\t) {\n    \t\treturn this.loadDocumentTerms();\n    \t}\n    \tif (!this.getApiParam(\"query\")) {\n        \tthis.getCorpus().getCorpusTerms().load({\n        \t\tparams: {\n        \t\t\tlimit: this.getApiParam('limit'),\n        \t\t\tstopList: this.getApiParam(\"stopList\")\n        \t\t},\n        \t\tcallback: function(records, operation, success) {\n        \t\t\tif (records.length==0) {\n        \t\t\t\tif (operation && operation.error) {\n        \t\t\t\t\tthis.showError(this.localize(\"noResults\")+\"<p style='color: red'>\"+operation.error+\"</p>\")\n        \t\t\t\t} else {\n        \t\t\t\t\tthis.showError(this.localize(\"noResults\"))\n        \t\t\t\t}\n        \t\t\t} else {\n            \t\t\tthis.setApiParam(\"query\", records.map(function(r) {return r.getTerm()}))\n            \t\t\tthis.loadCorpusTerms();\n        \t\t\t}\n        \t\t},\n        \t\tscope: this\n        \t})\n    \t\treturn;\n    \t}\n    \tparams = params || {};\n    \t//this.segments.hide();\n    \tvar withDistributions = this.getApiParam(\"withDistributions\");\n    \tExt.applyIf(params, {\n    \t\tbins: this.getCorpus().getDocumentsCount(),\n\t\t\tlimit: 100, // should have query, so no limit \n\t    \tstopList: \"\" // automatic queries should be stopped already\n    \t});\n    \tvar docLabels = [];\n\t\tvar docLabelsFull = [];\n\t\tthis.getCorpus().each(function(doc) {\n\t\t\tdocLabels.push(doc.getTinyTitle());\n\t\t\tdocLabelsFull.push(doc.getTitle());\n\t\t})\n    \tif (Ext.Array.unique(docLabels).length<docLabels.length) { // we have duplicates, add index\n    \t\tdocLabels = docLabels.map(function(doc,i) {return (i+1)+\")\"+ doc})\n    \t}\n    \tExt.applyIf(params, this.getApiParams());\n    \tthis.getCorpus().getCorpusTerms().load({\n    \t\tparams: params,\n    \t\tcallback: function(records, operation, success) {\n    \t\t\tvar data = [], series = [], chartType = this.getApiParam('chartType');\n    \t\t\trecords.forEach(function(record, index) {\n    \t    \t\tvar term = record.get('term');\n    \t    \t\tvar color = this.getApplication().getColorForTerm(term, true);\n    \t    \t\trecord.get('distributions').forEach(function(r, i) {\n    \t    \t\t\tif (!data[i]) {\n    \t    \t\t\t\tdata[i] = {\"index\": docLabels[i], \"docTitle\": docLabelsFull[i]};\n    \t    \t\t\t}\n    \t    \t\t\tdata[i][\"_\"+index] = withDistributions=='relative' ? r.toFixed(7) : r;\n    \t    \t\t\tdata[i][\"term\"+index] = term;\n    \t    \t\t}, this);\n    \t    \t\t\n    \t    \t\t\n    \t    \t\tif (chartType!='bar') {\n    \t    \t\t\tvar kinds = chartType=='barline' ? [\"bar\",\"line\"] : [chartType];\n    \t    \t\t\tkinds.forEach(function(kind) {\n    \t    \t        \tseries.push({\n    \t    \t        \t\ttype: kind=='stacked' ? 'bar' : kind,\n    \t    \t    \t\t\ttitle: term,\n    \t    \t    \t\t\txField: 'index',\n    \t    \t    \t\t\tyField: '_'+index,\n    \t    \t    \t\t\tterm: term,\n    \t    \t    \t\t\tcolors: [color],\n    \t    \t    \t\t\tlabel: chartType=='barline' && kind=='bar' ? {\n    \t    \t    \t\t\t\tdisplay: 'none'\n    \t    \t    \t\t\t} : {\n    \t    \t    \t\t\t\tfield: \"term\"+index\n    \t    \t    \t\t\t}\n    \t    \t        \t})\n    \t    \t\t\t}, this);\n    \t    \t\t}\n    \t\t\t}, this);\n    \t\t\t\n    \t\t\tvar terms = records.map(function(r) {return r.getTerm()})\n    \t\t\tvar colors = terms.map(function(term) {\n\t    \t\t\treturn this.getApplication().getColorForTerm(term, true);\n\t    \t\t}, this);\n\t    \t\tif (chartType=='bar') {\n\t\t    \t\tseries.push({\n\t\t    \t\t\ttype:'bar',\n\t\t    \t\t\ttitle: terms,\n\t\t\t    \t\tcolors: colors,\n\t\t    \t\t\txField: 'index',\n\t\t    \t\t\tyField: data.length>0 ? Object.keys(data[0]).filter(function(field) {return field.charAt(0)==\"_\"}) : undefined,\n    \t    \t\t\tlabel: {\n    \t    \t\t\t\tfield: records.map(function(r,i) {return \"term\"+i;})\n    \t    \t\t\t}\n\t\t    \t\t})\n\t    \t\t}\n\t    \t\t\n    \t    \tvar store = Ext.create('Ext.data.JsonStore', {\n    \t    \t\tfields: data.length>0 ? Object.keys(data[0]) : undefined,\n    \t    \t\tdata: data\n    \t    \t});\n    \t    \t\n    \t\t\tthis.buildChart({\n        \t\t\tstore: store,\n        \t\t\tseries: series,\n        \t\t\taxes: [{\n                \t\ttype: 'numeric',\n                \t\tposition: 'left',\n                \t\tincrement: 1,\n                \t\ttitle: {\n                \t\t\ttext: this.localize(this.getApiParam(\"withDistributions\")+\"Title\")\n                \t\t}\n        \t\t\t},{\n        \t\t\t\ttype: 'category',\n                \t\tposition: 'bottom',\n                \t\ttitle: {\n                \t\t\ttext: this.localize(\"corpusTitle\")\n                \t\t}\n                \t\t\n        \t\t\t}]\n    \t\t\t})\n    \t\t},\n    \t\tscope: this\n    \t});\n  \n    },   \n\n    loadDocumentTerms: function(params) {\n    \tif (!this.getApiParam(\"query\")) {\n        \tthis.getCorpus().getCorpusTerms().load({\n        \t\tparams: {\n        \t\t\tlimit: this.getApiParam('limit'),\n        \t\t\tstopList: this.getApiParam(\"stopList\")\n        \t\t},\n        \t\tcallback: function(records, operation, success) {\n        \t\t\tthis.setApiParam(\"query\", records.map(function(r) {return r.getTerm()}))\n        \t\t\tthis.loadDocumentTerms();\n        \t\t},\n        \t\tscope: this\n        \t})\n    \t\treturn;\n    \t}\n    \t//this.segments.show();\n    \tthis.setApiParam(\"mode\", \"document\"); // just to be sure\n    \tparams = params || {};\n    \tvar withDistributions = this.getApiParam(\"withDistributions\");\n    \tExt.applyIf(params, {\n\t\t\tlimit: 0, // always have query, so no limit, no stopList\n\t\t\tsort: 'termasc',\n\t\t\tstopList: undefined\n    \t});\n    \tvar singleDoc;\n    \tif (this.getCorpus().getDocumentsCount()==1) {\n    \t\tsingleDoc=this.getCorpus().getDocument(0)\n    \t}\n    \telse {\n    \t\tsingleDoc=this.getCorpus().getDocument(this.getApiParam(\"docIndex\"))\n    \t}\n    \tExt.applyIf(params, this.getApiParams());\n    \t\n    \tthis.getCorpus().getDocumentTerms().load({\n    \t\tparams: params,\n    \t\tcallback: function(records, operation, success) {\n    \t\t\tvar data = [], series = [],  chartType = this.getApiParam('chartType');\n    \t\t\tif (!singleDoc) { // legend is easier to read if sorted by term then doc\n        \t\t\trecords.sort(function(a,b) {\n        \t\t\t\tif (a.getTerm()==b.getTerm()) {\n        \t\t\t\t\treturn a.getDocIndex() - b.getDocIndex()\n        \t\t\t\t}\n        \t\t\t\treturn a.getTerm().localeCompare(b.getTerm())\n        \t\t\t})\n    \t\t\t}\n    \t\t\trecords.forEach(function(record, index) {\n    \t    \t\tvar term = record.get('term');\n    \t    \t\tvar docIndex = record.get('docIndex');\n    \t    \t\tvar color = singleDoc ? this.getApplication().getColorForTerm(term, true) : this.getApplication().getColor(docIndex, true);\n    \t    \t\trecord.get('distributions').forEach(function(r, i) {\n    \t    \t\t\tif (!data[i]) {\n    \t    \t\t\t\tdata[i] = {index: (i+1)};\n    \t    \t\t\t}\n    \t    \t\t\tdata[i][\"_\"+index+\"_\"+docIndex] = withDistributions=='relative' ? r.toFixed(7) : r;\n    \t    \t\t\tdata[i][\"term\"+index] = term;\n    \t    \t\t}, this);\n\n    \t    \t\tif (chartType!='bar') {\n    \t    \t\t\tvar kinds = chartType=='barline' ? [\"bar\",\"line\"] : [chartType];\n    \t    \t\t\tkinds.forEach(function(kind) {\n    \t    \t        \tseries.push({\n    \t    \t        \t\ttype: kind=='stacked' ? 'bar' : kind,\n    \t    \t    \t\t\ttitle: singleDoc ? term : (docIndex+1)+\") \"+term,\n    \t    \t    \t\t\txField: 'index',\n    \t    \t    \t\t\tyField: '_'+index+\"_\"+docIndex,\n    \t    \t    \t\t\tterm: term,\n    \t    \t    \t\t\tcolors: [color],\n    \t    \t    \t\t\tlabel: chartType=='barline' && kind=='bar' ? {\n    \t    \t    \t\t\t\tdisplay: 'none'\n    \t    \t    \t\t\t} : {\n    \t    \t    \t\t\t\tfield: \"term\"+index\n    \t    \t    \t\t\t}\n    \t    \t        \t})\n    \t    \t\t\t}, this);\n    \t    \t\t}\n    \t    \t\t\n    \t\t\t}, this);\n    \t\t\t\n\t    \t\tif (chartType=='bar') {\n\t    \t\t\tvar isOneTerm = Ext.Array.unique(records.map(function(r) {return r.getTerm()})).length === 1;\n\t    \t\t\tvar terms = records.map(function(r) {return (1+r.get(\"docIndex\"))\t+\") \"+r.getTerm()})\n\t    \t\t\tvar colors = records.map(function(r) {\n\t\t    \t\t\treturn isOneTerm ? this.getApplication().getColor(r.get(\"docIndex\"), true) : this.getApplication().getColorForTerm(r.getTerm(), true);\n\t\t    \t\t}, this);\n\n\t\t    \t\tseries.push({\n\t\t    \t\t\ttype:'bar',\n\t\t    \t\t\ttitle: terms.length>0 ? terms : this.localize(\"noResults\"),\n\t\t\t    \t\tcolors: colors,\n\t\t    \t\t\txField: 'index',\n\t\t    \t\t\tyField: data.length>0 ? Object.keys(data[0]).filter(function(field) {return field.charAt(0)==\"_\"}) : undefined,\n\t\t    \t\t\tlabel: {\n\t\t    \t\t\t\tfield: terms\n\t\t    \t\t\t}\n\t\t    \t\t})\n\t    \t\t}\n\n    \t\t\t\n    \t    \tvar store = Ext.create('Ext.data.JsonStore', {\n    \t    \t\tfields: data.length>0 ? Object.keys(data[0]) : undefined,\n    \t    \t\tdata: data\n    \t    \t});\n\n    \t\t\tthis.buildChart({\n        \t\t\tstore: store,\n        \t\t\tseries: series,\n        \t\t\taxes: [{\n                \t\ttype: 'numeric',\n                \t\tposition: 'left',\n                \t\ttitle: {\n                \t\t\ttext: this.localize(this.getApiParam(\"withDistributions\")+\"Title\")\n                \t\t}\n        \t\t\t},{\n        \t\t\t\ttype: 'category',\n                \t\tposition: 'bottom',\n                \t\ttitle: {\n                \t\t\ttext: this.localize(\"segmentsTitle\") + (singleDoc ? \" (\"+singleDoc.getTitle()+\")\" : \"\")\n                \t\t}\n                \t\t\n        \t\t\t}]\n    \t\t\t})\n    \t\t},\n    \t\tscope: this\n    \t});\n  \n    },\n\t    \n    getItemToolTip: function (toolTip, record, ctx) {\n    \tvar parts = ctx.field.split(\"_\"),\n    \t\tdocIndex = parts.length==2 ? ctx.index : parts[2],\n    \t\tpos = parseInt(parts[1]),\n    \t\ttitle = ctx.series.getTitle(),\n    \t\tterm = Ext.isArray(title) ? title[pos] : title,\n    \t\tcolors = ctx.series.getColors(),\n    \t\tcolor = colors.length==1 ? colors[0] : colors[pos];\n        var html = \"<span class='x-legend-item-marker' style='background:\"+color+\n        \t\t\"; left: 2px;'></span> <span style='padding-left: 1.2em; font-weight: bold;'>\"+\n        \t\tterm+\"</span>: \"+record.get(ctx.field)+\n    \t\t\t\"<br/><i>\"+this.getCorpus().getDocument(docIndex).getShortTitle()+\"</i>\"\n\t\tif (this.getApiParam(\"mode\")==\"corpus\") {\n    \t\thtml+=\"<div style='font-size: smaller'>\"+this.localize('dblClickItem')\n\t\t} else {\n\t\t\thtml+=\"<br/>\"+this.localize('segment')+\" \"+(ctx.index+1)\n\t\t}\n    \ttoolTip.setHtml(html);\n    },\n    \n    buildChart: function(config) {\n    \tvar chartType = this.getApiParam('chartType'), labels = false;\n    \tif (this.getApiParam(\"labels\")===true || this.getApiParam(\"labels\")==\"true\") {labels=true}\n    \t\n    \tExt.applyIf(config, {\n    \t\tcls: this.getApiParam(\"mode\")\n    \t});\n\n    \tconfig.series.forEach(function(serie) {\n    \t\tExt.applyIf(serie, {\n\t\t\t\tstacked: serie.type=='bar' ? false : true,\n\t\t\t\tshowInLegend: chartType=='barline' && serie.type=='line' ? false : true,\n    \t\t\tsmooth: true,\n    \t\t\tshowMarkers: serie.type=='bar' ? false : true,\n    \t\t\tmarker: chartType=='barline' && serie.type=='line' ? null : {\n    \t\t\t    type: 'circle',\n    \t\t\t    radius: 2\n    \t\t\t},\n                style: {\n                    lineWidth: 1,\n                    fillOpacity: chartType=='barline' && serie.type=='bar' ? .01 : 1,\n                    strokeOpacity: chartType=='barline' && serie.type=='bar' ? .1 : 1\n                },\n                highlight: true,\n                highlightCfg: {\n                \tscaling: serie.type==\"bar\" ? 1.1 : 2\n                },\n    \t\t\tlabel: {\n//    \t\t\t\tdisplay: 'none'\n    \t\t\t},\n    \t\t\ttooltip: {\n                    trackMouse: true,\n                    renderer: this.getItemToolTip,\n                    scope: this\n    \t\t\t},\n                listeners: {\n                \titemclick: function(chart,item,event,eOpts ) {\n            \t\t\tif (this.clickTimer) {clearTimeout(this.clickTimer);}\n            \t\t\tif (this.blockClick) {return;} // set by dblclick to avoid menu disappearing\n            \t\t\tthis.blockClick = true // block other clicks within a sec\n            \t\t\tExt.defer(function() {\n            \t\t\t\tthis.blockClick = false;\n            \t\t\t}, 1000, this);\n                \t\tif (this.getApiParam(\"mode\")==\"document\") {\n                \t\t\tvar parts = item.field.split(\"_\"),\n                \t\t\t\tdocIndex = parseInt(parts[2]),\n                \t\t\t\tdoc = this.getCorpus().getDocument(docIndex),\n                \t\t\t\ttokens = doc.get('tokensCount-lexical'),\n                \t\t\t\tposition = parseInt(item.index  * tokens / parseInt(this.getApiParam(\"bins\")))\n                \t\t\tthis.dispatchEvent(\"documentIndexTermsClicked\", this, [{\n                    \t\t\tterm: item.series.term,\n                    \t\t\tdocIndex: docIndex,\n                    \t\t\tposition: position\n                    \t\t}]);\n                \t\t} else {\n                \t\t\tif (this.clickTimer) {clearTimeout(this.clickTimer);}\n                \t\t\tvar me = this;\n                \t\t\tthis.clickTimer = setTimeout(function() {\n                    \t\t\tme.dispatchEvent(\"documentIndexTermsClicked\", me, [{\n                        \t\t\tterm: item.series.term,\n                        \t\t\tdocIndex: item.index\n                        \t\t}]);\n                \t\t\t}, 300)\n                \t\t\t\n                \t\t}\n                \t},\n                \titemdblclick: function(chart,item,event,eOpts )  {\n            \t\t\tif (this.clickTimer) {clearTimeout(this.clickTimer);}\n            \t\t\t// block future single clicks to allow menu to appear\n            \t\t\tthis.blockClick = true\n            \t\t\tExt.defer(function() {\n            \t\t\t\tthis.blockClick = false;\n            \t\t\t}, 1000, this);\n            \t\t\t// block future clicks\n                \t\tif (this.getApiParam(\"mode\")!=\"document\") {\n                \t\t\tvar m = Ext.create('Ext.menu.Menu', {\n                \t\t\t\titems: [{\n                \t    \t\t\t\ttext: this.localize(\"drillTerm\"),\n                \t    \t\t\t\ttooltip: this.localize(\"drillTermTip\"),\n//                \t    \t\t\t\tglyph: 'xf02d@FontAwesome',\n                \t    \t\t\t\thandler: function() {\n                \t    \t\t\t\t\tthis.setApiParams({\n                \t    \t\t\t\t\t\tmode: 'document',\n                \t    \t\t\t\t\t\tquery: item.series.term\n                \t    \t\t\t\t\t});\n                \t    \t\t\t\t\tthis.loadDocumentTerms();\n                \t    \t\t\t\t},\n                \t    \t\t\t\tscope: this\n                \t\t\t\t\t},{\n                \t    \t\t\t\ttext: this.localize(\"drillDocument\"),\n                \t    \t\t\t\ttooltip: this.localize(\"drillDocumentTip\"),\n//                \t    \t\t\t\tglyph: 'xf02d@FontAwesome',\n                \t    \t\t\t\thandler: function() {\n                \t    \t\t\t\t\tthis.setApiParams({\n                \t    \t\t\t\t\t\tmode: 'document',\n                \t    \t\t\t\t\t\tdocIndex: item.index\n                \t    \t\t\t\t\t});\n                \t    \t\t\t\t\tthis.loadDocumentTerms();\n                \t    \t\t\t\t},\n                \t    \t\t\t\tscope: this\n                \t\t\t\t\t}],\n                \t\t\t\t\tlisteners: {\n                \t\t\t\t\t\thide: function(m) {\n                \t\t\t\t\t\t\t// defer hiding otherwise click handler not called\n                \t\t\t\t\t\t\tExt.defer(function() {this.destroy()}, 200, m)\n                \t\t\t\t\t\t},\n                \t\t\t\t\t\tscope: this\n                \t\t\t\t\t}\n                \t\t\t}).showAt(event.pageX, event.pageY) \n                \t\t}\n                \t},\n                \tscope: this\n                }\n    \t\t})\n    \t\tExt.applyIf(serie.label, {\n                display: 'over',\n                field: 'index',\n                fontSize: 11,\n                translateY: chartType=='line' ? 9 : undefined\n    \t\t});\n    \t\tif (!labels) {serie.label.display=\"none\";} // hide label \n    \t}, this)\n    \tExt.applyIf(config, {\n    \t\tanimation: true,\n    \t    plugins: {\n    \t        ptype: 'chartitemevents',\n    \t        moveEvents: true\n    \t    },\n    \t\tlegend: {\n    \t\t\tdocked:'top',\n    \t\t\tlisteners: {\n    \t\t\t\titemclick: function(legend, record, dom, index) {\n    \t\t\t\t\t// make sure to hide related series\n    \t\t\t\t\tif (legend.getStore().getCount()<legend.chart.series.length && this.getApiParam(\"chartType\")==\"barline\") {\n        \t\t\t\t\tvar term = record.get(\"name\"), disabled = record.get(\"disabled\");\n        \t\t\t\t\tlegend.chart.series.forEach(function(serie) {\n        \t\t\t\t\t\tif (serie.getTitle()==term) {\n        \t\t\t\t\t\t\tserie.setHidden(disabled);\n        \t\t\t\t\t\t\t\n        \t\t\t\t\t\t}\n        \t\t\t\t\t})\n        \t\t\t\t\tlegend.chart.redraw(); // not working?\n    \t\t\t\t\t}\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t}\n    \t\t},\n    \t\tinteractions: ['itemhighlight','crosszoom'],\n    \t    listeners: {}\n    \t});\n    \tExt.applyIf(config.listeners, {\n\t        itemhighlightchange: function (chart, item) {\n\t            chart.el.dom.style.cursor = item ? 'pointer' : '';\n\t        },\n\t\t\t/**\n\t\t\t * @suppress {uselessCode}\n\t\t\t */\n\t        afterrender : function() {\n\t        \treturn // TODO: this seems to cause problems, perhaps not destroying properly?\n\t        \tExt.defer(function() { // seem to need to defer\n\t\t        \tExt.tip.QuickTipManager.register({\n\t\t        \t\ttarget: this.getTargetEl().down(\".x-legend-container\"),\n\t                 \ttext: this.localize(\"toggleTip\")\n\t\t        \t});\n\t        \t},1, this)\n\t        \t\n\t        },\n\t        scope: this\n    \t})\n    \tconfig.axes.forEach(function(axis) {\n    \t\tExt.applyIf(axis, {\n    \t\t\ttitle: {},\n    \t\t\tlabel: {}\n    \t\t})\n    \t\tExt.applyIf(axis.title, {scaling: .75});\n    \t\tExt.applyIf(axis.label, {scaling: .75});\n    \t\tif (axis.type=='category') {\n    \t\t\tvar titles = \"\";\n    \t\t\tconfig.store.each(function(r) {titles+=r.get(\"index\")})\n    \t\t\tif (titles.length>this.getTargetEl().getWidth()/9) {\n            \t\tExt.applyIf(axis.label, {rotate: {degrees:-30}});\n    \t\t\t}\n        \t\tExt.applyIf(axis, {\n        \t\t\tlabelInSpan: true\n        \t\t})\n    \t\t}\n    \t}, this)\n    \t    \t\n    \t// remove existing chart\n    \tthis.query('chart').forEach(function(chart) {this.remove(chart, true);}, this);\n    \t\n    \t// create new chart\n\t\tvar chart = Ext.create(\"Ext.chart.CartesianChart\", config);\n    \tthis.add(chart);\n    },\n    \n    reloadFromChart: function() {\n    \tvar chart = this.down('chart');\n    \tif (chart) {\n    \t\tvar terms = [];\n    \t\tchart.series.forEach(function(serie) {\n    \t\t\tterms.push(serie.getTitle());\n    \t\t});\n    \t\tthis.fireEvent(\"termsClicked\", this, terms);\n    \t}\n    },\n\n\tgetExtraDataExportItems: function() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tname: 'export',\n\t\t\t\tinputValue: 'dataAsTsv',\n\t\t\t\tboxLabel: this.localize('exportGridCurrentTsv')\n\t\t\t}\n\t\t]\n\t},\n\n\texportDataAsTsv: function(panel, form) {\n\t\tvar value = '';\n\n\t\tvar chart = panel.down('chart');\n\t\tvar store = chart.getStore();\n\t\tvar firstModel = store.first();\n\t\tvar data = firstModel.getData();\n\n\t\tvar fields = ['Index'];\n\t\t\n\t\tvar termKeys = Object.keys(data).filter(function(key) {\n\t\t\treturn key.indexOf('term') === 0;\n\t\t}).sort();\n\t\tvar terms = [];\n\t\ttermKeys.forEach(function(termKey) {\n\t\t\tterms.push(data[termKey]);\n\t\t});\n\t\t\n\t\tfields = fields.concat(terms);\n\t\tvalue += fields.join(\"\\t\")+\"\\n\";\n\n\t\tvar valueKeys = Object.keys(data).filter(function(key) {\n\t\t\treturn key.indexOf('_') === 0;\n\t\t}).sort();\n\n\t\tstore.each(function(model) {\n\t\t\tdata = model.getData();\n\t\t\tvar entry = [];\n\t\t\tif (data['docTitle'] !== undefined) {\n\t\t\t\tentry.push(data['docTitle']);\n\t\t\t} else {\n\t\t\t\tentry.push(data['index']);\n\t\t\t}\n\t\t\tvalueKeys.forEach(function(valueKey) {\n\t\t\t\tentry.push(data[valueKey]);\n\t\t\t});\n\t\t\tvalue += entry.join(\"\\t\")+\"\\n\";\n\t\t}, panel);\n\n\t\tExt.Msg.show({\n\t\t\ttitle: panel.localize('exportDataTitle'),\n\t\t\tmessage: panel.localize('exportDataTsvMessage'),\n\t\t\tbuttons: Ext.Msg.OK,\n\t\t\ticon: Ext.Msg.INFO,\n\t\t\tprompt: true,\n\t\t\tmultiline: true,\n\t\t\tvalue: value\n\t\t});\n\t}\n });","Ext.define('Voyant.panel.NoTool', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.notool',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\ttool: undefined\n    \t}\n    },\n    config: {\n    \thtml: undefined,\n    \tnotYetImplemented: [\"Centroid\",\"DocumentInputAdd\",\"DocumentTypeCollocateFrequenciesGrid\",\"EntitiesBrowser\",\"Equalizer\",\"FeatureClusters\",\"Flowerbed\",\"KwicsTagger\",\"Lava\",\"Mandala\",\"MicroSearch\",\"NetVizApplet\",\"PaperDrill\",\"RezoViz\",\"Sunburst\",\"Termometer\",\"Ticker\",\"TokensViz\",\"ToolBrowser\",\"ToolBrowserLarge\",\"VoyeurTagline\",\"WordCloud\",\"VoyeurTagline\",\"WordCountFountain\"]\n    },\n    constructor: function() {\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title')\n    \t});\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n\tlisteners: {\n\t\tboxready: function(container, width, height) {\n\t\t\tvar tool = this.getApiParam(\"notool\");\n\n\t\t\tif (tool) {\n\t\t\t\tif (Ext.isArray(tool)) {tool=tool[0]}\n\t\t\t\t\n\t\t\t\tvar msg = \"\";\n\t\t\t\t\n\t\t\t\t// check to see if this is a tool that's recognized but not implemented\n\t\t\t\tvar oldTools = this.getNotYetImplemented();\n\t\t\t\tfor (var i=0, len=oldTools.length; i<len; i++) {\n\t\t\t\t\tif (tool==oldTools[i]) {\n\t\t\t\t\t\treturn Ext.Msg.show({\n\t\t\t\t\t\t    title: this.localize('error'),\n\t\t\t\t\t\t    message: new Ext.Template(this.localize('notImplemented')).applyTemplate([tool]),\n\t\t\t\t\t\t    buttons: Ext.Msg.YESNO,\n\t\t\t\t\t\t\tbuttonText: {yes: this.localize(\"currentButton\"), no: this.localize(\"oldButton\")},\n\t\t\t\t\t\t    icon: Ext.Msg.ERROR,\n\t\t\t\t\t\t    scope: this,\n\t\t\t\t\t\t    fn: function(btn) {\n\t\t\t\t\t\t    \tvar url;\n\t\t\t\t\t\t    \tif (btn=='yes') {\n\t\t\t\t\t\t    \t\turl = this.getNewUrl();\n\t\t\t\t\t\t    \t}\n\t\t\t\t\t\t    \telse {\n\t\t\t\t\t\t    \t\turl = \"http://voyant-tools.org/tool/\"+tool+\"/\";\n\t\t\t\t\t\t\t    \tvar query = Ext.Object.fromQueryString(document.location.search)\n\t\t\t\t\t\t\t    \tdelete query['tool']\n\t\t\t\t\t\t\t    \tqueryString = Ext.Object.toQueryString(query);\n\t\t\t\t\t\t\t    \tif (queryString) {\n\t\t\t\t\t\t\t\t    \turl += \"?\"+queryString\n\t\t\t\t\t\t\t    \t}\n\t\t\t\t\t\t    \t}\n\t\t\t\t\t\t    \twindow.location.replace(url);\n\t\t\t\t\t\t    }\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tExt.Msg.show({\n\t\t\t\t    title: this.localize('error'),\n\t\t\t\t    message: new Ext.Template(this.localize('badToolSpecified')).applyTemplate([tool]),\n\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t    icon: Ext.Msg.ERROR,\n\t\t\t\t    scope: this,\n\t\t\t\t    fn: function(btn) {\n\t\t\t\t    \twindow.location.replace(this.getNewUrl());\n\t\t\t\t    }\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t// no tool specified, so just redirect\n\t\t\telse if (!this.config.html) {\n\t\t\t\tExt.Msg.show({\n\t\t\t\t    title: this.localize('error'),\n\t\t\t\t    message: this.localize('noToolSpecified'),\n\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t    icon: Ext.Msg.ERROR,\n\t\t\t\t    scope: this,\n\t\t\t\t    fn: function(btn) {\n\t\t\t\t    \twindow.location.replace(this.getNewUrl());\n\t\t\t\t    }\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\tgetNewUrl: function() {\n    \tvar query = Ext.Object.fromQueryString(document.location.search)\n    \tdelete query['tool']\n    \tqueryString = Ext.Object.toQueryString(query);\n    \treturn this.getApplication().getBaseUrl()+(queryString ? \"?\"+queryString : \"\")\n\t}\n});","Ext.define('Voyant.panel.VoyantFooter', {\n\textend: 'Ext.container.Container',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.voyantfooter',\n    statics: {\n    \ti18n: {\n    \t}\n    },\n\theight: 18,\n\tcls: 'x-tab-bar-default voyant-footer',\n\tlisteners: {\n\t\tboxready: function(container, width, height) {\n\t\t\tvar parts = [\n\t\t\t\t\"<a href='\"+container.getBaseUrl()+\"docs/' target='voyantdocs'>\"+container.localize('voyantTools')+\"</a>\",\n\t\t\t\t\", <a href='https://csdh-schn.org/stefan-sinclair-in-memoriam/'>St&eacute;fan Sinclair</a> &amp; <a href='https://geoffreyrockwell.com'>Geoffrey Rockwell</a>\",\n\t\t\t\t\" (<a href='https://creativecommons.org/licenses/by/4.0/' target='_blank'><span class='cc'>c</span></a> \"+ new Date().getFullYear() +\")\",\n\t\t\t\t\" <a class='privacy' href='\"+this.getBaseUrl()+\"docs/tutorial-about.html#privacy-statement' target='top'>\"+container.localize('privacy')+\"</a>\",\n\t\t\t\t\" v. <a href='https://github.com/voyanttools/VoyantServer/releases/latest' target='_blank'>\"+Voyant.application.getVersion()+\"</a>\",\n\t\t\t\t\" | <a href='https://voyant-tools.info/' target='_blank'>Voyant Consortium</a>\"\n\t\t\t];\n\t\t\tvar footer = '';\n\t\t\tvar footerWidth = 0;\n\t\t\tvar partWidth;\n\t\t\tvar el = container.getEl();\n\t\t\tfor (var i=0;i<parts.length;i++) {\n\t\t\t\tpartWidth = el.getTextWidth(parts[i].replace(/data-qtip.+?--\u003e/,\">\").replace(/<.+?>/g, \"\"));\n\t\t\t\tif (footerWidth+partWidth < width) {\n\t\t\t\t\tfooter += parts[i];\n\t\t\t\t\tfooterWidth += partWidth;\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontainer.update(footer);\n        \tExt.tip.QuickTipManager.register({\n                target: container.getTargetEl().dom.querySelector(\".privacy\"),\n                text: this.localize('privacyMsg')\n            });\n\t\t},\n\t\tbeforedestroy: function(container) {\n    \t\tExt.tip.QuickTipManager.unregister(container.getTargetEl().dom.querySelector(\".privacy\"));\n    \t}\n\t}\n});","Ext.define('Voyant.panel.VoyantHeader', {\n\textend: 'Ext.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.voyantheader',\n    statics: {\n    \ti18n: {\n    \t}\n    },\n    constructor: function(config) {\n    \tExt.apply(this, {\n    \t\tid: 'voyantheader',\n    \t\ttitle: '',\n    \t\tlayout : 'fit',\n    \t\thtml: '<div id=\"logo-container\"></div>',\n    \t\tcollapseMode : undefined,\n\t\t\tcollapsible: true,\n\t\t\tanimCollapse: false,\n\t\t\ttitleCollapse: false,\n\t\t\tfloatable: false,\n\t\t\theader: true,\n\t\t\thideCollapseTool: true,\n\t\t\tlisteners: {\n\t\t\t\tcollapse: this.onCollapse\n\t\t\t},\n\t\t\ttitleAlign: 'center'\n    \t});\n        this.callParent(arguments);\n        \n        Ext.applyIf(config, {\n    \t\tmoreTools: ['corpusset','scatterplot','termsradio'],\n\t\t\tincludeTools: {\n\t\t\t\tsave: true,\n\t\t\t\tplus: true,\n\t\t\t\thelp: true,\n\t\t\t\tlanguage: this.getLanguageToolMenu(),\n\t\t\t\thome: {\n\t\t\t\t\ttype: 'home',\n\t\t\t\t\ttooltip: this.localize(\"homeTip\"),\n\t\t\t\t\txtype: 'toolmenu',\n\t                glyph: 'xf015@FontAwesome',\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar panel = this.up(\"panel\")\n\t        \t\t\tExt.Msg.confirm(panel.localize('home'), panel.localize('homeConfirm'), function(buttonId) {\n\t        \t\t\t\tif (buttonId=='yes') {\n\t        \t\t\t\t\tdocument.location.href = panel.getBaseUrl()\n\t        \t\t\t\t}\n\t        \t\t\t}, this);\n\t        \t\t}\n\t\t\t\t}\n\t\t\t}\n        })\n        \n    \tthis.mixins['Voyant.panel.Panel'].constructor.call(this, config);\n    },\n    \n    onCollapse: function(panel) {\n    \t// the title may be in flux when collapsing, so call defer setting of title\n    \tExt.defer(function() {this.setTitle(\"<img src='\"+this.getBaseUrl()+\"resources/images/voyant-logo-tiny.png' style='vertical-align: middle' alt='Voyant Tools' /> \"+this.localize('title'))}, 10, panel)\n    }\n});\n","Ext.define('Voyant.panel.CorpusSet', {\n\textend: 'Ext.panel.Panel',\n    requires: ['Voyant.panel.VoyantTabPanel','Voyant.panel.Cirrus', 'Voyant.panel.Summary', 'Voyant.panel.CorpusTerms', 'Voyant.panel.Reader', 'Voyant.panel.Documents', 'Voyant.panel.Trends', 'Voyant.panel.Contexts', 'Voyant.panel.Phrases', 'Voyant.panel.DocumentTerms','Voyant.panel.CorpusCollocates','Voyant.panel.Links','Voyant.panel.StreamGraph','Voyant.panel.TermsBerry'],\n\tmixins: ['Voyant.panel.Panel'],\n    alias: 'widget.corpusset',\n\tisConsumptive: true,\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tpanels: undefined\n\t\t},\n\t\tglyph: 'xf17a@FontAwesome'\n\t},\n\tconstructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\tlayout: 'border',\n\theader: false,\n\titems: [{\n    \tregion: 'west',\n    \tflex: 3,\n    \tlayout: 'fit',\n        moreTools: ['cirrus','corpusterms'],\n        xtype: 'voyanttabpanel',\n    \tsplit: {width: 5},\n    \ttabBarHeaderPosition: 0,\n    \titems: [{\n\t    \txtype: 'cirrus'\n    \t},{\n\t    \txtype: 'corpusterms'\n    \t}, {\n    \t\txtype: 'links'\n    \t}]\n    },{\n        region: 'center',\n        flex: 3,\n        layout: 'fit',\n        xtype: 'voyanttabpanel',\n    \ttabBarHeaderPosition: 0,\n        items: [{\n\t        xtype: 'reader' // termsradio added and set to default during loadedCorpus below when in non-consumptive mode\n        },{\n\t        xtype: 'termsberry'\n        }]\n    }, {\n    \tregion: 'east',\n    \tflex: 3,\n    \tlayout: 'fit',\n        xtype: 'voyanttabpanel',\n    \tsplit: {width: 5},\n    \ttabBarHeaderPosition: 0,\n    \tmoreTools: ['trends','links'],\n        items: [{\n\t    \txtype: 'trends'\n        },{\n\t    \txtype: 'documentterms'\n        }]\n    }, {\n    \tregion: 'south',\n    \tflex: 2,\n    \tsplit: {width: 5},\n    \tlayout: 'border',\n//    \tlayout: {\n//    \t\ttype: 'hbox',\n//    \t\talign: 'stretch'\n//    \t},\n    \titems: [{\n\t\t\t\tlayout: 'fit',\n\t\t\t\tregion: 'center',\n    \t\t\tflex: 1,\n    \t        xtype: 'voyanttabpanel',\n    \t    \tsplit: {width: 5},\n    \t    \ttabBarHeaderPosition: 0,\n    \t\t\tmoreTools: ['summary','documents','phrases'],\n    \t\t\titems: [{\n\t    \t\t\txtype: 'summary'\n    \t\t\t},{\n\t    \t\t\txtype: 'documents'\n    \t\t\t},{\n\t    \t\t\txtype: 'phrases'\n    \t\t\t}]\n    \t\t},{\n\t\t\t\tlayout: 'fit',\n\t\t\t\tregion: 'east',\n    \t\t\tflex: 1,\n    \t        xtype: 'voyanttabpanel',\n    \t    \tsplit: {width: 5},\n    \t    \ttabBarHeaderPosition: 0,\n    \t\t\tmoreTools: ['contexts','documentterms','correlations'],\n    \t\t\titems: [{\n\t    \t\t\txtype: 'contexts'\n    \t\t\t},{\n\t    \t\t\txtype: 'bubblelines' // is set to default during loadedCorpus below when in non-consumptive mode\n    \t\t\t},{\n\t    \t\t\txtype: 'corpuscollocates'\n    \t\t\t}]\n    \t}]\n    }],\n    listeners: {\n    \tboxready: function() {\n    \t\tvar panelsString = this.getApiParam(\"panels\");\n    \t\tif (panelsString) {\n    \t\t\tvar panels = panelsString.toLowerCase().split(\",\");\n    \t\t\tvar tabpanels = this.query(\"voyanttabpanel\");\n    \t\t\tfor (var i=0, len=panels.length; i<len; i++) {\n    \t\t\t\tvar panel = panels[i];\n    \t\t\t\tif (panel && Ext.ClassManager.getByAlias('widget.'+panel) && tabpanels[i]) {\n    \t\t\t\t\tvar tabpanel = tabpanels[i];\n    \t\t\t\t\tif (tabpanel.getActiveTab().isXType(panel)) {continue;} // already selected\n    \t\t\t\t\ttabpanel.items.each(function(item, index) {\n    \t\t\t\t\t\tif (item.isXType(panel)) {\n    \t\t\t\t\t\t\tthis.setActiveTab(index)\n    \t\t\t\t\t\t\treturn false\n    \t\t\t\t\t\t}\n    \t\t\t\t\t}, tabpanel)\n    \t\t\t\t\tif (tabpanel.getActiveTab().isXType(panel)) {continue;} // already switched\n    \t\t\t\t\ttabpanel.getActiveTab().replacePanel(panel); // switch to specified panel\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\t// add an easter egg\n    \t\tvar cirrus = this.down('cirrus');\n    \t\tvar me = this;\n    \t\tif (cirrus) {\n\t\t\t\tvar imageBaseUrl = this.getApplication().getBaseUrl()+'resources/images/';\n    \t\t\tvar toolbar = cirrus.down('toolbar');\n    \t\t\ttoolbar.add({xtype: 'tbfill'})\n    \t\t\ttoolbar.add({\n    \t\t\t\ttext: ' ',\n    \t\t\t\tlisteners: {\n    \t\t\t\t\tclick: {\n    \t\t\t\t\t\tfn: function() {\n\t        \t\t\t\t\tme.add({\n\t        \t\t\t\t\t\tregion: 'north',\n\t        \t\t\t\t\t\twidth: '100%',\n\t    \t\t\t\t\t\t\thtml: '<div align=\"center\"><table><tr><td><img src=\"'+imageBaseUrl+'stefan.jpg\" style=\"height: 60px\"></td><td style=\"text-align: center; padding-left: 2em; padding-right: 2em;\">By Athena, you found us hidden<br>up here between the panels!</td><td><img src=\"'+imageBaseUrl+'geoffrey.jpg\" style=\"height: 60px\"></td></tr></table></div>'\n\t        \t\t\t\t\t})\n\t        \t\t\t\t}, single: true\n    \t\t\t\t\t},\n    \t\t\t\t\trender: function(b) {\n    \t\t\t\t\t\tb.getTargetEl().dom.className=''\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t});\n    \t\t}\n    \t\t\n    \t},\n    \tloadedCorpus: function(src, corpus) {\n    \t\tif (this.hasCorpusAccess(corpus)==false && !this.getApiParam('panels')) {\n    \t\t\tvar tabpanels = this.query(\"voyanttabpanel\");\n//    \t\t\ttabpanels[1].add({xtype: 'termsradio'}); // reader\n    \t\t\ttabpanels[1].setActiveTab(1); // reader\n    \t\t\ttabpanels[1].getActiveTab().fireEvent(\"loadedCorpus\", src, corpus); // make sure to load corpus\n    \t\t\ttabpanels[4].setActiveTab(1); // contexts\n    \t\t}\n    \t\tif (corpus.getDocumentsCount()>30) {\n    \t\t\tvar bubblelines = this.down('bubblelines');\n    \t\t\tif (bubblelines) {\n    \t\t\t\tbubblelines.up('voyanttabpanel').remove(bubblelines)\n    \t\t\t}\n    \t\t}\n    \t},\n    \tpanelChange: function(src) {\n    \t\tvar panels = [];\n    \t\tthis.query(\"voyanttabpanel\").forEach(function(item) {\n    \t\t\tpanels.push(item.getActiveTab().xtype)\n    \t\t})\n    \t\tthis.getApplication().setApiParam('panels', panels.join(','))\n    \t}\n    }\n})","Ext.define('Voyant.panel.ScatterSet', {\n\textend: 'Ext.panel.Panel',\n    requires: ['Voyant.panel.ScatterPlot','Voyant.panel.Documents', 'Voyant.panel.Trends', 'Voyant.panel.Contexts'],\n\tmixins: ['Voyant.panel.Panel'],\n    alias: 'widget.scatterset',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tglyph: 'xf17a@FontAwesome'\n\t},\n\tconstructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\tlayout: 'hbox',\n\theader: false,\n\titems: [{\n    \tflex: 3,\n    \theight: '100%',\n        xtype: 'scatterplot'\n    },{\n    \tsplit: {width: 5},\n        flex: 1,\n    \theight: '100%',\n        layout: 'vbox',\n        defaults: {\n        \twidth: '100%',\n        \tflex: 1\n        },\n        items: [{\n        \txtype: 'documents',\n        \tcollapsible: true\n        },{\n        \txtype: 'trends',\n        \tcollapsible: true\n        },{\n        \txtype: 'contexts',\n        \tcollapsible: true\n        }]\n    }]\n})","Ext.define('Voyant.panel.Subset', { \n\t\n\t\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel','Voyant.util.Downloadable'],\n\talias: 'widget.subset',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\tdocumentFilename: ['pubDate','title'],\n    \t\tdocumentFormat: 'SOURCE'\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\n\t\tinDocumentsCountOnly: false,\n\t\tstopList: 'auto',\n\t\tstore: undefined,\n\t\tmatchingDocIds: []\n    },\n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);    \t\n    },\n    \n    \n    initComponent: function(config) {\n        var me = this;\n\n        Ext.applyIf(me, {\n        \tintroHtml: '',\n        \tfieldItems: [{\n\t        \t\txtype: 'querysearchfield',\n\t        \t\tfieldLabel: this.localize('titleLabel'),\n\t        \t\ttokenType: 'title'\n        \t\t},{\n\t        \t\txtype: 'querysearchfield',\n\t        \t\tfieldLabel: this.localize('authorLabel'),\n\t        \t\ttokenType: 'author'\n        \t\t},{\n\t        \t\txtype: 'querysearchfield',\n\t        \t\tfieldLabel: this.localize('lexicalLabel')\n        \t}],\n        \tfieldColumns: 2\n        });\n        \n        Ext.applyIf(me, {\n        \tintro: {\n        \t\tmargin: '5 0 5 0',\n        \t\tlayout: 'center',\n        \t\titems: {\n        \t\t\titemId: 'intro',\n            \t\thtml: me.introHtml\n        \t\t}\n        \t},\n        \tfields: {\n\t\t\t\txtype: 'container',\n        \t\tlayout: 'center',\n        \t\titems: {\n    \t\t\t\txtype: 'container',\n        \t\t\tmaxWidth: 1200,\n        \t\t\tlayout: {\n        \t\t\t\ttype: 'table',\n        \t\t\t\tcolumns: me.fieldColumns\n        \t\t\t},\n        \t\t\t// wrap in another container otherwise the tip won't work\n        \t\t\titems: me.fieldItems.map(function(item) {return {\n        \t\t\t\txtype: 'container',\n            \t\t\tdefaults: {\n            \t\t\t\tmargin: '5 10 5 10',\n                    \t\tinDocumentsCountOnly: me.getInDocumentsCountOnly(),\n                    \t\tstopList: me.getStopList(),\n                    \t\tshowAggregateInDocumentsCount: true,\n                    \t\tisDocsMode: true,\n                    \t\tflex: 1,\n                    \t\tmaxWidth: 800,\n                    \t\tlabelAlign: 'right'\n            \t\t\t},\n        \t\t\t\titems: Ext.applyIf(item, {\n        \t\t\t\t\tfieldLabel: me.localize((item.tokenType ? item.tokenType : 'lexical')+'Label')\n        \t\t\t\t})\n        \t\t\t}}, this)\n        \t\t}\n        \t},\n        \tfoot: {\n        \t\tlayout: 'center',\n        \t\tmargin: '20 0 0 0',\n        \t\titems: {\n        \t\t\txtype: 'container',\n        \t\t\tlayout: {\n        \t\t\t\ttype: 'hbox',\n        \t\t\t\talign: 'middle'\n        \t\t\t},\n        \t\t\tdefaults: {\n    \t        \t\tmargin: '0 5 0 5',\n//    \t        \t\tscale: 'large',\n    \t        \t\twidth: 200\n        \t\t\t},\n        \t\t\titems:  [{\n    \t        \t\txtype: 'button',\n    \t        \t\titemId: 'export',\n\t                    glyph: 'xf08e@FontAwesome',\n    \t        \t\ttext: this.localize('sendToVoyantButton'),\n    \t        \t\thandler: me.handleSendToVoyant,\n    \t        \t\tscope: me\n            \t\t},{\n    \t        \t\txtype: 'button',\n\t\t\t\t    \tglyph: 'xf019@FontAwesome',\n    \t        \t\titemId: 'download',\n    \t        \t\ttext: this.localize('downloadButton'),\n    \t        \t\thandler: me.handleExport,\n    \t        \t\tscope: me\n            \t\t},{\n            \t\t\txtype: 'container',\n            \t\t\thidden: true,\n            \t\t\titemId: 'statuscontainer',\n            \t\t\tlayout: 'vbox',\n            \t\t\titems: [{\n            \t\t\t\titemId: 'status',\n            \t\t\t\tbodyStyle: 'text-align: center',\n            \t\t\t\twidth: 200\n            \t\t\t},{\n            \t\t\t\txtype: 'container',\n            \t\t\t\twidth: 200,\n            \t\t\t\titems: {\n            \t    \t\t\txtype: 'sparklineline',\n            \t    \t\t\tchartRangeMin: 0,\n            \t    \t\t\titemId: 'sparkline',\n            \t    \t\t\tmargin: '0 0 0 10',\n            \t    \t\t\tvalues: [1,1],\n            \t    \t\t\theight: 20,\n            \t    \t\t\twidth: 200\n            \t\t\t\t}\n            \t\t\t}]\n            \t\t}]\n        \t\t}\n        \t}\n        })\n\n        Ext.applyIf(me, {\n        \titems: [me.intro, me.fields, me.foot]\n        });\n        \n    \tme.on('loadedCorpus', function(src, corpus) {\n    \t\tme.getStore().setCorpus(corpus);\n    \t\tif (me.getInitialConfig('introHtml')==undefined && me.getInitialConfig('intro')==undefined) {\n    \t\t\t me.queryById('intro').setHtml(corpus.getString())\n    \t\t}\n    \t}, me);\n    \t\n    \tme.on('query', function(src, queries) {\n    \t\tthis.performAggregateQuery(this.getAggregateQuery());\n    \t});\n    \t\n    \tme.setStore(Ext.create('Voyant.data.store.DocumentQueryMatches'))\n        me.callParent([config]);\n        \n    },\n    \n    handleSendToVoyant: function() {\n    \tif (!this.getStore().lastOptions || !this.getStore().lastOptions.params.query) {\n    \t\t// there's currently no query, so give the option of opening the current corpus in a new window\n    \t\tExt.Msg.alert(this.localize('sendToVoyantButton'), new Ext.XTemplate(this.localize('sendToVoyantNoQuery')).apply([this.getBaseUrl()+\"?corpus=\"+this.getStore().getCorpus().getId()]))\n    \t} else {\n        \tthis.mask(\"Creating corpus\u2026\");\n\n\t\t\tExt.Ajax.request({\n\t\t\t\turl: this.getApplication().getTromboneUrl(),\n\t\t\t\tparams: {\n\t\t\t\t\tcorpus: this.getCorpus().getId(),\n\t\t\t\t\ttool: 'corpus.CorpusManager',\n\t\t\t\t\tkeepDocuments: true,\n\t\t\t\t\tdocId: this.getMatchingDocIds()\n\t\t\t\t},\n\t\t\t\tsuccess: function(response, opts) {\n\t\t\t\t\tthis.unmask();\n\t\t\t\t\tvar json = Ext.JSON.decode(response.responseText);\n\t\t\t\t\tvar url = this.getBaseUrl()+\"?corpus=\"+json.corpus.id;\n\t\t\t\t\tthis.openUrl(url);\n\t\t\t\t},\n\t\t\t\tfailure: function(response, opts) {\n\t\t\t\t\tthis.unmask();\n\t\t\t\t\tthis.showResponseError(\"Unable to export corpus: \"+this.getCorpus().getId(), response);\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t})\n    \t}\n    },\n    \n    handleExport: function() {\n    \tif (!this.getStore().lastOptions || !this.getStore().lastOptions.params.query) {\n    \t\tthis.downloadFromCorpusId(this.getStore().getCorpus().getId());\n    \t} else {\n    \t\tvar record = this.getStore().getAt(0);\n    \t\tif (this.getStore().lastOptions.params.query && record && record.getCount()==0) {\n    \t\t\tthis.showMsg({message: this.localize('noMatches')})\n    \t\t} else {\n    \t    \tExt.Ajax.request({\n\t\t\t\t\turl: this.getApplication().getTromboneUrl(),\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tcorpus: this.getCorpus().getId(),\n\t\t\t\t\t\ttool: 'corpus.CorpusManager',\n\t\t\t\t\t\tkeepDocuments: true,\n\t\t\t\t\t\tdocId: this.getMatchingDocIds()\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function(response, opts) {\n\t\t\t\t\t\tthis.unmask();\n\t\t\t\t\t\tvar json = Ext.JSON.decode(response.responseText);\n\t\t\t\t\t\tthis.downloadFromCorpusId(json.corpus.id);\n\t\t\t\t\t},\n\t\t\t\t\tfailure: function(response, opts) {\n\t\t\t\t\t\tthis.unmask();\n\t\t\t\t\t\tthis.showResponseError(\"Unable to export corpus: \"+this.getCorpus().getId(), response);\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t})\n    \t\t}\n    \t}\n    },\n\n    performAggregateQuery: function(query) {\n    \tvar statuscontainer = this.queryById('statuscontainer');\n\t\tvar status = this.queryById('status');\n\t\tvar spark = this.queryById('sparkline');\n\t\tif (statuscontainer) {statuscontainer.show();}\n\t\tif (status) {status.setHtml(new Ext.XTemplate('{0:plural(\"documents\")} matching.').apply([0]))}\n\t\tif (spark) {spark.setValues([0,0]);}\n    \tif (query) {\n        \tvar docsCount = this.getStore().getCorpus().getDocumentsCount();\n        \tthis.getStore().load({\n        \t\tparams: {\n        \t\t\tquery: query,\n        \t\t\twithDistributions: true,\n\t\t\t\t\tincludeDocIds: true,\n        \t\t\tbins: docsCount > 100 ? 100 : docsCount \n        \t\t},\n        \t\tcallback: function(records, operation, success) {\n        \t\t\tif (success && records && records.length==1) {\n\t\t\t\t\t\tvar record = records[0];\n        \t\t\t\tif (status) {\n        \t\t\t\t\tstatus.setHtml(new Ext.XTemplate('{0:plural(\"document\")} matching.').apply([record.getCount()]))\n        \t\t\t\t}\n        \t\t\t\tif (spark) {\n            \t\t\t\tspark.setValues(record.getDistributions())\n        \t\t\t\t}\n\t\t\t\t\t\tthis.setMatchingDocIds(Ext.Array.clone(record.getDocIds()));\n        \t\t\t}\n        \t\t},\n\t\t\t\tscope: this\n        \t})\n    \t} else if (this.getStore().lastOptions) { // set query to undefined so that send/export buttons work properly\n    \t\tthis.getStore().lastOptions.params.query = undefined\n    \t}\n    },\n    \n    getAggregateQuery: function() {\n\t\tvar aggregateQueries = [];\n\t\tExt.ComponentQuery.query('field', this).forEach(function(field) {\n\t\t\tif (field.getTokenType && field.getValue) {\n\t\t\t\tvar tokenType = field.getTokenType();\n\t\t\t\tvar vals = Ext.Array.from(field.getValue());\n\t\t\t\tif (vals.length>0) {\n\t\t\t\t\tif (vals.length>0) {\n        \t\t\t\taggregateQueries.push(\"+(\"+vals.map(function(val) {\n        \t\t\t\t\treturn tokenType+\":\"+val\n        \t\t\t\t}).join(\"|\")+\")\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn aggregateQueries.join(\" \");\n    }\n})\n","Ext.define('Voyant.panel.CollocatesSet', {\n\textend: 'Ext.panel.Panel',\n    requires: ['Voyant.panel.ScatterPlot','Voyant.panel.Documents', 'Voyant.panel.Trends', 'Voyant.panel.Contexts'],\n\tmixins: ['Voyant.panel.Panel'],\n    alias: 'widget.collocatesset',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tglyph: 'xf17a@FontAwesome'\n\t},\n\tconstructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\tlayout: 'vbox',\n\theader: false,\n\titems: [{\n\t\tlayout: 'hbox',\n\t\talign: 'stretch',\n\t\twidth: '100%',\n\t\theight: '100%',\n\t\tflex: 2,\n        defaults: {\n        \twidth: '100%',\n        \theight: '100%',\n        \tflex: 1,\n        \tframe: true,\n        \tborder: true\n        },\n        items: [{\n        \txtype: 'corpusterms'\n        },{\n        \txtype: 'documentterms'\n        },{\n        \txtype: 'corpuscollocates'\n        }]\n    },{\n    \twidth: '100%',\n    \theight: '100%',\n    \tsplit: {width: 5},\n\t\tlayout: 'hbox',\n\t\tflex: 3,\n        defaults: {\n        \twidth: '100%',\n        \theight: '100%',\n        \tflex: 1,\n        \tframe: true,\n        \tborder: true\n        },\n        items: [{\n        \txtype: 'contexts'\n        },{\n        \txtype: 'links'\n        }]\n    }]\n})","Ext.define('Voyant.panel.BubblelinesSet', {\n\textend: 'Ext.panel.Panel',\n    requires: ['Voyant.panel.Bubblelines','Voyant.panel.Contexts', 'Voyant.panel.Reader'],\n\tmixins: ['Voyant.panel.Panel'],\n    alias: 'widget.bubblelinesset',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tglyph: 'xf17a@FontAwesome'\n\t},\n\tconstructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\tlayout: 'vbox',\n\theader: false,\n\titems: [{\n\t\twidth: '100%',\n\t\theight: '100%',\n    \txtype: 'bubblelines',\n    \tflex: 5\n    },{\n    \twidth: '100%',\n    \theight: '100%',\n    \tsplit: {width: 5},\n\t\tlayout: 'hbox',\n\t\tflex: 4,\n        defaults: {\n        \twidth: '100%',\n        \theight: '100%',\n        \tflex: 1,\n        \tframe: true,\n        \tborder: true\n        },\n        items: [{\n        \txtype: 'contexts'\n        },{\n        \txtype: 'reader'\n        }]\n    }]\n})","/**\n * CustomSet is a tool for creating a layout of other tools.\n * \n * @class CustomSet\n * @memberof Tools\n */\nExt.define('Voyant.panel.CustomSet', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n    alias: 'widget.customset',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.CustomSet\n\t\t\t * @instance\n\t\t\t * @property {String} layout A border layout string, of the format expected by <a target=\"_blank\" href=\"https://docs.sencha.com/extjs/6.2.0/classic/Ext.layout.container.Border.html\">Border layout</a>\n\t\t\t */\n\t\t\tlayout: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.CustomSet\n\t\t\t * @instance\n\t\t\t * @property {String} tableLayout A table layout string, usually generated by the <a target=\"_blank\" href=\"https://voyant-tools.org/builder/\">Skin Builder</a>\n\t\t\t */\n\t\t\ttableLayout: undefined\n\t\t},\n\t\tglyph: 'xf17a@FontAwesome'\n\t},\n\theader: false,\n\theight: '100%',\n\twidth: '100%',\n\t\n    constructor: function() {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // force api load\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n\t\tif (this.getApiParam('layout')) {\n\t\t\tExt.apply(this,{\n\t\t\t\tlayout: 'border',\n\t\t\t\titems: []\n\t\t\t})\n\t\t} else if (this.getApiParam('tableLayout')) {\n\t\t\tthis.initTableLayout();\n\t\t}\n\t\tthis.callParent()\n    },\n\t\n\tlisteners: {\n\t\tloadedCorpus: function(src, corpus) {\n\t\t\tif (this.getApiParam('layout')) { // not sure why, but we seem to need to fire event for child panels\n\t\t\t\tthis.query(\"panel\").forEach(function(p) {\n\t\t\t\t\tp.fireEvent(\"loadedCorpus\", src, corpus);\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tboxready: function(panel) {\n\t\t\tif (this.getApiParam('layout')) {\n\t\t\t\tthis.initBorderLayoutComponents();\n\t\t\t} else if (this.getApiParam('tableLayout')) {\n\t\t    \tthis.doTableSizing();\n\t\t    \tthis.on('resize', function(panel, newwidth, newheight, oldwidth, oldheight) {\n\t\t\t\t\tif (oldwidth !== undefined && oldheight !== undefined) {\n\t\t\t        \tvar widthRatio = newwidth/oldwidth;\n\t\t\t        \tvar heightRatio = newheight/oldheight;\n\t\t\t        \tthis.doTableSizing(widthRatio, heightRatio);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t} else {\n\t\t\t\tthis.showError(this.localize('noLayoutSpecified'))\n\t\t\t}\n\t\t}\n\t\t\n\t},\n\t\n\tinitBorderLayoutComponents: function() {\n        var layoutString = decodeURI(this.getApiParam('layout'))\n        \t.replace(/r1/g, 'region')\n\t        .replace(/i1/g, 'items')\n\t        .replace(/s1/g, 'split')\n\t        .replace(/c1/g, 'collapsible')\n\t        .replace(/c2/g, 'collapsed')\n\t        .replace(/w1/g, 'width')\n\t        .replace(/h1/g, 'height')\n\t        .replace(/p1/g, '%')\n\t        .replace(/\"x1\":\"/g, '\"xtype\":\"')\n\t        .replace(/c3/g, 'center')\n\t        .replace(/n1/g, 'north')\n\t        .replace(/e1/g, 'east')\n\t        .replace(/s2/g, 'south')\n\t        .replace(/w2/g, 'west')\n\t    \t.replace(/\"xtype\":\"(\\w+)\"/g, function(match, tool) {\n            \tif (!Ext.ClassManager.getByAlias(\"widget.\"+tool.toLowerCase())) {\n\t\t            if (tool==\"CollocatesGraph\") {tool=\"Links\";}\n\t\t            else if (tool==\"CorpusGrid\") {tool=\"Documents\";}\n\t\t            else if (tool==\"CorpusSummary\") {tool=\"Summary\";}\n\t\t            else if (tool==\"CorpusTypeFrequenciesGrid\") {tool=\"CorpusTerms\";}\n\t\t            else if (tool==\"DocumentInputAdd\") {tool=\"CorpusTerms\";}\n\t\t            else if (tool==\"DocumentTypeCollocateFrequenciesGrid\") {tool=\"CorpusTerms\";}\n\t\t            else if (tool==\"DocumentTypeFrequenciesGrid\") {tool=\"DocumentTerms\";}\n\t\t            else if (tool==\"DocumentTypeKwicsGrid\") {tool=\"Contexts\";}\n\t\t            else if (tool==\"TypeFrequenciesChart\") {tool=\"Trends\";}\n\t\t            else if (tool==\"VisualCollocator\") {tool=\"Links\";}\n\t\t            else {tool=\"NoTool\"}\n            \t}\n            \treturn '\"xtype\":\"'+tool.toLowerCase()+'\"'+(tool==\"NoTool\" ? ',\"html\":\"'+new Ext.Template(panel.localize('noSuchTool')).applyTemplate([tool])+'\"' : '')\n\t\t    })\n        \n        var items;\n        try {\n            items = Ext.decode(layoutString);\n        } catch (e) {\n            items = {region: 'center', html: '<div>Error constructing layout:'+e+'</div>'};\n        }\n        \n        if (items == null) {\n        \titems = {region: 'center', html: '<div>Error: no layout information found.</div>'}\n        }\n        \n        this.addBorderLayouts(items);\n\n        this.on(\"add\", function(custom, cmp) {\n        \tcmp.on(\"boxready\", function(cmp) {\n//        \t\tcmp.query(\"panel\").forEach(function(p) {\n//        \t\t\tcustom;\n////        \t\t\tdebugger\n//        \t\t})\n        \t})\n        })\n        this.add(items);\n//        .on(\"boxready\", function() {\n//        \tdebugger\n//            if (this.getCorpus()) { // we may have loaded the corpus after the layout, so refire the event\n//            \tthis.getApplication().dispatchEvent(\"loadedCorpus\", this.getApplication(), corpus);\n//            }\n//        })\n        \n\t},\n\t\n\taddBorderLayouts: function(items) {\n    \tvar size = Ext.getBody().getSize();\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            if (Ext.isString(item.width)) {\n            \titem.width = Math.round(size.width * parseInt(item.width) / 100);\n            } else if (Ext.isString(item.height)) {\n            \titem.height = Math.round(size.height * parseInt(item.height) / 100);\n            }\n            if (item.items && item.items.length > 1) {\n                item.layout = 'border';\n                this.addBorderLayouts(item.items);\n            } else {\n                item.layout = 'fit';\n            }\n        }\n\t},\n\t\n\tinitTableLayout: function() {\n    \tExt.suspendLayouts();\n    \tvar tableLayout = decodeURI(this.getApiParam('tableLayout'));\n\n    \tif (tableLayout && tableLayout.charAt(0)!=\"{\" && tableLayout.charAt(0)!=\"[\") {\n    \t\tvar cells = [];\n    \t\ttableLayout.replace(/;/g,\",\").split(/,\\s*/).forEach(function(cell) {\n    \t\t\tcells.push(/^\"'/.test(cell) ? cell : '\"'+cell+'\"');\n    \t\t});\n    \t\ttableLayout = \"[\"+cells.join(\",\")+\"]\"; // treat as simple comma-separated string\n    \t}\n    \tvar layout = Ext.decode(tableLayout);\n    \tif (Ext.isArray(layout)) {\n    \t\tlayout = {\n        \t\tcells: layout\n        \t};\n    \t}\n    \tif (!layout.numCols && layout.cells && Ext.isArray(layout.cells)) {\n    \t\tif (layout.cells.length < 3) {\n    \t\t\tlayout.numCols = layout.cells.length;\n    \t\t} else if (layout.cells.length < 5) {\n    \t\t\tlayout.numCols = Math.ceil(layout.cells.length / 2);\n    \t\t} else {\n    \t\t\tlayout.numCols = Math.ceil(layout.cells.length / 3);\n    \t\t}\n    \t}\n        if (layout.numCols != null && layout.cells && Ext.isArray(layout.cells)) {\n        \tvar items = [];\n        \tfor (var i = 0; i < layout.cells.length; i++) {\n        \t\tvar cell = layout.cells[i];\n        \t\tif (Ext.isObject(cell)) {\n        \t\t\tcell.cellWidth = parseFloat(cell.width) || undefined;\n        \t\t\tcell.cellHeight = parseFloat(cell.height) || undefined;\n        \t\t\tdelete cell.width;\n        \t\t\tdelete cell.height;\n            \t\titems.push(cell);\n        \t\t} else if (Ext.isArray(cell)) {\n        \t\t\tvar colspan = 1, rowspan = 1; xtype = undefined;\n        \t\t\tif (cell[0] && Ext.isNumber(cell[0])) {\n        \t\t\t\tcolspan = cell[0];\n        \t\t\t\tcell.shift();\n        \t\t\t}\n        \t\t\tif (cell[0] && Ext.isString(cell[0])) {\n        \t\t\t\txtype = cell[0].toLowerCase();\n        \t\t\t\tcell.shift();\n        \t\t\t}\n        \t\t\tif (cell[0] && Ext.isNumber(cell[0])) {\n        \t\t\t\trowspan = cell[0];\n        \t\t\t}\n        \t\t\tif (xtype) {\n        \t\t\t\titems.push({\n        \t\t\t\t\tcolspan: colspan,\n        \t\t\t\t\trowspan: rowspan,\n        \t\t\t\t\txtype: xtype\n        \t\t\t\t})\n        \t\t\t}\n        \t\t} else if (Ext.isString(cell)) {\n        \t\t\titems.push({\n        \t\t\t\txtype: cell.toLowerCase(),\n        \t\t\t\tcolspan: 1,\n        \t\t\t\trowspan: 1\n        \t\t\t})\n        \t\t}\n        \t}\n        \tExt.apply(this, {\n        \t\tlayout: {\n        \t\t\ttype: 'table',\n        \t\t\twidth: '100%',\n    \t\t\t\theight: '100%',\n        \t\t\tcolumns: layout.numCols,\n        \t\t\ttableAttrs: {\n            \t\t\tstyle: {\n            \t\t\t\twidth: '100%',\n            \t\t\t\theight: '100%'\n            \t\t\t}\n            \t\t},\n            \t\ttdAttrs: {\n            \t\t\tstyle: {\n            \t\t\t\tpadding: '0px',\n            \t\t\t\tverticalAlign: 'top'\n            \t\t\t}\n            \t\t}\n        \t\t},\n        \t\tdefaults: { // place holder values to ensure that the children are rendered\n            \t\twidth: 10,\n            \t\theight: 10,\n            \t\tborder: true\n            \t},\n        \t\titems: items\n        \t});\n        } else {\n        \tthis.showError(\"badTableLayoutDefinition\")\n        }\n    \t\n    \tExt.resumeLayouts();\t\t\n\t},\n\tdoTableSizing: function(widthRatio, heightRatio) {\n    \tvar sizeMap = {};\n    \t\n    \tvar table = this.getTargetEl().down(\".x-table-layout\");\n    \tvar tableSize = table.getSize(false);\n    \t\n    \tvar rows = table.dom.rows;\n    \tfor (var i=0; i<rows.length; i++) {\n    \t\tvar cells = rows[i].cells;\n    \t\tfor (var j=0; j<cells.length; j++) {\n    \t\t\tvar cell = cells[j];\n    \t\t\tvar cellEl = Ext.get(cell);\n    \t\t\tvar panelEl = cellEl.down('.x-panel');\n    \t\t\tvar cmpId = panelEl.id;\n    \t\t\t\n    \t\t\tvar size;\n    \t\t\tif (widthRatio !== undefined && heightRatio !== undefined) {\n    \t\t\t\tsize = panelEl.getSize(false);\n    \t\t\t\tsize.width = size.width * widthRatio;\n            \t\tsize.height = size.height * heightRatio;\n            \t\t// FIXME multiple resize calls gradually reduce size\n    \t\t\t} else {\n    \t\t\t\tvar sizeObj = cellEl.getSize(false);\n    \t\t\t\t\n    \t\t\t\tvar cmp = Ext.getCmp(cmpId);\n    \t\t\t\tvar widthPercent = cmp.initialConfig.cellWidth;\n    \t\t\t\tvar heightPercent = cmp.initialConfig.cellHeight;\n    \t\t\t\t\n    \t\t\t\tif (widthPercent !== undefined) {\n    \t\t\t\t\tsizeObj.width = tableSize.width * (widthPercent/100);\n    \t\t\t\t\tcellEl.setWidth(sizeObj.width);\n    \t\t\t\t}\n    \t\t\t\tif (heightPercent !== undefined) {\n    \t\t\t\t\tsizeObj.height = tableSize.height * (heightPercent/100);\n    \t\t\t\t\tcellEl.setHeight(sizeObj.height);\n    \t\t\t\t}\n    \t\t\t\t\n    \t\t\t\tsize = sizeObj; \n    \t\t\t}\n    \t\t\t\n    \t\t\tsizeMap[cmpId] = size;\n    \t\t}\n    \t}\n    \t\n    \tfor (var id in sizeMap) {\n    \t\tvar size = sizeMap[id];\n    \t\tExt.getCmp(id).setSize(size);\n    \t}\n\n    \tthis.updateLayout();\n\t}\n})","Ext.define('Voyant.panel.EntitiesSet', {\n\textend: 'Ext.panel.Panel',\n\trequires: ['Voyant.panel.Entities','Voyant.panel.Reader', 'Voyant.panel.Trends'],\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.entitiesset',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tglyph: 'xf17a@FontAwesome'\n\t},\n\tconstructor: function(config) {\n\t\tthis.callParent(arguments);\n\t\tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\tlayout: 'hbox',\n\theader: false,\n\titems: [{\n\t\twidth: '100%',\n\t\theight: '100%',\n\t\tsplit: {width: 5},\n\t\tlayout: 'hbox',\n\t\tflex: 3,\n\t\tdefaults: {\n\t\t\twidth: '100%',\n\t\t\theight: '100%',\n\t\t\tflex: 1,\n\t\t\tframe: true,\n\t\t\tborder: true\n\t\t},\n\t\titems: [{\n\t\t\txtype: 'entities'\n\t\t}]\n\t},{\n\t\tlayout: 'vbox',\n\t\talign: 'stretch',\n\t\twidth: '100%',\n\t\theight: '100%',\n\t\tflex: 2,\n\t\tdefaults: {\n\t\t\twidth: '100%',\n\t\t\theight: '100%',\n\t\t\tflex: 1,\n\t\t\tframe: true,\n\t\t\tborder: true\n\t\t},\n\t\titems: [{\n\t\t\txtype: 'reader',\n\t\t\tenableEntitiesList: false,\n\t\t\tlisteners: {\n\t\t\t\tboxready: function(cmp) {\n\t\t\t\t\tcmp.down('#nerServiceParent').hide();\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\txtype: 'trends'\n\t\t}]\n\t}],\n\tlisteners: {\n\t\tentitiesClicked: function(src, ents) {\n\t\t},\n\t\tentityLocationClicked: function(src, ent) {\n\t\t},\n\t\tscope: this\n\t}\n})","Ext.define('Voyant.panel.Veliza', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n    xtype: 'veliza',\n\tautoScroll: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tscript: '',\n    \t\tmessage: undefined\n    \t},\n\t\tglyph: 'xf0e6@FontAwesome'\n    },\n    config: {\n    \tprevious: []\n    },\n    \n    constructor: function() {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        var me = this;\n        Ext.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tglyph: 'xf0e6@FontAwesome',\n    \t    layout: {\n    \t        type: 'border',\n    \t        align: 'stretch'\n    \t    },\n    \t\titems: [{\n    \t\t\titemId: 'chat',\n\t    \t\thtml: \"<form class='chat'></form>\",\n\t    \t\tregion: 'center',\n\t    \t\tflex: 2,\n\t    \t\tautoScroll: true\n    \t\t},{\n    \t\t\titemId: 'script',\n    \t\t\txtype: 'form',\n    \t\t\tregion: 'east',\n    \t\t\tsplit: true,\n    \t\t\ttitle: this.localize('scriptEditor'),\n        \t    layout: {\n        \t        type: 'vbox',\n        \t        align: 'stretch'\n        \t    },\n    \t\t\titems: [{\n    \t\t\t\thtml: new Ext.XTemplate(this.localize('scriptIntro')).apply([me.getBaseUrl()+\"docs/tutorial-veliza.html\"])\n    \t\t\t},{\n    \t\t\t\txtype: 'textarea',\n    \t\t\t\tname: 'editor',\n    \t\t\t\tfieldStyle: \"white-space: pre\",\n    \t\t\t\tvalue: me.getApiParam('script'),\n    \t\t\t\tflex: 1,\n    \t\t\t\tlisteners: {\n    \t\t\t\t\tafterrender: function(editor) {\n    \t\t\t\t\t\tvar corpus = me.getApiParam('corpus');\n    \t\t\t\t\t\tif (!corpus) {return}\n    \t\t\t\t\t\teditor.mask(me.localize('loadingScript'));\n    \t\t\t\t\t\tExt.Ajax.request({\n    \t\t\t\t\t\t\turl: me.getTromboneUrl(),\n    \t\t\t\t\t\t\tparams: {\n    \t\t\t\t\t\t\t\ttool: 'corpus.Veliza',\n    \t\t\t\t\t\t\t\tscript: me.getApiParam('script'),\n    \t\t\t\t\t\t\t\tcorpus: corpus\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t}).then(function(response) {\n    \t\t\t\t\t\t\tvar obj = Ext.decode(response.responseText);\n    \t\t\t\t\t\t\tif (obj && obj.veliza && obj.veliza.script) {\n    \t\t\t\t\t\t\t\teditor.setValue(obj.veliza.script);\n    \t\t\t\t\t\t\t\teditor.resetOriginalValue();\n    \t\t\t\t\t\t\t} else if (obj && obj.veliza && obj.veliza.id) {\n    \t\t\t\t\t\t\t\tme.setApiParam('script', obj.veliza.id);\n    \t\t\t\t\t\t\t} else {\n    \t\t\t\t\t\t\t\tme.showError(me.localize('unableFetchScript'));\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\teditor.unmask()\n    \t\t\t\t\t\t}, function(response) {\n    \t\t\t\t\t\t\tme.showError(response)\n    \t\t\t\t\t\t})\n    \t\t\t\t\t},\n    \t\t\t\t\tscope: this\n    \t\t\t\t}\n    \t\t\t}],\n    \t\t\tcollapsed: true,\n    \t\t\tcollapsible: true,\n    \t\t\tflex: 1\n    \t\t}],\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n        \t\t\txtype: 'textfield',\n        \t\t\titemId: 'chatfield',\n        \t\t\temptyText: this.localize(\"typeAndEnter\"),\n        \t\t\tflex: 1,\n        \t\t\tlisteners: {\n                        specialkey: function(field, e){\n                            if (e.getKey() == e.ENTER) {\n                            \tme.handleUserSentence(field.getValue())\n                            \tfield.setValue(\"\");\n                            }\n                        }\n                    }\n                },{\n        \t\t\txtype: 'button',\n        \t\t\ttext: this.localize('send'),\n        \t\t\thandler: function() {\n        \t\t\t\tvar tf = this.up(\"toolbar\").down('textfield');\n        \t\t\t\tme.handleUserSentence(tf.getValue(), false);\n        \t\t\t\ttf.setValue('');\n        \t\t\t}\n        \t\t},{\n        \t\t\txtype: 'button',\n        \t\t\ttext: this.localize('fromCorpus'),\n        \t\t\thandler: function() {\n        \t\t\t\tme.handleUserSentence(\"\", true)\n        \t\t\t}\n        \t\t}]\n    \t\t}]\n        })\n             \n        this.callParent();\n        \n    \tthis.on('boxready', function(cmp) {\n    \t\tcmp.addSentence(\"fromThem\", \"Hello, I'm Veliza, and I'm here to talk to you about your texts (you may know my sister <a href='https://en.wikipedia.org/wiki/ELIZA' target='_blank'>Eliza</a> she's a famous psychotherapist). I'm just learning to talk about text documents, but please, let me know about any anxieties you're feeling about your texts. Type a message in the box below and hit enter. Or, if you're feeling playful, hit the <i>from text</i> bottom in the lower right-hand corner to fetch a sentence from the corpus.\");\n    \t\tthis.sendApiParamMessage();\n    \t})\n\n    }, \n    \n    sendApiParamMessage: function() {\n\t\tif (this.getApiParam('message')) {\n\t\t\tif (this.getCorpus()) {\n\t\t\t\tvar sentences = Ext.Array.from(this.getApiParam('message'));\n\t\t\t\tvar sentence = sentences.shift();\n\t\t\t\tif (sentence) {\n\t\t\t\t\tif (sentences) {\n\t\t\t\t\t\tthis.setApiParam(\"message\", sentences);\n\t\t\t\t\t}\n\t\t\t\t\tthis.handleUserSentence(sentence, undefined, true)\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// try to wait for the corpus to be loaded\n\t\t\t\tExt.defer(this.sendApiParamMessage, 100, this, [true])\n\t\t\t}\n\t\t}\n    },\n    \n    \n    handleUserSentence: function(sentence, fromCorpus, noScroll) {\n    \tsentence = sentence.trim();\n    \tif (sentence || fromCorpus) {\n    \t\tif (sentence) {\n    \t    \tthis.addSentence(\"myMessage\", sentence);\n    \t\t}\n\t    \tthis.mask();\n    \t\tvar me = this;\n    \t\tvar editor = this.getComponent('script').down('textarea');\n    \t\tExt.Ajax.request({\n    \t\t\turl: this.getApplication().getTromboneUrl(),\n    \t\t\tparams: {\n    \t\t\t\tcorpus: me.getCorpus() ? me.getCorpus().getId() : undefined,\n    \t\t\t\ttool: 'corpus.Veliza',\n    \t\t\t\tsentence: sentence,\n    \t\t\t\t//previous: this.getPrevious(),\n    \t\t\t\tfromCorpus: fromCorpus ? true : false,\n    \t\t\t\tscript: editor.isDirty() ? editor.getValue() : this.getApiParam('script'),\n    \t\t\t\tnoCache: Ext.id()\n    \t\t\t},\n    \t\t    success: function(response, opts) {\n    \t\t    \tme.unmask();\n    \t\t    \tvar response = Ext.decode(response.responseText);\n    \t\t    \tif (response.veliza.id) {\n    \t\t    \t\tme.setApiParam('script', response.veliza.id);\n    \t\t    \t\teditor.resetOriginalValue();\n    \t\t    \t}\n    \t\t    \tvar veliza = response.veliza.response;\n    \t\t    \tvar hidden = veliza.match(/<\\!-- (.+?) --\u003e/);\n    \t\t    \tif (hidden) {\n    \t\t    \t\tvar json =  Ext.decode(hidden[1]);\n    \t\t    \t\tfor (key in json.params) {\n    \t\t    \t\t\tjson.params[key] = json.params[key].trim();\n    \t\t    \t\t}\n    \t\t    \t\tveliza += \"<br/><iframe width='\"+(json.width ? json.width : '100%')+\"' height='\"+(json.height ? json.height : '250px')+\"' src='\"+me.getApplication().getBaseUrl()+'tool/'+json.tool+'/?corpus='+me.getCorpus().getId()+'&minimal=true&'+Ext.Object.toQueryString(json.params)+\"'></iframe>\"\n    \t\t    \t}\n    \t\t    \tvar sentence = response.veliza.sentence;\n    \t\t    \tme.setPrevious(response.veliza.previous);\n\n    \t\t    \tif (fromCorpus) {\n    \t\t    \t\tmeta = response.veliza.docIndex > -1 ? me.getCorpus().getDocument(response.veliza.docIndex).getShortLabel() : undefined;\n    \t\t    \t\tme.addSentence(\"myMessage\", sentence, meta);\n        \t\t\t    \tExt.Function.defer(function() {\n                \t\t    \tthis.addSentence(\"fromThem\", veliza);\n                \t\t    \tif (!noScroll) {\n                    \t\t    \tthis.body.scroll('b', Infinity)                \t\t    \t\t\n                \t\t    \t}\n        \t\t\t    \t}, 500, me);\n    \t\t    \t} else {\n        \t\t    \tme.addSentence(\"fromThem\", veliza);\n        \t\t    \tif (!noScroll) {\n            \t\t    \tme.body.scroll('b', Infinity)                \t\t    \t\t\n        \t\t    \t}\n    \t\t    \t}\n    \t\t    \tif (me.getApiParam(\"message\")) { // any more messages to show?\n    \t\t    \t\tme.sendApiParamMessage();\n    \t\t    \t}\n    \t\t    },\n    \t\t    failure: function(response, opts) {\n    \t\t    \tme.showResponseError(\"Unable to get response from Veliza.\", response);\n    \t\t    }\n    \t\t})\n    \t}\n    },\n\n    addSentence: function(speaker, sentence, meta) {\n    \tvar body = this.getComponent('chat').body;\n    \tvar el = body.down(\"form\").insertHtml('beforeEnd', '<div class=\"message\"><div class=\"'+speaker+'\"><p>'+sentence+'</p>'+(meta ? \"<date>\"+meta+\"</date>\" : \"\")+'</div></div>', true);\n    \tbody.scroll('b', Infinity);\n    }\n});","/**\n * The Word Tree tool allows you to explore how keywords are used in different phrases in the corpus.\n *\n * @example\n *\n * let config = {\n * \t\"context\": null,\n * \t\"docId\": null,\n * \t\"docIndex\": null,\n * \t\"limit\": null,\n * \t\"query\": null,\n * \t\"stopList\": null\n * };\n *\n * loadCorpus(\"austen\").tool(\"wordtree\", config);\n *\n * @class WordTree\n * @tutorial wordtree\n * @memberof Tools\n */\nExt.define('Voyant.panel.WordTree', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.wordtree',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.WordTree\n\t\t\t * @instance\n\t\t\t * @property {query}\n\t\t\t */\n    \t\tquery: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.WordTree\n\t\t\t * @instance\n\t\t\t * @property {docId}\n\t\t\t */\n    \t\tdocId: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.WordTree\n\t\t\t * @instance\n\t\t\t * @property {docIndex}\n\t\t\t */\n    \t\tdocIndex: undefined,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.WordTree\n\t\t\t * @instance\n\t\t\t * @property {stopList}\n\t\t\t * @default\n\t\t\t */\n    \t\tstopList: 'auto',\n\n\t\t\t/**\n\t\t\t * @memberof Tools.WordTree\n\t\t\t * @instance\n\t\t\t * @property {context}\n\t\t\t * @default\n\t\t\t */\n    \t\tcontext: 10,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.WordTree\n\t\t\t * @instance\n\t\t\t * @property {limit}\n\t\t\t * @default\n\t\t\t */\n    \t\tlimit: 100\n    \t},\n\t\tglyph: 'xf0e8@FontAwesome'\n    },\n    \n    config: {\n    \ttree: undefined,\n    \tkwicStore: undefined,\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\n    \tnumBranches: 5,\n    \tlastClick: 1\n    },\n    \n    doubleClickDelay: 300,\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n        Ext.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \txtype: 'querysearchfield'\n                },\n                \t'<span data-qtip=\"'+this.localize('poolTip')+'\" class=\"info-tip\">'+this.localize('pool')+\"</span>\"\n                , {\n                \txtype: 'slider',\n                \titemId: 'poolSlider',\n                \tminValue: 10,\n                \tvalue: 100,\n                \tmaxValue: 1000,\n                \tincrement: 5,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(this.getApiParam('limit'));\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tthis.setApiParam('limit', slider.getValue());\n                \t\t\tthis.reload();\n                \t\t},\n                \t\tscope: this\n                \t}\n                }, \n                \t'<span data-qtip=\"'+this.localize('branchesTip')+'\" class=\"info-tip\">'+this.localize('branches')+\"</span>\"\n    \t\t\t,{\n                \n                \txtype: 'slider',\n                \titemId: 'branchesSlider',\n                \tminValue: 2,\n                \tvalue: 5,\n                \tmaxValue: 15,\n                \tincrement: 1,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(this.getNumBranches());\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tthis.setNumBranches(slider.getValue());\n                \t\t\tthis.reload();\n                \t\t},\n                \t\tscope: this\n                \t}\n                },\n            \t'<span data-qtip=\"'+this.localize('contextTip')+'\" class=\"info-tip\">'+this.localize('context')+\"</span>\"\n            \t, {\n                \txtype: 'slider',\n                \titemId: 'contextSlider',\n                \tminValue: 3,\n                \tvalue: 10,\n                \tmaxValue: 20,\n                \tincrement: 2,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(this.getApiParam('context'));\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tthis.setApiParam('context', slider.getValue());\n                \t\t\tthis.reload();\n                \t\t},\n                \t\tscope: this\n                \t}\n                }]\n    \t\t}]\n        });\n        \n        this.setKwicStore(Ext.create('Voyant.data.store.Contexts', {\n        \tparentPanel: this,\n        \tproxy: {\n        \t\textraParams: {\n                \tstripTags: 'all'            \t\t\t\n        \t\t}\n        \t},\n        \tlisteners: {\n        \t\tload: function(store, records, success, operation) {\n        \t\t\tif (success) {\n        \t\t\t\tthis.parseRecords(records);\n        \t\t\t}\n        \t\t},\n        \t\tscope: this\n        \t}\n        }));\n        \n        this.on('loadedCorpus', function(src, corpus) {\n        \tvar corpusTerms = corpus.getCorpusTerms({autoLoad: false});\n    \t\tcorpusTerms.load({\n    \t\t    callback: function(records, operation, success) {\n    \t\t    \tif (success && records.length>0) {\n    \t\t    \t\tvar firstTerm = records[0].getTerm();\n    \t\t    \t\tthis.setRoot(firstTerm);\n    \t\t    \t}\n    \t\t    },\n    \t\t    scope: this,\n    \t\t    params: {\n    \t\t\t\tlimit: 1,\n    \t\t\t\tquery: this.getApiParam('query'),\n    \t\t\t\tstopList: this.getApiParam('stopList'),\n\t\t\t\t\tcategories: this.getApiParam('categories')\n    \t\t\t}\n        \t});\n        }, this);\n        \n        this.on('query', function(src, query) {\n    \t\tif (query !== undefined && query != '') {\n    \t\t\tthis.setRoot(query);\n    \t\t}\n        }, this);\n        \n        this.on('termsClicked', function(src, terms) {\n        \tvar queryTerms = [];\n    \t\tterms.forEach(function(term) {\n    \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n    \t\t\telse if (term.term) {queryTerms.push(term.term);}\n    \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n    \t\t});\n    \t\tthis.setRoot(queryTerms);\n\t\t}, this);\n        \n        this.on('documentTermsClicked', function(src, terms) {\n    \t\tvar queryTerms = [];\n    \t\tterms.forEach(function(term) {\n    \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\n    \t\t});\n    \t\tthis.setRoot(queryTerms);\n    \t}, this);\n        \n        this.on('resize', function(panel, width, height) {\n        \tvar tree = this.getTree();\n        \tif (tree !== undefined) {\n        \t\ttree.visWidth(width).visHeight(height);\n        \t\t// TODO preserve expanded branches\n        \t\ttree.redraw();\n        \t}\n\t\t}, this);\n        \n        this.on('boxready', this.initGraph, this);\n        \n        this.callParent(arguments);\n    },\n    \n    parseRecords: function(records) {\n    \tvar parsedRecords = [];\n\t\tfor (var i = 0; i < records.length; i++) {\n\t\t\tvar r = records[i];\n\t\t\tvar pr = {\n\t\t\t\tid: i,\n\t\t\t\tprefix: r.getLeft().trim().split(/\\s+/),\n\t\t\t\thit: r.getMiddle(),\n\t\t\t\tsuffix: r.getRight().trim().split(/\\s+/)\n\t\t\t};\n\t\t\tparsedRecords.push(pr);\n\t\t}\n\t\t\n\t\t// find top tokens and sort records by them\n\t\tvar prefixTokenCounts = {};\n\t\tvar suffixTokenCounts = {};\n\t\tfor (var i = 0; i < parsedRecords.length; i++) {\n\t\t\tvar pr = parsedRecords[i];\n\t\t\tvar prefixToken = pr.prefix[pr.prefix.length-1];\n\t\t\tvar suffixToken = pr.suffix[0];\n\t\t\tif (prefixTokenCounts[prefixToken]) {\n\t\t\t\tprefixTokenCounts[prefixToken]++;\n\t\t\t} else {\n\t\t\t\tprefixTokenCounts[prefixToken] = 1;\n\t\t\t}\n\t\t\tif (suffixTokenCounts[suffixToken]) {\n\t\t\t\tsuffixTokenCounts[suffixToken]++;\n\t\t\t} else {\n\t\t\t\tsuffixTokenCounts[suffixToken] = 1;\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar sortableTokens = [];\n\t\tfor (var i = 0; i < parsedRecords.length; i++) {\n\t\t\tvar pr = parsedRecords[i];\n\t\t\tvar prefixToken = pr.prefix[pr.prefix.length-1];\n\t\t\tvar suffixToken = pr.suffix[0];\n\t\t\t\n\t\t\tsortableTokens.push({\n\t\t\t\tsuffix: suffixToken, suffixCount: suffixTokenCounts[suffixToken],\n\t\t\t\tprefix: prefixToken, prefixCount: prefixTokenCounts[prefixToken]\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t\tvar prioritizeSuffix = false;\n\t\t// multi-sort\n\t\tsortableTokens.sort(function(a, b) {\n\t\t\tvar s1 = a.suffixCount;\n\t\t\tvar s2 = b.suffixCount;\n\t\t\t\n\t\t\tvar p1 = a.prefixCount;\n\t\t\tvar p2 = b.prefixCount;\n\t\t\t\n\t\t\tif (prioritizeSuffix) {\n\t\t\t\tif (s1 > s2) return -1;\n\t\t\t\tif (s1 < s2) return 1;\n\t\t\t\tif (p1 > p2) return -1;\n\t\t\t\tif (p1 < p2) return 1;\n\t\t\t} else {\n\t\t\t\tif (p1 > p2) return -1;\n\t\t\t\tif (p1 < p2) return 1;\n\t\t\t\tif (s1 > s2) return -1;\n\t\t\t\tif (s1 < s2) return 1;\n\t\t\t}\n\t\t\t\n\t\t\treturn 0;\n\t\t});\n\t\t\n\t\tvar len = Math.min(this.getNumBranches(), sortableTokens.length);\n\t\tvar topSuffixTokens = [];\n\t\tvar topPrefixTokens = [];\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\ttopSuffixTokens.push(sortableTokens[i].suffix);\n\t\t\ttopPrefixTokens.push(sortableTokens[i].prefix);\n\t\t}\n\t\t\n\t\t// use top tokens to limit results\n\t\tvar prefixes = [], hits = [], suffixes = [], ids = [];\n\t\tfor (var i = 0; i < parsedRecords.length; i++) {\n\t\t\tvar parsedRecord = parsedRecords[i];\n\t\t\tif (topSuffixTokens.indexOf(parsedRecord.suffix[0]) != -1 || topPrefixTokens.indexOf(parsedRecord.suffix[0]) != -1) {\n\t\t\t\tprefixes.push(parsedRecord.prefix);\n\t\t\t\thits.push(parsedRecord.hit);\n\t\t\t\tsuffixes.push(parsedRecord.suffix);\n\t\t\t\tids.push(parsedRecord.id);\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar caseSensitive = false;\n\t\tvar fieldNames = [\"token\", \"POS\"];\n\t\tvar fieldDelim = \"/\";\n\t\tvar distinguishingFieldsArray = [\"token\", \"POS\"];\n\t\tthis.getTree().setupFromArrays(prefixes, hits, suffixes, ids, caseSensitive, fieldNames, fieldDelim, distinguishingFieldsArray);\n\t\t\n\t\tif (!this.getTree().succeeded()) {\n\t\t\tthis.toastInfo({\n   \t\t\t\thtml: this.localize(\"emptyText\"),\n   \t\t\t\talign: 'bl'\n   \t\t\t});\n\t\t}\n    },\n    \n    initGraph: function() {\n    \tvar el = this.getLayout().getRenderTarget();\n    \tvar w = el.getWidth();\n    \tvar h = el.getHeight();\n    \t\n    \tvar dt = new doubletree.DoubleTree();\n    \tdt.init('#'+el.getId())\n    \t\t.visWidth(w).visHeight(h)\n    \t\t.handlers({\n    \t\t\tclick: this.clickHandler.bind(this)\n    \t\t});\n    \t\n    \tthis.setTree(dt);\n    \t\n    \t// explicitly set dimensions\n//    \tel.setWidth(el.getWidth());\n//    \tel.setHeight(el.getHeight());\n    },\n    \n    clickHandler: function(node) {\n    \tvar now = new Date().getTime();\n    \tif (this.getLastClick() && now-this.getLastClick()<this.doubleClickDelay) {\n    \t\tthis.setLastClick(1);\n    \t\tvar terms = [], parent = node;\n        \twhile (parent != null) {\n        \t\tterms.push(parent.name);\n        \t\tparent = parent.parent;\n        \t}\n        \tthis.getApplication().dispatchEvent('termsClicked', this, [terms.reverse().join(\" \")]);\n    \t} else {\n    \t\tthis.setLastClick(now);\n    \t}\n    },\n    \n//    doubleClickHandler: function(node) {\n//// dispatch phrase click instead of recentering (which can be done with search)\n////    \tthis.setRoot(node.name);\n//    },\n//    \n    setRoot: function(query) {\n    \tthis.setApiParam('query', this.stripPunctuation(query));\n\t\tthis.getKwicStore().load({params: this.getApiParams()});\n    },\n    \n    reload: function() {\n    \tvar query = this.getApiParam('query');\n    \tif (query !== undefined) {\n    \t\tthis.setRoot(query);\n    \t}\n    },\n    \n\t/**\n\t * @suppress {uselessCode}\n\t */\n    stripPunctuation: function(value) {\n    \tif (Ext.isString(value)) return value.replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, '');\n    \telse {\n    \t\tvar values = [];\n    \t\tvalue.forEach(function(v) {\n    \t\t\tvalues.push(v.replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, ''));\n    \t\t});\n    \t\treturn values;\n    \t}\n    \treturn '';\n    }\n});\n\n","Ext.define('Voyant.panel.WordWall', {\n    extend: 'Ext.panel.Panel',\n    mixins: ['Voyant.panel.Panel','Voyant.util.DiacriticsRemover'],\n    alias: 'widget.wordwall',\n    statics: {\n        i18n: {\n        },\n        api: {\n            limit: 500,\n            stopList: 'auto'\n        },\n        glyph: 'xf1e0@FontAwesome'\n    },\n    \n    config: {\n        visId: undefined,\n        vis: undefined,\n        simulation: undefined, // force layout\n        nodes: undefined, // svg nodes\n        tempNodes: undefined, // used to calculate text size and bounding boxes\n        zoom: undefined,\n\n        terms: undefined,\n        segments: undefined,\n\n        filterOutUniqueTerms: true, // whether to remove terms that don't appear in all segments\n\n        currentSegment: undefined,\n        segmentTerms: undefined,\n        segmentTermsQueue: [],\n\n        segmentDelay: 5000, // delay before displaying new segment data\n        segmentDelayTimer: undefined,\n        \n        webWorker: undefined,\n        isSimulating: false, // are we running a webworker simulation?\n        \n        transitionTime: 2000, // time to transition between old and new nodes\n        isTransitioning: false, // are we transitioning between nodes?\n        \n\n        minFreq: undefined,\n        maxFreq: undefined,\n        letterDistribution: undefined,\n        \n        frequencyScale: undefined,\n\n        xForceStrength: 0.2,\n        yForceStrength: 0.1,\n        \n        chargeStrength: -75,\n        chargeDistance: 100,\n\n        minFontSize: 7,\n        maxFontSize: 60\n    },\n\n    count: 0,\n\n    MIN_TERMS: 10,\n    MAX_TERMS: 2000,\n    \n    MIN_SCALING: 1,\n    MAX_SCALING: 20,\n    \n    debugMsg: false,\n\n    constructor: function(config) {\n        this.mixins['Voyant.util.DiacriticsRemover'].constructor.apply(this, arguments);\n\n        this.setVisId(Ext.id(null, 'wordwall_'));\n\n        this.callParent(arguments);\n        this.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n        Ext.apply(this, {\n            title: this.localize('title'),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [this.localize('terms'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: this.MIN_TERMS,\n                    maxValue: this.MAX_TERMS,\n                    increment: 10,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getApiParam('limit'));\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setApiParam('limit', slider.getValue());\n                            this.initLoad();\n                        },\n                        scope: this\n                    }\n                },this.localize('delay'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: 1,\n                    maxValue: 60,\n                    increment: 1,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getSegmentDelay()/1000);\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setSegmentDelay(slider.getValue()*1000);\n                            this.restartSegmentTimer();\n                        },\n                        scope: this\n                    }\n                },this.localize('transition'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: 100,\n                    maxValue: 5000,\n                    increment: 1,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getTransitionTime());\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setTransitionTime(slider.getValue());\n                        },\n                        scope: this\n                    }\n                },this.localize('xStrength'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: 0,\n                    maxValue: 1000,\n                    increment: 10,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getXForceStrength()*1000);\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setXForceStrength(slider.getValue()/1000);\n                        },\n                        scope: this\n                    }\n                },this.localize('yStrength'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: 0,\n                    maxValue: 1000,\n                    increment: 10,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getYForceStrength()*1000);\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setYForceStrength(slider.getValue()/1000);\n                        },\n                        scope: this\n                    }\n                },this.localize('chargeStrength'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: -1000,\n                    maxValue: 0,\n                    increment: 10,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getChargeStrength());\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setChargeStrength(slider.getValue());\n                        },\n                        scope: this\n                    }\n                },this.localize('chargeDistance'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: 0,\n                    maxValue: 1000,\n                    increment: 10,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getChargeDistance());\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setChargeDistance(slider.getValue());\n                        },\n                        scope: this\n                    }\n                },{\n                    xtype: 'button',\n                    text: this.localize('stop'),\n                    handler: function(b) {\n                        if (b.getText() === this.localize('stop')) {\n                            clearInterval(this.getSegmentDelayTimer());\n                            b.setText(this.localize('start'))\n                        } else {\n                            this.restartSegmentTimer();\n                            b.setText(this.localize('stop'));\n                        }\n                    },\n                    scope: this\n                },{\n                    itemId: 'status',\n                    xtype: 'tbtext',\n                    text: ''\n                }]\n            }]\n        });\n        \n        this.on('loadedCorpus', function(src, corpus) {\n            if (this.isVisible()) {\n                this.initLoad();\n            }\n        }, this);\n        \n        this.on('resize', function(panel, width, height) {\n            var vis = Ext.get(this.getVisId());\n            if (vis) {\n                var el = this.body;//this.getLayout().getRenderTarget();\n                var elHeight = el.getHeight();\n                var elWidth = el.getWidth();\n                \n                vis.el.dom.setAttribute('width', elWidth);\n                vis.el.dom.setAttribute('height', elHeight);\n//                this.getSimulation()\n//                    .force('x', d3.forceX(elWidth/2))\n//                    .force('y', d3.forceY(elHeight/2));\n            }\n        }, this);\n        \n        this.callParent(arguments);\n    },\n    \n    initVis: function() {\n        var el = this.getLayout().getRenderTarget();\n        el.update('');\n        var width = el.getWidth();\n        var height = el.getHeight();\n\n        var svg = d3.select(el.dom).append('svg').attr('id',this.getVisId()).attr('class', 'wordWall').attr('width', width).attr('height', height);\n        var g = svg.append('g');\n        this.setVis(g);\n        \n        this.setNodes(g.append('g').attr('class', 'nodes').selectAll('.node'));\n\n        this.setTempNodes(g.append('g').attr('class', 'tempNodes').selectAll('text'));\n\n        if (this.getWebWorker() === undefined) {\n            this.setWebWorker(new Worker(this.getBaseUrl()+'resources/d3/WordWallWorker.js'));\n            this.getWebWorker().onmessage = this.handleWebWorkerMessage.bind(this);\n        }\n    },\n\n    initLoad: function() {\n        this.initVis();\n        \n        this.count = 0;\n\n        var params = this.getApiParams();\n        params.tool = 'corpus.CorpusSegmentTerms';\n        \n        Ext.Ajax.request({\n            url: this.getTromboneUrl(),\n            params: params,\n            success: function(response) {\n                var data = Ext.decode(response.responseText);\n                this.setSegments(data.corpusSegmentTerms.segments);\n\n                var terms = data.corpusSegmentTerms.terms;\n                if (this.getFilterOutUniqueTerms()) {\n                    terms = terms.filter(function(el, index) { return el.rawFreqs.indexOf(0) == -1 });\n                }\n\n                this.setTerms(terms);\n                \n                this.setCurrentSegment(this.getSegments().length);\n                this.getNextSegment();\n\n                this.restartSegmentTimer();\n            },\n            failure: function(response) {\n                if (this.debugMsg) console.log('failed', response);\n            },\n            scope: this\n        })\n    },\n\n    restartSegmentTimer: function() {\n        clearInterval(this.getSegmentDelayTimer());\n\n        this.setSegmentDelayTimer(setInterval(function() {\n            this.updateNodePositions();\n        }.bind(this), this.getSegmentDelay()));\n    },\n\n    getNextSegment: function() {\n        var index = this.getCurrentSegment();\n        index++;\n        if (index >= this.getSegments().length) {\n            index = 0;\n        }\n        this.setCurrentSegment(index);\n        if (this.debugMsg) console.log('getNextSegment', index);\n        this.processTermsForSegment(this.getCurrentSegment());\n    },\n\n    processTermsForSegment: function(segmentIndex) {\n        var min = Number.MAX_VALUE;\n        var max = Number.MIN_VALUE;\n        var letterDistMap = {a:0,b:0,c:0,d:0,e:0,f:0,g:0,h:0,i:0,j:0,k:0,l:0,m:0,n:0,o:0,p:0,q:0,r:0,s:0,t:0,u:0,v:0,w:0,x:0,y:0,z:0};\n\n        this.getTerms().forEach(function(d) {\n            d.id = this.idGet(d.term);\n            // d.value = d.rawFreqs.reduce(function(sum, value) {\n            //     return sum+value;\n            // });\n            d.value = d.rawFreqs[segmentIndex];\n            if (d.value > 0) {\n                if (d.value < min) {\n                    min = d.value;\n                }\n                if (d.value > max) {\n                    max = d.value;\n                }\n\n                d.title = d.term+' ('+d.value+')';\n\n                var firstLetter = this.removeDiacritics(d.term.charAt(0)).toLowerCase();\n                d.letter = firstLetter;\n                if (letterDistMap[firstLetter] === undefined) {\n                    letterDistMap[firstLetter] = 0;\n                }\n                letterDistMap[firstLetter]++;\n            }\n        }, this);\n\n        this.setSegmentTerms(this.getTerms().filter(function(d) {\n            return d.value > 0;\n        }));\n\n        this.setMinFreq(min);\n        this.setMaxFreq(max);\n\n        var letterDist = [];\n        for (var letter in letterDistMap) {\n            var count = letterDistMap[letter];\n            var percent = count / this.getTerms().length;\n            letterDist.push({letter: letter, percent: percent});\n        }\n        letterDist.sort(function(a, b) {\n            if (a.letter < b.letter) return -1;\n            if (a.letter > b.letter) return 1;\n            return 0;\n        });\n        this.setLetterDistribution(letterDist);\n\n        this.calculateNodeSizes(this.getSegmentTerms());\n        this.runSimulation(this.getSegmentTerms());\n    },\n\n    // determine each node's font size and bounding box and store them for later use\n    calculateNodeSizes: function(terms) {\n        var nodes = this.getTempNodes().data(terms, function(d) { return d.id; });\n        \n        var fontSizer = function(value) {\n            var t = Math.min(1, terms.length / this.MAX_TERMS);\n            var exponent = t*2+1;\n            value = this.getFrequencyScale()(value);\n            var val = d3.scalePow().exponent(exponent).domain([0, 1]).range([this.getMinFontSize(), this.getMaxFontSize()])(value);\n            return val;\n        }.bind(this);\n\n        var bboxTotal = 0;\n\n        nodes.enter().append('text')\n            .attr('fill-opacity', 0)\n            .attr('font-family', function(d) { return 'Arial'; })//return me.getApplication().getCategoriesManager().getFeatureForTerm('font', d.term); })\n            .attr('font-size', function(d) {\n                var fontSize = fontSizer(d.value);\n                d.fontSize = fontSize;\n                return fontSize;\n            })\n            .text(function(d) { return d.term; })\n            .each(function(d) {\n                var bbox = this.getBBox();\n                d.bbox = {};\n                d.bbox.x = bbox.x;\n                d.bbox.y = bbox.y;\n                d.bbox.width = bbox.width;\n                d.bbox.height = bbox.height;\n\n                bboxTotal += bbox.width*bbox.height;\n            })\n            .remove();\n\n        var el = this.getLayout().getRenderTarget();\n        var width = el.getWidth();\n        var height = el.getHeight();\n\n        // adapt font size to available space\n        var availableSpace = width*height;\n        if (bboxTotal > availableSpace*0.6) {\n            this.setMaxFontSize(this.getMaxFontSize()*0.9);\n            this.setMinFontSize(this.getMinFontSize()*0.9);\n            this.calculateNodeSizes(terms);\n        } else if (bboxTotal < availableSpace*0.5) {\n            this.setMaxFontSize(this.getMaxFontSize()*1.1);\n            this.setMinFontSize(this.getMinFontSize()*1.1);\n            this.calculateNodeSizes(terms);\n        }\n    },\n\n    runSimulation: function(terms) {\n        this.setIsSimulating(true);\n\n        var el = this.getLayout().getRenderTarget();\n        var width = el.getWidth();\n        var height = el.getHeight();\n\n        // pass all the info to the worker\n        if (this.debugMsg) console.time(\"runSim\");\n        this.getWebWorker().postMessage({\n            terms: terms,\n            width: width,\n            height: height,\n            minFreq: this.getMinFreq(),\n            maxFreq: this.getMaxFreq(),\n            xForceStrength: this.getXForceStrength(),\n            yForceStrength: this.getYForceStrength(),\n            chargeDistance: this.getChargeDistance(),\n            chargeStrength: this.getChargeStrength(),\n            letterDistribution: this.getLetterDistribution()\n        });\n    },\n\n    handleWebWorkerMessage: function(event) {\n        switch (event.data.type) {\n            case \"progress\":\n                var t = event.data.progress;\n                var percent = parseInt(t * 100);\n                this.getDockedItems()[1].getComponent('status').update(percent+'%');\n                break;\n            case \"msg\":\n                if (this.debugMsg) console.log(event.data.msg);\n                break;\n            case \"end\":\n                if (this.debugMsg) console.timeEnd(\"runSim\");\n                // TODO adjust segment delay if it's less than the runSim time\n                this.getDockedItems()[1].getComponent('status').update('');\n                this.setIsSimulating(false);\n                this.getSegmentTermsQueue().push(event.data.nodes);\n                break;\n        }\n    },\n\n    updateNodePositions: function() {\n        if (this.getIsTransitioning()) {\n            Ext.Function.defer(this.updateNodePositions, 100, this);\n        } else {\n            this.count++;\n            var nodes = this.getSegmentTermsQueue().shift();\n            if (this.debugMsg) console.log('queue length', this.getSegmentTermsQueue().length);\n            if (nodes === undefined) {\n                if (this.debugMsg) console.log('no nodes', this.count);\n                if (this.getIsSimulating() === false) {\n                    this.getNextSegment();\n                }\n            } else {\n                this.setIsTransitioning(true);\n                if (this.getSegmentTermsQueue().length == 0) {\n                    this.getNextSegment();\n                }\n                \n                var nodeUpdate = this.getNodes().data(nodes, function(d) { return d.id; });\n\n                nodeUpdate.transition().duration(this.getTransitionTime()).attr('transform', function(d) {\n                    var x = d.x;\n                    var y = d.y;\n                    return 'translate('+x+','+y+')';\n                });\n\n                var nodeEnter = nodeUpdate.enter().append('g')\n                    .attr('class', 'node')\n                    .attr('id', function(d) { return d.id; })\n                    .attr('transform', function(d) {\n                        var x = d.x;\n                        var y = d.y;\n                        return 'translate('+x+','+y+')';\n                    })\n                    .attr('fill-opacity', 0);\n\n                nodeEnter.append('title').text(function(d) { return d.title; });\n\n                nodeEnter.append('text')\n                    .attr('font-family', function(d) { return 'Arial'; })//return me.getApplication().getCategoriesManager().getFeatureForTerm('font', d.term); })\n                    .attr('font-size', function(d) { return d.fontSize; })\n                    .attr('fill', function(d) { return this.getApplication().getCategoriesManager().getFeatureForTerm('color', d.term); }.bind(this))\n                    .style('cursor', 'pointer')\n                    .style('user-select', 'none')\n                    .attr('alignment-baseline', 'middle')\n                    .text(function(d) { return d.term; });\n\n                nodeEnter.transition().duration(this.getTransitionTime()).attr('fill-opacity', 1);\n\n                var allNodes = nodeEnter.merge(nodeUpdate);\n\n                allNodes.select('text').transition().duration(this.getTransitionTime())\n                    .attr('font-size', function(d) { return d.fontSize; });\n\n                nodeUpdate.exit().transition().duration(this.getTransitionTime()).attr('fill-opacity', 0).remove();\n\n                setTimeout(function() {\n                    this.setIsTransitioning(false);\n                }.bind(this), this.getTransitionTime());\n\n                this.setNodes(allNodes);\n            }\n        }\n    },\n\n    updateMinFreq: function() {\n        this.setFrequencyScale(d3.scaleLog().domain([this.getMinFreq(), this.getMaxFreq()]).range([0, 1]));\n    },\n\n    updateMaxFreq: function() {\n        this.setFrequencyScale(d3.scaleLog().domain([this.getMinFreq(), this.getMaxFreq()]).range([0, 1]));\n    },\n\n    zoomToFit: function(paddingPercent, transitionDuration) {\n    \tvar bounds = this.getVis().node().getBBox();\n    \tvar width = bounds.width;\n    \tvar height = bounds.height;\n    \tvar midX = bounds.x + width/2;\n    \tvar midY = bounds.y + height/2;\n    \tvar svg = this.getVis().node().parentElement;\n    \tvar fullWidth = svg.clientWidth;\n    \tvar fullHeight = svg.clientHeight;\n    \tvar scale = (paddingPercent || 0.8) / Math.max(width/fullWidth, height/fullHeight);\n    \tvar translate = [fullWidth/2 - scale*midX, fullHeight/2 - scale*midY];\n \n    \td3.select(svg)\n    \t\t.transition()\n    \t\t.duration(transitionDuration || 500)\n    \t\t.call(this.getZoom().transform, d3.zoomIdentity.translate(translate[0],translate[1]).scale(scale));\n    },\n    \n    idGet: function(term) {\n        return term.replace(/\\W/g, '_');\n    }\n    \n});","/**\n * The Topics tool provides a rudimentary way of generating term clusters from a document or corpus and then seeing how each topic (term cluster) is distributed across the document or corpus.\n * You can work with topics programmatically using {@link Spyral.Corpus#topics}.\n *\n * @example\n *\n * let config = {\n * \t\"iterations\": null,\n * \t\"perDocLimit\": null,\n * \t\"seed\": null,\n * \t\"stopList\": null,\n * \t\"termsPerTopic\": null,\n * \t\"topics\": null\n * };\n *\n * loadCorpus(\"austen\").tool(\"Topics\", config);\n *\n * @class Topics\n * @tutorial topics\n * @memberof Tools\n */\nExt.define('Voyant.panel.Topics', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.topics',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttopics: 'Topics',\n\t\t\tdocuments: 'Documents',\n\t\t\ttopicWeight: 'Topic weight'\n\t\t},\n\t\tapi: {\n\t\t\t/**\n\t\t\t * @memberof Tools.Topics\n\t\t\t * @instance\n\t\t\t * @property {stopList}\n\t\t\t * @default\n\t\t\t */\n\t\t\tstopList: 'auto',\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Topics\n\t\t\t * @instance\n\t\t\t * @property {Number} topics The number of topics.\n\t\t\t * @default\n\t\t\t */\n\t\t\ttopics: 10,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Topics\n\t\t\t * @instance\n\t\t\t * @property {Number} termsPerTopic The number of terms per topic.\n\t\t\t * @default\n\t\t\t */\n\t\t\ttermsPerTopic: 10,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Topics\n\t\t\t * @instance\n\t\t\t * @property {Number} iterations The number of iterations.\n\t\t\t * @default\n\t\t\t */\n\t\t\titerations: 100,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Topics\n\t\t\t * @instance\n\t\t\t * @property {Number} perDocLimit The number of terms to limit each document to.\n\t\t\t * @default\n\t\t\t */\n\t\t\tperDocLimit: 1000,\n\n\t\t\t/**\n\t\t\t * @memberof Tools.Topics\n\t\t\t * @instance\n\t\t\t * @property {Number} seed The seed to use for random number generation.\n\t\t\t * @default\n\t\t\t */\n\t\t\tseed: 0\n\t\t},\n\t\tglyph: 'xf1ea@FontAwesome'\n\t},\n\tconfig: {\n\t\t/**\n\t\t * @private\n\t\t */\n\t\toptions: [{xtype: 'stoplistoption'},{\n\t\t\txtype: 'numberfield',\n\t\t\tname: 'perDocLimit',\n\t\t\tfieldLabel: 'maximum words per document',\n\t\t\tlabelAlign: 'right',\n\t\t\tvalue: 1000,\n\t\t\tminValue: 1,\n\t\t\tstep: 100,\n\t\t\tlisteners: {\n\t\t\t\tafterrender: function(field) {\n\t\t\t\t\tvar win = field.up(\"window\");\n\t\t\t\t\tif (win && win.panel) {\n\t\t\t\t\t\tfield.setValue(parseInt(win.panel.getApiParam('perDocLimit')))\n\t\t\t\t\t\tfield.setFieldLabel(win.panel.localize(\"perDocLimit\"))\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tchange: function(field, val) {\n\t\t\t\t\tvar win = field.up(\"window\");\n\t\t\t\t\tif (val>5000 && win && win.panel) {\n\t\t\t\t\t\twin.panel.toastInfo({\n\t\t\t\t\t\t\thtml: win.panel.localize(\"perDocLimitHigh\"),\n\t\t\t\t\t\t\tanchor: win.getTargetEl(),\n\t\t\t\t\t\t\talign: 'tr',\n\t\t\t\t\t\t\tmaxWidth: 400\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\txtype: 'numberfield',\n\t\t\tname: 'iterations',\n\t\t\tfieldLabel: 'iterations per run',\n\t\t\tlabelAlign: 'right',\n\t\t\tvalue: 100,\n\t\t\tminValue: 50,\n\t\t\tmaxValue: 1000,\n\t\t\tstep: 50,\n\t\t\tlisteners: {\n\t\t\t\tafterrender: function(field) {\n\t\t\t\t\tvar win = field.up(\"window\");\n\t\t\t\t\tif (win && win.panel) {\n\t\t\t\t\t\tfield.setValue(parseInt(win.panel.getApiParam('iterations')))\n\t\t\t\t\t\tfield.setFieldLabel(win.panel.localize(\"iterations\"))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\txtype: 'textfield',\n\t\t\tname: 'seed',\n\t\t\tfieldLabel: 'Random Seed',\n\t\t\tlabelAlign: 'right',\n\t\t\tvalue: 0\n\t\t}],\n\t\t\n\t\tcurrentTopics: [],\n\t\tcurrentDocument: undefined,\n\n\t\tcorpus: undefined\n\t},\n\t\n\tconstructor: function(config) {\n\t\tvar me = this;\n\t\tExt.apply(this, {\n\t\t\ttitle: this.localize('title'),\n\t\t\tlayout: {\n\t\t\t\ttype: 'hbox',\n\t\t\t\tpack: 'start',\n\t\t\t\talign: 'begin',\n\t\t\t\tpadding: '10px'\n\t\t\t},\n\t\t\tdefaultType: 'dataview',\n\t\t\titems: [{\n\t\t\t\titemId: 'topicsView',\n\t\t\t\tflex: 2,\n\t\t\t\tpadding: '0 5px 0 0',\n\t\t\t\tmargin: '0 5px 0 0',\n\t\t\t\theight: '100%',\n\t\t\t\tscrollable: 'y',\n\t\t\t\tstore: Ext.create('Ext.data.ArrayStore',{\n\t\t\t\t\tfields: ['index', 'terms', 'weight', 'diagnostics']\n\t\t\t\t}),\n\t\t\t\tselectionModel: {\n\t\t\t\t\ttype: 'dataviewmodel',\n\t\t\t\t\tmode: 'MULTI'\n\t\t\t\t},\n\t\t\t\titemSelector: 'div.topicItem',\n\t\t\t\ttpl: new Ext.XTemplate(\n\t\t\t\t\t'<div style=\"font-weight: bold\">{[this.localize(\"topics\")]}</div><tpl for=\".\">',\n\t\t\t\t\t\t'<div class=\"topicItem\" style=\"background-color: {[this.getColor(values.index)]}\">',\n\t\t\t\t\t\t\t'<div class=\"data weight\" data-qtip=\"{[this.localize(\"topicWeight\")]}\">{[fm.number(values.weight*100, \"00.0\")]}%</div>',\n\t\t\t\t\t\t\t'<span class=\"term\">{[values.terms.join(\"</span> <span class=\\\\\"term\\\\\">\")]}</span>',\n\t\t\t\t\t\t\t'<div class=\"data diagnostics\">{[this.processDiagnostics(values.diagnostics)]}</div>',\n\t\t\t\t\t\t'</div>',\n\t\t\t\t\t'</tpl>',\n\t\t\t\t\t{\n\t\t\t\t\t\tgetColor: function(index) {\n\t\t\t\t\t\t\tvar rgb = me.getColorForTopic(index);\n\t\t\t\t\t\t\treturn 'rgba('+rgb.join(',')+',.33);'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlocalize: function(key) {\n\t\t\t\t\t\t\treturn me.localize(key);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprocessDiagnostics: function(obj) {\n\t\t\t\t\t\t\tvar string = '';\n\t\t\t\t\t\t\tfor (var key in obj) {\n\t\t\t\t\t\t\t\tstring += '<div><div class=\"key\">'+key+'</div><div class=\"value\">'+obj[key]+'</div></div>';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn string;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t),\n\t\t\t\tlisteners: {\n\t\t\t\t\tselectionchange: function(sel, selected) {\n\t\t\t\t\t\tsel.view.removeCls('showWeight');\n\t\t\t\t\t\tme.setCurrentDocument(undefined);\n\t\t\t\t\t\tme.setCurrentTopics(selected.map(function(item) { return item.get('index') }));\n\n\t\t\t\t\t\tme.down('#docsView').getSelectionModel().deselectAll(true);\n\t\t\t\t\t\tme.down('#docsView').refresh();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},{\n\t\t\t\titemId: 'docsView',\n\t\t\t\tflex: 1,\n\t\t\t\theight: '100%',\n\t\t\t\tscrollable: 'y',\n\t\t\t\tstore: Ext.create('Ext.data.JsonStore',{\n\t\t\t\t\tfields: ['docId', 'weights']\n\t\t\t\t}),\n\t\t\t\tselectionModel: {\n\t\t\t\t\ttype: 'dataviewmodel',\n\t\t\t\t\tmode: 'SINGLE',\n\t\t\t\t\tallowDeselect: true,\n\t\t\t\t\ttoggleOnClick: true\n\t\t\t\t},\n\t\t\t\titemSelector: 'div.topicItem',\n\t\t\t\ttpl: new Ext.XTemplate(\n\t\t\t\t\t'<div style=\"font-weight: bold\">{[this.localize(\"documents\")]}</div><tpl for=\".\">',\n\t\t\t\t\t\t'<div class=\"topicItem\">',\n\t\t\t\t\t\t\t'{[this.getDocTitle(values.docId)]}',\n\t\t\t\t\t\t\t'<div class=\"chart\">{[this.getChart(values.docId, values.weights)]}</div>',\n\t\t\t\t\t\t'</div>',\n\t\t\t\t\t'</tpl>',\n\t\t\t\t\t{\n\t\t\t\t\t\tgetDocTitle: function(docId) {\n\t\t\t\t\t\t\treturn me.getCorpus().getDocument(docId).getTitle();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetChart: function(docId, weights) {\n\t\t\t\t\t\t\tvar chart = '';\n\t\t\t\t\t\t\tvar topicStore = me.down('#topicsView').getStore();\n\t\t\t\t\t\t\ttopicStore.each(function(item) {\n\t\t\t\t\t\t\t\tvar index = item.get('index');\n\t\t\t\t\t\t\t\tvar weight = weights[index];\n\t\t\t\t\t\t\t\tvar rgb = me.getColorForTopic(index);\n\t\t\t\t\t\t\t\tvar alpha = me.getCurrentDocument() === docId ? '1' : me.getCurrentTopics().length === 0 ? '.33' : me.getCurrentTopics().indexOf(index) !== -1 ? '1' : '.15';\n\t\t\t\t\t\t\t\tvar color = 'rgba('+rgb.join(',')+','+alpha+')';\n\t\t\t\t\t\t\t\tchart += '<div style=\"width: '+(weight*100)+'%; background-color: '+color+'\"> </div>';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn chart;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlocalize: function(key) {\n\t\t\t\t\t\t\treturn me.localize(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t),\n\t\t\t\tlisteners: {\n\t\t\t\t\tselectionchange: function(sel, selected) {\n\t\t\t\t\t\tme.setCurrentTopics([]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar docId = selected[0] ? selected[0].get('docId') : undefined;\n\t\t\t\t\t\tme.setCurrentDocument(docId);\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar topicStore = me.down('#topicsView').getStore();\n\t\t\t\t\t\tif (docId) {\n\t\t\t\t\t\t\tme.down('#topicsView').addCls('showWeight').getSelectionModel().deselectAll(true);\n\t\t\t\t\t\t\ttopicStore.beginUpdate();\n\t\t\t\t\t\t\tsel.view.getStore().query('docId', docId).each(function(item) {\n\t\t\t\t\t\t\t\tvar weights = item.get('weights');\n\t\t\t\t\t\t\t\tweights.forEach(function(weight, index) {\n\t\t\t\t\t\t\t\t\ttopicStore.findRecord('index', index).set('weight', weight);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\ttopicStore.endUpdate();\n\t\t\t\t\t\t\ttopicStore.sort('weight', 'DESC');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tme.down('#topicsView').removeCls('showWeight').getSelectionModel().deselectAll(true);\n\t\t\t\t\t\t\ttopicStore.sort('index', 'ASC');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsel.view.refresh();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t}],\n\t\t\tdockedItems: {\n\t\t\t\tdock: 'bottom',\n\t\t\t\txtype: 'toolbar',\n\t\t\t\toverflowHandler: 'scroller',\n\t\t\t\titems:[\n\t\t\t\t\t   '<span class=\"info-tip\" data-qtip=\"'+this.localize('searchTip')+'\">'+this.localize('search')+'</span>'\n\t\t\t\t\t,{\n\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\tname: 'searchField',\n\t\t\t\t\thideLabel: true,\n\t\t\t\t\twidth: 80,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tchange: {\n\t\t\t\t\t\t\tfn: me.onQuery,\n\t\t\t\t\t\t\tscope: me,\n\t\t\t\t\t\t\tbuffer: 500\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\t'<span class=\"info-tip\" data-qtip=\"'+this.localize('limitTermsTip')+'\">'+this.localize('limitTerms')+'</span>'\n\t\t\t\t,{ \n\t\t\t\t\twidth: 60,\n\t\t\t\t\thideLabel: true,\n\t\t\t\t\txtype: 'numberfield',\n\t\t\t\t\tminValue: 1,\n\t\t\t\t\tmaxValue: 100,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tafterrender: function(slider) {\n\t\t\t\t\t\t\tslider.setValue(parseInt(this.getApiParam(\"termsPerTopic\")))\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchange: function(slider, newvalue) {\n\t\t\t\t\t\t\tthis.setApiParams({termsPerTopic: newvalue});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\t'<span class=\"info-tip\" data-qtip=\"'+this.localize('numTopicsTip')+'\">'+this.localize('numTopics')+'</span>'\n\t\t\t\t,{ \n\t\t\t\t\twidth: 60,\n\t\t\t\t\thideLabel: true,\n\t\t\t\t\txtype: 'numberfield',\n\t\t\t\t\tminValue: 1,\n\t\t\t\t\tmaxValue: 100,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tafterrender: function(slider) {\n\t\t\t\t\t\t\tslider.setValue(parseInt(this.getApiParam(\"topics\")))\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchange: function(slider, newvalue) {\n\t\t\t\t\t\t\tthis.setApiParams({topics: newvalue});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\ttext: 'Run',//new Ext.Template(this.localize('runIterations')).apply([100]),\n\t\t\t\t\titemId: 'iterations',\n\t\t\t\t\tglyph: 'xf04b@FontAwesome',\n\t\t\t\t\ttooltip: this.localize('runIterationsTip'),\n\t\t\t\t\thandler: this.runIterations,\n\t\t\t\t\tscope: this\n\t\t\t\t},{\n\t\t\t\t\ttext: 'Toggle diagnostics',\n\t\t\t\t\titemId: 'diagnostics',\n\t\t\t\t\tglyph: 'xf129@FontAwesome',\n\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\tme.down('#topicsView').toggleCls('showDiagnostics');\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}\n\t\t});\n\n\t\tthis.callParent(arguments);\n\t\t\n\n\t\tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t\t\n\t\t// create a listener for corpus loading (defined here, in case we need to load it next)\n\t\tthis.on('loadedCorpus', function(src, corpus) {\n\t\t\tthis.setCorpus(corpus);\n\t\t\tif (this.rendered) {\n\t\t\t\tthis.initialize();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.on(\"afterrender\", function() {\n\t\t\t\t\tthis.initialize();\n\t\t\t\t}, this)\n\t\t\t}\n\n\t\t});\n\t},\n\t\n\trunIterations: function() {\n\t\tvar params = this.getApiParams();\n\t\tparams.tool = 'analysis.TopicModeling';\n\t\tparams.corpus = this.getCorpus().getAliasOrId();\n\t\tparams.noCache = 1;\n\n\t\tvar iterations = this.getApiParam('iterations');\n\t\tvar msg = Ext.MessageBox.progress({\n\t\t\ttitle: this.localize(\"runningIterations\"),\n\t\t\tmessage: new Ext.Template(this.localize('runningIterationsCount')).apply([iterations])\n\t\t});\n\n\t\tExt.Ajax.request({\n\t\t\turl: this.getTromboneUrl(),\n\t\t\tparams: params,\n\t\t\tsuccess: function(response, req) {\n\t\t\t\tmsg.close();\n\n\t\t\t\tvar data = JSON.parse(response.responseText);\n\t\t\t\t\n\t\t\t\tvar topicsStore = this.down('#topicsView').getStore();\n\t\t\t\ttopicsStore.loadData(data.topicModeling.topics.map(function(topic, i) {\n\t\t\t\t\tvar words = topic.words.map(function(w) {\n\t\t\t\t\t\treturn w.word;\n\t\t\t\t\t});\n\t\t\t\t\tvar diagnostics = Object.assign({}, topic);\n\t\t\t\t\tdelete diagnostics.words;\n\t\t\t\t\treturn [i, words, 0, diagnostics];\n\t\t\t\t}));\n\n\t\t\t\tdata.topicModeling.topicDocuments.sort(function(a, b) {\n\t\t\t\t\tvar docIndexA = this.getCorpus().getDocument(a.docId).getIndex();\n\t\t\t\t\tvar docIndexB = this.getCorpus().getDocument(b.docId).getIndex();\n\t\t\t\t\treturn docIndexA-docIndexB;\n\t\t\t\t}.bind(this));\n\t\t\t\tthis.down('#docsView').getStore().loadData(data.topicModeling.topicDocuments);\n\t\t\t\tthis.down('#docsView').refresh();\n\t\t\t},\n\t\t\tscope: this\n\t\t});\n\t},\n\n\tgetColorForTopic: function(topicIndex) {\n\t\treturn this.getApplication().getColor(topicIndex);\n\t},\n\n\tonQuery: function(cmp, query) {\n\t\tvar topicsView = this.down('#topicsView');\n\t\ttopicsView.getEl().query('.highlighted').forEach(function(hi) {\n\t\t\thi.classList.remove('highlighted');\n\t\t});\n\t\t\n\t\tif (query.trim() !== '') {\n\t\t\tvar matcher = new RegExp(query, 'gi');\n\t\t\tvar topicsStore = topicsView.getStore();\n\t\t\tvar indexes = [];\n\t\t\tvar matches = [];\n\t\t\ttopicsStore.each(function(record) {\n\t\t\t\tvar terms = record.get('terms');\n\t\t\t\tvar termMatches = [];\n\t\t\t\tfor (var i = 0; i < terms.length; i++) {\n\t\t\t\t\tvar term = terms[i];\n\t\t\t\t\tif (term.search(matcher) !== -1) {\n\t\t\t\t\t\ttermMatches.push(i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (termMatches.length > 0) {\n\t\t\t\t\tindexes.push(record.get('index'));\n\t\t\t\t}\n\t\t\t\tmatches.push(termMatches);\n\t\t\t});\n\t\t\tif (indexes.length > 0) {\n\t\t\t\ttopicsView.setSelection(indexes.map(function(index) {return topicsStore.findRecord('index', index)}));\n\t\t\t\ttopicsView.getNodes().forEach(function(node, i) {\n\t\t\t\t\tvar nodeMatches = matches[i];\n\t\t\t\t\tif (nodeMatches.length > 0) {\n\t\t\t\t\t\tvar terms = node.querySelectorAll('.term');\n\t\t\t\t\t\tnodeMatches.forEach(function(termIndex) {\n\t\t\t\t\t\t\tterms[termIndex].classList.add('highlighted');\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setCurrentTopics([]);\n\t\t\t\ttopicsView.getSelectionModel().deselectAll(true);\n\t\t\t\tthis.down('#docsView').refresh();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setCurrentTopics([]);\n\t\t\ttopicsView.getSelectionModel().deselectAll(true);\n\t\t\tthis.down('#docsView').refresh();\n\t\t}\n\t},\n\t\n\tinitialize: function() {\n\t\tthis.runIterations();\n\t},\n\n\tgetExtraDataExportItems: function() {\n\t\treturn [{\n\t\t\tname: 'export',\n\t\t\tinputValue: 'dataAsTsv',\n\t\t\tboxLabel: this.localize('exportGridCurrentTsv')\n\t\t}]\n\t},\n\n\texportDataAsTsv: function(panel, form) {\n\t\tvar topicsValue = \"Topic\\t\";\n\t\tvar docsValue = 'Document Title';\n\n\t\tvar topicOrder = [];\n\n\t\tvar includeDiagnostics = this.down('#topicsView').hasCls('showDiagnostics');\n\n\t\tthis.down('#topicsView').getStore().getData().each(function(record, i) {\n\t\t\tif (i === 0) {\n\t\t\t\ttopicsValue += record.get('terms').map(function(t, i) { return 'Term '+i; }).join(\"\\t\");\n\t\t\t\tif (includeDiagnostics) {\n\t\t\t\t\ttopicsValue += \"\\t\"+Object.keys(record.get('diagnostics')).join(\"\\t\");\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\ttopicOrder.push(record.get('index'));\n\n\t\t\ttopicsValue += \"\\nTopic \"+record.get('index')+\"\\t\"+record.get('terms').join(\"\\t\");\n\t\t\tif (includeDiagnostics) {\n\t\t\t\ttopicsValue += \"\\t\"+Object.values(record.get('diagnostics')).join(\"\\t\");\n\t\t\t}\n\t\t\tdocsValue += \"\\tTopic \"+record.get('index')+' Weight';\n\t\t});\n\n\t\tthis.down('#docsView').getStore().getData().each(function(record) {\n\t\t\tvar title = this.getCorpus().getDocument(record.get('docId')).getTitle();\n\t\t\t\n\t\t\tvar weights = topicOrder.map(function(topicIndex) {\n\t\t\t\tvar weight = record.get('weights')[topicIndex];\n\t\t\t\treturn Ext.util.Format.number(weight*100, \"00.######\");\n\t\t\t}).join(\"\\t\");\n\n\t\t\tdocsValue += \"\\n\"+title+\"\\t\"+weights;\n\t\t}, this);\n\n\t\tExt.create('Ext.window.Window', {\n\t\t\ttitle: panel.localize('exportDataTitle'),\n\t\t\theight: 290,\n\t\t\twidth: 450,\n\t\t\tbodyPadding: 10,\n\t\t\tlayout: {\n\t\t\t\ttype: 'vbox',\n\t\t\t\tpack: 'start',\n\t\t\t\talign: 'stretch'\n\t\t\t},\n\t\t\tmodal: true,\n\t\t\tdefaults: {\n\t\t\t\tmargin: '0 0 5px 0'\n\t\t\t},\n\t\t\titems: [{\n\t\t\t\thtml: panel.localize('exportDataTsvMessage')\n\t\t\t},{\n\t\t\t\thtml: '<textarea class=\"x-form-text-default x-form-textarea\" style=\"height: 76px; width: 100%\">'+topicsValue+'</textarea>'\n\t\t\t},{\n\t\t\t\thtml: '<textarea class=\"x-form-text-default x-form-textarea\" style=\"height: 76px; width: 100%\">'+docsValue+'</textarea>'\n\t\t\t}],\n\t\t\tbuttonAlign: 'center',\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'OK',\n\t\t\t\thandler: function(btn) {\n\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t}\n\t\t\t}]\n\t\t}).show();\n\t}\n\t\n});","\n// assuming Cirrus library is loaded by containing page (via voyant.jsp)\nExt.define('Voyant.panel.Via', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.via',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\tlimit: 100,\n    \t\tdocIndex: undefined\n    \t},\n\t\tglyph: 'xf06e@FontAwesome'\n    },\n    \n    config: {\n    \tmode: undefined,\n    \toptions: [\n    \t\t{xtype: 'stoplistoption'},\n    \t\t{\n\t    \t\txtype: 'listeditor',\n\t    \t\tname: 'whiteList'\n    \t    },\n    \t    {xtype: 'categoriesoption'}\n    \t]\n    },\n    \n    layout: 'fit',\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function (config) {\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n        \t\t\txtype: 'corpusdocumentselector',\n        \t\t\tsingleSelect: true\n        \t\t},{\n        \t\t\tfieldLabel: this.localize('visible'),\n        \t\t\tlabelWidth: 40,\n        \t\t\twidth: 120,\n        \t\t\txtype: 'slider',\n\t            \tincrement: 10,\n\t            \tminValue: 10,\n\t            \tmaxValue: 1000,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(this.getApiParam(\"limit\"))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({limit: newvalue});\n\t            \t\t\tthis.loadFromCorpus(this.getCorpus());\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                }]\n    \t\t}]\n    \t});\n\n    \tthis.callParent(arguments);\n    \t\n    \t\n    },\n    \n    listeners: {\n    \tresize: function(panel, width, height) {\n//    \t\tif (this.getCorpus()) {\n//        \t\tthis.loadFromCorpus(this.getCorpus())\n//    \t\t}\n    \t},\n    \t\n    \tloadedCorpus: function(src, corpus) {\n    \t\tvar langs = corpus.get(\"languageCodes\");\n    \t\tvar val = Ext.Array.each(langs, function(lang) {\n    \t\t\tif (lang!='en') {\n    \t\t\t\tthis.showError(this.localize('englishOnly'));\n    \t\t\t\treturn false;\n    \t\t\t}\n    \t\t}, this);\n    \t\tif (corpus.getWordTokensCount()>100000 && !this.getApiParam(\"docIndex\")) {\n    \t\t\tthis.setApiParam(\"docIndex\", 0)\n    \t\t}\n    \t\tthis.loadFromCorpus(corpus);\n    \t},\n    \t\n    \tcorpusSelected: function(src, corpus) {\n    \t\tthis.setApiParam(\"docIndex\", \"\");\n    \t\tthis.loadFromCorpus(corpus)\n    \t},\n    \t\n    \tdocumentSelected: function(src, document) {\n    \t\tthis.setApiParam(\"docIndex\", document.getIndex());\n    \t\tthis.loadFromCorpus(this.getCorpus())\n    \t}\n    \t\n    \t\n    },\n    \n    loadFromCorpus: function(corpus) {\n    \tvar me = this;\n    \tthis.mask(this.localize(\"loading\"))\n    \tvar params = this.getApiParams();\n    \tvar a = corpus.loadRelatedWords(params).then(function(relatedWords) {\n    \t\tme.unmask()\n    \t\tvar edges = relatedWords.map(function(item) {return {source: item.getSource(), target: item.getTarget()}})\n    \t\tvar graph = me.down(\"voyantnetworkgraph\");\n    \t\tif (graph) {\n    \t\t\tgraph.loadJson({edges: edges});\n    \t\t} else {\n    \t\t\tgraph = Ext.create(\"Voyant.widget.VoyantNetworkGraph\", {\n        \t\t\tedges: edges,\n        \t\t\tlisteners: {\n        \t\t\t\tnodeclicked: function(src, node) {\n        \t\t\t\t\tme.dispatchEvent('termsClicked', me, [node.term]);\n        \t\t\t\t}\n        \t\t\t}\n        \t\t})\n        \t\tme.add(graph)\n    \t\t}\n    \t}, function(response) {\n    \t\tme.unmask();\n    \t\tif (response.timedout) {\n    \t\t\tme.showError(me.localize('timedout'));\n    \t\t} else {\n        \t\tme.showError(response);\n    \t\t}\n    \t});\n    }\n});","Ext.define(\"Voyant.notebook.editor.button.Add\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperadd',\n\tstatics: {\n\t\ti18n: {\n\t\t\taddTip: 'Add New Cell',\n\t\t\taddText: 'Add Text',\n\t\t\taddCode: 'Add Code',\n\t\t\taddData: 'Add Data'\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\n\t\tExt.apply(config, {\n\t\t\ttooltip: this.localize('addTip'),\n\t\t\tarrowVisible: false,\n\t\t\tmenuAlign: 'tr-br?',\n\t\t\tmenu: {\n\t\t\t\titems: [{\n\t\t\t\t\ttext: this.localize('addText'),\n\t\t\t\t\tglyph: 'xf0f6@FontAwesome',\n\t\t\t\t\thandler: function() {\n\t\t\t\t\t\tvar ed = Voyant.notebook.editor.EditorWrapper.currentEditor;\n\t\t\t\t\t\tvar notebook = ed.findParentByType('notebook');\n\t\t\t\t\t\tvar cmp = notebook.addText('', ed.getIndex()+1);\n\t\t\t\t\t\tcmp.getTargetEl().scrollIntoView(notebook.getTargetEl(), null, true, true);\n\t\t\t\t\t\tnotebook.redoOrder();\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\ttext: this.localize('addCode'),\n\t\t\t\t\tglyph: 'xf121@FontAwesome',\n\t\t\t\t\thandler: function() {\n\t\t\t\t\t\tvar ed = Voyant.notebook.editor.EditorWrapper.currentEditor;\n\t\t\t\t\t\tvar notebook = ed.findParentByType('notebook');\n\t\t\t\t\t\tvar cmp = notebook.addCode('', ed.getIndex()+1);\n\t\t\t\t\t\tcmp.getTargetEl().scrollIntoView(notebook.getTargetEl(), null, true, true);\n\t\t\t\t\t\tnotebook.redoOrder();\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\ttext: this.localize('addData'),\n\t\t\t\t\tglyph: 'xf1b2@FontAwesome',\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\ttext: 'Corpus',\n\t\t\t\t\t\t\tdata: 'corpus',\n\t\t\t\t\t\t\tmargin: '0 0 0 -20px'\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\ttext: 'File',\n\t\t\t\t\t\t\tdata: 'file',\n\t\t\t\t\t\t\tmargin: '0 0 0 -20px'\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\ttext: 'JSON',\n\t\t\t\t\t\t\tdata: 'json',\n\t\t\t\t\t\t\tmargin: '0 0 0 -20px'\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\ttext: 'Text',\n\t\t\t\t\t\t\tdata: 'text',\n\t\t\t\t\t\t\tmargin: '0 0 0 -20px'\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\ttext: 'Table',\n\t\t\t\t\t\t\tdata: 'table',\n\t\t\t\t\t\t\tmargin: '0 0 0 -20px'\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\ttext: 'XML',\n\t\t\t\t\t\t\tdata: 'xml',\n\t\t\t\t\t\t\tmargin: '0 0 0 -20px'\n\t\t\t\t\t\t}],\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\tclick: function(menu, item) {\n\t\t\t\t\t\t\t\tvar ed = Voyant.notebook.editor.EditorWrapper.currentEditor;\n\t\t\t\t\t\t\t\tvar notebook = ed.findParentByType('notebook');\n\t\t\t\t\t\t\t\tvar mode = item.getInitialConfig('data');\n\t\t\t\t\t\t\t\tif (mode !== undefined) {\n\t\t\t\t\t\t\t\t\tvar cmp = notebook.addData('', ed.getIndex()+1, undefined, {mode: mode});\n\t\t\t\t\t\t\t\t\tcmp.getTargetEl().scrollIntoView(notebook.getTargetEl(), null, true, true);\n\t\t\t\t\t\t\t\t\tnotebook.redoOrder();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}\n\t\t});\n\n\t\tthis.callParent(arguments);\n\t},\n\tglyph: 'xf067@FontAwesome'\n})","Ext.define(\"Voyant.notebook.editor.button.CodeConfig\", {\n\textend: \"Ext.menu.Item\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookcodeconfig',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttext: 'Config',\n\t\t\ttip: \"Configuration Options\",\n\t\t\ttitle: \"Cell Mode\",\n\t\t\tmodeCode: 'Code',\n\t\t\tmodeJavascript: 'Javascript (default)',\n\t\t\tmodeData: 'Data',\n\t\t\tmodeFile: 'File',\n\t\t\tmodeJson: 'JSON',\n\t\t\tmodeText: 'Text',\n\t\t\tmodeTable: 'Table',\n\t\t\tmodeXml: 'XML',\n\t\t\tmodeHtml: 'HTML',\n\t\t\tok: \"OK\",\n\t\t\tcancel: \"Cancel\"\n\t\t},\n\t\tconfigWin: undefined,\n\t\tinitWindow: function(buttonInstance) {\n\t\t\tif (Voyant.notebook.editor.button.CodeConfig.configWin === undefined) {\n\t\t\t\tVoyant.notebook.editor.button.CodeConfig.configWin = new Ext.Window({\n\t\t\t\t\ttitle: buttonInstance.localize('title'),\n\t\t\t\t\tcloseAction: 'hide',\n\t\t\t\t\tlayout: 'fit',\n\t\t\t\t\twidth: 240,\n\t\t\t\t\titems: [{\n\t\t\t\t\t\txtype: 'form',\n\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\t\t\talign: 'stretch'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbodyPadding: 10,\n\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\txtype: 'fieldset',\n\t\t\t\t\t\t\ttitle: buttonInstance.localize(\"modeCode\"),\n\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\tboxLabel : buttonInstance.localize('modeJavascript'),\n\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\tinputValue: 'javascript',\n\t\t\t\t\t\t\t\tflex  : 1\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\txtype: 'fieldset',\n\t\t\t\t\t\t\ttitle: buttonInstance.localize(\"modeData\"),\n\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\tboxLabel : 'Corpus',\n\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\tinputValue: 'corpus',\n\t\t\t\t\t\t\t\tflex  : 1\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\tboxLabel : buttonInstance.localize('modeFile'),\n\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\tinputValue: 'file',\n\t\t\t\t\t\t\t\tflex  : 1\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\tboxLabel : buttonInstance.localize('modeJson'),\n\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\tinputValue: 'json',\n\t\t\t\t\t\t\t\tflex  : 1\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\tboxLabel : buttonInstance.localize('modeText'),\n\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\tinputValue: 'text',\n\t\t\t\t\t\t\t\tflex  : 1\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\tboxLabel : buttonInstance.localize('modeTable'),\n\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\tinputValue: 'table',\n\t\t\t\t\t\t\t\tflex  : 1\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\tboxLabel : buttonInstance.localize('modeXml'),\n\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\tinputValue: 'xml',\n\t\t\t\t\t\t\t\tflex  : 1\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\tboxLabel : buttonInstance.localize('modeHtml'),\n\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\tinputValue: 'html',\n\t\t\t\t\t\t\t\tflex  : 1\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t}]\n\t\t\t\t\t}],\n\t\t\t\t\tbuttons: [{\n\t\t\t\t\t\ttext: buttonInstance.localize('ok'),\n\t\t\t\t\t\titemId: 'ok'\n\t\t\t\t\t},{\n\t\t\t\t\t\ttext:  buttonInstance.localize('cancel'),\n\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tshowConfigWindow: function(codeEditorInstance) {\n\t\t\tVoyant.notebook.editor.button.CodeConfig.configWin.down('radiofield[name=codeMode][inputValue=\"'+codeEditorInstance.getMode()+'\"]').setValue(true);\n\t\t\tVoyant.notebook.editor.button.CodeConfig.configWin.down('button#ok').setHandler(function(btn) {\n\t\t\t\tvar win = btn.up('window');\n\t\t\t\tvar form = win.down('form');\n\t\t\t\tif (form.isDirty()) {\n\t\t\t\t\tcodeEditorInstance.up('notebook').setIsEdited(true);\n\t\t\t\t\tvar values = form.getValues();\n\t\t\t\t\tcodeEditorInstance.switchModes(values.codeMode);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\twin.close();\n\t\t\t});\n\t\t\tVoyant.notebook.editor.button.CodeConfig.configWin.show();\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tExt.apply(this, {\n\t\t\ttext: this.localize('text'),\n\t\t\t// tooltip: this.localize('tip')\n\t\t})\n\t\t\n\t\tVoyant.notebook.editor.button.CodeConfig.initWindow(this);\n\n\t\tthis.callParent(arguments);\n\t},\n\tglyph: 'xf013@FontAwesome',\n\thandler: function(btn, e) {\n\t\tVoyant.notebook.editor.button.CodeConfig.showConfigWindow(Voyant.notebook.editor.EditorWrapper.currentEditor);\n\t}\n});\n","Ext.define('Voyant.notebook.editor.button.Export', {\n\textend: 'Ext.menu.Item',\n\tmixins: ['Voyant.util.Localization'],\n\talias: 'widget.notebookwrapperexport',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttext: 'Export',\n\t\t\ttip: 'Export',\n\t\t\texportTitle: 'Export',\n\t\t\texportOpen: 'Export content into new window',\n\t\t\texportDownload: 'Download file to your machine',\n\t\t\texportCorpus: 'Open Corpus in Voyant Tools',\n\t\t\tcancelTitle: 'Cancel'\n\t\t},\n\t\texportWin: undefined,\n\t\tgetExportWindow: function(instance) {\n\t\t\tif (this.exportWin === undefined) {\n\t\t\t\tthis.exportWin = Ext.create('Ext.window.Window', {\n\t\t\t\t\ttitle: instance.localize('exportTitle'),\n\t\t\t\t\tcloseAction: 'hide',\n\t\t\t\t\tmodal: true,\n\t\t\t\t\twidth: 250,\n\t\t\t\t\tbodyPadding: 5,\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\t\talign: 'stretch'\n\t\t\t\t\t},\n\t\t\t\t\tdefaults: {\n\t\t\t\t\t\txtype: 'button'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\titemId: 'corpus',\n\t\t\t\t\t\ttext: instance.localize('exportCorpus'),\n\t\t\t\t\t\tglyph: 'xf08e@FontAwesome',\n\t\t\t\t\t\tmargin: '0 0 5 0',\n\t\t\t\t\t\thidden: true\n\t\t\t\t\t},{\n\t\t\t\t\t\titemId: 'open',\n\t\t\t\t\t\ttext: instance.localize('exportOpen'),\n\t\t\t\t\t\tglyph: 'xf08e@FontAwesome',\n\t\t\t\t\t\tmargin: '0 0 5 0',\n\t\t\t\t\t},{\n\t\t\t\t\t\titemId: 'download',\n\t\t\t\t\t\tpreventDefault: false,\n\t\t\t\t\t\ttext: instance.localize('exportDownload'),\n\t\t\t\t\t\tglyph: 'xf019@FontAwesome',\n\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}],\n\t\t\t\t\tbuttons: [{\n\t\t\t\t\t\ttext: instance.localize('cancelTitle'),\n\t\t\t\t\t\tglyph: 'xf00d@FontAwesome',\n\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar wrapper = Voyant.notebook.editor.EditorWrapper.currentEditor;\n\t\t\tif (wrapper === undefined) {\n\t\t\t\tvar results = Voyant.notebook.editor.SandboxWrapper.currentResults;\n\t\t\t\tvar notebook = results.up('notebook');\n\t\t\t\tExt.Array.each(notebook.query(\"notebookrunnableeditorwrapper\"), function(item) {\n\t\t\t\t\tif (item.results === results) {\n\t\t\t\t\t\twrapper = item;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (wrapper === undefined) {\n\t\t\t\t\tconsole.warn('wrapper not found!');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar outputPromise = null;\n\t\t\tvar mode = wrapper.getMode();\n\t\t\tif (mode === 'file' || mode === 'corpus' || mode === 'table') {\n\t\t\t\toutputPromise = wrapper.cachedInput.getBlob();\n\t\t\t} else {\n\t\t\t\toutputPromise = wrapper.results.updateCachedOutput().then(function() {\n\t\t\t\t\treturn Ext.Promise.resolve(wrapper.getOutput());\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar notebook = wrapper.up('notebook');\n\t\t\tvar notebookId = notebook.getNotebookId() || 'spyral';\n\n\t\t\tvar dfd = new Ext.Deferred();\n\t\t\toutputPromise.then(function(output) {\n\t\t\t\tvar input = wrapper.getInput();\n\t\n\t\t\t\tvar corpusButton = this.exportWin.down('#corpus');\n\t\t\t\tvar openButton = this.exportWin.down('#open');\n\t\t\t\tcorpusButton.setHidden(true);\n\t\t\t\topenButton.setHidden(false);\n\n\t\t\t\tvar fileName;\n\t\t\t\tvar fileType;\n\t\t\t\tvar fileContent;\n\t\t\t\tif (mode === 'file' || mode === 'corpus') {\n\t\t\t\t\topenButton.setHidden(true);\n\t\t\t\t\tif (mode === 'file') {\n\t\t\t\t\t\tfileName = input.fileName;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfileName = 'SpyralCorpus-'+input.corpusId;\n\t\t\t\t\t}\n\t\t\t\t\tfileType = output.type;\n\t\t\t\t\tfileContent = output;\n\t\t\t\t} else if (mode === 'javascript' || mode === 'table') {\n\t\t\t\t\t// corpus check\n\t\t\t\t\tif (Spyral.Util.isObject(output) && output.hasOwnProperty('corpusid') && Spyral.Util.isString(output.corpusid)) {\n\t\t\t\t\t\tcorpusButton.setHidden(false);\n\t\t\t\t\t\tcorpusButton.setHandler(function(btn) {\n\t\t\t\t\t\t\tvar url = Voyant.application.getBaseUrlFull()+'?corpus='+output.corpusid;\n\t\t\t\t\t\t\twindow.open(url);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (Spyral.Util.isUndefined(output)) {\n\t\t\t\t\t\t// code output is either a document or hasn't been run yet\n\t\t\t\t\t\t// try getContent fallback\n\t\t\t\t\t\toutput = wrapper.getContent().output;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (Spyral.Util.isObject(output) || Spyral.Util.isArray(output)) {\n\t\t\t\t\t\tfileName = notebookId+'_'+wrapper.getCellId()+'.json';\n\t\t\t\t\t\tfileType = 'application/json';\n\t\t\t\t\t\tfileContent = JSON.stringify(output);\n\t\t\t\t\t} else if (Spyral.Util.isNode(output) || (Spyral.Util.isString(output) && output.match(/<\\/?\\w+.*?>/g) !== null)) {\n\t\t\t\t\t\tfileName = notebookId+'_'+wrapper.getCellId()+'.html';\n\t\t\t\t\t\tfileType = 'text/html';\n\t\t\t\t\t\tif (Spyral.Util.isString(output)) {\n\t\t\t\t\t\t\tfileContent = output;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfileContent = new XMLSerializer().serializeToString(output);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfileName = notebookId+'_'+wrapper.getCellId()+'.txt';\n\t\t\t\t\t\tfileType = 'text/plain';\n\t\t\t\t\t\tfileContent = output;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfileName = notebookId+'_'+wrapper.getDataName()+'.'+mode;\n\t\t\t\t\tfileType = 'text/'+mode;\n\t\t\t\t\tfileContent = input;\n\t\t\t\t\tif (mode === 'json') {\n\t\t\t\t\t\tfileType = 'application/json';\n\t\t\t\t\t} else if (mode === 'text') {\n\t\t\t\t\t\tfileName = notebookId+'_'+wrapper.getDataName()+'.txt';\n\t\t\t\t\t\tfileType = 'text/plain';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar file = new File([fileContent], fileName, {lastModified: new Date().getTime(), type: fileType});\n\t\n\t\t\t\tthis.exportWin.down('#open').setHandler(function(btn) {\n\t\t\t\t\tvar myWindow = window.open();\n\t\t\t\t\tmyWindow.document.write(fileContent);\n\t\t\t\t\tmyWindow.document.close();\n\t\t\t\t\tmyWindow.focus();\n\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t});\n\t\n\t\t\t\tthis.exportWin.addListener('show', function() {\n\t\t\t\t\tvar url = URL.createObjectURL(file);\n\t\t\t\t\tthis.exportWin.down('#download').getEl().set({\n\t\t\t\t\t\tdownload: fileName,\n\t\t\t\t\t\thref: url\n\t\t\t\t\t});\n\t\t\t\t}, this, { single: true });\n\n\t\t\t\tdfd.resolve(this.exportWin);\n\n\t\t\t}.bind(this), function(err) {\n\t\t\t\tdfd.reject(err);\n\t\t\t});\n\n\t\t\treturn dfd.promise;\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tExt.apply(config, {\n\t\t\ttext: this.localize('text'),\n\t\t\t// tooltip: this.localize('tip')\n\t\t})\n\t\tthis.callParent(arguments);\n\t},\n\tglyph: 'xf08e@FontAwesome',\n\thandler: function(cmp) {\n\t\tVoyant.notebook.editor.button.Export.getExportWindow(cmp).then(function(exportWin) {\n\t\t\texportWin.show();\n\t\t}, function(err) {\n\t\t\tExt.Msg.show({\n\t\t\t\ttitle: 'Export Error',\n\t\t\t\tmsg: 'There was an error exporting the cell contents.'+\"<br><pre style='color: red'>\"+err+\"</pre>\",\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.ERROR\n\t\t\t});\n\t\t});\n\t}\n});\n\nExt.define('Voyant.notebook.editor.button.ExportResults', {\n\textend: 'Ext.button.Button',\n\tmixins: ['Voyant.util.Localization'],\n\talias: 'widget.notebookwrapperexportresults',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttext: 'Export Results',\n\t\t}\n\t},\n\tglyph: 'xf08e@FontAwesome',\n\tconstructor: function(config) {\n\t\tconfig.tooltip = this.localize('text');\n\t\tthis.callParent(arguments);\n\t},\n\thandler: function(cmp) {\n\t\t// hack to get the export menu item so we can pass it to the export window function\n\t\t// TODO need a better way to do this\n\t\tvar exportMenuItem = Voyant.notebook.editor.EditorWrapper.toolbarLeft.down('notebookwrapperexport');\n\t\tVoyant.notebook.editor.button.Export.getExportWindow(exportMenuItem).then(function(exportWin) {\n\t\t\texportWin.show();\n\t\t}, function(err) {\n\t\t\tExt.Msg.show({\n\t\t\t\ttitle: 'Export Error',\n\t\t\t\tmsg: 'There was an error exporting the cell contents.'+\"<br><pre style='color: red'>\"+err+\"</pre>\",\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.ERROR\n\t\t\t});\n\t\t});\n\t}\n});","Ext.define(\"Voyant.notebook.editor.button.ExpandCollapse\", {\n\textend: \"Ext.menu.Item\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperexpandcollapse',\n\tstatics: {\n\t\ti18n: {\n\t\t\tcollapse: 'Collapse Editor',\n\t\t\texpand: 'Expand Editor'\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tconfig.text = this.localize('collapse');\n\t\tthis.callParent(arguments);\n\t},\n\tisCollapsed: false,\n\tglyph: 'xf066@FontAwesome',\n\thandler: function(btn, e) {\n\t\tvar ed = Voyant.notebook.editor.EditorWrapper.currentEditor;\n\t\tif (btn.isCollapsed) {\n\t\t\ted.expand();\n\t\t} else {\n\t\t\ted.collapse();\n\t\t}\n\t\tbtn.setCollapsed(!btn.isCollapsed);\n\t},\n\tsetCollapsed: function(isCollapsed) {\n\t\tthis.isCollapsed = isCollapsed;\n\t\tthis.setGlyph(isCollapsed ? 'xf065@FontAwesome' : 'xf066@FontAwesome');\n\t\tthis.setText(isCollapsed ? this.localize('expand') : this.localize('collapse'));\n\t\t// this.setTooltip(isCollapsed ? this.localize('expand') : this.localize('collapse'));\n\t}\n});\n\nExt.define(\"Voyant.notebook.editor.button.ExpandCollapseResults\", {\n\textend: 'Ext.button.Button',\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperexpandcollapseresults',\n\tstatics: {\n\t\ti18n: {\n\t\t\tcollapse: 'Collapse Results',\n\t\t\texpand: 'Expand Results'\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tconfig.tooltip = this.localize('collapse');\n\t\tthis.callParent(arguments);\n\t},\n\titemId: 'expandButton',\n\tisCollapsed: false,\n\tglyph: 'xf066@FontAwesome',\n\thandler: function(btn, e) {\n\t\tVoyant.notebook.editor.SandboxWrapper.currentResults._doExpandCollapse();\n\t},\n\tsetCollapsed: function(isCollapsed) {\n\t\tthis.isCollapsed = isCollapsed;\n\t\tthis.setGlyph(isCollapsed ? 'xf065@FontAwesome' : 'xf066@FontAwesome');\n\t\tthis.setTooltip(isCollapsed ? this.localize('expand') : this.localize('collapse'));\n\t}\n});\n","Ext.define(\"Voyant.notebook.editor.button.Counter\", {\n\textend: \"Ext.toolbar.TextItem\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrappercounter',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t\torder: 0,\n\t\tname: undefined\n\t},\n\tcls: 'notebookwrappercounter',\n\tconstructor: function(config) {\n    \tExt.apply(this, {\n    \t\ttoolTip: this.localize('tip')\n    \t})\n        this.callParent(arguments);\n\t},\n\tsetOrder: function(pos) {\n\t\tthis.callParent(arguments);\n\t\tthis.updateHtml();\n\t},\n\tupdateHtml: function() {\n\t\tvar pos = this.getOrder()+1;\n\t\tvar lnk = 'spyralcounter_'+pos;\n\t\tvar name = this.getName();\n\t\tthis.setHtml('<a name=\"'+name+'\" href=\"#'+name+'\">'+pos+'</a>');\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.MoveDown\", {\n\textend: \"Ext.menu.Item\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrappermovedown',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttext: 'Move Down'\n\t\t}\n\t},\n\tconstructor: function(config) {\n    \tExt.apply(this, {\n\t\t\ttext: this.localize('text'),\n    \t\t// tooltip: this.localize('tip')\n    \t})\n        this.callParent(arguments);\n\t},\n\tglyph: 'xf063@FontAwesome',\n\thandler: function(evt) {\n\t\tvar ed = Voyant.notebook.editor.EditorWrapper.currentEditor;\n\t\ted.findParentByType('notebook').fireEvent(\"notebookWrapperMoveDown\", ed);\n\t\tVoyant.notebook.editor.EditorWrapper.hideToolbars(evt, true);\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.MoveUp\", {\n\textend: \"Ext.menu.Item\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrappermoveup',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttext: 'Move Up'\n\t\t}\n\t},\n\tconstructor: function(config) {\n    \tExt.apply(this, {\n\t\t\ttext: this.localize('text'),\n    \t\t// tooltip: this.localize('tip')\n    \t})\n        this.callParent(arguments);\n\t},\n\tglyph: 'xf062@FontAwesome',\n\thandler: function(evt) {\n\t\tvar ed = Voyant.notebook.editor.EditorWrapper.currentEditor;\n\t\ted.findParentByType('notebook').fireEvent(\"notebookWrapperMoveUp\", ed);\n\t\tVoyant.notebook.editor.EditorWrapper.hideToolbars(evt, true);\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.Remove\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperremove',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttext: 'Remove'\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tExt.apply(this, {\n\t\t\ttooltip: this.localize('text')\n\t\t})\n\t\tthis.callParent(arguments);\n\t},\n\tglyph: 'xf014@FontAwesome',\n\thandler: function(evt) {\n\t\tvar ed = Voyant.notebook.editor.EditorWrapper.currentEditor;\n\t\tExt.Msg.show({\n\t\t\tbuttons: Ext.Msg.OKCANCEL,\n\t\t\ticon: Ext.MessageBox.QUESTION,\n\t\t\tmsg: this.localize(\"confirmRemove\"),\n\t\t\ttitle: this.localize(\"confirmRemoveTitle\"),\n\t\t\tfn: function(buttonId) {\n\t\t\t\tif (buttonId === 'ok') {\n\t\t\t\t\ted.findParentByType('notebook').fireEvent(\"notebookWrapperRemove\", ed);\n\t\t\t\t\tVoyant.notebook.editor.EditorWrapper.hideToolbars(evt, true);\n\t\t\t\t}\n\t\t\t},\n\t\t\tscope: this\n\t\t})\n\t}\n});\n\nExt.define(\"Voyant.notebook.editor.button.RemoveResults\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperremoveresults',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttext: 'Remove Results'\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tExt.apply(this, {\n\t\t\ttooltip: this.localize('text')\n\t\t})\n\t\tthis.callParent(arguments);\n\t},\n\tglyph: 'xf014@FontAwesome',\n\thandler: function(evt) {\n\t\tvar results = Voyant.notebook.editor.SandboxWrapper.currentResults;\n\t\tif (results) {\n\t\t\tresults.clear();\n\t\t\tresults.hide();\n\t\t\tVoyant.notebook.editor.SandboxWrapper.hideToolbar(true);\n\t\t} else {\n\t\t\tconsole.warn('no results!')\n\t\t}\n\t}\n});","Ext.define(\"Voyant.notebook.editor.button.Run\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperrun',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttext: 'Run'\n\t\t}\n\t},\n\tglyph: 'xf04b@FontAwesome',\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tconfig.tooltip = this.localize('tip');\n\t\t// config.text = this.localize('text');\n\t\tthis.callParent(arguments);\n\t},\n\thandler: function(btn, e) {\n\t\tvar ed = Voyant.notebook.editor.EditorWrapper.currentEditor;\n\t\ted.up('notebook')._run([ed]);\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.RunAll\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperrunall',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tglyph: 'xf04e@FontAwesome',\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tconfig.tooltip = this.localize('tip');\n\t\tthis.callParent(arguments);\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.RunUntil\", {\n\textend: \"Ext.menu.Item\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperrununtil',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttext: \"Run...\",\n\t\t\ttip: \"Run multiple cells\",\n\t\t\trunUntil: \"Run up to here\",\n\t\t\trunUntilTip: \"Run previous code cells and this one.\",\n\t\t\trunFrom: \"Run from here onwards\",\n\t\t\trunFromTip: \"Run this and following code cells.\"\n\t\t}\n\t},\n\tglyph: 'xf050@FontAwesome',\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tconfig.text = this.localize('text');\n\t\t// config.tooltip = this.localize('tip');\n\t\tconfig.menu = {\n\t\t\titems: [{\n\t\t\t\ttext: this.localize(\"runUntil\"),\n\t\t\t\t// tooltip: this.localize(\"runUntilTip\"),\n\t\t\t\tglyph: 'xf049@FontAwesome',\n\t\t\t\thandler: function() {\n\t\t\t\t\tvar ed = Voyant.notebook.editor.EditorWrapper.currentEditor;\n\t\t\t\t\ted.up('notebook').runUntil(ed);\n\t\t\t\t}\n\t\t\t},{\n\t\t\t\ttext: this.localize(\"runFrom\"),\n\t\t\t\t// tooltip: this.localize(\"runFromTip\"),\n\t\t\t\tglyph: 'xf050@FontAwesome',\n\t\t\t\thandler: function() {\n\t\t\t\t\tvar ed = Voyant.notebook.editor.EditorWrapper.currentEditor;\n\t\t\t\t\ted.up('notebook').runFrom(ed);\n\t\t\t\t}\n\t\t\t}]\n\t\t}\n\n\t\tthis.callParent(arguments);\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.Warning\", {\n\textend: 'Ext.button.Button',\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperwarning',\n\tstatics: {\n\t\ti18n: {\n\t\t\tviewWarnings: 'View Warning(s)',\n\t\t\tgeneralWarning: 'Warning: {warningInfo}',\n\t\t\tserializationWarning: 'The variable \"{warningInfo}\" cannot be passed between cells.',\n\t\t\tloadVariableWarning: 'The variable \"{warningInfo}\" could not be loaded.'\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tconfig.tooltip = this.localize('viewWarnings');\n\t\tthis.callParent(arguments);\n\t},\n\titemId: 'warnings',\n\tglyph: 'xf12a@FontAwesome',\n\tcomponentCls: 'warning',\n\thidden: true,\n\tconfig: {\n\t\twarnings: undefined\n\t},\n\thandler: function(btn) {\n\t\tvar warnings = btn.getWarnings();\n\t\tif (warnings !== undefined) {\n\t\t\tExt.Msg.show({\n\t\t\t\ttitle: 'Warning',\n\t\t\t\tmessage: warnings,\n\t\t\t\tbuttons: Ext.Msg.OK,\n\t\t\t\ticon: Ext.Msg.INFO\n\t\t\t});\n\t\t}\n\t},\n\tapplyWarnings: function(warningsArray) {\n\t\tif (warningsArray === undefined) {\n\t\t\tthis.hide();\n\t\t\treturn undefined;\n\t\t}\n\n\t\tvar warningsContent = [];\n\t\twarningsArray.forEach(function(warning) {\n\t\t\tswitch(warning.type) {\n\t\t\t\tcase 'serialization':\n\t\t\t\t\twarningsContent.push(this.localize('serializationWarning').replace('{warningInfo}', warning.warningInfo));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'loadVariable':\n\t\t\t\t\twarningsContent.push(this.localize('loadVariableWarning').replace('{warningInfo}', warning.warningInfo));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}, this);\n\n\t\tthis.show();\n\t\treturn '<p>'+warningsContent.join('</p><p>')+'</p>';\n\t}\n});\n","Ext.define(\"Voyant.notebook.editor.EditorWrapper\", {\n\textend: \"Ext.panel.Panel\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: \"widget.notebookeditorwrapper\",\n\tcls: \"notebook-editor-wrapper\",\n\tconfig: {\n\t\tcellId: undefined,\n\t\tindex: undefined,\n\t\tcontent: '',\n\t\tisEditing: false,\n\t\tisCollapsed: false // custom tracker instead of using Panel's collapsed, which causes due to our overrides\n\t},\n\tstatics: {\n\t\tcurrentEditor: undefined, // used primarily by toolbar buttons to determine the target of their actions\n\t\ttoolbarLeft: undefined,\n\t\ttoolbarRight: undefined,\n\t\tshowToolbars: function(editor) {\n\t\t\tVoyant.notebook.editor.EditorWrapper.currentEditor = editor;\n\t\t\tVoyant.notebook.editor.EditorWrapper.currentEditor.body.addCls('notebook-editor-wrapper-hover');\n\n\t\t\tif (Voyant.notebook.editor.EditorWrapper.toolbarLeft === undefined) {\n\t\t\t\tVoyant.notebook.editor.EditorWrapper.toolbarLeft = Ext.create('Ext.container.Container', {\n\t\t\t\t\tfloating: true, // TODO toolbars float above notebook header\n\t\t\t\t\tshadow: false,\n\t\t\t\t\tpreventRefocus: true, // prevents focusing on collapsed/blurred CodeEditor when hiding toolbar\n\t\t\t\t\tlayout: 'auto',\n\t\t\t\t\tdefaults: { margin: '0 0 3px 3px', cls: 'x-btn x-btn-default-toolbar-small', iconCls: 'x-btn-icon-el-default-toolbar-small' },\n\t\t\t\t\titems: [{\n\t\t\t\t\t\tstyle: {float: 'right'},\n\t\t\t\t\t\txtype: 'notebookwrapperrun',\n\t\t\t\t\t\titemId: 'notebookwrapperrun'\n\t\t\t\t\t},{\n\t\t\t\t\t\tstyle: {float: 'right'},\n\t\t\t\t\t\txtype: 'notebookwrapperadd',\n\t\t\t\t\t\titemId: 'notebookwrapperadd'\n\t\t\t\t\t},{\n\t\t\t\t\t\tstyle: {float: 'right', clear: 'both'},\n\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\tglyph: 'xf0c9@FontAwesome',\n\t\t\t\t\t\tarrowVisible: false,\n\t\t\t\t\t\tmenuAlign: 'tr-br?',\n\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\txtype: 'notebookwrapperrununtil',\n\t\t\t\t\t\t\t\titemId: 'notebookwrapperrununtil'\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\txtype: 'notebookcodeconfig',\n\t\t\t\t\t\t\t\titemId: 'notebookcodeconfig'\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\txtype: 'notebookwrapperexpandcollapse',\n\t\t\t\t\t\t\t\titemId: 'notebookwrapperexpandcollapse'\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\txtype: 'notebookwrapperexport',\n\t\t\t\t\t\t\t\titemId: 'notebookwrapperexport'\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\txtype: 'menuseparator', itemId: 'menuseparator'\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\ttext: 'Move',\n\t\t\t\t\t\t\t\tglyph: 'xf07d@FontAwesome',\n\t\t\t\t\t\t\t\titemId: 'notebookwrappermove',\n\t\t\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\t\t\txtype: 'notebookwrappermoveup'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\txtype: 'notebookwrappermovedown'\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\tshow: function(menu) {\n\t\t\t\t\t\t\t\t\tvar ed = Voyant.notebook.editor.EditorWrapper.currentEditor;\n\t\t\t\t\t\t\t\t\tmenu.down('#notebookwrapperexpandcollapse').setCollapsed(ed.getIsCollapsed());\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},{\n\t\t\t\t\t\tstyle: {float: 'left'},\n\t\t\t\t\t\txtype: 'notebookwrapperremove',\n\t\t\t\t\t\titemId: 'notebookwrapperremove'\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (Voyant.notebook.editor.EditorWrapper.toolbarRight === undefined) {\n\t\t\t\tVoyant.notebook.editor.EditorWrapper.toolbarRight = Ext.create('Ext.container.Container', {\n\t\t\t\t\tfloating: true,\n\t\t\t\t\tshadow: false,\n\t\t\t\t\tpreventRefocus: true,\n\t\t\t\t\tlayout: { type: 'vbox', align: 'middle', pack: 'start' },\n\t\t\t\t\tdefaults: { margin: '0 3px 3px 3px', cls: 'x-btn x-btn-default-toolbar-small', iconCls: 'x-btn-icon-el-default-toolbar-small' },\n\t\t\t\t\titems: [{\n\t\t\t\t\t\txtype: 'notebookwrappercounter'\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (Voyant.notebook.editor.EditorWrapper.toolbarLeft.down('menu').isVisible()) return; // don't change toolbars when menu is open\n\n\t\t\tvar showButtons = [];\n\t\t\tif (editor.xtype === 'notebookcodeeditorwrapper') {\n\t\t\t\tshowButtons = ['notebookwrapperadd', 'notebookwrapperrun', 'notebookwrapperrununtil', 'notebookcodeconfig', 'notebookwrapperexpandcollapse', 'notebookwrappermove', 'notebookwrapperremove', 'menuseparator'];\n\t\t\t} else if (editor.xtype === 'notebookdatawrapper') {\n\t\t\t\tshowButtons = ['notebookwrapperadd', 'notebookwrapperrun', 'notebookwrapperrununtil', 'notebookcodeconfig', 'notebookwrapperexport', 'notebookwrapperexpandcollapse', 'notebookwrappermove', 'notebookwrapperremove', 'menuseparator'];\n\t\t\t} else {\n\t\t\t\tshowButtons = ['notebookwrapperadd', 'notebookwrappermove', 'notebookwrapperremove'];\n\t\t\t}\n\t\t\tVoyant.notebook.editor.EditorWrapper.toolbarLeft.query('button, menuitem').forEach(function(button) {\n\t\t\t\tif (button.itemId) { button.setVisible(showButtons.indexOf(button.itemId) !== -1); }\n\t\t\t});\n\n\t\t\tif (editor.xtype === 'notebookrunnableeditorwrapper') {\n\t\t\t\tvar expandCollapseBtn = Voyant.notebook.editor.EditorWrapper.toolbarLeft.down('notebookwrapperexpandcollapse');\n\t\t\t\texpandCollapseBtn.setCollapsed(editor.editor.getIsCollapsed());\n\t\t\t}\n\n\t\t\tvar counter = Voyant.notebook.editor.EditorWrapper.toolbarRight.down('notebookwrappercounter');\n\t\t\tcounter.setName(editor.getCellId());\n\t\t\tcounter.setOrder(editor.getIndex());\n\n\t\t\tvar box = editor.body.getBox();\n\t\t\tVoyant.notebook.editor.EditorWrapper.toolbarLeft.showAt(box.x-58, box.y, false);\n\t\t\tVoyant.notebook.editor.EditorWrapper.toolbarRight.showAt(box.x+box.width, box.y, false);\n\t\t},\n\t\thideToolbars: function(evt, force) {\n\t\t\t// don't change toolbars when menu is open\n\t\t\tif (Voyant.notebook.editor.EditorWrapper.toolbarLeft.down('menu').isVisible()) return;\n\n\t\t\t// hide any open submenus\n\t\t\tVoyant.notebook.editor.EditorWrapper.toolbarLeft.query('menu menu').forEach(function(menu) { menu.setVisible(false); });\n\n\t\t\tif (Voyant.notebook.editor.EditorWrapper.currentEditor) {\n\t\t\t\tvar doHide = force ? true : false;\n\t\t\t\tif (!doHide) {\n\t\t\t\t\tif (evt.relatedTarget !== null) {\n\t\t\t\t\t\tvar isAncestor = Voyant.notebook.editor.EditorWrapper.toolbarLeft.getEl().isAncestor(evt.relatedTarget) || Voyant.notebook.editor.EditorWrapper.toolbarRight.getEl().isAncestor(evt.relatedTarget);\n\t\t\t\t\t\tdoHide = !isAncestor;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (doHide) {\n\t\t\t\t\tif (Voyant.notebook.editor.EditorWrapper.currentEditor.body) {\n\t\t\t\t\t\tVoyant.notebook.editor.EditorWrapper.currentEditor.body.removeCls('notebook-editor-wrapper-hover');\n\t\t\t\t\t}\n\t\t\t\t\tVoyant.notebook.editor.EditorWrapper.currentEditor = undefined;\n\n\t\t\t\t\tif (Voyant.notebook.editor.EditorWrapper.toolbarLeft !== undefined) {\n\t\t\t\t\t\tVoyant.notebook.editor.EditorWrapper.toolbarLeft.hide();\n\t\t\t\t\t}\n\t\t\t\t\tif (Voyant.notebook.editor.EditorWrapper.toolbarRight !== undefined) {\n\t\t\t\t\t\tVoyant.notebook.editor.EditorWrapper.toolbarRight.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tborder: false,\n\tbodyBorder: false,\n\tinitComponent: function() {\n\t\tthis.setCellId(this.config.cellId);\n\t\tthis.on(\"afterrender\", function(){\n\t\t\tthis.mon(this.getEl(), \"mouseover\", function(evt) {\n\t\t\t\tVoyant.notebook.editor.EditorWrapper.showToolbars(this);\n\t\t\t\tif (this.results && this.results.getY() < evt.getY()) {\n\t\t\t\t\tVoyant.notebook.editor.SandboxWrapper.showToolbar(this.results);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t\tthis.mon(this.getEl(), \"mouseleave\", function(evt) {\n\t\t\t\tVoyant.notebook.editor.EditorWrapper.hideToolbars(evt);\n\t\t\t\tif (this.results) {\n\t\t\t\t\tVoyant.notebook.editor.SandboxWrapper.hideToolbar(evt);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}, this);\n\t\tthis.callParent(arguments);\n\t},\n\tgetContent: function() {\n\t\tthrow new Error('Subclass must override!');\n\t},\n\tapplyIsEditing: function(val) {\n\t\tif (this.rendered) {\n\t\t\tif (val) {\n\t\t\t\tthis.body.addCls('notebook-editor-wrapper-editing');\n\t\t\t} else {\n\t\t\t\tthis.body.removeCls('notebook-editor-wrapper-editing');\n\t\t\t}\n\t\t}\n\t\treturn val;\n\t}\n})","Ext.define(\"Voyant.notebook.editor.RunnableEditorWrapper\", {\n\textend: \"Voyant.notebook.editor.EditorWrapper\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: \"widget.notebookrunnableeditorwrapper\",\n\tconfig: {\n\t\tisRun: false,\n\t\tmode: 'javascript'\n\t},\n\n\teditor: undefined,\n\tresults: undefined,\n\n\tconstructor: function(config) {\n\t\tthis.results.addListener('initialized', this.updateLayout, this);\n\n\t\tthis.callParent(arguments);\n\t},\n\n\t/**\n\t * Run the code in this editor.\n\t * @param {array} priorVariables Variables from prior cells that should be eval'd before this cell's code\n\t */\n\trun: function(priorVariables) {\n\t\tif (this.results.getIsInitialized()) {\n\t\t\tif (priorVariables === undefined) {\n\t\t\t\tconsole.log('fetching prior vars');\n\t\t\t\tpriorVariables = this.up('notebook').getNotebookVariables(this);\n\t\t\t}\n\t\t\treturn this._run(priorVariables);\n\t\t} else {\n\t\t\treturn Ext.Promise.reject('Editor is not initialized');\n\t\t}\n\t},\n\t\n\t_run: function(priorVariables) {\n\t\tthis.results.clear();\n\n\t\tthis.editor.clearMarkers();\n\n\t\tvar code = this.editor.getValue();\n\n\t\tthis.setIsRun(true);\n\t\t\n\t\tvar runPromise = this.results.run(code, priorVariables);\n\t\trunPromise.otherwise(function(eventData) {\n\t\t\tif (eventData.error !== undefined) {\n\t\t\t\tvar location = eventData.error.location;\n\t\t\t\tif (location !== undefined) {\n\t\t\t\t\tthis.editor.addMarker(location, 'error');\n\t\t\t\t\tthis.editor.addLineMarker(location, 'error');\n\t\t\t\t}\n\t\t\t}\n\t\t}, this);\n\n\t\treturn runPromise;\n\t},\n\t\n\tgetInput: function() {\n\t\treturn this.editor.getValue();\n\t},\n\n\tgetVariables: function() {\n\t\tif (this.results.getHasRunError()) {\n\t\t\treturn [];\n\t\t} else {\n\t\t\treturn this.results.getVariables();\n\t\t}\n\t},\n\n\tgetOutput: function() {\n\t\tif (this.results.getHasRunError()) {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\treturn this.results.getCachedResultsValue();\n\t\t}\n\t},\n\n\t_reduceDataViewerOutput: function(output) {\n\t\tvar html = new DOMParser().parseFromString(output, 'text/html');\n\t\t\n\t\tvar container = html.querySelector('.spyral-dv-container');\n\t\tif (container !== null) {\n\t\t\t// if dataviewer, trim the content that will be saved\n\t\t\tfunction trimContent(parent, limit) {\n\t\t\t\tvar content = parent.querySelector('.spyral-dv-content .spyral-dv-right');\n\t\t\t\tif (content !== null) {\n\t\t\t\t\tvar toRemove = [];\n\t\t\t\t\tvar wasTrimmed = false;\n\t\t\t\t\tfor (var i = 0; i < content.children.length; i++) {\n\t\t\t\t\t\tif (i >= limit) {\n\t\t\t\t\t\t\ttoRemove.push(content.children[i]);\n\t\t\t\t\t\t\twasTrimmed = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttrimContent(content.children[i], limit);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttoRemove.forEach(function(node) { content.removeChild(node); });\n\t\t\t\t\tif (wasTrimmed) {\n\t\t\t\t\t\tcontent.insertAdjacentHTML('beforeend', '<span class=\"spyral-dv-content\">...</span>')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\ttrimContent(container, 10);\n\n\t\t\tcontainer.classList.add('static'); // used by css to indicate it's not interactable\n\t\t\treturn container.outerHTML;\n\t\t} else {\n\t\t\treturn output;\n\t\t}\n\t},\n\n\t// override Ext.Panel expand/collapse\n\texpand: function() {\n\t\tthis.editor.expand();\n\t\tthis.setIsCollapsed(false);\n\t},\n\tcollapse: function() {\n\t\tthis.editor.collapse();\n\t\tthis.setIsCollapsed(true);\n\t},\n\n\t/**\n\t * This is a method for getting string versions of input and output content.\n\t * Primarily used when saving the notebook.\n\t * @returns {Object}\n\t */\n\tgetContent: function() {\n\t\tvar output = this._reduceDataViewerOutput(this.results.getOutput());\n\t\treturn {\n\t\t\tinput: this.getInput(),\n\t\t\toutput: output,\n\t\t\tmode: this.getMode(),\n\t\t\texpandResults: this.results.getExpandResults()\n\t\t};\n\t}\n});\n","Ext.define(\"Voyant.notebook.editor.SandboxWrapper\", {\n\textend: \"Ext.Container\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: \"widget.sandboxwrapper\",\n\tstatics: {\n\t\tcurrentResults: undefined, // used primarily by toolbar buttons to determine the target of their actions\n\t\ttoolbar: undefined,\n\t\tcreateToolbar: function() {\n\t\t\tif (Voyant.notebook.editor.SandboxWrapper.toolbar === undefined) {\n\t\t\t\tVoyant.notebook.editor.SandboxWrapper.toolbar = Ext.create('Ext.container.Container', {\n\t\t\t\t\tfloating: true, // TODO toolbars float above notebook header\n\t\t\t\t\tshadow: false,\n\t\t\t\t\tpreventRefocus: true, // prevents focusing on collapsed/blurred CodeEditor when hiding toolbar\n\t\t\t\t\tlayout: 'auto',\n\t\t\t\t\thidden: true,\n\t\t\t\t\tstyle: { borderTop: '1px solid #d8d8d8', paddingTop: '4px'},\n\t\t\t\t\tdefaults: { margin: '0 0 3px 3px', cls: 'x-btn x-btn-default-toolbar-small', iconCls: 'x-btn-icon-el-default-toolbar-small' },\n\t\t\t\t\titems: [{\n\t\t\t\t\t\tstyle: {float: 'right'},\n\t\t\t\t\t\txtype: 'notebookwrapperexportresults'\n\t\t\t\t\t},{\n\t\t\t\t\t\tstyle: {float: 'right'},\n\t\t\t\t\t\txtype: 'notebookwrapperexpandcollapseresults'\n\t\t\t\t\t},{\n\t\t\t\t\t\tstyle: {float: 'right', clear: 'both'},\n\t\t\t\t\t\txtype: 'notebookwrapperremoveresults'\n\t\t\t\t\t},{\n\t\t\t\t\t\tstyle: {float: 'right'},\n\t\t\t\t\t\txtype: 'notebookwrapperwarning'\n\t\t\t\t\t}],\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tboxready: function(cmp) {\n\t\t\t\t\t\t\tcmp.getEl().on('mouseleave', function(event, el) {\n\t\t\t\t\t\t\t\tVoyant.notebook.editor.SandboxWrapper.hideToolbar(event, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tshowToolbar: function(sandboxWrapper) {\n\t\t\tVoyant.notebook.editor.SandboxWrapper.currentResults = sandboxWrapper;\n\t\t\tvar isExpanded = sandboxWrapper.down('#expandWidget').hidden;\n\t\t\tVoyant.notebook.editor.SandboxWrapper.toolbar.down('#expandButton').setCollapsed(!isExpanded);\n\t\t\tvar box = sandboxWrapper.getBox();\n\t\t\tVoyant.notebook.editor.SandboxWrapper.toolbar.showAt(box.x-59, box.y+2, false);\n\t\t},\n\t\thideToolbar: function(evt, force) {\n\t\t\tvar doHide = force ? true : false;\n\t\t\tif (!doHide) {\n\t\t\t\tif (evt.relatedTarget !== null && Voyant.notebook.editor.SandboxWrapper.toolbar.rendered) {\n\t\t\t\t\tvar isAncestor = Voyant.notebook.editor.SandboxWrapper.toolbar.getEl().isAncestor(evt.relatedTarget) || Voyant.notebook.editor.SandboxWrapper.toolbar.getEl().isAncestor(evt.relatedTarget);\n\t\t\t\t\tdoHide = !isAncestor;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (doHide) {\n\t\t\t\tVoyant.notebook.editor.SandboxWrapper.toolbar.hide();\n\t\t\t}\n\t\t},\n\t\tsetWarnings: function(warnings) {\n\t\t\tVoyant.notebook.editor.SandboxWrapper.toolbar.down('#warnings').setWarnings(warnings);\n\t\t}\n\t},\n\n\tconfig: {\n\t\tisInitialized: false,\n\n\t\tcachedPaddingHeight: undefined,\n\t\tcachedResultsHeight: undefined,\n\t\tcachedResultsValue: undefined,\n\t\tcachedResultsOutput: '',\n\t\tcachedResultsVariables: [],\n\n\t\trunPromise: undefined,\n\t\thasRunError: false,\n\n\t\tinitIntervalID: undefined,\n\t\tmaskTimeoutId: undefined,\n\n\t\temptyResultsHeight: 40,\n\t\tminimumResultsHeight: 120,\n\n\t\texpandResults: true\n\t},\n\n\tconstructor: function(config) {\n\t\tconfig.expandResults = config.expandResults !== undefined ? config.expandResults : true;\n\t\tvar isExpanded = config.expandResults;\n\t\tvar sandboxSrcUrl = config.sandboxSrcUrl;\n\n\t\tExt.apply(this, {\n\t\t\titemId: 'parent',\n\t\t\tcls: 'notebook-code-results',\n\t\t\theight: this.getEmptyResultsHeight(),\n\t\t\tlayout: {\n\t\t\t\ttype: 'vbox',\n\t\t\t\talign: 'stretch'\n\t\t\t},\n\t\t\titems: [{\n\t\t\t\txtype: 'container',\n\t\t\t\tflex: 1,\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'absolute'\n\t\t\t\t},\n\t\t\t\titems: [{\n\t\t\t\t\txtype: 'uxiframe',\n\t\t\t\t\titemId: 'resultsFrame',\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0,\n\t\t\t\t\tanchor: '100%',\n\t\t\t\t\theight: '100%',\n\t\t\t\t\tsrc: sandboxSrcUrl,\n\t\t\t\t\trenderTpl: ['<iframe allow=\"midi; geolocation; microphone; camera; display-capture; encrypted-media;\" sandbox=\"allow-same-origin allow-scripts allow-modals allow-popups allow-forms allow-top-navigation-by-user-activation allow-downloads\" src=\"{src}\" id=\"{id}-iframeEl\" data-ref=\"iframeEl\" name=\"{frameName}\" width=\"100%\" height=\"100%\" frameborder=\"0\" style=\"min-height: 40px\"></iframe>']\n\t\t\t\t}]\n\t\t\t},{\n\t\t\t\txtype: 'component',\n\t\t\t\titemId: 'expandWidget',\n\t\t\t\theight: 20,\n\t\t\t\thidden: isExpanded ? true : false,\n\t\t\t\tstyle: {textAlign: 'center', fontSize: '26px', cursor: 'pointer', borderTop: '1px solid #DDD', color: '#000', backgroundColor: 'rgb(252, 252, 252)'},\n\t\t\t\thtml: '&#8943;',\n\t\t\t\tlisteners: {\n\t\t\t\t\tafterrender: function(cmp) {\n\t\t\t\t\t\tvar me = this;\n\t\t\t\t\t\tcmp.getEl().on('click', function() {\n\t\t\t\t\t\t\tme._doExpandCollapse();\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\n\t\tthis.callParent(arguments);\n\n\t\tVoyant.notebook.editor.SandboxWrapper.createToolbar();\n\t},\n\n\tinitComponent: function() {\n\t\tvar handleResultsScoped = this._handleResults.bind(this);\n\n\t\tthis.on('afterrender', function(cmp) {\n\t\t\tcmp.getEl().on('mouseover', function(event, el) {\n\t\t\t\tVoyant.notebook.editor.SandboxWrapper.showToolbar(this);\n\t\t\t}, this);\n\t\t\tcmp.getEl().on('mouseleave', function(event, el) {\n\t\t\t\tVoyant.notebook.editor.SandboxWrapper.hideToolbar(event);\n\t\t\t}, this);\n\n\t\t\twindow.addEventListener('message', handleResultsScoped);\n\n\t\t\tvar me = this;\n\t\t\tthis.setInitIntervalID(setInterval(function() {\n\t\t\t\tme._sendMessage({type: 'command', command: 'init'});\n\t\t\t}, 100));\n\t\t}, this);\n\n\t\tthis.on('removed', function() {\n\t\t\twindow.removeEventListener('message', handleResultsScoped);\n\t\t}, this);\n\n\t\tthis.callParent(arguments);\n\t},\n\n\tclear: function() {\n\t\tif (this.isVisible() === false) {\n\t\t\tconsole.log(\"clearing but not visible!\", this);\n\t\t\tthis.show();\n\t\t}\n\t\tVoyant.notebook.editor.SandboxWrapper.setWarnings(undefined);\n\t\tthis._sendMessage({type: 'command', command: 'clear'});\n\t},\n\n\tresetResults: function() {\n\t\tthis.setCachedResultsValue(undefined);\n\t\tthis.setCachedResultsOutput('');\n\t\tthis.setCachedResultsVariables([]);\n\t},\n\n\trun: function(code, priorVariables) {\n\t\tif (priorVariables === undefined) {\n\t\t\tpriorVariables = [];\n\t\t}\n\n\t\t// reset\n\t\t//this.resetResults(); // TODO review this vs setvisible\n\t\tVoyant.notebook.editor.SandboxWrapper.setWarnings(undefined);\n\t\tthis.show();\n\t\tthis.setHasRunError(false);\n\t\tthis.getEl().removeCls(['error','success','warning']);\n\n\t\tthis.setRunPromise(new Ext.Deferred());\n\n\t\tvar actualPromise = this.getRunPromise().promise;\n\t\tactualPromise.then(function(result) {\n\t\t\tif (result.warnings && result.warnings.length > 0) {\n\t\t\t\tVoyant.notebook.editor.SandboxWrapper.setWarnings(result.warnings);\n\t\t\t\tthis.getEl().addCls('warning');\n\t\t\t} else {\n\t\t\t\tthis.getEl().addCls('success');\n\t\t\t}\n\t\t}, function() {\n\t\t\tthis.setHasRunError(true);\n\t\t\tthis.getEl().addCls('error');\n\t\t}, undefined, this);\n\n\t\tthis.mask('Running code...');\n\n\t\t// console.log('sending vars', priorVariables);\n\t\tthis._sendMessage({type: 'code', value: code, variables: priorVariables});\n\n\t\treturn actualPromise;\n\t},\n\n\tmask: function(maskMsg) {\n\t\tvar me = this;\n\t\tthis.setMaskTimeoutId(setTimeout(function() {\n\t\t\tme.superclass.mask.call(me, maskMsg, 'spyral-code-mask');\n\t\t}, 250)); // only mask long running code\n\t},\n\n\tunmask: function() {\n\t\tclearTimeout(this.getMaskTimeoutId());\n\t\tthis.superclass.unmask.call(this);\n\t},\n\n\tupdateHtml: function(html) {\n\t\tthis._sendMessage({type: 'command', command: 'update', html: html});\n\t},\n\n\tupdateValue: function(name, value) {\n\t\tthis._sendMessage({type: 'command', command: 'update', name: name, value: value});\n\t},\n\n\tgetValue: function() {\n\t\treturn this.getCachedResultsValue();\n\t},\n\n\tupdateCachedOutput: function() {\n\t\tvar me = this;\n\t\treturn new Ext.Promise(function (resolve, reject) {\n\t\t\tme._sendMessage({type: 'command', command: 'getContents'});\n\t\t\tme.on('sandboxMessage', function(eventData) {\n\t\t\t\tif (eventData.command === 'getContents') {\n\t\t\t\t\tme.setCachedResultsOutput(eventData.value);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn('getOutput: received unexpected message',eventData);\n\t\t\t\t}\n\t\t\t\tresolve(me.getCachedResultsOutput());\n\t\t\t}, me, {single: true});\n\t\t});\n\t},\n\n\tgetOutput: function() {\n\t\treturn this.getCachedResultsOutput();\n\t},\n\n\tgetVariables: function() {\n\t\treturn this.getCachedResultsVariables();\n\t},\n\n\tapplyCachedResultsVariables: function(newVars, oldVars) {\n\t\tvar parentNotebook = this.up('notebook');\n\t\tif (parentNotebook) {\n\t\t\t// it isn't necessary to compare old and new vars since they all get removed prior to running in resetResults\n\t\t\t// var toRemove = oldVars.filter(function(oldVar) {\n\t\t\t// \treturn newVars.find(function(newVar) { return newVar.name === oldVar.name }) === undefined;\n\t\t\t// });\n\t\t\tparentNotebook.updateTernServerVariables(newVars, oldVars);\n\t\t}\n\t\treturn newVars;\n\t},\n\n\tgetResultsEl: function() {\n\t\tvar doc = this.down('#resultsFrame');\n\t\tif (doc) {\n\t\t\treturn doc;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\t_sendMessage: function(messageObj) {\n\t\tthis.down('#resultsFrame').getWin().postMessage(messageObj, '*');\n\t},\n\n\t_handleResults: function(e) {\n\t\tvar frame = this.down('#resultsFrame').getFrame();\n\t\tif (e.source === frame.contentWindow) {\n\t\t\tvar me = this;\n\t\t\tvar eventData = e.data;//JSON.parse(td.decode(ev.target.result));\n\t\t\tif (eventData.type) {\n\t\t\t\tswitch (eventData.type) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\tconsole.log('iframe error:', eventData);\n\t\t\t\t\t\tme.unmask();\n\t\t\t\t\t\tme.getRunPromise().reject(eventData);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'command':\n\t\t\t\t\t\t// console.log('iframe command:', eventData);\n\t\t\t\t\t\tswitch (eventData.command) {\n\t\t\t\t\t\t\tcase 'init':\n\t\t\t\t\t\t\t\tif (me.getIsInitialized() === false) {\n\t\t\t\t\t\t\t\t\tme.setIsInitialized(true);\n\t\t\t\t\t\t\t\t\tclearInterval(me.getInitIntervalID());\n\t\t\t\t\t\t\t\t\tme.fireEvent('initialized', me);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'clear':\n\t\t\t\t\t\t\t\tme._setHeight(0);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'result':\n\t\t\t\t\t\tconsole.log('iframe result:', eventData);\n\t\t\t\t\t\tme.unmask();\n\t\t\t\t\t\tme.getRunPromise().resolve(eventData);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (eventData.command !== 'getContents' &&  // don't overwrite value or variables when we just want to get sandbox contents, i.e. dom output\n\t\t\t\t\teventData.command !== 'clear') { // don't wipe variables just because results were cleared TODO review\n\t\t\t\t\tif (eventData.value) {\n\t\t\t\t\t\tme.setCachedResultsValue(eventData.value);\n\t\t\t\t\t}\n\t\t\t\t\tme.setCachedResultsVariables(eventData.variables);\n\t\t\t\t}\n\n\t\t\t\tif (eventData.output) {\n\t\t\t\t\tme.setCachedResultsOutput(eventData.output);\n\t\t\t\t}\n\n\t\t\t\tif (eventData.height > 0) {\n\t\t\t\t\tme._setHeight(eventData.height);\n\t\t\t\t}\n\n\t\t\t\tme.fireEvent('sandboxMessage', eventData);\n\t\t\t} else {\n\t\t\t\tconsole.warn('unrecognized message!', e);\n\t\t\t}\n\t\t}\n\t},\n\n\t_doExpandCollapse: function() {\n\t\tvar expandButton = Voyant.notebook.editor.SandboxWrapper.toolbar.down('#expandButton');\n\t\tif (this.getExpandResults()) {\n\t\t\tthis.setExpandResults(false);\n\t\t\texpandButton.setCollapsed(true);\n\t\t} else {\n\t\t\tthis.setExpandResults(true);\n\t\t\texpandButton.setCollapsed(false);\n\t\t}\n\t\t\n\t\tthis._setHeight();\n\t},\n\t\n\t/**\n\t * Set the height of the results component\n\t */\n\t_setHeight: function(height) {\n\t\tif (this.getCachedPaddingHeight() === undefined) {\n\t\t\t// compute and store parent padding, which we'll need when determining proper height\n\t\t\tvar computedStyle = window.getComputedStyle(this.getEl().dom);\n\t\t\tthis.setCachedPaddingHeight(parseFloat(computedStyle.getPropertyValue('padding-top'))+parseFloat(computedStyle.getPropertyValue('padding-bottom')) + 2); // extra 2 for border\n\t\t}\n\t\tif (height !== undefined) {\n\t\t\t// cache height\n\t\t\tthis.setCachedResultsHeight(height);\n\t\t} else {\n\t\t\theight = this.getCachedResultsHeight();\n\t\t\tif (height === undefined) {\n\t\t\t\tvar resultsEl = this.getResultsEl();\n\t\t\t\tif (resultsEl) {\n\t\t\t\t\theight = resultsEl.getHeight();\n\t\t\t\t} else {\n\t\t\t\t\theight = this.getEmptyResultsHeight();\n\t\t\t\t}\n\t\t\t\tthis.setCachedResultsHeight(height);\n\t\t\t}\n\t\t}\n\t\theight += this.getCachedPaddingHeight();\n\n\t\tvar resultsEl = this.getResultsEl();\n\t\tif (resultsEl) {\n\t\t\tvar expandWidget = this.down('#expandWidget');\n\t\t\tif (this.getExpandResults()) {\n\t\t\t\texpandWidget.hide();\n\t\t\t\theight = Math.max(height, this.getEmptyResultsHeight());\n\t\t\t\t// resultsEl.removeCls('collapsed');\n\t\t\t} else {\n\t\t\t\theight = Math.min(Math.max(height, this.getEmptyResultsHeight()), this.getMinimumResultsHeight());\n\t\t\t\tif (height < this.getMinimumResultsHeight()) {\n\t\t\t\t\texpandWidget.hide();\n\t\t\t\t} else {\n\t\t\t\t\texpandWidget.show();\n\t\t\t\t}\n\t\t\t\t// resultsEl.addCls('collapsed');\n\t\t\t}\n\t\t\tthis.setHeight(height);\n\t\t\tthis.down('#resultsFrame').setHeight(height); // need to explicitly set iframe height (for firefox)\n\t\t}\n\n\t\t// this.fireEvent('sizeChanged', this);\n\t}\n});\n","Ext.define(\"Voyant.notebook.editor.CodeEditor\", {\n\textend: \"Ext.Component\",\n\talias: \"widget.notebookcodeeditor\", \n\tmixins: [\"Voyant.util.Localization\"],\n\tcls: 'notebook-code-editor',\n\tconfig: {\n\t\t// theme: 'ace/theme/chrome',\n\t\tmode: 'javascript',\n\t\tcontent: '',\n\t\tdocs: undefined,\n\t\tisChangeRegistered: false,\n\t\teditor: undefined,\n\t\teditedTimeout: undefined,\n\t\teditorHeight: undefined,\n\t\teditorDocHeight: undefined,\n\t\tmarkers: [],\n\t\tparentWrapper: undefined,\n\t\tisCollapsed: false\n\t},\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tcontent: undefined\n\t\t},\n\t\tternServer: undefined\n\t},\n\n\tMIN_LINES: 2,\n\n\tconstructor: function(config) {\n\t\tthis.callParent(arguments);\n\t},\n\tlisteners: {\n\t\trender: function() {\n\t\t\tvar me = this;\n\t\t\tvar editorTarget = Ext.getDom(this.getEl());\n\t\t\tvar editor = CodeMirror(editorTarget, {\n\t\t\t\tmode: this._getModeConfig(this.getMode()),\n\t\t\t\tvalue: this.getContent(),\n\t\t\t\tlineNumbers: true,\n\t\t\t\tlineWrapping: true,\n\t\t\t\tstyleActiveLine: true,\n\t\t\t\tviewportMargin: 50, // lines rendered above and below current view\n\t\t\t\textraKeys: {\n\t\t\t\t\t'Shift-Enter': function() {\n\t\t\t\t\t\tme.up('notebookrunnableeditorwrapper').run();\n\t\t\t\t\t},\n\t\t\t\t\t'Shift-Ctrl-Enter': function() {\n\t\t\t\t\t\tvar wrapper = me.up('notebookrunnableeditorwrapper');\n\t\t\t\t\t\twrapper.up('notebook').runUntil(wrapper);\n\t\t\t\t\t},\n\t\t\t\t\t'Shift-Cmd-Enter': function() {\n\t\t\t\t\t\tvar wrapper = me.up('notebookrunnableeditorwrapper');\n\t\t\t\t\t\twrapper.up('notebook').runUntil(wrapper);\n\t\t\t\t\t},\n\t\t\t\t\t'Ctrl-/': function() {\n\t\t\t\t\t\teditor.toggleComment();\n\t\t\t\t\t},\n\t\t\t\t\t'Cmd-/': function() {\n\t\t\t\t\t\teditor.toggleComment();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\teditor.on('focus', function(editor, ev) {\n\t\t\t\tme.getParentWrapper().setIsEditing(true);\n\t\t\t});\n\t\t\teditor.on('blur', function(editor, ev) {\n\t\t\t\tme.getParentWrapper().setIsEditing(false);\n\t\t\t});\n\n\t\t\teditor.on('change', function(editor, ev) {\n\t\t\t\tme.clearMarkers();\n\t\t\t\t\n\t\t\t\tvar editorHeight = editor.getWrapperElement().offsetHeight;\n\t\t\t\tvar editorDocHeight = editor.getDoc().height;\n\t\t\t\tif (editorHeight !== me.getEditorHeight() || editorDocHeight !== me.getEditorDocHeight()) {\n\t\t\t\t\tme.setEditorHeight(editorHeight);\n\t\t\t\t\tme.setEditorDocHeight(editorDocHeight);\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tvar height = editor.getWrapperElement().offsetHeight;\n\t\t\t\t\t\tme.setSize({height: height});\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\n\t\t\t\tif (me.getIsChangeRegistered() === false) {\n\t\t\t\t\tme.setIsChangeRegistered(true);\n\t\t\t\t\tvar wrapper = me.up('notebookrunnableeditorwrapper');\n\t\t\t\t\twrapper.setIsRun(false);\n\t\t\t\t\twrapper.up('notebook').setIsEdited(true);\n\t\t\t\t} else {\n\t\t\t\t\tif (!me.getEditedTimeout()) { // no timeout, so set it to 30 seconds\n\t\t\t\t\t\tme.setEditedTimeout(setTimeout(function() {\n\t\t\t\t\t\t\tme.setIsChangeRegistered(false);\n\t\t\t\t\t\t}, 30000));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (this.getMode() === 'javascript') {\n\t\t\t\tif (Voyant.notebook.editor.CodeEditor.ternServer === undefined) {\n\t\t\t\t\tvar defs = this.getDocs();\n\t\t\t\t\tvar url = Voyant.application.getBaseUrlFull();\n\t\t\t\t\tVoyant.notebook.editor.CodeEditor.ternServer = new CodeMirror.TernServer({\n\t\t\t\t\t\tdefs: defs,\n\t\t\t\t\t\tuseWorker: true,\n\t\t\t\t\t\tworkerScript: url+'resources/spyral/tern/worker.js',\n\t\t\t\t\t\tworkerDeps: ['tern_worker_deps.js'],\n\t\t\t\t\t\thintDelay: 5000\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\teditor.on('keypress', function(ed, event) {\n\t\t\t\t\tif (event.key === '.') {\n\t\t\t\t\t\tVoyant.notebook.editor.CodeEditor.ternServer.complete(ed);\n\t\t\t\t\t} else if (event.key === '{' || event.key === ',') {\n\t\t\t\t\t\t// many Spyral methods take a single config object\n\t\t\t\t\t\t// so look out for that and display config object properties\n\t\t\t\t\t\tvar cursor = ed.getCursor();\n\t\t\t\t\t\tvar range = ed.getRange({line: cursor.line, ch: 0}, cursor);\n\t\t\t\t\t\tif (range.match(/\\(\\s*$/)) {\n\t\t\t\t\t\t\t// let closebrackets addon finish and then look for matches\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\tVoyant.notebook.editor.CodeEditor.ternServer.complete(ed);\n\t\t\t\t\t\t\t}, 50);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// special handling for corpus tools params\n\t\t\t\t\t\t\tvar toolNameCheck = range.match(/\\.tool\\(\\s*['\"]{1}(\\w+)['\"]{1}\\s*,\\s*/);\n\t\t\t\t\t\t\tif (toolNameCheck !== null) {\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\tvar toolName = toolNameCheck[1];\n\t\t\t\t\t\t\t\t\tvar notebook = me.up('notebook');\n\t\t\t\t\t\t\t\t\tvar toolEntry = notebook.toolTernDocs[toolName];\n\t\t\t\t\t\t\t\t\tif (toolEntry) {\n\t\t\t\t\t\t\t\t\t\tVoyant.notebook.editor.CodeEditor.ternServer.showCorpusToolParamsHint(ed, toolEntry.params);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, 50);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (event.key === \"'\" || event.key === '\"') {\n\t\t\t\t\t\t// special handling for corpus tools names\n\t\t\t\t\t\tvar cursor = ed.getCursor();\n\t\t\t\t\t\tvar range = ed.getRange({line: cursor.line, ch: 0}, cursor);\n\t\t\t\t\t\tvar corpusToolFnCheck = range.match(/\\.tool\\(\\s*$/);\n\t\t\t\t\t\tif (corpusToolFnCheck !== null) {\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\tvar notebook = me.up('notebook');\n\t\t\t\t\t\t\t\tvar toolDescs = Object.keys(notebook.toolTernDocs)\n\t\t\t\t\t\t\t\t\t.filter(function(key) { return key.charAt(0) !== '!'})\n\t\t\t\t\t\t\t\t\t.map(function(key) { return [key, notebook.toolTernDocs[key].doc] });\n\t\t\t\t\t\t\t\tVoyant.notebook.editor.CodeEditor.ternServer.showCorpusToolsHint(ed, toolDescs);\n\t\t\t\t\t\t\t}, 50);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tObject.assign(editor.getOption('extraKeys'), {\n\t\t\t\t\t'Ctrl-Space': function(ed) { Voyant.notebook.editor.CodeEditor.ternServer.complete(ed); },\n\t\t\t\t\t'Ctrl-D': function(ed) { Voyant.notebook.editor.CodeEditor.ternServer.showDocs(ed, undefined, me._showDocsCallback.bind(me)); },\n\t\t\t\t\t'Cmd-Space': function(ed) { Voyant.notebook.editor.CodeEditor.ternServer.complete(ed); },\n\t\t\t\t\t'Cmd-D': function(ed) { Voyant.notebook.editor.CodeEditor.ternServer.showDocs(ed, undefined, me._showDocsCallback.bind(me)); }\n\t\t\t\t});\n\t\t\t\teditor.on('cursorActivity', function(ed) { Voyant.notebook.editor.CodeEditor.ternServer.updateArgHints(ed); });\n\t\t\t}\n\n\t\t\tthis.setEditor(editor);\n\n\t\t\tthis._setModeOptions(this.getMode());\n\n\t\t\tthis.expand();\n\n\t\t\tme.fireEvent('resize', me);\n\n\t\t},\n\t\tremoved: function(cmp, container) {\n\t\t\tif (cmp.getEditor()) {\n\t\t\t\tcmp.setEditor(undefined);\n\t\t\t}\n\t\t}\n\t\t\n\t},\n\n\tgetHintForTool: function(toolName, cm, self, data) {\n\t\t\n\t},\n\n\t_getModeConfig: function(mode) {\n\t\tvar modeConfig = undefined;\n\t\tswitch (mode) {\n\t\t\tcase 'json':\n\t\t\t\tmodeConfig = { name: 'javascript', json: true };\n\t\t\t\tbreak;\n\t\t\tcase 'xml':\n\t\t\t\tmodeConfig = 'xml';\n\t\t\t\tbreak;\n\t\t\tcase 'table':\n\t\t\t\tmodeConfig = 'table'\n\t\t\t\tbreak;\n\t\t\tcase 'html':\n\t\t\t\tmodeConfig = { name: 'xml', htmlMode: true }\n\t\t\tdefault:\n\t\t\t\tmodeConfig = 'javascript';\n\t\t}\n\t\treturn modeConfig;\n\t},\n\n\t_setModeOptions: function(mode) {\n\t\tvar options = {};\n\t\tswitch (mode) {\n\t\t\tcase 'json':\n\t\t\tcase 'javascript':\n\t\t\t\toptions.autoCloseBrackets = true;\n\t\t\t\toptions.matchBrackets = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\toptions.autoCloseBrackets = false;\n\t\t\t\toptions.matchBrackets = false;\n\t\t\t\tbreak;\n\t\t}\n\t\tfor (var key in options) {\n\t\t\tthis.getEditor().setOption(key, options[key]);\n\t\t}\n\t},\n\t\n\tswitchModes: function(mode) {\n\t\tconsole.log('mode', mode);\n\t\tthis.setMode(mode);\n\t\tif (this.rendered) {\n\t\t\tthis.getEditor().setOption('mode', this._getModeConfig(mode));\n\t\t\tthis._setModeOptions(mode);\n\t\t}\n\t},\n\t\n\tgetValue: function() {\n\t\treturn this.getEditor().getValue();\n\t},\n\n\taddMarker: function(location, type) {\n\t\ttype = type === undefined ? 'error' : type;\n\t\tvar cls = 'spyral-editor-'+type;\n\t\tvar row = location[0];\n\t\tvar col = location[1];\n\t\tcol--;\n\t\trow--;\n\t\tvar marker = this.getEditor().getDoc().markText(\n\t\t\t{line: row, ch: col},\n\t\t\t{line: row, ch: col+1},\n\t\t\t{className: cls}\n\t\t);\n\t\tthis.getMarkers().push(marker);\n\t},\n\n\taddLineMarker: function(location, type) {\n\t\ttype = type === undefined ? 'error' : type;\n\t\tvar cls = 'spyral-editor-'+type;\n\t\tvar row = location[0];\n\t\trow--;\n\t\tvar marker = this.getEditor().getDoc().addLineClass(row, 'gutter', cls);\n\t\tthis.getMarkers().push({marker: marker, where: 'gutter', cls: cls});\n\t},\n\n\tclearMarkers: function() {\n\t\tvar editor = this.getEditor();\n\t\tvar markers = this.getMarkers();\n\t\tmarkers.forEach(function(marker) {\n\t\t\tif (marker.marker) {\n\t\t\t\teditor.getDoc().removeLineClass(marker.marker, marker.where, marker.cls);\n\t\t\t} else {\n\t\t\t\tmarker.clear();\n\t\t\t}\n\t\t});\n\t\tthis.setMarkers([]);\n\t},\n\n\t_showDocsCallback: function() {\n\t\tvar toolTipEl = this.getEditor().state.ternTooltip;\n\t\tvar docLink = toolTipEl.querySelector('a');\n\t\tif (docLink) {\n\t\t\tdocLink.addEventListener('click', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tvar docHref = docLink.getAttribute('href');\n\t\t\t\tthis.up('notebook').handleDocLink(docHref);\n\t\t\t}.bind(this));\n\t\t}\n\t},\n\n\texpand: function() {\n\t\tvar editor = this.getEditor();\n\t\tvar minHeight = ((this.MIN_LINES+1) * editor.defaultTextHeight()) + 'px';\n\n\t\tvar editorWrapperEl = editor.getWrapperElement();\n\t\teditorWrapperEl.style.setProperty('min-height', minHeight);\n\t\teditor.getScrollerElement().style.setProperty('min-height', minHeight);\n\t\teditor.setSize(null, 'auto');\n\n\t\tExt.fly(editorWrapperEl).unmask();\n\n\t\tthis.setSize({height: editor.getWrapperElement().offsetHeight});\n\n\t\tthis.setIsCollapsed(false);\n\t},\n\n\tcollapse: function() {\n\t\tvar editor = this.getEditor();\n\t\tvar height = editor.defaultTextHeight()+8;\n\n\t\tvar editorWrapperEl = editor.getWrapperElement();\n\t\teditorWrapperEl.style.removeProperty('min-height');\n\t\teditor.getScrollerElement().style.removeProperty('min-height');\n\t\teditor.setSize(null, height);\n\t\teditorWrapperEl.querySelector('.CodeMirror-vscrollbar').style.setProperty('display', 'none');\n\n\t\tvar mask = Ext.fly(editorWrapperEl).mask();\n\t\tmask.setStyle({cursor: 'pointer', background: 'none'});\n\t\tmask.down('.x-mask-msg').hide();\n\t\tmask.on('click', function(evt) {\n\t\t\tthis.up('notebookrunnableeditorwrapper').expand();\n\t\t\tthis.getEditor().focus();\n\t\t}.bind(this))\n\n\t\tthis.setSize({height: editor.getWrapperElement().offsetHeight});\n\n\t\tthis.setIsCollapsed(true);\n\t\t\n\t\tsetTimeout(function() {\n\t\t\teditor.display.input.blur();\n\t\t}, 0);\n\t}\n})","Ext.define(\"Voyant.notebook.editor.CodeEditorWrapper\", {\n\textend: \"Voyant.notebook.editor.RunnableEditorWrapper\",\n\trequires: [\"Voyant.notebook.editor.CodeEditor\",\"Voyant.notebook.editor.button.Run\",\"Voyant.notebook.editor.button.RunAll\"],\n\talias: \"widget.notebookcodeeditorwrapper\",\n\tcls: 'notebook-code-wrapper',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\n\tconstructor: function(config) {\n\t\tconfig.mode = 'javascript';\n\n\t\tthis.editor = Ext.create(\"Voyant.notebook.editor.CodeEditor\", {\n\t\t\tcontent: Ext.Array.from(config.input).join(\"\\n\"),\n\t\t\tdocs: config.docs,\n\t\t\tmode: config.mode,\n\t\t\tparentWrapper: this\n\t\t});\n\n\t\tvar hideResults = !config.output || config.output.indexOf('>undefined<') !== -1;\n\n\t\tthis.results = Ext.create('Voyant.notebook.editor.SandboxWrapper', {\n\t\t\tsandboxSrcUrl: Spyral.Load.baseUrl+'spyral/sandbox.jsp', // 'https://beta.voyant-tools.org/spyral/sandbox.jsp',\n\t\t\texpandResults: config.expandResults,\n\t\t\thidden: hideResults,\n\t\t\tlisteners: {\n\t\t\t\tinitialized: function() {\n\t\t\t\t\t// pass along initialized\n\t\t\t\t\tthis.fireEvent('initialized', this);\n\n\t\t\t\t\tif (config.output !== undefined) {\n\t\t\t\t\t\tthis.results.updateHtml(config.output);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\n\t\tExt.apply(this, {\n\t\t\tborder: false,\n\t\t\tlayout: 'anchor',\n\t\t\tdefaults: { anchor: '100%' },\n\t\t\titems: [this.editor, this.results]\n\t\t});\n\t\t\n\t\tthis.callParent(arguments);\n\t},\n\t\n\tswitchModes: function(mode) {\n\t\tif (mode !== 'javascript') {\n\t\t\tvar notebook = this.up('notebook');\n\t\t\tnotebook.addData('', this.getIndex(), undefined, {mode: mode});\n\t\t\tnotebook.notebookWrapperRemove(this);\n\t\t} else {\n\t\t\tconsole.log('unhandled mode switch:',mode);\n\t\t}\n\t}\n})","Ext.define('Voyant.notebook.editor.TextEditor', {\n\textend: 'Ext.Component',\n\tmixins: ['Voyant.util.Localization'],\n\talias: 'widget.notebooktexteditor',\n\tcls: 'notebook-text-editor',\n\tconfig: {\n\t\teditor: undefined,\n\t\tisEditRegistered: false,\n\t\tcurrentHeight: 0,\n\t\tisFresh: undefined,\n\t\tparentWrapper: undefined\n\t},\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tborder: false,\n\tconstructor: function(config) {\n\t\tconfig.isFresh = config.content ? false : true;\n\t\tExt.apply(this, {\n\t\t\thtml: config.content ? config.content : '<p style=\"text-align: center;\">'+this.localize('emptyText')+'</p>'\n\t\t});\n        this.callParent(arguments);\n\t},\n\tlisteners: {\n\t\tboxready: function(cmp) {\n\t\t\tthis.ownerCt.getTargetEl().on('click', function(e, t) {\n\t\t\t\tif (t.tagName !== 'A') {\n\t\t\t\t\tthis._handleClick();\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\t\tremoved: function(cmp, container) {\n\t\t\t// properly remove editor\n\t\t\tif (this.getEditor()) {\n\t\t\t\tthis.getEditor().focusManager.blur(true); //focusManager bug workaround, see: https://dev.ckeditor.com/ticket/16825\n\t\t\t\tthis.getEditor().destroy();\n\t\t\t}\n\t\t}\n\t},\n\t\n\t_handleClick: function() {\n\t\tif (this.getEditor() === undefined) {\n\t\t\tthis._initEditor();\n\t\t} else {\n\t\t\tif (this.getParentWrapper().getIsEditing() === false) {\n\t\t\t\tthis._enable();\n\t\t\t}\n\t\t}\n\t},\n\t\n\tgetContent: function() {\n\t\treturn this.getTargetEl().dom.innerHTML;\n\t},\n\n\t_initEditor: function() {\n\t\tvar el = this.getTargetEl();\n\t\tvar editor = CKEDITOR.inline(el.dom, {\n\t\t\ttoolbar: [\n\t\t\t\t{ name: 'basicstyles', items: [ 'Bold', 'Italic', '-', 'RemoveFormat' ] },\n\t\t\t\t{ name: 'paragraph', items: [ 'NumberedList', 'BulletedList', '-', 'Justify', 'Outdent', 'Indent', 'Blockquote', 'JustifyLeft', 'JustifyCenter', 'JustifyRight' ] },\n\t\t\t\t{ name: 'styles', items: [ 'Styles', 'Format' ] },\n\t\t\t\t{ name: 'links', items: [ 'Link', 'Unlink', 'Anchor' ] },\n\t\t\t\t{ name: 'insert', items: [ 'Image', 'Table' ] },\n\t\t\t\t{ name: 'document', items: [ 'Sourcedialog' ] }\n\t\t\t],\n\t\t\t\n\t\t\textraPlugins: 'sourcedialog,justify',\n\t\t\tallowedContent: true,\n\t\t\tdisableNativeSpellChecker: false,\n\t\t\ttoolbarCanCollapse: false,\n\t\t\tstartupFocus: 'end',\n\t\t\tbaseFloatZIndex: 20000 // EditorWrapper toolbars are 19000\n\t\t});\n\t\t\n\t\teditor.on('contentDom', function() {\n\t\t\tthis._enable();\n\t\t\tvar editable = editor.editable();\n\t\t\teditable.attachListener(editable, 'click', function(evt) {\n\t\t\t\t// prevent further listeners from firing, esp. the one that prevents links from working ( https://stackoverflow.com/a/45616460 )\n\t\t\t\tevt.stop();\n\t\t\t}, null, null, 0); // zero (i.e. very high) priority\n\t\t}, this);\n\n\t\teditor.on('focus', function(evt) {\n\t\t\tif (this.getIsFresh()) {\n\t\t\t\tthis.setIsFresh(false);\n\t\t\t\teditor.setData('<p></p>'); // insert paragraphs because otherwise ckeditor will do it automatically\n\t\t\t}\n\t\t}, this);\n\t\t\n\t\teditor.on('blur', function(evt) {\n\t\t\tthis._disable();\n\t\t}, this);\n\n\t\teditor.on('change', function() {\n\t\t\t// editor.container.$.scrollIntoView(); // needed to counteract range.scrollIntoView by ckeditor, but causes jumps if text editor is taller than the viewport\n\t\t\tvar editorHeight = editor.container.$.clientHeight;\n\t\t\tif (editorHeight !== this.getCurrentHeight()) {\n\t\t\t\tthis.findParentByType('notebookeditorwrapper').setHeight(editorHeight);\n\t\t\t\tthis.setCurrentHeight(editor.container.$.clientHeight)\n\t\t\t}\n\t\t\tif (!this.getIsEditRegistered()) {\n\t\t\t\tthis.findParentByType('notebook').setIsEdited(true);\n\t\t\t\tthis.setIsEditRegistered(true);\n\n\t\t\t} else {\n\t\t\t\tvar me = this; // make sure to allow edits to be auto-saved every 30 seconds\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tme.setIsEditRegistered(false);\n\t\t\t\t}, 30000);\n\t\t\t}\n\t\t}, this);\n\n\t\tthis.setEditor(editor);\n\t},\n\n\t_enable: function() {\n\t\tvar editor = this.getEditor();\n\t\teditor.setReadOnly(false);\n\n\t\t// need timeout before focusing otherwise FF throws error\n\t\tsetTimeout(function() {\n\t\t\teditor.focus();\n\t\t\tthis.getParentWrapper().setIsEditing(true);\n\t\t}.bind(this), 0);\n\t},\n\n\t_disable: function() {\n\t\tthis.getEditor().setReadOnly(true);\n\t\tthis.getParentWrapper().setIsEditing(false);\n\t}\n})","Ext.define(\"Voyant.notebook.editor.TextEditorWrapper\", {\n\textend: \"Voyant.notebook.editor.EditorWrapper\",\n\trequires: [\"Voyant.notebook.editor.TextEditor\"],\n\talias: \"widget.notebooktexteditorwrapper\",\n\tcls: 'notebook-text-wrapper',\n\tconfig: {\n\t},\n\tminHeight: 50,\n\tconstructor: function(config) {\n\t\tExt.apply(this, {\n\t\t\titems: [{\n\t\t\t\txtype: 'notebooktexteditor',\n\t\t\t\tcontent: Ext.Array.from(config.input).join(\"\"),\n\t\t\t\tparentWrapper: this\n\t\t\t}]\n\t\t});\n        this.callParent(arguments);\n\t},\n\t\n\tgetContent: function() {\n\t\treturn this.items.get(0).getContent();\n\t}\n\t\n})","Ext.define('Voyant.notebook.editor.CachedInput', {\n\textend: 'Ext.container.Container',\n\talias: 'widget.notebookcachedinput', \n\tmixins: ['Voyant.util.Localization'],\n\tconfig: {\n\t},\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\n\tconstructor: function(config) {\n\t\tthis.callParent(arguments);\n\t},\n\n\t/**\n\t * Returns a Ext.Promise that resolves to a string of code, which, when run, assigns the cached value to the varName\n\t * @param {String} varName The name of the variable to use for the cached value\n\t */\n\tgetCode: function(varName) {\n\t\tthrow new Error('Subclass must override!');\n\t},\n\n\t/**\n\t * Returns an object suitable for saving to a notebook file, which can be used to recreate the input on load\n\t */\n\tgetInput: function() {\n\t\tthrow new Error('Subclass must override!');\n\t},\n\n\t/**\n\t * Returns a Ext.Promise that resolves to a Blob of the cached input value\n\t */\n\tgetBlob: function() {\n\t\tthrow new Error('Subclass must override!');\n\t}\n});","Ext.define('Voyant.notebook.editor.FileInput', {\n\textend: 'Voyant.notebook.editor.CachedInput',\n\talias: 'widget.notebookfileinput', \n\tmixins: ['Voyant.util.Localization'],\n\tconfig: {\n\t\tdataUrl: undefined,\n\t\tresourceId: undefined,\n\t\tfile: undefined,\n\t\tfileName: undefined\n\t},\n\tstatics: {\n\t\ti18n: {\n\t\t\tfileUpload: 'File Upload',\n\t\t\tbuttonLabel: 'Choose a file...',\n\t\t\tdeleteMsg: 'The previously added file has been deleted. You will need to add a new file.'\n\t\t}\n\t},\n\n\tserverStorage: undefined,\n\n\tconstructor: function(config) {\n\t\tExt.apply(this, config, {\n\t\t\twidth: '100%',\n\t\t\titems: [{\n\t\t\t\txtype: 'voyantfilefield',\n\t\t\t\titemId: 'file',\n\t\t\t\tfieldLabel: this.localize('fileUpload'),\n\t\t\t\tlabelAlign: 'right',\n\t\t\t\tbuttonText: this.localize('buttonLabel'),\n\t\t\t\twidth: 350,\n\t\t\t\tlisteners: {\n\t\t\t\t\trender: function(cmp) {\n\t\t\t\t\t\tif (config.fileName) {\n\t\t\t\t\t\t\tcmp.inputEl.dom.value = config.fileName;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tchange: function(cmp, filename) {\n\t\t\t\t\t\tvar file = cmp.fileInputEl.dom.files[0];\n\t\t\t\t\t\tthis.setFile(file);\n\t\t\t\t\t\tthis.setFileName(filename);\n\t\t\t\t\t\tthis.setDataUrl(undefined);\n\t\t\t\t\t\tthis.setResourceId(undefined);\n\n\t\t\t\t\t\tthis.fireEvent('change', filename);\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\n\t\tif (typeof Voyant.util.ServerStorage === 'undefined') {\n\t\t\tExt.define('Voyant.util.ServerStorage', {\n\t\t\t\textend: 'Voyant.util.Storage',\n\t\t\t\tgetTromboneUrl: function() {\n\t\t\t\t\treturn Voyant.application.getTromboneUrl();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthis.serverStorage = Ext.create('Voyant.util.ServerStorage');\n\n\t\tthis.callParent(arguments);\n\t},\n\n\tgetCode: function(varName) {\n\t\tvar dfd = new Ext.Deferred();\n\n\t\tthis.getDataUrl().then(function(dataUrl) {\n\t\t\tvar code = varName+'= Spyral.Util.dataUrlToBlob(`'+dataUrl+'`)';\n\t\t\tdfd.resolve(code);\n\t\t}, function() {\n\t\t\tdfd.reject();\n\t\t});\n\n\t\treturn dfd.promise;\n\t},\n\n\tgetInput: function() {\n\t\treturn {\n\t\t\tresourceId: this.getResourceId(),\n\t\t\tfileName: this.getFileName()\n\t\t}\n\t},\n\n\tgetDataUrl: function() {\n\t\tvar dfd = new Ext.Deferred();\n\n\t\tif (this.getResourceId()) {\n\t\t\tthis.loadStoredFile().then(function(dataUrl) {\n\t\t\t\tdfd.resolve(dataUrl);\n\t\t\t}, function() {\n\t\t\t\tdfd.reject();\n\t\t\t})\n\t\t} else {\n\t\t\tif (this.getFile()) {\n\t\t\t\tthis.storeFile().then(function(result) {\n\t\t\t\t\tdfd.resolve(result[1]);\n\t\t\t\t}, function() {\n\t\t\t\t\tdfd.reject();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdfd.reject();\n\t\t\t}\n\t\t}\n\n\t\treturn dfd.promise;\n\t},\n\n\tgetBlob: function() {\n\t\tvar dfd = new Ext.Deferred();\n\n\t\tthis.getDataUrl().then(function(dataUrl) {\n\t\t\tvar blob = Spyral.Util.dataUrlToBlob(dataUrl);\n\t\t\tdfd.resolve(blob);\n\t\t}, function() {\n\t\t\tdfd.reject();\n\t\t});\n\n\t\treturn dfd.promise;\n\t},\n\n\tstoreFile: function() {\n\t\tvar dfd = new Ext.Deferred();\n\n\t\tvar file = this.getFile();\n\t\tif (file === undefined) {\n\t\t\tdfd.reject();\n\t\t} else {\n\t\t\tvar me = this;\n\t\t\tSpyral.Util.blobToDataUrl(file).then(function(data) {\n\t\t\t\tvar resourceId = Spyral.Util.id(32);\n\t\t\t\tme.serverStorage.storeResource(resourceId, data).then(function() {\n\t\t\t\t\tme.setResourceId(resourceId);\n\t\t\t\t\tme.setDataUrl(data);\n\t\t\t\t\tdfd.resolve([resourceId, data]);\n\t\t\t\t}, function() {\n\t\t\t\t\tdfd.reject();\n\t\t\t\t})\n\t\t\t}, function(err) {\n\t\t\t\tdfd.reject(err);\n\t\t\t});\n\t\t}\n\n\t\treturn dfd.promise;\n\t},\n\n\tloadStoredFile: function() {\n\t\tvar dfd = new Ext.Deferred();\n\t\t\n\t\tvar resourceId = this.getResourceId();\n\t\tif (resourceId === undefined) {\n\t\t\tdfd.reject();\n\t\t} else {\n\t\t\tvar me = this;\n\t\t\tthis.serverStorage.getStoredResource(resourceId).then(function(dataUrl) {\n\t\t\t\tif (dataUrl !== undefined) {\n\t\t\t\t\tme.setDataUrl(dataUrl);\n\t\t\t\t\tdfd.resolve(dataUrl);\n\t\t\t\t} else {\n\t\t\t\t\tdfd.reject();\n\t\t\t\t}\n\t\t\t}, function() {\n\t\t\t\tdfd.reject();\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn dfd.promise;\n\t}\n});\n\nExt.define('Voyant.form.field.File', {\n\textend: 'Ext.form.field.File',\n\talias: 'widget.voyantfilefield',\n\tonFileChange: function(button, e, value) {\n\t\t// remove fakepath\n\t\tvar newValue = value.replace(/^.*(\\\\|\\/|\\:)/, ''); // TODO test in safari etc\n\n\t\treturn this.callParent([ button, e, newValue ]);\n\t}\n});","Ext.define('Voyant.notebook.editor.CorpusInput', {\n\textend: 'Voyant.notebook.editor.CachedInput',\n\talias: 'widget.notebookcorpusinput', \n\tmixins: ['Voyant.util.Localization'],\n\tconfig: {\n\t\tcorpusId: undefined,\n\t\ttype: undefined,\n\t\tvalue: undefined\n\t},\n\tstatics: {\n\t\ti18n: {\n\t\t\tcorpusInput: 'Corpus Input',\n\t\t\tcorpusText: 'Text',\n\t\t\tcorpusVariable: 'Variable',\n\t\t\tcorpusFile: 'File',\n\t\t\tcorpusId: 'Corpus ID',\n\t\t\tnotebookVariables: 'Notebook Variables'\n\t\t}\n\t},\n\n\tcorpusCreator: undefined,\n\n\tconstructor: function(config) {\n\t\tExt.apply(this, {\n\t\t\tlayout: {\n\t\t\t\ttype: 'hbox',\n\t\t\t\talign: 'begin',\n\t\t\t\tpack: 'start'\n\t\t\t},\n\t\t\titems: [{\n\t\t\t\txtype: 'combo',\n\t\t\t\titemId: 'type',\n\t\t\t\tfieldLabel: this.localize('corpusInput'),\n\t\t\t\tlabelAlign: 'right',\n\t\t\t\tmargin: '5px',\n\t\t\t\tqueryMode: 'local',\n\t\t\t\tallowBlank: false,\n\t\t\t\teditable: false,\n\t\t\t\tforceSelection: true,\n\t\t\t\tvalue: 'text',\n\t\t\t\tstore: [['text',this.localize('corpusText')],['variable',this.localize('corpusVariable')],['file',this.localize('corpusFile')],['id',this.localize('corpusId')]],\n\t\t\t\tlisteners: {\n\t\t\t\t\tchange: function(rg, val) {\n\t\t\t\t\t\trg.nextSibling().getLayout().setActiveItem(val);\n\t\t\t\t\t\tthis.setType(val);\n\t\t\t\t\t\tthis.setCorpusId(undefined);\n\n\t\t\t\t\t\tif (val === 'id') {\n\t\t\t\t\t\t\trg.nextSibling('#corpusOptions').hide();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trg.nextSibling('#corpusOptions').show();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t},{\n\t\t\t\txtype: 'container',\n\t\t\t\tlayout: 'card',\n\t\t\t\tdefaultType: 'container',\n\t\t\t\titemId: 'cards',\n\t\t\t\tflex: 1,\n\t\t\t\tmargin: '5px 5px 5px 0',\n\t\t\t\titems: [{\n\t\t\t\t\titemId: 'text',\n\t\t\t\t\titems: [{\n\t\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\t\twidth: '75%',\n\t\t\t\t\t\tname: 'text',\n\t\t\t\t\t\tfieldLabel: '',\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\tchange: function() {\n\t\t\t\t\t\t\t\tthis.setCorpusId(undefined);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\titemId: 'variable',\n\t\t\t\t\titems: [{\n\t\t\t\t\t\txtype: 'combo',\n\t\t\t\t\t\tname: 'variable',\n\t\t\t\t\t\tfieldLabel: '',\n\t\t\t\t\t\ttriggerAction: 'all',\n\t\t\t\t\t\tqueryMode: 'local',\n\t\t\t\t\t\teditable: false,\n\t\t\t\t\t\tforceSelection: true,\n\t\t\t\t\t\temptyText: this.localize('notebookVariables'),\n\t\t\t\t\t\tstore: { fields: ['text'] },\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\tchange: function() {\n\t\t\t\t\t\t\t\tthis.setCorpusId(undefined);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t}],\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tactivate: function(crd) {\n\t\t\t\t\t\t\tthis.populateVariables();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\titemId: 'file',\n\t\t\t\t\txtype: 'notebookfileinput',\n\t\t\t\t\tflex: 1,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tchange: function() {\n\t\t\t\t\t\t\tthis.setCorpusId(undefined);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\titemId: 'id',\n\t\t\t\t\titems: [{\n\t\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\t\twidth: '75%',\n\t\t\t\t\t\tname: 'id',\n\t\t\t\t\t\tfieldLabel: '',\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\tchange: function() {\n\t\t\t\t\t\t\t\tthis.setCorpusId(undefined);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t},{\n\t\t\t\titemId: 'corpusOptions',\n\t\t\t\txtype: 'button',\n\t\t\t\twidth: 60,\n\t\t\t\tmargin: '5px 5px 5px 0',\n\t\t\t\ttext: 'Options',\n\t\t\t\thandler: function(btn) {\n\t\t\t\t\tif (this.corpusCreator === undefined) {\n\t\t\t\t\t\tthis.corpusCreator = Ext.create('Voyant.panel.CorpusCreator');\n\n\t\t\t\t\t}\n\t\t\t\t\tthis.corpusCreator.showOptionsClick(this.corpusCreator);\n\t\t\t\t\tthis.corpusCreator.optionsWin.query('fieldset:last')[0].hide(); // hide access manager\n\t\t\t\t\tthis.corpusCreator.optionsWin.query('button:first')[0].on('click', function(btn) {\n\t\t\t\t\t\t// reset corpus on OK button click\n\t\t\t\t\t\tthis.setCorpusId(undefined);\n\t\t\t\t\t}, this, {single: true});\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tboxready: function(cmp) {\n\t\t\t\t\tif (config.type) {\n\t\t\t\t\t\tcmp.down('#type').setValue(config.type);\n\t\t\t\t\t}\n\t\t\t\t\tif (config.value) {\n\t\t\t\t\t\tvar formField = cmp.down('#'+config.type).child();\n\t\t\t\t\t\tif (formField.setRawValue) {\n\t\t\t\t\t\t\tformField.setRawValue(config.value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tformField.setValue(config.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// set corpusId last, because of change listeners\n\t\t\t\t\tif (config.corpusId) {\n\t\t\t\t\t\tcmp.setCorpusId(config.corpusId);\n\t\t\t\t\t}\n\n\t\t\t\t\tcmp.up('notebookdatawrapper').results.on('sandboxMessage', function(msg) {\n\t\t\t\t\t\t// use sandbox listener to capture corpusId\n\t\t\t\t\t\tif (msg.type === 'result') {\n\t\t\t\t\t\t\tvar corpusVarName = cmp.up('notebookdatawrapper').getDataName();\n\t\t\t\t\t\t\tvar corpusVal = msg.variables.find(function(variable) { return variable.name === corpusVarName });\n\t\t\t\t\t\t\tSpyral.Util.blobToString(corpusVal.value).then(function(strVal) {\n\t\t\t\t\t\t\t\tvar corpusJson = JSON.parse(strVal);\n\t\t\t\t\t\t\t\tcmp.setCorpusId(corpusJson.corpusid);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tcmp.up('notebook').on('notebookRun', cmp.populateVariables, cmp);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.callParent(arguments);\n\t},\n\n\tpopulateVariables: function() {\n\t\tvar cmp = this.up('notebookdatawrapper');\n\t\tvar prev = cmp.previousSibling();\n\t\tvar variables = [];\n\t\tif (prev !== null) {\n\t\t\tvariables = cmp.up('notebook').getNotebookVariables(cmp).map(function(vr) { return [vr.name] });\n\t\t}\n\t\tvar combo = this.down('#variable combo');\n\t\tcombo.getStore().loadRawData(variables);\n\t\t\n\t\tvar resetCombo = true;\n\t\tvar currValue = combo.getRawValue();\n\t\tvariables.forEach(function(variable) {\n\t\t\tif (variable.indexOf(currValue) !== -1) {\n\t\t\t\tresetCombo = false;\n\t\t\t}\n\t\t})\n\t\tif (resetCombo) {\n\t\t\tcombo.setValue(undefined);\n\t\t}\n\t},\n\n\tgetCode: function(varName) {\n\t\tvar dfd = new Ext.Deferred();\n\n\t\tif (this.getCorpusId()) {\n\t\t\tvar val = varName+'=new Spyral.Corpus(\"'+this.getCorpusId()+'\")';\n\t\t\tdfd.resolve(val);\n\t\t} else {\n\t\t\tvar activeItem = this.down('#cards').getLayout().getActiveItem();\n\t\t\tvar type = activeItem.getItemId();\n\t\t\tthis.setType(type);\n\t\t\t\n\t\t\tvar apiParams = {};\n\t\t\tif (this.corpusCreator) {\n\t\t\t\tExt.apply(apiParams, this.corpusCreator.getApiParams());\n\t\t\t}\n\t\t\tvar apiParamsStr = JSON.stringify(apiParams);\n\t\t\t\n\t\t\tif (type === 'variable') {\n\t\t\t\tvar inputVarName = activeItem.down('combo').getRawValue();\n\t\t\t\tthis.setValue(inputVarName);\n\t\t\t\tif (inputVarName !== '') {\n\t\t\t\t\tvar val = 'Spyral.Corpus.load('+inputVarName+','+apiParamsStr+').then(function(){'+varName+'=arguments[0];return '+varName+'.metadata()})';\n\t\t\t\t\tdfd.resolve(val);\n\t\t\t\t} else {\n\t\t\t\t\tdfd.reject('No variable specified!');\n\t\t\t\t}\n\t\t\t} else if (type === 'file') {\n\t\t\t\tvar file = activeItem.getFile();\n\t\t\t\tthis.setValue(activeItem.getFileName());\n\t\t\t\tSpyral.Util.blobToDataUrl(file).then(function(dataUrl) {\n\t\t\t\t\tvar val = 'Spyral.Corpus.load(Spyral.Util.dataUrlToBlob(`'+dataUrl+'`),'+apiParamsStr+').then(function(){'+varName+'=arguments[0];return '+varName+'.metadata()})';\n\t\t\t\t\tdfd.resolve(val);\n\t\t\t\t}, function() {\n\t\t\t\t\tdfd.reject();\n\t\t\t\t});\n\t\t\t} else if (type === 'text') {\n\t\t\t\tvar text = activeItem.down('textfield').getValue().replaceAll('\"', '\\\"');\n\t\t\t\tthis.setValue(text);\n\t\t\t\tif (text !== '') {\n\t\t\t\t\tvar val = 'Spyral.Corpus.load({input:\"'+text+'\"},'+apiParamsStr+').then(function(){'+varName+'=arguments[0];return '+varName+'.metadata()})';\n\t\t\t\t\tdfd.resolve(val);\n\t\t\t\t} else {\n\t\t\t\t\tdfd.reject('No text entered!');\n\t\t\t\t}\n\t\t\t} else if (type === 'id') {\n\t\t\t\tvar id = activeItem.down('textfield').getValue().replaceAll('\"', '\\\"');\n\t\t\t\tthis.setValue(id);\n\t\t\t\tif (id !== '') {\n\t\t\t\t\tvar val = 'Spyral.Corpus.load({corpus:\"'+id+'\"}).then(function(){'+varName+'=arguments[0];return '+varName+'.metadata()})';\n\t\t\t\t\tdfd.resolve(val);\n\t\t\t\t} else {\n\t\t\t\t\tdfd.reject('No ID entered!');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn dfd.promise;\n\t},\n\n\tgetInput: function() {\n\t\treturn {\n\t\t\tcorpusId: this.getCorpusId(),\n\t\t\ttype: this.getType(),\n\t\t\tvalue: this.getValue()\n\t\t}\n\t},\n\n\tgetBlob: function() {\n\t\tvar dfd = new Ext.Deferred();\n\n\t\tvar corpusId = this.getCorpusId();\n\t\tif (corpusId === undefined) {\n\t\t\tdfd.reject();\n\t\t} else {\n\t\t\tExt.Ajax.request({\n\t\t\t\turl: Voyant.application.getTromboneUrl(),\n\t\t\t\tbinary: true,\n\t\t\t\tparams: {\n\t\t\t\t\ttool: 'corpus.CorpusExporter',\n\t\t\t\t\tcorpus: corpusId,\n\t\t\t\t\toutputFormat: 'zip'\n\t\t\t\t}\n\t\t\t}).then(function(response) {\n\t\t\t\tconst blob = new Blob([response.responseBytes], {type: 'application/zip'});\n\t\t\t\tdfd.resolve(blob);\n\t\t\t}, function(err) {\n\t\t\t\tdfd.reject(err);\n\t\t\t});\n\t\t}\n\n\t\treturn dfd.promise;\n\t}\n});","Ext.define('Voyant.notebook.editor.TableInput', {\n\textend: 'Voyant.notebook.editor.CachedInput',\n\talias: 'widget.notebooktableinput', \n\tmixins: ['Voyant.util.Localization'],\n\tconfig: {\n\t\ttable: undefined, // a Spyral.Table instance\n\t\ttype: undefined,\n\t\tvalue: undefined\n\t},\n\tstatics: {\n\t\ti18n: {\n\t\t\ttableInput: 'Table Input',\n\t\t\ttableText: 'Text',\n\t\t\ttableVariable: 'Variable',\n\t\t\ttableFile: 'File',\n\t\t\tnotebookVariables: 'Notebook Variables'\n\t\t}\n\t},\n\n\tconstructor: function(config) {\n\t\tExt.apply(this, {\n\t\t\tlayout: {\n\t\t\t\ttype: 'vbox',\n\t\t\t\talign: 'stretch'\n\t\t\t},\n\t\t\titems: [{\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'hbox',\n\t\t\t\t\talign: 'begin',\n\t\t\t\t\tpack: 'start'\n\t\t\t\t},\n\t\t\t\titems: [{\n\t\t\t\t\txtype: 'combo',\n\t\t\t\t\titemId: 'type',\n\t\t\t\t\tfieldLabel: this.localize('tableInput'),\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tmargin: '5px',\n\t\t\t\t\tqueryMode: 'local',\n\t\t\t\t\tallowBlank: false,\n\t\t\t\t\teditable: false,\n\t\t\t\t\tforceSelection: true,\n\t\t\t\t\tvalue: 'text',\n\t\t\t\t\tstore: [['text',this.localize('tableText')],['variable',this.localize('tableVariable')],['file',this.localize('tableFile')]],\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tchange: function(rg, val) {\n\t\t\t\t\t\t\trg.nextSibling().getLayout().setActiveItem(val);\n\t\t\t\t\t\t\tthis.setType(val);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: 'container',\n\t\t\t\t\tlayout: 'card',\n\t\t\t\t\tdefaultType: 'container',\n\t\t\t\t\titemId: 'cards',\n\t\t\t\t\tflex: 1,\n\t\t\t\t\tmargin: '5px 5px 5px 0',\n\t\t\t\t\titems: [{\n\t\t\t\t\t\titemId: 'text',\n\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\txtype: 'textarea',\n\t\t\t\t\t\t\twidth: '75%',\n\t\t\t\t\t\t\tgrow: false,\n\t\t\t\t\t\t\tname: 'text',\n\t\t\t\t\t\t\tfieldLabel: ''\n\t\t\t\t\t\t}]\n\t\t\t\t\t},{\n\t\t\t\t\t\titemId: 'variable',\n\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\txtype: 'combo',\n\t\t\t\t\t\t\tname: 'variable',\n\t\t\t\t\t\t\tfieldLabel: '',\n\t\t\t\t\t\t\ttriggerAction: 'all',\n\t\t\t\t\t\t\tqueryMode: 'local',\n\t\t\t\t\t\t\teditable: false,\n\t\t\t\t\t\t\tforceSelection: true,\n\t\t\t\t\t\t\temptyText: this.localize('notebookVariables'),\n\t\t\t\t\t\t\tstore: { fields: ['text'] },\n\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\tchange: function() {\n\t\t\t\t\t\t\t\t\tthis.setTable(undefined);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}],\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\tactivate: function() {\n\t\t\t\t\t\t\t\tthis.populateVariables();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t},{\n\t\t\t\t\t\titemId: 'file',\n\t\t\t\t\t\txtype: 'notebookfileinput',\n\t\t\t\t\t\tflex: 1,\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\tchange: function() {\n\t\t\t\t\t\t\t\tthis.setTable(undefined);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tboxready: function(cmp) {\n\t\t\t\t\tif (config.type) {\n\t\t\t\t\t\tcmp.down('#type').setValue(config.type);\n\t\t\t\t\t}\n\t\t\t\t\tif (config.value) {\n\t\t\t\t\t\tvar formField = cmp.down('#'+config.type).child();\n\t\t\t\t\t\tif (formField.setRawValue) {\n\t\t\t\t\t\t\tformField.setRawValue(config.value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tformField.setValue(config.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (config.table) {\n\t\t\t\t\t\tvar table = new Spyral.Table(config.table);\n\t\t\t\t\t\tthis.setTable(table);\n\t\t\t\t\t}\n\n\t\t\t\t\tcmp.up('notebookdatawrapper').results.on('sandboxMessage', function(msg) {\n\t\t\t\t\t\tif (msg.type === 'result') {\n\t\t\t\t\t\t\tvar tableVarName = cmp.up('notebookdatawrapper').getDataName();\n\t\t\t\t\t\t\tvar tableVal = msg.variables.find(function(variable) { return variable.name === tableVarName });\n\t\t\t\t\t\t\tSpyral.Util.blobToString(tableVal.value).then(function(strVal) {\n\t\t\t\t\t\t\t\tvar data = JSON.parse(strVal);\n\t\t\t\t\t\t\t\tvar table = new Spyral.Table();\n\t\t\t\t\t\t\t\t['_rows', '_headers', '_rowKeyColumnIndex'].forEach(function(prop) {\n\t\t\t\t\t\t\t\t\tif (data[prop] !== undefined) {\n\t\t\t\t\t\t\t\t\t\ttable[prop] = data[prop];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tcmp.setTable(table);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tcmp.up('notebook').on('notebookRun', cmp.populateVariables, cmp);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.callParent(arguments);\n\t},\n\n\tpopulateVariables: function() {\n\t\tvar cmp = this.up('notebookdatawrapper');\n\t\tvar prev = cmp.previousSibling();\n\t\tvar variables = [];\n\t\tif (prev !== null) {\n\t\t\tvariables = cmp.up('notebook').getNotebookVariables(cmp).map(function(vr) { return [vr.name] });\n\t\t}\n\t\tvar combo = this.down('#variable combo');\n\t\tcombo.getStore().loadRawData(variables);\n\t\t\n\t\tvar resetCombo = true;\n\t\tvar currValue = combo.getRawValue();\n\t\tvariables.forEach(function(variable) {\n\t\t\tif (variable.indexOf(currValue) !== -1) {\n\t\t\t\tresetCombo = false;\n\t\t\t}\n\t\t})\n\t\tif (resetCombo) {\n\t\t\tcombo.setValue(undefined);\n\t\t}\n\t},\n\n\tupdateTable: function(newVal, oldVal) {\n\t\tif (this.rendered === false) return;\n\n\t\tvar prevTableEditor = this.down('#tableEditor');\n\t\tif (prevTableEditor) prevTableEditor.destroy();\n\t\tif (newVal !== undefined && newVal.rows() > 0) {\n\t\t\tvar firstRow = newVal.row(0);\n\t\t\tvar fields = newVal.headers(true).map(function(val, index) {\n\t\t\t\tvar firstRowVal = firstRow[index];\n\t\t\t\tvar fieldDef = {name: val};\n\t\t\t\tif (typeof firstRowVal === 'number') {\n\t\t\t\t\tfieldDef.type = 'float';\n\t\t\t\t} else {\n\t\t\t\t\tfieldDef.type = 'string';\n\t\t\t\t}\n\t\t\t\treturn fieldDef;\n\t\t\t})\n\t\t\tthis.insert(1, {\n\t\t\t\txtype: 'gridpanel',\n\t\t\t\theight: 250,\n\t\t\t\tresizable: {\n\t\t\t\t\thandles: 's',\n\t\t\t\t\tpinned: true\n\t\t\t\t},\n\t\t\t\twidth: '100%',\n\t\t\t\titemId: 'tableEditor',\n\t\t\t\tplugins: {\n\t\t\t\t\tptype: 'cellediting',\n\t\t\t\t\tpluginId: 'cellEditor'\n\t\t\t\t},\n\t\t\t\tcolumns: newVal.headers(true).map(function(val, index) {\n\t\t\t\t\treturn {text: val, dataIndex: val, editor: {xtype: 'textfield', allowBlank: false}}\n\t\t\t\t}),\n\t\t\t\tstore: {\n\t\t\t\t\txtype: 'store.array',\n\t\t\t\t\tfields: fields,\n\t\t\t\t\tdata: newVal.rows(true)\n\t\t\t\t},\n\t\t\t\tbbar: [{\n\t\t\t\t\txtype: 'button',\n\t\t\t\t\ttext: 'Add Row',\n\t\t\t\t\twidth: 125,\n\t\t\t\t\tglyph: 'xf067@FontAwesome',\n\t\t\t\t\thandler: function(b) {\n\t\t\t\t\t\tvar grid = b.up('gridpanel');\n\t\t\t\t\t\tvar blank = newVal.headers(true).map(function() { return ''; });\n\t\t\t\t\t\tgrid.store.loadData([blank], true);\n    \t\t\t\t\tvar numRecords = grid.store.getCount();\n    \t\t\t\t\tgrid.getPlugin('cellEditor').startEditByPosition({row: numRecords-1, column: 0});\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: 'button',\n\t\t\t\t\ttext: 'Remove Row',\n\t\t\t\t\twidth: 135,\n\t\t\t\t\tglyph: 'xf068@FontAwesome',\n\t\t\t\t\thandler: function(b) {\n\t\t\t\t\t\tvar grid = b.up('gridpanel');\n\t\t\t\t\t\tvar sel = grid.getSelection();\n\t\t\t\t\t\tif (sel.length > 0) {\n\t\t\t\t\t\t\tgrid.store.remove(sel);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: 'button',\n\t\t\t\t\ttext: 'Delete Table',\n\t\t\t\t\twidth: 135,\n\t\t\t\t\tglyph: 'xf1f8@FontAwesome',\n\t\t\t\t\thandler: function() {\n\t\t\t\t\t\tthis.setTable(undefined);\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\t},\n\n\tgetRowsFromTable: function() {\n\t\tvar tableEditor = this.down('#tableEditor');\n\t\tif (!tableEditor) return undefined;\n\t\tvar store = tableEditor.getStore();\n\n\t\tvar headers = store.getModel().getFields()\n\t\t\t.filter(function(field) { return field.generated !== true })\n\t\t\t.map(function(field) { return field.getName() });\n\n\t\tvar rows = store.getData().items.map(function(item) {\n\t\t\tvar row = {};\n\t\t\theaders.forEach(function(header) {\n\t\t\t\trow[header] = item.get(header);\n\t\t\t})\n\t\t\treturn row;\n\t\t});\n\n\t\treturn rows;\n\t},\n\n\tgetCode: function(varName) {\n\t\tvar dfd = new Ext.Deferred();\n\n\t\tvar activeItem = this.down('#cards').getLayout().getActiveItem();\n\t\tvar type = activeItem.getItemId();\n\t\tthis.setType(type);\n\n\t\t// if the editor exists use that as the source\n\t\tvar tableEditor = this.down('#tableEditor');\n\t\tif (tableEditor) {\n\t\t\tvar rows = this.getRowsFromTable();\n\t\t\tvar val = varName+'=new Spyral.Table('+JSON.stringify(rows)+')';\n\t\t\tdfd.resolve(val);\n\t\t\treturn dfd.promise;\n\t\t}\n\t\t\n\t\tif (type === 'variable') {\n\t\t\tvar inputVarName = activeItem.down('combo').getRawValue();\n\t\t\tthis.setValue(inputVarName);\n\t\t\tif (inputVarName !== '') {\n\t\t\t\tvar code = `${varName}=${inputVarName} instanceof Spyral.Table ? ${inputVarName} : new Spyral.Table(${inputVarName})`;\n\t\t\t\tdfd.resolve(code);\n\t\t\t} else {\n\t\t\t\tdfd.reject('No variable specified!');\n\t\t\t}\n\t\t} else if (type === 'file') {\n\t\t\tvar file = activeItem.getFile();\n\t\t\tthis.setValue(activeItem.getFileName());\n\t\t\tSpyral.Util.blobToString(file).then(function(data) {\n\t\t\t\tvar val = varName+'=new Spyral.Table(`'+data+'`)';\n\t\t\t\tdfd.resolve(val);\n\t\t\t}, function() {\n\t\t\t\tdfd.reject();\n\t\t\t});\n\t\t} else if (type === 'text') {\n\t\t\tvar text = activeItem.down('textfield').getValue().replaceAll('\"', '\\\"').replaceAll('\\t', '\\\\t').replaceAll('\\n', '\\\\n');\n\t\t\tthis.setValue(text);\n\t\t\tif (text !== '') {\n\t\t\t\tvar val = varName+'=new Spyral.Table(\"'+text+'\")';\n\t\t\t\tdfd.resolve(val);\n\t\t\t} else {\n\t\t\t\tdfd.reject('No text entered!');\n\t\t\t}\n\t\t}\n\n\t\treturn dfd.promise;\n\t},\n\n\tgetTSV: function() {\n\t\tvar tableTsv = undefined;\n\t\tif (this.getTable()) {\n\t\t\ttableTsv = this.getTable().toTsv();\n\t\t}\n\t\treturn tableTsv;\n\t},\n\n\tgetArray: function() {\n\t\tvar tableArray = undefined;\n\t\tif (this.getTable()) {\n\t\t\ttableArray = this.getTable().toArray(true);\n\t\t}\n\t\treturn tableArray;\n\t},\n\n\tgetInput: function() {\n\t\treturn {\n\t\t\ttable: this.getArray(),\n\t\t\ttype: this.getType(),\n\t\t\tvalue: this.getValue()\n\t\t}\n\t},\n\n\tgetBlob: function() {\n\t\tvar dfd = new Ext.Deferred();\n\t\tdfd.resolve(this.getArray());\n\t\treturn dfd.promise;\n\t}\n});","Ext.define(\"Voyant.notebook.editor.DataWrapper\", {\n\textend: \"Voyant.notebook.editor.RunnableEditorWrapper\",\n\trequires: [\"Voyant.notebook.editor.CodeEditor\", \"Voyant.notebook.editor.FileInput\", \"Voyant.notebook.editor.CorpusInput\"],\n\talias: \"widget.notebookdatawrapper\",\n\tcls: 'notebook-data-wrapper',\n\tstatics: {\n\t\ti18n: {\n\t\t\tdataNameAlphanum: 'The data name must contain alphanumeric characters only',\n\t\t\tdataNameAlphastart: 'The data name must not begin with a number'\n\t\t}\n\t},\n\tconfig: {\n\t\tdataName: undefined\n\t},\n\n\tcachedInput: undefined, // Voyant.notebook.editor.CachedInput instance\n\n\tconstructor: function(config) {\n\t\tconfig.mode = config.mode !== undefined ? config.mode : 'json';\n\n\t\tvar hasCachedInput = config.mode === 'file' || config.mode === 'corpus' || config.mode === 'table';\n\n\t\tvar resourceId = undefined;\n\t\tvar fileName = undefined;\n\t\tif (hasCachedInput) {\n\t\t\tresourceId = config.input.resourceId;\n\t\t\tfileName = config.input.fileName;\n\t\t}\n\n\t\tthis.editor = Ext.create(\"Voyant.notebook.editor.CodeEditor\", {\n\t\t\tcontent: Ext.Array.from(config.input).join(\"\\n\"),\n\t\t\tdocs: config.docs, // TODO\n\t\t\tmode: config.mode,\n\t\t\thidden: hasCachedInput,\n\t\t\tparentWrapper: this\n\t\t});\n\n\t\tif (config.mode === 'corpus') {\n\t\t\tthis.cachedInput = Ext.create('Voyant.notebook.editor.CorpusInput', config.input);\n\t\t} else if (config.mode === 'table') {\n\t\t\tthis.cachedInput = Ext.create('Voyant.notebook.editor.TableInput', config.input);\n\t\t} else {\n\t\t\tvar cfg = hasCachedInput && config.input !== '' ? config.input : {};\n\t\t\tthis.cachedInput = Ext.create('Voyant.notebook.editor.FileInput', Ext.apply(cfg, {hidden: !hasCachedInput, margin: '5px'}));\n\t\t}\n\n\t\tvar hideResults = !config.output || config.output.indexOf('>undefined<') !== -1;\n\n\t\tthis.results = Ext.create('Voyant.notebook.editor.SandboxWrapper', {\n\t\t\tsandboxSrcUrl: Spyral.Load.baseUrl+'spyral/sandbox.jsp',\n\t\t\texpandResults: config.expandResults,\n\t\t\thidden: hideResults,\n\t\t\tlisteners: {\n\t\t\t\tinitialized: function() {\n\t\t\t\t\t// pass along initialized\n\t\t\t\t\tthis.fireEvent('initialized', this);\n\n\t\t\t\t\tif (config.output !== undefined) {\n\t\t\t\t\t\tthis.results.updateHtml(config.output);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\n\t\tExt.apply(this, {\n\t\t\tborder: false,\n\t\t\tlayout: 'anchor',\n\t\t\tdefaults: { anchor: '100%' },\n\t\t\titems: [this.editor, this.cachedInput, {\n\t\t\t\txtype: 'form',\n\t\t\t\tcls: 'notebook-data-input',\n\t\t\t\tbodyPadding: 6,\n\t\t\t\tbodyStyle: 'background-color: rgb(252, 252, 252);',\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'hbox',\n\t\t\t\t\tpack: 'center'\n\t\t\t\t},\n\t\t\t\titems: [{\n\t\t\t\t\twidth: 350,\n\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\tfieldLabel: 'Data Name',\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tname: 'dataName',\n\t\t\t\t\tvalue: config.dataName,\n\t\t\t\t\tvalidator: function(val) {\n\t\t\t\t\t\tif (/^[a-zA-Z0-9_]+$/.test(val)) {\n\t\t\t\t\t\t\tif (/^\\D/.test(val)) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn this.localize('dataNameAlphastart');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn this.localize('dataNameAlphanum')\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this),\n\t\t\t\t\tallowBlank: false,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tchange: function(cmp, newVal, oldVal) {\n\t\t\t\t\t\t\tif (cmp.isValid()) {\n\t\t\t\t\t\t\t\tthis.setDataName(newVal);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setDataName(undefined);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tmargin: '0 0 0 6',\n\t\t\t\t\txtype: 'button',\n\t\t\t\t\ttext: 'Assign',\n\t\t\t\t\thandler: function() {\n\t\t\t\t\t\tif (this.down('textfield[name=dataName]').validate()) {\n\t\t\t\t\t\t\tthis.up('notebook').setIsEdited(true);\n\t\t\t\t\t\t\tthis.run();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}]\n\t\t\t}, this.results]\n\t\t});\n\t\t\n\t\tthis.callParent(arguments);\n\t},\n\n\tswitchModes: function(mode) {\n\t\tif (mode === 'javascript') {\n\t\t\tvar notebook = this.up('notebook');\n\t\t\tnotebook.addCode('', this.getIndex(), undefined, {mode: 'javascript'});\n\t\t\tnotebook.notebookWrapperRemove(this);\n\t\t} else {\n\t\t\tthis.setMode(mode);\n\t\t\t\n\t\t\tif (mode === 'file') {\n\t\t\t\tthis.editor.hide();\n\t\t\t\tif (this.cachedInput.isXType('notebookcorpusinput')) {\n\t\t\t\t\tthis.cachedInput.destroy();\n\t\t\t\t\tthis.cachedInput = Ext.create('Voyant.notebook.editor.FileInput', {margin: '5px'});\n\t\t\t\t\tthis.insert(1, this.cachedInput);\n\t\t\t\t}\n\t\t\t\tthis.cachedInput.show();\n\t\t\t} else if (mode === 'corpus') {\n\t\t\t\tthis.editor.hide();\n\t\t\t\tif (this.cachedInput.isXType('notebookfileinput')) {\n\t\t\t\t\tthis.cachedInput.destroy();\n\t\t\t\t\tthis.cachedInput = Ext.create('Voyant.notebook.editor.CorpusInput', {});\n\t\t\t\t\tthis.insert(1, this.cachedInput);\n\t\t\t\t}\n\t\t\t\tthis.cachedInput.show();\n\t\t\t} else if (mode === 'table') {\n\t\t\t\tthis.editor.hide();\n\t\t\t\tif (this.cachedInput.isXType('notebooktableinput')) {\n\t\t\t\t\tthis.cachedInput.destroy();\n\t\t\t\t\tthis.cachedInput = Ext.create('Voyant.notebook.editor.TableInput', {});\n\t\t\t\t\tthis.insert(1, this.cachedInput);\n\t\t\t\t}\n\t\t\t\tthis.cachedInput.show();\n\t\t\t} else {\n\t\t\t\tthis.cachedInput.hide();\n\t\t\t\tthis.editor.switchModes(mode);\n\t\t\t\tthis.editor.show();\n\t\t\t}\n\t\t\t\n\t\t\tthis.updateLayout();\n\t\t}\n\t},\n\n\t_getCode: function() {\n\t\tvar dfd = new Ext.Deferred();\n\n\t\tvar dataName = this.getDataName();\n\t\tvar dataNameField = this.down('textfield[name=dataName]');\n\t\tif (dataName === undefined || dataNameField.isValid() === false) {\n\t\t\tdataNameField.markInvalid(dataNameField.getErrors(dataNameField.getValue()));\n\t\t\tdfd.reject();\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tvar mode = this.getMode();\n\t\tif (mode === 'file' || mode === 'corpus' || mode === 'table') {\n\t\t\tthis.cachedInput.getCode(dataName).then(function(code) {\n\t\t\t\tdfd.resolve(code);\n\t\t\t}, function() {\n\t\t\t\tdfd.reject();\n\t\t\t});\n\t\t} else {\n\t\t\tvar code = this.editor.getValue();\n\t\t\tswitch(mode) {\n\t\t\t\tcase 'text':\n\t\t\t\t\tcode = dataName+'=`'+code+'`';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'json':\n\t\t\t\t\tcode = dataName+'= JSON.parse(`'+code+'`)';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'xml':\n\t\t\t\t\tcode = dataName+'= new DOMParser().parseFromString(`'+code+'`, \"application/xml\")';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'html':\n\t\t\t\t\tcode = dataName+'= new DOMParser().parseFromString(`'+code+'`, \"application/xml\")'; // also use xml for strict validation\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdfd.resolve(code);\n\t\t}\n\n\t\treturn dfd.promise;\n\t},\n\n\t_run: function(priorVariables) {\n\t\tvar dfd = new Ext.Deferred();\n\n\t\tvar me = this;\n\t\tthis._getCode().then(function(code) {\n\t\t\tme.results.clear();\n\n\t\t\tif (me.getMode() !== 'file' && me.getMode() !== 'corpus') {\n\t\t\t\tme.editor.clearMarkers();\n\t\t\t}\n\n\t\t\tme.setIsRun(true);\n\t\t\t\n\t\t\tme.results.run(code, priorVariables).then(function(eventData) {\n\t\t\t\tdfd.resolve(eventData);\n\t\t\t}, function(eventData) {\n\t\t\t\tif (eventData.error !== undefined) {\n\t\t\t\t\tvar location = eventData.error.location;\n\t\t\t\t\tif (location !== undefined) {\n\t\t\t\t\t\tme.editor.addMarker(location, 'error');\n\t\t\t\t\t\tme.editor.addLineMarker(location, 'error');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdfd.reject(eventData);\n\t\t\t});\n\t\t}, function() {\n\t\t\tdfd.reject('Error handling data');\n\t\t});\n\n\t\treturn dfd.promise;\n\t},\n\n\tgetInput: function() {\n\t\tvar mode = this.getMode();\n\t\tif (mode === 'file' || mode === 'corpus' || mode === 'table') {\n\t\t\treturn this.cachedInput.getInput();\n\t\t} else {\n\t\t\treturn this.editor.getValue();\n\t\t}\n\t},\n\n\tgetContent: function() {\n\t\tvar content = this.callParent(arguments);\n\t\tcontent.dataName = this.getDataName();\n\t\treturn content;\n\t}\n});\n","Ext.define(\"Voyant.notebook.github.OctokitWrapper\", {\n\textend: \"Ext.Base\",\n\talias: \"octokitwrapper\",\n\n\toctokit: undefined,\n\n\tconstructor: function(config) {\n\t\tconst authToken = config.authToken;\n\t\tthis.octokit = new Octokit({\n\t\t\tauth: authToken,\n\t\t\tuserAgent: 'https://github.com/voyanttools/Voyant'\n\t\t});\n\t},\n\n\tgetInfoForAuthenticatedUser: function() {\n\t\treturn this.octokit.users.getAuthenticated();\n\t},\n\n\tgetReposForAuthenticatedUser: function(affiliation='owner', page=0, per_page=10) {\n\t\treturn this.octokit.repos.listForAuthenticatedUser({\n\t\t\taffiliation,\n\t\t\tpage,\n\t\t\tper_page\n\t\t});\n\t},\n\n\tgetReposForUser: function(owner, page=0, per_page=10) {\n\t\treturn this.octokit.search.repos({\n\t\t\tq: 'user:'+owner,\n\t\t\tpage,\n\t\t\tper_page\n\t\t})\n\t},\n\n\tsearchWithinRepositories: function(query, page=0, per_page=10) {\n\t\tconsole.log(query);\n\t},\n\n\tgetRepoContents: function(repoId) {\n\t\tlet {owner, repo} = this.parseFullName(repoId);\n\t\treturn this.getBranchSHAs({owner, repo, branch: 'master'}).then(function(resp) {\n\t\t\treturn this.getTreeContentsRecursively(resp);\n\t\t}.bind(this));\n\t},\n\n\tgetTreeContentsRecursively: function(params) {\n\t\treturn this.octokit.git.getTree({\n\t\t\towner: params.owner,\n\t\t\trepo: params.repo,\n\t\t\ttree_sha: params.baseTreeSHA,\n\t\t\trecursive: 1,\n\t\t\theaders: {\n\t\t\t\t'If-None-Match': '' // cache busting\n\t\t\t}\n\t\t}).then(function (resp) {\n\t\t\treturn {\n\t\t\t\t...params,\n\t\t\t\tcontents: this.unflattenContents(resp.data.tree),\n\t\t\t\ttruncated: resp.data.truncated\n\t\t\t}\n\t\t}.bind(this));\n\t},\n\n\tloadFile: function(repoId, path) {\n\t\tlet {owner, repo} = this.parseFullName(repoId);\n\t\tlet ref = 'master';\n\t\treturn this.octokit.repos.getContents({\n\t\t\towner, repo, ref, path\n\t\t}).then(function(resp) {\n\t\t\treturn {\n\t\t\t\towner, repo, ref, path,\n\t\t\t\tsha: resp.data.sha,\n\t\t\t\tfile: atob(resp.data.content)\n\t\t\t}\n\t\t}.bind(this));\n\t},\n\n\t// SAVING\n\n\tdoesRepoExist: function(owner, repo) {\n\t\treturn this.getRepoContents(owner+'/'+repo).then(function(resp) {\n\t\t\treturn true;\n\t\t}.bind(this), function(err) {\n\t\t\tconsole.log(err);\n\t\t\treturn false;\n\t\t}.bind(this));\n\t},\n\n\tgetPermissionsForUser: function(owner, repo, username) {\n\t\treturn this.octokit.repos.getCollaboratorPermissionLevel({\n\t\t\towner, repo, username\n\t\t}).then(function(resp) {\n\t\t\treturn resp.data.permission;\n\t\t}.bind(this), function(err) {\n\t\t\treturn 'none';\n\t\t}.bind(this));\n\t},\n\n\tsaveFile: async function(owner, repo, path, content, branch, message, sha) {\n\t\tif (sha === undefined) {\n\t\t\tsha = await this.getLatestFileSHA({owner, repo, branch, path})\n\t\t}\n\t\treturn this.octokit.repos.createOrUpdateFile({owner, repo, path, content: btoa(content), branch, message, sha});\n\t},\n\n\t// UTILITIES\n\n\tparseFullName: function(fullName) {\n\t\tlet [owner, repo] = fullName.split('/');\n\t\treturn {owner, repo};\n\t},\n\n\tgetBranchSHAs: function(params) {\n\t\treturn this.octokit.repos.getBranch({\n\t\t\towner: params.owner,\n\t\t\trepo: params.repo,\n\t\t\tbranch: params.branch,\n\t\t\theaders: {\n\t\t\t\t'If-None-Match': '' // cache busting\n\t\t\t}\n\t\t}).then((resp) => {\n\t\t\treturn {\n\t\t\t\t...params,\n\t\t\t\tbaseTreeSHA: resp.data.commit.commit.tree.sha,\n\t\t\t\tparentCommitSHA: resp.data.commit.sha\n\t\t\t}\n\t\t})\n\t},\n\n\tgetLatestFileSHA: async function(params) {\n\t\tconst {owner, repo, branch, path} = params\n\t\tconst {data: {data: {repository: {object: result}}}} = await this.octokit.request({\n\t\t\tmethod: 'POST',\n\t\t\turl: '/graphql',\n\t\t\tquery: `{\n\t\t\t\trepository(owner: \"${owner}\", name: \"${repo}\") {\n\t\t\t\t\tobject(expression: \"${branch}:${path}\") {\n\t\t\t\t\t\t... on Blob {\n\t\t\t\t\t\t\toid\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}`\n\t\t}).catch(function(error) {\n\t\t\tconsole.log(error);\n\t\t});\n\t\tconst sha = result ? result.oid : undefined\n\t\treturn sha\n\t},\n\n\tunflattenContents: function(flatContents) {\n\t\tconst files = flatContents.filter(file=>file.type==='blob')\n\t\tvar result = {type: 'folder', name: '', path: '', contents: []}\n\t\tconst findSubFolder = (parentFolder, folderNameToFind) => {\n\t\t\t const subfolder = parentFolder.contents.find(el => {\n\t\t\t \treturn el.type === 'folder' && el.name === folderNameToFind\n\t\t\t })\n\t\t\treturn subfolder;\n\t\t}\n\t\tconst addSubFolder = (newFolderName, parentFolder) => {\n\t\t\tconst newSubFolder = {type: 'folder', name: newFolderName, path: `${parentFolder.path}/${newFolderName}`, contents:[]}\n\t\t\tparentFolder.contents.push(newSubFolder)\n\t\t\treturn newSubFolder;\n\t\t}\n\t\tconst addFile = (newFileName, parentFolder) => {\n\t\t\tconst newFile = {type: 'file', name: newFileName, path: `${parentFolder.path}/${newFileName}`}\n\t\t\tparentFolder.contents.push(newFile)\n\t\t}\n\t\tconst isFile = (pathSections, currentIndex) => {\n\t\t\treturn pathSections.length - 1 == currentIndex\n\t\t}\n\n\t\tfiles.forEach(file=>{\n\t\t\tconst pathSections = file.path.split('/')\n\t\t\tpathSections.reduce(function(parentFolder, pathSection, pathSectionIndex) {\n\t\t\t\tconst subFolder = findSubFolder(parentFolder, pathSection)\n\t\t\t\tif (subFolder) {\n\t\t\t\t\treturn subFolder\n\t\t\t\t} else if (isFile(pathSections, pathSectionIndex)) {\n\t\t\t\t\treturn addFile(pathSection, parentFolder)\n\t\t\t\t} else {\n\t\t\t\t\treturn addSubFolder(pathSection, parentFolder)\n\t\t\t\t}\n\t\t\t}, result)\n\t\t})\n\t\treturn result\n\t}\n});\n","Ext.define(\"Voyant.notebook.github.ReposBrowser\", {\n\textend: \"Ext.container.Container\",\n\txtype: \"githubreposbrowser\",\n\tconfig: {\n\t\trepoType: 'owner',\n\t\tselectedNode: undefined,\n\t\trepoId: undefined,\n\t\tpath: undefined\n\t},\n\n\toctokit: undefined,\n\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\t\n\t\tthis.octokit = config.octokit;\n\n    \tthis.callParent(arguments);\n    },\n\n\tinitComponent: function() {\n\t\tExt.apply(this, {\n\t\t\tlayout: {\n\t\t\t\ttype: 'hbox',\n\t\t\t\talign: 'stretch',\n\t\t\t\tpack: 'start'\n\t\t\t},\n\t\t\titems: [{\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\talign: 'stretch',\n\t\t\t\t\tpack: 'start'\n\t\t\t\t},\n\t\t\t\tflex: 1,\n\t\t\t\titems: [{\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'accordion'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\ttitle: 'My Repositories',\n\t\t\t\t\t\tframe: true,\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\txtype: 'radiogroup',\n\t\t\t\t\t\t\tfieldLabel: 'Show repositories for which I am',\n\t\t\t\t\t\t\tlabelAlign: 'top',\n\t\t\t\t\t\t\tlayout: 'vbox',\n\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\tboxLabel: 'Owner',\n\t\t\t\t\t\t\t\tname: 'repoType',\n\t\t\t\t\t\t\t\tinputValue: 'owner',\n\t\t\t\t\t\t\t\tchecked: true\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\tboxLabel: 'Collaborator',\n\t\t\t\t\t\t\t\tname: 'repoType',\n\t\t\t\t\t\t\t\tinputValue: 'collaborator'\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\tboxLabel: 'Organization Member',\n\t\t\t\t\t\t\t\tname: 'repoType',\n\t\t\t\t\t\t\t\tinputValue: 'organization_member'\n\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\tchange: function(field, newValues, oldValue) {\n\t\t\t\t\t\t\t\t\tthis.setRepoType(newValues.repoType);\n\t\t\t\t\t\t\t\t\tthis.clearTree(true);\n\t\t\t\t\t\t\t\t\tthis.octokit.getReposForAuthenticatedUser(this.getRepoType(), 0, 100).then((resp) => {\n\t\t\t\t\t\t\t\t\t\tthis.addReposToTree(resp.data);\n\t\t\t\t\t\t\t\t\t},(error) => {\n\t\t\t\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\texpand: function() {\n\t\t\t\t\t\t\t\tthis.clearTree(true);\n\t\t\t\t\t\t\t\tthis.octokit.getReposForAuthenticatedUser(this.getRepoType(), 0, 100).then((resp) => {\n\t\t\t\t\t\t\t\t\tthis.addReposToTree(resp.data);\n\t\t\t\t\t\t\t\t},(error) => {\n\t\t\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t},{\n\t\t\t\t\t\ttitle: 'Public Repositories',\n\t\t\t\t\t\tframe: true,\n\t\t\t\t\t\tlayout: 'vbox',\n\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\tfieldLabel: 'Limit to user or organization',\n\t\t\t\t\t\t\tlabelAlign: 'top',\n\t\t\t\t\t\t\txtype: 'textfield'\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\ttext: 'Search',\n\t\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\t\thandler: function(button) {\n\t\t\t\t\t\t\t\tlet repoOwner = button.prev('textfield').getValue();\n\t\t\t\t\t\t\t\tif (repoOwner !== '') {\n\t\t\t\t\t\t\t\t\tthis.clearTree(true);\n\t\t\t\t\t\t\t\t\tthis.octokit.getReposForUser(repoOwner, 0, 100).then((resp) => {\n\t\t\t\t\t\t\t\t\t\tthis.addReposToTree(resp.data.items);\n\t\t\t\t\t\t\t\t\t},(error) => {\n\t\t\t\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}],\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\texpand: function() {\n\t\t\t\t\t\t\t\tthis.clearTree();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t\t// ,{\n\t\t\t\t// \tpadding: '20 0 0 0',\n\t\t\t\t// \titems: [{\n\t\t\t\t// \t\tfieldLabel: 'Search within repositories',\n\t\t\t\t// \t\tlabelAlign: 'top',\n\t\t\t\t// \t\txtype: 'textfield'\n\t\t\t\t// \t},{\n\t\t\t\t// \t\txtype: 'button',\n\t\t\t\t// \t\ttext: 'Search',\n\t\t\t\t// \t\tmargin: '0 5 0 0',\n\t\t\t\t// \t\thandler: function(button) {\n\t\t\t\t// \t\t\tlet query = button.prev('textfield').getValue();\n\t\t\t\t// \t\t\tif (query !== '') {\n\t\t\t\t// \t\t\t\tthis.searchWithinRepositories(query);\n\t\t\t\t// \t\t\t}\n\t\t\t\t// \t\t},\n\t\t\t\t// \t\tscope: this\n\t\t\t\t// \t},{\n\t\t\t\t// \t\txtype: 'button',\n\t\t\t\t// \t\ttext: 'Clear',\n\t\t\t\t// \t\thandler: function(button) {\n\t\t\t\t\t\t\t\n\t\t\t\t// \t\t},\n\t\t\t\t// \t\tscope: this\n\t\t\t\t// \t}]\n\t\t\t\t// }\n\t\t\t\t]\n\t\t\t},{\n\t\t\t\tflex: 2,\n\t\t\t\tlayout: 'fit',\n\t\t\t\txtype: 'treepanel',\n\t\t\t\titemId: 'repoTree',\n\t\t\t\ttitle: 'Repositories',\n\t\t\t\tscrollable: true,\n\t\t\t\trootVisible: false,\n\t\t\t\tviewConfig: {\n\t\t\t\t\temptyText: 'No results',\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tafteritemexpand: function(node, index, el) {\n\t\t\t\t\t\t\tif (node.hasChildNodes() === false) {\n\t\t\t\t\t\t\t\tswitch(node.data.type) {\n\t\t\t\t\t\t\t\t\tcase 'repo':\n\t\t\t\t\t\t\t\t\t\tlet tr = el.querySelector('tr');\n\t\t\t\t\t\t\t\t\t\tExt.fly(tr).addCls('x-grid-tree-loading');\n\t\t\t\t\t\t\t\t\t\tthis.octokit.getRepoContents(node.getId()).then(function(resp) {\n\t\t\t\t\t\t\t\t\t\t\tExt.fly(tr).removeCls('x-grid-tree-loading');\n\t\t\t\t\t\t\t\t\t\t\tthis.addRepoContentsToNode(node, resp);\n\t\t\t\t\t\t\t\t\t\t}.bind(this))\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'folder':\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\titemclick: function(view, node, el) {\n\t\t\t\t\t\t\tthis.setSelectedNode(node);\n\t\t\t\t\t\t\tthis.fireEvent('nodeSelected', this, node.data.type, node);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tstore: {\n\t\t\t\t\troot: {\n\t\t\t\t\t\tname: 'Root',\n\t\t\t\t\t\tchildren: []\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tboxready: function() {\n\t\t\t\t\tthis.down('#repoTree').setLoading(true);\n\t\t\t\t\tthis.octokit.getReposForAuthenticatedUser(this.getRepoType(), 0, 100).then((resp) => {\n\t\t\t\t\t\tthis.addReposToTree(resp.data);\n\t\t\t\t\t},(error) => {\n\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.callParent(arguments);\n\t},\n\n\tupdateSelectedNode: function(node, oldValue) {\n\t\tif (node !== undefined) {\n\t\t\tlet repoParent = node;\n\t\t\twhile (repoParent !== null && repoParent.data.type !== 'repo') {\n\t\t\t\trepoParent = repoParent.parentNode;\n\t\t\t}\n\n\t\t\tthis.setRepoId(repoParent.getId());\n\t\t\tthis.setPath(node.getId());\n\t\t} else {\n\t\t\tthis.setRepoId(undefined);\n\t\t\tthis.setPath(undefined);\n\t\t}\n\t},\n\n\tclearTree: function(setLoading) {\n\t\tlet repoTree = this.down('#repoTree');\n\t\tlet root = repoTree.getRootNode();\n\t\troot.removeAll();\n\t\trepoTree.getView().refresh();\n\n\t\tif (setLoading) {\n\t\t\trepoTree.setLoading(true);\n\t\t}\n\n\t\tthis.setSelectedNode(undefined);\n\t\tthis.fireEvent('nodeDeselected', this);\n\t},\n\n\taddReposToTree: function(rawRepos) {\n\t\tlet repoTree = this.down('#repoTree');\n\t\trepoTree.setLoading(false);\n\t\tlet root = repoTree.getRootNode();\n\t\tlet repos = rawRepos.map((repo) => {\n\t\t\treturn {\n\t\t\t\tid: repo.full_name,\n\t\t\t\ttext: repo.full_name,\n\t\t\t\tdescription: repo.description,\n\t\t\t\tleaf: false,\n\t\t\t\ttype: 'repo'\n\t\t\t}\n\t\t});\n\t\troot.appendChild(repos);\n\t},\n\n\taddRepoContentsToNode: function(node, octokitResponse) {\n\t\tfunction parseContents(content) {\n\t\t\tlet nodeConfig = {\n\t\t\t\tid: content.path,\n\t\t\t\ttext: content.name,\n\t\t\t\ttype: content.type,\n\t\t\t\tleaf: content.type === 'file'\n\t\t\t};\n\t\t\tif (nodeConfig.leaf === false) {\n\t\t\t\tnodeConfig.children = [];\n\t\t\t\tcontent.contents.forEach((child) => {\n\t\t\t\t\tnodeConfig.children.push(parseContents(child));\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn nodeConfig;\n\t\t}\n\t\tlet contents = parseContents(octokitResponse.contents);\n\t\tnode.appendChild(contents.children);\n\t}\n})","Ext.define(\"Voyant.notebook.github.FileSaver\", {\n\textend: \"Ext.container.Container\",\n\txtype: \"githubfilesaver\",\n\tconfig: {\n\t\tcurrentFile: undefined,\n\t\tusername: undefined\n\t},\n\n\toctokit: undefined,\n\tsaveData: undefined,\n\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\t\n\t\tthis.octokit = config.octokit;\n\t\tthis.saveData = config.saveData;\n\n\t\tthis.setCurrentFile(config.currentFile);\n\n    \tthis.callParent(arguments);\n    },\n\n\tinitComponent: function() {\n\t\tExt.apply(this, {\n\t\t\tlayout: {\n\t\t\t\ttype: 'vbox',\n\t\t\t\tpack: 'start',\n\t\t\t\talign: 'stretch'\n\t\t\t},\n\t\t\titems: [{\n\t\t\t\txtype: 'githubreposbrowser',\n\t\t\t\toctokit: this.octokit,\n\t\t\t\titemId: 'repoBrowser',\n\t\t\t\tflex: 1,\n\t\t\t\tlisteners: {\n\t\t\t\t\tnodeSelected: function(src, type, node) {\n\t\t\t\t\t\tconst form = this.queryById('saveForm').getForm();\n\t\t\t\t\t\tconst [owner, repo] = src.getRepoId().split('/');\n\t\t\t\t\t\tform.setValues({owner, repo});\n\t\t\t\t\t\tif (type === 'file') {\n\t\t\t\t\t\t\tconst pathComponents = this.getPathComponents(src.getPath());\n\t\t\t\t\t\t\tform.setValues({...pathComponents});\n\t\t\t\t\t\t} else if (type === 'folder') {\n\t\t\t\t\t\t\tconst folder = src.getPath().replace(/^\\//, '');\n\t\t\t\t\t\t\tform.setValues({folder, file: ''});\n\t\t\t\t\t\t} else if (type === 'repo') {\n\t\t\t\t\t\t\tform.setValues({folder: '', file: ''});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tnodeDeselected: function(node) {\n\t\t\t\t\t\t// loadWin.queryById('load').setDisabled(true);\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t},{\n\t\t\t\tbodyPadding: '10',\n\t\t\t\theight: 200,\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\tpack: 'start'\n\t\t\t\t},\n\t\t\t\txtype: 'form',\n\t\t\t\titemId: 'saveForm',\n\t\t\t\titems: [{\n\t\t\t\t\thtml: '<span class=\"x-panel-header-title-default\">Repository Path</span>'\n\t\t\t\t},{\n\t\t\t\t\txtype: 'container',\n\t\t\t\t\tlayout: 'hbox',\n\t\t\t\t\tdefaults: {\n\t\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\t\tlabelAlign: 'top'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\tfieldLabel: 'GitHub User',\n\t\t\t\t\t\tname: 'owner',\n\t\t\t\t\t\tallowBlank: false,\n\t\t\t\t\t\tmargin: '0 10 0 0'\n\t\t\t\t\t},{\n\t\t\t\t\t\tfieldLabel: 'Repository Name',\n\t\t\t\t\t\tallowBlank: false,\n\t\t\t\t\t\tname: 'repo'\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\thtml: '<span class=\"x-panel-header-title-default\">File Path</span>',\n\t\t\t\t\tmargin: '10 0 0 0',\n\t\t\t\t},{\n\t\t\t\t\txtype: 'container',\n\t\t\t\t\tlayout: 'hbox',\n\t\t\t\t\tdefaults: {\n\t\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\t\tlabelAlign: 'top'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\tfieldLabel: 'Folder(s)',\n\t\t\t\t\t\tname: 'folder',\n\t\t\t\t\t\tallowBlank: true,\n\t\t\t\t\t\tmargin: '0 10 0 0'\n\t\t\t\t\t},{\n\t\t\t\t\t\tfieldLabel: 'File Name',\n\t\t\t\t\t\tallowBlank: false,\n\t\t\t\t\t\tname: 'file'\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\t/*\n\t\t\t\t\txtype: 'container',\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'hbox',\n\t\t\t\t\t\talign: 'middle',\n\t\t\t\t\t\tpack: 'start'\n\t\t\t\t\t},\n\t\t\t\t\tmargin: '25 0 0 0',\n\t\t\t\t\tdefaults: {\n\t\t\t\t\t\txtype: 'button'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\ttext: 'Save',\n\t\t\t\t\t\thandler: function () {\n\t\t\t\t\t\t\tthis.doSave(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this,\n\t\t\t\t\t\tmargin: '0 10 0 0'\n\t\t\t\t\t}\n\t\t\t\t\t// ,{\n\t\t\t\t\t// \ttext: 'Save as Pull Request',\n\t\t\t\t\t// \thandler: function () {\n\t\t\t\t\t// \t\tthis.doSave(true);\n\t\t\t\t\t// \t},\n\t\t\t\t\t// \tscope: this\n\t\t\t\t\t// }\n\t\t\t\t\t]\n\t\t\t\t},{\n\t\t\t\t\t*/\n\t\t\t\t\titemId: 'status',\n\t\t\t\t\thtml: '',\n\t\t\t\t\tmargin: '15 0 0 0'\n\t\t\t\t}],\n\t\t\t\tlisteners: {\n\t\t\t\t\tvaliditychange: function(form, valid) {\n\t\t\t\t\t\tthis.fireEvent('formValidityChange', this, valid);\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tboxready: function() {\n\t\t\t\t\tthis.initForm();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\n\t\tthis.callParent(arguments);\n\t},\n\n\tinitForm: function() {\n\t\tthis.octokit.getInfoForAuthenticatedUser().then(function(resp) {\n\t\t\tconst username = resp.data.login;\n\t\t\tthis.setUsername(username);\n\n\t\t\tconst form = this.queryById('saveForm').getForm();\n\t\t\tconst currentFile = this.getCurrentFile();\t\t\t\n\t\t\tif (currentFile !== undefined) {\n\t\t\t\tconst pathComponents = this.getPathComponents(currentFile.path);\n\t\t\t\tform.setValues({\n\t\t\t\t\towner: currentFile.owner,\n\t\t\t\t\trepo: currentFile.repo,\n\t\t\t\t\t...pathComponents\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tform.setValues({owner: username});\n\t\t\t}\n\t\t}.bind(this))\n\t},\n\n\tgetPathComponents: function(path) {\n\t\tconst pathComponents = path.split('/');\n\t\tlet file = pathComponents[pathComponents.length-1];\n\t\tlet folder = '';\n\t\tif (pathComponents.length > 2) {\n\t\t\tfolder = pathComponents.slice(0, -1).join('/');\n\t\t}\n\t\treturn {\n\t\t\tfolder,\n\t\t\tfile\n\t\t}\n\t},\n\n\tdoSave: async function(isPR=false) {\n\t\tconst form = this.queryById('saveForm').getForm();\n\t\tif (form.isValid()) {\n\t\t\tthis.fireEvent('fileSaving', this);\n\t\t\tconst {owner, repo, folder, file} = form.getValues();\n\t\t\tlet path = file;\n\t\t\tif (folder !== '') {\n\t\t\t\tpath = folder+'/'+file;\n\t\t\t}\n\t\t\tthis.setStatus('Checking repository');\n\t\t\tconst repoExists = await this.octokit.doesRepoExist(owner, repo);\n\t\t\tif (repoExists) {\n\t\t\t\tthis.setStatus('Checking permissions');\n\t\t\t\tconst permission = await this.octokit.getPermissionsForUser(owner, repo, this.getUsername());\n\t\t\t\tif (permission === 'none' || permission === 'read') {\n\t\t\t\t\tthis.setStatus('You don\\'t have permission to write to this repository', 'error');\n\t\t\t\t} else {\n\t\t\t\t\tthis.setStatus('Checking file');\n\t\t\t\t\tconst branch = 'master';\n\t\t\t\t\tconst content = this.saveData;\n\t\t\t\t\tconst fileData = {owner, repo, branch, path};\n\t\t\t\t\tconst sha = await this.octokit.getLatestFileSHA(fileData);\n\t\t\t\t\tif (sha !== undefined) {\n\t\t\t\t\t\tconst message = 'File updated by Spyral';\n\t\t\t\t\t\tthis.octokit.saveFile(owner, repo, path, content, branch, message, sha).then(function(resp) {\n\t\t\t\t\t\t\tthis.setStatus('File updated');\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\tthis.fireEvent('fileSaved', this, fileData);\n\t\t\t\t\t\t\t}.bind(this), 500);\n\t\t\t\t\t\t}.bind(this), function(error) {\n\t\t\t\t\t\t\tthis.setStatus('Error: '+error.message, 'error');\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst message = 'File created by Spyral';\n\t\t\t\t\t\tthis.octokit.saveFile(owner, repo, path, content, branch, message).then(function(resp) {\n\t\t\t\t\t\t\tthis.setStatus('File created');\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\tthis.fireEvent('fileSaved', this, fileData);\n\t\t\t\t\t\t\t}.bind(this), 500);\n\t\t\t\t\t\t}.bind(this), function(error) {\n\t\t\t\t\t\t\tthis.setStatus('Error: '+error.message, 'error');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.setStatus('The specified repository does not exist', 'error');\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setStatus('Form is not valid', 'error');\n\t\t}\n\t},\n\n\tsetStatus: function(message, type) {\n\t\tlet cls = '';\n\t\tif (type && type === 'error') {\n\t\t\tcls = 'x-form-invalid-under-default';\n\t\t}\n\t\tthis.queryById('status').setHtml(`<span class=\"${cls}\">${message}</span>`);\n\t}\n});\n","Ext.define(\"Voyant.notebook.github.GitHubDialogs\", {\n\textend: \"Ext.Component\",\n\trequires: ['Voyant.notebook.github.OctokitWrapper','Voyant.notebook.github.ReposBrowser','Voyant.notebook.github.FileSaver'],\n\talias: \"widget.githubdialogs\",\n\tconfig: {\n\t\trepoType: 'owner',\n\t\tcurrentFile: undefined\n\t},\n\n\toctokitWrapper: undefined,\n\n\tcurrentWindow: undefined,\n\n\tparent: undefined,\n\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tthis.parent = config.parent;\n    \tthis.callParent(arguments);\n    },\n\n\tinitComponent: function() {\n\t\tthis.callParent(arguments);\n\t},\n\n\tclose: function() {\n\t\tif (this.currentWindow !== undefined) {\n\t\t\tthis.currentWindow.close();\n\t\t\tthis.currentWindow = undefined;\n\t\t}\n\t},\n\n\tshowLoad: function() {\n\t\tconst me = this;\n\n\t\tif (this.parent.isAuthenticated) {\n\t\t\tif (this.octokitWrapper === undefined) {\n\t\t\t\tthis.initOctokitWrapper(this.parent.githubAuthToken);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.parent.showGitHubAuthentication(this.showLoad.bind(this));\n\t\t\treturn;\n\t\t}\n\n\t\tlet loadWin = undefined;\n\t\tloadWin = Ext.create('Ext.window.Window', {\n\t\t\ttitle: 'Load from GitHub',\n\t\t\tmodal: true,\n\t\t\twidth: 750,\n\t\t\theight: 550,\n\t\t\tclosable: false,\n\t\t\tmaximizable: true,\n\t\t\tlayout: 'fit',\n\t\t\titems: {\n\t\t\t\txtype: 'githubreposbrowser',\n\t\t\t\toctokit: this.octokitWrapper,\n\t\t\t\titemId: 'repoBrowser',\n\t\t\t\tlisteners: {\n\t\t\t\t\tnodeSelected: function(src, type, node) {\n\t\t\t\t\t\tif (type === 'file') {\n\t\t\t\t\t\t\tloadWin.queryById('load').setDisabled(false);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tloadWin.queryById('load').setDisabled(true);\t\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tnodeDeselected: function(node) {\n\t\t\t\t\t\tloadWin.queryById('load').setDisabled(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'Load Selected',\n\t\t\t\titemId: 'load',\n\t\t\t\tdisabled: true,\n\t\t\t\thandler: function() {\n\t\t\t\t\tconst repoBrowser = loadWin.queryById('repoBrowser');\n\t\t\t\t\tthis.loadFile(repoBrowser.getRepoId(), repoBrowser.getPath());\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'Cancel',\n\t\t\t\thandler: function() {\n\t\t\t\t\tme.close();\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\t\tloadWin.show();\n\n\t\tthis.currentWindow = loadWin;\n\t},\n\n\tshowSave: function(data) {\n\t\tconst me = this;\n\n\t\tif (this.parent.isAuthenticated) {\n\t\t\tif (this.octokitWrapper === undefined) {\n\t\t\t\tthis.initOctokitWrapper(this.parent.githubAuthToken);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.parent.showGitHubAuthentication(this.showSave.bind(this));\n\t\t\treturn;\n\t\t}\n\n\t\tlet saveWin = undefined;\n\t\tsaveWin = Ext.create('Ext.window.Window', {\n\t\t\ttitle: 'Save to GitHub',\n\t\t\tmodal: true,\n\t\t\twidth: 750,\n\t\t\theight: 650,\n\t\t\tclosable: false,\n\t\t\tmaximizable: true,\n\t\t\tlayout: 'fit',\n\t\t\titems: {\n\t\t\t\txtype: 'githubfilesaver',\n\t\t\t\toctokit: this.octokitWrapper,\n\t\t\t\tcurrentFile: this.getCurrentFile(),\n\t\t\t\tsaveData: data,\n\t\t\t\titemId: 'fileSaver',\n\t\t\t\tlisteners: {\n\t\t\t\t\tformValidityChange: function(src, valid) {\n\t\t\t\t\t\tsaveWin.queryById('save').setDisabled(!valid);\n\t\t\t\t\t},\n\t\t\t\t\tfileSaved: function(src, fileData) {\n\t\t\t\t\t\tme.fireEvent('fileSaved', me, fileData);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'Save',\n\t\t\t\titemId: 'save',\n\t\t\t\tdisabled: true,\n\t\t\t\thandler: function() {\n\t\t\t\t\tsaveWin.queryById('fileSaver').doSave();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'Cancel',\n\t\t\t\thandler: function() {\n\t\t\t\t\tme.close();\n\t\t\t\t\tme.fireEvent('saveCancelled', me);\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\t\tsaveWin.show();\n\n\t\tthis.currentWindow = saveWin;\n\t},\n\n\tinitOctokitWrapper: function(authToken) {\n\t\tthis.octokitWrapper = new Voyant.notebook.github.OctokitWrapper({\n\t\t\tauthToken: authToken\n\t\t});\n\t},\n\n\tloadFileFromId: function(id) {\n\t\tconst parts = decodeURIComponent(id).split('/');\n\t\tif (parts.length >= 3) {\n\t\t\tconst repoId = parts[0]+'/'+parts[1];\n\t\t\tconst filePath = parts.slice(2).join('/');\n\t\t\tthis.loadFile(repoId, filePath);\n\t\t}\n\t},\n\n\tloadFile: function(repoId, filePath) {\n\t\tif (this.parent.isAuthenticated) {\n\t\t\tif (this.octokitWrapper === undefined) {\n\t\t\t\tthis.initOctokitWrapper(this.parent.githubAuthToken);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.parent.showGitHubAuthentication(this.loadFile.bind(this));\n\t\t\treturn;\n\t\t}\n\n\t\tthis.octokitWrapper.loadFile(repoId, filePath).then((data) => {\n\t\t\tthis.setCurrentFile(data);\n\t\t\tthis.fireEvent('fileLoaded', this, data);\n\t\t});\n\t}\n})\n","Ext.define(\"Voyant.notebook.StorageDialogs\", {\n\textend: \"Ext.Component\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: \"\",\n\tstatics: {\n\t\ti18n: {\n\t\t\tsaveNewNotebook: 'Save New Notebook',\n\t\t\toverwriteNotebook: 'Overwrite Existing Notebook',\n\t\t\topen: 'Open',\n\t\t\tnotebookFile: 'Notebook File',\n\t\t\tselectFile: 'Select File',\n\t\t\topenFile: 'Open File',\n\t\t\tcancel: 'Cancel',\n\t\t\tmustSelect: 'You must select a file.'\n\t\t}\n\t},\n\n\tnotebookParent: undefined,\n\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n    \tthis.callParent(arguments);\n\n\t\tthis.notebookParent = config.notebookParent;\n    },\n\n\tinitComponent: function() {\n\t\tthis.callParent(arguments);\n\t},\n\t\n\tshowSave: function(data, metadata, notebookName='') {\n\t\tconst me = this;\n\t\tconst newNotebook = notebookName === '';\n\t\tconst title = newNotebook ? this.localize('saveNewNotebook') : this.localize('overwriteNotebook');\n\t\tExt.create('Ext.window.Window', {\n\t\t\ttitle: title,\n\t\t\tmodal: true,\n\t\t\titems: [{\n\t\t\t\txtype: 'form',\n\t\t\t\twidth: 450,\n\t\t\t\tbodyPadding: 5,\n\t\t\t\tplugins: ['datatip'],\n\t\t\t\tlisteners: {\n\t\t\t\t\tbeforeshowtip: function(tip, config, msg) {\n\t\t\t\t\t\treturn !config.currentTarget.el.hasCls('x-form-invalid'); // don't show tooltip if the field is invalid because otherwise the two tips overlap\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tlayout: 'anchor',\n\t\t\t\tdefaults: {\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tlabelWidth: 160,\n\t\t\t\t\twidth: 360,\n\t\t\t\t\tinputAttrTpl: 'spellcheck=\"false\"',\n\t\t\t\t\txtype: 'textfield'\n\t\t\t\t},\n    \t    \titems: [{\n\t\t\t\t\tfieldLabel: 'Notebook ID' + (newNotebook ? ' (optional)' : ''),\n\t\t\t\t\tname: 'notebookName',\n\t\t\t\t\tvalue: notebookName,\n\t\t\t\t\tallowBlank: true,\n\t\t\t\t\treadOnly: !newNotebook,\n\t\t\t\t\ttooltip: 'An ID used to identify this notebook. If left blank, one will be generated for you.',\n\t\t\t\t\tvalidator: function(val) {\n\t\t\t\t\t\tif (val == '') {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t} else if (val.match(/^[A-Za-z0-9-]{4,32}$/) === null) {\n\t\t\t\t\t\t\treturn 'The ID must be between 4 and 32 characters. You may use alphanumeric characters and dash.'\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}],\n\t\t\tbuttons: [{\n    \t        text: 'Cancel',\n\t            ui: 'default-toolbar',\n    \t        handler: function() {\n    \t            this.up('window').close();\n\t\t\t\t\tme.fireEvent('saveCancelled', me);\n    \t        }\n    \t    }, \" \", {\n    \t        text: 'Save',\n    \t        handler: function(button) {\n\t\t\t\t\tconst win = button.up('window');\n\t\t\t\t\tconst form = win.down('form').getForm();\n\t\t\t\t\tif (form.isValid()) {\n\t\t\t\t\t\tconst values = form.getValues();\n\t\t\t\t\t\tvalues.data = data;\n\t\t\t\t\t\tvalues.metadata = metadata;\n\t\t\t\t\t\tif (newNotebook && values.notebookName !== '') {\n\t\t\t\t\t\t\tconst info = me.notebookParent.accountInfo;\n\t\t\t\t\t\t\tconst userId = info.id;\n\t\t\t\t\t\t\tme.doesNotebookExist(userId, values.notebookName).then(function(exists) {\n\t\t\t\t\t\t\t\tif (exists) {\n\t\t\t\t\t\t\t\t\tform.findField('notebookName').markInvalid('That Notebook ID already exists.');\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\twin.close();\n\t\t\t\t\t\t\t\t\tme.doSave(values);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twin.close();\n\t\t\t\t\t\t\tme.doSave(values);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n    \t        }\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tclose: function() {\n\t\t\t\t\tme.fireEvent('close', me); // need an additional close event in case the user uses the close tool / esc button\n\t\t\t\t}\n\t\t\t}\n\t\t}).show();\n\t},\n\n\tshowLoad: function() {\n\t\tconst me = this;\n\t\tExt.create('Ext.window.Window', {\n\t\t\ttitle: me.localize('open'),\n\t\t\titems: [{\n\t\t\t\txtype: 'form',\n\t\t\t\twidth: 450,\n\t\t\t\tbodyPadding: 5,\n\t\t\t\tlayout: 'anchor',\n\t\t\t\tdefaults: {\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tlabelWidth: 160,\n\t\t\t\t\twidth: 360\n\t\t\t\t},\n\t\t\t\titems: [{\n\t\t\t\t\txtype: 'voyantfilefield',\n\t\t\t\t\tname: 'file',\n\t\t\t\t\tfieldLabel: me.localize('notebookFile'),\n\t\t\t\t\tallowBlank: false,\n\t\t\t\t\tbuttonText: me.localize('selectFile'),\n\t\t\t\t\taccept: 'text/html,application/json'\n\t\t\t\t}],\n\t\t\t\tbuttons: [{\n\t\t\t\t\ttext: me.localize('cancel'),\n\t\t\t\t\tui: 'default-toolbar',\n\t\t\t\t\thandler: function() {\n\t\t\t\t\t\tthis.up('window').close();\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\ttext: me.localize('openFile'),\n\t\t\t\t\thandler: function(button) {\n\t\t\t\t\t\tconst win = button.up('window');\n\t\t\t\t\t\tconst form = win.down('form').getForm();\n\t\t\t\t\t\tconst field = form.findField('file');\n\t\t\t\t\t\tif (form.isValid()) {\n\t\t\t\t\t\t\tconst file = field.fileInputEl.dom.files[0];\n\t\t\t\t\t\t\tconst fr = new FileReader();\n\t\t\t\t\t\t\tfr.onload = function(evt) {\n\t\t\t\t\t\t\t\tconst data = evt.target.result;\n\t\t\t\t\t\t\t\tme.fireEvent('fileLoaded', data);\n\t\t\t\t\t\t\t\twin.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfr.readAsText(file);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfield.markInvalid(me.localize('mustSelect'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}]\n\t\t}).show();\n\t},\n\n\tdoesNotebookExist: function(userId, notebookName) {\n\t\tconst dfd = new Ext.Deferred();\n\n\t\tSpyral.Load.trombone({\n\t\t\ttool: 'notebook.GitNotebookManager',\n\t\t\taction: 'exists',\n\t\t\tid: userId+this.notebookParent.NOTEBOOK_ID_SEPARATOR+notebookName,\n\t\t\tnoCache: 1\n\t\t}).then(function(json) {\n\t\t\tif (json.notebook.success) {\n\t\t\t\tvar exists = json.notebook.data === 'true';\n\t\t\t\tdfd.resolve(exists);\n\t\t\t} else {\n\t\t\t\tconsole.warn(json.notebook.error);\n\t\t\t\tdfd.resolve(false);\n\t\t\t}\n\t\t}).catch(function(err) {\n\t\t\tconsole.warn(err);\n\t\t});\n\n\t\treturn dfd.promise;\n\t},\n\n\tdoSave: function({notebookName, data, metadata}) {\n\t\tconst me = this;\n\n\t\tconst dfd = new Ext.Deferred();\n\n\t\tme.fireEvent('fileSaving', me);\n\n\t\tif (notebookName.indexOf(this.notebookParent.NOTEBOOK_ID_SEPARATOR) !== -1) {\n\t\t\tconsole.warn('doSave: was sent notebookId instead of name');\n\t\t\tnotebookName = notebookName.split(this.notebookParent.NOTEBOOK_ID_SEPARATOR)[1];\n\t\t}\n\n\t\tvar totalData = {data: data, metadata: JSON.stringify(metadata)};\n\t\tconsole.log('notebook size:',JSON.stringify(totalData).length);\n\t\t// TODO use form & isUpload options below, to handle large notebooks\n\t\t// https://docs.sencha.com/extjs/6.2.0/classic/Ext.Ajax.html#method-request\n\n\t\tExt.Ajax.request({\n\t\t\tmethod: 'POST',\n\t\t\turl: Voyant.application.getBaseUrlFull()+'spyral/account/save',\n\t\t\tparams: {\n\t\t\t\tname: notebookName,\n\t\t\t\tdata: data,\n\t\t\t\tmetadata: JSON.stringify(metadata)\n\t\t\t},\n\t\t\tsuccess: function(resp) {\n\t\t\t\tconst json = JSON.parse(resp.responseText);\n\t\t\t\tif (json.notebook.success) {\n\t\t\t\t\tme.fireEvent('fileSaved', me, json.notebook.id);\n\t\t\t\t\tdfd.resolve(true);\n\t\t\t\t} else {\n\t\t\t\t\tme.fireEvent('fileSaved', me, null, json.notebook.error);\n\t\t\t\t\tdfd.reject(false);\n\t\t\t\t}\n\t\t\t},\n\t\t\tfailure: function(resp) {\n\t\t\t\tme.fireEvent('fileSaved', me, null, resp.responseText);\n\t\t\t\tdfd.reject(false);\n\t\t\t}\n\t\t});\n\n\t\treturn dfd.promise;\n\t},\n\n\treset: function() {\n\t}\n})","Ext.define('Voyant.notebook.metadata.MetadataEditor', {\n\textend: 'Ext.form.Panel',\n\tmixins: ['Voyant.util.Localization'],\n\talias: 'widget.metadataeditor',\n\tstatics: {\n\t\ti18n: {\n\t\t\tmetadataAuthor: \"Author(s)\",\n    \t\tmetadataTitle: \"Title\",\n    \t\tmetadataTip: \"Edit notebook metadata.\",\n    \t\tmetadataKeywords: \"Keywords\",\n    \t\tmetadataDescription: \"Description\",\n    \t\tmetadataLicense: \"Licence\",\n    \t\tmetadataLanguage: \"Language\",\n\t\t\tmetadataCatalogue: \"Catalogue\",\n\t\t\tmetadataCatalogueInclude: \"Include this notebook in the public Catalogue?\"\n\t\t}\n\t},\n\n\tconstructor: function(config) {\n\t\tExt.apply(this, config, {\n\t\t\ttrackResetOnLoad: true,\n\t\t\titems: {\n\t\t\t\tbodyPadding: 5,\n\n\t\t\t\t// Fields will be arranged vertically, stretched to full width\n\t\t\t\tlayout: 'anchor',\n\t\t\t\tdefaults: {\n\t\t\t\t\tanchor: '100%',\n\t\t\t\t\tlabelAlign: \"right\"\n\t\t\t\t},\n\n\t\t\t\t// The fields\n\t\t\t\tdefaultType: 'textfield',\n\t\t\t\titems: [{\n\t\t\t\t\tfieldLabel: this.localize(\"metadataAuthor\"),\n\t\t\t\t\tname: 'author'\n\t\t\t\t},{\n\t\t\t\t\tfieldLabel: this.localize(\"metadataTitle\"),\n\t\t\t\t\tname: 'title'\n\t\t\t\t},{\n\t\t\t\t\tfieldLabel: this.localize(\"metadataKeywords\"),\n\t\t\t\t\tname: 'keywords',\n\t\t\t\t\txtype: 'tagfield',\n\t\t\t\t\tstore: {\n\t\t\t\t\t\txtype: 'store.json',\n\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t{name: 'label'},\n\t\t\t\t\t\t\t{name: 'count', type: 'integer'}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\tdisplayField: 'label',\n\t\t\t\t\tvalueField: 'label',\n\t\t\t\t\tqueryMode: 'local',\n\t\t\t\t\tfilterPickList: true,\n\t\t\t\t\tforceSelection: false,\n\t\t\t\t\tdelimiter: ',',\n\t\t\t\t\tcreateNewOnEnter: true,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tafterrender: function(cmp) {\n\t\t\t\t\t\t\tSpyral.Load.trombone({\n\t\t\t\t\t\t\t\ttool: 'notebook.CatalogueFacets',\n\t\t\t\t\t\t\t\tfacets: 'facet.keywords',\n\t\t\t\t\t\t\t\tnoCache: 1\n\t\t\t\t\t\t\t}).then(function(json) {\n\t\t\t\t\t\t\t\tcmp.getStore().loadRawData(json.catalogue.facets[0].results);\n\t\t\t\t\t\t\t\t// need to reset value to make sure previously set keywords show up\n\t\t\t\t\t\t\t\tcmp.setValue(cmp.getValue());\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: 'checkbox',\n\t\t\t\t\tfieldLabel: this.localize('metadataCatalogue'),\n\t\t\t\t\tboxLabel: this.localize('metadataCatalogueInclude'),\n\t\t\t\t\tname: 'catalogue',\n\t\t\t\t\tinputValue: 'true'\n\t\t\t\t},{\n\t\t\t\t\txtype: 'textarea',\n\t\t\t\t\tfieldLabel: this.localize(\"metadataDescription\"),\n\t\t\t\t\tname: 'description'\n\t\t\t\t},{\n\t\t\t\t\txtype: 'combo',\n\t\t\t\t\tfieldLabel: this.localize(\"metadataLicense\"),\n\t\t\t\t\tname: 'license',\n\t\t\t\t\tstore: {\n\t\t\t\t\t\tfields: ['text'],\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{\"text\": \"Apache License 2.0\"},\n\t\t\t\t\t\t\t{\"text\": \"BSD 3-Clause \\\"New\\\" or \\\"Revised\\\" license\"},\n\t\t\t\t\t\t\t{\"text\": \"BSD 2-Clause \\\"Simplified\\\" or \\\"FreeBSD\\\" license\"},\n\t\t\t\t\t\t\t{\"text\": \"Creative Commons Attribution (CC BY)\"},\n\t\t\t\t\t\t\t{\"text\": \"Creative Commons Attribution-ShareAlike (CC BY-SA)\"},\n\t\t\t\t\t\t\t{\"text\": \"Creative Commons Zero (CC0)\"},\n\t\t\t\t\t\t\t{\"text\": \"GNU General Public License (GPL)\"},\n\t\t\t\t\t\t\t{\"text\": \"GNU Library or \\\"Lesser\\\" General Public License (LGPL)\"},\n\t\t\t\t\t\t\t{\"text\": \"MIT license\"},\n\t\t\t\t\t\t\t{\"text\": \"Mozilla Public License 2.0\"},\n\t\t\t\t\t\t\t{\"text\": \"Common Development and Distribution License\"},\n\t\t\t\t\t\t\t{\"text\": \"Eclipse Public License\"}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: 'combo',\n\t\t\t\t\tname: 'language',\n\t\t\t\t\tfieldLabel: this.localize(\"metadataLanguage\"),\n\t\t\t\t\tstore: {\n\t\t\t\t\t\tfields: ['text'],\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{\"text\": \"Bengali\"},\n\t\t\t\t\t\t\t{\"text\": \"Bhojpuri\"},\n\t\t\t\t\t\t\t{\"text\": \"Egyptian Arabic\"},\n\t\t\t\t\t\t\t{\"text\": \"English\"},\n\t\t\t\t\t\t\t{\"text\": \"French\"},\n\t\t\t\t\t\t\t{\"text\": \"German\"},\n\t\t\t\t\t\t\t{\"text\": \"Gujarati\"},\n\t\t\t\t\t\t\t{\"text\": \"Hausa\"},\n\t\t\t\t\t\t\t{\"text\": \"Hindi\"},\n\t\t\t\t\t\t\t{\"text\": \"Indonesian\"},\n\t\t\t\t\t\t\t{\"text\": \"Italian\"},\n\t\t\t\t\t\t\t{\"text\": \"Japanese\"},\n\t\t\t\t\t\t\t{\"text\": \"Javanese\"},\n\t\t\t\t\t\t\t{\"text\": \"Kannada\"},\n\t\t\t\t\t\t\t{\"text\": \"Korean\"},\n\t\t\t\t\t\t\t{\"text\": \"Mandarin\"},\n\t\t\t\t\t\t\t{\"text\": \"Marathi\"},\n\t\t\t\t\t\t\t{\"text\": \"Persian\"},\n\t\t\t\t\t\t\t{\"text\": \"Portuguese\"},\n\t\t\t\t\t\t\t{\"text\": \"Russian\"},\n\t\t\t\t\t\t\t{\"text\": \"Southern Min\"},\n\t\t\t\t\t\t\t{\"text\": \"Spanish\"},\n\t\t\t\t\t\t\t{\"text\": \"Standard Arabic\"},\n\t\t\t\t\t\t\t{\"text\": \"Swahili\"},\n\t\t\t\t\t\t\t{\"text\": \"Tamil\"},\n\t\t\t\t\t\t\t{\"text\": \"Telugu\"},\n\t\t\t\t\t\t\t{\"text\": \"Thai\"},\n\t\t\t\t\t\t\t{\"text\": \"Turkish\"},\n\t\t\t\t\t\t\t{\"text\": \"Urdu\"},\n\t\t\t\t\t\t\t{\"text\": \"Vietnamese\"},\n\t\t\t\t\t\t\t{\"text\": \"Western Punjabi\"},\n\t\t\t\t\t\t\t{\"text\": \"Wu Chinese\"},\n\t\t\t\t\t\t\t{\"text\": \"Yue Chinese\"}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}\n\t\t});\n\t\tthis.callParent(arguments);\n\t},\n\tloadMetadata: function(metadata) {\n\t\tif (metadata instanceof Spyral.Metadata) {\n\t\t\tthis.loadRecord(Ext.create('Voyant.data.model.NotebookMetadata', {\n\t\t\t\ttitle: metadata.title,\n\t\t\t\tuserId: metadata.userId,\n\t\t\t\tauthor: metadata.author,\n\t\t\t\tcatalogue: metadata.catalogue,\n\t\t\t\tdescription: metadata.description,\n\t\t\t\tkeywords: metadata.keywords,\n\t\t\t\tlanguage: metadata.language,\n\t\t\t\tlicense: metadata.license\n\t\t\t}));\n\t\t}\n\t}\n});\n\nExt.define('Voyant.data.model.NotebookMetadata', {\n\textend: 'Ext.data.Model',\n\tfields: [\n\t\t{name: 'title', type: 'string'},\n\t\t{name: 'userId', type: 'string'},\n\t\t{name: 'author', type: 'string'},\n\t\t{name: 'catalogue', type: 'boolean', defaultValue: false},\n\t\t{name: 'description', type: 'string'},\n\t\t{name: 'keywords', type: 'string'},\n\t\t{name: 'language', type: 'string', defaultValue: 'English'},\n\t\t{name: 'license', type: 'string', defaultValue: 'Creative Commons Attribution (CC BY)'},\n\t\t{name: 'modified', type: 'date'},\n\t\t{name: 'created', type: 'date'}\n\t]\n});","Ext.define('Voyant.notebook.util.FormatConverter', {\n\timportFromHtml: function(html) {\n\t\tvar me = this;\n\n\t\tvar parser = new DOMParser();\n\t\tvar dom = parser.parseFromString(html, 'text/html');\n\t\t\n\t\tme.setMetadata(new Spyral.Metadata(dom));\n\t\t\n\t\tvar hasDomError = false;\n\t\tvar cells2Init = [];\n\t\tdom.querySelectorAll(\"section.notebook-editor-wrapper\").forEach(function(section) {\n\t\t\tvar classes = section.classList;\n\t\t\tif (classes.contains(\"notebooktexteditorwrapper\")) {\n\t\t\t\tvar editor = section.querySelector(\".notebook-text-editor\").innerHTML;\n\t\t\t\tme.addText(editor, undefined, section.id);\n\t\t\t} else if (classes.contains(\"notebookcodeeditorwrapper\") || classes.contains(\"notebookdatawrapper\")) {\n\t\t\t\tvar inputEl = section.querySelector(\".notebook-code-editor-raw\");\n\t\t\t\tvar typeRe = /\\beditor-mode-(\\w+)\\b/.exec(inputEl.className);\n\t\t\t\tvar editorType = typeRe[1];\n\t\t\t\tvar matchClass = 'notebookcodeeditorwrapper';\n\t\t\t\tif (editorType !== 'javascript') {\n\t\t\t\t\tmatchClass = 'notebookdatawrapper';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t/* in an ideal world we could use inputEl.innerHTML to get the contents\n\t\t\t\t * except that since it's in a parsed DOM it's already been transformed\n\t\t\t\t *  significantly. For instance, all >, <, and & character appear in the\n\t\t\t\t * html entities form (which breaks things like && () => {}). You also\n\t\t\t\t * get strange artefacts like if you have \"<div>\" in your code it may add\n\t\t\t\t * </div> to the end of the innerHTML (to make sure tags are balanced).\n\t\t\t\t * and of course textContent or innerText won't work because that will\n\t\t\t\t * strip any of the HTML formatting out. What's left is to use the parsing\n\t\t\t\t * to ensure the order and to properly grab the IDs and then to do character\n\t\t\t\t * searches on the original string. */\n\t\t\t\tvar secPos = html.indexOf(\"<section id='\"+section.id+\"' class='notebook-editor-wrapper \"+matchClass+\"'>\");\n\t\t\t\tvar startPre = html.indexOf(\"<pre class='notebook-code-editor-raw editor-mode-\", secPos);\n\t\t\t\tstartPre = html.indexOf(\">\", startPre)+1; // add the length of the string\n\t\t\t\tvar endPre = html.indexOf(\"</pre>\\n<div class='notebook-code-results\", startPre);\n\t\t\t\t\n\t\t\t\t// check if we have valid values\n\t\t\t\tif (secPos===-1 || startPre === -1 || endPre === -1) {\n\t\t\t\t\thasDomError = true;\n\t\t\t\t\t// this might work, unless the js code includes HTML\n\t\t\t\t\tinput = editorType === \"javascript\" ? inputEl.innerText : inputEl.innerHTML;\n\t\t\t\t} else {\n\t\t\t\t\tinput = html.substring(startPre, endPre);\n\t\t\t\t}\n\n\t\t\t\tvar output = section.querySelector(\".notebook-code-results\").innerHTML;\n\t\t\t\tvar expandResults = section.querySelector(\".notebook-code-results\").classList.contains('collapsed') === false;\n\n\t\t\t\tif (editorType === 'javascript') {\n\t\t\t\t\tvar codeCell = me.addCode({\n\t\t\t\t\t\tinput: input,\n\t\t\t\t\t\toutput: output,\n\t\t\t\t\t\texpandResults: expandResults,\n\t\t\t\t\t\tmode: editorType\n\t\t\t\t\t}, undefined, section.id);\n\t\n\t\t\t\t\tcells2Init.push(codeCell);\n\t\t\t\t\tcodeCell.on('initialized', function() {\n\t\t\t\t\t\tvar cellIndex = cells2Init.indexOf(codeCell);\n\t\t\t\t\t\tif (cellIndex !== -1) {\n\t\t\t\t\t\t\tcells2Init.splice(cellIndex, 1);\n\t\t\t\t\t\t\tif (cells2Init.length === 0) {\n\t\t\t\t\t\t\t\tme.fireEvent('notebookInitialized');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error('unknown cell initialized', codeCell);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// hack to get the data name from the dataviewer\n\t\t\t\t\tvar dataName = section.querySelector('.notebook-code-results .spyral-dv-left').firstChild.data;\n\t\t\t\t\tdataName = dataName.split(':')[0];\n\t\t\t\t\tvar dataCell = me.addData({\n\t\t\t\t\t\tinput: input,\n\t\t\t\t\t\toutput: output,\n\t\t\t\t\t\texpandResults: expandResults,\n\t\t\t\t\t\tdataName: dataName,\n\t\t\t\t\t\tmode: editorType\n\t\t\t\t\t}, undefined, section.id);\n\t\t\t\t\tcells2Init.push(dataCell);\n\t\t\t\t\tdataCell.on('initialized', function() {\n\t\t\t\t\t\tvar cellIndex = cells2Init.indexOf(dataCell);\n\t\t\t\t\t\tif (cellIndex !== -1) {\n\t\t\t\t\t\t\tcells2Init.splice(cellIndex, 1);\n\t\t\t\t\t\t\tif (cells2Init.length === 0) {\n\t\t\t\t\t\t\t\tme.fireEvent('notebookInitialized');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error('unknown cell initialized', dataCell);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (hasDomError) {\n\t\t\tme.showError(me.localize(\"errorParsingDomInput\"))\n\t\t}\n\t},\n\n\tgetInnerHeaderHtml: function() {\n\t\tlet html = \"\";\n\t\tif (this.getMetadata().title) {\n\t\t\thtml += \"<div class='title'>\"+this.getMetadata().title+\"</div>\";\n\t\t}\n\t\tif (this.getMetadata().author) {\n\t\t\thtml += \"<div class='author'>\"+this.getMetadata().author+\"</div>\";\n\t\t}\n\t\treturn html;\n\t},\n\t\n\tgetInnerFooterHtml: function() {\n\t\tvar text = \"\", metadata = this.getMetadata();\n\t\tif (metadata.author || metadata.license) {\n\t\t\tvar text = \"&copy;\";\n\t\t\tif (metadata.author) {text+=\" \"+metadata.author;}\n\t\t\tif (metadata.license) {text+=\" (\"+metadata.license+\")\";}\n\t\t\ttext += \". \";\n\t\t}\n\t\tif (metadata.created || metadata.modified) {\n\t\t\tvar created = metadata.shortDate(\"created\"), modified = metadata.shortDate(\"modified\");\n\t\t\tif (created) {\n\t\t\t\ttext += this.localize(\"created\")+\" \"+created+\".\"\n\t\t\t}\n\t\t\tif (modified && created!=modified) {\n\t\t\t\ttext += \" \"+this.localize(\"modified\")+\" \"+modified+\".\"\n\t\t\t}\n\t\t\t\n\t\t}\n\t\treturn text;\n\t},\n\n\tgenerateExportHtml: function() {\n\t\tvar out = \"<!DOCTYPE HTML>\\n<html>\\n<head>\\n<meta charset='UTF-8'>\\n\";\n\n\t\tvar metadata = this.getMetadata();\n\t\tout += metadata.getHeaders();\n\n\t\tout += '<link rel=\"stylesheet\" type=\"text/css\" href=\"https://voyant-tools.org/resources/codemirror/lib/codemirror.css\">'\n\t\t+'<link rel=\"stylesheet\" type=\"text/css\" href=\"https://voyant-tools.org/resources/spyral/css/codemirror.css\">'\n\t\t+'<link rel=\"stylesheet\" type=\"text/css\" href=\"https://voyant-tools.org/resources/spyral/css/spyral.css\">'\n\t\t+'<link rel=\"stylesheet\" type=\"text/css\" href=\"https://voyant-tools.org/resources/spyral/css/dataviewer.css\">';\n\n\t\tout += \"</head>\\n\"\n\t\t+\"<body class='exported-notebook'>\\n\"\n\t\t+\"<header class='spyral-header'>\"+this.getInnerHeaderHtml()+\"</header>\\n\"\n\t\t+\"<article class='spyralArticle'>\\n\";\n\n\t\tthis.getComponent('notebookContainer').getComponent(\"cells\").items.each(function(item, i) {\n\t\t\tout+=\"<section id='\"+item.getCellId()+\"' class='notebook-editor-wrapper \"+item.xtype+\"'>\\n\"+\n\t\t\t\"<div class='notebookwrappercounter'>\"+(item.getIndex()+1)+\"</div>\";\n\n\t\t\tvar content = item.getContent();\n\t\t\tif (item.isXType('notebooktexteditorwrapper')) {\n\t\t\t\tout+=\"<div class='notebook-text-editor'>\"+content+\"</div>\\n\";\n\t\t\t} else {\t\n\t\t\t\tvar codeTextLayer = item.getTargetEl().query('.CodeMirror-wrap')[0].cloneNode(true);\n\n\t\t\t\t// code editor UI\n\t\t\t\tout += \"<div class='notebook-code-editor'>\\n\"+codeTextLayer.outerHTML+\"\\n</div>\\n\"\n\t\t\t\t// code editor code for importing (hidden by CSS)\n\t\t\t\t+\"<pre class='notebook-code-editor-raw editor-mode-\"+content.mode+\"'>\"+content.input+\"</pre>\\n\";\n\n\t\t\t\t// code editor results\n\t\t\t\tvar expandResults = this._getHeightAwareExpandedResults(item, 300);\n\t\t\t\tout += \"<div class='notebook-code-results\"+(expandResults ? '' : ' collapsed')+\"'>\\n\"+content.output+\"\\n</div>\\n\";\n\t\t\t}\n\n\t\t\tout+=\"</section>\\n\"\n\t\t}, this);\n\t\tout += \"</article>\\n<footer class='spyral-footer'>\"+this.getInnerFooterHtml()+\"</footer>\\n</body>\\n</html>\";\n\t\treturn out;\n\t},\n\n\tgenerateExportMetadata: function(metadata) {\n\t\tvar clone = metadata.clone(); // use a clone so that altering title and description doesn't affect original\n\t\t\n\t\tif (clone.title) {\n\t\t\tclone.title = clone.title.replace(/<\\/?\\w+.*?>/g, '');\n\t\t}\n\t\tif (clone.description) {\n\t\t\tclone.description = clone.description.replace(/<\\/?\\w+.*?>/g, '');\n\t\t}\n\n\t\tif (clone.keywords) {\n\t\t\tif (Array.isArray(clone.keywords) === false) {\n\t\t\t\tclone.keywords = clone.keywords.split(/[\\s,]+/)\n\t\t\t}\n\t\t\tclone.keywords = clone.keywords.reduce(function(keywordsArray, keyword) {\n\t\t\t\tif (keyword.length > 0) {\n\t\t\t\t\tkeywordsArray.push(keyword.toLowerCase());\n\t\t\t\t}\n\t\t\t\treturn keywordsArray;\n\t\t\t}, []);\n\t\t}\n\n\t\treturn clone;\n\t},\n\n\tgenerateExportJson: function() {\n\t\tvar cells = [];\n\t\tthis.getComponent('notebookContainer').getComponent(\"cells\").items.each(function(item, i) {\n\t\t\tvar type;\n\t\t\tswitch(item.xtype) {\n\t\t\t\tcase 'notebookcodeeditorwrapper':\n\t\t\t\t\ttype = 'code';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'notebookdatawrapper':\n\t\t\t\t\ttype = 'data';\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\ttype = 'text';\n\t\t\t}\n\t\t\tvar content = item.getContent();\n\t\t\tif (type !== 'text') {\n\t\t\t\tcontent.expandResults = this._getHeightAwareExpandedResults(item, 300);\n\t\t\t}\n\t\t\tcells.push({\n\t\t\t\tcellId: item.getCellId(),\n\t\t\t\ttype: type,\n\t\t\t\tcontent: content\n\t\t\t});\n\t\t}, this);\n\n\t\tvar json = {\n\t\t\tmetadata: this.getMetadata(),\n\t\t\tcells: cells\n\t\t}\n\n\t\treturn JSON.stringify(json);\n\t},\n\n\t// if the code editor results are the DataViewer and are too tall then keep them collapsed\n\t_getHeightAwareExpandedResults: function(item, maxHeight) {\n\t\tvar expandResults = item.getContent().expandResults;\n\t\tvar resultsEl = item.results.getResultsEl();\n\t\tif (resultsEl !== null) {\n\t\t\t// check for DataViewer\n\t\t\tif (item.results.getOutput().indexOf('\"spyral-dv-container\"') !== -1) {\n\t\t\t\tvar resultsHeight = item.results.getCachedResultsHeight();\n\t\t\t\tif (isNaN(resultsHeight) === false && resultsHeight > maxHeight) {\n\t\t\t\t\texpandResults = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn expandResults;\n\t},\n\n\t/*\n\t * Export dialog options below\n\t */\n\t\n\tgetExtraViewExportItems: function() {\n\t\treturn [\n\t\t// {\n\t\t// \tinputValue: 'html',\n\t\t// \tboxLabel: this.localize('exportHtml')\n\t\t// },\n\t\t{\n\t\t\tinputValue: 'htmlDownload',\n\t\t\tboxLabel: '<a href=\"#\">'+this.localize('exportHtmlDownload')+'</a>',\n\t\t\tlisteners: {\n\t\t\t\tafterrender: function(cmp) {\n\t\t\t\t\tvar name = (this.getNotebookId() || \"spyral\")+ \".html\";\n\t\t\t\t\tvar data = this.generateExportHtml();\n\t\t\t\t\tvar properties = {type: 'text/html'};\n\t\t\t\t\tvar file;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfile = new File([data], name, properties);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tfile = new Blob([data], properties);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar url = URL.createObjectURL(file);\n\t\t\t\t\tvar a = cmp.boxLabelEl.dom.querySelector(\"a\");\n\t\t\t\t\ta.setAttribute(\"download\", name);\n\t\t\t\t\ta.setAttribute(\"href\", url);\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},\n\t\t\thandler: function(cmp) {\n\t\t\t\tcmp.boxLabelEl.dom.querySelector(\"a\").click();\n\t\t\t\tcmp.up(\"window\").close();\n\t\t\t}\n\t\t}]\n\t}\n\t\n\t// ,exportHtml: function() {\n\t// \tvar out = this.generateExportHtml();\n\t// \tvar myWindow = window.open();\n\t// \tmyWindow.document.write(out);\n\t// \tmyWindow.document.close();\n\t// \tmyWindow.focus();\n\t// }\n});\n","Ext.define('Voyant.notebook.util.NotebooksList', {\n\textend: 'Ext.view.View',\n\talias: 'widget.notebookslist',\n\n\tconstructor: function(config) {\n\t\tExt.apply(config, {\n\t\t\twidth: '100%',\n\t\t\tpadding: 10,\n\t\t\tscrollable: 'vertical',\n\t\t\tstore: Ext.create('Ext.data.JsonStore', {\n\t\t\t\tfields: [\n\t\t\t\t\t{name: 'id'},\n\t\t\t\t\t{name: 'author'},\n\t\t\t\t\t{name: 'title'},\n\t\t\t\t\t{name: 'description'},\n\t\t\t\t\t{name: 'keywords'},\n\t\t\t\t\t{name: 'language'},\n\t\t\t\t\t{name: 'license'},\n\t\t\t\t\t{name: 'created', type: 'date'},\n\t\t\t\t\t{name: 'modified', type: 'date'},\n\t\t\t\t\t{name: 'catalogue', type: 'boolean'},\n\t\t\t\t\t{name: 'version'}\n\t\t\t\t]\n\t\t\t}),\n\t\t\ttpl: new Ext.XTemplate(\n\t\t\t\t'<tpl for=\".\">',\n\t\t\t\t\t'<div class=\"catalogue-notebook\">',\n\t\t\t\t\t\t'<div class=\"id\">{id}</div>',\n\t\t\t\t\t\t'<div class=\"title nowrap\" title=\"{title}\">',\n\t\t\t\t\t\t'<tpl if=\"catalogue\"><i class=\"fa fa-th-list published\" aria-hidden=\"true\" title=\"In Catalogue\"></i> </tpl>',\n\t\t\t\t\t\t'{title}</div>',\n\t\t\t\t\t\t'<div class=\"author nowrap\"><i class=\"fa fa-user\" aria-hidden=\"true\"></i> {author}</div>',\n\t\t\t\t\t\t'<div class=\"description\">{description}</div>',\n\t\t\t\t\t\t'<tpl if=\"keywords.length &gt; 0\">',\n\t\t\t\t\t\t\t'<div class=\"keywords nowrap\">',\n\t\t\t\t\t\t\t\t'<i class=\"fa fa-tags\" aria-hidden=\"true\"></i> ',\n\t\t\t\t\t\t\t\t'<tpl for=\"keywords\">',\n\t\t\t\t\t\t\t\t\t'<span>{.}</span>',\n\t\t\t\t\t\t\t\t'</tpl>',\n\t\t\t\t\t\t\t'</div>',\n\t\t\t\t\t\t'</tpl>',\n\t\t\t\t\t\t'<div class=\"dates\"><span class=\"date\"><i class=\"fa fa-clock-o\" aria-hidden=\"true\"></i> {[Ext.Date.format(values.modified, \"M j Y\")]}</span></div>',\n\t\t\t\t\t'</div>',\n\t\t\t\t'</tpl>'\n\t\t\t),\n\t\t\titemSelector: 'div.catalogue-notebook',\n\t\t\toverItemCls: 'catalogue-notebook-over',\n\t\t\tselectedItemCls: 'catalogue-notebook-selected'\n\t\t});\n\n\t\tthis.callParent(arguments);\n\t}\n});\n","Ext.define('Voyant.notebook.util.DocsPanel', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.util.Localization'],\n\talias: 'widget.spyralDocsPanel',\n\tstatics: {\n\t\ti18n: {\n\t\t\thome: 'Home',\n\t\t\toverview: 'Overview',\n\t\t\tclasses: 'Classes',\n\t\t\ttools: 'Tools',\n\t\t\tglobals: 'Globals',\n\t\t\tconfigs: 'Configs',\n\t\t\tmethods: 'Methods',\n\t\t\topenFull: 'Open Full Documentation',\n\t\t\tdocs: 'Docs',\n\t\t\tsplitView: 'Show Split View',\n\t\t\toutlineIntro: '<h2>Spyral Documentation</h2><p>Welcome to the Spyral Docs. Here are some links to help you navigate.</p><ul>' +\n\t\t\t\t'<li><a href=\"Spyral.Corpus.html\">LoadCorpus</a> - Get Started with LoadCorpus.</li>' +\n\t\t\t\t'<li><a href=\"https://voyant-tools.org/spyral/learnspyral@gh/Tutorials/\">Tutorials</a> - Link to tutorial notebooks.</li>' +\n\t\t\t\t'<li><a href=\"Spyral.html\">Spyral Classes</a></li>' +\n\t\t\t\t'<li><a href=\"Tools.html\">Tools Documentation</a></li>' +\n\t\t\t\t'<li><a href=\"window.html\">Globals</a></li>' +\n\t\t\t\t'</ul>' +\n\t\t\t\t'<p>Alternatively take a look at our detailed Documentation:</p>' +\n\t\t\t\t'<p><a href=\"Spyral.html\" rel=\"help\">Full API Documentation</a> - Open up detailed API Documentation</p>',\n\t\t\toutlineApi: 'Here is a list of the Spyral classes that can be used in your notebook:',\n\t\t\tloadingDocs: 'Loading Docs'\n\t\t}\n\t},\n\n\tlastEntry: undefined,\n\tlastMember: undefined,\n\t\n\tinlineDocsUrl: undefined,\n\tfullDocsUrl: undefined,\n\n\tconstructor: function(config) {\n\t\tthis.mixins['Voyant.util.Localization'].constructor.apply(this, arguments);\n\n\t\tconfig = config || {};\n\t\tExt.apply(config, {\n\t\t\tdockedItems: [{\n\t\t\t\titemId: 'toolbar',\n\t\t\t\txtype: 'toolbar',\n\t\t\t\tdock: 'top',\n\t\t\t\titems: [{\n\t\t\t\t\titemId: 'navBtn',\n\t\t\t\t\tglyph: 'xf0c9@FontAwesome',\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\ttext: this.localize('home'),\n\t\t\t\t\t\t\tglyph: 'xf015@FontAwesome',\n\t\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\t\tthis.showDocs();\n\t\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\ttext: this.localize('classes'),\n\t\t\t\t\t\t\titemId: 'classesMenu',\n\t\t\t\t\t\t\tglyph: 'xf02d@FontAwesome',\n\t\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\t\titems: [],\n\t\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\t\tclick: function(menu, item) {\n\t\t\t\t\t\t\t\t\t\tthis.loadDocsEntry('Spyral.'+item.itemId+'.html');\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\ttext: this.localize('tools'),\n\t\t\t\t\t\t\titemId: 'toolsMenu',\n\t\t\t\t\t\t\tglyph: 'xf0ad@FontAwesome',\n\t\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\t\titems: [],\n\t\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\t\tclick: function(menu, item) {\n\t\t\t\t\t\t\t\t\t\tthis.loadDocsEntry('Tools.'+item.itemId+'.html');\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\ttext: this.localize('globals'),\n\t\t\t\t\t\t\titemId: 'globalsMenu',\n\t\t\t\t\t\t\tglyph: 'xf0ad@FontAwesome',\n\t\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\t\titems: [],\n\t\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\t\tclick: function(menu, item) {\n\t\t\t\t\t\t\t\t\t\tthis.loadDocsEntry('window.html#'+item.itemId);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\ttext: this.localize('overview'),\n\t\t\t\t\titemId: 'overviewBtn',\n\t\t\t\t\tglyph: 'xf05a@FontAwesome',\n\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\tthis._showDocEntry();\n\t\t\t\t\t}.bind(this)\n\t\t\t\t},{\n\t\t\t\t\ttext: this.localize('methods'),\n\t\t\t\t\titemId: 'methodsBtn',\n\t\t\t\t\tglyph: 'xf1b2@FontAwesome',\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\titems: [],\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\tclick: function(menu, item) {\n\t\t\t\t\t\t\t\tif (item) {\n\t\t\t\t\t\t\t\t\tvar method = item.itemId.replace(/^_/, '');\n\t\t\t\t\t\t\t\t\tthis._showDocEntry(this.lastEntry, method);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\ttext: this.localize('configs'),\n\t\t\t\t\titemId: 'configsBtn',\n\t\t\t\t\tglyph: 'xf013@FontAwesome',\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\titems: [],\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\tclick: function(menu, item) {\n\t\t\t\t\t\t\t\tif (item) {\n\t\t\t\t\t\t\t\t\tthis._showDocEntry(this.lastEntry, item.itemId);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},'->',{\n\t\t\t\t\ttooltip: this.localize('openFull'),\n\t\t\t\t\titemId: 'openfullBtn',\n\t\t\t\t\tglyph: 'xf128@FontAwesome',\n\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\tthis.openFullDocumentation();\n\t\t\t\t\t}.bind(this)\n\t\t\t\t}]\n\t\t\t}],\n\t\t\tlayout: 'fit',\n\t\t\titems: [{\n\t\t\t\titemId: 'main',\n\t\t\t\tcls: 'docsWindowContent',\n\t\t\t\tscrollable: 'y',\n\t\t\t\thtml: ''\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tboxready: function(cmp) {\n\t\t\t\t\tcmp.body.addListener('click', function(evt) {\n\t\t\t\t\t\tif (evt.target.tagName.toLowerCase() === 'a') {\n\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\t\t\tvar link = evt.target.getAttribute('href');\n\t\t\t\t\t\t\tvar rel = evt.target.getAttribute('rel');\n\t\t\t\t\t\t\tthis.handleDocLink(link, rel);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this);\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\n\t\tthis.callParent([config]);\n\n\t\tthis.inlineDocsUrl = Voyant.application.getBaseUrlFull()+'docs/inline/';\n\t\tthis.fullDocsUrl = Voyant.application.getBaseUrlFull()+'docs/';\n\n\t\tthis._populateNavMenu('classesMenu', 'Spyral.html');\n\t\tthis._populateNavMenu('toolsMenu', 'Tools.html');\n\t\tthis._populateNavMenu('globalsMenu', 'window.html');\n\t},\n\n\tshowDocs: function() {\n\t\tthis.lastEntry = undefined;\n\t\tthis.lastMember = undefined;\n\n\t\tthis.up().setTitle(this.localize('docs')+' '+this.localize('home'));\n\t\tthis.down('#overviewBtn').hide();\n\t\tthis.down('#methodsBtn').hide();\n\t\tthis.down('#configsBtn').hide();\n\n\t\tvar html = '<p>'+this.localize('outlineIntro')+'</p>';\n\t\tthis._setHtmlForCard('main', html);\n\n\t\tthis.up().show().expand();\n\n\t\tthis.body.scrollTo('top', 0, false);\n\t},\n\n\thandleDocLink: function(link, rel) {\n\t\tconsole.log('handleDocLink', link, rel);\n\t\tlink = link.replace(/^https:\\/\\/voyant-tools.org\\//, '');\n\t\tif (link.indexOf('spyral') === 0) {\n\t\t\tvar notebookId = link.replace(/^spyral\\//, '').replace(/\\/$/, '').replace(/\\//, '_');\n\t\t\tvar parent = this.findParentByType('notebook');\n\t\t\tparent.fireEvent('notebookSelected', parent, notebookId, null);\n\t\t} else if (link.indexOf('http') === 0) {\n\t\t\twindow.open(link, '_external');\n\t\t} else if (link.indexOf('tutorial') === 0 || rel === 'help') {\n\t\t\twindow.open(this.fullDocsUrl+link, '_spyral_docs');\n\t\t} else {\n\t\t\tthis.up().show().expand();\n\t\t\tthis.loadDocsEntry(link);\n\t\t}\n\t},\n\n\topenFullDocumentation: function() {\n\t\tvar url = this.fullDocsUrl;\n\t\tif (this.lastEntry !== undefined) {\n\t\t\turl += this.lastEntry;\n\t\t}\n\t\tif (this.lastMember !== undefined) {\n\t\t\turl += '#'+this.lastMember;\n\t\t}\n\t\twindow.open(url, '_spyral_docs');\n\t},\n\n\tloadDocsEntry: function(entry) {\n\t\tvar parts = entry.split('#');\n\t\tthis.lastEntry = parts[0];\n\t\tif (parts[1]) {\n\t\t\tthis.lastMember = parts[1];\n\t\t} else {\n\t\t\tthis.lastMember = undefined;\n\t\t}\n\n\t\tconsole.log('loadDocsEntry', entry);\n\t\tthis.getLayout().getRenderTarget().mask(this.localize('loadingDocs'));\n\n\t\tExt.Ajax.request({\n\t\t\turl: this.inlineDocsUrl+this.lastEntry\n\t\t}).then(function(response) {\n\t\t\tthis.getLayout().getRenderTarget().unmask();\n\t\t\tthis._processDocEntry(response.responseText);\n\t\t\tif (this.lastMember) {\n\t\t\t\tthis._showDocEntry(this.lastEntry, this.lastMember);\n\t\t\t}\n\t\t}.bind(this), function(error) {\n\t\t\tthis.lastEntry = undefined;\n\t\t\tthis.getLayout().getRenderTarget().unmask();\n\t\t\tconsole.log(error);\n\t\t}.bind(this));\n\t},\n\n\t_processDocEntry: function(html) {\n\t\tvar parser = new DOMParser();\n\t\tvar dom = parser.parseFromString(html, 'text/html');\n\n\t\tvar isNamespace = dom.querySelector('header h2 .ancestors') === null;\n\t\t\n\t\tvar isToolsEntry = false;\n\t\tif (!isNamespace) {\n\t\t\tisToolsEntry = dom.querySelector('header h2 .ancestors a').textContent === 'Tools';\n\t\t}\n\n\t\tvar title = '';\n\t\tif (isNamespace) {\n\t\t\ttitle = dom.querySelector('h2').textContent;\n\t\t} else {\n\t\t\ttitle = dom.querySelector('h2 .ancestors').textContent + dom.querySelector('h2 .ancestors').nextSibling.textContent;\n\t\t}\n\t\tthis.up().setTitle(this.localize('docs')+': '+title);\n\n\t\tthis._setHtmlForCard('main', html);\n\t\tthis.down('#overviewBtn').show();\n\n\t\tvar docsParentEl = this.down('#main').getEl().dom;\n\n\t\tdocsParentEl.querySelectorAll('article > *').forEach(function(el) { el.hidden = !isNamespace && !isToolsEntry; });\n\n\t\t// populate methods\n\t\tvar methods = Array.from(docsParentEl.querySelectorAll('article > dl.methods > dt > h4')).map(function(h4) {\n\t\t\treturn h4.getAttribute('id');\n\t\t});\n\t\tif (!isNamespace && !isToolsEntry && docsParentEl.querySelector('article .container-overview') !== null) {\n\t\t\tmethods.unshift('constructor');\n\t\t}\n\t\tvar methodsBtn = this.down('#methodsBtn');\n\t\tif (methods.length > 0) {\n\t\t\tvar methodsMenu = methodsBtn.getMenu();\n\t\t\tvar toRemove = [];\n\t\t\tmethodsMenu.items.eachKey(function(key) {\n\t\t\t\ttoRemove.push(key);\n\t\t\t});\n\t\t\ttoRemove.forEach(function(key) {\n\t\t\t\tmethodsMenu.remove(key);\n\t\t\t});\n\t\t\tmethods.forEach(function(method) {\n\t\t\t\tvar text = method.replace(/^\\./, '<span class=\"green icon\">static</span> '); // static methods\n\t\t\t\ttext = text.replace(/^_/, '');\n\t\t\t\tmethodsMenu.add({text: text, itemId: '_'+method, margin: '0 0 0 -20px'}); // prepend _ because some methods are reserved (e.g. toString)\n\t\t\t});\n\t\t\tmethodsBtn.show();\n\t\t} else {\n\t\t\tmethodsBtn.hide();\n\t\t}\n\n\t\t// populate configs\n\t\tvar configs = Array.from(docsParentEl.querySelectorAll('article > dl.typedefs > dt > h4')).map(function(h4) {\n\t\t\treturn h4.getAttribute('id');\n\t\t});\n\t\tvar configsBtn = this.down('#configsBtn');\n\t\tif (configs.length > 0) {\n\t\t\tvar configsMenu = configsBtn.getMenu();\n\t\t\tvar toRemove = [];\n\t\t\tconfigsMenu.items.eachKey(function(key) {\n\t\t\t\ttoRemove.push(key);\n\t\t\t});\n\t\t\ttoRemove.forEach(function(key) {\n\t\t\t\tconfigsMenu.remove(key);\n\t\t\t});\n\t\t\tconfigs.forEach(function(config) {\n\t\t\t\tconfigsMenu.add({text: config, itemId: config, margin: '0 0 0 -20px'});\n\t\t\t});\n\t\t\tconfigsBtn.show();\n\t\t} else {\n\t\t\tconfigsBtn.hide();\n\t\t}\n\t},\n\n\t_showDocEntry: function(entryClass, entryMember) {\n\t\tconsole.log('showDocEntry', entryClass, entryMember);\n\n\t\tthis.lastMember = entryMember;\n\n\t\tvar docsParentEl = this.down('#main').getEl().dom;\n\n\t\tvar isNamespace = docsParentEl.querySelector('header h2 .ancestors') === null;\n\n\t\tdocsParentEl.querySelectorAll('article > *').forEach(function(el) { el.hidden = !isNamespace; });\n\n\t\tif (entryMember === undefined) {\n\t\t\t// show overview\n\t\t\tdocsParentEl.querySelector('header').hidden = false;\n\t\t} else if (entryMember === 'constructor') {\n\t\t\tdocsParentEl.querySelector('header').hidden = true;\n\t\t\tdocsParentEl.querySelector('article > .container-overview').hidden = false;\n\t\t} else {\n\t\t\tdocsParentEl.querySelector('header').hidden = true;\n\n\t\t\tvar entryEl = docsParentEl.querySelector('#'+entryMember.replace('.', '\\\\.').replace('~', '\\\\~')).parentElement;\n\t\t\t\n\t\t\t// hide all other members\n\t\t\tvar entryParent = entryEl.closest('dl');\n\t\t\tentryParent.children.forEach(function(el) { el.hidden = true; });\n\t\t\t\n\t\t\t// show member\n\t\t\tentryEl.hidden = false;\n\t\t\tentryEl.nextElementSibling.hidden = false;\n\n\t\t\t// show member parent\n\t\t\tentryParent.hidden = false;\n\t\t}\n\n\t\tthis.body.scrollTo('top', 0, false);\n\t},\n\n\t_setHtmlForCard: function(cardId, html) {\n\t\tthis.down('#'+cardId).setHtml(html);\n\t\tvar cardEl = this.down('#'+cardId).getEl().dom;\n\t\tExt.fly(cardEl).selectable();\n\t},\n\n\t_populateNavMenu: function(menuId, file) {\n\t\tExt.Ajax.request({\n\t\t\turl: this.inlineDocsUrl+file\n\t\t}).then(function(response) {\n\t\t\tvar parser = new DOMParser();\n\t\t\tvar dom = parser.parseFromString(response.responseText, 'text/html');\n\t\t\tvar dl = dom.querySelector('article > dl:first-of-type');\n\t\t\t\n\t\t\tvar menuItems = [];\n\t\t\tif (dl.className.indexOf('methods') !== -1) {\n\t\t\t\tmenuItems = Array.from(dl.querySelectorAll('h4')).map(function(h4) {\n\t\t\t\t\tvar method = h4.id.replace(/^\\./, '<span class=\"green icon\">static</span> ');\n\t\t\t\t\treturn {text: method, itemId: h4.id, margin: '0 0 0 -20px'};\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tmenuItems = Array.from(dl.querySelectorAll('a')).map(function(link) {\n\t\t\t\t\treturn {text: link.textContent, itemId: link.textContent, margin: '0 0 0 -20px'};\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.down('#'+menuId).getMenu().add(menuItems);\n\t\t}.bind(this));\n\t}\n});","Ext.define('Voyant.notebook.Catalogue', {\n\textend: 'Ext.Component',\n    mixins: ['Voyant.util.Localization','Voyant.notebook.util.NotebooksList'],\n\talias: 'widget.notebookcatalogue',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttitle: 'Spyral Notebooks Catalogue',\n\t\t\tbrowse: 'Browse Notebooks',\n\t\t\tkeywords: 'Keywords',\n\t\t\tauthor: 'Author',\n\t\t\tlanguage: 'Language',\n\t\t\tlicense: 'License',\n\t\t\tsearch: 'Search within notebooks',\n\t\t\tnoResults: 'No matching notebooks',\n\t\t\tsuggested: 'Suggested Notebooks',\n\t\t\tload: 'Open Selected Notebook',\n\t\t\tnew: 'New Notebook',\n\t\t\tclose: 'Close'\n\t\t}\n\t},\n\n\twindow: undefined,\n\n\tgettingFacets: false,\n\n\tsuggestedNotebookIds: ['learnspyral@gh_aboutspyral', 'learnspyral@gh_Tutorials', 'learnspyral@gh_dialogica'],\n\n\tconstructor: function() {\n\t\tthis.callParent(arguments);\n\t},\n\n\tinitComponent: function(config) {\n\t\tthis.callParent(arguments);\n\t},\n\n\tshowWindow: function() {\n\t\tif (this.window === undefined) {\n\t\t\tthis.window = Ext.create('Ext.window.Window', {\n\t\t\t\ttitle: this.localize('title'),\n\t\t\t\twidth: '80%',\n\t\t\t\theight: '80%',\n\t\t\t\tmaximizable: true,\n\t\t\t\tmodal: true,\n\t\t\t\tcls: 'catalogue',\n\t\t\t\tlayout: 'border',\n\t\t\t\titems: [{\n\t\t\t\t\txtype: 'panel',\n\t\t\t\t\tregion: 'center',\n\t\t\t\t\tflex: 2,\n\t\t\t\t\tborder: true,\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\t\talign: 'stretch'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\txtype: 'toolbar',\n\t\t\t\t\t\theight: 30,\n\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\ttype: 'hbox',\n\t\t\t\t\t\t\tpack: 'center'\n\t\t\t\t\t\t},\n\t\t\t\t\t\titems: [{xtype:'tbspacer', flex: .1},{\n\t\t\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\t\t\titemId: 'queryfield',\n\t\t\t\t\t\t\temptyText: this.localize('search'),\n\t\t\t\t\t\t\tflex: .8,\n\t\t\t\t\t\t\tenableKeyEvents: true,\n\t\t\t\t\t\t\ttriggers: {\n\t\t\t\t\t\t\t\tcancel: {\n\t\t\t\t\t\t\t\t\thidden: true,\n\t\t\t\t\t\t\t\t\tcls: 'fa-trigger form-fa-clear-trigger',\n\t\t\t\t\t\t\t\t\thandler: function(cmp) {\n\t\t\t\t\t\t\t\t\t\tcmp.setValue('');\n\t\t\t\t\t\t\t\t\t\tcmp.getTriggers()['cancel'].hide();\n\t\t\t\t\t\t\t\t\t\tthis.getNotebooks();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsearch: {\n\t\t\t\t\t\t\t\t\tcls: 'fa-trigger form-fa-search-trigger',\n\t\t\t\t\t\t\t\t\thandler: function(cmp) {\n\t\t\t\t\t\t\t\t\t\tthis.getNotebooks();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\tkeyup: function(cmp, e) {\n\t\t\t\t\t\t\t\t\tif (e.getCharCode() === 13) {\n\t\t\t\t\t\t\t\t\t\tthis.getNotebooks();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (cmp.getValue().trim().length > 0) {\n\t\t\t\t\t\t\t\t\t\tcmp.getTriggers()['cancel'].show();\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tcmp.getTriggers()['cancel'].hide();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},{xtype:'tbspacer', flex: .1}]\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'notebookslist',\n\t\t\t\t\t\titemId: 'notebookslist',\n\t\t\t\t\t\tcls: 'catalogue-window',\n\t\t\t\t\t\tflex: 1,\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\titemdblclick: function(view, record, el) {\n\t\t\t\t\t\t\t\tthis.fireEvent('notebookSelected', this, record.get('id'), this.hideWindow);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\txtype: 'panel',\n\t\t\t\t\tregion: 'west',\n\t\t\t\t\tcollapsible: true,\n\t\t\t\t\ttitle: this.localize('browse'),\n\t\t\t\t\tflex: 1,\n\t\t\t\t\titemId: 'facets',\n\t\t\t\t\tcls: 'facets',\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'accordion',\n\t\t\t\t\t\tanimate: false,\n\t\t\t\t\t\tmulti: true,\n\t\t\t\t\t\tfill: false,\n\t\t\t\t\t\talign: 'stretch',\n\t\t\t\t\t\ttitleCollapse: true,\n\t\t\t\t\t\thideCollapseTool: true\n\t\t\t\t\t},\n\t\t\t\t\tdefaults: {\n\t\t\t\t\t\txtype: 'grid',\n\t\t\t\t\t\trowLines: false,\n\t\t\t\t\t\thideHeaders: true,\n        \t\t\t\tselType: 'checkboxmodel',\n\t\t\t\t\t\tcolumns: [{ renderer: function(value, metaData, record) {return \"(\"+record.get('count')+\") \"+record.get('label')}, flex: 1 }],\n\t\t\t\t\t\tstore: {\n\t\t\t\t\t\t\txtype: 'store.json',\n\t\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t\t{name: 'label'},\n\t\t\t\t\t\t\t\t{name: 'count', type: 'integer'}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\ttitle: this.localize('keywords'),\n\t\t\t\t\t\tfacet: 'facet.keywords',\n\t\t\t\t\t\tflex: 3\n\t\t\t\t\t},{\n\t\t\t\t\t\ttitle: this.localize('author'),\n\t\t\t\t\t\tfacet: 'facet.author',\n\t\t\t\t\t\tflex: 2\n\t\t\t\t\t},{\n\t\t\t\t\t\ttitle: this.localize('language'),\n\t\t\t\t\t\tfacet: 'facet.language',\n\t\t\t\t\t\tflex: 1\n\t\t\t\t\t},{\n\t\t\t\t\t\ttitle: this.localize('license'),\n\t\t\t\t\t\tfacet: 'facet.license',\n\t\t\t\t\t\tflex: 1\n\t\t\t\t\t}]\n\t\t\t\t}],\n\t\t\t\tcloseAction: 'hide',\n\t\t\t\tbuttons: [{\n\t\t\t\t\ttext: this.localize('close'),\n\t\t\t\t\tui: 'default-toolbar',\n\t\t\t\t\thandler: function(but) {\n\t\t\t\t\t\tthis.window.close();\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t},{\n\t\t\t\t\ttext: this.localize('new'),\n\t\t\t\t\tglyph: 'xf067@FontAwesome',\n\t\t\t\t\thandler: function(but) {\n\t\t\t\t\t\tlet url = Voyant.application.getBaseUrl()+\"spyral/\";\n\t\t\t\t\t\tVoyant.application.openUrl(url);\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\ttext: this.localize('load'),\n\t\t\t\t\tglyph: 'xf115@FontAwesome',\n\t\t\t\t\thandler: function(but) {\n\t\t\t\t\t\tvar record = this.window.down('#notebookslist').getSelection()[0];\n\t\t\t\t\t\tif (record) {\n\t\t\t\t\t\t\tthis.fireEvent('notebookSelected', this, record.get('id'), this.hideWindow)\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}]\n\t\t\t});\n\t\t\tthis.window.query('#facets > grid').forEach(function(facetCmp) {\n\t\t\t\tfacetCmp.getSelectionModel().on('selectionchange', this._loadFacets, this);\n\t\t\t}, this);\n\t\t} else {\n\t\t\t// reset catalogue\n\t\t\tthis.window.query('#facets > grid').forEach(function(facetCmp) {\n\t\t\t\tfacetCmp.getStore().clearFilter();\n\t\t\t\tfacetCmp.getSelectionModel().deselectAll();\n\t\t\t});\n\t\t\tthis.window.down('#queryfield').setValue('');\n\t\t\tthis.window.down('#notebookslist').getSelectionModel().deselectAll();\n\t\t\tthis.window.down('#notebookslist').getStore().removeAll();\n\t\t}\n\n\t\tthis.window.show();\n\n\t\tthis._loadFacets();\n\n\t\tthis.getSuggestedNotebooks();\n\t},\n\n\thideWindow: function() {\n\t\tif (this.window !== undefined) {\n\t\t\tthis.window.close();\n\t\t}\n\t},\n\n\t_getSelectedFacets: function() {\n\t\tvar facets = [];\n\t\tthis.window.query('#facets > grid').forEach(function(facetCmp) {\n\t\t\tfacetCmp.getSelection().forEach(function(record) {\n\t\t\t\tfacets.push([facetCmp.facet, record.get('label')]);\n\t\t\t})\n\t\t});\n\t\treturn facets;\n\t},\n\n\t_loadFacets: function() {\n\t\tif (this.gettingFacets === false) {\n\t\t\tthis.window.down('#facets').mask('Loading');\n\t\t\tthis.gettingFacets = true;\n\t\t\tvar facetQuery = this._getSelectedFacets().map(function(f) { return f.join('=') });\n\n\t\t\tvar me = this;\n\t\t\tSpyral.Load.trombone({\n\t\t\t\ttool: 'notebook.CatalogueFacets',\n\t\t\t\tquery: facetQuery,\n\t\t\t\tnoCache: 1\n\t\t\t}).then(function(json) {\n\t\t\t\tjson.catalogue.facets.forEach(function(facetResult) {\n\t\t\t\t\tvar facetCmp = me.window.query('#facets > grid[facet='+facetResult.facet+']')[0];\n\t\t\t\t\tif (facetCmp) {\n\t\t\t\t\t\tvar store = facetCmp.getStore();\n\t\t\t\t\t\tstore.clearFilter();\n\t\t\t\t\t\tif (store.getCount() === 0) {\n\t\t\t\t\t\t\tstore.loadRawData(facetResult.results);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar matches = [];\n\t\t\t\t\t\t\tstore.each(function(record) {\n\t\t\t\t\t\t\t\tvar label = record.get('label');\n\t\t\t\t\t\t\t\tfor (var i = 0; i < facetResult.results.length; i++) {\n\t\t\t\t\t\t\t\t\tvar result = facetResult.results[i];\n\t\t\t\t\t\t\t\t\tif (result.label === label) {\n\t\t\t\t\t\t\t\t\t\trecord.set('count', result.count);\n\t\t\t\t\t\t\t\t\t\tmatches.push(label);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tstore.filterBy(function(record) { return matches.indexOf(record.get('label')) !== -1 });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tme.window.down('#facets').unmask();\n\t\t\t\tme.gettingFacets = false;\n\t\t\t\t\n\t\t\t\tme.getNotebooks();\n\t\t\t}).catch(function(err) {\n\t\t\t\tme.window.down('#facets').unmask();\n\t\t\t\tme.gettingFacets = false;\n\t\t\t});\n\t\t}\n\t},\n\n\tgetNotebooks: function(queries) {\n    \tif (!queries) {\n\t    \tqueries = [];\n\t\t\tvar facets = this._getSelectedFacets();\n\t    \tfacets.forEach(function(f) {\n\t\t\t\tqueries.push(f.join(':'));\n\t\t\t})\n\t\t\tvar queryfieldstring = this.window.down('#queryfield').getValue();\n\t\t\tif (queryfieldstring.trim().length > 0) {\n\t\t\t\tqueries.push(queryfieldstring);\n\t\t\t}\n\t\t\treturn this.getNotebooks(queries);\n    \t}\n\t\tif (queries.length === 0) {\n\t\t\tthis.window.down('#notebookslist').getSelectionModel().deselectAll();\n\t\t\tthis.window.down('#notebookslist').getStore().removeAll();\n\t\t\tthis.getSuggestedNotebooks();\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tqueries.push('facet.catalogue:true');\n\n\t\tthis.window.down('#notebookslist').mask('Loading');\n\t\tthis.window.down('#notebookslist').getSelectionModel().deselectAll();\n\n\t\tvar me = this;\n\t\tSpyral.Load.trombone({\n\t\t\ttool: 'notebook.NotebookFinder',\n\t\t\tquery: queries,\n\t\t\tnoCache: 1\n\t\t}).then(function(json) {\n\t\t\tme.window.down('#notebookslist').unmask();\n\t\t\tme.window.down('#notebookslist').getStore().loadRawData(json.catalogue.notebooks);\n\t\t\tme.window.down('#notebookslist').getStore().sort('modified', 'DESC');\n\t\t}).catch(function(err) {\n\t\t\tme.window.unmask()\n\t\t});\n\t},\n\n\tgetSuggestedNotebooks: function() {\n\t\tvar query = 'id:'+this.suggestedNotebookIds.join('|id:');\n\t\tthis.getNotebooks([query]);\n\t}\n});\n","Ext.define('Voyant.notebook.Authenticator', {\n\tmixins: ['Voyant.util.Localization','Voyant.notebook.util.NotebooksList'],\n\tstatics: {\n\t\ti18n: {\n\t\t\taccount: 'Account',\n\t\t\tsignInWithGithub: 'Sign in with GitHub',\n\t\t\tsignInWithGoogle: 'Sign in with Google',\n\t\t\tlogout: 'Logout',\n\t\t\tyourNotebooks: 'Your Notebooks',\n\t\t\tauthenticateWithGithub: 'Authenticate with GitHub',\n\t\t\tauthorizeSpyralGithub: 'You must authorize Spyral to use GitHub on your behalf.',\n\t\t\tsignInSuccess: 'Sign in successful!',\n\t\t\tclose: 'Close',\n\t\t\topenSelected: 'Open Selected Notebook',\n\t\t\tdeleteSelected: 'Delete Selected Notebook',\n\t\t\tdeleteConfirm: 'Are you sure you want to permanently delete the selected notebook?',\n\t\t\tdeleting: 'Deleting',\n\t\t\tnotebookDeleted: 'Notebook deleted',\n\t\t\terrorDeletingNotebook: 'Error deleting notebook'\n\t\t}\n\t},\n\n\taccountInfo: undefined,\n\n\tgetGitHubAuthButton: function(callback) {\n\t\tconst me = this;\n\t\treturn {\n\t\t\txtype: 'button',\n\t\t\tglyph: 'xf09b@FontAwesome',\n\t\t\ttext: me.localize('signInWithGithub'),\n\t\t\tmargin: '5 15',\n\t\t\thandler: function(button) {\n\t\t\t\tfunction postMessageHandler(event) {\n\t\t\t\t\tif (event.origin === window.location.origin && event.data === 'oauth_cookie_set') {\n\t\t\t\t\t\twindow.removeEventListener(\"message\", postMessageHandler, false);\n\t\t\t\t\t\tevent.source.close();\n\t\t\t\t\t\tme.retrieveAccountInfo().then(function(info) {\n\t\t\t\t\t\t\tcallback.call(me, info);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn('Error authenticating with GitHub');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\twindow.open(Voyant.application.getBaseUrlFull()+'spyral/oauth', '_blank');\n\t\t\t\twindow.addEventListener(\"message\", postMessageHandler, false);\n\t\t\t}\n\t\t}\n\t},\n\n\tgetGoogleAuthButton: function(callback) {\n\t\tgoogle.accounts.id.initialize({\n\t\t\tclient_id: \"foobar\",\n\t\t\tux_mode: \"redirect\",\n\t\t\tlogin_uri: \"http://localhost:8080/voyant/spyral/oauth/callback\"\n\t\t});\n\n\t\treturn {\n\t\t\txtype: 'component',\n\t\t\thtml: '<div id=\"signInWithGoogleButton\"></div>',\n\t\t\tmargin: 5,\n\t\t\tlisteners: {\n\t\t\t\tafterrender: function() {\n\t\t\t\t\tgoogle.accounts.id.renderButton(\n\t\t\t\t\t\tdocument.getElementById(\"signInWithGoogleButton\"),\n\t\t\t\t\t\t{theme: \"outline\", size: \"medium\"}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tshowGitHubAuthentication: function(callback) {\n\t\tconst me = this;\n\n\t\tExt.create('Ext.window.Window', {\n\t\t\ttitle: me.localize('authenticateWithGithub'),\n\t\t\twidth: 750,\n\t\t\theight: 550,\n\t\t\tclosable: false,\n\t\t\tlayout: {\n\t\t\t\ttype: 'vbox',\n\t\t\t\talign: 'middle',\n\t\t\t\tpack: 'center'\n\t\t\t},\n\t\t\titems: [\n\t\t\t\t{html: '<div style=\"margin-bottom: 10px;\">'+me.localize('authorizeSpyralGithub')+'</div>'},\n\t\t\t\tme.getGitHubAuthButton(callback)\n\t\t\t],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'Cancel',\n\t\t\t\thandler: function() {\n\t\t\t\t\tme.close();\n\t\t\t\t}\n\t\t\t}]\n\t\t}).show();\n\t},\n\n\tshowAccountWindow: function() {\n\t\tconst me = this;\n\n\t\tif (this.isAuthenticated()) {\n\t\t\tconst idInfo = this.accountInfo.id.split('@');\n\t\t\tconst id = idInfo[0];\n\t\t\tconst idType = idInfo[1];\n\n\t\t\tconst accountWin = Ext.create('Ext.window.Window', {\n\t\t\t\ttitle: me.localize('account'),\n\t\t\t\twidth: 750,\n\t\t\t\theight: 550,\n\t\t\t\tmodal: true,\n\t\t\t\tmaximizable: true,\n\t\t\t\tclosable: true,\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'hbox',\n\t\t\t\t\talign: 'stretch',\n\t\t\t\t\tpack: 'center'\n\t\t\t\t},\n\t\t\t\titems: [{\n\t\t\t\t\twidth: 200,\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\t\talign: 'middle',\n\t\t\t\t\t\tpack: 'start'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\thtml:\n`<div style=\"padding: 10px\">\n\t<img src=\"${me.accountInfo.avatar}\" width=\"100\" height=\"100\" style=\"display: block; margin-bottom: 5px\" />\n\t<div style=\"margin-bottom: 5px\">${me.accountInfo.name}</div>\n\t<div><i class=\"fa fa-${idType === 'gh' ? 'github' : 'google'}\"></i> ${id}</div>\n</div>`\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\tglyph: 'xf08b@FontAwesome',\n\t\t\t\t\t\ttext: me.localize('logout'),\n\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\tExt.Ajax.request({url: me.getApplication().getBaseUrlFull()+'spyral/account/logout'});\n\t\t\t\t\t\t\tme.accountInfo = undefined;\n\t\t\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\tflex: 1,\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\t\talign: 'middle',\n\t\t\t\t\t\tpack: 'start'\n\t\t\t\t\t},\n\t\t\t\t\titems:[{\n\t\t\t\t\t\thtml: '<h3>'+me.localize('yourNotebooks')+'</h3>'\n\t\t\t\t\t},{\n\t\t\t\t\t\tflex: 1,\n\t\t\t\t\t\titemId: 'notebookslist',\n\t\t\t\t\t\txtype: 'notebookslist',\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\titemdblclick: function(view, record, el) {\n\t\t\t\t\t\t\t\tconst notebookId = record.get('id');\n\t\t\t\t\t\t\t\tme.fireEvent('notebookSelected', me, notebookId, function() {\n\t\t\t\t\t\t\t\t\tview.up('window').close()\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t}],\n\t\t\t\tbuttons: [{\n\t\t\t\t\ttext: me.localize('close'),\n\t\t\t\t\tui: 'default-toolbar',\n\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\ttext: me.localize('deleteSelected'),\n\t\t\t\t\tui: 'default-toolbar',\n\t\t\t\t\tglyph: 'xf1f8@FontAwesome',\n\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\tconst win = btn.up('window');\n\t\t\t\t\t\tconst notebooksList = win.down('#notebookslist');\n\t\t\t\t\t\tconst sel = notebooksList.getSelection();\n\t\t\t\t\t\tif (sel[0]) {\n\t\t\t\t\t\t\tExt.Msg.confirm('Delete', me.localize('deleteConfirm'), function(button) {\n\t\t\t\t\t\t\t\tif (button === 'yes') {\n\t\t\t\t\t\t\t\t\tbtn.setDisabled(true);\n\t\t\t\t\t\t\t\t\tnotebooksList.mask(me.localize('deleting'));\n\t\t\t\t\t\t\t\t\tconst notebookId = sel[0].get('id');\n\t\t\t\t\t\t\t\t\tme.deleteNotebook(notebookId).then(function() {\n\t\t\t\t\t\t\t\t\t\tnotebooksList.unmask();\n\t\t\t\t\t\t\t\t\t\tbtn.setDisabled(false);\n\t\t\t\t\t\t\t\t\t\tnotebooksList.getStore().remove(sel[0]);\n\t\t\t\t\t\t\t\t\t\tme.toastInfo({\n\t\t\t\t\t\t\t\t\t\t\thtml: me.localize('notebookDeleted'),\n\t\t\t\t\t\t\t\t\t\t\tanchor: 'tr'\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}, function(err) {\n\t\t\t\t\t\t\t\t\t\tnotebooksList.unmask();\n\t\t\t\t\t\t\t\t\t\tbtn.setDisabled(false);\n\t\t\t\t\t\t\t\t\t\tExt.Msg.show({\n\t\t\t\t\t\t\t\t\t\t\ttitle: me.localize('errorDeletingNotebook'),\n\t\t\t\t\t\t\t\t\t\t\tmsg: err,\n\t\t\t\t\t\t\t\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\t\t\t\t\t\t\t\ticon: Ext.MessageBox.ERROR\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, me);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\ttext: me.localize('openSelected'),\n\t\t\t\t\tglyph: 'xf115@FontAwesome',\n\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\tconst win = btn.up('window');\n\t\t\t\t\t\tconst sel = win.down('#notebookslist').getSelection();\n\t\t\t\t\t\tif (sel[0]) {\n\t\t\t\t\t\t\tconst notebookId = sel[0].get('id');\n\t\t\t\t\t\t\tme.fireEvent('notebookSelected', me, notebookId, function() {\n\t\t\t\t\t\t\t\twin.close()\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t});\n\t\t\taccountWin.show();\n\n\t\t\tthis.populateNotebookList(accountWin);\n\t\t}\n\t},\n\n\tretrieveAccountInfo: function() {\n\t\tconst me = this;\n\t\tvar dfd = new Ext.Deferred();\n\n\t\tExt.Ajax.request({\n\t\t\turl: this.getApplication().getBaseUrlFull()+'spyral/account',\n\t\t\tsuccess: function(resp) {\n\t\t\t\tif (resp.responseText === '') {\n\t\t\t\t\tdfd.resolve(undefined);\n\t\t\t\t} else {\n\t\t\t\t\tvar info = JSON.parse(resp.responseText);\n\t\t\t\t\tme.accountInfo = info;\n\t\t\t\t\tdfd.resolve(info);\n\t\t\t\t}\n\t\t\t},\n\t\t\tfailure: function() {\n\t\t\t\tdfd.reject();\n\t\t\t}\n\t\t});\n\n\t\treturn dfd.promise;\n\t},\n\n\tisAuthenticated: function(refresh) {\n\t\tif (refresh) {\n\t\t\treturn this.retrieveAccountInfo().then(function(info) {\n\t\t\t\treturn info !== undefined;\n\t\t\t}, function() {\n\t\t\t\treturn false;\n\t\t\t})\n\t\t}\n\t\treturn this.accountInfo !== undefined;\n\t},\n\n\tpopulateNotebookList: function(accountWin) {\n\t\taccountWin.down('#notebookslist').mask('Loading');\n\t\tSpyral.Load.trombone({\n\t\t\ttool: 'notebook.NotebookFinder',\n\t\t\tquery: 'facet.userId:'+this.accountInfo.id,\n\t\t\tnoCache: 1\n\t\t}).then(function(json) {\n\t\t\taccountWin.down('#notebookslist').unmask();\n\t\t\taccountWin.down('#notebookslist').getStore().loadRawData(json.catalogue.notebooks);\n\t\t\taccountWin.down('#notebookslist').getStore().sort('modified', 'DESC');\n\t\t}).catch(function(err) {\n\t\t\taccountWin.unmask()\n\t\t});\n\t},\n\n\tdeleteNotebook: function(notebookId) {\n\t\tconst me = this;\n\n\t\tconst dfd = new Ext.Deferred();\n\n\t\tExt.Ajax.request({\n\t\t\tmethod: 'POST',\n\t\t\turl: Voyant.application.getBaseUrlFull()+'spyral/account/delete',\n\t\t\tparams: {\n\t\t\t\tid: notebookId\n\t\t\t},\n\t\t\tsuccess: function(resp) {\n\t\t\t\tconst json = JSON.parse(resp.responseText);\n\t\t\t\tif (json.notebook.success) {\n\t\t\t\t\tme.fireEvent('fileDeleted', me, notebookId);\n\t\t\t\t\tdfd.resolve(true);\n\t\t\t\t} else {\n\t\t\t\t\tme.fireEvent('fileDeleted', me, null, json.notebook.error);\n\t\t\t\t\tdfd.reject(json.notebook.error);\n\t\t\t\t}\n\t\t\t},\n\t\t\tfailure: function(resp) {\n\t\t\t\tme.fireEvent('fileDeleted', me, null, resp.responseText);\n\t\t\t\tdfd.reject(resp.responseText);\n\t\t\t}\n\t\t});\n\n\t\treturn dfd.promise;\n\t},\n\n\tgetCookie: function(cookieName) {\n\t\tconst re = new RegExp('[; ]'+cookieName+'=([^\\\\s;]*)');\n\t\tconst sMatch = (' '+document.cookie).match(re);\n\t\tif (cookieName && sMatch) return unescape(sMatch[1]);\n\t\treturn '';\n\t},\n\n\tdeleteCookie: function(cookieName, cookiePath) {\n\t\tcookiePath = cookiePath === undefined ? '/' : cookiePath;\n\t\tdocument.cookie = cookieName +'=; Path='+cookiePath+'; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n\t}\n});\n","/*\n * @class Notebook\n * A Spyral Notebook. This should never be instantiated directly.\n */\nExt.define('Voyant.notebook.Notebook', {\n\talternateClassName: [\"Notebook\"],\n\textend: 'Ext.panel.Panel',\n\trequires: ['Voyant.notebook.editor.CodeEditorWrapper','Voyant.notebook.editor.TextEditorWrapper','Voyant.notebook.metadata.MetadataEditor','Voyant.notebook.StorageDialogs','Voyant.notebook.github.GitHubDialogs'],\n\tmixins: ['Voyant.panel.Panel','Voyant.notebook.Authenticator','Voyant.notebook.util.FormatConverter'],\n\talias: 'widget.notebook',\n    statics: {\n    \ti18n: {\n    \t\ttitle: \"Spyral\",\n    \t\tcreated: \"Notebook Created\",\n    \t\tmodified: \"Notebook Modified\",\n\t\t\tsaving: \"Saving Notebook\",\n\t\t\tsaved: \"Notebook Saved\",\n    \t\tclickToEdit: \"Click to edit\",\n    \t\terrorLoadingNotebook: \"Error loading Spyral notebook\",\n    \t\tcannotLoadJson: \"Unable to parse JSON input.\",\n    \t\tcannotLoadJsonUnrecognized: \"Unable to recognize JSON input.\",\n    \t\tcannotLoadUnrecognized: \"Unable to recognize input.\",\n\t\t\tcannotLoadNotebookId: \"Unable to load the Spyral Notebook. It may no longer exist.\",\n    \t\topenTitle: \"Open\",\n    \t\topenMsg: \"Paste in Notebook ID or a Spyral data file (in HTML).\",\n    \t\texportHtmlDownload: \"HTML (download)\",\n    \t\terrorParsingDomInput: \"An error occurred while parsing the input of the document. The results might still work, except if the code contained HTML tags.\",\n\t\t\tmetadataTip: \"View and Edit the notebook metadata.\",\n\t\t\tmetadataEditor: \"Edit Metadata\",\n    \t\tmetadataReset: \"Reset\",\n    \t\tmetadataSave: \"Save Metadata\",\n    \t\tmetadataCancel: \"Cancel\",\n\t\t\tcatalogueTip: \"Search a catalogue of available notebooks.\",\n\t\t\tpreparingExport: \"Preparing Export\",\n\t\t\tnotSavedWarning: \"Changes to your notebook have not been saved. Are you sure you want to continue?\",\n\t\t\taccountTip: 'View your account',\n\t\t\topenTip: 'Open a Spyral Notebook (by uploading a file)',\n\t\t\tnewNotebookIntro: `\n\t\t\t<p>This is a Spyral Notebook, a dynamic document that combines writing, code and data in service of reading, analyzing and interpreting digital texts.</p>\n\t\t\t<p>Spyral Notebooks are composed of text cells (like this one) and code cells (like the one below). You can click on the cells to edit them and add new cells by clicking add icon that appears in the left column when hovering over a cell.</p>\n\t\t\t<p>To learn more check out our <a href=\"https://voyant-tools.org/spyral/learnspyral@gh/Tutorials/\" target=\"_blank\">Spyral Tutorials Table of Contents</a> page.</p>\n\t\t\t`\n    \t},\n    \tapi: {\n    \t\tinput: undefined,\n    \t\tinputEncodedBase64Json: undefined,\n    \t\trun: undefined\n    \t}\n    },\n    config: {\n        /**\n         * @private\n\t\t * This is a combination of username and notebook name, separated by NOTEBOOK_ID_SEPARATOR\n         */\n    \tnotebookId: undefined,\n\t\t/**\n\t\t * @private\n\t\t * The name of the notebook (distinct from the notebook title)\n\t\t */\n\t\tnotebookName: undefined,\n        /**\n         * @private\n         */\n    \tmetadata: undefined,\n        /**\n         * @private\n         */\n    \tisEdited: false,\n    \t/**\n    \t * @private\n    \t */\n    \tversion: \"3.0\",\n\t\t/**\n\t\t * @private\n\t\t * Which solution to use for storing notebooks, either: 'voyant' or 'github'\n\t\t */\n\t\tstorageSolution: 'voyant'\n\t},\n\n\tNOTEBOOK_ID_SEPARATOR: '_',\n\n\tSPYRAL_ID_REGEX: /\\/spyral\\/(.*?@[a-z]{2})[\\/_]([A-Za-z0-9-]+)\\/?$/,\n\tSPYRAL_ID_REGEX_OLD: /\\/spyral\\/([\\w-]+)\\/?$/,\n\n\tmetadataWindow: undefined,\n\tvoyantStorageDialogs: undefined,\n\tgithubDialogs: undefined,\n\tcatalogueWindow: undefined,\n\tdocsPanel: undefined,\n\n\t// holds the content of the tern docs, for passing to the code editor\n\tspyralTernDocs: undefined,\n\tecmaTernDocs: undefined,\n\tbrowserTernDocs: undefined,\n\ttoolTernDocs: undefined,\n    \n    /**\n     * @private\n     */\n    constructor: function(config) {\n\t\tvar handleSignIn = function() {\n\t\t\tparent.setMetadata(parent.getMetadata().clone()); // force metadata refresh\n\t\t\tparent.setIsEdited(false);\n\t\t\tparent.toastInfo({\n\t\t\t\thtml: parent.localize('signInSuccess'),\n\t\t\t\tanchor: 'tr'\n\t\t\t});\n\t\t}\n\n    \tExt.apply(config, {\n    \t\ttitle: this.localize('title'),\n    \t\tincludeTools: {\n\t\t\t\t'help': true,\n\t\t\t\t'gear': true,\n    \t\t\t'save': true,\n    \t\t\t'saveIt': {\n    \t\t\t\ttooltip: this.localize(\"saveItTip\"),\n    \t\t\t\titemId: 'saveItTool',\n    \t\t\t\txtype: 'toolmenu',\n    \t\t\t\tglyph: 'xf0c2@FontAwesome',\n\t\t\t\t\tcallback: function(parent, menu) {\n\t\t\t\t\t\tif (menu.toolMenu) menu.toolMenu.destroy(); // need to recreate toolMenu each to register item changes\n\t\t\t\t\t\tmenu.items = [];\n\n\t\t\t\t\t\tparent.isAuthenticated(true).then(function(isAuth) {\n\t\t\t\t\t\t\tif (isAuth) {\n\t\t\t\t\t\t\t\tmenu.items = [{\n\t\t\t\t\t\t\t\t\ttext: 'Save',\n\t\t\t\t\t\t\t\t\txtype: 'menuitem',\n\t\t\t\t\t\t\t\t\tglyph: 'xf0c2@FontAwesome',\n\t\t\t\t\t\t\t\t\thandler: parent.showSaveDialog.bind(parent, false),\n\t\t\t\t\t\t\t\t\tscope: parent\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\ttext: 'Save As...',\n\t\t\t\t\t\t\t\t\txtype: 'menuitem',\n\t\t\t\t\t\t\t\t\tglyph: 'xf0c2@FontAwesome',\n\t\t\t\t\t\t\t\t\thandler: parent.showSaveDialog.bind(parent, true),\n\t\t\t\t\t\t\t\t\tscope: parent\n\t\t\t\t\t\t\t\t}];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmenu.items = [\n\t\t\t\t\t\t\t\t\tparent.getGitHubAuthButton(handleSignIn)\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\tmenu.items = [\n\t\t\t\t\t\t\t\tparent.getGitHubAuthButton(handleSignIn)\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}).always(function() {\n\t\t\t\t\t\t\tmenu.showToolMenu();\n\t\t\t\t\t\t});\n\t\t\t\t\t\t/*{\n\t\t\t\t\t\t\ttext: 'Storage',\n\t\t\t\t\t\t\txtype: 'menuitem',\n\t\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\t\ttext: 'Voyant',\n\t\t\t\t\t\t\t\t\txtype: 'menucheckitem',\n\t\t\t\t\t\t\t\t\tgroup: 'storageSolution',\n\t\t\t\t\t\t\t\t\tchecked: true,\n\t\t\t\t\t\t\t\t\thandler: this.setStorageSolution.bind(this, 'voyant'),\n\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\ttext: 'GitHub',\n\t\t\t\t\t\t\t\t\txtype: 'menucheckitem',\n\t\t\t\t\t\t\t\t\tgroup: 'storageSolution',\n\t\t\t\t\t\t\t\t\tchecked: false,\n\t\t\t\t\t\t\t\t\thandler: this.setStorageSolution.bind(this, 'github'),\n\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}*/\n\t\t\t\t\t}\n    \t\t\t},\n    \t\t\t'new': {\n    \t\t\t\ttooltip: this.localize(\"newTip\"),\n    \t\t\t\tcallback: function() {\n    \t    \t\t\tlet url = this.getBaseUrl()+\"spyral/\";\n\t\t\t\t\t\tthis.getApplication().openUrl(url);\n    \t\t\t\t},\n    \t\t\t\txtype: 'toolmenu',\n    \t\t\t\tglyph: 'xf067@FontAwesome',\n    \t\t\t\tscope: this\n    \t\t\t},\n    \t\t\t'open': {\n    \t\t\t\ttooltip: this.localize(\"openTip\"),\n    \t\t\t\txtype: 'toolmenu',\n\t\t\t\t\tglyph: 'xf115@FontAwesome',\n\t\t\t\t\tcallback: function(panel, tool) {\n\t\t\t\t\t\tconst storageSolution = this.getStorageSolution();\n\t\t\t\t\t\tif (storageSolution === undefined) {\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (storageSolution === 'github') {\n\t\t\t\t\t\t\t\tthis.githubDialogs.showLoad();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.voyantStorageDialogs.showLoad();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n    \t\t\t},\n    \t\t\t'runall': {\n    \t\t\t\ttooltip: this.localize(\"runallTip\"),\n    \t\t\t\tcallback: this.runAll,\n    \t\t\t\txtype: 'toolmenu',\n    \t\t\t\tglyph: 'xf04e@FontAwesome',\n    \t\t\t\tscope: this\n    \t\t\t},\n    \t\t\t'metadata': {\n    \t\t\t\ttooltip: this.localize(\"metadataTip\"),\n    \t\t\t\tcallback: this.showMetadataEditor,\n\t\t\t\t\txtype: 'toolmenu',\n\t\t\t\t\tglyph: 'xf02c@FontAwesome',\n\t\t\t\t\tscope: this\n    \t\t\t},\n                'catalogue': {\n                    tooltip: this.localize(\"catalogueTip\"),\n                    callback: function() {\n                        this.catalogueWindow.showWindow();\n                    },\n                    xtype: 'toolmenu',\n                    glyph: 'xf00b@FontAwesome',\n                    scope: this\n                },\n\t\t\t\t'account': {\n\t\t\t\t\ttooltip: this.localize(\"accountTip\"),\n\t\t\t\t\txtype: 'toolmenu',\n\t\t\t\t\tglyph: 'xf007@FontAwesome',\n\t\t\t\t\tcallback: function(parent, menu) {\n\t\t\t\t\t\tif (menu.toolMenu) menu.toolMenu.destroy(); // need to recreate toolMenu each time to register item changes\n\t\t\t\t\t\tmenu.items = [];\n\n\t\t\t\t\t\tparent.isAuthenticated(true).then(function(isAuth) {\n\t\t\t\t\t\t\tif (isAuth) {\n\t\t\t\t\t\t\t\tparent.showAccountWindow();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmenu.items = [\n\t\t\t\t\t\t\t\t\tparent.getGitHubAuthButton(handleSignIn)\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\tmenu.items = [\n\t\t\t\t\t\t\t\tparent.getGitHubAuthButton(handleSignIn)\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}).always(function() {\n\t\t\t\t\t\t\tmenu.showToolMenu();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n    \t\t},\n    \t\t\n\t\t\tlayout: 'border',\n\t\t\titems: [{\n\t\t\t\titemId: 'notebookContainer',\n\t\t\t\tregion: 'center',\n\t\t\t\tscrollable: true,\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\talign: 'middle',\n\t\t\t\t\tpadding: '50 0'\n\t\t\t\t},\n\t\t\t\tdefaults: {\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\tmaxWidth: 1100\n\t\t\t\t},\n\t\t\t\titems: [{\n\t\t\t\t\titemId: 'spyralHeader',\n\t\t\t\t\tcls: 'spyral-header',\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tafterrender: function(header) {\n\t\t\t\t\t\t\tExt.tip.QuickTipManager.register({\n\t\t\t\t\t\t\t\t  target: header.getId(),\n\t\t\t\t\t\t\t\t  text: this.localize(\"clickToEdit\")\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar head = header;\n\t\t\t\t\t\t\theader.getTargetEl().on(\"click\", function(header) {\n\t\t\t\t\t\t\t\tthis.showMetadataEditor();\n\t\t\t\t\t\t\t\thead.removeCls(\"editable\");\n\t\t\t\t\t\t\t}, this);\n\t\t\t\t\t\t\theader.mon(header.getEl(), \"mouseover\", function() {header.addCls(\"editable\")});\n\t\t\t\t\t\t\theader.mon(header.getEl(), \"mouseout\", function() {header.removeCls(\"editable\")});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: 'container',\n\t\t\t\t\titemId: 'cells',\n\t\t\t\t\tdefaults: {\n\t\t\t\t\t\tmargin: '10 0 10 0',\n\t\t\t\t\t\tpadding: '0 65 0 65'\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\titemId: 'spyralFooter',\n\t\t\t\t\tcls: 'spyral-footer',\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tafterrender: function(footer) {\n\t\t\t\t\t\t\tExt.tip.QuickTipManager.register({\n\t\t\t\t\t\t\t\ttarget: footer.getId(),\n\t\t\t\t\t\t\t\ttext: this.localize(\"clickToEdit\")\n\t\t\t\t\t\t\t  });\n\t\t\t\t\t\t\tvar foot = footer;\n\t\t\t\t\t\t\tfooter.getTargetEl().on(\"click\", function(footer) {\n\t\t\t\t\t\t\t\tthis.showMetadataEditor();\n\t\t\t\t\t\t\t\tfoot.removeCls(\"editable\");\n\t\t\t\t\t\t\t}, this);\n\t\t\t\t\t\t\tfooter.mon(footer.getEl(), \"mouseover\", function() {footer.addCls(\"editable\")});\n\t\t\t\t\t\t\tfooter.mon(footer.getEl(), \"mouseout\", function() {footer.removeCls(\"editable\")});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t},{\n\t\t\t\tregion: 'east',\n\t\t\t\titemId: 'docsContainer',\n\t\t\t\tsplit: true,\n\t\t\t\thidden: true,\n\t\t\t\tcollapsible: true,\n\t\t\t\tanimCollapse: false,\n\t\t\t\tclosable: true,\n\t\t\t\tcloseAction: 'hide',\n\t\t\t\tlayout: 'fit',\n\t\t\t\twidth: '33%',\n\t\t\t\titems: { xtype: 'spyralDocsPanel' }\n\t\t\t}],\n\t\t\t\n\t\t\thelpToolClick: this.showDocs.bind(this),\n    \t\tlisteners: {\n    \t\t\tafterrender: this.init,\n    \t\t\tnotebookWrapperMoveUp: this.notebookWrapperMoveUp,\n    \t\t\tnotebookWrapperMoveDown: this.notebookWrapperMoveDown,\n    \t\t\tnotebookWrapperRemove: this.notebookWrapperRemove,\n\t\t\t\tnotebookWrapperAdd: this.notebookWrapperAdd,\n\t\t\t\tnotebookInitialized: this.notebookInitialized,\n\t\t\t\tnotebookSelected: this.handleNotebookSelected,\n    \t\t\tscope: this\n    \t\t}\n    \t})\n\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t\tthis.mixins['Voyant.notebook.util.FormatConverter'].constructor.apply(this, arguments);\n\n\t\tthis.voyantStorageDialogs = new Voyant.notebook.StorageDialogs({\n\t\t\tnotebookParent: this,\n\t\t\tlisteners: {\n\t\t\t\t'fileLoaded': function(fileData) {\n\t\t\t\t\tthis.checkIsEditedAndDoCallback(this, function() {\n\t\t\t\t\t\tthis.loadFromString(fileData);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t'fileSaving': function() {\n\t\t\t\t\tthis.mask(this.localize('saving'));\t\n\t\t\t\t},\n\t\t\t\t'fileSaved': function(src, notebookId, error) {\n\t\t\t\t\tthis.unmask();\n\t\t\t\t\tif (notebookId !== null) {\n\t\t\t\t\t\tvar id = this.getNotebookId();\n\t\t\t\t\t\tif (!id || notebookId!=id) {\n\t\t\t\t\t\t\tthis.setNotebookId(notebookId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.toastInfo({\n\t\t\t\t\t\t\thtml: this.localize('saved'),\n\t\t\t\t\t\t\tanchor: 'tr'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.setIsEdited(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// save error\n\t\t\t\t\t\tthis.showError(\"There was an error saving your notebook:\\n\"+error);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'saveCancelled': function() {\n\t\t\t\t},\n\t\t\t\t'close': function() {\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\n\t\tthis.githubDialogs = new Voyant.notebook.github.GitHubDialogs({\n\t\t\tparent: this,\n\t\t\tlisteners: {\n\t\t\t\t'fileLoaded': function(src, {owner, repo, ref, path, file}) {\n\t\t\t\t\tthis.githubDialogs.close();\n\t\t\t\t\tthis.loadFromString(file);\n\n\t\t\t\t\tconst id = encodeURIComponent(owner+'/'+repo+'/'+path);\n\t\t\t\t\tif (location.search.indexOf(id) === -1) {\n\t\t\t\t\t\tconst url = this.getBaseUrl()+'spyral/?githubId='+id;\n\t\t\t\t\t\twindow.history.pushState({\n\t\t\t\t\t\t\turl: url\n\t\t\t\t\t\t}, 'Spyral Notebook: '+id, url);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'fileSaving': function() {\n\t\t\t\t\tthis.mask(this.localize('saving'));\t\n\t\t\t\t},\n\t\t\t\t'fileSaved': function(src, {owner, repo, branch, path}) {\n\t\t\t\t\tthis.githubDialogs.close();\n\t\t\t\t\tthis.unmask();\n\t\t\t\t\tthis.toastInfo({\n\t\t\t\t\t\thtml: this.localize('saved'),\n\t\t\t\t\t\tanchor: 'tr'\n\t\t\t\t\t});\n\t\t\t\t\tthis.setIsEdited(false);\n\n\t\t\t\t\tconst id = encodeURIComponent(owner+'/'+repo+'/'+path);\n\t\t\t\t\tif (location.search.indexOf(id) === -1) {\n\t\t\t\t\t\tconst url = this.getBaseUrl()+'spyral/?githubId='+id;\n\t\t\t\t\t\twindow.history.pushState({\n\t\t\t\t\t\t\turl: url\n\t\t\t\t\t\t}, 'Spyral Notebook: '+id, url);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'saveCancelled': function(src) {\n\t\t\t\t\tthis.unmask();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\n\t\tthis.catalogueWindow = new Voyant.notebook.Catalogue({\n\t\t\tlisteners: {\n\t\t\t\tnotebookSelected: this.handleNotebookSelected,\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\n\t\tthis.docsPanel = this.getComponent('docsContainer').down('spyralDocsPanel');\n    },\n    \n    init: function() {\n\t\twindow.onbeforeunload = function() {\n\t\t\tif (this.getIsEdited()) {\n\t\t\t\treturn ''; // return any string to prompt the browser to warn the user they have unsaved changes\n\t\t\t}\n\t\t}.bind(this);\n\n\t\t// need to load docs first\n\t\tExt.Promise.all([\n\t\t\tExt.Ajax.request({url: this.getApplication().getBaseUrlFull()+'resources/spyral/docs/spyral.json'}),\n\t\t\tExt.Ajax.request({url: this.getApplication().getBaseUrlFull()+'resources/spyral/docs/ecmascript.json'}),\n\t\t\tExt.Ajax.request({url: this.getApplication().getBaseUrlFull()+'resources/spyral/docs/browser.json'}),\n\t\t\tExt.Ajax.request({url: this.getApplication().getBaseUrlFull()+'resources/spyral/docs/tools.json'})\n\t\t]).then(function(responses) {\n\t\t\tthis.spyralTernDocs = Ext.JSON.decode(responses[0].responseText);\n\t\t\tthis.ecmaTernDocs = Ext.JSON.decode(responses[1].responseText);\n\t\t\tthis.browserTernDocs = Ext.JSON.decode(responses[2].responseText);\n\t\t\tthis.toolTernDocs = Ext.JSON.decode(responses[3].responseText);\n\t\t\tthis.loadFromQueryParams();\n\t\t}.bind(this), function() {\n\t\t\tthis.loadFromQueryParams();\n\t\t}.bind(this));\n\n\t\tthis.retrieveAccountInfo();\n    },\n    \n    \n    reset: function() {\n\t\tthis.getComponent('notebookContainer').getScrollable().scrollTo(0, 0);\n\t\tthis.getComponent('notebookContainer').getScrollable().trackingScrollTop = 0;\n\t\tthis.getComponent('notebookContainer').getScrollable().trackingScrollLeft = 0;\n\n\t\tthis.setNotebookId(null); // can't use undefined because applyNotebookId would prevent it from actually being set\n\t\tthis.setMetadata(new Spyral.Metadata());\n\t\tthis.voyantStorageDialogs.reset();\n    \tvar cells = this.getComponent('notebookContainer').getComponent(\"cells\");\n    \tcells.removeAll();\n\t},\n\n\tshowSaveDialog: function(saveAs) {\n\t\tthis.getMetadata().setDateNow('modified');\n\t\tthis.getMetadata().set({userId: this.accountInfo.id});\n\n\t\tthis.updateCachedOutput().then(function(result) {\t\n\t\t}, function(err) {\n\t\t\tconsole.warn('Error updating cached results');\n\t\t}).finally(function() {\n\t\t\tvar data = this.generateExportJson();\n\t\t\tvar metadata = this.generateExportMetadata(this.getMetadata());\n\t\n\t\t\tvar storageSolution = this.getStorageSolution();\n\t\t\t\n\t\t\tif (!saveAs && storageSolution === 'voyant' && this.getNotebookId() !== undefined && this.getNotebookId() !== null) {\n\t\t\t\tthis.voyantStorageDialogs.doSave({\n\t\t\t\t\tnotebookName: this.getNotebookName(),\n\t\t\t\t\tdata: data,\n\t\t\t\t\tmetadata: metadata\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (storageSolution === 'github') {\n\t\t\t\t\tthis.githubDialogs.showSave(data);\n\t\t\t\t} else {\n\t\t\t\t\tthis.voyantStorageDialogs.showSave(data, metadata, saveAs ? undefined : this.getNotebookName());\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(this));\n\t},\n\n\tupdateCachedOutput: function() {\n\t\treturn Ext.Promise.all(this.query('notebookrunnableeditorwrapper').map(function(cmp) {\n\t\t\treturn cmp.results.updateCachedOutput();\n\t\t}));\n\t},\n\n\texportToolClick: function(panel) {\n\t\tpanel.mask(panel.localize('preparingExport'));\n\t\tpanel.updateCachedOutput().finally(function() {\n\t\t\tpanel.unmask();\n\t\t\tpanel.mixins['Voyant.util.Toolable'].exportToolClick.call(this, panel);\n\t\t});\n\t},\n\t\n\t// override toolable method\n\tgetExportUrl: function(asTool) {\n\t\treturn location.href; // we just provide the current URL\n\t},\n\n\t// override toolable method\n\texportBiblio: function() {\n\t\tvar date = new Date();\n\t\tvar url = this.getExportUrl();\n\t\tvar metadata = this.getMetadata();\n\t\tvar author = metadata.author;\n\t\tvar title = metadata.title;\n\t\tExt.Msg.show({\n\t\t\ttitle: this.localize('exportBiblioTitle'),\n\t\t\tmessage: '<fieldset><legend>MLA</legend>'+\n\t\t\t'<div class=\"x-selectable\">'+\n\t\t\tauthor+'. \"'+title+'.\" '+\n\t\t\t'<i>Spyral - Voyant Tools</i>, Development led by St\u00e9fan Sinclair and Geoffrey Rockwell. '+Ext.Date.format(date,'Y')+'. Web. '+Ext.Date.format(date,'j M Y')+'. &lt;'+url+'&gt;.'+\n\t\t\t'</div></fieldset><br >'+\n\t\t\t'<fieldset><legend>Chicago</legend>'+\n\t\t\t'<div class=\"x-selectable\">'+\n\t\t\tauthor+', \"'+title+'\", '+\n\t\t\t'<i>Spyral - Voyant Tools</i>, Development led by St\u00e9fan Sinclair and Geoffrey Rockwell. Accessed '+Ext.Date.format(date,'F j, Y')+', '+url+'.'+\n\t\t\t'</div></fieldset><br >'+\n\t\t\t'<fieldset><legend>APA</legend>'+\n\t\t\t'<div class=\"x-selectable\">'+\n\t\t\tauthor+'. ('+Ext.Date.format(date,'Y')+\"). \"+title+'. '+\n\t\t\t'<i>Spyral - Voyant Tools</i>, Development led by St\u00e9fan Sinclair and Geoffrey Rockwell. Retrieved '+Ext.Date.format(date,'F j, Y')+', from '+url+\n\t\t\t'</div></fieldset>',\n\t\t\tbuttons: Ext.Msg.OK,\n\t\t\ticon: Ext.Msg.INFO\n\t\t})\n\t},\n\n\tloadFromQueryParams: function() {\n\t\tvar queryParams = Ext.Object.fromQueryString(document.location.search, true);\n\t\tvar doRun = Ext.isDefined(queryParams.run);\n\n\t\tvar spyralIdMatches = this.SPYRAL_ID_REGEX.exec(location.pathname);\n\t\tvar spyralIdMatchesOld = this.SPYRAL_ID_REGEX_OLD.exec(location.pathname);\n\n\t\tvar isGithub = Ext.isDefined(queryParams.githubId);\n\t\t\n\t\tif (\"inputJsonArrayOfEncodedBase64\" in queryParams) {\n\t\t\tlet json = Ext.decode(decodeURIComponent(atob(queryParams.inputJsonArrayOfEncodedBase64)));\n\t\t\tjson.forEach(function(block, index) {\n\t\t\t\tlet text = block;\n\t\t\t\tif (text.trim().indexOf(\"<\")==0) {\n\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\t// assume first text block is metadata\n\t\t\t\t\t\tthis.setMetadata(new Spyral.Metadata({\n\t\t\t\t\t\t\ttitle: text\n\t\t\t\t\t\t}));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.addText(text);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.addCode(text);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t} else if (spyralIdMatches) {\n\t\t\tthis.loadFromId(spyralIdMatches[1]+this.NOTEBOOK_ID_SEPARATOR+spyralIdMatches[2]);\n\t\t\tthis.setStorageSolution('voyant');\n\t\t} else if (spyralIdMatchesOld) {\n\t\t\tthis.loadFromId(spyralIdMatchesOld[1]);\n\t\t\tthis.setStorageSolution('voyant');\n\t\t} else if (isGithub) {\n\t\t\tthis.githubDialogs.loadFileFromId(queryParams.githubId);\n\t\t\tthis.setStorageSolution('github');\n\t\t} else {\n\t\t\tthis.addNew();\n\t\t\tthis.setIsEdited(false);\n\t\t}\n\t\t\n\t\tif (doRun) {\n\t\t\tvar me = this;\n\t\t\tExt.defer(function() {\n\t\t\t\tme.runAll()\n\t\t\t}, 100)\n\t\t}\n\t},\n\t\n\tloadFromString: function(text) {\n\t\ttext = text.trim();\n\t\tif (text.indexOf(\"{\") === 0) {\n\t\t\tthis.loadFromJson(text);\n\t\t} else if (this.SPYRAL_ID_REGEX.test('/spyral/'+text)) {\n\t\t\tvar spyralIdMatches = this.SPYRAL_ID_REGEX.exec('/spyral/'+text);\n\t\t\tthis.loadFromId(spyralIdMatches[1]+this.NOTEBOOK_ID_SEPARATOR+spyralIdMatches[2]);\n\t\t} else if (text.indexOf(\"<\") !== 0 || text.indexOf(\"spyral\") === -1) {\n\t\t\treturn Ext.Msg.show({\n\t\t\t\ttitle: this.localize('errorLoadingNotebook'),\n\t\t\t\tmsg: this.localize('cannotLoadUnrecognized'),\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.ERROR\n\t\t\t});\n\t\t} else {\n\t\t\tExt.batchLayouts(function() {\n\t\t\t\tthis.reset();\n\t\t\t\ttry {\n\t\t\t\t\tthis.importFromHtml(text); // old format\n\t\t\t\t} catch (e) {\n\t\t\t\t\tExt.Msg.show({\n\t\t\t\t\t\ttitle: this.localize('errorLoadingNotebook'),\n\t\t\t\t\t\tmsg: this.localize('cannotLoadUnrecognized'),\n\t\t\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\t\t\ticon: Ext.MessageBox.ERROR\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\t\treturn true;\n    },\n\n\tloadFromJson: function(text) {\n\t\tvar json;\n\t\ttry {\n\t\t\tjson = JSON.parse(text)\n\t\t} catch(e) {\n\t\t\treturn Ext.Msg.show({\n\t\t\t\ttitle: this.localize('errorLoadingNotebook'),\n\t\t\t\tmsg: this.localize('cannotLoadJson')+\"<br><pre style='color: red'>\"+e+\"</pre>\",\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.ERROR\n\t\t\t});\n\t\t}\n\n\t\tif (!json.cells || !json.metadata) {\n\t\t\treturn Ext.Msg.show({\n\t\t\t\ttitle: this.localize('errorLoadingNotebook'),\n\t\t\t\tmsg: this.localize('cannotLoadJsonUnrecognized'),\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.ERROR\n\t\t\t});\n\t\t}\n\n\t\tExt.batchLayouts(function() {\n\t\t\tthis.reset();\n\t\t\tthis.setMetadata(new Spyral.Metadata(json.metadata));\n\n\t\t\tvar cells2Init = [];\n\t\t\tjson.cells.forEach(function(cell) {\n\t\t\t\tvar cell2Init = undefined;\n\t\t\t\tswitch(cell.type) {\n\t\t\t\t\tcase 'text':\n\t\t\t\t\t\tthis.addText(cell.content, undefined, cell.cellId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'code':\n\t\t\t\t\t\tcell2Init = this.addCode(cell.content, undefined, cell.cellId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'data':\n\t\t\t\t\t\tcell2Init = this.addData(cell.content, undefined, cell.cellId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (cell2Init) {\n\t\t\t\t\tcell2Init.on('initialized', function() {\n\t\t\t\t\t\tvar cellIndex = cells2Init.indexOf(cell2Init);\n\t\t\t\t\t\tif (cellIndex !== -1) {\n\t\t\t\t\t\t\tcells2Init.splice(cellIndex, 1);\n\t\t\t\t\t\t\tif (cells2Init.length === 0) {\n\t\t\t\t\t\t\t\tthis.fireEvent('notebookInitialized', this);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error('unknown cell initialized', cell2Init);\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this));\n\t\t\t\t\tcells2Init.push(cell2Init);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}, this);\n\t},\n    \n    loadFromId: function(id) {\n    \tthis.mask(this.localize(\"loading\"));\n    \tvar me = this;\n    \tSpyral.Load.trombone({\n\t    \t tool: 'notebook.GitNotebookManager',\n\t    \t action: 'load',\n\t    \t id: id,\n\t    \t noCache: 1\n    \t}).then(function(json) {\n    \t\tme.unmask();\n\t\t\tif (json.notebook.success) {\n\t\t\t\tme.loadFromString(json.notebook.data);\n\t\t\t\tif (json.notebook.id && json.notebook.id !== me.getNotebookId()) {\n\t\t\t\t\tme.setNotebookId(json.notebook.id);\n\t\t\t\t}\n\t\t\t\tme.setIsEdited(false);\n\t\t\t} else {\n\t\t\t\tExt.Msg.show({\n\t\t\t\t\ttitle: me.localize('errorLoadingNotebook'),\n\t\t\t\t\tmsg: json.notebook.error,\n\t\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\t\ticon: Ext.MessageBox.ERROR\n\t\t\t\t});\n\t\t\t}\n    \t}).catch(function(err) {\n\t\t\tme.unmask();\n\t\t\tExt.Msg.show({\n\t\t\t\ttitle: me.localize('errorLoadingNotebook'),\n\t\t\t\tmsg: me.localize('cannotLoadNotebookId'),\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.ERROR\n\t\t\t});\n\t\t});\n    },\n\n\tcheckIsEditedAndDoCallback: function(source, callback) {\n\t\tif (this.getIsEdited()) {\n\t\t\tExt.Msg.show({\n\t\t\t\ttitle: this.localize('openTitle'),\n\t\t\t\tmessage: this.localize('notSavedWarning'),\n\t\t\t\tbuttons: Ext.Msg.YESNO,\n\t\t\t\ticon: Ext.Msg.QUESTION,\n\t\t\t\tfn: function(btn) {\n\t\t\t\t\tif (btn==='yes') {\n\t\t\t\t\t\tcallback.call(source);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tscope: this\n\n\t\t\t});\n\t\t} else {\n\t\t\tcallback.call(source);\n\t\t}\n\t},\n\n\thandleNotebookSelected: function(source, notebookId, callback) {\n\t\tthis.checkIsEditedAndDoCallback(source, function() {\n\t\t\tif (callback) callback.call(source);\n\t\t\tthis.loadFromId(notebookId);\n\t\t}.bind(this));\n\t},\n    \n    runUntil: function(upToCmp) {\n    \tvar containers = [];\n    \tExt.Array.each(this.query(\"notebookrunnableeditorwrapper\"), function(item) {\n\t\t\tcontainers.push(item);\n    \t\tif (upToCmp && upToCmp===item) {return false;}\n    \t}, this);\n    \tthis._run(containers);\n    },\n    \n    runFrom: function(fromCmp) {\n    \tvar containers = [], matched = false;\n    \tExt.Array.each(this.query(\"notebookrunnableeditorwrapper\"), function(item) {\n    \t\tif (fromCmp && fromCmp===item) {matched=true;}\n    \t\tif (matched) {\n    \t\t\tcontainers.push(item);\n    \t\t}\n    \t}, this);\n    \tthis._run(containers);\n    },\n    \n    runAll: function() {\n    \tvar containers = [];\n    \tExt.Array.each(this.query(\"notebookrunnableeditorwrapper\"), function(item) {\n\t\t\tcontainers.push(item);\n    \t}, this);\n    \tthis._run(containers);\n    },\n    \n    _run: function(containers, prevVars) {\n    \tif (containers.length>0) {\n    \t\tvar container = containers.shift();\n\t\t\tvar me = this;\n    \t\tcontainer.run(prevVars).then(function(result) {\n\t\t\t\t// check for and remove older duplicates\n\t\t\t\tvar newVars = container.getVariables();\n\t\t\t\tif (prevVars === undefined) {\n\t\t\t\t\tprevVars = [];\n\t\t\t\t}\n\t\t\t\tnewVars.forEach(function(newVar) {\n\t\t\t\t\tfor (var i = 0; i < prevVars.length; i++) {\n\t\t\t\t\t\tvar prevVar = prevVars[i];\n\t\t\t\t\t\tif (newVar.name === prevVar.name) {\n\t\t\t\t\t\t\t// console.log('removing duplicate var:', prevVar.name);\n\t\t\t\t\t\t\tprevVars.splice(i, 1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tprevVars = prevVars.concat(newVars);\n\t\t\t\t\n\t\t\t\tExt.defer(me._run, 100, me, [containers, prevVars]);\n\t\t\t}, function(error) {\n\t\t\t\t// console.log('nb error', error);\n\t\t\t});\n    \t} else {\n\t\t\t // the notebook has finished running\n\t\t\tthis.updateTernServerVariables(this.getNotebookVariables());\n\t\t\tthis.fireEvent('notebookRun', this);\n\t\t}\n\t},\n\n\tnotebookInitialized: function() {\n\t\t// run all data cells\n\t\t// var containers = [];\n    \t// Ext.Array.each(this.query(\"notebookdatawrapper\"), function(item) {\n\t\t// \tcontainers.push(item);\n    \t// }, this);\n    \t// this._run(containers, []);\n\t},\n\n\tupdateTernServerVariables: function(varsToAdd, varsToRemove) {\n\t\tif (Voyant.notebook.editor.CodeEditor.ternServer) {\n\t\t\tif (varsToRemove) {\n\t\t\t\tvarsToRemove.forEach(function(theVar) {\n\t\t\t\t\tVoyant.notebook.editor.CodeEditor.ternServer.server.delFile(theVar.name);\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (varsToAdd === undefined) {\n\t\t\t\tconsole.warn('updateTernServerVariables: no varsToAdd!');\n\t\t\t} else {\n\t\t\t\tvarsToAdd.forEach(function(theVar) {\n\t\t\t\t\tif (theVar.isSpyralClass) {\n\t\t\t\t\t\t// many Spyral classes are created via helper methods, e.g. loadCorpus\n\t\t\t\t\t\t// therefore add text that initializes the variable using the class constructor\n\t\t\t\t\t\t// ensuring that the tern server is aware of the variable name and type\n\t\t\t\t\t\tvar ternText = 'var '+theVar.name+' = new '+theVar.isSpyralClass+'()';\n\t\t\t\t\t\tVoyant.notebook.editor.CodeEditor.ternServer.server.addFile(theVar.name, ternText);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSpyral.Util.blobToString(theVar.value).then(function(blobStr) {\n\t\t\t\t\t\t\tvar ternText = 'var '+theVar.name+' = '+blobStr;\n\t\t\t\t\t\t\tVoyant.notebook.editor.CodeEditor.ternServer.server.addFile(theVar.name, ternText);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\tgetNotebookVariables: function(upToCmp) {\n\t\tvar variables = [];\n\n\t\tExt.Array.each(this.query(\"notebookrunnableeditorwrapper\"), function(item) {\n\t\t\tif (upToCmp && upToCmp===item) {return false;} // NB upToCmp exits earlier here than in runUntil\n\n\t\t\tif (item.getIsRun()) {\n\t\t\t\tvar newVars = item.getVariables();\n\t\t\t\tnewVars.forEach(function(newVar) {\n\t\t\t\t\tfor (var i = 0; i < variables.length; i++) {\n\t\t\t\t\t\tvar prevVar = variables[i];\n\t\t\t\t\t\tif (newVar.name === prevVar.name) {\n\t\t\t\t\t\t\tvariables.splice(i, 1); // remove older duplicate var\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvariables = variables.concat(newVars);\n\t\t\t}\n\t\t});\n\n\t\treturn variables;\n\t},\n\n\tgetNotebookBlocks: function(upToCmp) {\n\t\tvar blocks = [];\n\n\t\tExt.Array.each(this.query(\"notebookrunnableeditorwrapper\"), function(item) {\n\t\t\tif (upToCmp && upToCmp===item) {return false;} // NB upToCmp exits earlier here than in runUntil\n\n\t\t\tblocks.push(item.getInput());\n\t\t});\n\n\t\treturn blocks;\n\t},\n\n\n\t\n\taddNew: function() {\n\t\t// TODO metadata defaults\n\t\tthis.setMetadata(new Spyral.Metadata({\n\t\t\ttitle: \"Spyral Notebook\",\n\t\t\tlanguage: \"English\"\n\t\t}));\n\t\tthis.addText(this.localize('newNotebookIntro'));\n\t\tthis.addCode('');\n\t},\n    \n\taddText: function(block, index, cellId) {\n\t\treturn this._add(block, index, 'notebooktexteditorwrapper', cellId);\n\t},\n \n\taddCode: function(block, index, cellId, config) {\n\t\tconfig = config || {};\n\t\tconfig.docs = [this.ecmaTernDocs, this.browserTernDocs, this.spyralTernDocs];\n\t\treturn this._add(block, index, 'notebookcodeeditorwrapper', cellId, config);\n\t},\n\n\taddData: function(block, index, cellId, config) {\n\t\treturn this._add(block, index, 'notebookdatawrapper', cellId, config);\n\t},\n\t\t\n\t_add: function(block, index, xtype, cellId, config) {\n\t\tif (Ext.isString(block)) {\n\t\t\tblock = {input: block}\n\t\t}\n\t\tvar cells = this.getComponent('notebookContainer').getComponent(\"cells\");\n\t\tindex = (typeof index === 'undefined') ? cells.items.length : index;\n\t\tcellId = (typeof cellId === 'undefined') ? Spyral.Util.id() : cellId;\n\t\treturn cells.insert(index, Ext.apply(block, {\n\t\t\txtype: xtype,\n\t\t\tindex: index,\n\t\t\tcellId: cellId\n\t\t}, config))\n\t},\n\n    \n\tnotebookWrapperMoveUp: function(wrapper) {\n\t\tvar cells = this.getComponent('notebookContainer').getComponent(\"cells\");\n\t\tvar i = cells.items.findIndex('id', wrapper.id);\n\t\tif (i==0) {\n\t\t\tExt.Msg.show({\n\t\t\t\ttitle: this.localize('error'),\n\t\t\t\tmsg: this.localize('cannotMoveHigher'),\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.WARNING\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tcells.move(i, i-1);\n\t\t\tthis.redoOrder();\n\t\t}\n\t},\n\t\n\tnotebookWrapperMoveDown: function(wrapper) {\n\t\tvar cells = this.getComponent('notebookContainer').getComponent(\"cells\");\n\t\tvar i = cells.items.findIndex('id', wrapper.id);\n\t\tif (i==cells.items.getCount()-1) {\n\t\t\tExt.Msg.show({\n\t\t\t\ttitle: this.localize('error'),\n\t\t\t\tmsg: this.localize('cannotMoveLower'),\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.WARNING\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tcells.move(i, i+1);\n\t\t\tthis.redoOrder();\n\t\t}\n\t},\n\t\n\tnotebookWrapperRemove: function(wrapper) {\n\t\tvar cells = this.getComponent('notebookContainer').getComponent(\"cells\");\n\t\tcells.remove(wrapper);\n\t\tif (cells.items.length==0) {\n\t\t\tthis.addText(\"(Click to edit).\")\n\t\t}\n\t\tthis.redoOrder();\n\t},\n\t\n\tnotebookWrapperAdd: function(wrapper, e) {\n\t\tvar cells = this.getComponent('notebookContainer').getComponent(\"cells\");\n\t\tvar i = cells.items.findIndex('id', wrapper.id);\n\t\tvar runnable = wrapper.getXTypes(wrapper).indexOf('notebookrunnableeditorwrapper') !== -1;\n\t\tvar cmp;\n\t\tif ((!runnable && !e.hasModifier()) || (runnable && e.hasModifier())) {\n\t\t\tcmp = this.addCode('',i+1);\n\t\t} else {\n\t\t\tcmp = this.addText('',i+1);\n\t\t}\n\t\tcmp.getTargetEl().scrollIntoView(this.getTargetEl(), null, true, true);\n\t\tthis.redoOrder();\n\t},\n\n\tredoOrder: function() {\n\t\tthis.query(\"notebookeditorwrapper\").forEach(function(cmp, i) {\n\t\t\tcmp.setIndex(i);\n\t\t})\n\t\tthis.setIsEdited(true);\n\t},\n    \n    applyIsEdited: function(val) {\n    \t// TODO: perhaps setup autosave\n    \tif (this.rendered) {\n        \t// this.getHeader().down(\"#saveItTool\").setDisabled(val === false);\n        \tif (!val) {\n        \t\tthis.query(\"notebookcodeeditor\").forEach(function(editor) {\n        \t\t\teditor.setIsChangeRegistered(false);\n        \t\t})\n        \t\tthis.query(\"notebooktexteditor\").forEach(function(editor) {\n        \t\t\teditor.setIsEditRegistered(false);\n        \t\t})\n        \t}\n    \t}\n\t\treturn val;\n    },\n    \n\tapplyNotebookId: function (id) {\n\t\tif (this.isConfiguring === false) { // don't (re)set url during initial config as this will clear the url's notebook id\n\t\t\tlet url = this.getBaseUrl()+\"spyral/\";\n\t\t\tif (id) {\n\t\t\t\tif (id.indexOf(this.NOTEBOOK_ID_SEPARATOR) === -1) {\n\t\t\t\t\t// old ID system\n\t\t\t\t\tthis.setNotebookName(id);\n\t\t\t\t} else {\n\t\t\t\t\tconst notebookName = id.split(this.NOTEBOOK_ID_SEPARATOR)[1];\n\t\t\t\t\tthis.setNotebookName(notebookName);\n\t\t\t\t}\n\t\t\t\turl += id.replace(this.NOTEBOOK_ID_SEPARATOR, '/')+\"/\";\n\t\t\t} else {\n\t\t\t\tthis.setNotebookName(undefined);\n\t\t\t}\n\t\t\twindow.history.pushState({\n\t\t\t\turl: url\n\t\t\t}, '', url);\n\t\t}\n\n\t\treturn id;\n    },\n\n\tapplyMetadata: function(metadata) {\n\t\tif (metadata !== undefined) {\n\t\t\t// remove tags from old notebooks\n\t\t\tmetadata.title = metadata.title.replace(/<\\/?\\w+.*?>/g, '');\n\t\t\tmetadata.description = metadata.description.replace(/<\\/?\\w+.*?>/g, '');\n\t\t\t\n\t\t\t// set user info if logged in\n\t\t\tif (this.isAuthenticated() && metadata.userId === '' && metadata.author === '') {\n\t\t\t\tmetadata.userId = this.accountInfo.id;\n\t\t\t\tmetadata.author = this.accountInfo.name;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn metadata;\n\t},\n\t\t\n\tupdateMetadata: function() {\n\t\tvar metadata = this.getMetadata();\n\t\tdocument.title = metadata.title+' - Spyral';\n\n\t\tthis.getComponent('notebookContainer').getComponent(\"spyralHeader\").update(this.getInnerHeaderHtml());\n\t\tthis.getComponent('notebookContainer').getComponent(\"spyralFooter\").update(this.getInnerFooterHtml());\n\n\t\tif (this.metadataEditor) {\n\t\t\tthis.metadataEditor.loadMetadata(metadata);\n\t\t}\n\n\t\tthis.setIsEdited(true);\n\t},\n\n\tshowMetadataEditor: function() {\n\t\tif (this.metadataWindow === undefined) {\n\t\t\tvar me = this;\n\t\t\t\n\t\t\tthis.metadataEditor = Ext.create('widget.metadataeditor', {\n\t\t\t\tanchor: '100%'\n\t\t\t});\n\t\t\tthis.metadataWindow = Ext.create('Ext.window.Window', {\n\t\t\t\ttitle: this.localize('metadataEditor'),\n\t\t\t\tautoScroll: true,\n\t\t\t\twidth: 600,\n\t\t\t\tcloseAction: 'hide',\n\t\t\t\tlayout: 'anchor',\n\t\t\t\titems: this.metadataEditor,\n\t\t\t\tbuttons: [{\n\t\t\t\t\ttext: this.localize('metadataCancel'),\n\t\t\t\t\tui: 'default-toolbar',\n\t\t\t\t\thandler: function() {\n\t\t\t\t\t\tthis.up('window').close();\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\ttext: this.localize('metadataReset'),\n\t\t\t\t\tui: 'default-toolbar',\n\t\t\t\t\thandler: function() {\n\t\t\t\t\t\tme.metadataEditor.reset();\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\ttext: this.localize('metadataSave'),\n\t\t\t\t\thandler: function() {\n\t\t\t\t\t\tvar form = me.metadataEditor.getForm();\n\t\t\t\t\t\tvar values = form.getValues();\n\t\t\t\t\t\tvalues.catalogue = values.catalogue === 'true'; // convert to boolean\n\t\t\t\t\t\tme.getMetadata().set(values);\n\t\t\t\t\t\tme.updateMetadata();\n\t\t\t\t\t\tthis.up('window').close();\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\n\t\tvar metadata = this.getMetadata();\n\t\tif (metadata === undefined) {\n\t\t\tmetadata = new Spyral.Metadata();\n\t\t\tthis.setMetadata(metadata);\n\t\t}\n\n\t\tthis.metadataEditor.loadMetadata(metadata);\n\n\t\tthis.metadataWindow.show();\n\t},\n\n\tshowDocs: function() {\n\t\tthis.docsPanel.showDocs();\n\t},\n\n\thandleDocLink: function(link) {\n\t\tthis.docsPanel.handleDocLink(link);\n\t}\n});","Ext.define('Voyant.VoyantApp', {\n\t\n    extend: 'Ext.app.Application',\n\tmixins: ['Voyant.util.Localization','Voyant.util.Api','Voyant.util.Colors'],\n\trequires: ['Voyant.util.ResponseError'],\n    \n    name: 'VoyantApp',\n    \n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n\t\t\tpalette: 'default',\n\t\t\tcategories: 'auto',\n    \t\tlang: undefined,\n    \t\tdebug: undefined\n    \t}\n    },\n    \n    config: {\n    \tbaseUrl: undefined,\n\t\ttromboneUrl: undefined,\n\t\tcategoriesManager: undefined\n    },\n    \n    constructor: function(config) {\n    \tthis.setBaseUrl(this.config.baseUrl);\n    \t\n    \t// set the Trombone URL from the baseURL // TODO: maybe allow this to be overridden\n\t\tthis.setTromboneUrl(this.config.baseUrl+'trombone');\n\t\t\n    \t// set the application for the Corpus so that we can use a simple constructor\n\t\tVoyant.application = this;\n\t\t\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n\n\t\tthis.mixins['Voyant.util.Colors'].constructor.apply(this, arguments);\n\n\t\tthis.setCategoriesManager(new Spyral.Categories());\n\t\t\n\t\tthis.getCategoriesManager().addFeature('color', '#BF1B2C'); // default color is Voyant red\n\t\tthis.getCategoriesManager().addFeature('font', '\"Palatino Linotype\", \"Book Antiqua\", Palatino, serif');\n\t\t\n\t\t// override Voyant.util.Colors methods to add palette api param\n\t\tvar _getColor = this.getColor;\n\t\tthis.getColor = function(index, returnHex) {\n\t\t\treturn _getColor.apply(this, [this.getApiParam('palette'), index, returnHex]);\n\t\t}\n\t\tvar _getColorForTerm = this.getColorForTerm;\n\t\tthis.getColorForTerm = function(term, returnHex) {\n\t\t\tif (term.indexOf('@') === 0) {\n\t\t\t\tvar catColor = this.getCategoriesManager().getCategoryFeature(term.substring(1), 'color');\n\t\t\t\tif (catColor === undefined) {\n\t\t\t\t\t// no category color so just use the default term behaviour\n\t\t\t\t\treturn _getColorForTerm.apply(this, [this.getApiParam('palette'), term, returnHex]);\n\t\t\t\t}\n\t\t\t\tif (returnHex) {\n\t\t\t\t\treturn catColor;\n\t\t\t\t} else {\n\t\t\t\t\treturn this.hexToRgb(catColor);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn _getColorForTerm.apply(this, [this.getApiParam('palette'), term, returnHex]);\n\t\t\t}\n\t\t}\n\n\t\t// call the parent constructor\n\t\tthis.callParent(arguments);\n    },\n    getBaseUrl: function() {\n    \tvar baseUrl = this.callParent();\n    \treturn baseUrl.indexOf(\"//\")==0 ? location.protocol+baseUrl : baseUrl;\n    },\n    \n    getBaseUrlFull: function() {\n    \treturn window.location.origin+this.getBaseUrl(); // maybe doesn't work in all browsers?\n    },\n\n    getRelativeUrl: function() {\n    \tvar url = window.location.pathname.substring(this.getBaseUrl().length);\n    \tvar relative = \"\";\n    \tfor (var i=0, len=url.split(\"/\").length-1; i<len; i++) {\n    \t\trelative+=\"../\"\n    \t}\n    \treturn relative;\n    },\n    \n    getTools: function() {\n    \treturn [{type: 'maximize'},{type: 'help'}]\n    },\n    \n    launch: function() {\n    \tExt.tip.QuickTipManager.init();\n    \tExt.apply(Ext.tip.QuickTipManager.getQuickTip(), {\n    \t    showDelay: 50 // shorten the delay before showing\n    \t});\n    \t\n\t\tif (this.getApiParam(\"categories\")) {\n\t\t\tthis.loadCategoryData(this.getApiParam(\"categories\"));\n\t\t}\n\n\t\tthis.callParent(arguments);\n    },\n    \n    tromboneCall: function(config) {\n    \tvar config = config ? config : {};\n    \tExt.applyIf(config, {\n    \t\turl: this.getTromboneUrl()\n    \t});\n    \tif (!config.success && !config.failure && !config.callback) {\n        \tExt.applyIf(config, {\n        \t\turl: this.getTromboneUrl(),\n        \t    scope: this,\n        \t    callback: function(response, success, options) {\n        \t    \tthis.dispatchEvent(config.tool+\"Loaded\", response, success, options)\n        \t    }\n        \t});\n    \t};\n    \tExt.Ajax.request(config);\n    },\n    \n    getViewport: function() {\n    \treturn Ext.ComponentQuery.query('viewport')[0];\n    },\n\n    dispatchEvent: function(eventName, src) {\n    \tvar viewport = this.getViewport();\n\t\tvar panels = viewport.query(\"panel,chart\");\n\t\tvar isHeard = false;\n\n\t\t// tell the app\n\t\tif (this.hasListener && this.hasListener(eventName)) {\n\t\t\tthis.fireEvent.apply(this, arguments);\n\t\t\tisHeard = true\n\t\t}\n\t\t\n\t\t// tell the panels, except the current one\n\t\tfor (var i=0; i<panels.length; i++) {\n\t\t\tif (panels[i].hasListener && panels[i].hasListener(eventName)) {\n\t\t\t\tif (src && src.getId && panels[i].getId && src.getId()==panels[i].getId()) {\n\t\t\t\t\tcontinue; // don't send to self\n\t\t\t\t}\n\t\t\t\tisHeard = true;\n\t\t\t\tpanels[i].fireEvent.apply(panels[i], arguments);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (!isHeard) {\n\t\t\t// let the application know that we have an unhandledEvent\n\t\t\tvar args = [\"unhandledEvent\", src, eventName];\n\t\t\tfor (var i=2; i<arguments.length; i++) {args.push(arguments[i])}\n\t\t\tthis.fireEvent.apply(this, args);\n\t\t}\n    },\n    \n\tshowResponseError: function(config, response) {\n\t\tthis.showError(Ext.create(\"Voyant.util.ResponseError\", {msg: (Ext.isString(config) ? config : config.msg), response: response}))\n\t},\n\t\n\tshowError: function(config, response) {\n\t\tif (config instanceof Voyant.util.ResponseError) {\n\t\t\tconfig = {\n\t\t\t\tmessage: config.getMsg()+\"<p class='error'>\\n\"+config.getError()+\" \u2026 \"+\n\t\t\t\t\t\"<a href='#' onclick=\\\"window.open('').document.write(unescape('<pre>\"+escape(config.getDetails())+\"</pre>')); return false;\\\">more</a></p>\"\n\t\t\t}\n\t\t} else if (config instanceof Ext.data.operation.Operation) {\n\t\t\treturn this.showError(Ext.create(\"Voyant.util.ResponseError\", config.getError()))\n\t\t} else {\n\t\t\tif (Ext.isString(config)) {\n\t\t\t\tconfig = {message: config}\n\t\t\t} else if (Ext.isObject(config)) {\n\t\t\t\tif (config.responseText) {\n\t\t\t\t\t// rebundle as error (without nice message)\n\t\t\t\t\treturn this.showResponseError(config.statusText, config);\n\t\t\t\t} else if (config.statusText) {\n\t\t\t\t\treturn this.showResponseError(config.statusText, config)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// maybe handle other forms\n\t\t}\n\t\t\n\n\t\tExt.applyIf(config, {\n\t\t\ttitle: this.localize(\"error\"),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.MessageBox.ERROR,\n\t\t    autoScroll: true\n\t\t})\n\t\tExt.Msg.show(config);\n\t},\n\t\n\tgetToolConfigFromToolXtype: function(xtype) {\n\t\tcls = Ext.ClassManager.getByAlias(\"widget.\"+xtype);\t\t\n\t\treturn {\n\t\t\txtype: xtype,\n\t\t\ttitle: this._localizeClass(cls, \"title\"),\n\t\t\ttooltip: { // this needs to be an object for compatibility (other configs can be changed)\n\t\t\t\ttext: this._localizeClass(cls, \"helpTip\")\n\t\t\t},\n\t\t\tglyph: cls && cls.glyph ? cls.glyph : 'xf12e@FontAwesome'\n\t\t};\n\t},\n\n\t/**\n\t * Opens a URL in a new window (handling the case when popup windows aren't allowed).\n\t * @param {String} url The URL to open.\n\t * @private\n\t */\n\topenUrl: function(url) {\n\t\tvar win = window.open(url);\n\t\tif (!win) { // popup blocked\n\t\t\tExt.Msg.show({\n\t\t\t\ttitle: \"Popup Blocked\",\n\t\t\t\tbuttonText: {ok: \"Close\"},\n\t\t\t\ticon: Ext.MessageBox.INFO,\n\t\t\t\tmessage: \"A popup window was blocked. <a href='\"+url+\"' target='_blank' class='link'>Click here</a> to open the new window.\",\n\t\t\t\tbuttons: Ext.Msg.OK\n\t\t\t});\n\t\t}\n\t},\n\t\n\tloadCategoryData: function(id) {\n\t\treturn this.getCategoriesManager().load(id, {\n\t\t\ttrombone: Voyant.application.getTromboneUrl()\n\t\t}).then(function() {\n\t\t\tfor (var category in this.getCategoriesManager().getCategories()) {\n\t\t\t\tvar color = this.getCategoriesManager().getCategoryFeature(category, 'color');\n\t\t\t\tif (color !== undefined) {\n\t\t\t\t\tvar rgb = this.hexToRgb(color);\n\t\t\t\t\tvar terms = this.getCategoriesManager().getCategoryTerms(category);\n\t\t\t\t\tfor (var i = 0; i < terms.length; i++) {\n\t\t\t\t\t\tthis.setColorForTerm(terms[i], rgb);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(this));\n\t},\n\n\tsaveCategoryData: function(data) {\n\t\treturn this.getCategoriesManager().save({}, {\n\t\t\ttrombone: Voyant.application.getTromboneUrl()\n\t\t});\n\t}\n});","Ext.define('Voyant.VoyantCorpusApp', {\n\t\n    extend: 'Voyant.VoyantApp',\n    \n    name: 'VoyantCorpusApp',\n\n    requires: ['Voyant.panel.CorpusSet','Voyant.data.model.Corpus','Voyant.panel.VoyantHeader', 'Voyant.panel.VoyantFooter', 'Voyant.panel.CorpusCreator', 'Voyant.panel.Cirrus', 'Voyant.panel.Summary', 'Voyant.panel.DreamScape', 'Voyant.panel.CorpusTerms', 'Voyant.panel.Reader', 'Voyant.panel.Documents', 'Voyant.panel.Trends', 'Voyant.panel.Contexts', 'Voyant.panel.DocumentTerms','Voyant.panel.CorpusCollocates','Voyant.panel.Links','Voyant.panel.Phrases','Voyant.panel.ScatterPlot','Voyant.panel.TopicContexts','Voyant.panel.TermsRadio','Voyant.panel.TermsBerry', 'Voyant.panel.Embedder'],\n    \n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\ttoolFlow: undefined // TODO what is this supposed to do?\n    \t}\n    },\n    \n\tconstructor: function() {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n\n\t\tthis.callParent(arguments);\n\t},\n\n\tinit: function() {\n\t\tif (this.getEntitiesEnabled() === true) {\n\t\t\tvar moreVizTools = this.getMoreTools()[2];\n\t\t\tmoreVizTools.items.push('rezoviz');\n\t\t}\n\t},\n\t\n    config: {\n    \tcorpus: undefined,\n    \tcorpusAccess: undefined,\n\t\tallowInput: true,\n\t\tallowDownload: true,\n\t\tentitiesEnabled: false,\n    \tmoreTools: [{\n\t\t\ti18n: 'moreToolsScaleCorpus',\n\t\t\tglyph: 'xf065@FontAwesome',\n\t\t\titems: ['cirrus','corpusterms','bubblelines','correlations','corpuscollocates','dreamscape','loom','mandala','microsearch','streamgraph','phrases','documents','summary','trends','scatterplot','termsradio','topics','veliza','wordtree']\n    \t},{\n\t\t\ti18n: 'moreToolsScaleDocument',\n\t\t\tglyph: 'xf066@FontAwesome',\n\t\t\titems: ['bubbles','cirrus','contexts','documentterms','reader','textualarc','trends','knots','topics']\n    \t},{\n\t\t\ti18n: 'moreToolsTypeViz',\n\t\t\tglyph: 'xf06e@FontAwesome',\n\t\t\titems: ['cirrus','bubblelines','bubbles','constellations','links','dreamscape','loom','knots','mandala','microsearch','streamgraph','scatterplot','textualarc','trends','termsberry','termsradio','wordtree']\n\t\t},{\n\t\t\ti18n: 'moreToolsTypeGrid',\n\t\t\tglyph: 'xf0ce@FontAwesome',\n\t\t\titems: ['corpusterms','corpuscollocates','correlations','phrases','contexts','documentterms','documents','topics']\n\t\t},{\n\t\t\t\n\t\t\ti18n: 'moreToolsTypeOther',\n\t\t\tglyph: 'xf035@FontAwesome',\n\t\t\titems: ['reader','summary','veliza','embedder']\n    \t}]\n    },\n    \n    launch: function(config) {\n\t\tthis.callParent(arguments);\n\t\t\n    \tif (this.hasQueryToLoad()) {\n        \tvar queryParams = Ext.Object.fromQueryString(document.location.search);\n        \tif (!queryParams.corpus && this.getCorpusId && this.getCorpusId()) {\n        \t\tqueryParams.corpus = this.getCorpusId();\n        \t}\n        \tif (config && config.useCache) { // for large corpora\n        \t\tqueryParams.useCache = config.useCache;\n        \t}\n        \tthis.loadCorpusFromParams(queryParams);\n        \t\n        \tif (queryParams.palette) {\n        \t\tif (queryParams.palette.indexOf(\",\") > -1) { // treat as inline\n        \t    \tvar palette = Ext.decode(queryParams.palette);\n        \t    \tthis.addColorPalette(queryParams.palette, palette);\n        \t\t} else {\n\t\t\t\t\tif (this.getPalettes()[queryParams.palette] === undefined) {\n\t\t\t\t\t\tthis.loadCustomColorPalette(queryParams.palette);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n    \t} else {\n    \t\tvar viewport = this.getViewport();\n    \t\tif (viewport) {\n    \t\t\tvar corpuscreator = viewport.down(\"corpuscreator\")\n    \t\t\tif (corpuscreator) {\n    \t\t\t\tvar toast = corpuscreator.toastInfo({\n    \t\t\t\t\thtml: this.localize('didYouKnowText'),\n    \t\t\t\t\ttitle: this.localize('didYouKnow'),\n    \t\t\t\t\tanchor: corpuscreator.down(\"textareafield\"),\n    \t\t\t\t\talign: 'tr',\n    \t\t\t\t\tlisteners: {\n    \t\t\t\t\t\tbeforeclose: {\n    \t\t\t\t\t\t\tfn: function() {\n    \t\t\t\t\t\t\t\tthis.getHeader().getTools().forEach(function(tool) {\n    \t\t\t\t\t\t\t\t\tif (tool.type==\"gear\" || tool.type=='help') {\n    \t\t\t\t\t\t\t\t\t\ttool.getEl().frame(\"#ff0000\", 1, { duration: 3000 })\n    \t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t});\n    \t\t\t\t\t\t\t},\n    \t\t\t\t\t\t\tscope: corpuscreator\n    \t\t\t\t\t\t}\n    \t\t\t\t\t}\n    \t\t\t\t});\n    \t\t\t}\n    \t\t}\n    \t}\n    },\n    \n    loadCorpusFromParams: function(params) {\n\t\tvar me = this;\n\n\t\tvar view = me.getViewport()\n\t\tview.mask(this.localize(\"fetchingCorpus\"));\n\t\tif (params.archive) { // fix a few URLs we know about\n\t\t\tif (Ext.isString(params.archive)) {params.archive=[params.archive]}\n\t\t\tparams.archive = params.archive.map(function(archive) {\n\t\t\t\treturn archive.replace('/blogs.sub.uni-hamburg.de/hup/lhn/', '/wikis.sub.uni-hamburg.de/lhn/index.php/')\n\t\t\t\t\t.replace('/hup.sub.uni-hamburg.de/', '/wikis.sub.uni-hamburg.de/')\n\t\t\t})\n\t\t}\n\t\t\n\t\tthis.validateCorpusLoadParams(params);\n\n\t\tnew Voyant.data.model.Corpus(params).then(function(corpus) {\n\t\t\tview.unmask();\n\t\t\tme.setCorpus(corpus);\n\t\t\tif (me.validateCorpusAccess()) {\n\t\t\t\tme.dispatchEvent('loadedCorpus', this, corpus);\n\t\t\t}\n\t\t}).otherwise(function() {\n\t\t\tview.unmask();\n\t\t})\n    },\n    \n    validateCorpusLoadParams: function(params) {\n    \t// leave untouched by default, this can be overridden\n    },\n    \n    validateCorpusAccess: function() {\n\t\tvar me = this, view = me.getViewport(), corpus = this.getCorpus();\n\t\tif (corpus && corpus.requiresPassword() && !me.getViewport().query(\"panel\").every(function(panel) {\n\t\t\treturn !panel.isConsumptive\n\t\t})) {\n\t\t\tvar noPasswordAccess = corpus.getNoPasswordAccess();\n\t\t\tvar passWin = Ext.create('Ext.window.Window', {\n\t            title: me.localize('passwordRequiredTitle'),\n\t\t\t    layout: 'fit',\n\t\t\t    items: {\n\t\t\t    \tpadding: 10,\n\t                flex: 1,\n\t                width: 300,\n\t                layout: {\n\t                    type: 'vbox',\n\t                    align: 'stretch'\n\t                },\n\t                items: [\n\t                    {\n\t                        html: '<p>'+me.localize('passwordRequiredMessage')+'</p>' + (noPasswordAccess=='NONCONSUMPTIVE' ? '<p>'+me.localize('nonConsumptiveMessage')+\"</p>\" : \"\")+'</p>'\n\t                    }, {\n\t                    \txtype: 'textfield',\n\t                    \tfieldLabel: me.localize('password')\n\t                    }\n\t                ],\n\t                bbar: {\n\t//                \tui: 'footer',\n\t                \tlayout: {pack: 'center'},\n\t                \titems: [{\n\t                    \ttext: me.localize('passwordValidateButton'),\n\t                    \tui: 'default',\n\t                    \thandler: function() {\n\t                    \t\tvar password = passWin.query(\"textfield\")[0].getValue().trim();\n\t                    \t\tif (password.length==0) {\n\t                    \t\t\tme.showError({\n\t                    \t\t\t\tmessage: me.localize('noPasswordGiven')\n\t                    \t\t\t})\n\t                    \t\t\treturn;\n\t                    \t\t}\n\t                    \t\tpassWin.mask();\n\t                    \t\tExt.Ajax.request({\n\t                    \t\t\t  url: me.getTromboneUrl(),\n\t                    \t\t\t  params: {\n\t                    \t\t\t\t  corpus: corpus.getId(),\n\t                    \t\t\t\t  passwordForSession: password\n\t                    \t\t\t  },\n\t                    \t\t\t  method: 'POST',\n\t                    \t\t\t  success: function(result, request) {\n\t                    \t\t\t\t  passWin.unmask();\n\t                    \t\t\t\t  var access = result.responseText;\n\t                    \t\t\t\t  if (access==\"ADMIN\" || access==\"ACCESS\") {\n\t\t\t                    \t\t\t    passWin.close();\n\t\t\t                    \t\t\t    view.unmask();\n\t\t\t                    \t\t\t    me.setCorpusAccess(access);\n\t\t\t\t\t            \t\t\t\tme.dispatchEvent('loadedCorpus', this, corpus);\n\t                    \t\t\t\t  }\n\t                    \t\t\t\t  else {\n\t  \t\t                    \t\t\tme.showError({\n\t\t\t                    \t\t\t\tmessage: me.localize('badPassword')\n\t\t\t                    \t\t\t})\n\t                    \t\t\t\t  }\n\t                    \t\t\t  },\n\t                    \t\t\t  failure: function(result, request) {\n\t                    \t\t\t\t  passWin.unmask();\n\t  \t\t                    \t\t\tme.showError({\n\t\t\t                    \t\t\t\tmessage: me.localize('passwordValidationError')\n\t\t\t                    \t\t\t})\n\t                    \t\t\t  } \n\t                    \t\t});\n\t                    \t}\n\t                    },{\n\t                    \ttext: me.localize('nonConsumptiveButton'),\n\t                    \thidden: corpus.getNoPasswordAccess()=='NONE',\n\t                    \thandler: function() {\n\t                    \t\tpassWin.mask();\n\t                    \t\tExt.Ajax.request({\n\t                    \t\t\t  url: me.getTromboneUrl(),\n\t                    \t\t\t  params: {\n\t                    \t\t\t\t  corpus: corpus.getId(),\n\t                    \t\t\t\t  passwordForSessionRemove: true\n\t                    \t\t\t  },\n\t                    \t\t\t  method: 'POST',\n\t                    \t\t\t  callback: function(result, request) { // do this even if request fails\n\t                    \t\t\t\t  passWin.unmask();\n\t                    \t\t\t\t  passWin.close();\n\t                    \t\t\t\t  view.unmask();\n\t\t\t\t\t\t\t\t\t\t  me.setCorpusAccess('LIMITED');\n\t                    \t\t\t\t  me.dispatchEvent('loadedCorpus', me, corpus);\n\t                    \t\t\t  }\n\t                    \t\t});\n\t                    \t}\n\t                    }]\n\t                }\n\t            }\n\t\t\t}).show();\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true\n\t\t}\n    },\n    \n    hasQueryToLoad: function(params) {\n    \tif (!params) {\n    \t\tparams = Ext.Object.fromQueryString(document.location.search);\n    \t}\n    \treturn params.corpus || params.input || (this.getCorpusId && this.getCorpusId()); // TODO: should this include \"archive\" from V1?\n    },\n    \n    listeners: {\n    \tloadedCorpus: function(src, corpus) {\n    \t\tthis.setCorpus(corpus);\n    \t\t\n    \t\tthis.on(\"unhandledEvent\", function(src, eventName, data) {\n\t\t\t\tvar url = this.getBaseUrl() + '?corpus='+corpus.getAliasOrId();\n\t\t\t\tvar api = this.getModifiedApiParams() || {}; // use application, not tool\n\t\t\t\tdelete api.view; // make sure we show default view\n\t\t\t\tif (eventName=='termsClicked') {\n\t\t\t\t\t// data can be a simple array of terms or an array of term objects\n\t\t\t\t\tif (Ext.isArray(data) && data.length > 0 && typeof data[0] !== 'string' && 'term' in data[0] && 'docIndex' in data[0]) {\n\t\t\t\t\t\tlet termsObj = {};\n\t\t\t\t\t\tlet docIndObj = {};\n\t\t\t\t\t\tdata.forEach(function(datum) {\n\t\t\t\t\t\t\ttermsObj[datum.term]=true;\n\t\t\t\t\t\t\tdocIndObj[datum.docIndex]=true;\n\t\t\t\t\t\t})\n\t\t\t\t\t\tapi.query=Object.keys(termsObj);\n\t\t\t\t\t\tapi.docIndex=Object.keys(docIndObj);\n\t\t\t\t\t} else {\t\t\t\t\t\t\n\t\t\t\t\t\tapi.query=data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (eventName=='documentsClicked') {\n\t\t\t\t\tvar docIndex = [];\n\t\t\t\t\tif (data.forEach) {\n\t\t\t\t\t\tdata.forEach(function(doc) {\n\t\t\t\t\t\t\tdocIndex.push(doc.getIndex())\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tapi.docIndex=docIndex\n\t\t\t\t}\n\t\t\t\telse if (eventName=='corpusTermsClicked') {\n\t\t\t\t\tif (data.map) {\n\t\t\t\t\t\tapi.query = data.map(function(corpusTerm) {return corpusTerm.getTerm()});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (eventName=='documentTermsClicked') {\n\t\t\t\t\tif (data.map) {\n\t\t\t\t\t\tapi.query = data.map(function(documentTerm) {return documentTerm.getTerm()});\n\t\t\t\t\t\tapi.docIndex = data.map(function(documentTerm) {return documentTerm.getDocIndex()});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (console) {console.warn(\"Unhandled event: \"+eventName, data)}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (api.toolFlow) {\n\t\t\t\t\tvar toolFlow = Ext.Array.from(api.toolFlow.split(\",\"));\n\t\t\t\t\tapi.view = toolFlow.shift();\n\t\t\t\t\tif (toolFlow.length>0) {\n\t\t\t\t\t\tapi.toolFlow = toolFlow.join(\",\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete api.toolFlow\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\turl += \"&\"+Ext.Object.toQueryString(api)\n\t\t\t\tthis.openUrl(url)\n\t\t\t})\n    \t}\n    },\n\n\tapplyAllowInput: function(value) {\n\t\tif (value === undefined || String(value).trim() === '') {\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).trim().toLowerCase() === 'true';\n\t},\n\n\tapplyAllowDownload: function(value) {\n\t\tif (value === undefined || String(value).trim() === '') {\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).trim().toLowerCase() === 'true';\n\t}\n});","Ext.define('Voyant.panel.DocumentClusters', {\n\textend: 'Ext.panel.Panel',\n\talias: 'widget.documentclusters',\n\ttitle: \"Document Clusters\"\n})\n\n//\textend: 'Ext.panel.Panel',\n//\talias: 'widget.rezoviz',\n//\ttitle: \"RezoViz\"\n//})\nExt.define('Voyant.VoyantCorpusToolsetApp', {\n\textend : 'Voyant.VoyantCorpusApp',\n\trequires: ['Voyant.panel.Contexts','Voyant.panel.Links','Voyant.panel.Trends'],\n\tname : 'VoyantCorpusToolsetApp',\n\tlaunch: function() {\n\t\tExt.create('Ext.container.Viewport', {\n\t\t    layout: 'border',\n\t\t    items: [{\n\t\t        region: 'south',\n\t\t        xtype: 'voyantfooter'\n\t\t    }, {\n         \t   xtype: 'tabpanel',\n        \t   region: 'center',\n\t\t    \tsplit: true,\n        \t   items: [{\n        \t\t   xtype: 'cirrus',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'corpusterms',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'documents',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'rezoviz',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'trends',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'documentclusters',\n                   collapsible: true\n        \t   }],\n        \t   flex: 6\n           }]\n\t\t});\n        this.callParent(arguments);\n\t}\n});","Ext.define('Voyant.VoyantDefaultApp', {\n\textend : 'Voyant.VoyantCorpusApp',\n\tmixins: ['Voyant.util.Api'],\n\tname : 'VoyantDefaultApp',\n\tconstructor: function() {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n        this.callParent(arguments);\n\t},\n\tstatics: {\n\t\ti18n: {\n\t\t\tserverMessage: ' '\n\t\t},\n\t\tapi: {\n\t\t\tview: 'corpusset',\n\t\t\tstopList: 'auto',\n\t\t\tpanels: undefined,\n\t\t\trtl: undefined\n\t\t}\n\t},\n\tconfig: {\n\t\tshowServerMessage: 'false'\n\t},\n\t\n\tlisteners: {\n    \tloadedCorpus: function(src, corpus) {\n    \t\tthis.viewport.down('voyantheader').collapse();\n    \t\tthis.viewport.down('#toolsContainer').setActiveItem(1);\n    \t\tvar corpusId = this.getCorpusId && this.getCorpusId() ? this.getCorpusId() : undefined;\n    \t\tif (window.history.pushState && !corpusId) {\n    \t\t\t// add the corpusId to the url\n    \t\t\tvar corpusId = corpus.getAliasOrId();\n        \t\tvar queryParams = Ext.Object.fromQueryString(document.location.search);\n        \t\t\n    \t\t\tvar url = this.getBaseUrl()+'?corpus='+corpusId;\n    \t\t\tfor (var key in queryParams) {\n    \t\t\t\tif (key !== 'corpus') {\n    \t\t\t\t\tvar vals = Ext.isString(queryParams[key]) ? [queryParams[key]] : queryParams[key];\n    \t\t\t\t\tif (Ext.isArray(vals)) {\n    \t\t\t\t\t\tvals.forEach(function(val) {\n    \t    \t\t\t\t\turl += '&'+key+'='+val;\n    \t\t\t\t\t\t})\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t}\n    \t\t\twindow.history.pushState({\n    \t\t\t\tcorpus: corpusId\n    \t\t\t}, 'Corpus: '+corpusId, url);\n    \t\t}\n    \t}\n\t},\n\tgetViewComponent: function() {\n\t\treturn this.viewport.down('#toolsContainer-main')\n\t},\n\tlaunch: function() {\n\t\tvar queryParams = Ext.Object.fromQueryString(document.location.search) || {};\n\t\tvar view = this.getApiParam('view', 'CorpusSet');\n\t\tvar xtype = view.toLowerCase();\n\t\tif (!Ext.ClassManager.getByAlias(\"widget.\"+xtype) || queryParams.noskin) {\n\t\t\tExt.Msg.show({\n\t\t\t    title: this.localize('noViewErrorTitle'),\n\t\t\t    message: new Ext.Template(this.localize(queryParams.noskin ? 'noViewKnownErrorTpl' : 'noViewErrorTpl')).apply({\n\t\t\t    \tview: queryParams.noskin ? queryParams.noskin : view,\n\t\t\t    \tadditional: queryParams.noskin && queryParams.noskin == 'convert' ? this.localize(queryParams.noskin+'SkinMsg') : ''\n\t\t\t    }),\n\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t});\n\t\t\txtype = 'corpusset'; // switch to default view\n\t\t}\n\n\t\tthis.viewport = Ext.create('Ext.container.Viewport', {\n\t\t    layout: 'border',\n\t\t    rtl: (this.getApiParam('rtl')!==undefined || Voyant.util.Localization.LANGUAGE==\"ar\" || Voyant.util.Localization.LANGUAGE==\"he\"),\n\t\t    items: [{\n\t\t    \txtype: 'voyantheader',\n\t\t    \tregion: 'north'\n\t\t    },{\n\t\t        region: 'south',\n\t\t        xtype: 'voyantfooter'\n\t\t    },{\n\t\t    \tregion: 'center',\n\t\t    \tlayout: 'card',\n\t\t    \titemId: 'toolsContainer',\n\t\t\t\tactiveItem: 0,\n\t\t\t\titems: [{\n\t\t\t\t\txtype : 'container',\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\t\tpack: 'center',\n\t\t\t\t\t\talign: 'middle'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\txtype: 'corpuscreator'\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'container',\n\t\t\t\t\t\twidth: 800,\n\t\t\t\t\t\thtml: \"\"+\n\t\t\t\t\t\t\"<div id='voyantIs' style='font-style: italic; text-align: center; margin-top: 10px;'>\"+\n\t\t\t\t\t\t\t\"<div>\"+this.localize('voyantIs')+\"</div>\"+\n\t\t\t\t\t\t\t(this.localize('translatedBy').indexOf(\"English\") == -1 ? \"<div>\"+this.localize('translatedBy')+\"</div>\" : \"\")+\n\t\t\t\t\t\t\t(this.getCorpusCreatorText && this.getCorpusCreatorText().trim().length>0 ?  \"<div id='corpusCreatorText'>\"+this.getCorpusCreatorText()+\"</div>\" : \"\")+\n\t\t\t\t\t\t\"</div>\"\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'container',\n\t\t\t\t\t\twidth: 800,\n\t\t\t\t\t\thtml: \"<div id='voyantServerMessage' style='font-style: italic; text-align: center; margin-top: 10px;'></div>\"\n\t\t\t\t\t}]\t\n\t\t\t\t},{\n\t\t\t\t\tlayout: 'fit',\n\t\t\t\t\titemId: 'toolsContainer-main',\n\t\t\t\t\titems: {\n\t\t\t\t\t\txtype: xtype\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t    }]\n\t\t});\n\t\tif (this.getShowServerMessage() === 'true') {\n\t\t\tthis.getServerMessage();\n\t\t}\n\t\tthis.callParent(arguments);\n\t},\n\tgetServerMessage: function() {\n\t\t$.get('trombone', {\n\t\t\tfetchData: 'https://raw.githubusercontent.com/wiki/voyanttools/voyant/Announcements.md'\n\t\t}, function(data) {\n\t\t\tvar converter = new showdown.Converter();\n\t\t\tvar html = converter.makeHtml(data);\n\t\t\tvar cleanHtml = DOMPurify.sanitize(html);\n\t\t\t$('#voyantServerMessage').html(cleanHtml);\n\t\t}, 'text')\n\t\t.fail(function() {\n\t\t\tconsole.log('failed to fetch server message')\n\t\t});\n\t}\n});","Ext.define('Voyant.panel.MoreLikeThis', {\n\textend: 'Ext.panel.Panel',\n\talias: 'widget.morelikethis',\n\ttitle: \"More Like this\"\n})\nExt.define('Voyant.VoyantDocumentToolsetApp', {\n\textend : 'Voyant.VoyantCorpusApp',\n\trequires: ['Voyant.panel.Contexts','Voyant.panel.Links','Voyant.panel.Trends'],\n\tname : 'VoyantDocumentToolsetApp',\n\tlaunch: function() {\n\t\tExt.create('Ext.container.Viewport', {\n\t\t    layout: 'border',\n\t\t    items: [{\n\t\t        region: 'south',\n\t\t        xtype: 'voyantfooter'\n\t\t    }, {\n         \t   xtype: 'tabpanel',\n        \t   region: 'center',\n\t\t    \tsplit: true,\n        \t   items: [{\n        \t\t   xtype: 'cirrus',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'documentterms',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'contexts',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'links',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'trends',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'morelikethis',\n                   collapsible: true\n        \t   }],\n        \t   flex: 6\n           }]\n\t\t});\n        this.callParent(arguments);\n\t}\n});","Ext.define('Voyant.VoyantNotebookApp', {\n\textend : 'Voyant.VoyantApp',\n\trequires: ['Voyant.panel.VoyantFooter','Voyant.notebook.Notebook','Voyant.data.model.Corpus'],\n\tname : 'VoyantNotebookApp',\n\tlaunch: function() {\n\t\tExt.create('Ext.container.Viewport', {\n\t\t    layout: 'border',\n\t\t    items: [{\n\t\t    \txtype: 'notebook',\n\t\t    \tregion: 'center'\n\t\t    },{\n\t\t    \txtype: 'voyantfooter',\n\t\t    \tregion: 'south'\n\t\t    }]\n\t\t});\n\t\tthis.callParent(arguments);    \t\n\t}\n});","Ext.define('Voyant.VoyantToolApp', {\n\textend : 'Voyant.VoyantCorpusApp',\n\tname : 'VoyantToolApp',\n\tstatics: {\n\t\tapi: {\n\t\t\tminimal: undefined,\n\t\t\tembeddedApiId: undefined\n\t\t}\n\t},\n\tlaunch: function() {\n\t\tvar items = [], me = this;\n\t\tif (!this.getApiParam('minimal')) {\n\t\t\titems.push({\n\t\t        region: 'south',\n\t\t        xtype: 'voyantfooter'\n\t\t    })\n\t\t};\n\t\titems.push({\n\t        region: 'center',\n\t        layout: 'fit',\n\t        itemId: 'toolcontainer',\n\t        items: {\n\t\t        xtype: this.getApiParam('embeddedApiId') ? 'container' : this.getTool()\n\t        },\n\t        listeners: {\n\t        \tafterrender: function(container) {\n\t        \t\tif (me.getApiParam('embeddedApiId')) {\n\t    \t\t\t\tvar dfd = new Ext.Deferred();\n\t    \t    \t\tcontainer.mask(this.localize('loadingConfiguration'));\n\t        \t    \tExt.Ajax.request({\n\t        \t    \t    url: me.getTromboneUrl(),\n\t        \t    \t    params: {\n\t        \t        \t\ttool: 'resource.StoredResource',\n\t        \t        \t\tretrieveResourceId: this.getApiParam('embeddedApiId')\n\t        \t    \t    }\n\t        \t    \t}).then(function(response) {\n\t    \t\t\t\t\tdfd.resolve();\n\t    \t    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n\t        \t    \t\tvar configString = decodeURIComponent(json.storedResource.resource);\n\t        \t    \t\tvar config = Ext.decode(configString);\n\t        \t    \t\tvar tool = Ext.create({xtype: me.getTool()});\n\t        \t    \t\ttool.setApiParams(config);\n\t        \t    \t\tcontainer.unmask();\n\t        \t    \t\tcontainer.remove(container.down('container'));\n\t        \t    \t\tcontainer.add(tool);\n\t        \t    \t\tif (config.corpus) {\n\t        \t    \t\t\tme.loadCorpusFromParams(config);\n\t        \t    \t\t}\n\t        \t    \t}).otherwise(function(response) {\n\t        \t    \t\tif (me.getTargetEl) {\n\t            \t\t\t\tVoyant.notebook.util.Show.TARGET = me.getTargetEl();\n\t            \t\t\t\tshowError(response);\n\t        \t    \t\t}\n\t        \t    \t\tVoyant.application.showError(response);\n\t        \t    \t\tdfd.reject();\n\t        \t    \t})\n\t    \t\t\t}\n\t        \t},\n\t        \tscope: this\n\t        }\n\t    });\n\t\tExt.create('Ext.container.Viewport', {\n\t\t    layout: 'border',\n\t\t    items: items\n\t\t});\n\t\tthis.callParent(arguments);\n\t}\n});"],
"names":["Bubblelines","config","container","externalClickHandler","clickHandler","INTERVAL","DISMISS_DELAY","UNIFORM_LINE_LENGTH","SEPARATE_LINES_FOR_TERMS","MAX_LINE_WIDTH","MAX_LABEL_WIDTH","DRAW_TITLES","DRAW_SHORT_TITLES","graphSeparation","MIN_GRAPH_SEPARATION","yIndex","mouseOver","clearToolTipId","intervalId","overBubbles","lastClickedBubbles","ctx","canvas","dragInfo","maxDocLength","maxFreq","term","value","maxRadius","cache","Ext","util","MixedCollection","currentTerms","termsFilter","bubbleSpacing","initialized","prototype","constructor","initializeCanvas","height","getHeight","width","getWidth","id","add","xtype","html","border","listeners","afterrender","fn","cnt","document","getElementById","getContext","addEventListener","bind","mouseDownHandler","mouseUpHandler","moveHandler","mouseEnterHandler","mouseLeaveHandler","single","scope","updateLayout","doBubblelinesLayout","setTitleWidthsAndMaxTitleWidth","children","DomQuery","jsSelect","el","dom","i","length","fly","child","setWidth","padding","setMaxLineWidth","setLineLengths","recache","setCanvasHeight","drawGraph","addDocToCache","doc","cacheBubbles","calculateBubbleRadii","lineLength","freqCounts","containsKey","replace","sort","addTermsToDoc","termsObj","docId","key","get","apply","terms","maxFreqChanged","termInfo","bins","distributions","spacing","cachedPositions","tokenPos","maxDistribution","xIndex","d","push","x","freq","radius","bin","tokenPositions","positions","slice","pos","setMaxFreq","newTerm","maxFreqLog","Math","log","minFreq","t","bubble","max","freqLog","each","doCache","getTotalHeight","totalHeight","index","calculateGraphHeights","undefined","setHeight","findLongestDocument","twt","getTotalWordTokens","getTitleWidth","title","indexOf","textBaseline","font","measureText","doTitle","titleWidth","doLength","includeLegend","clearInterval","setInterval","doDraw","setTimeout","clearCanvas","drawDocument","drawLegend","drawToolTip","doDrag","totalDocs","hidden","titleIndent","oldIndex","fillStyle","fillText","drawLine","that","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","pi2","PI","freqTotal","checkClickedBubbles","termsDrawn","info","freqForType","c","color","join","rawFreq","checkCurrentType","b","doClickedBubble","arc","closePath","fill","typeStore","record","type","y","label","docIndex","count","fillRect","strokeRect","clearToolTip","clearTimeout","event","layerX","layerY","docHeight","getCount","newIndex","body","style","cursor","showPointer","round","prevDocHeight","xOffset","yOffset","ordering","reorder","hits","termData","flatten","maxObj","findMaxFreq","getNewColor","colors","findExact","match","removeAllTerms","removeTerm","getNewMax","lcTypes","lcType","Knots","MAX_LINE_LENGTH","LINE_SIZE","progressiveDraw","progDrawDone","drawStep","refreshInterval","forceRedraw","lastDrawTime","getTime","Date","startAngle","angleIncrement","currentDoc","offset","audio","audioCtx","sqrt","doLayout","buildGraph","done","createDelegate","time","save","translate","originOpacity","originColor","abs","restore","muteTerms","setAudio","gainNode","gain","prevXY","xy","drawPolygon","polygon","polyX","polyY","over","termStore","setCurrentDoc","cacheCurrentDocument","addTerms","oscillator","stop","determineGraphSizeAndPosition","window","AudioContext","webkitAudioContext","e","createOscillator","createGain","connect","destination","frequency","random","start","cacheTurns","tokenIds","lastTokenId","angle","prevX","prevY","prevLength","o","segment","newPoint","findEndPoint","getPolygonFromLine","tokenId","point","radians","degreesToRadians","cos","sin","bb","findBoundingBoxForGraph","maxX","minX","maxY","minY","ratio","min","getBoundingBox","hit","isPointInPolygon","test","lastX","lastY","yDiff","point1","point2","size","perpDown","perpUp","p1","p2","p3","p4","j","oddNodes","Cirrus","hex2RGB","hex","charAt","substring","rgb","parseInt","canvasId","containerId","alert","wordController","resizeTimer","clear","this.clear","addWords","this.addWords","words","arrangeWords","this.arrangeWords","clearAll","this.clearAll","setWords","grid","resizeWords","this.resizeWords","setCanvasDimensions","resetWordCoordinates","calculateSizeAdjustment","this.setCanvasDimensions","$","offsetHeight","clientHeight","offsetWidth","clientWidth","ready","init","createElement","setAttribute","append","context","wordData","useFadeEffect","WordController","layout","CIRCLE","SQUARE","isArray","css","wordsToArrange","resize","keypress","which","click","matchingWord","handleWordClick","text","mouseover","startUpdates","mouseout","stopUpdates","mousemove","handleMouseMove","Word","_text","_origSize","_color","_rolloverText","_value","relativeSize","rotation","mask","origSize","rolloverText","ty","tx","fontFamily","fontSize","alpha","isOver","live","draw","this.draw","rotate","parentApp","calculateWordArea","word","baseSize","LOG10E","letter","sortWords","_words","a","createAllGraphics","wordObj","sizeAdjustment","area","pow","adjustedSize","minFontSize","myFont","app","ceil","getWordOrientation","MIXED","tempHeight","backgroundColor","imageData","getImageData","xm","floor","COARSENESS","ym","data","pixel","drawWords","$canvasEl","overWord","wordWidth","valueWidth","maxWidth","overX","overY","appWidth","appHeight","_layout","getLayout","this.getLayout","setLayout","this.setLayout","HORIZONTAL","_wordOrientation","this.getWordOrientation","setWordOrientation","this.setWordOrientation","UPDATE_RATE","timer_i","timer","doingArrange","getWords","this.getWords","this.setWords","largestWordSize","smallestWordSize","_uniqueWords","newWords","sizeChanged","parseFloat","setRelativeSizes","this.resetWordCoordinates","this.calculateSizeAdjustment","stageArea","totalWordsSize","wordArea","this.setRelativeSizes","ostart","istart","toggleLoadingText","set_grid","xt","yt","fadeWord","finalizeWord","drawIt","hitTest","h","w","doArrange","wordCount","appCanvasWidth","appCanvasHeight","halfWidth","halfHeight","da","halfWordWidth","halfWordHeight","fail","dd","wrd","this.toggleLoadingText","show","this.startUpdates","this.stopUpdates","this.handleMouseMove","remainder","pageX","left","pageY","top","findWordByCoords","this.handleWordClick","this.findWordByCoords","Function","Function.prototype.createDelegate","obj","args","appendArgs","method","callArgs","arguments","Array","call","concat","applyArgs","splice","doubletree","new_pruneTree","tree","ids","copyIDs","origIDs","addTo","Object","keys","origCount","idNums","n","cid","containedIn","filter","continuations","cMax","d3","map","maxChildren","o1","o2","k","noOp","DoubleTree","doubletree.DoubleTree","mine","selection","containers","node","visWidth","visHt","prefixesOnRight","filters","handlers","showTokenExtra","scaleLabels","sortFun","sortByStrFld","nodeText","tokenText","tokenExtraText","fieldText","rectColor","rectBorderColor","continuationColor","basicStyles","succeeded","dispatch","on","leftTree","rtTree","setIds","continuationIDs","updateContinuations","leftTrie","rtTrie","visibleIDs","textScale","mine.init","containerPattern","select","selectAll","redraw","mine.redraw","setupFromTries","mine.setupFromTries","leftOne","rtOne","getUniqRoot","leftTrieTree","toTree","rtTrieTree","right","pruned","newInfo","isNaN","scaleLog","range","kMinFontSize","kFontSize","domain","textScale.domain","minCount","bottom","forEach","tmp","thisVis","attr","zoom","scaleExtent","transform","remove","Tree","handleAltPress","alt","handleShiftPress","shift","handleClick","setupFromArrays","mine.setupFromArrays","prefixArray","hitArray","suffixArray","idArray","caseSensitive","fieldNames","fieldDelim","distinguishingFieldsArray","Trie","thisID","thisHit","thesePrefixes","theseSuffixes","reverse","unshift","addNgram","filteredIDs","mine.filteredIDs","search","mine.search","searchRE","found","empty","what","foundRt","clearSearch","mine.clearSearch","updateTokenExtras","mine.updateTokenExtras","showTokenExtras","tokExtra","ht","mine.visWidth","visHeight","mine.visHeight","mine.prefixesOnRight","mine.filters","mine.handlers","mine.showTokenExtra","mine.scaleLabels","mine.succeeded","mine.sortFun","mine.nodeText","mine.tokenExtraText","mine.rectColor","mine.rectBorderColor","mine.continuationColor","mine.basicStyles","stylesObj","aspect","doubletree.Tree","vis","toLeft","showTokenXtra","nodeTextFun","tokenExtraTextFun","rectColorFun","rectBorderFun","contColorFun","baseStyles","collapse","_children","collapseSiblings","nd","parent","altKey","shiftKey","clickedNode","toggleChildren","update","positionX","root","nodeSize","diagonal","linkHorizontal","readJSONTree","this.readJSONTree","json","hierarchy","x0","y0","this.update","source","nodes","treeData","descendants","textSize","measured","TextMeasurer","name","baseBranchSegmentWidth","depth","nodeEnter","enter","infoToText","txtNode","drawRects","nodeUpdate","merge","transition","duration","nodeExit","exit","link","links","target","insert","branch","linkEnter","linkUpdate","this.drawRects","parentElement","getBBox","parentW","this.setIds","this.updateContinuations","classed","isContinuation","this.search","this.clearSearch","this.showTokenExtras","setRectColor","this.setRectColor","this.handleAltPress","handleShifttPress","this.handleShifttPress","this.handleClick","doubletree.sortByStrFld","fld","aUndefined","bUndefined","aVal","toLowerCase","bVal","sortByCount","doubletree.sortByCount","sortByContinuations","doubletree.sortByContinuations","filterByMinCount","doubletree.filterByMinCount","inf","filterByMaxCount","doubletree.filterByMaxCount","filterByPOS","doubletree.filterByPOS","re","RegExp","p","doubletree.fieldText","fieldName","doubletree.tokenText","token","doubletree.infoToText","infp","doubletree.Trie","fldNames","fldDelim","distinguishingFldsArray","undistinguishedRoot","TrieNode","item","rootName","flds","split","this.addNgram","itemArray","thisItem","theseFlds","thisKey","undistinguishedRt","f","noCase","toLocaleLowerCase","endNG","subTrie","thisFld","this.getUniqRoot","this.toTree","filterFuns","toTreeHelper","descendentLevel","trieData","k2","itemNode","thisFilter","maxLen","JSON","parse","stringify","trie","serialize","this.serialize","deserialize","this.deserialize","serialized","this.endNG","this.rootName","this.trie","this.caseSensitive","this.fieldNames","this.fieldDelim","this.distinguishingFieldsArray","TermsRadio","isSliderVisible","showSlider","chart","absMinFreq","absMaxFreq","allData","continueTransition","counterSeries","displayData","isTransitioning","dragged","lastSticky","lastSlippery","maxFont","numDataPoints","numVisPoints","overlayQueue","recordsLength","records","reselectTop","sliderDragSum","shiftCount","titlesArray","transitionCall","valFraction","win","bPadding","lPadding","rPadding","tPadding","sliderHeightRatio","sliderHeight","sliderBPadding","largestH","largestW","xAxisEl","xAxis","axisBottom","xScale","scaleLinear","xSliderScale","yAxisEl","yAxis","axisLeft","yScale","ySliderScale","fontScale","opacityScale","doResize","loadRecords","initData","len","prepareData","initializeChart","highlightQuery","query","sticky","getApiParam","getCorpus","getDocument","getId","paramsBundle","buildParamsBundle","wordString","manageOverlaySticky","manageOverlaySlippery","highlightRecord","parentBins","loadStore","transferArray","rec","dists","counter","posInSeries","numInSeries","frequencySeries","copy1","copy2","copy4","check1","check2","frequencyArray","l","inSeries","allDataInternal","outerCounter","displaySetup","dotObject","displayInternal","manageMvtButtons","queryById","setPlaying","nextR","toggleRightCheck","manageXScale","setApiParams","position","animateVis","nextL","startScroll","me","initChart","drawXAxis","drawYAxis","drawChart","drawSlider","drawVerticalSlider","redrawSliderOverlay","updateFullPath","redrawXAxis","redrawYAxis","redrawChart","redrawSlider","redrawVerticalSlider","redrawChartOverlay","chartSVG","DomHelper","down","setSliderHeight","getSliderHeight","setTitleLength","manageAllXScales","ticks","tickFormat","val","styleXAxis","manageAllYScales","yTicksScale","numberFormat","format","logFormat","tickSize","counterSeriesDiv","frequencySeriesDiv","getSelectorFromTerm","startPoint","valueRange","callOffset","lengthHor","offsetVisStart","offsetVisEnd","greyBoxBefore","greyBoxAfter","drag","displaceX","dx","checkBefore","checkAfter","getAttribute","moveByThis","inverseSliderScale","moveShiftCount","oldShiftCount","removeSlider","removeTermLines","getDuration","ease","easeLinear","isMasked","unmask","callTransition","toggleLeftCheck","params","totalTokens","getLexicalTokensCount","tokenIdStart","docIdType","string","selector","checkOn","pathHolder","prepareFullPath","lineObject","fullPath","path","pathMin","pathMax","colour","chartOverlayOff","sliderOverlayOff","chartOverlayOn","sliderOverlayOn","isTermSelected","doTermDeselect","doTermSelect","getTermIndex","legendAdd","apiArray","selectedWords","getApplication","getColorForTerm","legend","getStore","mark","refresh","findRecord","set","legendRemove","removeAt","updateApi","linePosArray","foundB","lenA","lenB","yVal1","yVal2","buildSliderPath","pathArray","line","curve","curveNatural","objectToSelect","transitionSliderOverlay","updateYSliderScale","preparePath","foundA","yVal3","yVal4","foundC","posDif","manageFontScale","manageOpacityScale","manageYScale","manageYSliderScale","rangeRound","updateWithObject","selectedMin","selectedMax","manageXSliderScale","hideSlider","scale","corpus","getDocumentsCount","shortTitle","getShortTitle","shorterTitle","charCodeStr","charCodeAt","getSpeed","define","apis","isApplication","Voyant","application","mixins","clz","ClassManager","api","addParentApi","getClass","getApiParams","initial","queryParams","fromQueryString","location","getXType","setApiParam","isObject","superclass","self","defaultValue","keepEmpty","isString","isEmpty","getModifiedApiParams","statics","DEFAULT_LANGUAGE","LANGUAGE","AVAILABLE_LANGUAGES","i18n","getLanguage","code","Localization","localize","langs","lang","lowerCaseCode","find","_localizeObject","object","_localizeClass","mixin","clazz","use","isTemplate","getLanguageToolMenu","tooltip","glyph","handler","showLanguageOptions","localeCompare","Window","modal","items","bodyPadding","queryMode","editable","fieldLabel","margin","labelAlign","labelWidth","displayField","valueField","store","fields","buttons","ui","flex","btn","up","close","form","isDirty","getAliasOrId","panels","values","getValues","assign","toQueryString","palettes","colorTermAssociations","textColorsForBackgroundColors","d3Palettes","categorical","cyclical","sequentialDiverging","sequentialMulti","sequentialSingle","lastUsedPaletteIndex","setPalettes","resetColorTermAssociations","palName","rgbs","scaleOrdinal","hexToRgb","addColorPalette","extjs","create","getColors","setColorTermAssociations","setTextColorsForBackgroundColors","rgbToHex","toString","shorthandRegex","m","r","g","result","exec","getPalettes","getColorPalette","returnHex","paletteKey","palette","createD3ColorPalette","d3Name","steps","Error","interpolate","saveCustomColorPalette","paletteArray","dfd","Deferred","Ajax","request","url","getTromboneUrl","tool","storeResource","encode","success","response","req","decode","responseText","storedResource","resolve","failure","reject","promise","loadCustomColorPalette","paletteId","retrieveResourceId","resource","getColor","console","warn","getColorTermAssociations","setColorForTerm","getColorForEntityType","getColorContrast","background","foreground","linearize","sign","R","G","B","lumTxt","lumBg","Ytxt","blkThrs","blkClmp","Ybg","deltaYmin","C","S","normBG","normTXT","revBG","revTXT","scaleBoW","loClip","Sapc","loBoWoffset","getTextColorForBackground","textColor","getTextColorsForBackgroundColors","darkText","lightText","darkContrast","lightContrast","extend","msg","error","details","setMsg","setError","setDetails","callParent","showError","showMsg","applyIf","message","getMsg","getError","escape","getDetails","Msg","OK","icon","MessageBox","ERROR","autoScroll","setResponse","statusText","getSparkLine","stretch","Number","MAX_VALUE","MIN_VALUE","hasDecimal","dif","newvalues","multiplier","divider","valuesPerImage","baseUrl","images","wid","vals","requires","suppressTools","header","moreTools","getMenuItemFromXtype","getInitialConfig","getMoreTools","tools","category","categories","menu","toolsMap","exportToolClick","plus","gear","showOptionsClick","getOptions","panel","isXType","getActiveTab","resizable","defaults","getForm","getFields","collect","setValues","fireEvent","keyValuesForGlobalUpdate","stopListGlobal","termColorsGlobal","categoriesDfd","loadCategoryData","then","finally","paletteDfd","always","Promise","all","getViewport","keyValue","dispatchEvent","help","helpToolClick","includeTools","callback","getHeader","os","deviceType","getEl","getTools","hide","getToolConfigFromToolXtype","clone","textAlign","replacePanel","maximizeToolClick","parts","getName","getBaseUrl","openUrl","hostname","exportViewItems","inputValue","boxLabel","getExtraViewExportItems","getExportUrl","checked","boxLabelEl","collapsible","collapsed","exportDataItems","getExportGridAll","getExtraDataExportItems","getExportVisualization","getTargetEl","querySelector","formats","minValue","maxValue","increment","decimalPrecision","itemId","Template","change","slider","newVal","setFieldLabel","changecomplete","previousSibling","setValue","String","capitalize","isFunction","exportSvg","img","svg","parentNode","innerHTML","btoa","unescape","encodeURIComponent","INFO","prompt","multiline","exportPngData","exportPng","getValue","canvasSurface","isChart","isCanvas","innerElement","getSize","surfaces","zIndexes","surfaceZIndexes","surface","zIndex","targetCanvas","className","getClassName","devicePixelRatio","rect","getRect","surfaceSize","canvases","getOffsetsTo","getParent","drawImage","isVisible","toDataURL","targetEl","image","Image","src","onload","image.onload","cloneNode","svgChildren","removeChild","appendChild","outerHTML","createDom","tag","exportUrl","exportEmbed","asTool","exportBiblio","date","websiteTitle","minHeight","getExportBibTex","evt","getSelection","createRange","sel","selectNodeContents","removeAllRanges","addRange","createTextRange","moveToElementText","exportSpyral","toolForUrl","pop","isDebug","view","debug","input","exportGridCurrentJson","jsonCollector","row","visibleColumns","column","dataIndex","getColumnManager","headerCt","getVisibleGridColumns","col","trim","buffered","exportGridCurrentTsv","tsvCollector","cells","exportGridCurrentHtml","htmlCollector","exportGridAllJson","confirm","getProxy","getExtraParams","exportGridAllTsv","template","outputFormat","abstract","getTitle","now","accessed","createdTime","getCreatedTime","bib","citekey","getFullYear","getViewComponent","removeAll","history","pushState","newTool","setActiveTab","alias","renderTpl","privates","onClick","returnValue","showToolMenu","onDestroy","destroyMembers","toolMenu","destroyed","Menu","showAt","getX","getY","initComponent","glyphParts","glyphFontFamily","glyphConfig","renderData","baseCls","blank","BLANK_IMAGE_URL","transferable","transfer","member","variants","variant","v","getVariants","documentFormat","documentFilename","downloadFromCorpusId","corpusId","openDownloadCorpus","MAX_LENGTH","dataString","numChunks","chunkIds","_doStore","chunkCount","currIndex","chunkString","substr","resourceId","getStoredResource","verifyResourceId","_doGetStored","fullData","dataChunks","chunkId","isChunk","failQuietly","diacriticsMap","defaultDiacriticsRemovalMap","letters","base","removeDiacritics","str","idProperty","getDocIndex","getLeft","getMiddle","getHighlightedMiddle","getRight","getPosition","getHighlightedContext","getLabel","getFacet","getInDocumentsCount","getTerm","getKeyword","getRawFreq","getKeywordRawFreq","getContextTerm","getContextTermRawFreq","calculate","getDistributions","getString","convert","getLexicalTypeTokenRatio","loadDocumentTerms","isNumber","limit","documentTerms","getDocumentTerms","load","operation","loadTokens","tokens","getTokens","proxy","extraParams","getIndex","getFullLabel","author","getAuthor","getTruncated","slash","lastIndexOf","space","getTinyTitle","getShortLabel","getTinyLabel","getPubDate","getPublisher","getPubPlace","getMultiple","getCollection","field","getCorpusId","isPlainText","getAverageWordsPerSentence","getText","getPlainText","getLemmasArray","getEntities","loadEntities","getCSS","getPositions","getOffsets","getDocIds","getRelativeFreq","getSource","getTarget","getPrincipalComponents","pcs","principalComponents","pc","getDimensions","dimensions","dim","percentage","tok","getInfoFromElement","isWord","getTokenType","isStopword","getDocId","getTermWithLineSpacing","getDocumentRawFreq","getNormalized","getType","parentPanel","maxTime","extras","remoteSort","autoLoad","pagePurgeCount","pageSize","leadingBufferZone","actionMethods","read","timeout","reader","rootProperty","totalProperty","metaProperty","simpleSortMode","exception","endprocessresponse","wasSuccessful","rootPropertyParent","getReader","initialConfig","messages","firstMessage","toastInfo","forTool","setParentPanel","setCorpus","beforeload","getParentPanel","isBufferedStore","from","previouslySetExtraParams","setExtraParam","getAt","model","withDistributions","CorpusFacet","CorpusTerm","sorters","property","direction","successful","opts","getById","noCache","NotebookFacet","facet","alternateClassName","rows","headers","rowsMap","headersMap","rowKey","table","VoyantTable","setRows","getRows","setHeaders","getHeaders","setRowsMap","getRowsMap","setHeadersMap","getHeadersMap","setRowKey","getRowKey","fromBlock","notebook","Notebook","getDataFromBlock","noHeaders","freqs","counts","orientation","isStore","getData","firstRow","getRow","cell","reMapRows","addRow","updateCell","getColumnIndex","eachRecord","getRecord","eachRow","asMap","getRowIndex","mapRows","getColumnHeader","getColumnSum","sum","getColumnValues","getColumnMean","mean","getColumnMax","getColumnMin","clean","sortByColumn","columns","sortColumnsIndices","loadCorrespondenceAnalysis","_doAnalysisLoad","loadPrincipalComponentAnalysis","loadTSNEAnalysis","storeType","columnHeaders","rowHeaders","analysisInput","toTsv","inputFormat","noCorpus","embed","cmp","embeddable","rowkey","columnIndices","tableJson","axes","series","tsv","edges","setEdges","setNodes","addEdge","getEdges","getNode","binarySearch","getNodes","lhs","rhs","edge","jsonData","queries","isIncrementalLoadingOccurrences","previousParams","setPreviousParams","localParams","getQueries","noOverwrite","setData","dreamscape","progress","widget","ProgressMonitor","maxMillisSinceStart","responseOrProgress","showResponseError","getCitiesCount","locations","getTotalCitiesCount","total","hasMoreCities","eachCity","orderedLocations","c1","c2","getConnectionsCount","connections","getTotalConnectionsCount","eachConnection","orderedConnections","getConnectionOccurrence","connectionOccurrencesData","connectionOccurrences","getIsIncrementalLoadingOccurrences","setIsIncrementalLoadingOccurrences","getPreviousParams","suppressLocations","suppressConnections","occurrence","getAllConnectionOccurrences","sourceId","targetId","occurences","occurence","identifyingDocEnts","retry","statusDone","statusFailed","statusQueued","statusStarted","status413","getStanfordTypeFromSpacyType","spacyType","getSpacyTypesFromStanfordType","stanfordType","progressWindow","updateDelay","timeoutId","entitiesColors","person","organization","gpe","loc","money","misc","product","cardinal","quantity","fac","language","law","norp","percent","work_of_art","unknown","initConfig","doLoad","firstCall","documentEntities","progressArray","_getProgressFromStatus","status","isDone","hasFailures","has413Status","getProgressWindow","_addDistributionsToEntities","entities","getBins","_addEntitiesToCategories","updateProgress","setStyle","setHidden","setDisabled","setHandler","retryFailures","setTimeoutId","defer","getUpdateDelay","err","statusArray","numDone","statusCodes","statusCode","setProgressWindow","minimizable","closeAction","align","pack","scrollable","itemSelector","tpl","owner","expand","anchorTo","getBody","getBox","minimize","Component","DIRECTION_BOTTOM","destroy","getTimeoutId","docsStore","getDocuments","statusWithDocTitles","docTitle","statusMsg","statusIcon","loadData","setTitle","entity","catMan","getCategoriesManager","addCategory","setCategoryFeature","doAdd","binSize","distribution","documentsStore","dateFormat","inlineData","metadata","subTitle","docsLimit","setDocumentsStore","loadCorpusTerms","corpusTerms","getCorpusTerms","getRange","getCorpusCollocates","getDocumentQueryMatches","getDocumentEntities","loadContexts","contexts","getContexts","getDocumentsStore","Document","isNumeric","getWordTokensCount","getWordTypesCount","requiresPassword","noPasswordAccess","getNoPasswordAccess","getSubTitle","getRelatedWords","loadRelatedWords","relatedTerms","transformCase","toUpperCase","getWordsArray","withPosLemmas","noOthers","lemmas","getReadability","indexType","parentKey","subkey","indexKey","readabilityKey","indexData","readability","withID","XTemplate","Format","number","types","createdDate","YEAR","MONTH","DAY","HOUR","MINUTE","SECOND","diff","openMenu","getStoreItemsFromDefinition","getOpenMenu","arg","decodeURIComponent","definition","nameValue","triggerAction","editList","list","keywords","OKCANCEL","buttonText","ok","cancel","original","combo","stoplists","ar","bg","br","ca","ckb","cn","cz","de","en","es","eu","fa","fr","ga","gl","grc","he","hi","hu","hy","it","ja","la","lv","lt","mu","nl","no","pt","ro","ru","se","th","tr","uk","StopListOption","stopList","stoplist","none","categoriesTerms","applyGlobally","boxready","useCategoriesMenu","getUseCategoriesMenu","categoriesMenu","categorySet","cats","rowIndex","preventDefault","getSelectionModel","setTerms","getXY","getColorStyle","termColors","getCategoriesForTerm","bgColor","tokenType","isDocsMode","inDocumentsCountOnly","showAggregateInDocumentsCount","clearOnQuery","currentOriginalRawQueryPlan","hasCorpusLoadedListener","isClearing","minWidth","matchFieldWidth","minChars","filterPickList","createNewOnEnter","createNewOnBlur","autoSelect","itemTpl","triggers","weight","cls","getIsDocsMode","setClearOnQuery","queryPlan","originalRawQueryPlan","setCurrentOriginalRawQueryPlan","originalRawQueryPlanWithoutAt","cat","getCategories","tags","getClearOnQuery","removeValue","getValueRecords","setHtml","q","getStopList","findParentBy","doSetCorpus","tip","QuickTipManager","register","unregister","setStopList","getInDocumentsCountOnly","setStore","getTotalCount","docs","singleSelect","setSingleSelect","getSingleSelect","fbar","getMenu","setChecked","button","hasVisibleMenu","hideMenu","populate","setDocs","di","isSingleSelect","groupId","group","checkHandler","nextSibling","initField","eachKey","DropZone","ddGroup","getTargetFromEvent","onNodeDrop","contains","Helper","rendered","enabled","hasCls","fonts","presetPalettes","paletteSize","paletteTpl","paletteStore","ArrayStore","d3PaletteTreeData","editPaletteWin","spectrum","entries","entry","palCategory","palNames","expanded","isCategorical","leaf","editPalette","loadPalette","rootVisible","beforeselect","selectionchange","startsWith","disable","enable","loadD3Palette","disabled","newValue","oldValue","isValid","overItemCls","selectedItemCls","selectionModel","mode","viewmodel","selected","toRgb","dv","savePalette","initSpectrum","setColorForSelected","rgbA","editor","flat","showInput","showButtons","preferredFormat","move","paletteData","loadRawData","palRecord","getConfigFromTableJson","setAxes","setSeries","setLegend","jsonString","noLegend","docked","axis","degrees","cfg","xField","yField","marker","highlightCfg","scaling","trackMouse","renderer","getYField","searchValue","matches","currentIndex","searchRegExp","regExpMode","matchCls","tagsRe","tagsProtect","onTextFieldChange","visibleColumnManager","getColumns","idx","getCellInnerSelector","seen","cellHTML","gotoCurrent","deselectAll","focus","getNavigationModel","setPosition","msgbox","delay","getProgress","getScope","completion","progressBar","wait","getMaxMillisSinceStart","opt","setProgress","finish","getDelay","setDelay","getSuccess","getFailure","getArgs","tableHtml","hiddenColumns","buildFromParams","ux","TransformGrid","render","getHiddenColumns","hides","setHiddenColumns","configFields","configColumns","cols","mapping","sortable","doDestroy","tabl","namespace","Builder","getCategoriesId","categoriesId","setCategoriesId","relativeFreq","removeCategory","removeTerms","categoryName","exists","confirmRemove","features","increaseCategory","decreaseCategory","setColorsFromPalette","loadingCategories","errorLoadingCategories","FontFamilyOption","builderWin","addCategoryWin","categoriesManager","onEsc","emptyFn","tabBarHeaderPosition","region","viewConfig","plugins","ptype","copy","enableDrop","dragZone","getDragText","dragData","selModel","dockedItems","dock","overflowHandler","enableKeyEvents","keyup","clearFilter","getAddCategoryWin","sels","hideable","bbar","palColors","buildFeatures","processFeatures","setColorTermsFromCategoryFeatures","saveCategoryData","buildCategories","builder","setAddCategoryWin","allowBlank","validator","getCategoryTerms","getKey","Event","ENTER","reset","clearInvalid","termsData","frame","findParentByType","prev","prevChild","moveBefore","setCategoryRanking","next","nextChild","moveAfter","beforedrop","drop","titleEditor","Editor","updateEl","alignment","autoSize","complete","ed","newvalue","oldvalue","renameCategory","textEl","startEdit","categoriesParent","queryBy","featuresStore","addFeature","getFeatures","featuresConfigs","feature","featureConfig","widgetConfig","getCategoryFeature","reconfigure","featureValue","minButtonWidth","getTerms","addCats","remCats","beforeshow","catsMenu","termCats","visLayout","nodeData","edgeData","nodeSelection","edgeSelection","currentNode","currentEdge","zoomExtent","dragging","nodeScaling","minSize","maxSize","scalingFunction","edgeScaling","graphStyle","normal","fillOpacity","strokeOpacity","strokeWidth","highlight","graphPhysics","damping","centralGravity","nodeGravity","springLength","springStrength","collisionScale","setNodeData","setEdgeData","loadJson","initGraph","refreshGraph","elHeight","elWidth","getVisLayout","force","forceX","forceY","zoomToFit","processJson","existingTerms","getNodeData","newNodes","newEdges","idGet","newedge","getEdgeData","wordFreq","updateDataForNode","nodeId","dataObj","updateDataForEdge","edgeId","addNode","removeNode","removeOrphans","potentialOrphans","orphanId","removeEdge","getRenderTarget","physics","getGraphPhysics","setVisLayout","forceSimulation","velocityDecay","strength","forceLink","distance","forceManyBody","forceCollide","bbox","getEdgeSelection","getNodeSelection","getZoomExtent","setZoom","setEdgeSelection","setNodeSelection","setVis","resetGraph","nodeExtent","extent","edgeExtent","getEdgeScaling","getNodeScaling","edgeEnter","edgeMouseOver","edgeMouseOut","stopImmediatePropagation","setCurrentEdge","nodeMouseOver","nodeMouseOut","setCurrentNode","setDragging","active","restart","fx","fy","fixed","getFeatureForTerm","applyEdgeStyle","applyNodeStyle","paddingPercent","transitionDuration","bounds","getVis","midX","midY","svgRect","getBoundingClientRect","fullWidth","fullHeight","getZoom","zoomIdentity","nodeState","state","getGraphStyle","edgeState","locationMarker","isDetailedGraph","seriesToolTip","locationMarkerColor","DETAILED_GRAPH_DOC_LIMIT","LOCATION_UPDATE_FREQ","SCROLL_UP","SCROLL_EQ","SCROLL_DOWN","RESERVED_KEYS","handleCorpus","setSeriesToolTip","dismissDelay","getLocationMarker","setLocationMarker","setIsDetailedGraph","generateChart","loadQueryTerms","queryTerms","getIsDetailedGraph","populateDetailedChart","populateChart","graphDatas","graphData","dist","graphs","graph","docData","sColor","getAxes","setMaximum","seriesData","td","reduce","prevVal","currVal","readerGraphTotal","readerGraphPadding","stacked","fullStack","minGapWidth","minBarWidth","sprite","rendererData","getField","setFields","addChart","docInfo","fraction","relativeHeight","bColor","insetPadding","stops","itemmouseover","tooltipHtml","getSeries","seriesItem","getItemByIndex","getSeriesToolTip","box","chartContainer","containerParent","toArray","tokensTotal","docInfos","animation","getFullStack","itemclick","docWidth","moveLocationMarker","scrollDir","locMarkEl","locX","currX","setX","hasEntitiesParent","forceFit","groupField","ftype","hideGroupedHeader","enableGroupingMenu","startCollapsed","groupHeaderTpl","localizeName","localized","bracketsCheck","rowBodyTpl","expandOnDblClick","expandbody","rowNode","expandRow","eOpts","textContent","parentEl","currentEntityPositionIndex","handlePositionChange","dir","distBinCount","distBinToHighlight","sparkline","sparklineBox","binWidth","getBarWidth","getBarSpacing","MouseEvent","clientX","clientY","onMouseMove","renderTo","highlightColor","tipTpl","columnresize","ct","entityResults","addEntities","clearEntities","annotator","docIds","DocumentEntities","includeEntities","first","oldDocIndex","findFeature","collapseAll","corpusValidated","subtitle","anyMatch","gcol","setVisible","selectedRecordsToRemember","mergedRecords","currentPage","addAll","totalCount","loadedCorpus","priority","toastError","toast","slideInDuration","shadow","anchor","hasCorpusAccess","corpusAccess","getCorpusAccess","hasModifyCorpusAccess","getAllowDownload","allowDownload","getAllowInput","allowInput","tabchange","newTab","addTool","tab","rowLines","emptyText","hideHeaders","selType","metaData","setStoreCorpus","speed","options","corpusLoaded","processingLoaded","bubblesAppCode","bubbles","frameRate","beforedestroy","loadBubbles","loadDocument","handleCurrentTerm","handleDocFinished","documentTerm","whiteList","setLines","loop","getAudio","Processing","bindJavascript","noLoop","Loader","loadScript","onLoad","maxDocs","bubblelines","docTermStore","selectedDocs","termTpl","setDocTermStore","withPositions","processTerms","termObj","getBubblelines","initLoad","getDocTermsFromQuery","setTermStore","termsView","getTermStore","reloadTermsData","boxLabelAlign","checkbox","focusCls","beforeitemclick","stopPropagation","beforecontainerclick","selections","getNodeByRecord","removeCls","addCls","lcTerms","itemcontextmenu","isSelected","floating","deselect","autoEl","overflowY","overflowX","component","canvasParent","setBubblelines","bubbleClickHandler","afterlayout","inLimit","autoload","getDocTermStore","filterDocuments","setSelectedDocs","getSelectedDocs","filterBy","termRecord","splash","facets","matchingDocIds","customResultsHtml","animCollapse","collapseFirst","facetCmp","updateResults","adjustFacetHeights","addFacet","catalogue","keepDocuments","getMatchingDocIds","getCustomResultsHtml","setCustomResultsHtml","facetsCmp","CorpusTerms","selectFacet","labels","getFacets","maxCount","flexAmt","setFlex","results","documentQueryMatches","includeDocIds","labelItems","suffix","isMatch","part","lnks","lnk","setMatchingDocIds","firstDocIds","loadSnippets","elToMask","stripTags","perDocLimit","accurateTotalNotNeeded","snippets","snippet","docItem","insertHtml","facetsSelectionStore","existingFacets","isFiltered","forceSelection","visible","cirrusForceFlash","fade","smoothness","diagonals","cirrusId","MODE_CORPUS","MODE_DOCUMENT","setCirrusId","loadFromTermsRecords","initVisLayout","buildFromTerms","setAdjustedSizes","loadFromCorpus","corpusSelected","documentSelected","loadFromDocumentTerms","ensureCorpusView","getMode","loadFromCorpusTerms","setMode","setRecords","getRecords","forceLayout","getCirrusId","appVars","swfscript","loadFlash","swfobject","cirrusFlash","flashVars","flashParams","allowScriptAccess","bgcolor","wmode","cirrusFlashApp","layoutCloud","overflow","spiral","getTip","setTip","setSmallestWordSize","setLargestWordSize","nodesEnter","coords","pointer","nodesUpdate","istop","ostop","setMinFontSize","setSizeAdjustment","findNewRelativeSize","getMinFontSize","getSmallestWordSize","getLargestWordSize","areaMultiplier","getSizeAdjustment","centralize","linkData","visId","contextMenu","networkMode","keywordNode","contextNode","defaultMode","centralizedMode","DEFAULT_MODE","CENTRALIZED_MODE","setLinkData","setVisId","getNetworkMode","loadFromQuery","setContextMenu","checkchange","getCurrentNode","setNetworkMode","fetchCollocatesForNode","doCentralize","getContextMenu","getVisId","loadFromCorpusTermRecords","operations","loadFromCorpusCollocateRecords","corpusTerm","keywordId","cX","cY","existingKeys","newLinks","corpusCollocate","contextTerm","termFreq","contextFreq","termValue","contextValue","termEntry","contextId","contextTermEntry","existingLink","getLinkData","linkValue","centralizeLimit","applyNetworkMode","getLinks","getDragging","setLinks","linkMouseOver","linkMouseOut","isOffCanvas","allNodes","applyLinkStyle","linkState","include","corpusCollocates","termSearch","cutoff","numTerms","analysis","pca","tsne","helpTip","caStore","pcaStore","tsneStore","allNodeData","allEdgeData","simCutoff","simMin","simMax","allSims","simWin","simulation","termSearchTimeout","setCaStore","handleData","setPcaStore","setTsneStore","getItemId","loadFromApis","getTermSearchTimeout","setTermSearchTimeout","updateGraph","getSimCutoff","setSimCutoff","minSpotColor","maxSpotColor","spotColor","disableTooltips","getCaStore","getPcaStore","getTsneStore","getPhysics","setSimulation","forceCenter","getSimulation","stopSimulation","selectedTerm","doFilter","getAllNodeData","getAllEdgeData","handleNodeClick","handleDragStart","handleDrag","handleDragEnd","subject","all_node_data","all_edge_data","sims","combinations","sim","pairs","setAllSims","setSimMin","arrayMin","setSimMax","arrayMax","getSimMin","getSimMax","setAllNodeData","setAllEdgeData","getAllSims","cutoffPercent","easedCutoff","easeIn","valueSpot","setValueSpots","nodes_temp","Set","edges_filtered","nodes_filtered","has","current","arr","Infinity","isConsumptive","sm","clearAndLoad","getView","recordsExpanded","getByInternalId","childNodes","colIndex","documentsSelected","documentSegmentTermClicked","documentSegmentTerm","documentIndexTermsClicked","documentIndexTerms","queriesHash","docIndexHash","middle","embedded","documents","docid","termsClicked","collocatesStore","correlationsStore","phrasesStore","documentTermsStore","loadStuff","tagName","getHtml","getDockedItems","setCollocatesStore","setCorrelationsStore","setPhrasesStore","setDocumentTermsStore","getComponent","docIndexes","getDocumentTermsStore","op","arrays","addSection","getCollocatesStore","getCorrelationsStore","getPhrasesStore","minLength","phrase","minInDocumentsCountRatio","setText","corpusSortInitialOrder","dtocIndexDoc","textEncoding","groupByColumn","groupByColumnText","xmlDocumentsXpath","xmlGroupByXpath","xmlContentXpath","xmlTitleXpath","xmlAuthorXpath","xmlPubDateXpath","xmlPublisherXpath","xmlPubPlaceXpath","xmlKeywordXpath","xmlCollectionXpath","xmlExtraMetadataXpath","htmlGroupByQuery","htmlDocumentsQuery","htmlContentQuery","htmlTitleQuery","htmlAuthorQuery","htmlPubDateQuery","htmlPublisherQuery","htmlPubPlaceQuery","htmlKeywordsQuery","htmlCollectionQuery","htmlExtraMetadataQuery","jsonDocumentsPointer","jsonContentPointer","jsonTitlePointer","jsonAuthorPointer","jsonPubDatePointer","jsonPublisherPointer","jsonPubPlacePointer","jsonKeywordsPointer","jsonCollectionPointer","jsonExtraMetadataPointer","encoding","tokenization","adminPassword","accessPassword","tableDocuments","tableGroupBy","tableContent","tableTitle","tableAuthor","tablePubDate","tablePublisher","tablePubPlace","tableKeywords","tableCollection","tableExtraMetadata","inputRemoveFrom","inputRemoveFromAfter","inputRemoveUntil","inputRemoveUntilAfter","borderColor","borderStyle","frameHeader","buttonAlign","submitEmptyText","loadCorpus","buttonOnly","hideLabel","filefield","fileInputEl","files","badFilesRe","goodFilesRe","badFiles","unknownFiles","filename","YESNO","loadForm","isFloating","buttonId","addTextLabel","removeDocked","apiParams","addDocuments","submit","action","stepEnabledCorpusCreator","corpusParams","storedId","loadCorpusFromParams","optionsWin","langArray","langCodes","defaultType","maxHeight","fieldDefaults","newval","oldval","dtocIndexDocField","applyTemplate","grow","validatePositiveNumbersCsv","numbers","keyword","pubDate","citiesMaxCount","minPopulation","citiesMinFreq","connectionsMaxCount","connectionsMinFreq","millisPerAnimation","annotationsId","overridesId","filterHasLowerCaseForm","filterIsPersonName","preferredCoordinates","overlay","contentEl","isOpenLayersLoaded","isArcLoaded","animationDelay","isProj4Loaded","projection","filterWidgets","drawInteraction","drawMode","baseLayers","annotations","annotationsLoadedIfAvailable","overrides","ol","Map","getLayer","ol.Map.prototype.getLayer","layer","getLayers","lyr","setIsOpenLayersLoaded","setIsArcLoaded","setIsProj4Loaded","setAnnotations","getAnnotations","setAnnotationsLoadedIfAvailable","bodyBorder","getMap","getFilterWidgets","unique","vertical","getBaseLayers","setOpacity","setAt","setProjection","proj","proj4","defs","gallPetersProjection","sphereMollweideProjection","setExtent","newProjExtent","getProjection","getExtent","earthWidth","newView","View","center","getCenter","maxResolution","layers","newGeometry","getGeometry","setGeometry","setView","oldVal","currentCitiesCount","getGeonames","filterUpdate","loadGeonames","getAnimationDelay","setMillisPerAnimation","animate","hasMatch","ownerCt","removeFilterWidget","removeLayer","getDockedComponent","connectionsLayer","Vector","wrapX","useSpatialIndex","opacity","travelStyleFunction","updateWhileAnimating","updateWhileInteracting","addLayer","citiesLayer","cityStyleFunction","animationLayer","animationStyleFunction","tryInit","getIsOpenLayersLoaded","getIsArcLoaded","getIsProj4Loaded","getAnnotationsLoadedIfAvailable","setId","Tile","preload","OSM","TileWMS","crossOrigin","TileArcGISRest","loadTilesWhileInteracting","handleSingleClick","getFeaturesAtPixel","handleLocationClick","foundFeature","geonames","infos","occurrences","occ","sourceCoordinates","targetCoordinates","getContentEl","getOverlay","coordinate","elements","onmouseover","link.onmouseover","showTermInCorpus","selectedLayer","getResolution","previewLayer","preview","getEventPixel","originalEvent","hasFeatureAtPixel","getDrawMode","baseTextStyle","offsetY","Fill","Stroke","textOverlayStyle","Style","Text","selectedFeature","Feature","geometry","forms","coordinates","confidence","cityId","textFeature","geom","Point","layerId","connection","annotationsObj","readFeatures","geojson","GeoJSON","addFeatures","setDrawInteraction","interaction","Draw","freehand","getDrawInteraction","editAnnotation","setMap","enableToggle","toggleHandler","addInteraction","removeInteraction","removeFeature","transformedFeatures","transformedFeature","writeFeatures","storeAnnotations","resolution","styles","end","getLastCoordinate","beforeEnd","getCoordinateAt","atan2","lineStr1","LineString","lineStr2","diameter","confArc","Circle","lineDash","getFirstCoordinate","reloadFilters","clearAnimation","city","layerSource","validCitiesHash","population","lng","lat","description","fit","maxConnectionsCount","arcLine","Arc","arcGenerator","GreatCircle","geometries","featureType","handleConnectionClick","out","currentGeonameId","suppressConnectionOccurrences","locationId","newId","appendOverrides","focusleave","isAll","newConfig","authorLabel","titleLabel","keywordLabel","pubDateLabel","loading","disclaimer","noDataForField","currentConnectionOccurrence","stepByStepMode","keepAnimationInFrame","Geonames","setGeonames","getParams","setMinValue","setMaxValue","suspendEvent","resumeEvent","getAnimationLayer","getCurrentConnectionOccurrence","setCurrentConnectionOccurrence","getGlyph","setGlyph","Glyph","setStepByStepMode","setKeepAnimationInFrame","ownerCmp","totalCitiesCount","currentConnectionsCount","totalConnectionsCount","autoCloseDelay","closable","querysearchfield","pubDateSlider","getTimeout","setAnimationLayer","connectionsFeatures","connectionsLayerSource","getKeepAnimationInFrame","calculateExtent","containsExtent","newExtent","allcoords","getCoordinates","getMillisPerAnimation","getStepByStepMode","lemma","classification","entityType","nerVoyant","nerNssi","nerSpacy","nerServiceHandler","searchEntities","getCharCode","entitiesClicked","ents","entityLocationClicked","ent","entitiesList","expandAll","knots","tokensStore","currentTerm","pDoc","processDocument","getKnots","getTokensStore","termsLimit","termsToKeep","setTokensStore","currTerm","getCurrentTerm","getRefreshInterval","setRefreshInterval","getStartAngle","setStartAngle","getAngleIncrement","setAngleIncrement","setKnots","knotClickHandler","updateRefreshInterval","updateStartAngle","updateAngleIncrement","setCurrentTerm","maxLength","overlapFilter","comparisonCorpus","maxBins","option","pruneRemoved","numberRenderer","eopts","getDocumentTitle","newCorpusError","MODE_EDITING","MODE_NORMAL","dockedItemsItems","overModel","dropPosition","dropHandlers","keepRemoveReorderHandler","btnMode","confirmBtn","editCorpus","require","exportGridAll","cellEditing","clicksToEdit","onEditComplete","getQueryFromStore","setLoading","createNewCorpus","rawData","documentsFinder","typeAhead","Store","autoDestroy","menuDisabled","removeRow","getHeaderByDataIndex","getEditor","updateStatus","updateAggregate","getQueryFromRecord","getCell","exportBtn","go","tbar","specialkey","loadUrl","groups","moveWordsTimeout","angleField","donut","getMoveWordsTimeout","offsetX","moveWords","lcwords","lenVal","setGroups","svgEl","svgDom","getGroups","FountainWord","yshift","jump","groupVals","until","gaugeVals","ys","avg","polar","setSprites","chunkify","setMoveWordsTimeout","balanced","timedOut","maxLinks","nerService","minEdgeCount","entityTypes","baseColor","nFill","hsl","s","nStroke","hFill","hStroke","setGraphStyle","nodeclicked","edgeclicked","categoriesHandler","serviceHandler","allowDecimals","allowExponential","allowOnlyWhitespace","setRawValue","preloadEntities","checkitem","menuitem","entityCollocationsGraph","currMinEdgeCount","newEdgeCount","processEntities","entityParent","visNodes","visEdges","controls","frequenciesGroup","coverageGroup","distributionsGroup","termsGroup","inDocumentsLabel","inDocumentsLabelTip","spanSomeLabel","spanSomeLabelTip","spanAllLabel","spanAllLabelTip","spanOnlyLabel","spanOnlyLabelTip","rawFreqLabel","rawFreqLabelTip","rawFreqPercentileLabel","rawFreqPercentileLabelTip","distributionsStdDevLabel","distributionsStdDevLabelTip","distributionsStdDevPercentileLabel","distributionsStdDevPercentileLabelTip","termsLengthLabel","termsLengthLabelTip","termsLengthPercentileLabel","termsLengthPercentileLabelTip","distributionIncreasesLabel","distributionIncreasesLabelTip","distributionConsecutiveIncreasesLabel","distributionConsecutiveIncreasesLabelTip","distributionDecreasesLabel","distributionDecreasesLabelTip","distributionConsecutiveDecreasesLabel","distributionConsecutiveDecreasesLabelTip","distributionMaxLabel","distributionMaxLabelTip","distributionMinLabel","distributionMinLabelTip","presetsGroup","presetHighFreq","presetHighFreqLonger","presetSingleDoc","presetIncreaseDistributions","presetDecreaseDistributions","presetNearStartDistributions","presetNearEndDistributions","presetSporadicDistributions","visibleTerms","scaleSqrt","inDocuments","spanSome","spanAll","spanOnly","termLength","termsLengthPercentile","rawFreqPercentile","distributionsStdDev","distributionsStdDevPercentile","distributionIncreases","distributionDecreases","distributionConsecutiveIncreases","distributionConsecutiveDecreases","distributionMax","distributionMin","allowFunctions","LoomControl","initControl","setMin","setMax","validateRecord","getLow","getHigh","offsetTipText","low","high","ind","allvals","scaledVals","squareDiffs","avgSquareDiff","stdDev","termsLength","increases","decreases","control","setEnabled","setLow","setHigh","getEnabled","filterRecords","setControls","clearApiParamsForControls","currentParams","tbitems","getByKey","getMax","getGroup","beforerender","getMin","tipText","getOffsetTipText","updateFromControl","threads","thick","fadeIt","filterchange","textHeight","fisheye","circular","distortion","yFisheye","scaleIdentity","mouse","currentItem","fs","fo","yin","xincrement","scaleApi","yscale","valueline","curveCardinal","tooltipbox","tooltiptext","datum","raise","fireEventArgs","updateControlsFromStore","every","keep","getControls","getValidateRecord","revalidate","clearRect","loomTermRecords","LoomTermRecords","getChecked","newvals","isBoolean","some","termRecords","setTermRecords","getTermRecords","LoomTermRecord","texts","setRecord","setTerm","setTexts","columnWidth","getTexts","observable","initControls","maxTokens","tokensPerSegment","maxVerticalLines","maxSegments","initialize","updateSearchResults","setMaxVerticalLines","lineSize","corpusSize","gutter","gutterSize","columnSize","maxSegmentsPerLine","segmentWidth","setMaxSegments","getMaxVerticalLines","setMaxTokens","setTokensPerSegment","getMaxTokens","getMaxSegments","segments","addValue","redistributeDistributions","drawDocumentDistributions","termDistributions","getTokensPerSegment","newdistributions","isBlank","textFont","editMagnet","updateFromQueries","docRadius","isHovering","magnets","updateDocs","diam","updateMagnets","stepValue","newpos","allowEmpty","rad","notMatching","targetX","targetY","weights","needRedraw","noHovering","hoveringTerms","hoveringDocs","halfSize","dy","minDist","spring","ax","ay","uri","itemsMap","tagsMap","isClose","isGroupItems","Corpus","highlightEntities","skipToDocId","innerContainer","documentEntitiesStore","enableEntitiesList","exportVisualization","lastScrollTop","scrollIntoView","insertWhere","lastLocationUpdate","INITIAL_LIMIT","MAX_TOKENS_FOR_NER","parentTool","contents","documentFrequency","isLastNewLine","newContents","isNewLine","updateText","highlightKeywords","getDocumentEntitiesStore","centerPanel","setInnerContainer","getLastScrollTop","scrollTop","fetchPrevious","scrollHeight","fetchNext","amount","getLastLocationUpdate","updateLocationMarker","setLastScrollTop","Token","splitterResize","documentRelativePositionSelected","bufferPosition","corpusTermsClicked","documentTermsClicked","documentsClicked","termLocationClicked","showTermLocation","termRec","clearEntityHighlights","setDocumentEntitiesStore","getEnableEntitiesList","positionIndex","locationInfo","getLocationInfo","block","doScroll","getInnerContainer","applyStyles","caseInsensitiveQuery","compEl","firstChild","nodeValue","entityTypeStr","positionInstances","multiTermEntity","endPos","curPos","curIndex","selectNode","termEntityPosition","prevQTip","scroll","readerContainer","getPrevDoc","scrollContainer","getScrollIntoViewXY","scrollNeeded","scrollLeft","insertSibling","setInsertWhere","setScrollIntoView","last","nextSib","oldNext","doClear","lastOptions","dts","loadingMask","inserted","getInsertWhere","getScrollIntoView","info1","info2","partialFirstDoc","docTokens","showNerButton","getEntitiesEnabled","nerParent","currToken","tokenPosInDoc","readerWords","firstWord","lastWord","fetch","iframe","clusters","perplexity","iterations","comparisonType","storeJson","docSimStore","chartMenu","termsLimitTimeout","ignoreTermsLimitChange","highlightData","highlightTask","tokenFreqTipTemplate","docFreqTipTemplate","maskAndBuildChart","setDocSimStore","setChartMenu","enableToolTips","doLabels","filterChart","collapseMode","getIgnoreTermsLimitChange","getTermsLimitTimeout","setTermsLimitTimeout","doAnalysisChange","dims","getNearbyForTerm","multiSelect","queryField","setNewTerm","allowDeselect","toggleOnClick","isDoc","selectTerm","storeClass","storeData","loadStoreFromJson","oldChart","setCheckBound","setCheckItemFromApi","apiParamName","getDocSimStore","buildChart","numDims","summary","eigenTotal","pcMapping","eigenValue","maxFill","minFill","isTerm","addSorted","z","tokenData","cluster","updateLimit","termSeriesStore","docSeriesStore","interactions","sprites","innerPadding","display","toolTip","clusterIndex","fillAlpha","strokeAlpha","getDefaultDocColor","parentXY","chartItem","getItemForPoint","disableToolTips","getChartMenu","nearby","getNewTerm","termCount","getCurrentTerms","setIgnoreTermsLimitChange","getSurface","getItems","setHighlightItem","getSprites","getItemInstancing","getPointFromIndex","setHighlightData","getHighlightTask","setHighlightTask","TaskManager","newTask","run","doHighlight","interval","repeat","getHighlightData","surfaceMatrix","matrix","prependMatrix","transformPoint","dataX","dataY","surf","setAttributes","reQueries","series0","label0","setAttributesFor","keepCurrentTerms","lambda","minSrc","maxSrc","minDst","maxDst","seriesType","tipsDisabled","showTip","layerData","graphId","graphMargin","setGraphId","Toolbar","JsonStore","isActive","firstElementChild","loadFromRecords","binsMax","resizeGraph","loadFromDocument","legendData","setLayerData","getLayerData","docsCount","processedLayers","y1","curveCatmullRom","xAxisDomain","xAxisScale","scalePoint","paths","xAxisText","yAxisText","stack","stackOffsetWiggle","order","stackOrderInsideOut","getGraphId","readabilityIndex","docsDensityTip","avgWordsPerSentenceTip","readabilityTip","numberOfDocumentsForDistinctiveWords","loadSummary","addListener","available","spark","main","docsLengthTpl","sparkWidth","d1","d2","showSparklineSection","readDoc","dataDoc","sectionIndex","contentsEl","showMoreDistinctiveWords","docDataFunc","headerText","topText","bottomText","valueTip","valTip","distinctiveWordsContainer","Query","addRecords","array","remaining","more","exportDataAsTsv","sections","sp","sectionData","li","minRawFreq","perim","tokensFetch","isReading","availableWidth","availableHeight","setDiam","setPerim","getPerim","drawTerms","drawReading","readingIndex","lastToken","readingStartTime","delta","sourceTerm","targetTerm","previousBeziers","sx","sy","previousTerm","xd","yd","ix","iy","maxTail","drawBezierSplit","nextReadingIndex","startReadingIndex","isCurrentTerm","isReadingTerm","maxRawFreq","termsMap","tokensLoading","fetchMoreTokens","getDiam","fetchMoreDocumentTerms","noMoreTokens","animatePathDrawing","x1","x2","y2","step","timestamp","requestAnimationFrame","t0","t1","quadraticCurveTo","t00","t01","t02","t03","nx0","ny0","nx2","ny2","nx1","lerp","ny1","v0","v1","getPath","twicLevel","TWiC","Level","Instance","LoadJSON","m_queue","await","graphViews","infoViews","topicBar","TopicBar","divName","docBar","DocumentBar","corpusClusterView","CorpusClusterView","m_linkedViews","Initialize","Start","numInitialTerms","scalingFactor","maxCollocateValue","minFillValue","maxFillValue","currentData","blacklist","visInfo","MODE_TOP","MODE_DISTINCT","MIN_TERMS","MAX_TERMS","COLLOCATES_LIMIT","MIN_SCALING","MAX_SCALING","MIN_STROKE_OPACITY","MAX_STROKE_OPACITY","getScalingFactor","setScalingFactor","reload","getCurrentData","getBlacklist","activate","resetVis","resetMinMax","setCurrentData","getDistinctTerms","getTopTerms","processCollocates","buildVisFromData","setMinRawFreq","setMaxRawFreq","setMaxCollocateValue","setMinFillValue","setMaxFillValue","getMaxRawFreq","getMinRawFreq","minFillVal","getMinFillValue","maxFillVal","getMaxFillValue","fillVal","fillValue","collocates","getCollocatesForQuery","whitelist","collocatesWhitelist","maxCol","getMaxCollocateValue","rootId","stratify","parentId","collocateFill","scalePow","exponent","defaultFill","layoutRadius","termRadius","scalingInverse","maxFontSize","textSizer","fillLabel","collocate","setVisInfo","termsRadio","visibleBins","yAxisScale","onLoadHandler","getTermsRadio","corpusStore","documentStore","legendMenu","bool","forId","setSpeed","sliderParam","setTermsRadio","queryTerm","trends","radiogroup","getBoxes","setBoxLabel","chartType","activeCls","docLabels","docLabelsFull","toFixed","kinds","kind","singleDoc","isOneTerm","getItemToolTip","serie","showInLegend","smooth","showMarkers","clickTimer","blockClick","itemdblclick","translateY","moveEvents","itemhighlightchange","titles","labelInSpan","reloadFromChart","firstModel","termKeys","termKey","valueKeys","valueKey","notYetImplemented","oldTools","getNotYetImplemented","yes","getNewUrl","queryString","getVersion","footer","footerWidth","partWidth","getTextWidth","titleCollapse","floatable","hideCollapseTool","onCollapse","titleAlign","home","href","panelsString","tabpanels","getByAlias","tabpanel","cirrus","imageBaseUrl","toolbar","panelChange","introHtml","fieldItems","fieldColumns","intro","foot","handleSendToVoyant","handleExport","bodyStyle","chartRangeMin","performAggregateQuery","getAggregateQuery","statuscontainer","aggregateQueries","ComponentQuery","tableLayout","initTableLayout","initBorderLayoutComponents","doTableSizing","newwidth","newheight","oldwidth","oldheight","layoutString","decodeURI","addBorderLayouts","custom","suspendLayouts","numCols","cellWidth","cellHeight","colspan","rowspan","tableAttrs","tdAttrs","verticalAlign","resumeLayouts","widthRatio","heightRatio","sizeMap","tableSize","cellEl","panelEl","cmpId","sizeObj","getCmp","widthPercent","heightPercent","setSize","script","previous","fieldStyle","veliza","resetOriginalValue","handleUserSentence","tf","addSentence","sendApiParamMessage","sentences","sentence","fromCorpus","noScroll","setPrevious","meta","speaker","kwicStore","numBranches","lastClick","doubleClickDelay","getNumBranches","setNumBranches","setKwicStore","parseRecords","firstTerm","setRoot","getTree","parsedRecords","pr","prefix","prefixTokenCounts","suffixTokenCounts","prefixToken","suffixToken","sortableTokens","suffixCount","prefixCount","s1","s2","topSuffixTokens","topPrefixTokens","prefixes","suffixes","parsedRecord","dt","setTree","getLastClick","setLastClick","stripPunctuation","getKwicStore","tempNodes","filterOutUniqueTerms","currentSegment","segmentTerms","segmentTermsQueue","segmentDelay","segmentDelayTimer","webWorker","isSimulating","transitionTime","letterDistribution","frequencyScale","xForceStrength","yForceStrength","chargeStrength","chargeDistance","debugMsg","getSegmentDelay","setSegmentDelay","restartSegmentTimer","getTransitionTime","setTransitionTime","getXForceStrength","setXForceStrength","getYForceStrength","setYForceStrength","getChargeStrength","setChargeStrength","getChargeDistance","setChargeDistance","getSegmentDelayTimer","initVis","setTempNodes","getWebWorker","setWebWorker","Worker","onmessage","handleWebWorkerMessage","setSegments","corpusSegmentTerms","getFilterOutUniqueTerms","rawFreqs","setCurrentSegment","getSegments","getNextSegment","setSegmentDelayTimer","updateNodePositions","getCurrentSegment","processTermsForSegment","segmentIndex","letterDistMap","u","firstLetter","setSegmentTerms","setMinFreq","letterDist","setLetterDistribution","calculateNodeSizes","getSegmentTerms","runSimulation","getTempNodes","fontSizer","getFrequencyScale","getMaxFontSize","bboxTotal","availableSpace","setMaxFontSize","setIsSimulating","postMessage","getMinFreq","getMaxFreq","getLetterDistribution","timeEnd","getSegmentTermsQueue","getIsTransitioning","getIsSimulating","setIsTransitioning","updateMinFreq","setFrequencyScale","updateMaxFreq","topics","topicWeight","termsPerTopic","seed","currentTopics","currentDocument","getColorForTopic","processDiagnostics","setCurrentDocument","setCurrentTopics","getDocTitle","getChart","topicStore","getCurrentDocument","getCurrentTopics","beginUpdate","endUpdate","onQuery","buffer","runIterations","toggleCls","topicsStore","topicModeling","topic","diagnostics","topicDocuments","docIndexA","docIndexB","topicIndex","topicsView","classList","matcher","indexes","termMatches","setSelection","nodeMatches","querySelectorAll","termIndex","topicsValue","docsValue","topicOrder","includeDiagnostics","relatedWords","timedout","addTip","addText","addCode","addData","arrowVisible","menuAlign","EditorWrapper","currentEditor","redoOrder","modeCode","modeJavascript","modeData","modeFile","modeJson","modeText","modeTable","modeXml","modeHtml","configWin","initWindow","buttonInstance","CodeConfig","showConfigWindow","codeEditorInstance","setIsEdited","switchModes","codeMode","exportTitle","exportOpen","exportDownload","exportCorpus","cancelTitle","exportWin","getExportWindow","instance","wrapper","SandboxWrapper","currentResults","outputPromise","cachedInput","getBlob","updateCachedOutput","getOutput","notebookId","getNotebookId","output","getInput","corpusButton","openButton","fileName","fileType","fileContent","Spyral","Util","hasOwnProperty","corpusid","getBaseUrlFull","open","isUndefined","getContent","getCellId","isNode","serializeToString","XMLSerializer","getDataName","file","File","lastModified","myWindow","write","URL","createObjectURL","download","Export","exportMenuItem","toolbarLeft","isCollapsed","setCollapsed","_doExpandCollapse","setTooltip","setOrder","updateHtml","getOrder","hideToolbars","QUESTION","hideToolbar","_run","runUntil","runUntilTip","runFrom","runFromTip","viewWarnings","generalWarning","serializationWarning","loadVariableWarning","componentCls","warnings","getWarnings","applyWarnings","warningsArray","warningsContent","warning","warningInfo","cellId","content","isEditing","toolbarRight","showToolbars","preventRefocus","iconCls","float","getIsCollapsed","expandCollapseBtn","setName","doHide","relatedTarget","isAncestor","setCellId","mon","showToolbar","applyIsEditing","isRun","priorVariables","getIsInitialized","getNotebookVariables","clearMarkers","setIsRun","runPromise","otherwise","eventData","addMarker","addLineMarker","getVariables","getHasRunError","getCachedResultsValue","_reduceDataViewerOutput","parseFromString","DOMParser","trimContent","toRemove","wasTrimmed","insertAdjacentHTML","setIsCollapsed","expandResults","getExpandResults","createToolbar","borderTop","paddingTop","sandboxWrapper","isExpanded","setWarnings","isInitialized","cachedPaddingHeight","cachedResultsHeight","cachedResultsValue","cachedResultsOutput","cachedResultsVariables","hasRunError","initIntervalID","maskTimeoutId","emptyResultsHeight","minimumResultsHeight","sandboxSrcUrl","getEmptyResultsHeight","handleResultsScoped","_handleResults","setInitIntervalID","_sendMessage","command","removeEventListener","resetResults","setCachedResultsValue","setCachedResultsOutput","setCachedResultsVariables","setHasRunError","setRunPromise","actualPromise","getRunPromise","variables","maskMsg","setMaskTimeoutId","getMaskTimeoutId","updateValue","getCachedResultsOutput","getCachedResultsVariables","applyCachedResultsVariables","newVars","oldVars","parentNotebook","updateTernServerVariables","getResultsEl","messageObj","getWin","getFrame","contentWindow","setIsInitialized","getInitIntervalID","_setHeight","expandButton","setExpandResults","getCachedPaddingHeight","computedStyle","getComputedStyle","setCachedPaddingHeight","getPropertyValue","setCachedResultsHeight","getCachedResultsHeight","resultsEl","expandWidget","getMinimumResultsHeight","isChangeRegistered","editedTimeout","editorHeight","editorDocHeight","markers","parentWrapper","ternServer","MIN_LINES","editorTarget","getDom","CodeMirror","_getModeConfig","lineNumbers","lineWrapping","styleActiveLine","viewportMargin","extraKeys","Shift-Enter","Shift-Ctrl-Enter","Shift-Cmd-Enter","Ctrl-/","toggleComment","Cmd-/","ev","getParentWrapper","setIsEditing","getWrapperElement","getDoc","getEditorHeight","getEditorDocHeight","setEditorHeight","setEditorDocHeight","getIsChangeRegistered","setIsChangeRegistered","getEditedTimeout","setEditedTimeout","CodeEditor","getDocs","TernServer","useWorker","workerScript","workerDeps","hintDelay","getCursor","ch","toolNameCheck","toolName","toolEntry","toolTernDocs","showCorpusToolParamsHint","corpusToolFnCheck","toolDescs","showCorpusToolsHint","getOption","Ctrl-Space","Ctrl-D","showDocs","_showDocsCallback","Cmd-Space","Cmd-D","updateArgHints","setEditor","_setModeOptions","removed","getHintForTool","cm","modeConfig","autoCloseBrackets","matchBrackets","setOption","markText","getMarkers","addLineClass","where","removeLineClass","setMarkers","docLink","ternTooltip","docHref","handleDocLink","defaultTextHeight","editorWrapperEl","setProperty","getScrollerElement","removeProperty","blur","hideResults","Load","notebookWrapperRemove","isEditRegistered","currentHeight","isFresh","_handleClick","focusManager","_initEditor","getIsEditing","_enable","CKEDITOR","inline","extraPlugins","allowedContent","disableNativeSpellChecker","toolbarCanCollapse","startupFocus","baseFloatZIndex","attachListener","getIsFresh","setIsFresh","_disable","getCurrentHeight","setCurrentHeight","getIsEditRegistered","setIsEditRegistered","setReadOnly","getCode","varName","dataUrl","fileUpload","buttonLabel","deleteMsg","serverStorage","inputEl","setFile","setFileName","setDataUrl","setResourceId","ServerStorage","getDataUrl","getResourceId","getFileName","loadStoredFile","getFile","storeFile","blob","dataUrlToBlob","blobToDataUrl","onFileChange","corpusInput","corpusText","corpusVariable","corpusFile","notebookVariables","corpusCreator","rg","setActiveItem","setType","setCorpusId","crd","populateVariables","formField","corpusVarName","corpusVal","variable","blobToString","strVal","corpusJson","vr","resetCombo","currValue","getRawValue","activeItem","getActiveItem","apiParamsStr","inputVarName","replaceAll","binary","Blob","responseBytes","tableInput","tableText","tableVariable","tableFile","setTable","Table","tableVarName","tableVal","prop","updateTable","prevTableEditor","fieldDef","firstRowVal","handles","pinned","pluginId","numRecords","getPlugin","startEditByPosition","getRowsFromTable","tableEditor","getModel","generated","getTSV","tableTsv","getTable","getArray","tableArray","dataNameAlphanum","dataNameAlphastart","dataName","hasCachedInput","setDataName","validate","_getCode","dataNameField","markInvalid","getErrors","octokit","Octokit","auth","authToken","userAgent","getInfoForAuthenticatedUser","users","getAuthenticated","getReposForAuthenticatedUser","affiliation","page","per_page","repos","listForAuthenticatedUser","getReposForUser","searchWithinRepositories","getRepoContents","repoId","parseFullName","getBranchSHAs","repo","resp","getTreeContentsRecursively","git","tree_sha","baseTreeSHA","recursive","unflattenContents","truncated","loadFile","getContents","ref","sha","atob","doesRepoExist","getPermissionsForUser","username","getCollaboratorPermissionLevel","permission","saveFile","getLatestFileSHA","createOrUpdateFile","fullName","getBranch","commit","parentCommitSHA","catch","oid","flatContents","findSubFolder","parentFolder","folderNameToFind","subfolder","pathSections","pathSection","pathSectionIndex","subFolder","newFile","newSubFolder","repoType","selectedNode","newValues","setRepoType","clearTree","getRepoType","addReposToTree","repoOwner","afteritemexpand","hasChildNodes","addRepoContentsToNode","setSelectedNode","updateSelectedNode","repoParent","setRepoId","setPath","repoTree","getRootNode","rawRepos","full_name","octokitResponse","parseContents","nodeConfig","currentFile","saveData","setCurrentFile","nodeSelected","getRepoId","pathComponents","getPathComponents","folder","nodeDeselected","validitychange","valid","initForm","login","setUsername","getCurrentFile","doSave","isPR","repoExists","fileData","setStatus","getUsername","octokitWrapper","currentWindow","showLoad","isAuthenticated","initOctokitWrapper","githubAuthToken","loadWin","maximizable","repoBrowser","showGitHubAuthentication","showSave","saveWin","formValidityChange","fileSaved","github","OctokitWrapper","loadFileFromId","filePath","saveNewNotebook","overwriteNotebook","notebookFile","selectFile","openFile","mustSelect","notebookParent","notebookName","newNotebook","beforeshowtip","currentTarget","inputAttrTpl","readOnly","doesNotebookExist","accountInfo","findField","accept","FileReader","fr.onload","readAsText","userId","trombone","NOTEBOOK_ID_SEPARATOR","totalData","metadataAuthor","metadataTitle","metadataTip","metadataKeywords","metadataDescription","metadataLicense","metadataLanguage","metadataCatalogue","metadataCatalogueInclude","trackResetOnLoad","delimiter","loadMetadata","Metadata","loadRecord","license","importFromHtml","parser","setMetadata","hasDomError","cells2Init","section","classes","editorType","typeRe","matchClass","secPos","startPre","endPre","innerText","codeCell","cellIndex","dataCell","getInnerHeaderHtml","getMetadata","getInnerFooterHtml","created","modified","shortDate","generateExportHtml","codeTextLayer","_getHeightAwareExpandedResults","generateExportMetadata","keywordsArray","generateExportJson","resultsHeight","properties","overview","globals","configs","methods","openFull","splitView","outlineIntro","outlineApi","loadingDocs","lastEntry","lastMember","inlineDocsUrl","fullDocsUrl","loadDocsEntry","_showDocEntry","openFullDocumentation","rel","_populateNavMenu","_setHtmlForCard","scrollTo","_processDocEntry","isNamespace","isToolsEntry","docsParentEl","h4","methodsBtn","methodsMenu","configsBtn","configsMenu","entryClass","entryMember","entryEl","entryParent","closest","nextElementSibling","cardId","cardEl","selectable","menuId","dl","menuItems","browse","noResults","suggested","new","gettingFacets","suggestedNotebookIds","showWindow","getTriggers","getNotebooks","hideWindow","multi","but","_loadFacets","getSuggestedNotebooks","_getSelectedFacets","facetQuery","facetResult","queryfieldstring","notebooks","account","signInWithGithub","signInWithGoogle","logout","yourNotebooks","authenticateWithGithub","authorizeSpyralGithub","signInSuccess","openSelected","deleteSelected","deleteConfirm","deleting","notebookDeleted","errorDeletingNotebook","getGitHubAuthButton","postMessageHandler","origin","retrieveAccountInfo","getGoogleAuthButton","google","accounts","client_id","ux_mode","login_uri","renderButton","theme","showAccountWindow","idInfo","idType","accountWin","avatar","notebooksList","deleteNotebook","populateNotebookList","getCookie","cookieName","sMatch","cookie","deleteCookie","cookiePath","saving","saved","clickToEdit","errorLoadingNotebook","cannotLoadJson","cannotLoadJsonUnrecognized","cannotLoadUnrecognized","cannotLoadNotebookId","openTitle","openMsg","exportHtmlDownload","errorParsingDomInput","metadataEditor","metadataReset","metadataSave","metadataCancel","catalogueTip","preparingExport","notSavedWarning","accountTip","openTip","newNotebookIntro","inputEncodedBase64Json","isEdited","version","storageSolution","SPYRAL_ID_REGEX","SPYRAL_ID_REGEX_OLD","metadataWindow","voyantStorageDialogs","githubDialogs","catalogueWindow","docsPanel","spyralTernDocs","ecmaTernDocs","browserTernDocs","handleSignIn","isAuth","showSaveDialog","getStorageSolution","runAll","showMetadataEditor","notebookWrapperMoveUp","notebookWrapperMoveDown","notebookWrapperAdd","notebookInitialized","notebookSelected","handleNotebookSelected","StorageDialogs","fileLoaded","checkIsEditedAndDoCallback","loadFromString","fileSaving","setNotebookId","saveCancelled","GitHubDialogs","Catalogue","onbeforeunload","getIsEdited","responses","loadFromQueryParams","getScrollable","trackingScrollTop","trackingScrollLeft","saveAs","setDateNow","getNotebookName","doRun","isDefined","spyralIdMatches","pathname","spyralIdMatchesOld","isGithub","githubId","inputJsonArrayOfEncodedBase64","loadFromId","setStorageSolution","addNew","loadFromJson","batchLayouts","cell2Init","upToCmp","fromCmp","matched","prevVars","newVar","prevVar","varsToAdd","varsToRemove","theVar","server","delFile","isSpyralClass","addFile","blobStr","getIsRun","getNotebookBlocks","blocks","_add","findIndex","WARNING","runnable","getXTypes","hasModifier","setIndex","applyIsEdited","applyNotebookId","isConfiguring","setNotebookName","applyMetadata","updateMetadata","tromboneUrl","setBaseUrl","setTromboneUrl","setCategoriesManager","Categories","_getColor","this.getColor","_getColorForTerm","this.getColorForTerm","catColor","protocol","getRelativeUrl","relative","launch","getQuickTip","showDelay","tromboneCall","eventName","viewport","isHeard","hasListener","ResponseError","Operation","toolFlow","moreVizTools","entitiesEnabled","hasQueryToLoad","useCache","corpuscreator","beforeclose","archive","validateCorpusLoadParams","validateCorpusAccess","passWin","password","passwordForSession","access","setCorpusAccess","passwordForSessionRemove","docIndObj","applyAllowInput","applyAllowDownload","serverMessage","rtl","showServerMessage","noskin","additional","getCorpusCreatorText","getShowServerMessage","getServerMessage","fetchData","makeHtml","converter","showdown","Converter","cleanHtml","DOMPurify","sanitize","minimal","embeddedApiId","getTool","configString","Show","TARGET"]
}
