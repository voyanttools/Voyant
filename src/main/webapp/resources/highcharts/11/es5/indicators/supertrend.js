!/**
 * Highstock JS v11.4.8 (2024-08-29)
 *
 * Indicator series type for Highcharts Stock
 *
 * (c) 2010-2024 Wojciech Chmiel
 *
 * License: www.highcharts.com/license
 */function(o){"object"==typeof module&&module.exports?(o.default=o,module.exports=o):"function"==typeof define&&define.amd?define("highcharts/indicators/supertrend",["highcharts","highcharts/modules/stock"],function(t){return o(t),o.Highcharts=t,o}):o("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(o){"use strict";var t=o?o._modules:{};function e(t,e,r,n){t.hasOwnProperty(e)||(t[e]=n.apply(null,r),"function"==typeof CustomEvent&&o.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Stock/Indicators/Supertrend/SupertrendIndicator.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(o,t){var e,r=this&&this.__extends||(e=function(o,t){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])})(o,t)},function(o,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=o}e(o,t),o.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),n=o.seriesTypes,i=n.atr,l=n.sma,s=t.addEvent,a=t.correctFloat,p=t.isArray,c=t.extend,d=t.merge,u=t.objectEach;function h(o,t,e){return{index:t,close:o.yData[t][e],x:o.xData[t]}}var y=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return r(t,o),t.prototype.init=function(){var t=this;o.prototype.init.apply(t,arguments);var e=s(this.chart.constructor,"afterLinkSeries",function(){if(t.options){var o=t.options,r=t.linkedParent.options;o.cropThreshold=r.cropThreshold-(o.params.period-1)}e()},{order:1})},t.prototype.drawGraph=function(){for(var o,t,e,r,n,i,s,a,p,c=this,y=c.options,f=c.linkedParent,g=f?f.points:[],x=c.points,m=c.graph,C=g.length-x.length,T=C>0?C:0,v={options:{gapSize:y.gapSize}},S={top:[],bottom:[],intersect:[]},D={top:{styles:{lineWidth:y.lineWidth,lineColor:y.fallingTrendColor||y.color,dashStyle:y.dashStyle}},bottom:{styles:{lineWidth:y.lineWidth,lineColor:y.risingTrendColor||y.color,dashStyle:y.dashStyle}},intersect:y.changeTrendLine},b=x.length;b--;)o=x[b],t=x[b-1],e=g[b-1+T],r=g[b-2+T],n=g[b+T],i=g[b+T+1],s=o.options.color,a={x:o.x,plotX:o.plotX,plotY:o.plotY,isNull:!1},!r&&e&&f.yData[e.index-1]&&(r=h(f,e.index-1,3)),!i&&n&&f.yData[n.index+1]&&(i=h(f,n.index+1,3)),!e&&r&&f.yData[r.index+1]?e=h(f,r.index+1,3):!e&&n&&f.yData[n.index-1]&&(e=h(f,n.index-1,3)),o&&e&&n&&r&&o.x!==e.x&&(o.x===n.x?(r=e,e=n):o.x===r.x?(e=r,r={close:f.yData[e.index-1][3],x:f.xData[e.index-1]}):i&&o.x===i.x&&(e=i,r=n)),t&&r&&e?(p={x:t.x,plotX:t.plotX,plotY:t.plotY,isNull:!1},o.y>=e.close&&t.y>=r.close?(o.color=s||y.fallingTrendColor||y.color,S.top.push(a)):o.y<e.close&&t.y<r.close?(o.color=s||y.risingTrendColor||y.color,S.bottom.push(a)):(S.intersect.push(a),S.intersect.push(p),S.intersect.push(d(p,{isNull:!0})),o.y>=e.close&&t.y<r.close?(o.color=s||y.fallingTrendColor||y.color,t.color=s||y.risingTrendColor||y.color,S.top.push(a),S.top.push(d(p,{isNull:!0}))):o.y<e.close&&t.y>=r.close&&(o.color=s||y.risingTrendColor||y.color,t.color=s||y.fallingTrendColor||y.color,S.bottom.push(a),S.bottom.push(d(p,{isNull:!0}))))):e&&(o.y>=e.close?(o.color=s||y.fallingTrendColor||y.color,S.top.push(a)):(o.color=s||y.risingTrendColor||y.color,S.bottom.push(a)));u(S,function(o,t){c.points=o,c.options=d(D[t].styles,v),c.graph=c["graph"+t+"Line"],l.prototype.drawGraph.call(c),c["graph"+t+"Line"]=c.graph}),c.points=x,c.options=y,c.graph=m},t.prototype.getValues=function(o,t){var e,r,n,l,s,c,d,u,h,y=t.period,f=t.multiplier,g=o.xData,x=o.yData,m=[],C=[],T=[],v=0===y?0:y-1,S=[],D=[],b=[];if(!(g.length<=y)&&p(x[0])&&4===x[0].length&&!(y<0)){for(h=0,b=i.prototype.getValues.call(this,o,{period:y}).yData;h<b.length;h++)u=x[v+h],d=x[v+h-1]||[],l=S[h-1],s=D[h-1],c=T[h-1],0===h&&(l=s=c=0),e=a((u[1]+u[2])/2+f*b[h]),r=a((u[1]+u[2])/2-f*b[h]),e<l||d[3]>l?S[h]=e:S[h]=l,r>s||d[3]<s?D[h]=r:D[h]=s,c===l&&u[3]<S[h]||c===s&&u[3]<D[h]?n=S[h]:(c===l&&u[3]>S[h]||c===s&&u[3]>D[h])&&(n=D[h]),m.push([g[v+h],n]),C.push(g[v+h]),T.push(n);return{values:m,xData:C,yData:T}}},t.defaultOptions=d(l.defaultOptions,{params:{index:void 0,multiplier:3,period:10},risingTrendColor:"#06b535",fallingTrendColor:"#f21313",changeTrendLine:{styles:{lineWidth:1,lineColor:"#333333",dashStyle:"LongDash"}}}),t}(l);return c(y.prototype,{nameBase:"Supertrend",nameComponents:["multiplier","period"]}),o.registerSeriesType("supertrend",y),y}),e(t,"masters/indicators/supertrend.src.js",[t["Core/Globals.js"]],function(o){return o})});