{"version":3,"sources":["<anon>"],"sourcesContent":["/**\n * @license Highcharts JS v11.4.8 (2024-08-29)\n *\n * Sankey diagram module\n *\n * (c) 2010-2024 Torstein Honsi\n *\n * License: www.highcharts.com/license\n */\n(function (factory) {\n    if (typeof module === 'object' && module.exports) {\n        factory['default'] = factory;\n        module.exports = factory;\n    } else if (typeof define === 'function' && define.amd) {\n        define('highcharts/modules/sankey', ['highcharts'], function (Highcharts) {\n            factory(Highcharts);\n            factory.Highcharts = Highcharts;\n            return factory;\n        });\n    } else {\n        factory(typeof Highcharts !== 'undefined' ? Highcharts : undefined);\n    }\n}(function (Highcharts) {\n    'use strict';\n    var _modules = Highcharts ? Highcharts._modules : {};\n    function _registerModule(obj, path, args, fn) {\n        if (!obj.hasOwnProperty(path)) {\n            obj[path] = fn.apply(null, args);\n\n            if (typeof CustomEvent === 'function') {\n                Highcharts.win.dispatchEvent(new CustomEvent(\n                    'HighchartsModuleLoaded',\n                    { detail: { path: path, module: obj[path] } }\n                ));\n            }\n        }\n    }\n    _registerModule(_modules, 'Series/NodesComposition.js', [_modules['Core/Series/SeriesRegistry.js'], _modules['Core/Utilities.js']], function (SeriesRegistry, U) {\n        /* *\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        var _a = SeriesRegistry.series, seriesProto = _a.prototype, pointProto = _a.prototype.pointClass.prototype;\n        var defined = U.defined, extend = U.extend, find = U.find, merge = U.merge, pick = U.pick;\n        /* *\n         *\n         *  Composition\n         *\n         * */\n        var NodesComposition;\n        (function (NodesComposition) {\n            /* *\n             *\n             *  Declarations\n             *\n             * */\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * @private\n             */\n            function compose(PointClass, SeriesClass) {\n                var pointProto = PointClass.prototype, seriesProto = SeriesClass.prototype;\n                pointProto.setNodeState = setNodeState;\n                pointProto.setState = setNodeState;\n                pointProto.update = updateNode;\n                seriesProto.destroy = destroy;\n                seriesProto.setData = setData;\n                return SeriesClass;\n            }\n            NodesComposition.compose = compose;\n            /**\n             * Create a single node that holds information on incoming and outgoing\n             * links.\n             * @private\n             */\n            function createNode(id) {\n                var PointClass = this.pointClass, findById = function (nodes, id) { return find(nodes, function (node) { return node.id === id; }); };\n                var node = findById(this.nodes, id), options;\n                if (!node) {\n                    options = this.options.nodes && findById(this.options.nodes, id);\n                    var newNode_1 = new PointClass(this, extend({\n                        className: 'highcharts-node',\n                        isNode: true,\n                        id: id,\n                        y: 1 // Pass isNull test\n                    }, options));\n                    newNode_1.linksTo = [];\n                    newNode_1.linksFrom = [];\n                    /**\n                     * Return the largest sum of either the incoming or outgoing links.\n                     * @private\n                     */\n                    newNode_1.getSum = function () {\n                        var sumTo = 0, sumFrom = 0;\n                        newNode_1.linksTo.forEach(function (link) {\n                            sumTo += link.weight || 0;\n                        });\n                        newNode_1.linksFrom.forEach(function (link) {\n                            sumFrom += link.weight || 0;\n                        });\n                        return Math.max(sumTo, sumFrom);\n                    };\n                    /**\n                     * Get the offset in weight values of a point/link.\n                     * @private\n                     */\n                    newNode_1.offset = function (point, coll) {\n                        var offset = 0;\n                        for (var i = 0; i < newNode_1[coll].length; i++) {\n                            if (newNode_1[coll][i] === point) {\n                                return offset;\n                            }\n                            offset += newNode_1[coll][i].weight;\n                        }\n                    };\n                    // Return true if the node has a shape, otherwise all links are\n                    // outgoing.\n                    newNode_1.hasShape = function () {\n                        var outgoing = 0;\n                        newNode_1.linksTo.forEach(function (link) {\n                            if (link.outgoing) {\n                                outgoing++;\n                            }\n                        });\n                        return (!newNode_1.linksTo.length ||\n                            outgoing !== newNode_1.linksTo.length);\n                    };\n                    newNode_1.index = this.nodes.push(newNode_1) - 1;\n                    node = newNode_1;\n                }\n                node.formatPrefix = 'node';\n                // For use in formats\n                node.name = node.name || node.options.id || '';\n                // Mass is used in networkgraph:\n                node.mass = pick(\n                // Node:\n                node.options.mass, node.options.marker && node.options.marker.radius, \n                // Series:\n                this.options.marker && this.options.marker.radius, \n                // Default:\n                4);\n                return node;\n            }\n            NodesComposition.createNode = createNode;\n            /**\n             * Destroy all nodes and links.\n             * @private\n             */\n            function destroy() {\n                // Nodes must also be destroyed (#8682, #9300)\n                this.data = []\n                    .concat(this.points || [], this.nodes);\n                return seriesProto.destroy.apply(this, arguments);\n            }\n            NodesComposition.destroy = destroy;\n            /**\n             * Extend generatePoints by adding the nodes, which are Point objects but\n             * pushed to the this.nodes array.\n             * @private\n             */\n            function generatePoints() {\n                var _this = this;\n                var chart = this.chart, nodeLookup = {};\n                seriesProto.generatePoints.call(this);\n                if (!this.nodes) {\n                    this.nodes = []; // List of Point-like node items\n                }\n                this.colorCounter = 0;\n                // Reset links from previous run\n                this.nodes.forEach(function (node) {\n                    node.linksFrom.length = 0;\n                    node.linksTo.length = 0;\n                    node.level = node.options.level;\n                });\n                // Create the node list and set up links\n                this.points.forEach(function (point) {\n                    if (defined(point.from)) {\n                        if (!nodeLookup[point.from]) {\n                            nodeLookup[point.from] = _this.createNode(point.from);\n                        }\n                        nodeLookup[point.from].linksFrom.push(point);\n                        point.fromNode = nodeLookup[point.from];\n                        // Point color defaults to the fromNode's color\n                        if (chart.styledMode) {\n                            point.colorIndex = pick(point.options.colorIndex, nodeLookup[point.from].colorIndex);\n                        }\n                        else {\n                            point.color =\n                                point.options.color || nodeLookup[point.from].color;\n                        }\n                    }\n                    if (defined(point.to)) {\n                        if (!nodeLookup[point.to]) {\n                            nodeLookup[point.to] = _this.createNode(point.to);\n                        }\n                        nodeLookup[point.to].linksTo.push(point);\n                        point.toNode = nodeLookup[point.to];\n                    }\n                    point.name = point.name || point.id; // For use in formats\n                }, this);\n                // Store lookup table for later use\n                this.nodeLookup = nodeLookup;\n            }\n            NodesComposition.generatePoints = generatePoints;\n            /**\n             * Destroy all nodes on setting new data\n             * @private\n             */\n            function setData() {\n                if (this.nodes) {\n                    this.nodes.forEach(function (node) {\n                        node.destroy();\n                    });\n                    this.nodes.length = 0;\n                }\n                seriesProto.setData.apply(this, arguments);\n            }\n            /**\n             * When hovering node, highlight all connected links. When hovering a link,\n             * highlight all connected nodes.\n             * @private\n             */\n            function setNodeState(state) {\n                var args = arguments, others = this.isNode ? this.linksTo.concat(this.linksFrom) :\n                    [this.fromNode, this.toNode];\n                if (state !== 'select') {\n                    others.forEach(function (linkOrNode) {\n                        if (linkOrNode && linkOrNode.series) {\n                            pointProto.setState.apply(linkOrNode, args);\n                            if (!linkOrNode.isNode) {\n                                if (linkOrNode.fromNode.graphic) {\n                                    pointProto.setState.apply(linkOrNode.fromNode, args);\n                                }\n                                if (linkOrNode.toNode && linkOrNode.toNode.graphic) {\n                                    pointProto.setState.apply(linkOrNode.toNode, args);\n                                }\n                            }\n                        }\n                    });\n                }\n                pointProto.setState.apply(this, args);\n            }\n            NodesComposition.setNodeState = setNodeState;\n            /**\n             * When updating a node, don't update `series.options.data`, but\n             * `series.options.nodes`\n             * @private\n             */\n            function updateNode(options, redraw, animation, runEvent) {\n                var _this = this;\n                var nodes = this.series.options.nodes, data = this.series.options.data, dataLength = data && data.length || 0, linkConfig = data && data[this.index];\n                pointProto.update.call(this, options, this.isNode ? false : redraw, // Hold the redraw for nodes\n                animation, runEvent);\n                if (this.isNode) {\n                    // `this.index` refers to `series.nodes`, not `options.nodes` array\n                    var nodeIndex = (nodes || [])\n                        .reduce(// Array.findIndex needs a polyfill\n                    function (prevIndex, n, index) {\n                        return (_this.id === n.id ? index : prevIndex);\n                    }, -1), \n                    // Merge old config with new config. New config is stored in\n                    // options.data, because of default logic in point.update()\n                    nodeConfig = merge(nodes && nodes[nodeIndex] || {}, data && data[this.index] || {});\n                    // Restore link config\n                    if (data) {\n                        if (linkConfig) {\n                            data[this.index] = linkConfig;\n                        }\n                        else {\n                            // Remove node from config if there's more nodes than links\n                            data.length = dataLength;\n                        }\n                    }\n                    // Set node config\n                    if (nodes) {\n                        if (nodeIndex >= 0) {\n                            nodes[nodeIndex] = nodeConfig;\n                        }\n                        else {\n                            nodes.push(nodeConfig);\n                        }\n                    }\n                    else {\n                        this.series.options.nodes = [nodeConfig];\n                    }\n                    if (pick(redraw, true)) {\n                        this.series.chart.redraw(animation);\n                    }\n                }\n            }\n            NodesComposition.updateNode = updateNode;\n        })(NodesComposition || (NodesComposition = {}));\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return NodesComposition;\n    });\n    _registerModule(_modules, 'Series/Sankey/SankeyPoint.js', [_modules['Core/Series/Point.js'], _modules['Core/Series/SeriesRegistry.js'], _modules['Core/Utilities.js']], function (Point, SeriesRegistry, U) {\n        /* *\n         *\n         *  Sankey diagram module\n         *\n         *  (c) 2010-2024 Torstein Honsi\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        var __extends = (this && this.__extends) || (function () {\n            var extendStatics = function (d, b) {\n                extendStatics = Object.setPrototypeOf ||\n                    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n                    function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n                return extendStatics(d, b);\n            };\n            return function (d, b) {\n                if (typeof b !== \"function\" && b !== null)\n                    throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n                extendStatics(d, b);\n                function __() { this.constructor = d; }\n                d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n            };\n        })();\n        var ColumnSeries = SeriesRegistry.seriesTypes.column;\n        var defined = U.defined;\n        /* *\n         *\n         *  Class\n         *\n         * */\n        var SankeyPoint = /** @class */ (function (_super) {\n            __extends(SankeyPoint, _super);\n            function SankeyPoint() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * @private\n             */\n            SankeyPoint.prototype.applyOptions = function (options, x) {\n                Point.prototype.applyOptions.call(this, options, x);\n                // Treat point.level as a synonym of point.column\n                if (defined(this.options.level)) {\n                    this.options.column = this.column = this.options.level;\n                }\n                return this;\n            };\n            /**\n             * @private\n             */\n            SankeyPoint.prototype.getClassName = function () {\n                return (this.isNode ? 'highcharts-node ' : 'highcharts-link ') +\n                    Point.prototype.getClassName.call(this);\n            };\n            /**\n             * If there are incoming links, place it to the right of the\n             * highest order column that links to this one.\n             *\n             * @private\n             */\n            SankeyPoint.prototype.getFromNode = function () {\n                var node = this;\n                var fromColumn = -1, fromNode;\n                for (var i = 0; i < node.linksTo.length; i++) {\n                    var point = node.linksTo[i];\n                    if (point.fromNode.column > fromColumn &&\n                        point.fromNode !== node // #16080\n                    ) {\n                        fromNode = point.fromNode;\n                        fromColumn = fromNode.column;\n                    }\n                }\n                return { fromNode: fromNode, fromColumn: fromColumn };\n            };\n            /**\n             * Calculate node.column if it's not set by user\n             * @private\n             */\n            SankeyPoint.prototype.setNodeColumn = function () {\n                var node = this;\n                if (!defined(node.options.column)) {\n                    // No links to this node, place it left\n                    if (node.linksTo.length === 0) {\n                        node.column = 0;\n                    }\n                    else {\n                        node.column = node.getFromNode().fromColumn + 1;\n                    }\n                }\n            };\n            /**\n             * @private\n             */\n            SankeyPoint.prototype.isValid = function () {\n                return this.isNode || typeof this.weight === 'number';\n            };\n            return SankeyPoint;\n        }(ColumnSeries.prototype.pointClass));\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return SankeyPoint;\n    });\n    _registerModule(_modules, 'Series/Sankey/SankeySeriesDefaults.js', [], function () {\n        /* *\n         *\n         *  Sankey diagram module\n         *\n         *  (c) 2010-2024 Torstein Honsi\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        /* *\n         *\n         *  API Options\n         *\n         * */\n        /**\n         * A sankey diagram is a type of flow diagram, in which the width of the\n         * link between two nodes is shown proportionally to the flow quantity.\n         *\n         * @sample highcharts/demo/sankey-diagram/\n         *         Sankey diagram\n         * @sample highcharts/plotoptions/sankey-inverted/\n         *         Inverted sankey diagram\n         * @sample highcharts/plotoptions/sankey-outgoing\n         *         Sankey diagram with outgoing links\n         *\n         * @extends      plotOptions.column\n         * @since        6.0.0\n         * @product      highcharts\n         * @excluding    animationLimit, boostThreshold, borderRadius,\n         *               crisp, cropThreshold, colorAxis, colorKey, depth, dragDrop,\n         *               edgeColor, edgeWidth, findNearestPointBy, grouping,\n         *               groupPadding, groupZPadding, maxPointWidth, negativeColor,\n         *               pointInterval, pointIntervalUnit, pointPadding,\n         *               pointPlacement, pointRange, pointStart, pointWidth,\n         *               shadow, softThreshold, stacking, threshold, zoneAxis,\n         *               zones, minPointLength, dataSorting, boostBlending\n         * @requires     modules/sankey\n         * @optionparent plotOptions.sankey\n         *\n         * @private\n         */\n        var SankeySeriesDefaults = {\n            borderWidth: 0,\n            colorByPoint: true,\n            /**\n             * Higher numbers makes the links in a sankey diagram or dependency\n             * wheelrender more curved. A `curveFactor` of 0 makes the lines\n             * straight.\n             *\n             * @private\n             */\n            curveFactor: 0.33,\n            /**\n             * Options for the data labels appearing on top of the nodes and links.\n             * For sankey charts, data labels are visible for the nodes by default,\n             * but hidden for links. This is controlled by modifying the\n             * `nodeFormat`, and the `format` that applies to links and is an empty\n             * string by default.\n             *\n             * @declare Highcharts.SeriesSankeyDataLabelsOptionsObject\n             *\n             * @private\n             */\n            dataLabels: {\n                enabled: true,\n                backgroundColor: 'none', // Enable padding\n                crop: false,\n                /**\n                 * The\n                 * [format string](https://www.highcharts.com/docs/chart-concepts/labels-and-string-formatting)\n                 * specifying what to show for _nodes_ in the sankey diagram. By\n                 * default the `nodeFormatter` returns `{point.name}`.\n                 *\n                 * @sample highcharts/plotoptions/sankey-link-datalabels/\n                 *         Node and link data labels\n                 *\n                 * @type {string}\n                 */\n                nodeFormat: void 0,\n                /**\n                 * Callback to format data labels for _nodes_ in the sankey diagram.\n                 * The `nodeFormat` option takes precedence over the\n                 * `nodeFormatter`.\n                 *\n                 * @type  {Highcharts.SeriesSankeyDataLabelsFormatterCallbackFunction}\n                 * @since 6.0.2\n                 */\n                nodeFormatter: function () {\n                    return this.point.name;\n                },\n                format: void 0,\n                /**\n                 * @type {Highcharts.SeriesSankeyDataLabelsFormatterCallbackFunction}\n                 */\n                formatter: function () {\n                    return;\n                },\n                inside: true\n            },\n            /**\n             * @default   true\n             * @extends   plotOptions.series.inactiveOtherPoints\n             * @private\n             */\n            inactiveOtherPoints: true,\n            /**\n             * Set options on specific levels. Takes precedence over series options,\n             * but not node and link options.\n             *\n             * @sample highcharts/demo/sunburst\n             *         Sunburst chart\n             *\n             * @type      {Array<*>}\n             * @since     7.1.0\n             * @apioption plotOptions.sankey.levels\n             */\n            /**\n             * Can set `borderColor` on all nodes which lay on the same level.\n             *\n             * @type      {Highcharts.ColorString}\n             * @apioption plotOptions.sankey.levels.borderColor\n             */\n            /**\n             * Can set `borderWidth` on all nodes which lay on the same level.\n             *\n             * @type      {number}\n             * @apioption plotOptions.sankey.levels.borderWidth\n             */\n            /**\n             * Can set `color` on all nodes which lay on the same level.\n             *\n             * @type      {Highcharts.ColorString|Highcharts.GradientColorObject|Highcharts.PatternObject}\n             * @apioption plotOptions.sankey.levels.color\n             */\n            /**\n             * Can set `colorByPoint` on all nodes which lay on the same level.\n             *\n             * @type      {boolean}\n             * @default   true\n             * @apioption plotOptions.sankey.levels.colorByPoint\n             */\n            /**\n             * Can set `dataLabels` on all points which lay on the same level.\n             *\n             * @extends   plotOptions.sankey.dataLabels\n             * @apioption plotOptions.sankey.levels.dataLabels\n             */\n            /**\n             * Decides which level takes effect from the options set in the levels\n             * object.\n             *\n             * @type      {number}\n             * @apioption plotOptions.sankey.levels.level\n             */\n            /**\n             * Can set `linkOpacity` on all points which lay on the same level.\n             *\n             * @type      {number}\n             * @default   0.5\n             * @apioption plotOptions.sankey.levels.linkOpacity\n             */\n            /**\n             * Can set `states` on all nodes and points which lay on the same level.\n             *\n             * @extends   plotOptions.sankey.states\n             * @apioption plotOptions.sankey.levels.states\n             */\n            /**\n             * Determines color mode for sankey links. Available options:\n             *\n             * - `from` color of the sankey link will be the same as the 'from node'\n             *\n             * - `gradient` color of the sankey link will be set to gradient between\n             * colors of 'from node' and 'to node'\n             *\n             * - `to` color of the sankey link will be same as the 'to node'.\n             *\n             * @sample highcharts/demo/vertical-sankey\n             *         Vertical sankey diagram with gradients\n             * @sample highcharts/series-sankey/link-color-mode\n             *         Sankey diagram with gradients and explanation\n             *\n             * @type      {('from'|'gradient'|'to')}\n             * @since     11.2.0\n             */\n            linkColorMode: 'from',\n            /**\n             * Opacity for the links between nodes in the sankey diagram.\n             *\n             * @private\n             */\n            linkOpacity: 0.5,\n            /**\n             * Opacity for the nodes in the sankey diagram.\n             *\n             * @private\n             */\n            opacity: 1,\n            /**\n             * The minimal width for a line of a sankey. By default,\n             * 0 values are not shown.\n             *\n             * @sample highcharts/plotoptions/sankey-minlinkwidth\n             *         Sankey diagram with minimal link height\n             *\n             * @type      {number}\n             * @since     7.1.3\n             * @default   0\n             * @apioption plotOptions.sankey.minLinkWidth\n             *\n             * @private\n             */\n            minLinkWidth: 0,\n            /**\n             * Determines which side of the chart the nodes are to be aligned to. When\n             * the chart is inverted, `top` aligns to the left and `bottom` to the\n             * right.\n             *\n             * @sample highcharts/plotoptions/sankey-nodealignment\n             *         Node alignment demonstrated\n             *\n             * @type      {'top'|'center'|'bottom'}\n             * @apioption plotOptions.sankey.nodeAlignment\n             */\n            nodeAlignment: 'center',\n            /**\n             * The pixel width of each node in a sankey diagram or dependency wheel, or\n             * the height in case the chart is inverted.\n             *\n             * Can be a number or a percentage string.\n             *\n             * Sankey series also support setting it to `auto`. With this setting, the\n             * nodes are sized to fill up the plot area in the longitudinal direction,\n             * regardless of the number of levels.\n             *\n             * @see    [sankey.nodeDistance](#nodeDistance)\n             * @sample highcharts/series-sankey/node-distance\n             *         Sankey with auto node width combined with node distance\n             * @sample highcharts/series-organization/node-distance\n             *         Organization chart with node distance of 50%\n             *\n             * @type {number|string}\n             */\n            nodeWidth: 20,\n            /**\n             * The padding between nodes in a sankey diagram or dependency wheel, in\n             * pixels. For sankey charts, this applies to the nodes of the same column,\n             * so vertical distance by default, or horizontal distance in an inverted\n             * (vertical) sankey.\n             *\n             * If the number of nodes is so great that it is impossible to lay them out\n             * within the plot area with the given `nodePadding`, they will be rendered\n             * with a smaller padding as a strategy to avoid overflow.\n             */\n            nodePadding: 10,\n            /**\n             * The distance between nodes in a sankey diagram in the longitudinal\n             * direction. The longitudinal direction means the direction that the chart\n             * flows - in a horizontal chart the distance is horizontal, in an inverted\n             * chart (vertical), the distance is vertical.\n             *\n             * If a number is given, it denotes pixels. If a percentage string is given,\n             * the distance is a percentage of the rendered node width. A `nodeDistance`\n             * of `100%` will render equal widths for the nodes and the gaps between\n             * them.\n             *\n             * This option applies only when the `nodeWidth` option is `auto`, making\n             * the node width respond to the number of columns.\n             *\n             * @since 11.4.0\n             * @sample highcharts/series-sankey/node-distance\n             *         Sankey with dnode distance of 100% means equal to node width\n             * @sample highcharts/series-organization/node-distance\n             *         Organization chart with node distance of 50%\n             * @type   {number|string}\n             */\n            nodeDistance: 30,\n            showInLegend: false,\n            states: {\n                hover: {\n                    /**\n                     * Opacity for the links between nodes in the sankey diagram in\n                     * hover mode.\n                     */\n                    linkOpacity: 1,\n                    /**\n                     * Opacity for the nodes in the sankey diagram in hover mode.\n                     */\n                    opacity: 1\n                },\n                /**\n                 * The opposite state of a hover for a single point node/link.\n                 *\n                 * @declare Highcharts.SeriesStatesInactiveOptionsObject\n                 */\n                inactive: {\n                    /**\n                     * Opacity for the links between nodes in the sankey diagram in\n                     * inactive mode.\n                     */\n                    linkOpacity: 0.1,\n                    /**\n                     * Opacity of the nodes in the sankey diagram in inactive mode.\n                     */\n                    opacity: 0.1,\n                    /**\n                     * Animation when not hovering over the marker.\n                     *\n                     * @type      {boolean|Partial<Highcharts.AnimationOptionsObject>}\n                     * @apioption plotOptions.series.states.inactive.animation\n                     */\n                    animation: {\n                        /** @internal */\n                        duration: 50\n                    }\n                }\n            },\n            tooltip: {\n                /**\n                 * A callback for defining the format for _nodes_ in the chart's\n                 * tooltip, as opposed to links.\n                 *\n                 * @type      {Highcharts.FormatterCallbackFunction<Highcharts.SankeyNodeObject>}\n                 * @since     6.0.2\n                 * @apioption plotOptions.sankey.tooltip.nodeFormatter\n                 */\n                /**\n                 * Whether the tooltip should follow the pointer or stay fixed on\n                 * the item.\n                 */\n                followPointer: true,\n                headerFormat: '<span style=\"font-size: 0.8em\">{series.name}</span><br/>',\n                pointFormat: '{point.fromNode.name} \\u2192 {point.toNode.name}: <b>{point.weight}</b><br/>',\n                /**\n                 * The\n                 * [format string](https://www.highcharts.com/docs/chart-concepts/labels-and-string-formatting)\n                 * specifying what to show for _nodes_ in tooltip of a diagram\n                 * series, as opposed to links.\n                 */\n                nodeFormat: '{point.name}: <b>{point.sum}</b><br/>'\n            }\n        };\n        /**\n         * A `sankey` series. If the [type](#series.sankey.type) option is not\n         * specified, it is inherited from [chart.type](#chart.type).\n         *\n         * @extends   series,plotOptions.sankey\n         * @excluding animationLimit, boostBlending, boostThreshold, borderColor,\n         *            borderRadius, borderWidth, crisp, cropThreshold, dataParser,\n         *            dataURL, depth, dragDrop, edgeColor, edgeWidth,\n         *            findNearestPointBy, getExtremesFromAll, grouping, groupPadding,\n         *            groupZPadding, label, maxPointWidth, negativeColor, pointInterval,\n         *            pointIntervalUnit, pointPadding, pointPlacement, pointRange,\n         *            pointStart, pointWidth, shadow, softThreshold, stacking,\n         *            threshold, zoneAxis, zones, dataSorting\n         * @product   highcharts\n         * @requires  modules/sankey\n         * @apioption series.sankey\n         */\n        /**\n         * A collection of options for the individual nodes. The nodes in a sankey\n         * diagram are auto-generated instances of `Highcharts.Point`, but options can\n         * be applied here and linked by the `id`.\n         *\n         * @sample highcharts/css/sankey/\n         *         Sankey diagram with node options\n         *\n         * @declare   Highcharts.SeriesSankeyNodesOptionsObject\n         * @type      {Array<*>}\n         * @product   highcharts\n         * @apioption series.sankey.nodes\n         */\n        /**\n         * The id of the auto-generated node, referring to the `from` or `to` setting of\n         * the link.\n         *\n         * @type      {string}\n         * @product   highcharts\n         * @apioption series.sankey.nodes.id\n         */\n        /**\n         * The color of the auto generated node.\n         *\n         * @type      {Highcharts.ColorString|Highcharts.GradientColorObject|Highcharts.PatternObject}\n         * @product   highcharts\n         * @apioption series.sankey.nodes.color\n         */\n        /**\n         * The color index of the auto generated node, especially for use in styled\n         * mode.\n         *\n         * @type      {number}\n         * @product   highcharts\n         * @apioption series.sankey.nodes.colorIndex\n         */\n        /**\n         * An optional column index of where to place the node. The default behaviour is\n         * to place it next to the preceding node. Note that this option name is\n         * counter intuitive in inverted charts, like for example an organization chart\n         * rendered top down. In this case the \"columns\" are horizontal.\n         *\n         * @sample highcharts/plotoptions/sankey-node-column/\n         *         Specified node column\n         *\n         * @type      {number}\n         * @since     6.0.5\n         * @product   highcharts\n         * @apioption series.sankey.nodes.column\n         */\n        /**\n         * Individual data label for each node. The options are the same as\n         * the ones for [series.sankey.dataLabels](#series.sankey.dataLabels).\n         *\n         * @extends   plotOptions.sankey.dataLabels\n         * @apioption series.sankey.nodes.dataLabels\n         */\n        /**\n         * The height of the node.\n         *\n         * @sample highcharts/series-sankey/height/\n         *         Sankey diagram with height options\n         *\n         * @type      {number}\n         * @since     11.3.0\n         * @apioption series.sankey.nodes.height\n         */\n        /**\n         * An optional level index of where to place the node. The default behaviour is\n         * to place it next to the preceding node. Alias of `nodes.column`, but in\n         * inverted sankeys and org charts, the levels are laid out as rows.\n         *\n         * @type      {number}\n         * @since     7.1.0\n         * @product   highcharts\n         * @apioption series.sankey.nodes.level\n         */\n        /**\n         * The name to display for the node in data labels and tooltips. Use this when\n         * the name is different from the `id`. Where the id must be unique for each\n         * node, this is not necessary for the name.\n         *\n         * @sample highcharts/css/sankey/\n         *         Sankey diagram with node options\n         *\n         * @type      {string}\n         * @product   highcharts\n         * @apioption series.sankey.nodes.name\n         */\n        /**\n         * This option is deprecated, use\n         * [offsetHorizontal](#series.sankey.nodes.offsetHorizontal) and\n         * [offsetVertical](#series.sankey.nodes.offsetVertical) instead.\n         *\n         * In a horizontal layout, the vertical offset of a node in terms of weight.\n         * Positive values shift the node downwards, negative shift it upwards. In a\n         * vertical layout, like organization chart, the offset is horizontal.\n         *\n         * If a percentage string is given, the node is offset by the percentage of the\n         * node size plus `nodePadding`.\n         *\n         * @deprecated\n         * @type      {number|string}\n         * @default   0\n         * @since     6.0.5\n         * @product   highcharts\n         * @apioption series.sankey.nodes.offset\n         */\n        /**\n         * The horizontal offset of a node. Positive values shift the node right,\n         * negative shift it left.\n         *\n         * If a percentage string is given, the node is offset by the percentage of the\n         * node size.\n         *\n         * @sample highcharts/plotoptions/sankey-node-column/\n         *         Specified node offset\n         *\n         * @type      {number|string}\n         * @since 9.3.0\n         * @product   highcharts\n         * @apioption series.sankey.nodes.offsetHorizontal\n         */\n        /**\n         * The vertical offset of a node. Positive values shift the node down,\n         * negative shift it up.\n         *\n         * If a percentage string is given, the node is offset by the percentage of the\n         * node size.\n         *\n         * @sample highcharts/plotoptions/sankey-node-column/\n         *         Specified node offset\n         *\n         * @type      {number|string}\n         * @since 9.3.0\n         * @product   highcharts\n         * @apioption series.sankey.nodes.offsetVertical\n         */\n        /**\n         * An array of data points for the series. For the `sankey` series type,\n         * points can be given in the following way:\n         *\n         * An array of objects with named values. The following snippet shows only a\n         * few settings, see the complete options set below. If the total number of data\n         * points exceeds the series' [turboThreshold](#series.area.turboThreshold),\n         * this option is not available.\n         *\n         *  ```js\n         *     data: [{\n         *         from: 'Category1',\n         *         to: 'Category2',\n         *         weight: 2\n         *     }, {\n         *         from: 'Category1',\n         *         to: 'Category3',\n         *         weight: 5\n         *     }]\n         *  ```\n         *\n         *  When you provide the data as tuples, the keys option has to be set as well.\n         *\n         *  ```js\n         *     keys: ['from', 'to', 'weight'],\n         *     data: [\n         *         ['Category1', 'Category2', 2],\n         *         ['Category1', 'Category3', 5]\n         *     ]\n         *  ```\n         *\n         * @sample {highcharts} highcharts/series/data-array-of-objects/\n         *         Config objects\n         *\n         * @declare   Highcharts.SeriesSankeyPointOptionsObject\n         * @type      {Array<*>|Array<Array<(string|number)>>}\n         * @extends   series.line.data\n         * @excluding dragDrop, drilldown, marker, x, y\n         * @product   highcharts\n         * @apioption series.sankey.data\n         */\n        /**\n         * The color for the individual _link_. By default, the link color is the same\n         * as the node it extends from. The `series.fillOpacity` option also applies to\n         * the points, so when setting a specific link color, consider setting the\n         * `fillOpacity` to 1.\n         *\n         * @type      {Highcharts.ColorString|Highcharts.GradientColorObject|Highcharts.PatternObject}\n         * @product   highcharts\n         * @apioption series.sankey.data.color\n         */\n        /**\n         * @type      {Highcharts.SeriesSankeyDataLabelsOptionsObject|Array<Highcharts.SeriesSankeyDataLabelsOptionsObject>}\n         * @product   highcharts\n         * @apioption series.sankey.data.dataLabels\n         */\n        /**\n         * The node that the link runs from.\n         *\n         * @type      {string}\n         * @product   highcharts\n         * @apioption series.sankey.data.from\n         */\n        /**\n         * The node that the link runs to.\n         *\n         * @type      {string}\n         * @product   highcharts\n         * @apioption series.sankey.data.to\n         */\n        /**\n         * Whether the link goes out of the system.\n         *\n         * @sample highcharts/plotoptions/sankey-outgoing\n         *         Sankey chart with outgoing links\n         *\n         * @type      {boolean}\n         * @default   false\n         * @product   highcharts\n         * @apioption series.sankey.data.outgoing\n         */\n        /**\n         * The weight of the link.\n         *\n         * @type      {number|null}\n         * @product   highcharts\n         * @apioption series.sankey.data.weight\n         */\n        ''; // Adds doclets above to transpiled file\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return SankeySeriesDefaults;\n    });\n    _registerModule(_modules, 'Series/Sankey/SankeyColumnComposition.js', [_modules['Core/Utilities.js']], function (U) {\n        /* *\n         *\n         *  Sankey diagram module\n         *\n         *  (c) 2010-2024 Torstein Honsi\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        var defined = U.defined, relativeLength = U.relativeLength;\n        /* *\n         *\n         *  Composition\n         *\n         * */\n        var SankeyColumnComposition;\n        (function (SankeyColumnComposition) {\n            /* *\n             *\n             *  Declarations\n             *\n             * */\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * SankeyColumn Composition\n             * @private\n             * @function Highcharts.SankeyColumn#compose\n             *\n             * @param {Array<SankeyPoint>} points\n             * The array of nodes\n             * @param {SankeySeries} series\n             * Series connected to column\n             * @return {ArrayComposition} SankeyColumnArray\n             */\n            function compose(points, series) {\n                var sankeyColumnArray = points;\n                sankeyColumnArray.sankeyColumn =\n                    new SankeyColumnAdditions(sankeyColumnArray, series);\n                return sankeyColumnArray;\n            }\n            SankeyColumnComposition.compose = compose;\n            /* *\n             *\n             *  Classes\n             *\n             * */\n            var SankeyColumnAdditions = /** @class */ (function () {\n                /* *\n                 *\n                 *  Constructor\n                 *\n                 * */\n                function SankeyColumnAdditions(points, series) {\n                    this.points = points;\n                    this.series = series;\n                }\n                /* *\n                 *\n                 *  Functions\n                 *\n                 * */\n                /**\n                 * Calculate translation factor used in column and nodes distribution\n                 * @private\n                 * @function Highcharts.SankeyColumn#getTranslationFactor\n                 *\n                 * @param {SankeySeries} series\n                 * The Series\n                 * @return {number} TranslationFactor\n                 * Translation Factor\n                 */\n                SankeyColumnAdditions.prototype.getTranslationFactor = function (series) {\n                    var column = this.points, nodes = column.slice(), chart = series.chart, minLinkWidth = series.options.minLinkWidth || 0;\n                    var skipPoint, factor = 0, i, remainingHeight = ((chart.plotSizeY || 0) -\n                        (series.options.borderWidth || 0) -\n                        (column.length - 1) * series.nodePadding);\n                    // Because the minLinkWidth option doesn't obey the direct\n                    // translation, we need to run translation iteratively, check\n                    // node heights, remove those nodes affected by minLinkWidth,\n                    // check again, etc.\n                    while (column.length) {\n                        factor = remainingHeight / column.sankeyColumn.sum();\n                        skipPoint = false;\n                        i = column.length;\n                        while (i--) {\n                            if (column[i].getSum() * factor < minLinkWidth) {\n                                column.splice(i, 1);\n                                remainingHeight =\n                                    Math.max(0, remainingHeight - minLinkWidth);\n                                skipPoint = true;\n                            }\n                        }\n                        if (!skipPoint) {\n                            break;\n                        }\n                    }\n                    // Re-insert original nodes\n                    column.length = 0;\n                    for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n                        var node = nodes_1[_i];\n                        column.push(node);\n                    }\n                    return factor;\n                };\n                /**\n                 * Get the top position of the column in pixels\n                 * @private\n                 * @function Highcharts.SankeyColumn#top\n                 *\n                 * @param {number} factor\n                 * The Translation Factor\n                 * @return {number} top\n                 * The top position of the column\n                 */\n                SankeyColumnAdditions.prototype.top = function (factor) {\n                    var series = this.series, nodePadding = series.nodePadding, height = this.points.reduce(function (height, node) {\n                        if (height > 0) {\n                            height += nodePadding;\n                        }\n                        var nodeHeight = Math.max(node.getSum() * factor, series.options.minLinkWidth || 0);\n                        height += nodeHeight;\n                        return height;\n                    }, 0);\n                    // Node alignment option handling #19096\n                    return {\n                        top: 0,\n                        center: 0.5,\n                        bottom: 1\n                    }[series.options.nodeAlignment || 'center'] * ((series.chart.plotSizeY || 0) - height);\n                };\n                /**\n                 * Get the left position of the column in pixels\n                 * @private\n                 * @function Highcharts.SankeyColumn#top\n                 *\n                 * @param {number} factor\n                 * The Translation Factor\n                 * @return {number} left\n                 * The left position of the column\n                 */\n                SankeyColumnAdditions.prototype.left = function (factor) {\n                    var series = this.series, chart = series.chart, equalNodes = series.options.equalNodes, maxNodesLength = (chart.inverted ? chart.plotHeight : chart.plotWidth), nodePadding = series.nodePadding, width = this.points.reduce(function (width, node) {\n                        if (width > 0) {\n                            width += nodePadding;\n                        }\n                        var nodeWidth = equalNodes ?\n                            maxNodesLength / node.series.nodes.length -\n                                nodePadding :\n                            Math.max(node.getSum() * factor, series.options.minLinkWidth || 0);\n                        width += nodeWidth;\n                        return width;\n                    }, 0);\n                    return ((chart.plotSizeX || 0) - Math.round(width)) / 2;\n                };\n                /**\n                 * Calculate sum of all nodes inside specific column\n                 * @private\n                 * @function Highcharts.SankeyColumn#sum\n                 *\n                 * @param {ArrayComposition} this\n                 * Sankey Column Array\n                 *\n                 * @return {number} sum\n                 * Sum of all nodes inside column\n                 */\n                SankeyColumnAdditions.prototype.sum = function () {\n                    return this.points.reduce(function (sum, node) { return (sum + node.getSum()); }, 0);\n                };\n                /**\n                 * Get the offset in pixels of a node inside the column\n                 * @private\n                 * @function Highcharts.SankeyColumn#offset\n                 *\n                 * @param {SankeyPoint} node\n                 * Sankey node\n                 * @param {number} factor\n                 * Translation Factor\n                 * @return {number} offset\n                 * Offset of a node inside column\n                 */\n                SankeyColumnAdditions.prototype.offset = function (node, factor) {\n                    var column = this.points, series = this.series, nodePadding = series.nodePadding;\n                    var offset = 0, totalNodeOffset;\n                    if (series.is('organization') && node.hangsFrom) {\n                        return {\n                            absoluteTop: node.hangsFrom.nodeY\n                        };\n                    }\n                    for (var i = 0; i < column.length; i++) {\n                        var sum = column[i].getSum();\n                        var height = Math.max(sum * factor, series.options.minLinkWidth || 0);\n                        var directionOffset = node.options[series.chart.inverted ?\n                            'offsetHorizontal' :\n                            'offsetVertical'], optionOffset = node.options.offset || 0;\n                        if (sum) {\n                            totalNodeOffset = height + nodePadding;\n                        }\n                        else {\n                            // If node sum equals 0 nodePadding is missed #12453\n                            totalNodeOffset = 0;\n                        }\n                        if (column[i] === node) {\n                            return {\n                                relativeTop: offset + (defined(directionOffset) ?\n                                    // `directionOffset` is a percent of the node\n                                    // height\n                                    relativeLength(directionOffset, height) :\n                                    relativeLength(optionOffset, totalNodeOffset))\n                            };\n                        }\n                        offset += totalNodeOffset;\n                    }\n                };\n                return SankeyColumnAdditions;\n            }());\n            SankeyColumnComposition.SankeyColumnAdditions = SankeyColumnAdditions;\n        })(SankeyColumnComposition || (SankeyColumnComposition = {}));\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return SankeyColumnComposition;\n    });\n    _registerModule(_modules, 'Series/TreeUtilities.js', [_modules['Core/Color/Color.js'], _modules['Core/Utilities.js']], function (Color, U) {\n        /* *\n         *\n         *  (c) 2014-2024 Highsoft AS\n         *\n         *  Authors: Jon Arild Nygard / Oystein Moseng\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        var extend = U.extend, isArray = U.isArray, isNumber = U.isNumber, isObject = U.isObject, merge = U.merge, pick = U.pick, relativeLength = U.relativeLength;\n        /* *\n         *\n         *  Functions\n         *\n         * */\n        /* eslint-disable valid-jsdoc */\n        /**\n         * @private\n         */\n        function getColor(node, options) {\n            var index = options.index, mapOptionsToLevel = options.mapOptionsToLevel, parentColor = options.parentColor, parentColorIndex = options.parentColorIndex, series = options.series, colors = options.colors, siblings = options.siblings, points = series.points, chartOptionsChart = series.chart.options.chart;\n            var getColorByPoint, point, level, colorByPoint, colorIndexByPoint, color, colorIndex;\n            /**\n             * @private\n             */\n            var variateColor = function (color) {\n                var colorVariation = level && level.colorVariation;\n                if (colorVariation &&\n                    colorVariation.key === 'brightness' &&\n                    index &&\n                    siblings) {\n                    return Color.parse(color).brighten(colorVariation.to * (index / siblings)).get();\n                }\n                return color;\n            };\n            if (node) {\n                point = points[node.i];\n                level = mapOptionsToLevel[node.level] || {};\n                getColorByPoint = point && level.colorByPoint;\n                if (getColorByPoint) {\n                    colorIndexByPoint = point.index % (colors ?\n                        colors.length :\n                        chartOptionsChart.colorCount);\n                    colorByPoint = colors && colors[colorIndexByPoint];\n                }\n                // Select either point color, level color or inherited color.\n                if (!series.chart.styledMode) {\n                    color = pick(point && point.options.color, level && level.color, colorByPoint, parentColor && variateColor(parentColor), series.color);\n                }\n                colorIndex = pick(point && point.options.colorIndex, level && level.colorIndex, colorIndexByPoint, parentColorIndex, options.colorIndex);\n            }\n            return {\n                color: color,\n                colorIndex: colorIndex\n            };\n        }\n        /**\n         * Creates a map from level number to its given options.\n         *\n         * @private\n         *\n         * @param {Object} params\n         * Object containing parameters.\n         * - `defaults` Object containing default options. The default options are\n         *   merged with the userOptions to get the final options for a specific\n         *   level.\n         * - `from` The lowest level number.\n         * - `levels` User options from series.levels.\n         * - `to` The highest level number.\n         *\n         * @return {Highcharts.Dictionary<object>|null}\n         * Returns a map from level number to its given options.\n         */\n        function getLevelOptions(params) {\n            var result = {};\n            var defaults, converted, i, from, to, levels;\n            if (isObject(params)) {\n                from = isNumber(params.from) ? params.from : 1;\n                levels = params.levels;\n                converted = {};\n                defaults = isObject(params.defaults) ? params.defaults : {};\n                if (isArray(levels)) {\n                    converted = levels.reduce(function (obj, item) {\n                        var level, levelIsConstant, options;\n                        if (isObject(item) && isNumber(item.level)) {\n                            options = merge({}, item);\n                            levelIsConstant = pick(options.levelIsConstant, defaults.levelIsConstant);\n                            // Delete redundant properties.\n                            delete options.levelIsConstant;\n                            delete options.level;\n                            // Calculate which level these options apply to.\n                            level = item.level + (levelIsConstant ? 0 : from - 1);\n                            if (isObject(obj[level])) {\n                                merge(true, obj[level], options); // #16329\n                            }\n                            else {\n                                obj[level] = options;\n                            }\n                        }\n                        return obj;\n                    }, {});\n                }\n                to = isNumber(params.to) ? params.to : 1;\n                for (i = 0; i <= to; i++) {\n                    result[i] = merge({}, defaults, isObject(converted[i]) ? converted[i] : {});\n                }\n            }\n            return result;\n        }\n        /**\n         * @private\n         * @todo Combine buildTree and buildNode with setTreeValues\n         * @todo Remove logic from Treemap and make it utilize this mixin.\n         */\n        function setTreeValues(tree, options) {\n            var before = options.before, idRoot = options.idRoot, mapIdToNode = options.mapIdToNode, nodeRoot = mapIdToNode[idRoot], levelIsConstant = (options.levelIsConstant !== false), points = options.points, point = points[tree.i], optionsPoint = point && point.options || {}, children = [];\n            var childrenTotal = 0;\n            tree.levelDynamic = tree.level - (levelIsConstant ? 0 : nodeRoot.level);\n            tree.name = pick(point && point.name, '');\n            tree.visible = (idRoot === tree.id ||\n                options.visible === true);\n            if (typeof before === 'function') {\n                tree = before(tree, options);\n            }\n            // First give the children some values\n            tree.children.forEach(function (child, i) {\n                var newOptions = extend({}, options);\n                extend(newOptions, {\n                    index: i,\n                    siblings: tree.children.length,\n                    visible: tree.visible\n                });\n                child = setTreeValues(child, newOptions);\n                children.push(child);\n                if (child.visible) {\n                    childrenTotal += child.val;\n                }\n            });\n            // Set the values\n            var value = pick(optionsPoint.value, childrenTotal);\n            tree.visible = value >= 0 && (childrenTotal > 0 || tree.visible);\n            tree.children = children;\n            tree.childrenTotal = childrenTotal;\n            tree.isLeaf = tree.visible && !childrenTotal;\n            tree.val = value;\n            return tree;\n        }\n        /**\n         * Update the rootId property on the series. Also makes sure that it is\n         * accessible to exporting.\n         *\n         * @private\n         *\n         * @param {Object} series\n         * The series to operate on.\n         *\n         * @return {string}\n         * Returns the resulting rootId after update.\n         */\n        function updateRootId(series) {\n            var rootId, options;\n            if (isObject(series)) {\n                // Get the series options.\n                options = isObject(series.options) ? series.options : {};\n                // Calculate the rootId.\n                rootId = pick(series.rootNode, options.rootId, '');\n                // Set rootId on series.userOptions to pick it up in exporting.\n                if (isObject(series.userOptions)) {\n                    series.userOptions.rootId = rootId;\n                }\n                // Set rootId on series to pick it up on next update.\n                series.rootNode = rootId;\n            }\n            return rootId;\n        }\n        /**\n         * Get the node width, which relies on the plot width and the nodeDistance\n         * option.\n         *\n         * @private\n         */\n        function getNodeWidth(series, columnCount) {\n            var chart = series.chart, options = series.options, _a = options.nodeDistance, nodeDistance = _a === void 0 ? 0 : _a, _b = options.nodeWidth, nodeWidth = _b === void 0 ? 0 : _b, _c = chart.plotSizeX, plotSizeX = _c === void 0 ? 1 : _c;\n            // Node width auto means they are evenly distributed along the width of\n            // the plot area\n            if (nodeWidth === 'auto') {\n                if (typeof nodeDistance === 'string' && /%$/.test(nodeDistance)) {\n                    var fraction = parseFloat(nodeDistance) / 100, total = columnCount + fraction * (columnCount - 1);\n                    return plotSizeX / total;\n                }\n                var nDistance = Number(nodeDistance);\n                return ((plotSizeX + nDistance) /\n                    (columnCount || 1)) - nDistance;\n            }\n            return relativeLength(nodeWidth, plotSizeX);\n        }\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n        var TreeUtilities = {\n            getColor: getColor,\n            getLevelOptions: getLevelOptions,\n            getNodeWidth: getNodeWidth,\n            setTreeValues: setTreeValues,\n            updateRootId: updateRootId\n        };\n\n        return TreeUtilities;\n    });\n    _registerModule(_modules, 'Extensions/TextPath.js', [_modules['Core/Globals.js'], _modules['Core/Utilities.js']], function (H, U) {\n        /* *\n         *\n         *  Highcharts module with textPath functionality.\n         *\n         *  (c) 2009-2024 Torstein Honsi\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        var deg2rad = H.deg2rad;\n        var addEvent = U.addEvent, merge = U.merge, uniqueKey = U.uniqueKey, defined = U.defined, extend = U.extend;\n        /**\n         * Set a text path for a `text` or `label` element, allowing the text to\n         * flow along a path.\n         *\n         * In order to unset the path for an existing element, call `setTextPath`\n         * with `{ enabled: false }` as the second argument.\n         *\n         * Text path support is not bundled into `highcharts.js`, and requires the\n         * `modules/textpath.js` file. However, it is included in the script files of\n         * those series types that use it by default\n         *\n         * @sample highcharts/members/renderer-textpath/ Text path demonstrated\n         *\n         * @function Highcharts.SVGElement#setTextPath\n         *\n         * @param {Highcharts.SVGElement|undefined} path\n         *        Path to follow. If undefined, it allows changing options for the\n         *        existing path.\n         *\n         * @param {Highcharts.DataLabelsTextPathOptionsObject} textPathOptions\n         *        Options.\n         *\n         * @return {Highcharts.SVGElement} Returns the SVGElement for chaining.\n         */\n        function setTextPath(path, textPathOptions) {\n            var _this = this;\n            // Defaults\n            textPathOptions = merge(true, {\n                enabled: true,\n                attributes: {\n                    dy: -5,\n                    startOffset: '50%',\n                    textAnchor: 'middle'\n                }\n            }, textPathOptions);\n            var url = this.renderer.url, textWrapper = this.text || this, textPath = textWrapper.textPath, attributes = textPathOptions.attributes, enabled = textPathOptions.enabled;\n            path = path || (textPath && textPath.path);\n            // Remove previously added event\n            if (textPath) {\n                textPath.undo();\n            }\n            if (path && enabled) {\n                var undo = addEvent(textWrapper, 'afterModifyTree', function (e) {\n                    if (path && enabled) {\n                        // Set ID for the path\n                        var textPathId = path.attr('id');\n                        if (!textPathId) {\n                            path.attr('id', textPathId = uniqueKey());\n                        }\n                        // Set attributes for the <text>\n                        var textAttribs = {\n                            // `dx`/`dy` options must by set on <text> (parent), the\n                            // rest should be set on <textPath>\n                            x: 0,\n                            y: 0\n                        };\n                        if (defined(attributes.dx)) {\n                            textAttribs.dx = attributes.dx;\n                            delete attributes.dx;\n                        }\n                        if (defined(attributes.dy)) {\n                            textAttribs.dy = attributes.dy;\n                            delete attributes.dy;\n                        }\n                        textWrapper.attr(textAttribs);\n                        // Handle label properties\n                        _this.attr({ transform: '' });\n                        if (_this.box) {\n                            _this.box = _this.box.destroy();\n                        }\n                        // Wrap the nodes in a textPath\n                        var children = e.nodes.slice(0);\n                        e.nodes.length = 0;\n                        e.nodes[0] = {\n                            tagName: 'textPath',\n                            attributes: extend(attributes, {\n                                'text-anchor': attributes.textAnchor,\n                                href: \"\".concat(url, \"#\").concat(textPathId)\n                            }),\n                            children: children\n                        };\n                    }\n                });\n                // Set the reference\n                textWrapper.textPath = { path: path, undo: undo };\n            }\n            else {\n                textWrapper.attr({ dx: 0, dy: 0 });\n                delete textWrapper.textPath;\n            }\n            if (this.added) {\n                // Rebuild text after added\n                textWrapper.textCache = '';\n                this.renderer.buildText(textWrapper);\n            }\n            return this;\n        }\n        /**\n         * Attach a polygon to a bounding box if the element contains a textPath.\n         *\n         * @function Highcharts.SVGElement#setPolygon\n         *\n         * @param {any} event\n         *        An event containing a bounding box object\n         *\n         * @return {Highcharts.BBoxObject} Returns the bounding box object.\n         */\n        function setPolygon(event) {\n            var _a;\n            var bBox = event.bBox, tp = (_a = this.element) === null || _a === void 0 ? void 0 : _a.querySelector('textPath');\n            if (tp) {\n                var polygon = [], _b = this.renderer.fontMetrics(this.element), b_1 = _b.b, h = _b.h, descender_1 = h - b_1, lineCleanerRegex = new RegExp('(<tspan>|' +\n                    '<tspan(?!\\\\sclass=\"highcharts-br\")[^>]*>|' +\n                    '<\\\\/tspan>)', 'g'), lines = tp\n                    .innerHTML\n                    .replace(lineCleanerRegex, '')\n                    .split(/<tspan class=\"highcharts-br\"[^>]*>/), numOfLines = lines.length;\n                // Calculate top and bottom coordinates for\n                // either the start or the end of a single\n                // character, and append it to the polygon.\n                var appendTopAndBottom = function (charIndex, positionOfChar) {\n                    var x = positionOfChar.x, y = positionOfChar.y, rotation = (tp.getRotationOfChar(charIndex) - 90) * deg2rad, cosRot = Math.cos(rotation), sinRot = Math.sin(rotation);\n                    return [\n                        [\n                            x - descender_1 * cosRot,\n                            y - descender_1 * sinRot\n                        ],\n                        [\n                            x + b_1 * cosRot,\n                            y + b_1 * sinRot\n                        ]\n                    ];\n                };\n                for (var i = 0, lineIndex = 0; lineIndex < numOfLines; lineIndex++) {\n                    var line = lines[lineIndex], lineLen = line.length;\n                    for (var lineCharIndex = 0; lineCharIndex < lineLen; lineCharIndex += 5) {\n                        try {\n                            var srcCharIndex = (i +\n                                lineCharIndex +\n                                lineIndex), _c = appendTopAndBottom(srcCharIndex, tp.getStartPositionOfChar(srcCharIndex)), lower = _c[0], upper = _c[1];\n                            if (lineCharIndex === 0) {\n                                polygon.push(upper);\n                                polygon.push(lower);\n                            }\n                            else {\n                                if (lineIndex === 0) {\n                                    polygon.unshift(upper);\n                                }\n                                if (lineIndex === numOfLines - 1) {\n                                    polygon.push(lower);\n                                }\n                            }\n                        }\n                        catch (e) {\n                            // Safari fails on getStartPositionOfChar even if the\n                            // character is within the `textContent.length`\n                            break;\n                        }\n                    }\n                    i += lineLen - 1;\n                    try {\n                        var srcCharIndex = i + lineIndex, charPos = tp.getEndPositionOfChar(srcCharIndex), _d = appendTopAndBottom(srcCharIndex, charPos), lower = _d[0], upper = _d[1];\n                        polygon.unshift(upper);\n                        polygon.unshift(lower);\n                    }\n                    catch (e) {\n                        // Safari fails on getStartPositionOfChar even if the character\n                        // is within the `textContent.length`\n                        break;\n                    }\n                }\n                // Close it\n                if (polygon.length) {\n                    polygon.push(polygon[0].slice());\n                }\n                bBox.polygon = polygon;\n            }\n            return bBox;\n        }\n        /**\n         * Draw text along a textPath for a dataLabel.\n         *\n         * @function Highcharts.SVGElement#setTextPath\n         *\n         * @param {any} event\n         *        An event containing label options\n         *\n         * @return {void}\n         */\n        function drawTextPath(event) {\n            var _a;\n            var labelOptions = event.labelOptions, point = event.point, textPathOptions = (labelOptions[point.formatPrefix + 'TextPath'] ||\n                labelOptions.textPath);\n            if (textPathOptions && !labelOptions.useHTML) {\n                this.setTextPath(((_a = point.getDataLabelPath) === null || _a === void 0 ? void 0 : _a.call(point, this)) || point.graphic, textPathOptions);\n                if (point.dataLabelPath &&\n                    !textPathOptions.enabled) {\n                    // Clean the DOM\n                    point.dataLabelPath = (point.dataLabelPath.destroy());\n                }\n            }\n        }\n        function compose(SVGElementClass) {\n            addEvent(SVGElementClass, 'afterGetBBox', setPolygon);\n            addEvent(SVGElementClass, 'beforeAddingDataLabel', drawTextPath);\n            var svgElementProto = SVGElementClass.prototype;\n            if (!svgElementProto.setTextPath) {\n                svgElementProto.setTextPath = setTextPath;\n            }\n        }\n        var TextPath = {\n            compose: compose\n        };\n\n        return TextPath;\n    });\n    _registerModule(_modules, 'Series/Sankey/SankeySeries.js', [_modules['Core/Globals.js'], _modules['Series/NodesComposition.js'], _modules['Series/Sankey/SankeyPoint.js'], _modules['Series/Sankey/SankeySeriesDefaults.js'], _modules['Core/Series/SeriesRegistry.js'], _modules['Series/Sankey/SankeyColumnComposition.js'], _modules['Core/Color/Color.js'], _modules['Series/TreeUtilities.js'], _modules['Core/Utilities.js'], _modules['Core/Renderer/SVG/SVGElement.js'], _modules['Extensions/TextPath.js']], function (H, NodesComposition, SankeyPoint, SankeySeriesDefaults, SeriesRegistry, SankeyColumnComposition, Color, TU, U, SVGElement, TextPath) {\n        /* *\n         *\n         *  Sankey diagram module\n         *\n         *  (c) 2010-2024 Torstein Honsi\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        var __extends = (this && this.__extends) || (function () {\n            var extendStatics = function (d, b) {\n                extendStatics = Object.setPrototypeOf ||\n                    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n                    function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n                return extendStatics(d, b);\n            };\n            return function (d, b) {\n                if (typeof b !== \"function\" && b !== null)\n                    throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n                extendStatics(d, b);\n                function __() { this.constructor = d; }\n                d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n            };\n        })();\n        var _a = SeriesRegistry.seriesTypes, ColumnSeries = _a.column, LineSeries = _a.line;\n        var color = Color.parse;\n        var getLevelOptions = TU.getLevelOptions, getNodeWidth = TU.getNodeWidth;\n        var clamp = U.clamp, crisp = U.crisp, extend = U.extend, isObject = U.isObject, merge = U.merge, pick = U.pick, relativeLength = U.relativeLength, stableSort = U.stableSort;\n        TextPath.compose(SVGElement);\n        /* *\n         *\n         *  Class\n         *\n         * */\n        /**\n         * @private\n         * @class\n         * @name Highcharts.seriesTypes.sankey\n         *\n         * @augments Highcharts.Series\n         */\n        var SankeySeries = /** @class */ (function (_super) {\n            __extends(SankeySeries, _super);\n            function SankeySeries() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            /* *\n             *\n             *  Static Functions\n             *\n             * */\n            /**\n             * @private\n             */\n            SankeySeries.getDLOptions = function (params) {\n                var optionsPoint = (isObject(params.optionsPoint) ?\n                    params.optionsPoint.dataLabels :\n                    {}), optionsLevel = (isObject(params.level) ?\n                    params.level.dataLabels :\n                    {}), options = merge({\n                    style: {}\n                }, optionsLevel, optionsPoint);\n                return options;\n            };\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * Create node columns by analyzing the nodes and the relations between\n             * incoming and outgoing links.\n             * @private\n             */\n            SankeySeries.prototype.createNodeColumns = function () {\n                var columns = [];\n                for (var _i = 0, _a = this.nodes; _i < _a.length; _i++) {\n                    var node = _a[_i];\n                    node.setNodeColumn();\n                    if (!columns[node.column]) {\n                        columns[node.column] =\n                            SankeyColumnComposition.compose([], this);\n                    }\n                    columns[node.column].push(node);\n                }\n                // Fill in empty columns (#8865)\n                for (var i = 0; i < columns.length; i++) {\n                    if (typeof columns[i] === 'undefined') {\n                        columns[i] =\n                            SankeyColumnComposition.compose([], this);\n                    }\n                }\n                return columns;\n            };\n            /**\n             * Order the nodes, starting with the root node(s). (#9818)\n             * @private\n             */\n            SankeySeries.prototype.order = function (node, level) {\n                var series = this;\n                // Prevents circular recursion:\n                if (typeof node.level === 'undefined') {\n                    node.level = level;\n                    for (var _i = 0, _a = node.linksFrom; _i < _a.length; _i++) {\n                        var link = _a[_i];\n                        if (link.toNode) {\n                            series.order(link.toNode, level + 1);\n                        }\n                    }\n                }\n            };\n            /**\n             * Extend generatePoints by adding the nodes, which are Point objects\n             * but pushed to the this.nodes array.\n             * @private\n             */\n            SankeySeries.prototype.generatePoints = function () {\n                NodesComposition.generatePoints.apply(this, arguments);\n                if (this.orderNodes) {\n                    for (var _i = 0, _a = this.nodes; _i < _a.length; _i++) {\n                        var node = _a[_i];\n                        // Identify the root node(s)\n                        if (node.linksTo.length === 0) {\n                            // Start by the root node(s) and recursively set the level\n                            // on all following nodes.\n                            this.order(node, 0);\n                        }\n                    }\n                    stableSort(this.nodes, function (a, b) { return (a.level - b.level); });\n                }\n            };\n            /**\n             * Overridable function to get node padding, overridden in dependency\n             * wheel series type.\n             * @private\n             */\n            SankeySeries.prototype.getNodePadding = function () {\n                var nodePadding = this.options.nodePadding || 0;\n                // If the number of columns is so great that they will overflow with\n                // the given nodePadding, we sacrifice the padding in order to\n                // render all nodes within the plot area (#11917).\n                if (this.nodeColumns) {\n                    var maxLength = this.nodeColumns.reduce(function (acc, col) { return Math.max(acc, col.length); }, 0);\n                    if (maxLength * nodePadding > this.chart.plotSizeY) {\n                        nodePadding = this.chart.plotSizeY / maxLength;\n                    }\n                }\n                return nodePadding;\n            };\n            /**\n             * Define hasData function for non-cartesian series.\n             * @private\n             * @return {boolean}\n             *         Returns true if the series has points at all.\n             */\n            SankeySeries.prototype.hasData = function () {\n                return !!this.processedXData.length; // != 0\n            };\n            /**\n             * Return the presentational attributes.\n             * @private\n             */\n            SankeySeries.prototype.pointAttribs = function (point, state) {\n                if (!point) {\n                    return {};\n                }\n                var series = this, level = point.isNode ? point.level : point.fromNode.level, levelOptions = series.mapOptionsToLevel[level || 0] || {}, options = point.options, stateOptions = (levelOptions.states && levelOptions.states[state || '']) || {}, values = [\n                    'colorByPoint',\n                    'borderColor',\n                    'borderWidth',\n                    'linkOpacity',\n                    'opacity'\n                ].reduce(function (obj, key) {\n                    obj[key] = pick(stateOptions[key], options[key], levelOptions[key], series.options[key]);\n                    return obj;\n                }, {}), color = pick(stateOptions.color, options.color, values.colorByPoint ? point.color : levelOptions.color);\n                // Node attributes\n                if (point.isNode) {\n                    return {\n                        fill: color,\n                        stroke: values.borderColor,\n                        'stroke-width': values.borderWidth,\n                        opacity: values.opacity\n                    };\n                }\n                // Link attributes\n                return {\n                    fill: Color.parse(color).setOpacity(values.linkOpacity).get()\n                };\n            };\n            SankeySeries.prototype.drawTracker = function () {\n                ColumnSeries.prototype.drawTracker.call(this, this.points);\n                ColumnSeries.prototype.drawTracker.call(this, this.nodes);\n            };\n            SankeySeries.prototype.drawPoints = function () {\n                ColumnSeries.prototype.drawPoints.call(this, this.points);\n                ColumnSeries.prototype.drawPoints.call(this, this.nodes);\n            };\n            SankeySeries.prototype.drawDataLabels = function () {\n                ColumnSeries.prototype.drawDataLabels.call(this, this.points);\n                ColumnSeries.prototype.drawDataLabels.call(this, this.nodes);\n            };\n            /**\n             * Run pre-translation by generating the nodeColumns.\n             * @private\n             */\n            SankeySeries.prototype.translate = function () {\n                if (!this.processedXData) {\n                    this.processData();\n                }\n                this.generatePoints();\n                this.nodeColumns = this.createNodeColumns();\n                var series = this, chart = this.chart, options = this.options, nodeColumns = this.nodeColumns, columnCount = nodeColumns.length;\n                this.nodeWidth = getNodeWidth(this, columnCount);\n                this.nodePadding = this.getNodePadding();\n                // Find out how much space is needed. Base it on the translation\n                // factor of the most spacious column.\n                this.translationFactor = nodeColumns.reduce(function (translationFactor, column) { return Math.min(translationFactor, column.sankeyColumn.getTranslationFactor(series)); }, Infinity);\n                this.colDistance =\n                    (chart.plotSizeX - this.nodeWidth -\n                        options.borderWidth) / Math.max(1, nodeColumns.length - 1);\n                // Calculate level options used in sankey and organization\n                series.mapOptionsToLevel = getLevelOptions({\n                    // NOTE: if support for allowTraversingTree is added, then from\n                    // should be the level of the root node.\n                    from: 1,\n                    levels: options.levels,\n                    to: nodeColumns.length - 1, // Height of the tree\n                    defaults: {\n                        borderColor: options.borderColor,\n                        borderRadius: options.borderRadius, // Organization series\n                        borderWidth: options.borderWidth,\n                        color: series.color,\n                        colorByPoint: options.colorByPoint,\n                        // NOTE: if support for allowTraversingTree is added, then\n                        // levelIsConstant should be optional.\n                        levelIsConstant: true,\n                        linkColor: options.linkColor, // Organization series\n                        linkLineWidth: options.linkLineWidth, // Organization series\n                        linkOpacity: options.linkOpacity,\n                        states: options.states\n                    }\n                });\n                // First translate all nodes so we can use them when drawing links\n                for (var _i = 0, nodeColumns_1 = nodeColumns; _i < nodeColumns_1.length; _i++) {\n                    var column = nodeColumns_1[_i];\n                    for (var _a = 0, column_1 = column; _a < column_1.length; _a++) {\n                        var node = column_1[_a];\n                        series.translateNode(node, column);\n                    }\n                }\n                // Then translate links\n                for (var _b = 0, _c = this.nodes; _b < _c.length; _b++) {\n                    var node = _c[_b];\n                    // Translate the links from this node\n                    for (var _d = 0, _e = node.linksFrom; _d < _e.length; _d++) {\n                        var linkPoint = _e[_d];\n                        // If weight is 0 - don't render the link path #12453,\n                        // render null points (for organization chart)\n                        if ((linkPoint.weight || linkPoint.isNull) && linkPoint.to) {\n                            series.translateLink(linkPoint);\n                            linkPoint.allowShadow = false;\n                        }\n                    }\n                }\n            };\n            /**\n             * Run translation operations for one link.\n             * @private\n             */\n            SankeySeries.prototype.translateLink = function (point) {\n                var getY = function (node, fromOrTo) {\n                    var linkTop = (node.offset(point, fromOrTo) *\n                        translationFactor);\n                    var y = Math.min(node.nodeY + linkTop, \n                    // Prevent links from spilling below the node (#12014)\n                    node.nodeY + (node.shapeArgs && node.shapeArgs.height || 0) - linkHeight);\n                    return y;\n                };\n                var fromNode = point.fromNode, toNode = point.toNode, chart = this.chart, inverted = chart.inverted, translationFactor = this.translationFactor, options = this.options, linkColorMode = pick(point.linkColorMode, options.linkColorMode), curvy = ((chart.inverted ? -this.colDistance : this.colDistance) *\n                    options.curveFactor), nodeLeft = fromNode.nodeX, right = toNode.nodeX, outgoing = point.outgoing;\n                var linkHeight = Math.max(point.weight * translationFactor, this.options.minLinkWidth), fromY = getY(fromNode, 'linksFrom'), toY = getY(toNode, 'linksTo'), nodeW = this.nodeWidth, straight = right > nodeLeft + nodeW;\n                if (chart.inverted) {\n                    fromY = chart.plotSizeY - fromY;\n                    toY = (chart.plotSizeY || 0) - toY;\n                    nodeW = -nodeW;\n                    linkHeight = -linkHeight;\n                    straight = nodeLeft > right;\n                }\n                point.shapeType = 'path';\n                point.linkBase = [\n                    fromY,\n                    fromY + linkHeight,\n                    toY,\n                    toY + linkHeight\n                ];\n                // Links going from left to right\n                if (straight && typeof toY === 'number') {\n                    point.shapeArgs = {\n                        d: [\n                            ['M', nodeLeft + nodeW, fromY],\n                            [\n                                'C',\n                                nodeLeft + nodeW + curvy,\n                                fromY,\n                                right - curvy,\n                                toY,\n                                right,\n                                toY\n                            ],\n                            ['L', right + (outgoing ? nodeW : 0), toY + linkHeight / 2],\n                            ['L', right, toY + linkHeight],\n                            [\n                                'C',\n                                right - curvy,\n                                toY + linkHeight,\n                                nodeLeft + nodeW + curvy,\n                                fromY + linkHeight,\n                                nodeLeft + nodeW, fromY + linkHeight\n                            ],\n                            ['Z']\n                        ]\n                    };\n                    // Experimental: Circular links pointing backwards. In\n                    // v6.1.0 this breaks the rendering completely, so even\n                    // this experimental rendering is an improvement. #8218.\n                    // @todo\n                    // - Make room for the link in the layout\n                    // - Automatically determine if the link should go up or\n                    //   down.\n                }\n                else if (typeof toY === 'number') {\n                    var bend = 20, vDist = chart.plotHeight - fromY - linkHeight, x1 = right - bend - linkHeight, x2 = right - bend, x3 = right, x4 = nodeLeft + nodeW, x5 = x4 + bend, x6 = x5 + linkHeight, fy1 = fromY, fy2 = fromY + linkHeight, fy3 = fy2 + bend, y4 = fy3 + vDist, y5 = y4 + bend, y6 = y5 + linkHeight, ty1 = toY, ty2 = ty1 + linkHeight, ty3 = ty2 + bend, cfy1 = fy2 - linkHeight * 0.7, cy2 = y5 + linkHeight * 0.7, cty1 = ty2 - linkHeight * 0.7, cx1 = x3 - linkHeight * 0.7, cx2 = x4 + linkHeight * 0.7;\n                    point.shapeArgs = {\n                        d: [\n                            ['M', x4, fy1],\n                            ['C', cx2, fy1, x6, cfy1, x6, fy3],\n                            ['L', x6, y4],\n                            ['C', x6, cy2, cx2, y6, x4, y6],\n                            ['L', x3, y6],\n                            ['C', cx1, y6, x1, cy2, x1, y4],\n                            ['L', x1, ty3],\n                            ['C', x1, cty1, cx1, ty1, x3, ty1],\n                            ['L', x3, ty2],\n                            ['C', x2, ty2, x2, ty2, x2, ty3],\n                            ['L', x2, y4],\n                            ['C', x2, y5, x2, y5, x3, y5],\n                            ['L', x4, y5],\n                            ['C', x5, y5, x5, y5, x5, y4],\n                            ['L', x5, fy3],\n                            ['C', x5, fy2, x5, fy2, x4, fy2],\n                            ['Z']\n                        ]\n                    };\n                }\n                // Place data labels in the middle\n                point.dlBox = {\n                    x: nodeLeft + (right - nodeLeft + nodeW) / 2,\n                    y: fromY + (toY - fromY) / 2,\n                    height: linkHeight,\n                    width: 0\n                };\n                // And set the tooltip anchor in the middle\n                point.tooltipPos = chart.inverted ? [\n                    chart.plotSizeY - point.dlBox.y - linkHeight / 2,\n                    chart.plotSizeX - point.dlBox.x\n                ] : [\n                    point.dlBox.x,\n                    point.dlBox.y + linkHeight / 2\n                ];\n                // Pass test in drawPoints. plotX/Y needs to be defined for dataLabels.\n                // #15863\n                point.y = point.plotY = 1;\n                point.x = point.plotX = 1;\n                if (!point.options.color) {\n                    if (linkColorMode === 'from') {\n                        point.color = fromNode.color;\n                    }\n                    else if (linkColorMode === 'to') {\n                        point.color = toNode.color;\n                    }\n                    else if (linkColorMode === 'gradient') {\n                        var fromColor = color(fromNode.color).get(), toColor = color(toNode.color).get();\n                        point.color = {\n                            linearGradient: {\n                                x1: 1,\n                                x2: 0,\n                                y1: 0,\n                                y2: 0\n                            },\n                            stops: [\n                                [0, inverted ? fromColor : toColor],\n                                [1, inverted ? toColor : fromColor]\n                            ]\n                        };\n                    }\n                }\n            };\n            /**\n             * Run translation operations for one node.\n             * @private\n             */\n            SankeySeries.prototype.translateNode = function (node, column) {\n                var translationFactor = this.translationFactor, chart = this.chart, options = this.options, borderRadius = options.borderRadius, _a = options.borderWidth, borderWidth = _a === void 0 ? 0 : _a, sum = node.getSum(), nodeHeight = Math.max(Math.round(sum * translationFactor), this.options.minLinkWidth), nodeWidth = Math.round(this.nodeWidth), nodeOffset = column.sankeyColumn.offset(node, translationFactor), fromNodeTop = crisp(pick(nodeOffset.absoluteTop, (column.sankeyColumn.top(translationFactor) +\n                    nodeOffset.relativeTop)), borderWidth), left = crisp(this.colDistance * node.column +\n                    borderWidth / 2, borderWidth) + relativeLength(node.options[chart.inverted ?\n                    'offsetVertical' :\n                    'offsetHorizontal'] || 0, nodeWidth), nodeLeft = chart.inverted ?\n                    chart.plotSizeX - left :\n                    left;\n                node.sum = sum;\n                // If node sum is 0, don't render the rect #12453\n                if (sum) {\n                    // Draw the node\n                    node.shapeType = 'roundedRect';\n                    node.nodeX = nodeLeft;\n                    node.nodeY = fromNodeTop;\n                    var x = nodeLeft, y = fromNodeTop, width = node.options.width || options.width || nodeWidth, height = node.options.height || options.height || nodeHeight;\n                    // Border radius should not greater than half the height of the node\n                    // #18956\n                    var r = clamp(relativeLength((typeof borderRadius === 'object' ?\n                        borderRadius.radius :\n                        borderRadius || 0), width), 0, nodeHeight / 2);\n                    if (chart.inverted) {\n                        x = nodeLeft - nodeWidth;\n                        y = chart.plotSizeY - fromNodeTop - nodeHeight;\n                        width = node.options.height || options.height || nodeWidth;\n                        height = node.options.width || options.width || nodeHeight;\n                    }\n                    // Calculate data label options for the point\n                    node.dlOptions = SankeySeries.getDLOptions({\n                        level: this.mapOptionsToLevel[node.level],\n                        optionsPoint: node.options\n                    });\n                    // Pass test in drawPoints\n                    node.plotX = 1;\n                    node.plotY = 1;\n                    // Set the anchor position for tooltips\n                    node.tooltipPos = chart.inverted ? [\n                        chart.plotSizeY - y - height / 2,\n                        chart.plotSizeX - x - width / 2\n                    ] : [\n                        x + width / 2,\n                        y + height / 2\n                    ];\n                    node.shapeArgs = {\n                        x: x,\n                        y: y,\n                        width: width,\n                        height: height,\n                        r: r,\n                        display: node.hasShape() ? '' : 'none'\n                    };\n                }\n                else {\n                    node.dlOptions = {\n                        enabled: false\n                    };\n                }\n            };\n            /* *\n             *\n             *  Static Properties\n             *\n             * */\n            SankeySeries.defaultOptions = merge(ColumnSeries.defaultOptions, SankeySeriesDefaults);\n            return SankeySeries;\n        }(ColumnSeries));\n        NodesComposition.compose(SankeyPoint, SankeySeries);\n        extend(SankeySeries.prototype, {\n            animate: LineSeries.prototype.animate,\n            // Create a single node that holds information on incoming and outgoing\n            // links.\n            createNode: NodesComposition.createNode,\n            forceDL: true,\n            invertible: true,\n            isCartesian: false,\n            orderNodes: true,\n            noSharedTooltip: true,\n            pointArrayMap: ['from', 'to', 'weight'],\n            pointClass: SankeyPoint,\n            searchPoint: H.noop\n        });\n        SeriesRegistry.registerSeriesType('sankey', SankeySeries);\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n        /* *\n         *\n         *  API Declarations\n         *\n         * */\n        /**\n         * A node in a sankey diagram.\n         *\n         * @interface Highcharts.SankeyNodeObject\n         * @extends Highcharts.Point\n         * @product highcharts\n         */ /**\n        * The color of the auto generated node.\n        *\n        * @name Highcharts.SankeyNodeObject#color\n        * @type {Highcharts.ColorString|Highcharts.GradientColorObject|Highcharts.PatternObject}\n        */ /**\n        * The color index of the auto generated node, especially for use in styled\n        * mode.\n        *\n        * @name Highcharts.SankeyNodeObject#colorIndex\n        * @type {number}\n        */ /**\n        * An optional column index of where to place the node. The default behaviour is\n        * to place it next to the preceding node.\n        *\n        * @see {@link https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/plotoptions/sankey-node-column/|Highcharts-Demo:}\n        *      Specified node column\n        *\n        * @name Highcharts.SankeyNodeObject#column\n        * @type {number}\n        * @since 6.0.5\n        */ /**\n        * The id of the auto-generated node, refering to the `from` or `to` setting of\n        * the link.\n        *\n        * @name Highcharts.SankeyNodeObject#id\n        * @type {string}\n        */ /**\n        * The name to display for the node in data labels and tooltips. Use this when\n        * the name is different from the `id`. Where the id must be unique for each\n        * node, this is not necessary for the name.\n        *\n        * @see {@link https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/css/sankey/|Highcharts-Demo:}\n        *         Sankey diagram with node options\n        *\n        * @name Highcharts.SankeyNodeObject#name\n        * @type {string}\n        * @product highcharts\n        */ /**\n        * This option is deprecated, use\n        * {@link Highcharts.SankeyNodeObject#offsetHorizontal} and\n        * {@link Highcharts.SankeyNodeObject#offsetVertical} instead.\n        *\n        * The vertical offset of a node in terms of weight. Positive values shift the\n        * node downwards, negative shift it upwards.\n        *\n        * If a percentage string is given, the node is offset by the percentage of the\n        * node size plus `nodePadding`.\n        *\n        * @see {@link https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/plotoptions/sankey-node-column/|Highcharts-Demo:}\n        *         Specified node offset\n        *\n        * @deprecated\n        * @name Highcharts.SankeyNodeObject#offset\n        * @type {number|string}\n        * @default 0\n        * @since 6.0.5\n        */ /**\n        * The horizontal offset of a node. Positive values shift the node right,\n        * negative shift it left.\n        *\n        * If a percentage string is given, the node is offset by the percentage of the\n        * node size.\n        *\n        * @see {@link https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/plotoptions/sankey-node-column/|Highcharts-Demo:}\n        *         Specified node offset\n        *\n        * @name Highcharts.SankeyNodeObject#offsetHorizontal\n        * @type {number|string}\n        * @since 9.3.0\n        */ /**\n        * The vertical offset of a node. Positive values shift the node down,\n        * negative shift it up.\n        *\n        * If a percentage string is given, the node is offset by the percentage of the\n        * node size.\n        *\n        * @see {@link https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/plotoptions/sankey-node-column/|Highcharts-Demo:}\n        *         Specified node offset\n        *\n        * @name Highcharts.SankeyNodeObject#offsetVertical\n        * @type {number|string}\n        * @since 9.3.0\n        */\n        /**\n         * Formatter callback function.\n         *\n         * @callback Highcharts.SeriesSankeyDataLabelsFormatterCallbackFunction\n         *\n         * @param {Highcharts.SeriesSankeyDataLabelsFormatterContextObject|Highcharts.PointLabelObject} this\n         *        Data label context to format\n         *\n         * @return {string|undefined}\n         *         Formatted data label text\n         */\n        /**\n         * Context for the node formatter function.\n         *\n         * @interface Highcharts.SeriesSankeyDataLabelsFormatterContextObject\n         * @extends Highcharts.PointLabelObject\n         */ /**\n        * The node object. The node name, if defined, is available through\n        * `this.point.name`.\n        * @name Highcharts.SeriesSankeyDataLabelsFormatterContextObject#point\n        * @type {Highcharts.SankeyNodeObject}\n        */\n        ''; // Detach doclets above\n\n        return SankeySeries;\n    });\n    _registerModule(_modules, 'masters/modules/sankey.src.js', [_modules['Core/Globals.js']], function (Highcharts) {\n\n\n        return Highcharts;\n    });\n}));\n"],"names":["factory","module","exports","define","amd","Highcharts","undefined","_modules","_registerModule","obj","path","args","fn","hasOwnProperty","apply","CustomEvent","win","dispatchEvent","detail","SeriesRegistry","U","NodesComposition","_a","series","seriesProto","prototype","pointProto","pointClass","defined","extend","find","merge","pick","destroy","data","concat","points","nodes","arguments","setData","forEach","node","length","setNodeState","state","others","isNode","linksTo","linksFrom","fromNode","toNode","linkOrNode","setState","graphic","updateNode","options","redraw","animation","runEvent","_this","dataLength","linkConfig","index","update","call","nodeIndex","reduce","prevIndex","n","id","nodeConfig","push","chart","compose","PointClass","SeriesClass","createNode","findById","newNode_1","className","y","getSum","sumTo","sumFrom","link","weight","Math","max","offset","point","coll","i","hasShape","outgoing","formatPrefix","name","mass","marker","radius","generatePoints","nodeLookup","colorCounter","level","from","styledMode","colorIndex","color","to","Point","extendStatics","__extends","d","b","Object","setPrototypeOf","__proto__","Array","p","TypeError","String","__","constructor","create","ColumnSeries","seriesTypes","column","_super","SankeyPoint","applyOptions","x","getClassName","getFromNode","fromColumn","setNodeColumn","isValid","borderWidth","colorByPoint","curveFactor","dataLabels","enabled","backgroundColor","crop","nodeFormat","nodeFormatter","format","formatter","inside","inactiveOtherPoints","linkColorMode","linkOpacity","opacity","minLinkWidth","nodeAlignment","nodeWidth","nodePadding","nodeDistance","showInLegend","states","hover","inactive","duration","tooltip","followPointer","headerFormat","pointFormat","SankeyColumnComposition","SankeyColumnAdditions","relativeLength","sankeyColumnArray","sankeyColumn","getTranslationFactor","skipPoint","slice","factor","remainingHeight","plotSizeY","sum","splice","_i","nodes_1","top","height","center","bottom","left","equalNodes","maxNodesLength","inverted","plotHeight","plotWidth","width","plotSizeX","round","totalNodeOffset","is","hangsFrom","absoluteTop","nodeY","directionOffset","optionOffset","relativeTop","Color","isArray","isNumber","isObject","getColor","colorVariation","colorIndexByPoint","mapOptionsToLevel","parentColor","parentColorIndex","colors","siblings","chartOptionsChart","colorCount","key","parse","brighten","get","getLevelOptions","params","defaults","converted","levels","result","item","levelIsConstant","getNodeWidth","columnCount","_b","_c","test","fraction","parseFloat","nDistance","Number","setTreeValues","tree","before","idRoot","nodeRoot","mapIdToNode","optionsPoint","children","childrenTotal","levelDynamic","visible","child","newOptions","val","value","isLeaf","updateRootId","rootId","rootNode","userOptions","H","deg2rad","addEvent","uniqueKey","setTextPath","textPathOptions","attributes","dy","startOffset","textAnchor","url","renderer","textWrapper","text","textPath","undo","e","textPathId","attr","textAttribs","dx","transform","box","tagName","href","added","textCache","buildText","setPolygon","event","bBox","tp","element","querySelector","polygon","fontMetrics","b_1","descender_1","h","lineCleanerRegex","RegExp","lines","innerHTML","replace","split","numOfLines","appendTopAndBottom","charIndex","positionOfChar","rotation","getRotationOfChar","cosRot","cos","sinRot","sin","lineIndex","lineLen","line","lineCharIndex","srcCharIndex","getStartPositionOfChar","lower","upper","unshift","charPos","getEndPositionOfChar","_d","drawTextPath","labelOptions","useHTML","getDataLabelPath","dataLabelPath","SVGElementClass","svgElementProto","SankeySeriesDefaults","TU","SVGElement","TextPath","LineSeries","clamp","crisp","stableSort","SankeySeries","getDLOptions","style","createNodeColumns","columns","order","orderNodes","a","getNodePadding","nodeColumns","maxLength","acc","col","hasData","processedXData","pointAttribs","levelOptions","stateOptions","values","fill","stroke","borderColor","setOpacity","drawTracker","drawPoints","drawDataLabels","translate","processData","translationFactor","min","Infinity","colDistance","borderRadius","linkColor","linkLineWidth","nodeColumns_1","column_1","translateNode","_e","linkPoint","isNull","translateLink","allowShadow","getY","fromOrTo","linkTop","shapeArgs","linkHeight","curvy","nodeLeft","nodeX","right","fromY","toY","nodeW","straight","shapeType","linkBase","vDist","x1","x2","x4","x5","x6","fy1","fy2","fy3","y4","y5","y6","ty1","ty2","ty3","cfy1","cy2","cty1","cx1","x3","cx2","dlBox","tooltipPos","plotY","plotX","fromColor","toColor","linearGradient","y1","y2","stops","nodeHeight","nodeOffset","fromNodeTop","r","dlOptions","display","defaultOptions","animate","forceDL","invertible","isCartesian","noSharedTooltip","pointArrayMap","searchPoint","noop","registerSeriesType"],"mappings":"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"}